<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=prev href=../context_tools.html><link rel=next href=changes.html><link rel=icon href=../../../../../img/favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.9"><title>create - ayon-core</title><link rel=stylesheet href=../../../../../assets/stylesheets/main.4af4bdda.min.css><link rel=stylesheet href=../../../../../assets/stylesheets/palette.06af60db.min.css><script src=https://unpkg.com/iframe-worker/shim></script><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../../../assets/_mkdocstrings.css><link rel=stylesheet href=../../../../../css/custom.css><script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#client.ayon_core.pipeline.create class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../../../index.html title=ayon-core class="md-header__button md-logo" aria-label=ayon-core data-md-component=logo> <img src=../../../../../img/ay-symbol-blackw-full.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> ayon-core </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> create </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/ynput/ayon-core title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../../../index.html title=ayon-core class="md-nav__button md-logo" aria-label=ayon-core data-md-component=logo> <img src=../../../../../img/ay-symbol-blackw-full.png alt=logo> </a> ayon-core </label> <div class=md-nav__source> <a href=https://github.com/ynput/ayon-core title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../index.html class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../../../../../license.html class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1 checked> <label class=md-nav__link for=__nav_3_1 id=__nav_3_1_label tabindex=0> <span class=md-ellipsis> client </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> client </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1 checked> <div class="md-nav__link md-nav__container"> <a href=../../index.html class="md-nav__link "> <span class=md-ellipsis> ayon_core </span> </a> <label class="md-nav__link " for=__nav_3_1_1 id=__nav_3_1_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_1_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1> <span class="md-nav__icon md-icon"></span> ayon_core </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../__main__.html class=md-nav__link> <span class=md-ellipsis> __main__ </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../addon/base.html class=md-nav__link> <span class=md-ellipsis> addon </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../../cli.html class=md-nav__link> <span class=md-ellipsis> cli </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../hooks/pre_add_last_workfile_arg.html class=md-nav__link> <span class=md-ellipsis> hooks </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../host/dirmap.html class=md-nav__link> <span class=md-ellipsis> host </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../lib/attribute_definitions.html class=md-nav__link> <span class=md-ellipsis> lib </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1_7 checked> <div class="md-nav__link md-nav__container"> <a href=../index.html class="md-nav__link "> <span class=md-ellipsis> pipeline </span> </a> <label class="md-nav__link " for=__nav_3_1_1_7 id=__nav_3_1_1_7_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_1_1_7_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1_7> <span class="md-nav__icon md-icon"></span> pipeline </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../actions.html class=md-nav__link> <span class=md-ellipsis> actions </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../anatomy/anatomy.html class=md-nav__link> <span class=md-ellipsis> anatomy </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../colorspace.html class=md-nav__link> <span class=md-ellipsis> colorspace </span> </a> </li> <li class=md-nav__item> <a href=../constants.html class=md-nav__link> <span class=md-ellipsis> constants </span> </a> </li> <li class=md-nav__item> <a href=../context_tools.html class=md-nav__link> <span class=md-ellipsis> context_tools </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1_7_6 checked> <div class="md-nav__link md-nav__container"> <a href=index.html class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> create </span> </a> <label class="md-nav__link md-nav__link--active" for=__nav_3_1_1_7_6 id=__nav_3_1_1_7_6_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=5 aria-labelledby=__nav_3_1_1_7_6_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1_7_6> <span class="md-nav__icon md-icon"></span> create </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=changes.html class=md-nav__link> <span class=md-ellipsis> changes </span> </a> </li> <li class=md-nav__item> <a href=constants.html class=md-nav__link> <span class=md-ellipsis> constants </span> </a> </li> <li class=md-nav__item> <a href=context.html class=md-nav__link> <span class=md-ellipsis> context </span> </a> </li> <li class=md-nav__item> <a href=creator_plugins.html class=md-nav__link> <span class=md-ellipsis> creator_plugins </span> </a> </li> <li class=md-nav__item> <a href=exceptions.html class=md-nav__link> <span class=md-ellipsis> exceptions </span> </a> </li> <li class=md-nav__item> <a href=legacy_create.html class=md-nav__link> <span class=md-ellipsis> legacy_create </span> </a> </li> <li class=md-nav__item> <a href=product_name.html class=md-nav__link> <span class=md-ellipsis> product_name </span> </a> </li> <li class=md-nav__item> <a href=structures.html class=md-nav__link> <span class=md-ellipsis> structures </span> </a> </li> <li class=md-nav__item> <a href=utils.html class=md-nav__link> <span class=md-ellipsis> utils </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../delivery.html class=md-nav__link> <span class=md-ellipsis> delivery </span> </a> </li> <li class=md-nav__item> <a href=../editorial.html class=md-nav__link> <span class=md-ellipsis> editorial </span> </a> </li> <li class=md-nav__item> <a href=../entity_uri.html class=md-nav__link> <span class=md-ellipsis> entity_uri </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../farm/patterning.html class=md-nav__link> <span class=md-ellipsis> farm </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../load/plugins.html class=md-nav__link> <span class=md-ellipsis> load </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../plugin_discover.html class=md-nav__link> <span class=md-ellipsis> plugin_discover </span> </a> </li> <li class=md-nav__item> <a href=../project_folders.html class=md-nav__link> <span class=md-ellipsis> project_folders </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../publish/abstract_collect_render.html class=md-nav__link> <span class=md-ellipsis> publish </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../schema/index.html class=md-nav__link> <span class=md-ellipsis> schema </span> </a> </li> <li class=md-nav__item> <a href=../staging_dir.html class=md-nav__link> <span class=md-ellipsis> staging_dir </span> </a> </li> <li class=md-nav__item> <a href=../tempdir.html class=md-nav__link> <span class=md-ellipsis> tempdir </span> </a> </li> <li class=md-nav__item> <a href=../template_data.html class=md-nav__link> <span class=md-ellipsis> template_data </span> </a> </li> <li class=md-nav__item> <a href=../thumbnails.html class=md-nav__link> <span class=md-ellipsis> thumbnails </span> </a> </li> <li class=md-nav__item> <a href=../usdlib.html class=md-nav__link> <span class=md-ellipsis> usdlib </span> </a> </li> <li class=md-nav__item> <a href=../version_start.html class=md-nav__link> <span class=md-ellipsis> version_start </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../workfile/build_workfile.html class=md-nav__link> <span class=md-ellipsis> workfile </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../plugins/actions/open_file_explorer.html class=md-nav__link> <span class=md-ellipsis> plugins </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../../resources/index.html class=md-nav__link> <span class=md-ellipsis> resources </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../scripts/ocio_wrapper.html class=md-nav__link> <span class=md-ellipsis> scripts </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../settings/lib.html class=md-nav__link> <span class=md-ellipsis> settings </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../style/color_defs.html class=md-nav__link> <span class=md-ellipsis> style </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../tests/conftest.html class=md-nav__link> <span class=md-ellipsis> tests </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../tools/attribute_defs/_constants.html class=md-nav__link> <span class=md-ellipsis> tools </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../vendor/python/qargparse.html class=md-nav__link> <span class=md-ellipsis> vendor </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../../version.html class=md-nav__link> <span class=md-ellipsis> version </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../server/settings/conversion.html class=md-nav__link> <span class=md-ellipsis> server </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create class=md-nav__link> <span class=md-ellipsis> create </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.AttributeValues class=md-nav__link> <span class=md-ellipsis> AttributeValues </span> </a> <nav class=md-nav aria-label=AttributeValues> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.AttributeValues.attr_defs class=md-nav__link> <span class=md-ellipsis> attr_defs </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.AttributeValues.data_to_store class=md-nav__link> <span class=md-ellipsis> data_to_store </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.AttributeValues.get_serialized_attr_defs class=md-nav__link> <span class=md-ellipsis> get_serialized_attr_defs </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.AutoCreator class=md-nav__link> <span class=md-ellipsis> AutoCreator </span> </a> <nav class=md-nav aria-label=AutoCreator> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.AutoCreator.remove_instances class=md-nav__link> <span class=md-ellipsis> remove_instances </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.BaseCreator class=md-nav__link> <span class=md-ellipsis> BaseCreator </span> </a> <nav class=md-nav aria-label=BaseCreator> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.BaseCreator.collection_shared_data class=md-nav__link> <span class=md-ellipsis> collection_shared_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.BaseCreator.identifier class=md-nav__link> <span class=md-ellipsis> identifier </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.BaseCreator.log class=md-nav__link> <span class=md-ellipsis> log </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.BaseCreator.product_type class=md-nav__link> <span class=md-ellipsis> product_type </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.BaseCreator.project_anatomy class=md-nav__link> <span class=md-ellipsis> project_anatomy </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.BaseCreator.project_name class=md-nav__link> <span class=md-ellipsis> project_name </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.BaseCreator.apply_settings class=md-nav__link> <span class=md-ellipsis> apply_settings </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.BaseCreator.collect_instances class=md-nav__link> <span class=md-ellipsis> collect_instances </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.BaseCreator.create class=md-nav__link> <span class=md-ellipsis> create </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.BaseCreator.get_attr_defs_for_instance class=md-nav__link> <span class=md-ellipsis> get_attr_defs_for_instance </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.BaseCreator.get_dynamic_data class=md-nav__link> <span class=md-ellipsis> get_dynamic_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.BaseCreator.get_group_label class=md-nav__link> <span class=md-ellipsis> get_group_label </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.BaseCreator.get_icon class=md-nav__link> <span class=md-ellipsis> get_icon </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.BaseCreator.get_instance_attr_defs class=md-nav__link> <span class=md-ellipsis> get_instance_attr_defs </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.BaseCreator.get_next_versions_for_instances class=md-nav__link> <span class=md-ellipsis> get_next_versions_for_instances </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.BaseCreator.get_product_name class=md-nav__link> <span class=md-ellipsis> get_product_name </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.BaseCreator.register_callbacks class=md-nav__link> <span class=md-ellipsis> register_callbacks </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.BaseCreator.remove_instances class=md-nav__link> <span class=md-ellipsis> remove_instances </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.BaseCreator.set_instance_thumbnail_path class=md-nav__link> <span class=md-ellipsis> set_instance_thumbnail_path </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.BaseCreator.update_instances class=md-nav__link> <span class=md-ellipsis> update_instances </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.ConvertorItem class=md-nav__link> <span class=md-ellipsis> ConvertorItem </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext class=md-nav__link> <span class=md-ellipsis> CreateContext </span> </a> <nav class=md-nav aria-label=CreateContext> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.collection_shared_data class=md-nav__link> <span class=md-ellipsis> collection_shared_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.context_has_changed class=md-nav__link> <span class=md-ellipsis> context_has_changed </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.host_is_valid class=md-nav__link> <span class=md-ellipsis> host_is_valid </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.log class=md-nav__link> <span class=md-ellipsis> log </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.publish_attributes class=md-nav__link> <span class=md-ellipsis> publish_attributes </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.sorted_autocreators class=md-nav__link> <span class=md-ellipsis> sorted_autocreators </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.sorted_creators class=md-nav__link> <span class=md-ellipsis> sorted_creators </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.add_create_attr_defs_change_callback class=md-nav__link> <span class=md-ellipsis> add_create_attr_defs_change_callback </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.add_instances_added_callback class=md-nav__link> <span class=md-ellipsis> add_instances_added_callback </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.add_instances_removed_callback class=md-nav__link> <span class=md-ellipsis> add_instances_removed_callback </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.add_pre_create_attr_defs_change_callback class=md-nav__link> <span class=md-ellipsis> add_pre_create_attr_defs_change_callback </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.add_publish_attr_defs_change_callback class=md-nav__link> <span class=md-ellipsis> add_publish_attr_defs_change_callback </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.add_value_changed_callback class=md-nav__link> <span class=md-ellipsis> add_value_changed_callback </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.bulk_instances_collection class=md-nav__link> <span class=md-ellipsis> bulk_instances_collection </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.context_data_changes class=md-nav__link> <span class=md-ellipsis> context_data_changes </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.context_data_to_store class=md-nav__link> <span class=md-ellipsis> context_data_to_store </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.create class=md-nav__link> <span class=md-ellipsis> create </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.create_plugin_pre_create_attr_defs_changed class=md-nav__link> <span class=md-ellipsis> create_plugin_pre_create_attr_defs_changed </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.create_with_unified_error class=md-nav__link> <span class=md-ellipsis> create_with_unified_error </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.creator_adds_instance class=md-nav__link> <span class=md-ellipsis> creator_adds_instance </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.creator_removed_instance class=md-nav__link> <span class=md-ellipsis> creator_removed_instance </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.execute_autocreators class=md-nav__link> <span class=md-ellipsis> execute_autocreators </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.find_convertor_items class=md-nav__link> <span class=md-ellipsis> find_convertor_items </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.get_current_folder_entity class=md-nav__link> <span class=md-ellipsis> get_current_folder_entity </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.get_current_folder_path class=md-nav__link> <span class=md-ellipsis> get_current_folder_path </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.get_current_project_anatomy class=md-nav__link> <span class=md-ellipsis> get_current_project_anatomy </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.get_current_project_entity class=md-nav__link> <span class=md-ellipsis> get_current_project_entity </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.get_current_project_name class=md-nav__link> <span class=md-ellipsis> get_current_project_name </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.get_current_task_entity class=md-nav__link> <span class=md-ellipsis> get_current_task_entity </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.get_current_task_name class=md-nav__link> <span class=md-ellipsis> get_current_task_name </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.get_current_task_type class=md-nav__link> <span class=md-ellipsis> get_current_task_type </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.get_current_workfile_path class=md-nav__link> <span class=md-ellipsis> get_current_workfile_path </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.get_folder_entities class=md-nav__link> <span class=md-ellipsis> get_folder_entities </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.get_folder_entity class=md-nav__link> <span class=md-ellipsis> get_folder_entity </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.get_host_misssing_methods class=md-nav__link> <span class=md-ellipsis> get_host_misssing_methods </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.get_instance_by_id class=md-nav__link> <span class=md-ellipsis> get_instance_by_id </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.get_instances_context_info class=md-nav__link> <span class=md-ellipsis> get_instances_context_info </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.get_instances_task_entities class=md-nav__link> <span class=md-ellipsis> get_instances_task_entities </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.get_sorted_creators class=md-nav__link> <span class=md-ellipsis> get_sorted_creators </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.get_task_entities class=md-nav__link> <span class=md-ellipsis> get_task_entities </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.get_task_entity class=md-nav__link> <span class=md-ellipsis> get_task_entity </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.get_template_data class=md-nav__link> <span class=md-ellipsis> get_template_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.instance_create_attr_defs_changed class=md-nav__link> <span class=md-ellipsis> instance_create_attr_defs_changed </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.instance_publish_attr_defs_changed class=md-nav__link> <span class=md-ellipsis> instance_publish_attr_defs_changed </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.instance_values_changed class=md-nav__link> <span class=md-ellipsis> instance_values_changed </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.publish_attribute_value_changed class=md-nav__link> <span class=md-ellipsis> publish_attribute_value_changed </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.refresh_thumbnails class=md-nav__link> <span class=md-ellipsis> refresh_thumbnails </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.remove_instances class=md-nav__link> <span class=md-ellipsis> remove_instances </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.reset class=md-nav__link> <span class=md-ellipsis> reset </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.reset_context_data class=md-nav__link> <span class=md-ellipsis> reset_context_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.reset_current_context class=md-nav__link> <span class=md-ellipsis> reset_current_context </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.reset_finalization class=md-nav__link> <span class=md-ellipsis> reset_finalization </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.reset_instances class=md-nav__link> <span class=md-ellipsis> reset_instances </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.reset_plugins class=md-nav__link> <span class=md-ellipsis> reset_plugins </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.reset_preparation class=md-nav__link> <span class=md-ellipsis> reset_preparation </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.run_convertor class=md-nav__link> <span class=md-ellipsis> run_convertor </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.run_convertors class=md-nav__link> <span class=md-ellipsis> run_convertors </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.save_changes class=md-nav__link> <span class=md-ellipsis> save_changes </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreateContext.set_context_publish_plugin_attr_defs class=md-nav__link> <span class=md-ellipsis> set_context_publish_plugin_attr_defs </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreatedInstance class=md-nav__link> <span class=md-ellipsis> CreatedInstance </span> </a> <nav class=md-nav aria-label=CreatedInstance> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreatedInstance.creator_attribute_defs class=md-nav__link> <span class=md-ellipsis> creator_attribute_defs </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreatedInstance.data class=md-nav__link> <span class=md-ellipsis> data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreatedInstance.has_promised_context class=md-nav__link> <span class=md-ellipsis> has_promised_context </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreatedInstance.id class=md-nav__link> <span class=md-ellipsis> id </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreatedInstance.transient_data class=md-nav__link> <span class=md-ellipsis> transient_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreatedInstance.add_members class=md-nav__link> <span class=md-ellipsis> add_members </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreatedInstance.attribute_value_changed class=md-nav__link> <span class=md-ellipsis> attribute_value_changed </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreatedInstance.changes class=md-nav__link> <span class=md-ellipsis> changes </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreatedInstance.data_to_store class=md-nav__link> <span class=md-ellipsis> data_to_store </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreatedInstance.from_existing class=md-nav__link> <span class=md-ellipsis> from_existing </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreatedInstance.mark_as_stored class=md-nav__link> <span class=md-ellipsis> mark_as_stored </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreatedInstance.publish_attribute_value_changed class=md-nav__link> <span class=md-ellipsis> publish_attribute_value_changed </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreatedInstance.set_create_attr_defs class=md-nav__link> <span class=md-ellipsis> set_create_attr_defs </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreatedInstance.set_publish_plugin_attr_defs class=md-nav__link> <span class=md-ellipsis> set_publish_plugin_attr_defs </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.Creator class=md-nav__link> <span class=md-ellipsis> Creator </span> </a> <nav class=md-nav aria-label=Creator> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.Creator.show_order class=md-nav__link> <span class=md-ellipsis> show_order </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.Creator.apply_staging_dir class=md-nav__link> <span class=md-ellipsis> apply_staging_dir </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.Creator.create class=md-nav__link> <span class=md-ellipsis> create </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.Creator.get_default_variant class=md-nav__link> <span class=md-ellipsis> get_default_variant </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.Creator.get_default_variants class=md-nav__link> <span class=md-ellipsis> get_default_variants </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.Creator.get_description class=md-nav__link> <span class=md-ellipsis> get_description </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.Creator.get_detail_description class=md-nav__link> <span class=md-ellipsis> get_detail_description </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.Creator.get_pre_create_attr_defs class=md-nav__link> <span class=md-ellipsis> get_pre_create_attr_defs </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.Creator.get_staging_dir class=md-nav__link> <span class=md-ellipsis> get_staging_dir </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreatorAttributeValues class=md-nav__link> <span class=md-ellipsis> CreatorAttributeValues </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreatorError class=md-nav__link> <span class=md-ellipsis> CreatorError </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.CreatorsOperationFailed class=md-nav__link> <span class=md-ellipsis> CreatorsOperationFailed </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.HostMissRequiredMethod class=md-nav__link> <span class=md-ellipsis> HostMissRequiredMethod </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.ImmutableKeyError class=md-nav__link> <span class=md-ellipsis> ImmutableKeyError </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.LegacyCreator class=md-nav__link> <span class=md-ellipsis> LegacyCreator </span> </a> <nav class=md-nav aria-label=LegacyCreator> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.LegacyCreator.apply_settings class=md-nav__link> <span class=md-ellipsis> apply_settings </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.LegacyCreator.get_dynamic_data class=md-nav__link> <span class=md-ellipsis> get_dynamic_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.LegacyCreator.get_product_name class=md-nav__link> <span class=md-ellipsis> get_product_name </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.PublishAttributeValues class=md-nav__link> <span class=md-ellipsis> PublishAttributeValues </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.PublishAttributes class=md-nav__link> <span class=md-ellipsis> PublishAttributes </span> </a> <nav class=md-nav aria-label=PublishAttributes> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.PublishAttributes.data_to_store class=md-nav__link> <span class=md-ellipsis> data_to_store </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.PublishAttributes.pop class=md-nav__link> <span class=md-ellipsis> pop </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.PublishAttributes.set_publish_plugin_attr_defs class=md-nav__link> <span class=md-ellipsis> set_publish_plugin_attr_defs </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.UnavailableSharedData class=md-nav__link> <span class=md-ellipsis> UnavailableSharedData </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.cache_and_get_instances class=md-nav__link> <span class=md-ellipsis> cache_and_get_instances </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.get_last_versions_for_instances class=md-nav__link> <span class=md-ellipsis> get_last_versions_for_instances </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.get_legacy_creator_by_name class=md-nav__link> <span class=md-ellipsis> get_legacy_creator_by_name </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.get_next_versions_for_instances class=md-nav__link> <span class=md-ellipsis> get_next_versions_for_instances </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.get_product_name class=md-nav__link> <span class=md-ellipsis> get_product_name </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.get_product_name_template class=md-nav__link> <span class=md-ellipsis> get_product_name_template </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>create</h1> <div class="doc doc-object doc-module"> <a id=client.ayon_core.pipeline.create></a> <div class="doc doc-contents first"> <div class="doc doc-children"> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.create.AttributeValues class="doc doc-heading"> <code>AttributeValues</code> </h2> <div class="doc doc-contents "> <p>Container which keep values of Attribute definitions.</p> <p>Goal is to have one object which hold values of attribute definitions for single instance.</p> <p>Has dictionary like methods. Not all of them are allowed all the time.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>parent</code> </td> <td> <code><span title=Union>Union</span>[<a class="autorefs autorefs-internal" title="CreatedInstance (client.ayon_core.pipeline.create.structures.CreatedInstance)" href=structures.html#client.ayon_core.pipeline.create.structures.CreatedInstance>CreatedInstance</a>, <a class="autorefs autorefs-internal" title="PublishAttributes (client.ayon_core.pipeline.create.structures.PublishAttributes)" href=structures.html#client.ayon_core.pipeline.create.structures.PublishAttributes>PublishAttributes</a>]</code> </td> <td> <div class=doc-md-description> <p>Parent object.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>key</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Key of attribute values.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>attr_defs</code> </td> <td> <code><span title=typing.List>List</span>[<span title=ayon_core.lib.attribute_definitions.AbstractAttrDef>AbstractAttrDef</span>]</code> </td> <td> <div class=doc-md-description> <p>Definitions of value type and properties.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>values</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>Values after possible conversion.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>origin_data</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>Values loaded from host before conversion.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 78</span>
<span class=normal> 79</span>
<span class=normal> 80</span>
<span class=normal> 81</span>
<span class=normal> 82</span>
<span class=normal> 83</span>
<span class=normal> 84</span>
<span class=normal> 85</span>
<span class=normal> 86</span>
<span class=normal> 87</span>
<span class=normal> 88</span>
<span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>AttributeValues</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Container which keep values of Attribute definitions.</span>

<span class=sd>    Goal is to have one object which hold values of attribute definitions for</span>
<span class=sd>    single instance.</span>

<span class=sd>    Has dictionary like methods. Not all of them are allowed all the time.</span>

<span class=sd>    Args:</span>
<span class=sd>        parent (Union[CreatedInstance, PublishAttributes]): Parent object.</span>
<span class=sd>        key (str): Key of attribute values.</span>
<span class=sd>        attr_defs (List[AbstractAttrDef]): Definitions of value type</span>
<span class=sd>            and properties.</span>
<span class=sd>        values (dict): Values after possible conversion.</span>
<span class=sd>        origin_data (dict): Values loaded from host before conversion.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>parent</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>attr_defs</span><span class=p>,</span> <span class=n>values</span><span class=p>,</span> <span class=n>origin_data</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_parent</span> <span class=o>=</span> <span class=n>parent</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_key</span> <span class=o>=</span> <span class=n>key</span>
        <span class=k>if</span> <span class=n>origin_data</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>origin_data</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=n>values</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_origin_data</span> <span class=o>=</span> <span class=n>origin_data</span>

        <span class=n>attr_defs_by_key</span> <span class=o>=</span> <span class=p>{</span>
            <span class=n>attr_def</span><span class=o>.</span><span class=n>key</span><span class=p>:</span> <span class=n>attr_def</span>
            <span class=k>for</span> <span class=n>attr_def</span> <span class=ow>in</span> <span class=n>attr_defs</span>
            <span class=k>if</span> <span class=n>attr_def</span><span class=o>.</span><span class=n>is_value_def</span>
        <span class=p>}</span>
        <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>values</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=k>if</span> <span class=n>key</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>attr_defs_by_key</span><span class=p>:</span>
                <span class=n>new_def</span> <span class=o>=</span> <span class=n>UnknownDef</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>label</span><span class=o>=</span><span class=n>key</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=n>value</span><span class=p>)</span>
                <span class=n>attr_defs</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>new_def</span><span class=p>)</span>
                <span class=n>attr_defs_by_key</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>new_def</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_attr_defs</span> <span class=o>=</span> <span class=n>attr_defs</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_attr_defs_by_key</span> <span class=o>=</span> <span class=n>attr_defs_by_key</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=k>for</span> <span class=n>attr_def</span> <span class=ow>in</span> <span class=n>attr_defs</span><span class=p>:</span>
            <span class=n>value</span> <span class=o>=</span> <span class=n>values</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>attr_def</span><span class=o>.</span><span class=n>key</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
                <span class=k>continue</span>
            <span class=n>converted_value</span> <span class=o>=</span> <span class=n>attr_def</span><span class=o>.</span><span class=n>convert_value</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>converted_value</span> <span class=o>==</span> <span class=n>value</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=n>attr_def</span><span class=o>.</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__setitem__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
        <span class=k>if</span> <span class=n>key</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_attr_defs_by_key</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>KeyError</span><span class=p>(</span><span class=s2>&quot;Key </span><span class=se>\&quot;</span><span class=si>{}</span><span class=se>\&quot;</span><span class=s2> was not found.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>key</span><span class=p>))</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>update</span><span class=p>({</span><span class=n>key</span><span class=p>:</span> <span class=n>value</span><span class=p>})</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__getitem__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
        <span class=k>if</span> <span class=n>key</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_attr_defs_by_key</span><span class=p>:</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_attr_defs_by_key</span><span class=p>[</span><span class=n>key</span><span class=p>]</span><span class=o>.</span><span class=n>default</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__contains__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_attr_defs_by_key</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__iter__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>for</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_attr_defs_by_key</span><span class=p>:</span>
            <span class=k>yield</span> <span class=n>key</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_attr_defs_by_key</span><span class=p>:</span>
            <span class=k>return</span> <span class=bp>self</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
        <span class=k>return</span> <span class=n>default</span>

    <span class=k>def</span><span class=w> </span><span class=nf>keys</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_attr_defs_by_key</span><span class=o>.</span><span class=n>keys</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>values</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>for</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_attr_defs_by_key</span><span class=o>.</span><span class=n>keys</span><span class=p>():</span>
            <span class=k>yield</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>items</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>for</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_attr_defs_by_key</span><span class=o>.</span><span class=n>keys</span><span class=p>():</span>
            <span class=k>yield</span> <span class=n>key</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_attr_def</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_attr_defs_by_key</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>default</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>update</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
        <span class=n>changes</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=k>for</span> <span class=n>_key</span><span class=p>,</span> <span class=n>_value</span> <span class=ow>in</span> <span class=nb>dict</span><span class=p>(</span><span class=n>value</span><span class=p>)</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=k>if</span> <span class=n>_key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>_key</span><span class=p>)</span> <span class=o>==</span> <span class=n>_value</span><span class=p>:</span>
                <span class=k>continue</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=n>_key</span><span class=p>]</span> <span class=o>=</span> <span class=n>_value</span>
            <span class=n>changes</span><span class=p>[</span><span class=n>_key</span><span class=p>]</span> <span class=o>=</span> <span class=n>_value</span>

        <span class=k>if</span> <span class=n>changes</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_parent</span><span class=o>.</span><span class=n>attribute_value_changed</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_key</span><span class=p>,</span> <span class=n>changes</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>pop</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=n>has_key</span> <span class=o>=</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span>
        <span class=n>value</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>default</span><span class=p>)</span>
        <span class=c1># Remove attribute definition if is &#39;UnknownDef&#39;</span>
        <span class=c1># - gives option to get rid of unknown values</span>
        <span class=n>attr_def</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_attr_defs_by_key</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>attr_def</span><span class=p>,</span> <span class=n>UnknownDef</span><span class=p>):</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_attr_defs_by_key</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_attr_defs</span><span class=o>.</span><span class=n>remove</span><span class=p>(</span><span class=n>attr_def</span><span class=p>)</span>
        <span class=k>elif</span> <span class=n>has_key</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_parent</span><span class=o>.</span><span class=n>attribute_value_changed</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_key</span><span class=p>,</span> <span class=p>{</span><span class=n>key</span><span class=p>:</span> <span class=kc>None</span><span class=p>})</span>
        <span class=k>return</span> <span class=n>value</span>

    <span class=k>def</span><span class=w> </span><span class=nf>reset_values</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span> <span class=o>=</span> <span class=p>{}</span>

    <span class=k>def</span><span class=w> </span><span class=nf>mark_as_stored</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_origin_data</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>)</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>attr_defs</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Pointer to attribute definitions.</span>

<span class=sd>        Returns:</span>
<span class=sd>            List[AbstractAttrDef]: Attribute definitions.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=nb>list</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_attr_defs</span><span class=p>)</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>origin_data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_origin_data</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>data_to_store</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Create new dictionary with data to store.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Dict[str, Any]: Attribute values that should be stored.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>output</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=k>for</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>:</span>
            <span class=n>output</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>

        <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>attr_def</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_attr_defs_by_key</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=k>if</span> <span class=n>key</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>output</span><span class=p>:</span>
                <span class=n>output</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>attr_def</span><span class=o>.</span><span class=n>default</span>
        <span class=k>return</span> <span class=n>output</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_serialized_attr_defs</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Serialize attribute definitions to json serializable types.</span>

<span class=sd>        Returns:</span>
<span class=sd>            List[Dict[str, Any]]: Serialized attribute definitions.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=n>serialize_attr_defs</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_attr_defs</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.create.AttributeValues.attr_defs class="doc doc-heading"> <code class="highlight language-python"><span class=n>attr_defs</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Pointer to attribute definitions.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>List[AbstractAttrDef]: Attribute definitions.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.AttributeValues.data_to_store class="doc doc-heading"> <code class="highlight language-python"><span class=n>data_to_store</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Create new dictionary with data to store.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Dict[str, Any]: Attribute values that should be stored.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>data_to_store</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Create new dictionary with data to store.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Dict[str, Any]: Attribute values that should be stored.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>output</span> <span class=o>=</span> <span class=p>{}</span>
    <span class=k>for</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>:</span>
        <span class=n>output</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>

    <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>attr_def</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_attr_defs_by_key</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
        <span class=k>if</span> <span class=n>key</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>output</span><span class=p>:</span>
            <span class=n>output</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>attr_def</span><span class=o>.</span><span class=n>default</span>
    <span class=k>return</span> <span class=n>output</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.AttributeValues.get_serialized_attr_defs class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_serialized_attr_defs</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Serialize attribute definitions to json serializable types.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>List[Dict[str, Any]]: Serialized attribute definitions.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_serialized_attr_defs</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Serialize attribute definitions to json serializable types.</span>

<span class=sd>    Returns:</span>
<span class=sd>        List[Dict[str, Any]]: Serialized attribute definitions.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=n>serialize_attr_defs</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_attr_defs</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.create.AutoCreator class="doc doc-heading"> <code>AutoCreator</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="BaseCreator (client.ayon_core.pipeline.create.creator_plugins.BaseCreator)" href=creator_plugins.html#client.ayon_core.pipeline.create.creator_plugins.BaseCreator>BaseCreator</a></code></p> <p>Creator which is automatically triggered without user interaction.</p> <p>Can be used e.g. for <code>workfile</code>.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>959</span>
<span class=normal>960</span>
<span class=normal>961</span>
<span class=normal>962</span>
<span class=normal>963</span>
<span class=normal>964</span>
<span class=normal>965</span>
<span class=normal>966</span>
<span class=normal>967</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>AutoCreator</span><span class=p>(</span><span class=n>BaseCreator</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Creator which is automatically triggered without user interaction.</span>

<span class=sd>    Can be used e.g. for `workfile`.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=nf>remove_instances</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instances</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Skip removal.&quot;&quot;&quot;</span>
        <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.AutoCreator.remove_instances class="doc doc-heading"> <code class="highlight language-python"><span class=n>remove_instances</span><span class=p>(</span><span class=n>instances</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Skip removal.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>965</span>
<span class=normal>966</span>
<span class=normal>967</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>remove_instances</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instances</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Skip removal.&quot;&quot;&quot;</span>
    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.create.BaseCreator class="doc doc-heading"> <code>BaseCreator</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=abc.ABC>ABC</span></code></p> <p>Plugin that create and modify instance data before publishing process.</p> <p>We should maybe find better name as creation is only one part of its logic and to avoid expectations that it is the same as <code>avalon.api.Creator</code>.</p> <p>Single object should be used for multiple instances instead of single instance per one creator object. Do not store temp data or mid-process data to <code>self</code> if it's not Plugin specific.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>project_settings</code> </td> <td> <code><span title=dict>dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Project settings.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>create_context</code> </td> <td> <code><a class="autorefs autorefs-internal" title="CreateContext (client.ayon_core.pipeline.create.context.CreateContext)" href=context.html#client.ayon_core.pipeline.create.context.CreateContext>CreateContext</a></code> </td> <td> <div class=doc-md-description> <p>Context which initialized creator.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>headless</code> </td> <td> <code><span title=bool>bool</span></code> </td> <td> <div class=doc-md-description> <p>Running in headless mode.</p> </div> </td> <td> <code>False</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span>
<span class=normal>277</span>
<span class=normal>278</span>
<span class=normal>279</span>
<span class=normal>280</span>
<span class=normal>281</span>
<span class=normal>282</span>
<span class=normal>283</span>
<span class=normal>284</span>
<span class=normal>285</span>
<span class=normal>286</span>
<span class=normal>287</span>
<span class=normal>288</span>
<span class=normal>289</span>
<span class=normal>290</span>
<span class=normal>291</span>
<span class=normal>292</span>
<span class=normal>293</span>
<span class=normal>294</span>
<span class=normal>295</span>
<span class=normal>296</span>
<span class=normal>297</span>
<span class=normal>298</span>
<span class=normal>299</span>
<span class=normal>300</span>
<span class=normal>301</span>
<span class=normal>302</span>
<span class=normal>303</span>
<span class=normal>304</span>
<span class=normal>305</span>
<span class=normal>306</span>
<span class=normal>307</span>
<span class=normal>308</span>
<span class=normal>309</span>
<span class=normal>310</span>
<span class=normal>311</span>
<span class=normal>312</span>
<span class=normal>313</span>
<span class=normal>314</span>
<span class=normal>315</span>
<span class=normal>316</span>
<span class=normal>317</span>
<span class=normal>318</span>
<span class=normal>319</span>
<span class=normal>320</span>
<span class=normal>321</span>
<span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span>
<span class=normal>325</span>
<span class=normal>326</span>
<span class=normal>327</span>
<span class=normal>328</span>
<span class=normal>329</span>
<span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span>
<span class=normal>334</span>
<span class=normal>335</span>
<span class=normal>336</span>
<span class=normal>337</span>
<span class=normal>338</span>
<span class=normal>339</span>
<span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span>
<span class=normal>344</span>
<span class=normal>345</span>
<span class=normal>346</span>
<span class=normal>347</span>
<span class=normal>348</span>
<span class=normal>349</span>
<span class=normal>350</span>
<span class=normal>351</span>
<span class=normal>352</span>
<span class=normal>353</span>
<span class=normal>354</span>
<span class=normal>355</span>
<span class=normal>356</span>
<span class=normal>357</span>
<span class=normal>358</span>
<span class=normal>359</span>
<span class=normal>360</span>
<span class=normal>361</span>
<span class=normal>362</span>
<span class=normal>363</span>
<span class=normal>364</span>
<span class=normal>365</span>
<span class=normal>366</span>
<span class=normal>367</span>
<span class=normal>368</span>
<span class=normal>369</span>
<span class=normal>370</span>
<span class=normal>371</span>
<span class=normal>372</span>
<span class=normal>373</span>
<span class=normal>374</span>
<span class=normal>375</span>
<span class=normal>376</span>
<span class=normal>377</span>
<span class=normal>378</span>
<span class=normal>379</span>
<span class=normal>380</span>
<span class=normal>381</span>
<span class=normal>382</span>
<span class=normal>383</span>
<span class=normal>384</span>
<span class=normal>385</span>
<span class=normal>386</span>
<span class=normal>387</span>
<span class=normal>388</span>
<span class=normal>389</span>
<span class=normal>390</span>
<span class=normal>391</span>
<span class=normal>392</span>
<span class=normal>393</span>
<span class=normal>394</span>
<span class=normal>395</span>
<span class=normal>396</span>
<span class=normal>397</span>
<span class=normal>398</span>
<span class=normal>399</span>
<span class=normal>400</span>
<span class=normal>401</span>
<span class=normal>402</span>
<span class=normal>403</span>
<span class=normal>404</span>
<span class=normal>405</span>
<span class=normal>406</span>
<span class=normal>407</span>
<span class=normal>408</span>
<span class=normal>409</span>
<span class=normal>410</span>
<span class=normal>411</span>
<span class=normal>412</span>
<span class=normal>413</span>
<span class=normal>414</span>
<span class=normal>415</span>
<span class=normal>416</span>
<span class=normal>417</span>
<span class=normal>418</span>
<span class=normal>419</span>
<span class=normal>420</span>
<span class=normal>421</span>
<span class=normal>422</span>
<span class=normal>423</span>
<span class=normal>424</span>
<span class=normal>425</span>
<span class=normal>426</span>
<span class=normal>427</span>
<span class=normal>428</span>
<span class=normal>429</span>
<span class=normal>430</span>
<span class=normal>431</span>
<span class=normal>432</span>
<span class=normal>433</span>
<span class=normal>434</span>
<span class=normal>435</span>
<span class=normal>436</span>
<span class=normal>437</span>
<span class=normal>438</span>
<span class=normal>439</span>
<span class=normal>440</span>
<span class=normal>441</span>
<span class=normal>442</span>
<span class=normal>443</span>
<span class=normal>444</span>
<span class=normal>445</span>
<span class=normal>446</span>
<span class=normal>447</span>
<span class=normal>448</span>
<span class=normal>449</span>
<span class=normal>450</span>
<span class=normal>451</span>
<span class=normal>452</span>
<span class=normal>453</span>
<span class=normal>454</span>
<span class=normal>455</span>
<span class=normal>456</span>
<span class=normal>457</span>
<span class=normal>458</span>
<span class=normal>459</span>
<span class=normal>460</span>
<span class=normal>461</span>
<span class=normal>462</span>
<span class=normal>463</span>
<span class=normal>464</span>
<span class=normal>465</span>
<span class=normal>466</span>
<span class=normal>467</span>
<span class=normal>468</span>
<span class=normal>469</span>
<span class=normal>470</span>
<span class=normal>471</span>
<span class=normal>472</span>
<span class=normal>473</span>
<span class=normal>474</span>
<span class=normal>475</span>
<span class=normal>476</span>
<span class=normal>477</span>
<span class=normal>478</span>
<span class=normal>479</span>
<span class=normal>480</span>
<span class=normal>481</span>
<span class=normal>482</span>
<span class=normal>483</span>
<span class=normal>484</span>
<span class=normal>485</span>
<span class=normal>486</span>
<span class=normal>487</span>
<span class=normal>488</span>
<span class=normal>489</span>
<span class=normal>490</span>
<span class=normal>491</span>
<span class=normal>492</span>
<span class=normal>493</span>
<span class=normal>494</span>
<span class=normal>495</span>
<span class=normal>496</span>
<span class=normal>497</span>
<span class=normal>498</span>
<span class=normal>499</span>
<span class=normal>500</span>
<span class=normal>501</span>
<span class=normal>502</span>
<span class=normal>503</span>
<span class=normal>504</span>
<span class=normal>505</span>
<span class=normal>506</span>
<span class=normal>507</span>
<span class=normal>508</span>
<span class=normal>509</span>
<span class=normal>510</span>
<span class=normal>511</span>
<span class=normal>512</span>
<span class=normal>513</span>
<span class=normal>514</span>
<span class=normal>515</span>
<span class=normal>516</span>
<span class=normal>517</span>
<span class=normal>518</span>
<span class=normal>519</span>
<span class=normal>520</span>
<span class=normal>521</span>
<span class=normal>522</span>
<span class=normal>523</span>
<span class=normal>524</span>
<span class=normal>525</span>
<span class=normal>526</span>
<span class=normal>527</span>
<span class=normal>528</span>
<span class=normal>529</span>
<span class=normal>530</span>
<span class=normal>531</span>
<span class=normal>532</span>
<span class=normal>533</span>
<span class=normal>534</span>
<span class=normal>535</span>
<span class=normal>536</span>
<span class=normal>537</span>
<span class=normal>538</span>
<span class=normal>539</span>
<span class=normal>540</span>
<span class=normal>541</span>
<span class=normal>542</span>
<span class=normal>543</span>
<span class=normal>544</span>
<span class=normal>545</span>
<span class=normal>546</span>
<span class=normal>547</span>
<span class=normal>548</span>
<span class=normal>549</span>
<span class=normal>550</span>
<span class=normal>551</span>
<span class=normal>552</span>
<span class=normal>553</span>
<span class=normal>554</span>
<span class=normal>555</span>
<span class=normal>556</span>
<span class=normal>557</span>
<span class=normal>558</span>
<span class=normal>559</span>
<span class=normal>560</span>
<span class=normal>561</span>
<span class=normal>562</span>
<span class=normal>563</span>
<span class=normal>564</span>
<span class=normal>565</span>
<span class=normal>566</span>
<span class=normal>567</span>
<span class=normal>568</span>
<span class=normal>569</span>
<span class=normal>570</span>
<span class=normal>571</span>
<span class=normal>572</span>
<span class=normal>573</span>
<span class=normal>574</span>
<span class=normal>575</span>
<span class=normal>576</span>
<span class=normal>577</span>
<span class=normal>578</span>
<span class=normal>579</span>
<span class=normal>580</span>
<span class=normal>581</span>
<span class=normal>582</span>
<span class=normal>583</span>
<span class=normal>584</span>
<span class=normal>585</span>
<span class=normal>586</span>
<span class=normal>587</span>
<span class=normal>588</span>
<span class=normal>589</span>
<span class=normal>590</span>
<span class=normal>591</span>
<span class=normal>592</span>
<span class=normal>593</span>
<span class=normal>594</span>
<span class=normal>595</span>
<span class=normal>596</span>
<span class=normal>597</span>
<span class=normal>598</span>
<span class=normal>599</span>
<span class=normal>600</span>
<span class=normal>601</span>
<span class=normal>602</span>
<span class=normal>603</span>
<span class=normal>604</span>
<span class=normal>605</span>
<span class=normal>606</span>
<span class=normal>607</span>
<span class=normal>608</span>
<span class=normal>609</span>
<span class=normal>610</span>
<span class=normal>611</span>
<span class=normal>612</span>
<span class=normal>613</span>
<span class=normal>614</span>
<span class=normal>615</span>
<span class=normal>616</span>
<span class=normal>617</span>
<span class=normal>618</span>
<span class=normal>619</span>
<span class=normal>620</span>
<span class=normal>621</span>
<span class=normal>622</span>
<span class=normal>623</span>
<span class=normal>624</span>
<span class=normal>625</span>
<span class=normal>626</span>
<span class=normal>627</span>
<span class=normal>628</span>
<span class=normal>629</span>
<span class=normal>630</span>
<span class=normal>631</span>
<span class=normal>632</span>
<span class=normal>633</span>
<span class=normal>634</span>
<span class=normal>635</span>
<span class=normal>636</span>
<span class=normal>637</span>
<span class=normal>638</span>
<span class=normal>639</span>
<span class=normal>640</span>
<span class=normal>641</span>
<span class=normal>642</span>
<span class=normal>643</span>
<span class=normal>644</span>
<span class=normal>645</span>
<span class=normal>646</span>
<span class=normal>647</span>
<span class=normal>648</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>BaseCreator</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Plugin that create and modify instance data before publishing process.</span>

<span class=sd>    We should maybe find better name as creation is only one part of its logic</span>
<span class=sd>    and to avoid expectations that it is the same as `avalon.api.Creator`.</span>

<span class=sd>    Single object should be used for multiple instances instead of single</span>
<span class=sd>    instance per one creator object. Do not store temp data or mid-process data</span>
<span class=sd>    to `self` if it&#39;s not Plugin specific.</span>

<span class=sd>    Args:</span>
<span class=sd>        project_settings (dict[str, Any]): Project settings.</span>
<span class=sd>        create_context (CreateContext): Context which initialized creator.</span>
<span class=sd>        headless (bool): Running in headless mode.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=c1># Label shown in UI</span>
    <span class=n>label</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=n>group_label</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=c1># Cached group label after first call &#39;get_group_label&#39;</span>
    <span class=n>_cached_group_label</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=c1># Order in which will be plugin executed (collect &amp; update instances)</span>
    <span class=c1>#   less == earlier -&gt; Order &#39;90&#39; will be processed before &#39;100&#39;</span>
    <span class=n>order</span> <span class=o>=</span> <span class=mi>100</span>

    <span class=c1># Variable to store logger</span>
    <span class=n>_log</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=c1># Creator is enabled (Probably does not have reason of existence?)</span>
    <span class=n>enabled</span> <span class=o>=</span> <span class=kc>True</span>

    <span class=c1># Creator (and product type) icon</span>
    <span class=c1># - may not be used if `get_icon` is reimplemented</span>
    <span class=n>icon</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=c1># Instance attribute definitions that can be changed per instance</span>
    <span class=c1># - returns list of attribute definitions from</span>
    <span class=c1>#       `ayon_core.lib.attribute_definitions`</span>
    <span class=n>instance_attr_defs</span><span class=p>:</span> <span class=s2>&quot;list[AbstractAttrDef]&quot;</span> <span class=o>=</span> <span class=p>[]</span>

    <span class=c1># Filtering by host name - can be used to be filtered by host name</span>
    <span class=c1># - used on all hosts when set to &#39;None&#39; for Backwards compatibility</span>
    <span class=c1>#   - was added afterwards</span>
    <span class=c1># QUESTION make this required?</span>
    <span class=n>host_name</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=c1># Settings auto-apply helpers</span>
    <span class=c1># Root key in project settings (mandatory for auto-apply to work)</span>
    <span class=n>settings_category</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=c1># Name of plugin in create settings &gt; class name is used if not set</span>
    <span class=n>settings_name</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span> <span class=n>project_settings</span><span class=p>,</span> <span class=n>create_context</span><span class=p>,</span> <span class=n>headless</span><span class=o>=</span><span class=kc>False</span>
    <span class=p>):</span>
        <span class=c1># Reference to CreateContext</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span> <span class=o>=</span> <span class=n>create_context</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>project_settings</span> <span class=o>=</span> <span class=n>project_settings</span>

        <span class=c1># Creator is running in headless mode (without UI elements)</span>
        <span class=c1># - we may use UI inside processing this attribute should be checked</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>headless</span> <span class=o>=</span> <span class=n>headless</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>apply_settings</span><span class=p>(</span><span class=n>project_settings</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>register_callbacks</span><span class=p>()</span>

    <span class=nd>@staticmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>_get_settings_values</span><span class=p>(</span><span class=n>project_settings</span><span class=p>,</span> <span class=n>category_name</span><span class=p>,</span> <span class=n>plugin_name</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Helper method to get settings values.</span>

<span class=sd>        Args:</span>
<span class=sd>            project_settings (dict[str, Any]): Project settings.</span>
<span class=sd>            category_name (str): Category of settings.</span>
<span class=sd>            plugin_name (str): Name of settings.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Optional[dict[str, Any]]: Settings values or None.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>settings</span> <span class=o>=</span> <span class=n>project_settings</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>category_name</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>settings</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>None</span>

        <span class=n>create_settings</span> <span class=o>=</span> <span class=n>settings</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;create&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>create_settings</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>None</span>

        <span class=k>return</span> <span class=n>create_settings</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>plugin_name</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>apply_settings</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>project_settings</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Method called on initialization of plugin to apply settings.</span>

<span class=sd>        Default implementation tries to auto-apply settings values if are</span>
<span class=sd>            in expected hierarchy.</span>

<span class=sd>        Data hierarchy to auto-apply settings:</span>
<span class=sd>            ├─ {self.settings_category}                 - Root key in settings</span>
<span class=sd>            │ └─ &quot;create&quot;                               - Hardcoded key</span>
<span class=sd>            │   └─ {self.settings_name} | {class name}  - Name of plugin</span>
<span class=sd>            │     ├─ ... attribute values...            - Attribute/value pair</span>

<span class=sd>        It is mandatory to define &#39;settings_category&#39; attribute. Attribute</span>
<span class=sd>        &#39;settings_name&#39; is optional and class name is used if is not defined.</span>

<span class=sd>        Example data:</span>
<span class=sd>            ProjectSettings {</span>
<span class=sd>                &quot;maya&quot;: {                    # self.settings_category</span>
<span class=sd>                    &quot;create&quot;: {              # Hardcoded key</span>
<span class=sd>                        &quot;CreateAnimation&quot;: { # self.settings_name / class name</span>
<span class=sd>                            &quot;enabled&quot;: True, # --- Attributes to set ---</span>
<span class=sd>                            &quot;optional&quot;: True,#</span>
<span class=sd>                            &quot;active&quot;: True,  #</span>
<span class=sd>                            &quot;fps&quot;: 25,       # -------------------------</span>
<span class=sd>                        },</span>
<span class=sd>                        ...</span>
<span class=sd>                    },</span>
<span class=sd>                    ...</span>
<span class=sd>                },</span>
<span class=sd>                ...</span>
<span class=sd>            }</span>

<span class=sd>        Args:</span>
<span class=sd>            project_settings (dict[str, Any]): Project settings.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>settings_category</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>settings_category</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>settings_category</span><span class=p>:</span>
            <span class=k>return</span>

        <span class=n>cls_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span>
        <span class=n>settings_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>settings_name</span> <span class=ow>or</span> <span class=n>cls_name</span>

        <span class=n>settings</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_settings_values</span><span class=p>(</span>
            <span class=n>project_settings</span><span class=p>,</span> <span class=n>settings_category</span><span class=p>,</span> <span class=n>settings_name</span>
        <span class=p>)</span>
        <span class=k>if</span> <span class=n>settings</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;No settings found for </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>cls_name</span><span class=p>))</span>
            <span class=k>return</span>

        <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>settings</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=c1># Log out attributes that are not defined on plugin object</span>
            <span class=c1># - those may be potential dangerous typos in settings</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=nb>hasattr</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>((</span>
                    <span class=s2>&quot;Applying settings to unknown attribute &#39;</span><span class=si>{}</span><span class=s2>&#39; on &#39;</span><span class=si>{}</span><span class=s2>&#39;.&quot;</span>
                <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                    <span class=n>key</span><span class=p>,</span> <span class=n>cls_name</span>
                <span class=p>))</span>
            <span class=nb>setattr</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>register_callbacks</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Register callbacks for creator.</span>

<span class=sd>        Default implementation does nothing. It can be overridden to register</span>
<span class=sd>        callbacks for creator.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>pass</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>identifier</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Identifier of creator (must be unique).</span>

<span class=sd>        Default implementation returns plugin&#39;s product type.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>product_type</span>

    <span class=nd>@property</span>
    <span class=nd>@abstractmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>product_type</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Family that plugin represents.&quot;&quot;&quot;</span>

        <span class=k>pass</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>project_name</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Current project name.</span>

<span class=sd>        Returns:</span>
<span class=sd>            str: Name of a project.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span><span class=o>.</span><span class=n>project_name</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>project_anatomy</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Current project anatomy.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Anatomy: Project anatomy object.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span><span class=o>.</span><span class=n>project_anatomy</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>host</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span><span class=o>.</span><span class=n>host</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_group_label</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Group label under which are instances grouped in UI.</span>

<span class=sd>        Default implementation use attributes in this order:</span>
<span class=sd>            - &#39;group_label&#39; -&gt; &#39;label&#39; -&gt; &#39;identifier&#39;</span>
<span class=sd>                Keep in mind that &#39;identifier&#39; use &#39;product_type&#39; by default.</span>

<span class=sd>        Returns:</span>
<span class=sd>            str: Group label that can be used for grouping of instances in UI.</span>
<span class=sd>                Group label can be overridden by instance itself.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_cached_group_label</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>label</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>identifier</span>
            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>group_label</span><span class=p>:</span>
                <span class=n>label</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>group_label</span>
            <span class=k>elif</span> <span class=bp>self</span><span class=o>.</span><span class=n>label</span><span class=p>:</span>
                <span class=n>label</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>label</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_cached_group_label</span> <span class=o>=</span> <span class=n>label</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_cached_group_label</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>log</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Logger of the plugin.</span>

<span class=sd>        Returns:</span>
<span class=sd>            logging.Logger: Logger with name of the plugin.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_log</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_log</span> <span class=o>=</span> <span class=n>Logger</span><span class=o>.</span><span class=n>get_logger</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=p>)</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_log</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_create_instance</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>product_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
        <span class=n>data</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>],</span>
        <span class=n>product_type</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=p>)</span> <span class=o>-&gt;</span> <span class=n>CreatedInstance</span><span class=p>:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Create instance and add instance to context.</span>

<span class=sd>        Args:</span>
<span class=sd>            product_name (str): Product name.</span>
<span class=sd>            data (Dict[str, Any]): Instance data.</span>
<span class=sd>            product_type (Optional[str]): Product type, object attribute</span>
<span class=sd>                &#39;product_type&#39; is used if not passed.</span>

<span class=sd>        Returns:</span>
<span class=sd>            CreatedInstance: Created instance.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=n>product_type</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>product_type</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>product_type</span>
        <span class=n>instance</span> <span class=o>=</span> <span class=n>CreatedInstance</span><span class=p>(</span>
            <span class=n>product_type</span><span class=p>,</span>
            <span class=n>product_name</span><span class=p>,</span>
            <span class=n>data</span><span class=p>,</span>
            <span class=n>creator</span><span class=o>=</span><span class=bp>self</span><span class=p>,</span>
        <span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_add_instance_to_context</span><span class=p>(</span><span class=n>instance</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>instance</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_add_instance_to_context</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instance</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Helper method to add instance to create context.</span>

<span class=sd>        Instances should be stored to DCC workfile metadata to be able reload</span>
<span class=sd>        them and also stored to CreateContext in which is creator plugin</span>
<span class=sd>        existing at the moment to be able use it without refresh of</span>
<span class=sd>        CreateContext.</span>

<span class=sd>        Args:</span>
<span class=sd>            instance (CreatedInstance): New created instance.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span><span class=o>.</span><span class=n>creator_adds_instance</span><span class=p>(</span><span class=n>instance</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_remove_instance_from_context</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instance</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Helper method to remove instance from create context.</span>

<span class=sd>        Instances must be removed from DCC workfile metadat aand from create</span>
<span class=sd>        context in which plugin is existing at the moment of removal to</span>
<span class=sd>        propagate the change without restarting create context.</span>

<span class=sd>        Args:</span>
<span class=sd>            instance (CreatedInstance): Instance which should be removed.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span><span class=o>.</span><span class=n>creator_removed_instance</span><span class=p>(</span><span class=n>instance</span><span class=p>)</span>

    <span class=nd>@abstractmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>create</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Create new instance.</span>

<span class=sd>        Replacement of `process` method from avalon implementation.</span>
<span class=sd>        - must expect all data that were passed to init in previous</span>
<span class=sd>            implementation</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>pass</span>

    <span class=nd>@abstractmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>collect_instances</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Collect existing instances related to this creator plugin.</span>

<span class=sd>        The implementation differs on host abilities. The creator has to</span>
<span class=sd>        collect metadata about instance and create &#39;CreatedInstance&#39; object</span>
<span class=sd>        which should be added to &#39;CreateContext&#39;.</span>

<span class=sd>        Example:</span>
<span class=sd>        ```python</span>
<span class=sd>        def collect_instances(self):</span>
<span class=sd>            # Getting existing instances is different per host implementation</span>
<span class=sd>            for instance_data in pipeline.list_instances():</span>
<span class=sd>                # Process only instances that were created by this creator</span>
<span class=sd>                creator_id = instance_data.get(&quot;creator_identifier&quot;)</span>
<span class=sd>                if creator_id == self.identifier:</span>
<span class=sd>                    # Create instance object from existing data</span>
<span class=sd>                    instance = CreatedInstance.from_existing(</span>
<span class=sd>                        instance_data, self</span>
<span class=sd>                    )</span>
<span class=sd>                    # Add instance to create context</span>
<span class=sd>                    self._add_instance_to_context(instance)</span>
<span class=sd>        ```</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>pass</span>

    <span class=nd>@abstractmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>update_instances</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>update_list</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Store changes of existing instances so they can be recollected.</span>

<span class=sd>        Args:</span>
<span class=sd>            update_list (list[UpdateData]): Gets list of tuples. Each item</span>
<span class=sd>                contain changed instance and it&#39;s changes.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>pass</span>

    <span class=nd>@abstractmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>remove_instances</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instances</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Method called on instance removal.</span>

<span class=sd>        Can also remove instance metadata from context but should return</span>
<span class=sd>        &#39;True&#39; if did so.</span>

<span class=sd>        Args:</span>
<span class=sd>            instances (list[CreatedInstance]): Instance objects which should be</span>
<span class=sd>                removed.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>pass</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_icon</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Icon of creator (product type).</span>

<span class=sd>        Can return path to image file or awesome icon name.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>icon</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_dynamic_data</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>project_name</span><span class=p>,</span>
        <span class=n>folder_entity</span><span class=p>,</span>
        <span class=n>task_entity</span><span class=p>,</span>
        <span class=n>variant</span><span class=p>,</span>
        <span class=n>host_name</span><span class=p>,</span>
        <span class=n>instance</span>
    <span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Dynamic data for product name filling.</span>

<span class=sd>        These may be dynamically created based on current context of workfile.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=p>{}</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_product_name</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>project_name</span><span class=p>,</span>
        <span class=n>folder_entity</span><span class=p>,</span>
        <span class=n>task_entity</span><span class=p>,</span>
        <span class=n>variant</span><span class=p>,</span>
        <span class=n>host_name</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>instance</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>project_entity</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Return product name for passed context.</span>

<span class=sd>        Method is also called on product name update. In that case origin</span>
<span class=sd>        instance is passed in.</span>

<span class=sd>        Args:</span>
<span class=sd>            project_name (str): Project name.</span>
<span class=sd>            folder_entity (dict): Folder entity.</span>
<span class=sd>            task_entity (dict): Task entity.</span>
<span class=sd>            variant (str): Product name variant. In most of cases user input.</span>
<span class=sd>            host_name (Optional[str]): Which host creates product. Defaults</span>
<span class=sd>                to host name on create context.</span>
<span class=sd>            instance (Optional[CreatedInstance]): Object of &#39;CreatedInstance&#39;</span>
<span class=sd>                for which is product name updated. Passed only on product name</span>
<span class=sd>                update.</span>
<span class=sd>            project_entity (Optional[dict[str, Any]]): Project entity.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=n>host_name</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>host_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span><span class=o>.</span><span class=n>host_name</span>

        <span class=n>task_name</span> <span class=o>=</span> <span class=n>task_type</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=k>if</span> <span class=n>task_entity</span><span class=p>:</span>
            <span class=n>task_name</span> <span class=o>=</span> <span class=n>task_entity</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span>
            <span class=n>task_type</span> <span class=o>=</span> <span class=n>task_entity</span><span class=p>[</span><span class=s2>&quot;taskType&quot;</span><span class=p>]</span>

        <span class=n>dynamic_data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_dynamic_data</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span>
            <span class=n>folder_entity</span><span class=p>,</span>
            <span class=n>task_entity</span><span class=p>,</span>
            <span class=n>variant</span><span class=p>,</span>
            <span class=n>host_name</span><span class=p>,</span>
            <span class=n>instance</span>
        <span class=p>)</span>

        <span class=n>cur_project_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span><span class=o>.</span><span class=n>get_current_project_name</span><span class=p>()</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>project_entity</span> <span class=ow>and</span> <span class=n>project_name</span> <span class=o>==</span> <span class=n>cur_project_name</span><span class=p>:</span>
            <span class=n>project_entity</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span><span class=o>.</span><span class=n>get_current_project_entity</span><span class=p>()</span>

        <span class=k>return</span> <span class=n>get_product_name</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span>
            <span class=n>task_name</span><span class=p>,</span>
            <span class=n>task_type</span><span class=p>,</span>
            <span class=n>host_name</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>product_type</span><span class=p>,</span>
            <span class=n>variant</span><span class=p>,</span>
            <span class=n>dynamic_data</span><span class=o>=</span><span class=n>dynamic_data</span><span class=p>,</span>
            <span class=n>project_settings</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>project_settings</span><span class=p>,</span>
            <span class=n>project_entity</span><span class=o>=</span><span class=n>project_entity</span><span class=p>,</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_instance_attr_defs</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Plugin attribute definitions.</span>

<span class=sd>        Attribute definitions of plugin that hold data about created instance</span>
<span class=sd>        and values are stored to metadata for future usage and for publishing</span>
<span class=sd>        purposes.</span>

<span class=sd>        NOTE:</span>
<span class=sd>        Convert method should be implemented which should care about updating</span>
<span class=sd>        keys/values when plugin attributes change.</span>

<span class=sd>        Returns:</span>
<span class=sd>            list[AbstractAttrDef]: Attribute definitions that can be tweaked</span>
<span class=sd>                for created instance.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>instance_attr_defs</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_attr_defs_for_instance</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instance</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get attribute definitions for an instance.</span>

<span class=sd>        Args:</span>
<span class=sd>            instance (CreatedInstance): Instance for which to get</span>
<span class=sd>                attribute definitions.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_instance_attr_defs</span><span class=p>()</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>collection_shared_data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Access to shared data that can be used during creator&#39;s collection.</span>

<span class=sd>        Returns:</span>
<span class=sd>            dict[str, Any]: Shared data.</span>

<span class=sd>        Raises:</span>
<span class=sd>            UnavailableSharedData: When called out of collection phase.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span><span class=o>.</span><span class=n>collection_shared_data</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_instance_thumbnail_path</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instance_id</span><span class=p>,</span> <span class=n>thumbnail_path</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Set path to thumbnail for instance.&quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span><span class=o>.</span><span class=n>thumbnail_paths_by_instance_id</span><span class=p>[</span><span class=n>instance_id</span><span class=p>]</span> <span class=o>=</span> <span class=p>(</span>
            <span class=n>thumbnail_path</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_next_versions_for_instances</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instances</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Prepare next versions for instances.</span>

<span class=sd>        This is helper method to receive next possible versions for instances.</span>
<span class=sd>        It is using context information on instance to receive them,</span>
<span class=sd>        &#39;folderPath&#39; and &#39;product&#39;.</span>

<span class=sd>        Output will contain version by each instance id.</span>

<span class=sd>        Args:</span>
<span class=sd>            instances (list[CreatedInstance]): Instances for which to get next</span>
<span class=sd>                versions.</span>

<span class=sd>        Returns:</span>
<span class=sd>            dict[str, int]: Next versions by instance id.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=n>get_next_versions_for_instances</span><span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span><span class=o>.</span><span class=n>project_name</span><span class=p>,</span> <span class=n>instances</span>
        <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.create.BaseCreator.collection_shared_data class="doc doc-heading"> <code class="highlight language-python"><span class=n>collection_shared_data</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Access to shared data that can be used during creator's collection.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>dict[str, Any]: Shared data.</p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="UnavailableSharedData (client.ayon_core.pipeline.create.exceptions.UnavailableSharedData)" href=exceptions.html#client.ayon_core.pipeline.create.exceptions.UnavailableSharedData>UnavailableSharedData</a></code> </td> <td> <div class=doc-md-description> <p>When called out of collection phase.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.create.BaseCreator.identifier class="doc doc-heading"> <code class="highlight language-python"><span class=n>identifier</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Identifier of creator (must be unique).</p> <p>Default implementation returns plugin's product type.</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.create.BaseCreator.log class="doc doc-heading"> <code class="highlight language-python"><span class=n>log</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Logger of the plugin.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>logging.Logger: Logger with name of the plugin.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.create.BaseCreator.product_type class="doc doc-heading"> <code class="highlight language-python"><span class=n>product_type</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Family that plugin represents.</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.create.BaseCreator.project_anatomy class="doc doc-heading"> <code class="highlight language-python"><span class=n>project_anatomy</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Current project anatomy.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>Anatomy</code></td> <td> </td> <td> <div class=doc-md-description> <p>Project anatomy object.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.create.BaseCreator.project_name class="doc doc-heading"> <code class="highlight language-python"><span class=n>project_name</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Current project name.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>Name of a project.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.BaseCreator.apply_settings class="doc doc-heading"> <code class="highlight language-python"><span class=n>apply_settings</span><span class=p>(</span><span class=n>project_settings</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Method called on initialization of plugin to apply settings.</p> <p>Default implementation tries to auto-apply settings values if are in expected hierarchy.</p> <details class=data-hierarchy-to-auto-apply-settings open> <summary>Data hierarchy to auto-apply settings</summary> <p>├─ {self.settings_category} - Root key in settings │ └─ "create" - Hardcoded key │ └─ {self.settings_name} | {class name} - Name of plugin │ ├─ ... attribute values... - Attribute/value pair</p> </details> <p>It is mandatory to define 'settings_category' attribute. Attribute 'settings_name' is optional and class name is used if is not defined.</p> <details class=example-data open> <summary>Example data</summary> <p>ProjectSettings { "maya": { # self.settings_category "create": { # Hardcoded key "CreateAnimation": { # self.settings_name / class name "enabled": True, # --- Attributes to set --- "optional": True,# "active": True, # "fps": 25, # ------------------------- }, ... }, ... }, ... }</p> </details> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>project_settings</code> </td> <td> <code><span title=dict>dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Project settings.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span>
<span class=normal>277</span>
<span class=normal>278</span>
<span class=normal>279</span>
<span class=normal>280</span>
<span class=normal>281</span>
<span class=normal>282</span>
<span class=normal>283</span>
<span class=normal>284</span>
<span class=normal>285</span>
<span class=normal>286</span>
<span class=normal>287</span>
<span class=normal>288</span>
<span class=normal>289</span>
<span class=normal>290</span>
<span class=normal>291</span>
<span class=normal>292</span>
<span class=normal>293</span>
<span class=normal>294</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>apply_settings</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>project_settings</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Method called on initialization of plugin to apply settings.</span>

<span class=sd>    Default implementation tries to auto-apply settings values if are</span>
<span class=sd>        in expected hierarchy.</span>

<span class=sd>    Data hierarchy to auto-apply settings:</span>
<span class=sd>        ├─ {self.settings_category}                 - Root key in settings</span>
<span class=sd>        │ └─ &quot;create&quot;                               - Hardcoded key</span>
<span class=sd>        │   └─ {self.settings_name} | {class name}  - Name of plugin</span>
<span class=sd>        │     ├─ ... attribute values...            - Attribute/value pair</span>

<span class=sd>    It is mandatory to define &#39;settings_category&#39; attribute. Attribute</span>
<span class=sd>    &#39;settings_name&#39; is optional and class name is used if is not defined.</span>

<span class=sd>    Example data:</span>
<span class=sd>        ProjectSettings {</span>
<span class=sd>            &quot;maya&quot;: {                    # self.settings_category</span>
<span class=sd>                &quot;create&quot;: {              # Hardcoded key</span>
<span class=sd>                    &quot;CreateAnimation&quot;: { # self.settings_name / class name</span>
<span class=sd>                        &quot;enabled&quot;: True, # --- Attributes to set ---</span>
<span class=sd>                        &quot;optional&quot;: True,#</span>
<span class=sd>                        &quot;active&quot;: True,  #</span>
<span class=sd>                        &quot;fps&quot;: 25,       # -------------------------</span>
<span class=sd>                    },</span>
<span class=sd>                    ...</span>
<span class=sd>                },</span>
<span class=sd>                ...</span>
<span class=sd>            },</span>
<span class=sd>            ...</span>
<span class=sd>        }</span>

<span class=sd>    Args:</span>
<span class=sd>        project_settings (dict[str, Any]): Project settings.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>settings_category</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>settings_category</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>settings_category</span><span class=p>:</span>
        <span class=k>return</span>

    <span class=n>cls_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span>
    <span class=n>settings_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>settings_name</span> <span class=ow>or</span> <span class=n>cls_name</span>

    <span class=n>settings</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_settings_values</span><span class=p>(</span>
        <span class=n>project_settings</span><span class=p>,</span> <span class=n>settings_category</span><span class=p>,</span> <span class=n>settings_name</span>
    <span class=p>)</span>
    <span class=k>if</span> <span class=n>settings</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;No settings found for </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>cls_name</span><span class=p>))</span>
        <span class=k>return</span>

    <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>settings</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
        <span class=c1># Log out attributes that are not defined on plugin object</span>
        <span class=c1># - those may be potential dangerous typos in settings</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=nb>hasattr</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>((</span>
                <span class=s2>&quot;Applying settings to unknown attribute &#39;</span><span class=si>{}</span><span class=s2>&#39; on &#39;</span><span class=si>{}</span><span class=s2>&#39;.&quot;</span>
            <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                <span class=n>key</span><span class=p>,</span> <span class=n>cls_name</span>
            <span class=p>))</span>
        <span class=nb>setattr</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.BaseCreator.collect_instances class="doc doc-heading"> <code class="highlight language-python"><span class=n>collect_instances</span><span class=p>()</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Collect existing instances related to this creator plugin.</p> <p>The implementation differs on host abilities. The creator has to collect metadata about instance and create 'CreatedInstance' object which should be added to 'CreateContext'.</p> <p>Example:</p> <pre><code class=language-python>def collect_instances(self):
    # Getting existing instances is different per host implementation
    for instance_data in pipeline.list_instances():
        # Process only instances that were created by this creator
        creator_id = instance_data.get(&quot;creator_identifier&quot;)
        if creator_id == self.identifier:
            # Create instance object from existing data
            instance = CreatedInstance.from_existing(
                instance_data, self
            )
            # Add instance to create context
            self._add_instance_to_context(instance)
</code></pre> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>444</span>
<span class=normal>445</span>
<span class=normal>446</span>
<span class=normal>447</span>
<span class=normal>448</span>
<span class=normal>449</span>
<span class=normal>450</span>
<span class=normal>451</span>
<span class=normal>452</span>
<span class=normal>453</span>
<span class=normal>454</span>
<span class=normal>455</span>
<span class=normal>456</span>
<span class=normal>457</span>
<span class=normal>458</span>
<span class=normal>459</span>
<span class=normal>460</span>
<span class=normal>461</span>
<span class=normal>462</span>
<span class=normal>463</span>
<span class=normal>464</span>
<span class=normal>465</span>
<span class=normal>466</span>
<span class=normal>467</span>
<span class=normal>468</span>
<span class=normal>469</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@abstractmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>collect_instances</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Collect existing instances related to this creator plugin.</span>

<span class=sd>    The implementation differs on host abilities. The creator has to</span>
<span class=sd>    collect metadata about instance and create &#39;CreatedInstance&#39; object</span>
<span class=sd>    which should be added to &#39;CreateContext&#39;.</span>

<span class=sd>    Example:</span>
<span class=sd>    ```python</span>
<span class=sd>    def collect_instances(self):</span>
<span class=sd>        # Getting existing instances is different per host implementation</span>
<span class=sd>        for instance_data in pipeline.list_instances():</span>
<span class=sd>            # Process only instances that were created by this creator</span>
<span class=sd>            creator_id = instance_data.get(&quot;creator_identifier&quot;)</span>
<span class=sd>            if creator_id == self.identifier:</span>
<span class=sd>                # Create instance object from existing data</span>
<span class=sd>                instance = CreatedInstance.from_existing(</span>
<span class=sd>                    instance_data, self</span>
<span class=sd>                )</span>
<span class=sd>                # Add instance to create context</span>
<span class=sd>                self._add_instance_to_context(instance)</span>
<span class=sd>    ```</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.BaseCreator.create class="doc doc-heading"> <code class="highlight language-python"><span class=n>create</span><span class=p>()</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Create new instance.</p> <p>Replacement of <code>process</code> method from avalon implementation. - must expect all data that were passed to init in previous implementation</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>433</span>
<span class=normal>434</span>
<span class=normal>435</span>
<span class=normal>436</span>
<span class=normal>437</span>
<span class=normal>438</span>
<span class=normal>439</span>
<span class=normal>440</span>
<span class=normal>441</span>
<span class=normal>442</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@abstractmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>create</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Create new instance.</span>

<span class=sd>    Replacement of `process` method from avalon implementation.</span>
<span class=sd>    - must expect all data that were passed to init in previous</span>
<span class=sd>        implementation</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.BaseCreator.get_attr_defs_for_instance class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_attr_defs_for_instance</span><span class=p>(</span><span class=n>instance</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Get attribute definitions for an instance.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>instance</code> </td> <td> <code><a class="autorefs autorefs-internal" title="CreatedInstance (client.ayon_core.pipeline.create.structures.CreatedInstance)" href=structures.html#client.ayon_core.pipeline.create.structures.CreatedInstance>CreatedInstance</a></code> </td> <td> <div class=doc-md-description> <p>Instance for which to get attribute definitions.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>599</span>
<span class=normal>600</span>
<span class=normal>601</span>
<span class=normal>602</span>
<span class=normal>603</span>
<span class=normal>604</span>
<span class=normal>605</span>
<span class=normal>606</span>
<span class=normal>607</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_attr_defs_for_instance</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instance</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get attribute definitions for an instance.</span>

<span class=sd>    Args:</span>
<span class=sd>        instance (CreatedInstance): Instance for which to get</span>
<span class=sd>            attribute definitions.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_instance_attr_defs</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.BaseCreator.get_dynamic_data class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_dynamic_data</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=n>folder_entity</span><span class=p>,</span> <span class=n>task_entity</span><span class=p>,</span> <span class=n>variant</span><span class=p>,</span> <span class=n>host_name</span><span class=p>,</span> <span class=n>instance</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Dynamic data for product name filling.</p> <p>These may be dynamically created based on current context of workfile.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>504</span>
<span class=normal>505</span>
<span class=normal>506</span>
<span class=normal>507</span>
<span class=normal>508</span>
<span class=normal>509</span>
<span class=normal>510</span>
<span class=normal>511</span>
<span class=normal>512</span>
<span class=normal>513</span>
<span class=normal>514</span>
<span class=normal>515</span>
<span class=normal>516</span>
<span class=normal>517</span>
<span class=normal>518</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_dynamic_data</span><span class=p>(</span>
    <span class=bp>self</span><span class=p>,</span>
    <span class=n>project_name</span><span class=p>,</span>
    <span class=n>folder_entity</span><span class=p>,</span>
    <span class=n>task_entity</span><span class=p>,</span>
    <span class=n>variant</span><span class=p>,</span>
    <span class=n>host_name</span><span class=p>,</span>
    <span class=n>instance</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Dynamic data for product name filling.</span>

<span class=sd>    These may be dynamically created based on current context of workfile.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=p>{}</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.BaseCreator.get_group_label class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_group_label</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Group label under which are instances grouped in UI.</p> <details class=default-implementation-use-attributes-in-this-order open> <summary>Default implementation use attributes in this order</summary> <ul> <li>'group_label' -&gt; 'label' -&gt; 'identifier' Keep in mind that 'identifier' use 'product_type' by default.</li> </ul> </details> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>Group label that can be used for grouping of instances in UI. Group label can be overridden by instance itself.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>344</span>
<span class=normal>345</span>
<span class=normal>346</span>
<span class=normal>347</span>
<span class=normal>348</span>
<span class=normal>349</span>
<span class=normal>350</span>
<span class=normal>351</span>
<span class=normal>352</span>
<span class=normal>353</span>
<span class=normal>354</span>
<span class=normal>355</span>
<span class=normal>356</span>
<span class=normal>357</span>
<span class=normal>358</span>
<span class=normal>359</span>
<span class=normal>360</span>
<span class=normal>361</span>
<span class=normal>362</span>
<span class=normal>363</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_group_label</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Group label under which are instances grouped in UI.</span>

<span class=sd>    Default implementation use attributes in this order:</span>
<span class=sd>        - &#39;group_label&#39; -&gt; &#39;label&#39; -&gt; &#39;identifier&#39;</span>
<span class=sd>            Keep in mind that &#39;identifier&#39; use &#39;product_type&#39; by default.</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: Group label that can be used for grouping of instances in UI.</span>
<span class=sd>            Group label can be overridden by instance itself.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_cached_group_label</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>label</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>identifier</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>group_label</span><span class=p>:</span>
            <span class=n>label</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>group_label</span>
        <span class=k>elif</span> <span class=bp>self</span><span class=o>.</span><span class=n>label</span><span class=p>:</span>
            <span class=n>label</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>label</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_cached_group_label</span> <span class=o>=</span> <span class=n>label</span>
    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_cached_group_label</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.BaseCreator.get_icon class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_icon</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Icon of creator (product type).</p> <p>Can return path to image file or awesome icon name.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>496</span>
<span class=normal>497</span>
<span class=normal>498</span>
<span class=normal>499</span>
<span class=normal>500</span>
<span class=normal>501</span>
<span class=normal>502</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_icon</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Icon of creator (product type).</span>

<span class=sd>    Can return path to image file or awesome icon name.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>icon</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.BaseCreator.get_instance_attr_defs class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_instance_attr_defs</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Plugin attribute definitions.</p> <p>Attribute definitions of plugin that hold data about created instance and values are stored to metadata for future usage and for publishing purposes.</p> <p>NOTE: Convert method should be implemented which should care about updating keys/values when plugin attributes change.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>list[AbstractAttrDef]: Attribute definitions that can be tweaked for created instance.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>581</span>
<span class=normal>582</span>
<span class=normal>583</span>
<span class=normal>584</span>
<span class=normal>585</span>
<span class=normal>586</span>
<span class=normal>587</span>
<span class=normal>588</span>
<span class=normal>589</span>
<span class=normal>590</span>
<span class=normal>591</span>
<span class=normal>592</span>
<span class=normal>593</span>
<span class=normal>594</span>
<span class=normal>595</span>
<span class=normal>596</span>
<span class=normal>597</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_instance_attr_defs</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Plugin attribute definitions.</span>

<span class=sd>    Attribute definitions of plugin that hold data about created instance</span>
<span class=sd>    and values are stored to metadata for future usage and for publishing</span>
<span class=sd>    purposes.</span>

<span class=sd>    NOTE:</span>
<span class=sd>    Convert method should be implemented which should care about updating</span>
<span class=sd>    keys/values when plugin attributes change.</span>

<span class=sd>    Returns:</span>
<span class=sd>        list[AbstractAttrDef]: Attribute definitions that can be tweaked</span>
<span class=sd>            for created instance.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>instance_attr_defs</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.BaseCreator.get_next_versions_for_instances class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_next_versions_for_instances</span><span class=p>(</span><span class=n>instances</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Prepare next versions for instances.</p> <p>This is helper method to receive next possible versions for instances. It is using context information on instance to receive them, 'folderPath' and 'product'.</p> <p>Output will contain version by each instance id.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>instances</code> </td> <td> <code><span title=list>list</span>[<a class="autorefs autorefs-internal" title="CreatedInstance (client.ayon_core.pipeline.create.structures.CreatedInstance)" href=structures.html#client.ayon_core.pipeline.create.structures.CreatedInstance>CreatedInstance</a>]</code> </td> <td> <div class=doc-md-description> <p>Instances for which to get next versions.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>dict[str, int]: Next versions by instance id.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>629</span>
<span class=normal>630</span>
<span class=normal>631</span>
<span class=normal>632</span>
<span class=normal>633</span>
<span class=normal>634</span>
<span class=normal>635</span>
<span class=normal>636</span>
<span class=normal>637</span>
<span class=normal>638</span>
<span class=normal>639</span>
<span class=normal>640</span>
<span class=normal>641</span>
<span class=normal>642</span>
<span class=normal>643</span>
<span class=normal>644</span>
<span class=normal>645</span>
<span class=normal>646</span>
<span class=normal>647</span>
<span class=normal>648</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_next_versions_for_instances</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instances</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Prepare next versions for instances.</span>

<span class=sd>    This is helper method to receive next possible versions for instances.</span>
<span class=sd>    It is using context information on instance to receive them,</span>
<span class=sd>    &#39;folderPath&#39; and &#39;product&#39;.</span>

<span class=sd>    Output will contain version by each instance id.</span>

<span class=sd>    Args:</span>
<span class=sd>        instances (list[CreatedInstance]): Instances for which to get next</span>
<span class=sd>            versions.</span>

<span class=sd>    Returns:</span>
<span class=sd>        dict[str, int]: Next versions by instance id.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=n>get_next_versions_for_instances</span><span class=p>(</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span><span class=o>.</span><span class=n>project_name</span><span class=p>,</span> <span class=n>instances</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.BaseCreator.get_product_name class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_product_name</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=n>folder_entity</span><span class=p>,</span> <span class=n>task_entity</span><span class=p>,</span> <span class=n>variant</span><span class=p>,</span> <span class=n>host_name</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>instance</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>project_entity</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Return product name for passed context.</p> <p>Method is also called on product name update. In that case origin instance is passed in.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>project_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Project name.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>folder_entity</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>Folder entity.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>task_entity</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>Task entity.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>variant</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Product name variant. In most of cases user input.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>host_name</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Which host creates product. Defaults to host name on create context.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>instance</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<a class="autorefs autorefs-internal" title="CreatedInstance (client.ayon_core.pipeline.create.structures.CreatedInstance)" href=structures.html#client.ayon_core.pipeline.create.structures.CreatedInstance>CreatedInstance</a>]</code> </td> <td> <div class=doc-md-description> <p>Object of 'CreatedInstance' for which is product name updated. Passed only on product name update.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>project_entity</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=dict>dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]]</code> </td> <td> <div class=doc-md-description> <p>Project entity.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>520</span>
<span class=normal>521</span>
<span class=normal>522</span>
<span class=normal>523</span>
<span class=normal>524</span>
<span class=normal>525</span>
<span class=normal>526</span>
<span class=normal>527</span>
<span class=normal>528</span>
<span class=normal>529</span>
<span class=normal>530</span>
<span class=normal>531</span>
<span class=normal>532</span>
<span class=normal>533</span>
<span class=normal>534</span>
<span class=normal>535</span>
<span class=normal>536</span>
<span class=normal>537</span>
<span class=normal>538</span>
<span class=normal>539</span>
<span class=normal>540</span>
<span class=normal>541</span>
<span class=normal>542</span>
<span class=normal>543</span>
<span class=normal>544</span>
<span class=normal>545</span>
<span class=normal>546</span>
<span class=normal>547</span>
<span class=normal>548</span>
<span class=normal>549</span>
<span class=normal>550</span>
<span class=normal>551</span>
<span class=normal>552</span>
<span class=normal>553</span>
<span class=normal>554</span>
<span class=normal>555</span>
<span class=normal>556</span>
<span class=normal>557</span>
<span class=normal>558</span>
<span class=normal>559</span>
<span class=normal>560</span>
<span class=normal>561</span>
<span class=normal>562</span>
<span class=normal>563</span>
<span class=normal>564</span>
<span class=normal>565</span>
<span class=normal>566</span>
<span class=normal>567</span>
<span class=normal>568</span>
<span class=normal>569</span>
<span class=normal>570</span>
<span class=normal>571</span>
<span class=normal>572</span>
<span class=normal>573</span>
<span class=normal>574</span>
<span class=normal>575</span>
<span class=normal>576</span>
<span class=normal>577</span>
<span class=normal>578</span>
<span class=normal>579</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_product_name</span><span class=p>(</span>
    <span class=bp>self</span><span class=p>,</span>
    <span class=n>project_name</span><span class=p>,</span>
    <span class=n>folder_entity</span><span class=p>,</span>
    <span class=n>task_entity</span><span class=p>,</span>
    <span class=n>variant</span><span class=p>,</span>
    <span class=n>host_name</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>instance</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>project_entity</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Return product name for passed context.</span>

<span class=sd>    Method is also called on product name update. In that case origin</span>
<span class=sd>    instance is passed in.</span>

<span class=sd>    Args:</span>
<span class=sd>        project_name (str): Project name.</span>
<span class=sd>        folder_entity (dict): Folder entity.</span>
<span class=sd>        task_entity (dict): Task entity.</span>
<span class=sd>        variant (str): Product name variant. In most of cases user input.</span>
<span class=sd>        host_name (Optional[str]): Which host creates product. Defaults</span>
<span class=sd>            to host name on create context.</span>
<span class=sd>        instance (Optional[CreatedInstance]): Object of &#39;CreatedInstance&#39;</span>
<span class=sd>            for which is product name updated. Passed only on product name</span>
<span class=sd>            update.</span>
<span class=sd>        project_entity (Optional[dict[str, Any]]): Project entity.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=n>host_name</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>host_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span><span class=o>.</span><span class=n>host_name</span>

    <span class=n>task_name</span> <span class=o>=</span> <span class=n>task_type</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=k>if</span> <span class=n>task_entity</span><span class=p>:</span>
        <span class=n>task_name</span> <span class=o>=</span> <span class=n>task_entity</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span>
        <span class=n>task_type</span> <span class=o>=</span> <span class=n>task_entity</span><span class=p>[</span><span class=s2>&quot;taskType&quot;</span><span class=p>]</span>

    <span class=n>dynamic_data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_dynamic_data</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span>
        <span class=n>folder_entity</span><span class=p>,</span>
        <span class=n>task_entity</span><span class=p>,</span>
        <span class=n>variant</span><span class=p>,</span>
        <span class=n>host_name</span><span class=p>,</span>
        <span class=n>instance</span>
    <span class=p>)</span>

    <span class=n>cur_project_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span><span class=o>.</span><span class=n>get_current_project_name</span><span class=p>()</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>project_entity</span> <span class=ow>and</span> <span class=n>project_name</span> <span class=o>==</span> <span class=n>cur_project_name</span><span class=p>:</span>
        <span class=n>project_entity</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span><span class=o>.</span><span class=n>get_current_project_entity</span><span class=p>()</span>

    <span class=k>return</span> <span class=n>get_product_name</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span>
        <span class=n>task_name</span><span class=p>,</span>
        <span class=n>task_type</span><span class=p>,</span>
        <span class=n>host_name</span><span class=p>,</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>product_type</span><span class=p>,</span>
        <span class=n>variant</span><span class=p>,</span>
        <span class=n>dynamic_data</span><span class=o>=</span><span class=n>dynamic_data</span><span class=p>,</span>
        <span class=n>project_settings</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>project_settings</span><span class=p>,</span>
        <span class=n>project_entity</span><span class=o>=</span><span class=n>project_entity</span><span class=p>,</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.BaseCreator.register_callbacks class="doc doc-heading"> <code class="highlight language-python"><span class=n>register_callbacks</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Register callbacks for creator.</p> <p>Default implementation does nothing. It can be overridden to register callbacks for creator.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>296</span>
<span class=normal>297</span>
<span class=normal>298</span>
<span class=normal>299</span>
<span class=normal>300</span>
<span class=normal>301</span>
<span class=normal>302</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>register_callbacks</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Register callbacks for creator.</span>

<span class=sd>    Default implementation does nothing. It can be overridden to register</span>
<span class=sd>    callbacks for creator.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.BaseCreator.remove_instances class="doc doc-heading"> <code class="highlight language-python"><span class=n>remove_instances</span><span class=p>(</span><span class=n>instances</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Method called on instance removal.</p> <p>Can also remove instance metadata from context but should return 'True' if did so.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>instances</code> </td> <td> <code><span title=list>list</span>[<a class="autorefs autorefs-internal" title="CreatedInstance (client.ayon_core.pipeline.create.structures.CreatedInstance)" href=structures.html#client.ayon_core.pipeline.create.structures.CreatedInstance>CreatedInstance</a>]</code> </td> <td> <div class=doc-md-description> <p>Instance objects which should be removed.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>482</span>
<span class=normal>483</span>
<span class=normal>484</span>
<span class=normal>485</span>
<span class=normal>486</span>
<span class=normal>487</span>
<span class=normal>488</span>
<span class=normal>489</span>
<span class=normal>490</span>
<span class=normal>491</span>
<span class=normal>492</span>
<span class=normal>493</span>
<span class=normal>494</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@abstractmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>remove_instances</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instances</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Method called on instance removal.</span>

<span class=sd>    Can also remove instance metadata from context but should return</span>
<span class=sd>    &#39;True&#39; if did so.</span>

<span class=sd>    Args:</span>
<span class=sd>        instances (list[CreatedInstance]): Instance objects which should be</span>
<span class=sd>            removed.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.BaseCreator.set_instance_thumbnail_path class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_instance_thumbnail_path</span><span class=p>(</span><span class=n>instance_id</span><span class=p>,</span> <span class=n>thumbnail_path</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Set path to thumbnail for instance.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>622</span>
<span class=normal>623</span>
<span class=normal>624</span>
<span class=normal>625</span>
<span class=normal>626</span>
<span class=normal>627</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_instance_thumbnail_path</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instance_id</span><span class=p>,</span> <span class=n>thumbnail_path</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Set path to thumbnail for instance.&quot;&quot;&quot;</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span><span class=o>.</span><span class=n>thumbnail_paths_by_instance_id</span><span class=p>[</span><span class=n>instance_id</span><span class=p>]</span> <span class=o>=</span> <span class=p>(</span>
        <span class=n>thumbnail_path</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.BaseCreator.update_instances class="doc doc-heading"> <code class="highlight language-python"><span class=n>update_instances</span><span class=p>(</span><span class=n>update_list</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Store changes of existing instances so they can be recollected.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>update_list</code> </td> <td> <code><span title=list>list</span>[<span title=client.ayon_core.pipeline.create.context.UpdateData>UpdateData</span>]</code> </td> <td> <div class=doc-md-description> <p>Gets list of tuples. Each item contain changed instance and it's changes.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>471</span>
<span class=normal>472</span>
<span class=normal>473</span>
<span class=normal>474</span>
<span class=normal>475</span>
<span class=normal>476</span>
<span class=normal>477</span>
<span class=normal>478</span>
<span class=normal>479</span>
<span class=normal>480</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@abstractmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>update_instances</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>update_list</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Store changes of existing instances so they can be recollected.</span>

<span class=sd>    Args:</span>
<span class=sd>        update_list (list[UpdateData]): Gets list of tuples. Each item</span>
<span class=sd>            contain changed instance and it&#39;s changes.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.create.ConvertorItem class="doc doc-heading"> <code>ConvertorItem</code> </h2> <div class="doc doc-contents "> <p>Item representing convertor plugin.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>identifier</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Identifier of convertor.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>label</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Label which will be shown in UI.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>ConvertorItem</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Item representing convertor plugin.</span>

<span class=sd>    Args:</span>
<span class=sd>        identifier (str): Identifier of convertor.</span>
<span class=sd>        label (str): Label which will be shown in UI.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>identifier</span><span class=p>,</span> <span class=n>label</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_id</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>uuid4</span><span class=p>())</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>identifier</span> <span class=o>=</span> <span class=n>identifier</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>label</span> <span class=o>=</span> <span class=n>label</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>id</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_id</span>

    <span class=k>def</span><span class=w> </span><span class=nf>to_data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=p>{</span>
            <span class=s2>&quot;id&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
            <span class=s2>&quot;identifier&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>identifier</span><span class=p>,</span>
            <span class=s2>&quot;label&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>label</span>
        <span class=p>}</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>from_data</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>data</span><span class=p>):</span>
        <span class=n>obj</span> <span class=o>=</span> <span class=bp>cls</span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;identifier&quot;</span><span class=p>],</span> <span class=n>data</span><span class=p>[</span><span class=s2>&quot;label&quot;</span><span class=p>])</span>
        <span class=n>obj</span><span class=o>.</span><span class=n>_id</span> <span class=o>=</span> <span class=n>data</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]</span>
        <span class=k>return</span> <span class=n>obj</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.create.CreateContext class="doc doc-heading"> <code>CreateContext</code> </h2> <div class="doc doc-contents "> <p>Context of instance creation.</p> <p>Context itself also can store data related to whole creation (workfile). - those are mainly for Context publish plugins</p> <details class=todos open> <summary>Todos</summary> <p>Don't use 'AvalonMongoDB'. It's used only to keep track about current context which should be handled by host.</p> </details> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>host(ModuleType)</code> </td> <td> </td> <td> <div class=doc-md-description> <p>Host implementation which handles implementation and global metadata.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>headless(bool)</code> </td> <td> </td> <td> <div class=doc-md-description> <p>Context is created out of UI (Current not used).</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>reset(bool)</code> </td> <td> </td> <td> <div class=doc-md-description> <p>Reset context on initialization.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>discover_publish_plugins(bool)</code> </td> <td> </td> <td> <div class=doc-md-description> <p>Discover publish plugins during reset phase.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 149</span>
<span class=normal> 150</span>
<span class=normal> 151</span>
<span class=normal> 152</span>
<span class=normal> 153</span>
<span class=normal> 154</span>
<span class=normal> 155</span>
<span class=normal> 156</span>
<span class=normal> 157</span>
<span class=normal> 158</span>
<span class=normal> 159</span>
<span class=normal> 160</span>
<span class=normal> 161</span>
<span class=normal> 162</span>
<span class=normal> 163</span>
<span class=normal> 164</span>
<span class=normal> 165</span>
<span class=normal> 166</span>
<span class=normal> 167</span>
<span class=normal> 168</span>
<span class=normal> 169</span>
<span class=normal> 170</span>
<span class=normal> 171</span>
<span class=normal> 172</span>
<span class=normal> 173</span>
<span class=normal> 174</span>
<span class=normal> 175</span>
<span class=normal> 176</span>
<span class=normal> 177</span>
<span class=normal> 178</span>
<span class=normal> 179</span>
<span class=normal> 180</span>
<span class=normal> 181</span>
<span class=normal> 182</span>
<span class=normal> 183</span>
<span class=normal> 184</span>
<span class=normal> 185</span>
<span class=normal> 186</span>
<span class=normal> 187</span>
<span class=normal> 188</span>
<span class=normal> 189</span>
<span class=normal> 190</span>
<span class=normal> 191</span>
<span class=normal> 192</span>
<span class=normal> 193</span>
<span class=normal> 194</span>
<span class=normal> 195</span>
<span class=normal> 196</span>
<span class=normal> 197</span>
<span class=normal> 198</span>
<span class=normal> 199</span>
<span class=normal> 200</span>
<span class=normal> 201</span>
<span class=normal> 202</span>
<span class=normal> 203</span>
<span class=normal> 204</span>
<span class=normal> 205</span>
<span class=normal> 206</span>
<span class=normal> 207</span>
<span class=normal> 208</span>
<span class=normal> 209</span>
<span class=normal> 210</span>
<span class=normal> 211</span>
<span class=normal> 212</span>
<span class=normal> 213</span>
<span class=normal> 214</span>
<span class=normal> 215</span>
<span class=normal> 216</span>
<span class=normal> 217</span>
<span class=normal> 218</span>
<span class=normal> 219</span>
<span class=normal> 220</span>
<span class=normal> 221</span>
<span class=normal> 222</span>
<span class=normal> 223</span>
<span class=normal> 224</span>
<span class=normal> 225</span>
<span class=normal> 226</span>
<span class=normal> 227</span>
<span class=normal> 228</span>
<span class=normal> 229</span>
<span class=normal> 230</span>
<span class=normal> 231</span>
<span class=normal> 232</span>
<span class=normal> 233</span>
<span class=normal> 234</span>
<span class=normal> 235</span>
<span class=normal> 236</span>
<span class=normal> 237</span>
<span class=normal> 238</span>
<span class=normal> 239</span>
<span class=normal> 240</span>
<span class=normal> 241</span>
<span class=normal> 242</span>
<span class=normal> 243</span>
<span class=normal> 244</span>
<span class=normal> 245</span>
<span class=normal> 246</span>
<span class=normal> 247</span>
<span class=normal> 248</span>
<span class=normal> 249</span>
<span class=normal> 250</span>
<span class=normal> 251</span>
<span class=normal> 252</span>
<span class=normal> 253</span>
<span class=normal> 254</span>
<span class=normal> 255</span>
<span class=normal> 256</span>
<span class=normal> 257</span>
<span class=normal> 258</span>
<span class=normal> 259</span>
<span class=normal> 260</span>
<span class=normal> 261</span>
<span class=normal> 262</span>
<span class=normal> 263</span>
<span class=normal> 264</span>
<span class=normal> 265</span>
<span class=normal> 266</span>
<span class=normal> 267</span>
<span class=normal> 268</span>
<span class=normal> 269</span>
<span class=normal> 270</span>
<span class=normal> 271</span>
<span class=normal> 272</span>
<span class=normal> 273</span>
<span class=normal> 274</span>
<span class=normal> 275</span>
<span class=normal> 276</span>
<span class=normal> 277</span>
<span class=normal> 278</span>
<span class=normal> 279</span>
<span class=normal> 280</span>
<span class=normal> 281</span>
<span class=normal> 282</span>
<span class=normal> 283</span>
<span class=normal> 284</span>
<span class=normal> 285</span>
<span class=normal> 286</span>
<span class=normal> 287</span>
<span class=normal> 288</span>
<span class=normal> 289</span>
<span class=normal> 290</span>
<span class=normal> 291</span>
<span class=normal> 292</span>
<span class=normal> 293</span>
<span class=normal> 294</span>
<span class=normal> 295</span>
<span class=normal> 296</span>
<span class=normal> 297</span>
<span class=normal> 298</span>
<span class=normal> 299</span>
<span class=normal> 300</span>
<span class=normal> 301</span>
<span class=normal> 302</span>
<span class=normal> 303</span>
<span class=normal> 304</span>
<span class=normal> 305</span>
<span class=normal> 306</span>
<span class=normal> 307</span>
<span class=normal> 308</span>
<span class=normal> 309</span>
<span class=normal> 310</span>
<span class=normal> 311</span>
<span class=normal> 312</span>
<span class=normal> 313</span>
<span class=normal> 314</span>
<span class=normal> 315</span>
<span class=normal> 316</span>
<span class=normal> 317</span>
<span class=normal> 318</span>
<span class=normal> 319</span>
<span class=normal> 320</span>
<span class=normal> 321</span>
<span class=normal> 322</span>
<span class=normal> 323</span>
<span class=normal> 324</span>
<span class=normal> 325</span>
<span class=normal> 326</span>
<span class=normal> 327</span>
<span class=normal> 328</span>
<span class=normal> 329</span>
<span class=normal> 330</span>
<span class=normal> 331</span>
<span class=normal> 332</span>
<span class=normal> 333</span>
<span class=normal> 334</span>
<span class=normal> 335</span>
<span class=normal> 336</span>
<span class=normal> 337</span>
<span class=normal> 338</span>
<span class=normal> 339</span>
<span class=normal> 340</span>
<span class=normal> 341</span>
<span class=normal> 342</span>
<span class=normal> 343</span>
<span class=normal> 344</span>
<span class=normal> 345</span>
<span class=normal> 346</span>
<span class=normal> 347</span>
<span class=normal> 348</span>
<span class=normal> 349</span>
<span class=normal> 350</span>
<span class=normal> 351</span>
<span class=normal> 352</span>
<span class=normal> 353</span>
<span class=normal> 354</span>
<span class=normal> 355</span>
<span class=normal> 356</span>
<span class=normal> 357</span>
<span class=normal> 358</span>
<span class=normal> 359</span>
<span class=normal> 360</span>
<span class=normal> 361</span>
<span class=normal> 362</span>
<span class=normal> 363</span>
<span class=normal> 364</span>
<span class=normal> 365</span>
<span class=normal> 366</span>
<span class=normal> 367</span>
<span class=normal> 368</span>
<span class=normal> 369</span>
<span class=normal> 370</span>
<span class=normal> 371</span>
<span class=normal> 372</span>
<span class=normal> 373</span>
<span class=normal> 374</span>
<span class=normal> 375</span>
<span class=normal> 376</span>
<span class=normal> 377</span>
<span class=normal> 378</span>
<span class=normal> 379</span>
<span class=normal> 380</span>
<span class=normal> 381</span>
<span class=normal> 382</span>
<span class=normal> 383</span>
<span class=normal> 384</span>
<span class=normal> 385</span>
<span class=normal> 386</span>
<span class=normal> 387</span>
<span class=normal> 388</span>
<span class=normal> 389</span>
<span class=normal> 390</span>
<span class=normal> 391</span>
<span class=normal> 392</span>
<span class=normal> 393</span>
<span class=normal> 394</span>
<span class=normal> 395</span>
<span class=normal> 396</span>
<span class=normal> 397</span>
<span class=normal> 398</span>
<span class=normal> 399</span>
<span class=normal> 400</span>
<span class=normal> 401</span>
<span class=normal> 402</span>
<span class=normal> 403</span>
<span class=normal> 404</span>
<span class=normal> 405</span>
<span class=normal> 406</span>
<span class=normal> 407</span>
<span class=normal> 408</span>
<span class=normal> 409</span>
<span class=normal> 410</span>
<span class=normal> 411</span>
<span class=normal> 412</span>
<span class=normal> 413</span>
<span class=normal> 414</span>
<span class=normal> 415</span>
<span class=normal> 416</span>
<span class=normal> 417</span>
<span class=normal> 418</span>
<span class=normal> 419</span>
<span class=normal> 420</span>
<span class=normal> 421</span>
<span class=normal> 422</span>
<span class=normal> 423</span>
<span class=normal> 424</span>
<span class=normal> 425</span>
<span class=normal> 426</span>
<span class=normal> 427</span>
<span class=normal> 428</span>
<span class=normal> 429</span>
<span class=normal> 430</span>
<span class=normal> 431</span>
<span class=normal> 432</span>
<span class=normal> 433</span>
<span class=normal> 434</span>
<span class=normal> 435</span>
<span class=normal> 436</span>
<span class=normal> 437</span>
<span class=normal> 438</span>
<span class=normal> 439</span>
<span class=normal> 440</span>
<span class=normal> 441</span>
<span class=normal> 442</span>
<span class=normal> 443</span>
<span class=normal> 444</span>
<span class=normal> 445</span>
<span class=normal> 446</span>
<span class=normal> 447</span>
<span class=normal> 448</span>
<span class=normal> 449</span>
<span class=normal> 450</span>
<span class=normal> 451</span>
<span class=normal> 452</span>
<span class=normal> 453</span>
<span class=normal> 454</span>
<span class=normal> 455</span>
<span class=normal> 456</span>
<span class=normal> 457</span>
<span class=normal> 458</span>
<span class=normal> 459</span>
<span class=normal> 460</span>
<span class=normal> 461</span>
<span class=normal> 462</span>
<span class=normal> 463</span>
<span class=normal> 464</span>
<span class=normal> 465</span>
<span class=normal> 466</span>
<span class=normal> 467</span>
<span class=normal> 468</span>
<span class=normal> 469</span>
<span class=normal> 470</span>
<span class=normal> 471</span>
<span class=normal> 472</span>
<span class=normal> 473</span>
<span class=normal> 474</span>
<span class=normal> 475</span>
<span class=normal> 476</span>
<span class=normal> 477</span>
<span class=normal> 478</span>
<span class=normal> 479</span>
<span class=normal> 480</span>
<span class=normal> 481</span>
<span class=normal> 482</span>
<span class=normal> 483</span>
<span class=normal> 484</span>
<span class=normal> 485</span>
<span class=normal> 486</span>
<span class=normal> 487</span>
<span class=normal> 488</span>
<span class=normal> 489</span>
<span class=normal> 490</span>
<span class=normal> 491</span>
<span class=normal> 492</span>
<span class=normal> 493</span>
<span class=normal> 494</span>
<span class=normal> 495</span>
<span class=normal> 496</span>
<span class=normal> 497</span>
<span class=normal> 498</span>
<span class=normal> 499</span>
<span class=normal> 500</span>
<span class=normal> 501</span>
<span class=normal> 502</span>
<span class=normal> 503</span>
<span class=normal> 504</span>
<span class=normal> 505</span>
<span class=normal> 506</span>
<span class=normal> 507</span>
<span class=normal> 508</span>
<span class=normal> 509</span>
<span class=normal> 510</span>
<span class=normal> 511</span>
<span class=normal> 512</span>
<span class=normal> 513</span>
<span class=normal> 514</span>
<span class=normal> 515</span>
<span class=normal> 516</span>
<span class=normal> 517</span>
<span class=normal> 518</span>
<span class=normal> 519</span>
<span class=normal> 520</span>
<span class=normal> 521</span>
<span class=normal> 522</span>
<span class=normal> 523</span>
<span class=normal> 524</span>
<span class=normal> 525</span>
<span class=normal> 526</span>
<span class=normal> 527</span>
<span class=normal> 528</span>
<span class=normal> 529</span>
<span class=normal> 530</span>
<span class=normal> 531</span>
<span class=normal> 532</span>
<span class=normal> 533</span>
<span class=normal> 534</span>
<span class=normal> 535</span>
<span class=normal> 536</span>
<span class=normal> 537</span>
<span class=normal> 538</span>
<span class=normal> 539</span>
<span class=normal> 540</span>
<span class=normal> 541</span>
<span class=normal> 542</span>
<span class=normal> 543</span>
<span class=normal> 544</span>
<span class=normal> 545</span>
<span class=normal> 546</span>
<span class=normal> 547</span>
<span class=normal> 548</span>
<span class=normal> 549</span>
<span class=normal> 550</span>
<span class=normal> 551</span>
<span class=normal> 552</span>
<span class=normal> 553</span>
<span class=normal> 554</span>
<span class=normal> 555</span>
<span class=normal> 556</span>
<span class=normal> 557</span>
<span class=normal> 558</span>
<span class=normal> 559</span>
<span class=normal> 560</span>
<span class=normal> 561</span>
<span class=normal> 562</span>
<span class=normal> 563</span>
<span class=normal> 564</span>
<span class=normal> 565</span>
<span class=normal> 566</span>
<span class=normal> 567</span>
<span class=normal> 568</span>
<span class=normal> 569</span>
<span class=normal> 570</span>
<span class=normal> 571</span>
<span class=normal> 572</span>
<span class=normal> 573</span>
<span class=normal> 574</span>
<span class=normal> 575</span>
<span class=normal> 576</span>
<span class=normal> 577</span>
<span class=normal> 578</span>
<span class=normal> 579</span>
<span class=normal> 580</span>
<span class=normal> 581</span>
<span class=normal> 582</span>
<span class=normal> 583</span>
<span class=normal> 584</span>
<span class=normal> 585</span>
<span class=normal> 586</span>
<span class=normal> 587</span>
<span class=normal> 588</span>
<span class=normal> 589</span>
<span class=normal> 590</span>
<span class=normal> 591</span>
<span class=normal> 592</span>
<span class=normal> 593</span>
<span class=normal> 594</span>
<span class=normal> 595</span>
<span class=normal> 596</span>
<span class=normal> 597</span>
<span class=normal> 598</span>
<span class=normal> 599</span>
<span class=normal> 600</span>
<span class=normal> 601</span>
<span class=normal> 602</span>
<span class=normal> 603</span>
<span class=normal> 604</span>
<span class=normal> 605</span>
<span class=normal> 606</span>
<span class=normal> 607</span>
<span class=normal> 608</span>
<span class=normal> 609</span>
<span class=normal> 610</span>
<span class=normal> 611</span>
<span class=normal> 612</span>
<span class=normal> 613</span>
<span class=normal> 614</span>
<span class=normal> 615</span>
<span class=normal> 616</span>
<span class=normal> 617</span>
<span class=normal> 618</span>
<span class=normal> 619</span>
<span class=normal> 620</span>
<span class=normal> 621</span>
<span class=normal> 622</span>
<span class=normal> 623</span>
<span class=normal> 624</span>
<span class=normal> 625</span>
<span class=normal> 626</span>
<span class=normal> 627</span>
<span class=normal> 628</span>
<span class=normal> 629</span>
<span class=normal> 630</span>
<span class=normal> 631</span>
<span class=normal> 632</span>
<span class=normal> 633</span>
<span class=normal> 634</span>
<span class=normal> 635</span>
<span class=normal> 636</span>
<span class=normal> 637</span>
<span class=normal> 638</span>
<span class=normal> 639</span>
<span class=normal> 640</span>
<span class=normal> 641</span>
<span class=normal> 642</span>
<span class=normal> 643</span>
<span class=normal> 644</span>
<span class=normal> 645</span>
<span class=normal> 646</span>
<span class=normal> 647</span>
<span class=normal> 648</span>
<span class=normal> 649</span>
<span class=normal> 650</span>
<span class=normal> 651</span>
<span class=normal> 652</span>
<span class=normal> 653</span>
<span class=normal> 654</span>
<span class=normal> 655</span>
<span class=normal> 656</span>
<span class=normal> 657</span>
<span class=normal> 658</span>
<span class=normal> 659</span>
<span class=normal> 660</span>
<span class=normal> 661</span>
<span class=normal> 662</span>
<span class=normal> 663</span>
<span class=normal> 664</span>
<span class=normal> 665</span>
<span class=normal> 666</span>
<span class=normal> 667</span>
<span class=normal> 668</span>
<span class=normal> 669</span>
<span class=normal> 670</span>
<span class=normal> 671</span>
<span class=normal> 672</span>
<span class=normal> 673</span>
<span class=normal> 674</span>
<span class=normal> 675</span>
<span class=normal> 676</span>
<span class=normal> 677</span>
<span class=normal> 678</span>
<span class=normal> 679</span>
<span class=normal> 680</span>
<span class=normal> 681</span>
<span class=normal> 682</span>
<span class=normal> 683</span>
<span class=normal> 684</span>
<span class=normal> 685</span>
<span class=normal> 686</span>
<span class=normal> 687</span>
<span class=normal> 688</span>
<span class=normal> 689</span>
<span class=normal> 690</span>
<span class=normal> 691</span>
<span class=normal> 692</span>
<span class=normal> 693</span>
<span class=normal> 694</span>
<span class=normal> 695</span>
<span class=normal> 696</span>
<span class=normal> 697</span>
<span class=normal> 698</span>
<span class=normal> 699</span>
<span class=normal> 700</span>
<span class=normal> 701</span>
<span class=normal> 702</span>
<span class=normal> 703</span>
<span class=normal> 704</span>
<span class=normal> 705</span>
<span class=normal> 706</span>
<span class=normal> 707</span>
<span class=normal> 708</span>
<span class=normal> 709</span>
<span class=normal> 710</span>
<span class=normal> 711</span>
<span class=normal> 712</span>
<span class=normal> 713</span>
<span class=normal> 714</span>
<span class=normal> 715</span>
<span class=normal> 716</span>
<span class=normal> 717</span>
<span class=normal> 718</span>
<span class=normal> 719</span>
<span class=normal> 720</span>
<span class=normal> 721</span>
<span class=normal> 722</span>
<span class=normal> 723</span>
<span class=normal> 724</span>
<span class=normal> 725</span>
<span class=normal> 726</span>
<span class=normal> 727</span>
<span class=normal> 728</span>
<span class=normal> 729</span>
<span class=normal> 730</span>
<span class=normal> 731</span>
<span class=normal> 732</span>
<span class=normal> 733</span>
<span class=normal> 734</span>
<span class=normal> 735</span>
<span class=normal> 736</span>
<span class=normal> 737</span>
<span class=normal> 738</span>
<span class=normal> 739</span>
<span class=normal> 740</span>
<span class=normal> 741</span>
<span class=normal> 742</span>
<span class=normal> 743</span>
<span class=normal> 744</span>
<span class=normal> 745</span>
<span class=normal> 746</span>
<span class=normal> 747</span>
<span class=normal> 748</span>
<span class=normal> 749</span>
<span class=normal> 750</span>
<span class=normal> 751</span>
<span class=normal> 752</span>
<span class=normal> 753</span>
<span class=normal> 754</span>
<span class=normal> 755</span>
<span class=normal> 756</span>
<span class=normal> 757</span>
<span class=normal> 758</span>
<span class=normal> 759</span>
<span class=normal> 760</span>
<span class=normal> 761</span>
<span class=normal> 762</span>
<span class=normal> 763</span>
<span class=normal> 764</span>
<span class=normal> 765</span>
<span class=normal> 766</span>
<span class=normal> 767</span>
<span class=normal> 768</span>
<span class=normal> 769</span>
<span class=normal> 770</span>
<span class=normal> 771</span>
<span class=normal> 772</span>
<span class=normal> 773</span>
<span class=normal> 774</span>
<span class=normal> 775</span>
<span class=normal> 776</span>
<span class=normal> 777</span>
<span class=normal> 778</span>
<span class=normal> 779</span>
<span class=normal> 780</span>
<span class=normal> 781</span>
<span class=normal> 782</span>
<span class=normal> 783</span>
<span class=normal> 784</span>
<span class=normal> 785</span>
<span class=normal> 786</span>
<span class=normal> 787</span>
<span class=normal> 788</span>
<span class=normal> 789</span>
<span class=normal> 790</span>
<span class=normal> 791</span>
<span class=normal> 792</span>
<span class=normal> 793</span>
<span class=normal> 794</span>
<span class=normal> 795</span>
<span class=normal> 796</span>
<span class=normal> 797</span>
<span class=normal> 798</span>
<span class=normal> 799</span>
<span class=normal> 800</span>
<span class=normal> 801</span>
<span class=normal> 802</span>
<span class=normal> 803</span>
<span class=normal> 804</span>
<span class=normal> 805</span>
<span class=normal> 806</span>
<span class=normal> 807</span>
<span class=normal> 808</span>
<span class=normal> 809</span>
<span class=normal> 810</span>
<span class=normal> 811</span>
<span class=normal> 812</span>
<span class=normal> 813</span>
<span class=normal> 814</span>
<span class=normal> 815</span>
<span class=normal> 816</span>
<span class=normal> 817</span>
<span class=normal> 818</span>
<span class=normal> 819</span>
<span class=normal> 820</span>
<span class=normal> 821</span>
<span class=normal> 822</span>
<span class=normal> 823</span>
<span class=normal> 824</span>
<span class=normal> 825</span>
<span class=normal> 826</span>
<span class=normal> 827</span>
<span class=normal> 828</span>
<span class=normal> 829</span>
<span class=normal> 830</span>
<span class=normal> 831</span>
<span class=normal> 832</span>
<span class=normal> 833</span>
<span class=normal> 834</span>
<span class=normal> 835</span>
<span class=normal> 836</span>
<span class=normal> 837</span>
<span class=normal> 838</span>
<span class=normal> 839</span>
<span class=normal> 840</span>
<span class=normal> 841</span>
<span class=normal> 842</span>
<span class=normal> 843</span>
<span class=normal> 844</span>
<span class=normal> 845</span>
<span class=normal> 846</span>
<span class=normal> 847</span>
<span class=normal> 848</span>
<span class=normal> 849</span>
<span class=normal> 850</span>
<span class=normal> 851</span>
<span class=normal> 852</span>
<span class=normal> 853</span>
<span class=normal> 854</span>
<span class=normal> 855</span>
<span class=normal> 856</span>
<span class=normal> 857</span>
<span class=normal> 858</span>
<span class=normal> 859</span>
<span class=normal> 860</span>
<span class=normal> 861</span>
<span class=normal> 862</span>
<span class=normal> 863</span>
<span class=normal> 864</span>
<span class=normal> 865</span>
<span class=normal> 866</span>
<span class=normal> 867</span>
<span class=normal> 868</span>
<span class=normal> 869</span>
<span class=normal> 870</span>
<span class=normal> 871</span>
<span class=normal> 872</span>
<span class=normal> 873</span>
<span class=normal> 874</span>
<span class=normal> 875</span>
<span class=normal> 876</span>
<span class=normal> 877</span>
<span class=normal> 878</span>
<span class=normal> 879</span>
<span class=normal> 880</span>
<span class=normal> 881</span>
<span class=normal> 882</span>
<span class=normal> 883</span>
<span class=normal> 884</span>
<span class=normal> 885</span>
<span class=normal> 886</span>
<span class=normal> 887</span>
<span class=normal> 888</span>
<span class=normal> 889</span>
<span class=normal> 890</span>
<span class=normal> 891</span>
<span class=normal> 892</span>
<span class=normal> 893</span>
<span class=normal> 894</span>
<span class=normal> 895</span>
<span class=normal> 896</span>
<span class=normal> 897</span>
<span class=normal> 898</span>
<span class=normal> 899</span>
<span class=normal> 900</span>
<span class=normal> 901</span>
<span class=normal> 902</span>
<span class=normal> 903</span>
<span class=normal> 904</span>
<span class=normal> 905</span>
<span class=normal> 906</span>
<span class=normal> 907</span>
<span class=normal> 908</span>
<span class=normal> 909</span>
<span class=normal> 910</span>
<span class=normal> 911</span>
<span class=normal> 912</span>
<span class=normal> 913</span>
<span class=normal> 914</span>
<span class=normal> 915</span>
<span class=normal> 916</span>
<span class=normal> 917</span>
<span class=normal> 918</span>
<span class=normal> 919</span>
<span class=normal> 920</span>
<span class=normal> 921</span>
<span class=normal> 922</span>
<span class=normal> 923</span>
<span class=normal> 924</span>
<span class=normal> 925</span>
<span class=normal> 926</span>
<span class=normal> 927</span>
<span class=normal> 928</span>
<span class=normal> 929</span>
<span class=normal> 930</span>
<span class=normal> 931</span>
<span class=normal> 932</span>
<span class=normal> 933</span>
<span class=normal> 934</span>
<span class=normal> 935</span>
<span class=normal> 936</span>
<span class=normal> 937</span>
<span class=normal> 938</span>
<span class=normal> 939</span>
<span class=normal> 940</span>
<span class=normal> 941</span>
<span class=normal> 942</span>
<span class=normal> 943</span>
<span class=normal> 944</span>
<span class=normal> 945</span>
<span class=normal> 946</span>
<span class=normal> 947</span>
<span class=normal> 948</span>
<span class=normal> 949</span>
<span class=normal> 950</span>
<span class=normal> 951</span>
<span class=normal> 952</span>
<span class=normal> 953</span>
<span class=normal> 954</span>
<span class=normal> 955</span>
<span class=normal> 956</span>
<span class=normal> 957</span>
<span class=normal> 958</span>
<span class=normal> 959</span>
<span class=normal> 960</span>
<span class=normal> 961</span>
<span class=normal> 962</span>
<span class=normal> 963</span>
<span class=normal> 964</span>
<span class=normal> 965</span>
<span class=normal> 966</span>
<span class=normal> 967</span>
<span class=normal> 968</span>
<span class=normal> 969</span>
<span class=normal> 970</span>
<span class=normal> 971</span>
<span class=normal> 972</span>
<span class=normal> 973</span>
<span class=normal> 974</span>
<span class=normal> 975</span>
<span class=normal> 976</span>
<span class=normal> 977</span>
<span class=normal> 978</span>
<span class=normal> 979</span>
<span class=normal> 980</span>
<span class=normal> 981</span>
<span class=normal> 982</span>
<span class=normal> 983</span>
<span class=normal> 984</span>
<span class=normal> 985</span>
<span class=normal> 986</span>
<span class=normal> 987</span>
<span class=normal> 988</span>
<span class=normal> 989</span>
<span class=normal> 990</span>
<span class=normal> 991</span>
<span class=normal> 992</span>
<span class=normal> 993</span>
<span class=normal> 994</span>
<span class=normal> 995</span>
<span class=normal> 996</span>
<span class=normal> 997</span>
<span class=normal> 998</span>
<span class=normal> 999</span>
<span class=normal>1000</span>
<span class=normal>1001</span>
<span class=normal>1002</span>
<span class=normal>1003</span>
<span class=normal>1004</span>
<span class=normal>1005</span>
<span class=normal>1006</span>
<span class=normal>1007</span>
<span class=normal>1008</span>
<span class=normal>1009</span>
<span class=normal>1010</span>
<span class=normal>1011</span>
<span class=normal>1012</span>
<span class=normal>1013</span>
<span class=normal>1014</span>
<span class=normal>1015</span>
<span class=normal>1016</span>
<span class=normal>1017</span>
<span class=normal>1018</span>
<span class=normal>1019</span>
<span class=normal>1020</span>
<span class=normal>1021</span>
<span class=normal>1022</span>
<span class=normal>1023</span>
<span class=normal>1024</span>
<span class=normal>1025</span>
<span class=normal>1026</span>
<span class=normal>1027</span>
<span class=normal>1028</span>
<span class=normal>1029</span>
<span class=normal>1030</span>
<span class=normal>1031</span>
<span class=normal>1032</span>
<span class=normal>1033</span>
<span class=normal>1034</span>
<span class=normal>1035</span>
<span class=normal>1036</span>
<span class=normal>1037</span>
<span class=normal>1038</span>
<span class=normal>1039</span>
<span class=normal>1040</span>
<span class=normal>1041</span>
<span class=normal>1042</span>
<span class=normal>1043</span>
<span class=normal>1044</span>
<span class=normal>1045</span>
<span class=normal>1046</span>
<span class=normal>1047</span>
<span class=normal>1048</span>
<span class=normal>1049</span>
<span class=normal>1050</span>
<span class=normal>1051</span>
<span class=normal>1052</span>
<span class=normal>1053</span>
<span class=normal>1054</span>
<span class=normal>1055</span>
<span class=normal>1056</span>
<span class=normal>1057</span>
<span class=normal>1058</span>
<span class=normal>1059</span>
<span class=normal>1060</span>
<span class=normal>1061</span>
<span class=normal>1062</span>
<span class=normal>1063</span>
<span class=normal>1064</span>
<span class=normal>1065</span>
<span class=normal>1066</span>
<span class=normal>1067</span>
<span class=normal>1068</span>
<span class=normal>1069</span>
<span class=normal>1070</span>
<span class=normal>1071</span>
<span class=normal>1072</span>
<span class=normal>1073</span>
<span class=normal>1074</span>
<span class=normal>1075</span>
<span class=normal>1076</span>
<span class=normal>1077</span>
<span class=normal>1078</span>
<span class=normal>1079</span>
<span class=normal>1080</span>
<span class=normal>1081</span>
<span class=normal>1082</span>
<span class=normal>1083</span>
<span class=normal>1084</span>
<span class=normal>1085</span>
<span class=normal>1086</span>
<span class=normal>1087</span>
<span class=normal>1088</span>
<span class=normal>1089</span>
<span class=normal>1090</span>
<span class=normal>1091</span>
<span class=normal>1092</span>
<span class=normal>1093</span>
<span class=normal>1094</span>
<span class=normal>1095</span>
<span class=normal>1096</span>
<span class=normal>1097</span>
<span class=normal>1098</span>
<span class=normal>1099</span>
<span class=normal>1100</span>
<span class=normal>1101</span>
<span class=normal>1102</span>
<span class=normal>1103</span>
<span class=normal>1104</span>
<span class=normal>1105</span>
<span class=normal>1106</span>
<span class=normal>1107</span>
<span class=normal>1108</span>
<span class=normal>1109</span>
<span class=normal>1110</span>
<span class=normal>1111</span>
<span class=normal>1112</span>
<span class=normal>1113</span>
<span class=normal>1114</span>
<span class=normal>1115</span>
<span class=normal>1116</span>
<span class=normal>1117</span>
<span class=normal>1118</span>
<span class=normal>1119</span>
<span class=normal>1120</span>
<span class=normal>1121</span>
<span class=normal>1122</span>
<span class=normal>1123</span>
<span class=normal>1124</span>
<span class=normal>1125</span>
<span class=normal>1126</span>
<span class=normal>1127</span>
<span class=normal>1128</span>
<span class=normal>1129</span>
<span class=normal>1130</span>
<span class=normal>1131</span>
<span class=normal>1132</span>
<span class=normal>1133</span>
<span class=normal>1134</span>
<span class=normal>1135</span>
<span class=normal>1136</span>
<span class=normal>1137</span>
<span class=normal>1138</span>
<span class=normal>1139</span>
<span class=normal>1140</span>
<span class=normal>1141</span>
<span class=normal>1142</span>
<span class=normal>1143</span>
<span class=normal>1144</span>
<span class=normal>1145</span>
<span class=normal>1146</span>
<span class=normal>1147</span>
<span class=normal>1148</span>
<span class=normal>1149</span>
<span class=normal>1150</span>
<span class=normal>1151</span>
<span class=normal>1152</span>
<span class=normal>1153</span>
<span class=normal>1154</span>
<span class=normal>1155</span>
<span class=normal>1156</span>
<span class=normal>1157</span>
<span class=normal>1158</span>
<span class=normal>1159</span>
<span class=normal>1160</span>
<span class=normal>1161</span>
<span class=normal>1162</span>
<span class=normal>1163</span>
<span class=normal>1164</span>
<span class=normal>1165</span>
<span class=normal>1166</span>
<span class=normal>1167</span>
<span class=normal>1168</span>
<span class=normal>1169</span>
<span class=normal>1170</span>
<span class=normal>1171</span>
<span class=normal>1172</span>
<span class=normal>1173</span>
<span class=normal>1174</span>
<span class=normal>1175</span>
<span class=normal>1176</span>
<span class=normal>1177</span>
<span class=normal>1178</span>
<span class=normal>1179</span>
<span class=normal>1180</span>
<span class=normal>1181</span>
<span class=normal>1182</span>
<span class=normal>1183</span>
<span class=normal>1184</span>
<span class=normal>1185</span>
<span class=normal>1186</span>
<span class=normal>1187</span>
<span class=normal>1188</span>
<span class=normal>1189</span>
<span class=normal>1190</span>
<span class=normal>1191</span>
<span class=normal>1192</span>
<span class=normal>1193</span>
<span class=normal>1194</span>
<span class=normal>1195</span>
<span class=normal>1196</span>
<span class=normal>1197</span>
<span class=normal>1198</span>
<span class=normal>1199</span>
<span class=normal>1200</span>
<span class=normal>1201</span>
<span class=normal>1202</span>
<span class=normal>1203</span>
<span class=normal>1204</span>
<span class=normal>1205</span>
<span class=normal>1206</span>
<span class=normal>1207</span>
<span class=normal>1208</span>
<span class=normal>1209</span>
<span class=normal>1210</span>
<span class=normal>1211</span>
<span class=normal>1212</span>
<span class=normal>1213</span>
<span class=normal>1214</span>
<span class=normal>1215</span>
<span class=normal>1216</span>
<span class=normal>1217</span>
<span class=normal>1218</span>
<span class=normal>1219</span>
<span class=normal>1220</span>
<span class=normal>1221</span>
<span class=normal>1222</span>
<span class=normal>1223</span>
<span class=normal>1224</span>
<span class=normal>1225</span>
<span class=normal>1226</span>
<span class=normal>1227</span>
<span class=normal>1228</span>
<span class=normal>1229</span>
<span class=normal>1230</span>
<span class=normal>1231</span>
<span class=normal>1232</span>
<span class=normal>1233</span>
<span class=normal>1234</span>
<span class=normal>1235</span>
<span class=normal>1236</span>
<span class=normal>1237</span>
<span class=normal>1238</span>
<span class=normal>1239</span>
<span class=normal>1240</span>
<span class=normal>1241</span>
<span class=normal>1242</span>
<span class=normal>1243</span>
<span class=normal>1244</span>
<span class=normal>1245</span>
<span class=normal>1246</span>
<span class=normal>1247</span>
<span class=normal>1248</span>
<span class=normal>1249</span>
<span class=normal>1250</span>
<span class=normal>1251</span>
<span class=normal>1252</span>
<span class=normal>1253</span>
<span class=normal>1254</span>
<span class=normal>1255</span>
<span class=normal>1256</span>
<span class=normal>1257</span>
<span class=normal>1258</span>
<span class=normal>1259</span>
<span class=normal>1260</span>
<span class=normal>1261</span>
<span class=normal>1262</span>
<span class=normal>1263</span>
<span class=normal>1264</span>
<span class=normal>1265</span>
<span class=normal>1266</span>
<span class=normal>1267</span>
<span class=normal>1268</span>
<span class=normal>1269</span>
<span class=normal>1270</span>
<span class=normal>1271</span>
<span class=normal>1272</span>
<span class=normal>1273</span>
<span class=normal>1274</span>
<span class=normal>1275</span>
<span class=normal>1276</span>
<span class=normal>1277</span>
<span class=normal>1278</span>
<span class=normal>1279</span>
<span class=normal>1280</span>
<span class=normal>1281</span>
<span class=normal>1282</span>
<span class=normal>1283</span>
<span class=normal>1284</span>
<span class=normal>1285</span>
<span class=normal>1286</span>
<span class=normal>1287</span>
<span class=normal>1288</span>
<span class=normal>1289</span>
<span class=normal>1290</span>
<span class=normal>1291</span>
<span class=normal>1292</span>
<span class=normal>1293</span>
<span class=normal>1294</span>
<span class=normal>1295</span>
<span class=normal>1296</span>
<span class=normal>1297</span>
<span class=normal>1298</span>
<span class=normal>1299</span>
<span class=normal>1300</span>
<span class=normal>1301</span>
<span class=normal>1302</span>
<span class=normal>1303</span>
<span class=normal>1304</span>
<span class=normal>1305</span>
<span class=normal>1306</span>
<span class=normal>1307</span>
<span class=normal>1308</span>
<span class=normal>1309</span>
<span class=normal>1310</span>
<span class=normal>1311</span>
<span class=normal>1312</span>
<span class=normal>1313</span>
<span class=normal>1314</span>
<span class=normal>1315</span>
<span class=normal>1316</span>
<span class=normal>1317</span>
<span class=normal>1318</span>
<span class=normal>1319</span>
<span class=normal>1320</span>
<span class=normal>1321</span>
<span class=normal>1322</span>
<span class=normal>1323</span>
<span class=normal>1324</span>
<span class=normal>1325</span>
<span class=normal>1326</span>
<span class=normal>1327</span>
<span class=normal>1328</span>
<span class=normal>1329</span>
<span class=normal>1330</span>
<span class=normal>1331</span>
<span class=normal>1332</span>
<span class=normal>1333</span>
<span class=normal>1334</span>
<span class=normal>1335</span>
<span class=normal>1336</span>
<span class=normal>1337</span>
<span class=normal>1338</span>
<span class=normal>1339</span>
<span class=normal>1340</span>
<span class=normal>1341</span>
<span class=normal>1342</span>
<span class=normal>1343</span>
<span class=normal>1344</span>
<span class=normal>1345</span>
<span class=normal>1346</span>
<span class=normal>1347</span>
<span class=normal>1348</span>
<span class=normal>1349</span>
<span class=normal>1350</span>
<span class=normal>1351</span>
<span class=normal>1352</span>
<span class=normal>1353</span>
<span class=normal>1354</span>
<span class=normal>1355</span>
<span class=normal>1356</span>
<span class=normal>1357</span>
<span class=normal>1358</span>
<span class=normal>1359</span>
<span class=normal>1360</span>
<span class=normal>1361</span>
<span class=normal>1362</span>
<span class=normal>1363</span>
<span class=normal>1364</span>
<span class=normal>1365</span>
<span class=normal>1366</span>
<span class=normal>1367</span>
<span class=normal>1368</span>
<span class=normal>1369</span>
<span class=normal>1370</span>
<span class=normal>1371</span>
<span class=normal>1372</span>
<span class=normal>1373</span>
<span class=normal>1374</span>
<span class=normal>1375</span>
<span class=normal>1376</span>
<span class=normal>1377</span>
<span class=normal>1378</span>
<span class=normal>1379</span>
<span class=normal>1380</span>
<span class=normal>1381</span>
<span class=normal>1382</span>
<span class=normal>1383</span>
<span class=normal>1384</span>
<span class=normal>1385</span>
<span class=normal>1386</span>
<span class=normal>1387</span>
<span class=normal>1388</span>
<span class=normal>1389</span>
<span class=normal>1390</span>
<span class=normal>1391</span>
<span class=normal>1392</span>
<span class=normal>1393</span>
<span class=normal>1394</span>
<span class=normal>1395</span>
<span class=normal>1396</span>
<span class=normal>1397</span>
<span class=normal>1398</span>
<span class=normal>1399</span>
<span class=normal>1400</span>
<span class=normal>1401</span>
<span class=normal>1402</span>
<span class=normal>1403</span>
<span class=normal>1404</span>
<span class=normal>1405</span>
<span class=normal>1406</span>
<span class=normal>1407</span>
<span class=normal>1408</span>
<span class=normal>1409</span>
<span class=normal>1410</span>
<span class=normal>1411</span>
<span class=normal>1412</span>
<span class=normal>1413</span>
<span class=normal>1414</span>
<span class=normal>1415</span>
<span class=normal>1416</span>
<span class=normal>1417</span>
<span class=normal>1418</span>
<span class=normal>1419</span>
<span class=normal>1420</span>
<span class=normal>1421</span>
<span class=normal>1422</span>
<span class=normal>1423</span>
<span class=normal>1424</span>
<span class=normal>1425</span>
<span class=normal>1426</span>
<span class=normal>1427</span>
<span class=normal>1428</span>
<span class=normal>1429</span>
<span class=normal>1430</span>
<span class=normal>1431</span>
<span class=normal>1432</span>
<span class=normal>1433</span>
<span class=normal>1434</span>
<span class=normal>1435</span>
<span class=normal>1436</span>
<span class=normal>1437</span>
<span class=normal>1438</span>
<span class=normal>1439</span>
<span class=normal>1440</span>
<span class=normal>1441</span>
<span class=normal>1442</span>
<span class=normal>1443</span>
<span class=normal>1444</span>
<span class=normal>1445</span>
<span class=normal>1446</span>
<span class=normal>1447</span>
<span class=normal>1448</span>
<span class=normal>1449</span>
<span class=normal>1450</span>
<span class=normal>1451</span>
<span class=normal>1452</span>
<span class=normal>1453</span>
<span class=normal>1454</span>
<span class=normal>1455</span>
<span class=normal>1456</span>
<span class=normal>1457</span>
<span class=normal>1458</span>
<span class=normal>1459</span>
<span class=normal>1460</span>
<span class=normal>1461</span>
<span class=normal>1462</span>
<span class=normal>1463</span>
<span class=normal>1464</span>
<span class=normal>1465</span>
<span class=normal>1466</span>
<span class=normal>1467</span>
<span class=normal>1468</span>
<span class=normal>1469</span>
<span class=normal>1470</span>
<span class=normal>1471</span>
<span class=normal>1472</span>
<span class=normal>1473</span>
<span class=normal>1474</span>
<span class=normal>1475</span>
<span class=normal>1476</span>
<span class=normal>1477</span>
<span class=normal>1478</span>
<span class=normal>1479</span>
<span class=normal>1480</span>
<span class=normal>1481</span>
<span class=normal>1482</span>
<span class=normal>1483</span>
<span class=normal>1484</span>
<span class=normal>1485</span>
<span class=normal>1486</span>
<span class=normal>1487</span>
<span class=normal>1488</span>
<span class=normal>1489</span>
<span class=normal>1490</span>
<span class=normal>1491</span>
<span class=normal>1492</span>
<span class=normal>1493</span>
<span class=normal>1494</span>
<span class=normal>1495</span>
<span class=normal>1496</span>
<span class=normal>1497</span>
<span class=normal>1498</span>
<span class=normal>1499</span>
<span class=normal>1500</span>
<span class=normal>1501</span>
<span class=normal>1502</span>
<span class=normal>1503</span>
<span class=normal>1504</span>
<span class=normal>1505</span>
<span class=normal>1506</span>
<span class=normal>1507</span>
<span class=normal>1508</span>
<span class=normal>1509</span>
<span class=normal>1510</span>
<span class=normal>1511</span>
<span class=normal>1512</span>
<span class=normal>1513</span>
<span class=normal>1514</span>
<span class=normal>1515</span>
<span class=normal>1516</span>
<span class=normal>1517</span>
<span class=normal>1518</span>
<span class=normal>1519</span>
<span class=normal>1520</span>
<span class=normal>1521</span>
<span class=normal>1522</span>
<span class=normal>1523</span>
<span class=normal>1524</span>
<span class=normal>1525</span>
<span class=normal>1526</span>
<span class=normal>1527</span>
<span class=normal>1528</span>
<span class=normal>1529</span>
<span class=normal>1530</span>
<span class=normal>1531</span>
<span class=normal>1532</span>
<span class=normal>1533</span>
<span class=normal>1534</span>
<span class=normal>1535</span>
<span class=normal>1536</span>
<span class=normal>1537</span>
<span class=normal>1538</span>
<span class=normal>1539</span>
<span class=normal>1540</span>
<span class=normal>1541</span>
<span class=normal>1542</span>
<span class=normal>1543</span>
<span class=normal>1544</span>
<span class=normal>1545</span>
<span class=normal>1546</span>
<span class=normal>1547</span>
<span class=normal>1548</span>
<span class=normal>1549</span>
<span class=normal>1550</span>
<span class=normal>1551</span>
<span class=normal>1552</span>
<span class=normal>1553</span>
<span class=normal>1554</span>
<span class=normal>1555</span>
<span class=normal>1556</span>
<span class=normal>1557</span>
<span class=normal>1558</span>
<span class=normal>1559</span>
<span class=normal>1560</span>
<span class=normal>1561</span>
<span class=normal>1562</span>
<span class=normal>1563</span>
<span class=normal>1564</span>
<span class=normal>1565</span>
<span class=normal>1566</span>
<span class=normal>1567</span>
<span class=normal>1568</span>
<span class=normal>1569</span>
<span class=normal>1570</span>
<span class=normal>1571</span>
<span class=normal>1572</span>
<span class=normal>1573</span>
<span class=normal>1574</span>
<span class=normal>1575</span>
<span class=normal>1576</span>
<span class=normal>1577</span>
<span class=normal>1578</span>
<span class=normal>1579</span>
<span class=normal>1580</span>
<span class=normal>1581</span>
<span class=normal>1582</span>
<span class=normal>1583</span>
<span class=normal>1584</span>
<span class=normal>1585</span>
<span class=normal>1586</span>
<span class=normal>1587</span>
<span class=normal>1588</span>
<span class=normal>1589</span>
<span class=normal>1590</span>
<span class=normal>1591</span>
<span class=normal>1592</span>
<span class=normal>1593</span>
<span class=normal>1594</span>
<span class=normal>1595</span>
<span class=normal>1596</span>
<span class=normal>1597</span>
<span class=normal>1598</span>
<span class=normal>1599</span>
<span class=normal>1600</span>
<span class=normal>1601</span>
<span class=normal>1602</span>
<span class=normal>1603</span>
<span class=normal>1604</span>
<span class=normal>1605</span>
<span class=normal>1606</span>
<span class=normal>1607</span>
<span class=normal>1608</span>
<span class=normal>1609</span>
<span class=normal>1610</span>
<span class=normal>1611</span>
<span class=normal>1612</span>
<span class=normal>1613</span>
<span class=normal>1614</span>
<span class=normal>1615</span>
<span class=normal>1616</span>
<span class=normal>1617</span>
<span class=normal>1618</span>
<span class=normal>1619</span>
<span class=normal>1620</span>
<span class=normal>1621</span>
<span class=normal>1622</span>
<span class=normal>1623</span>
<span class=normal>1624</span>
<span class=normal>1625</span>
<span class=normal>1626</span>
<span class=normal>1627</span>
<span class=normal>1628</span>
<span class=normal>1629</span>
<span class=normal>1630</span>
<span class=normal>1631</span>
<span class=normal>1632</span>
<span class=normal>1633</span>
<span class=normal>1634</span>
<span class=normal>1635</span>
<span class=normal>1636</span>
<span class=normal>1637</span>
<span class=normal>1638</span>
<span class=normal>1639</span>
<span class=normal>1640</span>
<span class=normal>1641</span>
<span class=normal>1642</span>
<span class=normal>1643</span>
<span class=normal>1644</span>
<span class=normal>1645</span>
<span class=normal>1646</span>
<span class=normal>1647</span>
<span class=normal>1648</span>
<span class=normal>1649</span>
<span class=normal>1650</span>
<span class=normal>1651</span>
<span class=normal>1652</span>
<span class=normal>1653</span>
<span class=normal>1654</span>
<span class=normal>1655</span>
<span class=normal>1656</span>
<span class=normal>1657</span>
<span class=normal>1658</span>
<span class=normal>1659</span>
<span class=normal>1660</span>
<span class=normal>1661</span>
<span class=normal>1662</span>
<span class=normal>1663</span>
<span class=normal>1664</span>
<span class=normal>1665</span>
<span class=normal>1666</span>
<span class=normal>1667</span>
<span class=normal>1668</span>
<span class=normal>1669</span>
<span class=normal>1670</span>
<span class=normal>1671</span>
<span class=normal>1672</span>
<span class=normal>1673</span>
<span class=normal>1674</span>
<span class=normal>1675</span>
<span class=normal>1676</span>
<span class=normal>1677</span>
<span class=normal>1678</span>
<span class=normal>1679</span>
<span class=normal>1680</span>
<span class=normal>1681</span>
<span class=normal>1682</span>
<span class=normal>1683</span>
<span class=normal>1684</span>
<span class=normal>1685</span>
<span class=normal>1686</span>
<span class=normal>1687</span>
<span class=normal>1688</span>
<span class=normal>1689</span>
<span class=normal>1690</span>
<span class=normal>1691</span>
<span class=normal>1692</span>
<span class=normal>1693</span>
<span class=normal>1694</span>
<span class=normal>1695</span>
<span class=normal>1696</span>
<span class=normal>1697</span>
<span class=normal>1698</span>
<span class=normal>1699</span>
<span class=normal>1700</span>
<span class=normal>1701</span>
<span class=normal>1702</span>
<span class=normal>1703</span>
<span class=normal>1704</span>
<span class=normal>1705</span>
<span class=normal>1706</span>
<span class=normal>1707</span>
<span class=normal>1708</span>
<span class=normal>1709</span>
<span class=normal>1710</span>
<span class=normal>1711</span>
<span class=normal>1712</span>
<span class=normal>1713</span>
<span class=normal>1714</span>
<span class=normal>1715</span>
<span class=normal>1716</span>
<span class=normal>1717</span>
<span class=normal>1718</span>
<span class=normal>1719</span>
<span class=normal>1720</span>
<span class=normal>1721</span>
<span class=normal>1722</span>
<span class=normal>1723</span>
<span class=normal>1724</span>
<span class=normal>1725</span>
<span class=normal>1726</span>
<span class=normal>1727</span>
<span class=normal>1728</span>
<span class=normal>1729</span>
<span class=normal>1730</span>
<span class=normal>1731</span>
<span class=normal>1732</span>
<span class=normal>1733</span>
<span class=normal>1734</span>
<span class=normal>1735</span>
<span class=normal>1736</span>
<span class=normal>1737</span>
<span class=normal>1738</span>
<span class=normal>1739</span>
<span class=normal>1740</span>
<span class=normal>1741</span>
<span class=normal>1742</span>
<span class=normal>1743</span>
<span class=normal>1744</span>
<span class=normal>1745</span>
<span class=normal>1746</span>
<span class=normal>1747</span>
<span class=normal>1748</span>
<span class=normal>1749</span>
<span class=normal>1750</span>
<span class=normal>1751</span>
<span class=normal>1752</span>
<span class=normal>1753</span>
<span class=normal>1754</span>
<span class=normal>1755</span>
<span class=normal>1756</span>
<span class=normal>1757</span>
<span class=normal>1758</span>
<span class=normal>1759</span>
<span class=normal>1760</span>
<span class=normal>1761</span>
<span class=normal>1762</span>
<span class=normal>1763</span>
<span class=normal>1764</span>
<span class=normal>1765</span>
<span class=normal>1766</span>
<span class=normal>1767</span>
<span class=normal>1768</span>
<span class=normal>1769</span>
<span class=normal>1770</span>
<span class=normal>1771</span>
<span class=normal>1772</span>
<span class=normal>1773</span>
<span class=normal>1774</span>
<span class=normal>1775</span>
<span class=normal>1776</span>
<span class=normal>1777</span>
<span class=normal>1778</span>
<span class=normal>1779</span>
<span class=normal>1780</span>
<span class=normal>1781</span>
<span class=normal>1782</span>
<span class=normal>1783</span>
<span class=normal>1784</span>
<span class=normal>1785</span>
<span class=normal>1786</span>
<span class=normal>1787</span>
<span class=normal>1788</span>
<span class=normal>1789</span>
<span class=normal>1790</span>
<span class=normal>1791</span>
<span class=normal>1792</span>
<span class=normal>1793</span>
<span class=normal>1794</span>
<span class=normal>1795</span>
<span class=normal>1796</span>
<span class=normal>1797</span>
<span class=normal>1798</span>
<span class=normal>1799</span>
<span class=normal>1800</span>
<span class=normal>1801</span>
<span class=normal>1802</span>
<span class=normal>1803</span>
<span class=normal>1804</span>
<span class=normal>1805</span>
<span class=normal>1806</span>
<span class=normal>1807</span>
<span class=normal>1808</span>
<span class=normal>1809</span>
<span class=normal>1810</span>
<span class=normal>1811</span>
<span class=normal>1812</span>
<span class=normal>1813</span>
<span class=normal>1814</span>
<span class=normal>1815</span>
<span class=normal>1816</span>
<span class=normal>1817</span>
<span class=normal>1818</span>
<span class=normal>1819</span>
<span class=normal>1820</span>
<span class=normal>1821</span>
<span class=normal>1822</span>
<span class=normal>1823</span>
<span class=normal>1824</span>
<span class=normal>1825</span>
<span class=normal>1826</span>
<span class=normal>1827</span>
<span class=normal>1828</span>
<span class=normal>1829</span>
<span class=normal>1830</span>
<span class=normal>1831</span>
<span class=normal>1832</span>
<span class=normal>1833</span>
<span class=normal>1834</span>
<span class=normal>1835</span>
<span class=normal>1836</span>
<span class=normal>1837</span>
<span class=normal>1838</span>
<span class=normal>1839</span>
<span class=normal>1840</span>
<span class=normal>1841</span>
<span class=normal>1842</span>
<span class=normal>1843</span>
<span class=normal>1844</span>
<span class=normal>1845</span>
<span class=normal>1846</span>
<span class=normal>1847</span>
<span class=normal>1848</span>
<span class=normal>1849</span>
<span class=normal>1850</span>
<span class=normal>1851</span>
<span class=normal>1852</span>
<span class=normal>1853</span>
<span class=normal>1854</span>
<span class=normal>1855</span>
<span class=normal>1856</span>
<span class=normal>1857</span>
<span class=normal>1858</span>
<span class=normal>1859</span>
<span class=normal>1860</span>
<span class=normal>1861</span>
<span class=normal>1862</span>
<span class=normal>1863</span>
<span class=normal>1864</span>
<span class=normal>1865</span>
<span class=normal>1866</span>
<span class=normal>1867</span>
<span class=normal>1868</span>
<span class=normal>1869</span>
<span class=normal>1870</span>
<span class=normal>1871</span>
<span class=normal>1872</span>
<span class=normal>1873</span>
<span class=normal>1874</span>
<span class=normal>1875</span>
<span class=normal>1876</span>
<span class=normal>1877</span>
<span class=normal>1878</span>
<span class=normal>1879</span>
<span class=normal>1880</span>
<span class=normal>1881</span>
<span class=normal>1882</span>
<span class=normal>1883</span>
<span class=normal>1884</span>
<span class=normal>1885</span>
<span class=normal>1886</span>
<span class=normal>1887</span>
<span class=normal>1888</span>
<span class=normal>1889</span>
<span class=normal>1890</span>
<span class=normal>1891</span>
<span class=normal>1892</span>
<span class=normal>1893</span>
<span class=normal>1894</span>
<span class=normal>1895</span>
<span class=normal>1896</span>
<span class=normal>1897</span>
<span class=normal>1898</span>
<span class=normal>1899</span>
<span class=normal>1900</span>
<span class=normal>1901</span>
<span class=normal>1902</span>
<span class=normal>1903</span>
<span class=normal>1904</span>
<span class=normal>1905</span>
<span class=normal>1906</span>
<span class=normal>1907</span>
<span class=normal>1908</span>
<span class=normal>1909</span>
<span class=normal>1910</span>
<span class=normal>1911</span>
<span class=normal>1912</span>
<span class=normal>1913</span>
<span class=normal>1914</span>
<span class=normal>1915</span>
<span class=normal>1916</span>
<span class=normal>1917</span>
<span class=normal>1918</span>
<span class=normal>1919</span>
<span class=normal>1920</span>
<span class=normal>1921</span>
<span class=normal>1922</span>
<span class=normal>1923</span>
<span class=normal>1924</span>
<span class=normal>1925</span>
<span class=normal>1926</span>
<span class=normal>1927</span>
<span class=normal>1928</span>
<span class=normal>1929</span>
<span class=normal>1930</span>
<span class=normal>1931</span>
<span class=normal>1932</span>
<span class=normal>1933</span>
<span class=normal>1934</span>
<span class=normal>1935</span>
<span class=normal>1936</span>
<span class=normal>1937</span>
<span class=normal>1938</span>
<span class=normal>1939</span>
<span class=normal>1940</span>
<span class=normal>1941</span>
<span class=normal>1942</span>
<span class=normal>1943</span>
<span class=normal>1944</span>
<span class=normal>1945</span>
<span class=normal>1946</span>
<span class=normal>1947</span>
<span class=normal>1948</span>
<span class=normal>1949</span>
<span class=normal>1950</span>
<span class=normal>1951</span>
<span class=normal>1952</span>
<span class=normal>1953</span>
<span class=normal>1954</span>
<span class=normal>1955</span>
<span class=normal>1956</span>
<span class=normal>1957</span>
<span class=normal>1958</span>
<span class=normal>1959</span>
<span class=normal>1960</span>
<span class=normal>1961</span>
<span class=normal>1962</span>
<span class=normal>1963</span>
<span class=normal>1964</span>
<span class=normal>1965</span>
<span class=normal>1966</span>
<span class=normal>1967</span>
<span class=normal>1968</span>
<span class=normal>1969</span>
<span class=normal>1970</span>
<span class=normal>1971</span>
<span class=normal>1972</span>
<span class=normal>1973</span>
<span class=normal>1974</span>
<span class=normal>1975</span>
<span class=normal>1976</span>
<span class=normal>1977</span>
<span class=normal>1978</span>
<span class=normal>1979</span>
<span class=normal>1980</span>
<span class=normal>1981</span>
<span class=normal>1982</span>
<span class=normal>1983</span>
<span class=normal>1984</span>
<span class=normal>1985</span>
<span class=normal>1986</span>
<span class=normal>1987</span>
<span class=normal>1988</span>
<span class=normal>1989</span>
<span class=normal>1990</span>
<span class=normal>1991</span>
<span class=normal>1992</span>
<span class=normal>1993</span>
<span class=normal>1994</span>
<span class=normal>1995</span>
<span class=normal>1996</span>
<span class=normal>1997</span>
<span class=normal>1998</span>
<span class=normal>1999</span>
<span class=normal>2000</span>
<span class=normal>2001</span>
<span class=normal>2002</span>
<span class=normal>2003</span>
<span class=normal>2004</span>
<span class=normal>2005</span>
<span class=normal>2006</span>
<span class=normal>2007</span>
<span class=normal>2008</span>
<span class=normal>2009</span>
<span class=normal>2010</span>
<span class=normal>2011</span>
<span class=normal>2012</span>
<span class=normal>2013</span>
<span class=normal>2014</span>
<span class=normal>2015</span>
<span class=normal>2016</span>
<span class=normal>2017</span>
<span class=normal>2018</span>
<span class=normal>2019</span>
<span class=normal>2020</span>
<span class=normal>2021</span>
<span class=normal>2022</span>
<span class=normal>2023</span>
<span class=normal>2024</span>
<span class=normal>2025</span>
<span class=normal>2026</span>
<span class=normal>2027</span>
<span class=normal>2028</span>
<span class=normal>2029</span>
<span class=normal>2030</span>
<span class=normal>2031</span>
<span class=normal>2032</span>
<span class=normal>2033</span>
<span class=normal>2034</span>
<span class=normal>2035</span>
<span class=normal>2036</span>
<span class=normal>2037</span>
<span class=normal>2038</span>
<span class=normal>2039</span>
<span class=normal>2040</span>
<span class=normal>2041</span>
<span class=normal>2042</span>
<span class=normal>2043</span>
<span class=normal>2044</span>
<span class=normal>2045</span>
<span class=normal>2046</span>
<span class=normal>2047</span>
<span class=normal>2048</span>
<span class=normal>2049</span>
<span class=normal>2050</span>
<span class=normal>2051</span>
<span class=normal>2052</span>
<span class=normal>2053</span>
<span class=normal>2054</span>
<span class=normal>2055</span>
<span class=normal>2056</span>
<span class=normal>2057</span>
<span class=normal>2058</span>
<span class=normal>2059</span>
<span class=normal>2060</span>
<span class=normal>2061</span>
<span class=normal>2062</span>
<span class=normal>2063</span>
<span class=normal>2064</span>
<span class=normal>2065</span>
<span class=normal>2066</span>
<span class=normal>2067</span>
<span class=normal>2068</span>
<span class=normal>2069</span>
<span class=normal>2070</span>
<span class=normal>2071</span>
<span class=normal>2072</span>
<span class=normal>2073</span>
<span class=normal>2074</span>
<span class=normal>2075</span>
<span class=normal>2076</span>
<span class=normal>2077</span>
<span class=normal>2078</span>
<span class=normal>2079</span>
<span class=normal>2080</span>
<span class=normal>2081</span>
<span class=normal>2082</span>
<span class=normal>2083</span>
<span class=normal>2084</span>
<span class=normal>2085</span>
<span class=normal>2086</span>
<span class=normal>2087</span>
<span class=normal>2088</span>
<span class=normal>2089</span>
<span class=normal>2090</span>
<span class=normal>2091</span>
<span class=normal>2092</span>
<span class=normal>2093</span>
<span class=normal>2094</span>
<span class=normal>2095</span>
<span class=normal>2096</span>
<span class=normal>2097</span>
<span class=normal>2098</span>
<span class=normal>2099</span>
<span class=normal>2100</span>
<span class=normal>2101</span>
<span class=normal>2102</span>
<span class=normal>2103</span>
<span class=normal>2104</span>
<span class=normal>2105</span>
<span class=normal>2106</span>
<span class=normal>2107</span>
<span class=normal>2108</span>
<span class=normal>2109</span>
<span class=normal>2110</span>
<span class=normal>2111</span>
<span class=normal>2112</span>
<span class=normal>2113</span>
<span class=normal>2114</span>
<span class=normal>2115</span>
<span class=normal>2116</span>
<span class=normal>2117</span>
<span class=normal>2118</span>
<span class=normal>2119</span>
<span class=normal>2120</span>
<span class=normal>2121</span>
<span class=normal>2122</span>
<span class=normal>2123</span>
<span class=normal>2124</span>
<span class=normal>2125</span>
<span class=normal>2126</span>
<span class=normal>2127</span>
<span class=normal>2128</span>
<span class=normal>2129</span>
<span class=normal>2130</span>
<span class=normal>2131</span>
<span class=normal>2132</span>
<span class=normal>2133</span>
<span class=normal>2134</span>
<span class=normal>2135</span>
<span class=normal>2136</span>
<span class=normal>2137</span>
<span class=normal>2138</span>
<span class=normal>2139</span>
<span class=normal>2140</span>
<span class=normal>2141</span>
<span class=normal>2142</span>
<span class=normal>2143</span>
<span class=normal>2144</span>
<span class=normal>2145</span>
<span class=normal>2146</span>
<span class=normal>2147</span>
<span class=normal>2148</span>
<span class=normal>2149</span>
<span class=normal>2150</span>
<span class=normal>2151</span>
<span class=normal>2152</span>
<span class=normal>2153</span>
<span class=normal>2154</span>
<span class=normal>2155</span>
<span class=normal>2156</span>
<span class=normal>2157</span>
<span class=normal>2158</span>
<span class=normal>2159</span>
<span class=normal>2160</span>
<span class=normal>2161</span>
<span class=normal>2162</span>
<span class=normal>2163</span>
<span class=normal>2164</span>
<span class=normal>2165</span>
<span class=normal>2166</span>
<span class=normal>2167</span>
<span class=normal>2168</span>
<span class=normal>2169</span>
<span class=normal>2170</span>
<span class=normal>2171</span>
<span class=normal>2172</span>
<span class=normal>2173</span>
<span class=normal>2174</span>
<span class=normal>2175</span>
<span class=normal>2176</span>
<span class=normal>2177</span>
<span class=normal>2178</span>
<span class=normal>2179</span>
<span class=normal>2180</span>
<span class=normal>2181</span>
<span class=normal>2182</span>
<span class=normal>2183</span>
<span class=normal>2184</span>
<span class=normal>2185</span>
<span class=normal>2186</span>
<span class=normal>2187</span>
<span class=normal>2188</span>
<span class=normal>2189</span>
<span class=normal>2190</span>
<span class=normal>2191</span>
<span class=normal>2192</span>
<span class=normal>2193</span>
<span class=normal>2194</span>
<span class=normal>2195</span>
<span class=normal>2196</span>
<span class=normal>2197</span>
<span class=normal>2198</span>
<span class=normal>2199</span>
<span class=normal>2200</span>
<span class=normal>2201</span>
<span class=normal>2202</span>
<span class=normal>2203</span>
<span class=normal>2204</span>
<span class=normal>2205</span>
<span class=normal>2206</span>
<span class=normal>2207</span>
<span class=normal>2208</span>
<span class=normal>2209</span>
<span class=normal>2210</span>
<span class=normal>2211</span>
<span class=normal>2212</span>
<span class=normal>2213</span>
<span class=normal>2214</span>
<span class=normal>2215</span>
<span class=normal>2216</span>
<span class=normal>2217</span>
<span class=normal>2218</span>
<span class=normal>2219</span>
<span class=normal>2220</span>
<span class=normal>2221</span>
<span class=normal>2222</span>
<span class=normal>2223</span>
<span class=normal>2224</span>
<span class=normal>2225</span>
<span class=normal>2226</span>
<span class=normal>2227</span>
<span class=normal>2228</span>
<span class=normal>2229</span>
<span class=normal>2230</span>
<span class=normal>2231</span>
<span class=normal>2232</span>
<span class=normal>2233</span>
<span class=normal>2234</span>
<span class=normal>2235</span>
<span class=normal>2236</span>
<span class=normal>2237</span>
<span class=normal>2238</span>
<span class=normal>2239</span>
<span class=normal>2240</span>
<span class=normal>2241</span>
<span class=normal>2242</span>
<span class=normal>2243</span>
<span class=normal>2244</span>
<span class=normal>2245</span>
<span class=normal>2246</span>
<span class=normal>2247</span>
<span class=normal>2248</span>
<span class=normal>2249</span>
<span class=normal>2250</span>
<span class=normal>2251</span>
<span class=normal>2252</span>
<span class=normal>2253</span>
<span class=normal>2254</span>
<span class=normal>2255</span>
<span class=normal>2256</span>
<span class=normal>2257</span>
<span class=normal>2258</span>
<span class=normal>2259</span>
<span class=normal>2260</span>
<span class=normal>2261</span>
<span class=normal>2262</span>
<span class=normal>2263</span>
<span class=normal>2264</span>
<span class=normal>2265</span>
<span class=normal>2266</span>
<span class=normal>2267</span>
<span class=normal>2268</span>
<span class=normal>2269</span>
<span class=normal>2270</span>
<span class=normal>2271</span>
<span class=normal>2272</span>
<span class=normal>2273</span>
<span class=normal>2274</span>
<span class=normal>2275</span>
<span class=normal>2276</span>
<span class=normal>2277</span>
<span class=normal>2278</span>
<span class=normal>2279</span>
<span class=normal>2280</span>
<span class=normal>2281</span>
<span class=normal>2282</span>
<span class=normal>2283</span>
<span class=normal>2284</span>
<span class=normal>2285</span>
<span class=normal>2286</span>
<span class=normal>2287</span>
<span class=normal>2288</span>
<span class=normal>2289</span>
<span class=normal>2290</span>
<span class=normal>2291</span>
<span class=normal>2292</span>
<span class=normal>2293</span>
<span class=normal>2294</span>
<span class=normal>2295</span>
<span class=normal>2296</span>
<span class=normal>2297</span>
<span class=normal>2298</span>
<span class=normal>2299</span>
<span class=normal>2300</span>
<span class=normal>2301</span>
<span class=normal>2302</span>
<span class=normal>2303</span>
<span class=normal>2304</span>
<span class=normal>2305</span>
<span class=normal>2306</span>
<span class=normal>2307</span>
<span class=normal>2308</span>
<span class=normal>2309</span>
<span class=normal>2310</span>
<span class=normal>2311</span>
<span class=normal>2312</span>
<span class=normal>2313</span>
<span class=normal>2314</span>
<span class=normal>2315</span>
<span class=normal>2316</span>
<span class=normal>2317</span>
<span class=normal>2318</span>
<span class=normal>2319</span>
<span class=normal>2320</span>
<span class=normal>2321</span>
<span class=normal>2322</span>
<span class=normal>2323</span>
<span class=normal>2324</span>
<span class=normal>2325</span>
<span class=normal>2326</span>
<span class=normal>2327</span>
<span class=normal>2328</span>
<span class=normal>2329</span>
<span class=normal>2330</span>
<span class=normal>2331</span>
<span class=normal>2332</span>
<span class=normal>2333</span>
<span class=normal>2334</span>
<span class=normal>2335</span>
<span class=normal>2336</span>
<span class=normal>2337</span>
<span class=normal>2338</span>
<span class=normal>2339</span>
<span class=normal>2340</span>
<span class=normal>2341</span>
<span class=normal>2342</span>
<span class=normal>2343</span>
<span class=normal>2344</span>
<span class=normal>2345</span>
<span class=normal>2346</span>
<span class=normal>2347</span>
<span class=normal>2348</span>
<span class=normal>2349</span>
<span class=normal>2350</span>
<span class=normal>2351</span>
<span class=normal>2352</span>
<span class=normal>2353</span>
<span class=normal>2354</span>
<span class=normal>2355</span>
<span class=normal>2356</span>
<span class=normal>2357</span>
<span class=normal>2358</span>
<span class=normal>2359</span>
<span class=normal>2360</span>
<span class=normal>2361</span>
<span class=normal>2362</span>
<span class=normal>2363</span>
<span class=normal>2364</span>
<span class=normal>2365</span>
<span class=normal>2366</span>
<span class=normal>2367</span>
<span class=normal>2368</span>
<span class=normal>2369</span>
<span class=normal>2370</span>
<span class=normal>2371</span>
<span class=normal>2372</span>
<span class=normal>2373</span>
<span class=normal>2374</span>
<span class=normal>2375</span>
<span class=normal>2376</span>
<span class=normal>2377</span>
<span class=normal>2378</span>
<span class=normal>2379</span>
<span class=normal>2380</span>
<span class=normal>2381</span>
<span class=normal>2382</span>
<span class=normal>2383</span>
<span class=normal>2384</span>
<span class=normal>2385</span>
<span class=normal>2386</span>
<span class=normal>2387</span>
<span class=normal>2388</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>CreateContext</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Context of instance creation.</span>

<span class=sd>    Context itself also can store data related to whole creation (workfile).</span>
<span class=sd>    - those are mainly for Context publish plugins</span>

<span class=sd>    Todos:</span>
<span class=sd>        Don&#39;t use &#39;AvalonMongoDB&#39;. It&#39;s used only to keep track about current</span>
<span class=sd>            context which should be handled by host.</span>

<span class=sd>    Args:</span>
<span class=sd>        host(ModuleType): Host implementation which handles implementation and</span>
<span class=sd>            global metadata.</span>
<span class=sd>        headless(bool): Context is created out of UI (Current not used).</span>
<span class=sd>        reset(bool): Reset context on initialization.</span>
<span class=sd>        discover_publish_plugins(bool): Discover publish plugins during reset</span>
<span class=sd>            phase.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span> <span class=n>host</span><span class=p>,</span> <span class=n>headless</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>reset</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>discover_publish_plugins</span><span class=o>=</span><span class=kc>True</span>
    <span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>host</span> <span class=o>=</span> <span class=n>host</span>

        <span class=c1># Prepare attribute for logger (Created on demand in `log` property)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_log</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_event_hub</span> <span class=o>=</span> <span class=n>QueuedEventSystem</span><span class=p>()</span>

        <span class=c1># Publish context plugins attributes and it&#39;s values</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_publish_attributes</span> <span class=o>=</span> <span class=n>PublishAttributes</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=p>{})</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_original_context_data</span> <span class=o>=</span> <span class=p>{}</span>

        <span class=c1># Validate host implementation</span>
        <span class=c1># - defines if context is capable of handling context data</span>
        <span class=n>host_is_valid</span> <span class=o>=</span> <span class=kc>True</span>
        <span class=n>missing_methods</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_host_misssing_methods</span><span class=p>(</span><span class=n>host</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>missing_methods</span><span class=p>:</span>
            <span class=n>host_is_valid</span> <span class=o>=</span> <span class=kc>False</span>
            <span class=n>joined_methods</span> <span class=o>=</span> <span class=s2>&quot;, &quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span>
                <span class=p>[</span><span class=s1>&#39;&quot;</span><span class=si>{}</span><span class=s1>&quot;&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>name</span><span class=p>)</span> <span class=k>for</span> <span class=n>name</span> <span class=ow>in</span> <span class=n>missing_methods</span><span class=p>]</span>
            <span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>((</span>
                <span class=s2>&quot;Host miss required methods to be able use creation.&quot;</span>
                <span class=s2>&quot; Missing methods: </span><span class=si>{}</span><span class=s2>&quot;</span>
            <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>joined_methods</span><span class=p>))</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_current_project_name</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_current_folder_path</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_current_task_name</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_current_workfile_path</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_current_project_settings</span> <span class=o>=</span> <span class=kc>None</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_current_project_entity</span> <span class=o>=</span> <span class=n>_NOT_SET</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_current_folder_entity</span> <span class=o>=</span> <span class=n>_NOT_SET</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_current_task_entity</span> <span class=o>=</span> <span class=n>_NOT_SET</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_current_task_type</span> <span class=o>=</span> <span class=n>_NOT_SET</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_current_project_anatomy</span> <span class=o>=</span> <span class=kc>None</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_host_is_valid</span> <span class=o>=</span> <span class=n>host_is_valid</span>
        <span class=c1># Currently unused variable</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>headless</span> <span class=o>=</span> <span class=n>headless</span>

        <span class=c1># Instances by their ID</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_instances_by_id</span> <span class=o>=</span> <span class=p>{}</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>creator_discover_result</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>convertor_discover_result</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=c1># Discovered creators</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>creators</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=c1># Prepare categories of creators</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>autocreators</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=c1># Manual creators</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>manual_creators</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=c1># Creators that are disabled</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>disabled_creators</span> <span class=o>=</span> <span class=p>{}</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>convertors_plugins</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>convertor_items_by_id</span> <span class=o>=</span> <span class=p>{}</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>publish_discover_result</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>DiscoverResult</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>publish_plugins_mismatch_targets</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>publish_plugins</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>plugins_with_defs</span> <span class=o>=</span> <span class=p>[]</span>

        <span class=c1># Helpers for validating context of collected instances</span>
        <span class=c1>#   - they can be validation for multiple instances at one time</span>
        <span class=c1>#       using context manager which will trigger validation</span>
        <span class=c1>#       after leaving of last context manager scope</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_bulk_info</span> <span class=o>=</span> <span class=p>{</span>
            <span class=c1># Added instances</span>
            <span class=s2>&quot;add&quot;</span><span class=p>:</span> <span class=n>BulkInfo</span><span class=p>(),</span>
            <span class=c1># Removed instances</span>
            <span class=s2>&quot;remove&quot;</span><span class=p>:</span> <span class=n>BulkInfo</span><span class=p>(),</span>
            <span class=c1># Change values of instances or create context</span>
            <span class=s2>&quot;change&quot;</span><span class=p>:</span> <span class=n>BulkInfo</span><span class=p>(),</span>
            <span class=c1># Pre create attribute definitions changed</span>
            <span class=s2>&quot;pre_create_attrs_change&quot;</span><span class=p>:</span> <span class=n>BulkInfo</span><span class=p>(),</span>
            <span class=c1># Create attribute definitions changed</span>
            <span class=s2>&quot;create_attrs_change&quot;</span><span class=p>:</span> <span class=n>BulkInfo</span><span class=p>(),</span>
            <span class=c1># Publish attribute definitions changed</span>
            <span class=s2>&quot;publish_attrs_change&quot;</span><span class=p>:</span> <span class=n>BulkInfo</span><span class=p>(),</span>
        <span class=p>}</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_bulk_order</span> <span class=o>=</span> <span class=p>[]</span>

        <span class=c1># Shared data across creators during collection phase</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_collection_shared_data</span> <span class=o>=</span> <span class=kc>None</span>

        <span class=c1># Entities cache</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_folder_entities_by_path</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_task_entities_by_id</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_task_ids_by_folder_path</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_task_names_by_folder_path</span> <span class=o>=</span> <span class=p>{}</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>thumbnail_paths_by_instance_id</span> <span class=o>=</span> <span class=p>{}</span>

        <span class=c1># Trigger reset if was enabled</span>
        <span class=k>if</span> <span class=n>reset</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>reset</span><span class=p>(</span><span class=n>discover_publish_plugins</span><span class=p>)</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>instances</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_instances_by_id</span><span class=o>.</span><span class=n>values</span><span class=p>()</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>instances_by_id</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_instances_by_id</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>publish_attributes</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Access to global publish attributes.&quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_publish_attributes</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_instance_by_id</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span> <span class=n>instance_id</span><span class=p>:</span> <span class=nb>str</span>
    <span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=s2>&quot;CreatedInstance&quot;</span><span class=p>]:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Receive instance by id.</span>

<span class=sd>        Args:</span>
<span class=sd>            instance_id (str): Instance id.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Optional[CreatedInstance]: Instance or None if instance with</span>
<span class=sd>                given id is not available.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_instances_by_id</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>instance_id</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_sorted_creators</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>identifiers</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Sorted creators by &#39;order&#39; attribute.</span>

<span class=sd>        Args:</span>
<span class=sd>            identifiers (Iterable[str]): Filter creators by identifiers. All</span>
<span class=sd>                creators are returned if &#39;None&#39; is passed.</span>

<span class=sd>        Returns:</span>
<span class=sd>            List[BaseCreator]: Sorted creator plugins by &#39;order&#39; value.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=n>identifiers</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>identifiers</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span><span class=n>identifiers</span><span class=p>)</span>
            <span class=n>creators</span> <span class=o>=</span> <span class=p>[</span>
                <span class=n>creator</span>
                <span class=k>for</span> <span class=n>identifier</span><span class=p>,</span> <span class=n>creator</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>creators</span><span class=o>.</span><span class=n>items</span><span class=p>()</span>
                <span class=k>if</span> <span class=n>identifier</span> <span class=ow>in</span> <span class=n>identifiers</span>
            <span class=p>]</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>creators</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>creators</span><span class=o>.</span><span class=n>values</span><span class=p>()</span>

        <span class=k>return</span> <span class=nb>sorted</span><span class=p>(</span>
            <span class=n>creators</span><span class=p>,</span> <span class=n>key</span><span class=o>=</span><span class=k>lambda</span> <span class=n>creator</span><span class=p>:</span> <span class=n>creator</span><span class=o>.</span><span class=n>order</span>
        <span class=p>)</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>sorted_creators</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Sorted creators by &#39;order&#39; attribute.</span>

<span class=sd>        Returns:</span>
<span class=sd>            List[BaseCreator]: Sorted creator plugins by &#39;order&#39; value.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_sorted_creators</span><span class=p>()</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>sorted_autocreators</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Sorted auto-creators by &#39;order&#39; attribute.</span>

<span class=sd>        Returns:</span>
<span class=sd>            List[AutoCreator]: Sorted plugins by &#39;order&#39; value.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=nb>sorted</span><span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>autocreators</span><span class=o>.</span><span class=n>values</span><span class=p>(),</span> <span class=n>key</span><span class=o>=</span><span class=k>lambda</span> <span class=n>creator</span><span class=p>:</span> <span class=n>creator</span><span class=o>.</span><span class=n>order</span>
        <span class=p>)</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>get_host_misssing_methods</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>host</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Collect missing methods from host.</span>

<span class=sd>        Args:</span>
<span class=sd>            host(ModuleType): Host implementaion.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>missing</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span>
            <span class=n>IPublishHost</span><span class=o>.</span><span class=n>get_missing_publish_methods</span><span class=p>(</span><span class=n>host</span><span class=p>)</span>
        <span class=p>)</span>
        <span class=k>return</span> <span class=n>missing</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>host_is_valid</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Is host valid for creation.&quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_host_is_valid</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>host_name</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
        <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=p>,</span> <span class=s2>&quot;name&quot;</span><span class=p>):</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=o>.</span><span class=n>name</span>
        <span class=k>return</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=p>[</span><span class=s2>&quot;AYON_HOST_NAME&quot;</span><span class=p>]</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_current_project_name</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Project name which was used as current context on context reset.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Union[str, None]: Project name.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_project_name</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_current_folder_path</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Folder path which was used as current context on context reset.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Union[str, None]: Folder path.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_folder_path</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_current_task_name</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Task name which was used as current context on context reset.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Union[str, None]: Task name.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_task_name</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_current_task_type</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Task type which was used as current context on context reset.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Union[str, None]: Task type.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_task_type</span> <span class=ow>is</span> <span class=n>_NOT_SET</span><span class=p>:</span>
            <span class=n>task_type</span> <span class=o>=</span> <span class=kc>None</span>
            <span class=n>task_entity</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_task_entity</span><span class=p>()</span>
            <span class=k>if</span> <span class=n>task_entity</span><span class=p>:</span>
                <span class=n>task_type</span> <span class=o>=</span> <span class=n>task_entity</span><span class=p>[</span><span class=s2>&quot;taskType&quot;</span><span class=p>]</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_current_task_type</span> <span class=o>=</span> <span class=n>task_type</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_task_type</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_current_project_entity</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Project entity for current context project.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Union[dict[str, Any], None]: Folder entity.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_project_entity</span> <span class=ow>is</span> <span class=ow>not</span> <span class=n>_NOT_SET</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_current_project_entity</span><span class=p>)</span>
        <span class=n>project_entity</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=n>project_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_project_name</span><span class=p>()</span>
        <span class=k>if</span> <span class=n>project_name</span><span class=p>:</span>
            <span class=n>project_entity</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_project</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_current_project_entity</span> <span class=o>=</span> <span class=n>project_entity</span>
        <span class=k>return</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_current_project_entity</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_current_folder_entity</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Folder entity for current context folder.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Optional[dict[str, Any]]: Folder entity.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_folder_entity</span> <span class=ow>is</span> <span class=ow>not</span> <span class=n>_NOT_SET</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_current_folder_entity</span><span class=p>)</span>

        <span class=n>folder_path</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_folder_path</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_current_folder_entity</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_folder_entity</span><span class=p>(</span><span class=n>folder_path</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_current_folder_entity</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_current_task_entity</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Task entity for current context task.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Union[dict[str, Any], None]: Task entity.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_task_entity</span> <span class=ow>is</span> <span class=ow>not</span> <span class=n>_NOT_SET</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_current_task_entity</span><span class=p>)</span>

        <span class=n>folder_path</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_folder_path</span><span class=p>()</span>
        <span class=n>task_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_task_name</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_current_task_entity</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_task_entity</span><span class=p>(</span>
            <span class=n>folder_path</span><span class=p>,</span> <span class=n>task_name</span>
        <span class=p>)</span>
        <span class=k>return</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_current_task_entity</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_current_workfile_path</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Workfile path which was opened on context reset.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Union[str, None]: Workfile path.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_workfile_path</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_current_project_anatomy</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Project anatomy for current project.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Anatomy: Anatomy object ready to be used.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_project_anatomy</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_current_project_anatomy</span> <span class=o>=</span> <span class=n>Anatomy</span><span class=p>(</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_current_project_name</span><span class=p>)</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_project_anatomy</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_current_project_settings</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_project_settings</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_current_project_settings</span> <span class=o>=</span> <span class=n>get_project_settings</span><span class=p>(</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>get_current_project_name</span><span class=p>())</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_project_settings</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_template_data</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span> <span class=n>folder_path</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>],</span> <span class=n>task_name</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span>
    <span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Prepare template data for given context.</span>

<span class=sd>        Method is using cached entities and settings to prepare template data.</span>

<span class=sd>        Args:</span>
<span class=sd>            folder_path (Optional[str]): Folder path.</span>
<span class=sd>            task_name (Optional[str]): Task name.</span>

<span class=sd>        Returns:</span>
<span class=sd>            dict[str, Any]: Template data.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>project_entity</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_project_entity</span><span class=p>()</span>
        <span class=n>folder_entity</span> <span class=o>=</span> <span class=n>task_entity</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=k>if</span> <span class=n>folder_path</span><span class=p>:</span>
            <span class=n>folder_entity</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_folder_entity</span><span class=p>(</span><span class=n>folder_path</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>task_name</span> <span class=ow>and</span> <span class=n>folder_entity</span><span class=p>:</span>
                <span class=n>task_entity</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_task_entity</span><span class=p>(</span><span class=n>folder_path</span><span class=p>,</span> <span class=n>task_name</span><span class=p>)</span>

        <span class=k>return</span> <span class=n>get_template_data</span><span class=p>(</span>
            <span class=n>project_entity</span><span class=p>,</span>
            <span class=n>folder_entity</span><span class=p>,</span>
            <span class=n>task_entity</span><span class=p>,</span>
            <span class=n>host_name</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>host_name</span><span class=p>,</span>
            <span class=n>settings</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>get_current_project_settings</span><span class=p>(),</span>
        <span class=p>)</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>context_has_changed</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Host context has changed.</span>

<span class=sd>        As context is used project, folder, task name and workfile path if</span>
<span class=sd>        host does support workfiles.</span>

<span class=sd>        Returns:</span>
<span class=sd>            bool: Context changed.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>project_name</span><span class=p>,</span> <span class=n>folder_path</span><span class=p>,</span> <span class=n>task_name</span><span class=p>,</span> <span class=n>workfile_path</span> <span class=o>=</span> <span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_get_current_host_context</span><span class=p>()</span>
        <span class=p>)</span>
        <span class=k>return</span> <span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_current_project_name</span> <span class=o>!=</span> <span class=n>project_name</span>
            <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_folder_path</span> <span class=o>!=</span> <span class=n>folder_path</span>
            <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_task_name</span> <span class=o>!=</span> <span class=n>task_name</span>
            <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_workfile_path</span> <span class=o>!=</span> <span class=n>workfile_path</span>
        <span class=p>)</span>

    <span class=n>project_name</span> <span class=o>=</span> <span class=nb>property</span><span class=p>(</span><span class=n>get_current_project_name</span><span class=p>)</span>
    <span class=n>project_anatomy</span> <span class=o>=</span> <span class=nb>property</span><span class=p>(</span><span class=n>get_current_project_anatomy</span><span class=p>)</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>log</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Dynamic access to logger.&quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_log</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_log</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>getLogger</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=p>)</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_log</span>

    <span class=k>def</span><span class=w> </span><span class=nf>reset</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>discover_publish_plugins</span><span class=o>=</span><span class=kc>True</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Reset context with all plugins and instances.</span>

<span class=sd>        All changes will be lost if were not saved explicitely.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>reset_preparation</span><span class=p>()</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>reset_current_context</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>reset_plugins</span><span class=p>(</span><span class=n>discover_publish_plugins</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>reset_context_data</span><span class=p>()</span>

        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>bulk_add_instances</span><span class=p>():</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>reset_instances</span><span class=p>()</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>find_convertor_items</span><span class=p>()</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>execute_autocreators</span><span class=p>()</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>reset_finalization</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>refresh_thumbnails</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Cleanup thumbnail paths.</span>

<span class=sd>        Remove all thumbnail filepaths that are empty or lead to files which</span>
<span class=sd>        does not exist or of instances that are not available anymore.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>invalid</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
        <span class=k>for</span> <span class=n>instance_id</span><span class=p>,</span> <span class=n>path</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>thumbnail_paths_by_instance_id</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=n>instance_available</span> <span class=o>=</span> <span class=kc>True</span>
            <span class=k>if</span> <span class=n>instance_id</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
                <span class=n>instance_available</span> <span class=o>=</span> <span class=n>instance_id</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_instances_by_id</span>

            <span class=k>if</span> <span class=p>(</span>
                <span class=ow>not</span> <span class=n>instance_available</span>
                <span class=ow>or</span> <span class=ow>not</span> <span class=n>path</span>
                <span class=ow>or</span> <span class=ow>not</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>
            <span class=p>):</span>
                <span class=n>invalid</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>instance_id</span><span class=p>)</span>

        <span class=k>for</span> <span class=n>instance_id</span> <span class=ow>in</span> <span class=n>invalid</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>thumbnail_paths_by_instance_id</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>instance_id</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>reset_preparation</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Prepare attributes that must be prepared/cleaned before reset.&quot;&quot;&quot;</span>

        <span class=c1># Give ability to store shared data for collection phase</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_collection_shared_data</span> <span class=o>=</span> <span class=p>{}</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_folder_entities_by_path</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_task_entities_by_id</span> <span class=o>=</span> <span class=p>{}</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_task_ids_by_folder_path</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_task_names_by_folder_path</span> <span class=o>=</span> <span class=p>{}</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_event_hub</span><span class=o>.</span><span class=n>clear_callbacks</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>reset_finalization</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Cleanup of attributes after reset.&quot;&quot;&quot;</span>

        <span class=c1># Stop access to collection shared data</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_collection_shared_data</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>refresh_thumbnails</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_get_current_host_context</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=n>project_name</span> <span class=o>=</span> <span class=n>folder_path</span> <span class=o>=</span> <span class=n>task_name</span> <span class=o>=</span> <span class=n>workfile_path</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=p>,</span> <span class=s2>&quot;get_current_context&quot;</span><span class=p>):</span>
            <span class=n>host_context</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=o>.</span><span class=n>get_current_context</span><span class=p>()</span>
            <span class=k>if</span> <span class=n>host_context</span><span class=p>:</span>
                <span class=n>project_name</span> <span class=o>=</span> <span class=n>host_context</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;project_name&quot;</span><span class=p>)</span>
                <span class=n>folder_path</span> <span class=o>=</span> <span class=n>host_context</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;folder_path&quot;</span><span class=p>)</span>
                <span class=n>task_name</span> <span class=o>=</span> <span class=n>host_context</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;task_name&quot;</span><span class=p>)</span>

        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=p>,</span> <span class=n>IWorkfileHost</span><span class=p>):</span>
            <span class=n>workfile_path</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=o>.</span><span class=n>get_current_workfile</span><span class=p>()</span>

        <span class=k>return</span> <span class=n>project_name</span><span class=p>,</span> <span class=n>folder_path</span><span class=p>,</span> <span class=n>task_name</span><span class=p>,</span> <span class=n>workfile_path</span>

    <span class=k>def</span><span class=w> </span><span class=nf>reset_current_context</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Refresh current context.</span>

<span class=sd>        Reset is based on optional host implementation of `get_current_context`</span>
<span class=sd>        function.</span>

<span class=sd>        Some hosts have ability to change context file without using workfiles</span>
<span class=sd>        tool but that change is not propagated to &#39;os.environ&#39;.</span>

<span class=sd>        Todos:</span>
<span class=sd>            UI: Current context should be also checked on save - compare</span>
<span class=sd>                initial values vs. current values.</span>
<span class=sd>            Related to UI checks: Current workfile can be also considered</span>
<span class=sd>                as current context information as that&#39;s where the metadata</span>
<span class=sd>                are stored. We should store the workfile (if is available) too.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>project_name</span><span class=p>,</span> <span class=n>folder_path</span><span class=p>,</span> <span class=n>task_name</span><span class=p>,</span> <span class=n>workfile_path</span> <span class=o>=</span> <span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_get_current_host_context</span><span class=p>()</span>
        <span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_current_project_name</span> <span class=o>=</span> <span class=n>project_name</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_current_folder_path</span> <span class=o>=</span> <span class=n>folder_path</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_current_task_name</span> <span class=o>=</span> <span class=n>task_name</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_current_workfile_path</span> <span class=o>=</span> <span class=n>workfile_path</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_current_project_entity</span> <span class=o>=</span> <span class=n>_NOT_SET</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_current_folder_entity</span> <span class=o>=</span> <span class=n>_NOT_SET</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_current_task_entity</span> <span class=o>=</span> <span class=n>_NOT_SET</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_current_task_type</span> <span class=o>=</span> <span class=n>_NOT_SET</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_current_project_anatomy</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_current_project_settings</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=k>def</span><span class=w> </span><span class=nf>reset_plugins</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>discover_publish_plugins</span><span class=o>=</span><span class=kc>True</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Reload plugins.</span>

<span class=sd>        Reloads creators from preregistered paths and can load publish plugins</span>
<span class=sd>        if it&#39;s enabled on context.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_reset_publish_plugins</span><span class=p>(</span><span class=n>discover_publish_plugins</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_reset_creator_plugins</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_reset_convertor_plugins</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_reset_publish_plugins</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>discover_publish_plugins</span><span class=p>):</span>
        <span class=kn>from</span><span class=w> </span><span class=nn>ayon_core.pipeline</span><span class=w> </span><span class=kn>import</span> <span class=n>AYONPyblishPluginMixin</span>
        <span class=kn>from</span><span class=w> </span><span class=nn>ayon_core.pipeline.publish</span><span class=w> </span><span class=kn>import</span> <span class=p>(</span>
            <span class=n>publish_plugins_discover</span>
        <span class=p>)</span>

        <span class=n>discover_result</span> <span class=o>=</span> <span class=n>DiscoverResult</span><span class=p>(</span><span class=n>pyblish</span><span class=o>.</span><span class=n>api</span><span class=o>.</span><span class=n>Plugin</span><span class=p>)</span>
        <span class=n>plugins_with_defs</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=n>plugins_by_targets</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=n>plugins_mismatch_targets</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>if</span> <span class=n>discover_publish_plugins</span><span class=p>:</span>
            <span class=n>discover_result</span> <span class=o>=</span> <span class=n>publish_plugins_discover</span><span class=p>()</span>
            <span class=n>publish_plugins</span> <span class=o>=</span> <span class=n>discover_result</span><span class=o>.</span><span class=n>plugins</span>

            <span class=n>targets</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span><span class=n>pyblish</span><span class=o>.</span><span class=n>logic</span><span class=o>.</span><span class=n>registered_targets</span><span class=p>())</span>
            <span class=n>targets</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=s2>&quot;default&quot;</span><span class=p>)</span>
            <span class=n>plugins_by_targets</span> <span class=o>=</span> <span class=n>pyblish</span><span class=o>.</span><span class=n>logic</span><span class=o>.</span><span class=n>plugins_by_targets</span><span class=p>(</span>
                <span class=n>publish_plugins</span><span class=p>,</span> <span class=nb>list</span><span class=p>(</span><span class=n>targets</span><span class=p>)</span>
            <span class=p>)</span>

            <span class=c1># Collect plugins that can have attribute definitions</span>
            <span class=k>for</span> <span class=n>plugin</span> <span class=ow>in</span> <span class=n>publish_plugins</span><span class=p>:</span>
                <span class=k>if</span> <span class=n>AYONPyblishPluginMixin</span> <span class=ow>in</span> <span class=n>inspect</span><span class=o>.</span><span class=n>getmro</span><span class=p>(</span><span class=n>plugin</span><span class=p>):</span>
                    <span class=n>plugins_with_defs</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>plugin</span><span class=p>)</span>

            <span class=n>plugins_mismatch_targets</span> <span class=o>=</span> <span class=p>[</span>
                <span class=n>plugin</span>
                <span class=k>for</span> <span class=n>plugin</span> <span class=ow>in</span> <span class=n>publish_plugins</span>
                <span class=k>if</span> <span class=n>plugin</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>plugins_by_targets</span>
            <span class=p>]</span>

        <span class=c1># Register create context callbacks</span>
        <span class=k>for</span> <span class=n>plugin</span> <span class=ow>in</span> <span class=n>plugins_with_defs</span><span class=p>:</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=n>inspect</span><span class=o>.</span><span class=n>ismethod</span><span class=p>(</span><span class=n>plugin</span><span class=o>.</span><span class=n>register_create_context_callbacks</span><span class=p>):</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
                    <span class=sa>f</span><span class=s2>&quot;Plugin </span><span class=si>{</span><span class=n>plugin</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2> does not have&quot;</span>
                    <span class=sa>f</span><span class=s2>&quot; &#39;register_create_context_callbacks&#39;&quot;</span>
                    <span class=sa>f</span><span class=s2>&quot; defined as class method.&quot;</span>
                <span class=p>)</span>
                <span class=k>continue</span>
            <span class=k>try</span><span class=p>:</span>
                <span class=n>plugin</span><span class=o>.</span><span class=n>register_create_context_callbacks</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
            <span class=k>except</span> <span class=ne>Exception</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>error</span><span class=p>(</span>
                    <span class=sa>f</span><span class=s2>&quot;Failed to register callbacks for plugin&quot;</span>
                    <span class=sa>f</span><span class=s2>&quot; </span><span class=si>{</span><span class=n>plugin</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2>.&quot;</span><span class=p>,</span>
                    <span class=n>exc_info</span><span class=o>=</span><span class=kc>True</span>
                <span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>publish_plugins_mismatch_targets</span> <span class=o>=</span> <span class=n>plugins_mismatch_targets</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>publish_discover_result</span> <span class=o>=</span> <span class=n>discover_result</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>publish_plugins</span> <span class=o>=</span> <span class=n>plugins_by_targets</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>plugins_with_defs</span> <span class=o>=</span> <span class=n>plugins_with_defs</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_reset_creator_plugins</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=c1># Prepare settings</span>
        <span class=n>project_settings</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_project_settings</span><span class=p>()</span>

        <span class=c1># Discover and prepare creators</span>
        <span class=n>creators</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=n>disabled_creators</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=n>autocreators</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=n>manual_creators</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=n>report</span> <span class=o>=</span> <span class=n>discover_creator_plugins</span><span class=p>(</span><span class=n>return_report</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>creator_discover_result</span> <span class=o>=</span> <span class=n>report</span>
        <span class=k>for</span> <span class=n>creator_class</span> <span class=ow>in</span> <span class=n>report</span><span class=o>.</span><span class=n>plugins</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>inspect</span><span class=o>.</span><span class=n>isabstract</span><span class=p>(</span><span class=n>creator_class</span><span class=p>):</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
                    <span class=s2>&quot;Skipping abstract Creator </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>creator_class</span><span class=p>))</span>
                <span class=p>)</span>
                <span class=k>continue</span>

            <span class=n>creator_identifier</span> <span class=o>=</span> <span class=n>creator_class</span><span class=o>.</span><span class=n>identifier</span>
            <span class=k>if</span> <span class=n>creator_identifier</span> <span class=ow>in</span> <span class=n>creators</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
                    <span class=s2>&quot;Duplicate Creator identifier: &#39;</span><span class=si>%s</span><span class=s2>&#39;. Using first Creator &quot;</span>
                    <span class=s2>&quot;and skipping: </span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span> <span class=n>creator_identifier</span><span class=p>,</span> <span class=n>creator_class</span>
                <span class=p>)</span>
                <span class=k>continue</span>

            <span class=c1># Filter by host name</span>
            <span class=k>if</span> <span class=p>(</span>
                <span class=n>creator_class</span><span class=o>.</span><span class=n>host_name</span>
                <span class=ow>and</span> <span class=n>creator_class</span><span class=o>.</span><span class=n>host_name</span> <span class=o>!=</span> <span class=bp>self</span><span class=o>.</span><span class=n>host_name</span>
            <span class=p>):</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>((</span>
                    <span class=s2>&quot;Creator&#39;s host name </span><span class=se>\&quot;</span><span class=si>{}</span><span class=se>\&quot;</span><span class=s2>&quot;</span>
                    <span class=s2>&quot; is not supported for current host </span><span class=se>\&quot;</span><span class=si>{}</span><span class=se>\&quot;</span><span class=s2>&quot;</span>
                <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>creator_class</span><span class=o>.</span><span class=n>host_name</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>host_name</span><span class=p>))</span>
                <span class=k>continue</span>

            <span class=c1># TODO report initialization error</span>
            <span class=k>try</span><span class=p>:</span>
                <span class=n>creator</span> <span class=o>=</span> <span class=n>creator_class</span><span class=p>(</span>
                    <span class=n>project_settings</span><span class=p>,</span>
                    <span class=bp>self</span><span class=p>,</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>headless</span>
                <span class=p>)</span>
            <span class=k>except</span> <span class=ne>Exception</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>error</span><span class=p>(</span>
                    <span class=sa>f</span><span class=s2>&quot;Failed to initialize plugin: </span><span class=si>{</span><span class=n>creator_class</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>,</span>
                    <span class=n>exc_info</span><span class=o>=</span><span class=kc>True</span>
                <span class=p>)</span>
                <span class=k>continue</span>

            <span class=k>if</span> <span class=ow>not</span> <span class=n>creator</span><span class=o>.</span><span class=n>enabled</span><span class=p>:</span>
                <span class=n>disabled_creators</span><span class=p>[</span><span class=n>creator_identifier</span><span class=p>]</span> <span class=o>=</span> <span class=n>creator</span>
                <span class=k>continue</span>
            <span class=n>creators</span><span class=p>[</span><span class=n>creator_identifier</span><span class=p>]</span> <span class=o>=</span> <span class=n>creator</span>
            <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>creator</span><span class=p>,</span> <span class=n>AutoCreator</span><span class=p>):</span>
                <span class=n>autocreators</span><span class=p>[</span><span class=n>creator_identifier</span><span class=p>]</span> <span class=o>=</span> <span class=n>creator</span>
            <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>creator</span><span class=p>,</span> <span class=n>Creator</span><span class=p>):</span>
                <span class=n>manual_creators</span><span class=p>[</span><span class=n>creator_identifier</span><span class=p>]</span> <span class=o>=</span> <span class=n>creator</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>autocreators</span> <span class=o>=</span> <span class=n>autocreators</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>manual_creators</span> <span class=o>=</span> <span class=n>manual_creators</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>creators</span> <span class=o>=</span> <span class=n>creators</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>disabled_creators</span> <span class=o>=</span> <span class=n>disabled_creators</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_reset_convertor_plugins</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=n>convertors_plugins</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=n>report</span> <span class=o>=</span> <span class=n>discover_convertor_plugins</span><span class=p>(</span><span class=n>return_report</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>convertor_discover_result</span> <span class=o>=</span> <span class=n>report</span>
        <span class=k>for</span> <span class=n>convertor_class</span> <span class=ow>in</span> <span class=n>report</span><span class=o>.</span><span class=n>plugins</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>inspect</span><span class=o>.</span><span class=n>isabstract</span><span class=p>(</span><span class=n>convertor_class</span><span class=p>):</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span>
                    <span class=s2>&quot;Skipping abstract Creator </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>convertor_class</span><span class=p>))</span>
                <span class=p>)</span>
                <span class=k>continue</span>

            <span class=n>convertor_identifier</span> <span class=o>=</span> <span class=n>convertor_class</span><span class=o>.</span><span class=n>identifier</span>
            <span class=k>if</span> <span class=n>convertor_identifier</span> <span class=ow>in</span> <span class=n>convertors_plugins</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>((</span>
                    <span class=s2>&quot;Duplicated Converter identifier. &quot;</span>
                    <span class=s2>&quot;Using first and skipping following&quot;</span>
                <span class=p>))</span>
                <span class=k>continue</span>

            <span class=n>convertors_plugins</span><span class=p>[</span><span class=n>convertor_identifier</span><span class=p>]</span> <span class=o>=</span> <span class=n>convertor_class</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>convertors_plugins</span> <span class=o>=</span> <span class=n>convertors_plugins</span>

    <span class=k>def</span><span class=w> </span><span class=nf>reset_context_data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Reload context data using host implementation.</span>

<span class=sd>        These data are not related to any instance but may be needed for whole</span>
<span class=sd>        publishing.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>host_is_valid</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_original_context_data</span> <span class=o>=</span> <span class=p>{}</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_publish_attributes</span> <span class=o>=</span> <span class=n>PublishAttributes</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=p>{})</span>
            <span class=k>return</span>

        <span class=n>original_data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=o>.</span><span class=n>get_context_data</span><span class=p>()</span> <span class=ow>or</span> <span class=p>{}</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_original_context_data</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=n>original_data</span><span class=p>)</span>

        <span class=n>publish_attributes</span> <span class=o>=</span> <span class=n>original_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;publish_attributes&quot;</span><span class=p>)</span> <span class=ow>or</span> <span class=p>{}</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_publish_attributes</span> <span class=o>=</span> <span class=n>PublishAttributes</span><span class=p>(</span>
            <span class=bp>self</span><span class=p>,</span> <span class=n>publish_attributes</span>
        <span class=p>)</span>

        <span class=k>for</span> <span class=n>plugin</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>plugins_with_defs</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>is_func_signature_supported</span><span class=p>(</span>
                <span class=n>plugin</span><span class=o>.</span><span class=n>convert_attribute_values</span><span class=p>,</span> <span class=bp>self</span><span class=p>,</span> <span class=kc>None</span>
            <span class=p>):</span>
                <span class=n>plugin</span><span class=o>.</span><span class=n>convert_attribute_values</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>

            <span class=k>elif</span> <span class=ow>not</span> <span class=n>plugin</span><span class=o>.</span><span class=n>__instanceEnabled__</span><span class=p>:</span>
                <span class=n>output</span> <span class=o>=</span> <span class=n>plugin</span><span class=o>.</span><span class=n>convert_attribute_values</span><span class=p>(</span><span class=n>publish_attributes</span><span class=p>)</span>
                <span class=k>if</span> <span class=n>output</span><span class=p>:</span>
                    <span class=n>publish_attributes</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>output</span><span class=p>)</span>

        <span class=k>for</span> <span class=n>plugin</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>plugins_with_defs</span><span class=p>:</span>
            <span class=n>attr_defs</span> <span class=o>=</span> <span class=n>plugin</span><span class=o>.</span><span class=n>get_attr_defs_for_context</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=n>attr_defs</span><span class=p>:</span>
                <span class=k>continue</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_publish_attributes</span><span class=o>.</span><span class=n>set_publish_plugin_attr_defs</span><span class=p>(</span>
                <span class=n>plugin</span><span class=o>.</span><span class=vm>__name__</span><span class=p>,</span> <span class=n>attr_defs</span>
            <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>add_instances_added_callback</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>callback</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Register callback for added instances.</span>

<span class=sd>        Event is triggered when instances are already available in context</span>
<span class=sd>            and have set create/publish attribute definitions.</span>

<span class=sd>        Data structure of event::</span>

<span class=sd>            ```python</span>
<span class=sd>            {</span>
<span class=sd>                &quot;instances&quot;: [CreatedInstance, ...],</span>
<span class=sd>                &quot;create_context&quot;: CreateContext</span>
<span class=sd>            }</span>
<span class=sd>            ```</span>

<span class=sd>        Args:</span>
<span class=sd>            callback (Callable): Callback function that will be called when</span>
<span class=sd>                instances are added to context.</span>

<span class=sd>        Returns:</span>
<span class=sd>            EventCallback: Created callback object which can be used to</span>
<span class=sd>                stop listening.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_event_hub</span><span class=o>.</span><span class=n>add_callback</span><span class=p>(</span><span class=n>INSTANCE_ADDED_TOPIC</span><span class=p>,</span> <span class=n>callback</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>add_instances_removed_callback</span> <span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>callback</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Register callback for removed instances.</span>

<span class=sd>        Event is triggered when instances are already removed from context.</span>

<span class=sd>        Data structure of event::</span>

<span class=sd>            ```python</span>
<span class=sd>            {</span>
<span class=sd>                &quot;instances&quot;: [CreatedInstance, ...],</span>
<span class=sd>                &quot;create_context&quot;: CreateContext</span>
<span class=sd>            }</span>
<span class=sd>            ```</span>

<span class=sd>        Args:</span>
<span class=sd>            callback (Callable): Callback function that will be called when</span>
<span class=sd>                instances are removed from context.</span>

<span class=sd>        Returns:</span>
<span class=sd>            EventCallback: Created callback object which can be used to</span>
<span class=sd>                stop listening.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_event_hub</span><span class=o>.</span><span class=n>add_callback</span><span class=p>(</span><span class=n>INSTANCE_REMOVED_TOPIC</span><span class=p>,</span> <span class=n>callback</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>add_value_changed_callback</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>callback</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Register callback to listen value changes.</span>

<span class=sd>        Event is triggered when any value changes on any instance or</span>
<span class=sd>            context data.</span>

<span class=sd>        Data structure of event::</span>

<span class=sd>            ```python</span>
<span class=sd>            {</span>
<span class=sd>                &quot;changes&quot;: [</span>
<span class=sd>                    {</span>
<span class=sd>                        &quot;instance&quot;: CreatedInstance,</span>
<span class=sd>                        &quot;changes&quot;: {</span>
<span class=sd>                            &quot;folderPath&quot;: &quot;/new/folder/path&quot;,</span>
<span class=sd>                            &quot;creator_attributes&quot;: {</span>
<span class=sd>                                &quot;attr_1&quot;: &quot;value_1&quot;</span>
<span class=sd>                            }</span>
<span class=sd>                        }</span>
<span class=sd>                    }</span>
<span class=sd>                ],</span>
<span class=sd>                &quot;create_context&quot;: CreateContext</span>
<span class=sd>            }</span>
<span class=sd>            ```</span>

<span class=sd>        Args:</span>
<span class=sd>            callback (Callable): Callback function that will be called when</span>
<span class=sd>                value changed.</span>

<span class=sd>        Returns:</span>
<span class=sd>            EventCallback: Created callback object which can be used to</span>
<span class=sd>                stop listening.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_event_hub</span><span class=o>.</span><span class=n>add_callback</span><span class=p>(</span><span class=n>VALUE_CHANGED_TOPIC</span><span class=p>,</span> <span class=n>callback</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>add_pre_create_attr_defs_change_callback</span> <span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>callback</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Register callback to listen pre-create attribute changes.</span>

<span class=sd>        Create plugin can trigger refresh of pre-create attributes. Usage of</span>
<span class=sd>            this event is mainly for publisher UI.</span>

<span class=sd>        Data structure of event::</span>

<span class=sd>            ```python</span>
<span class=sd>            {</span>
<span class=sd>                &quot;identifiers&quot;: [&quot;create_plugin_identifier&quot;],</span>
<span class=sd>                &quot;create_context&quot;: CreateContext</span>
<span class=sd>            }</span>
<span class=sd>            ```</span>

<span class=sd>        Args:</span>
<span class=sd>            callback (Callable): Callback function that will be called when</span>
<span class=sd>                pre-create attributes should be refreshed.</span>

<span class=sd>        Returns:</span>
<span class=sd>            EventCallback: Created callback object which can be used to</span>
<span class=sd>                stop listening.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_event_hub</span><span class=o>.</span><span class=n>add_callback</span><span class=p>(</span>
            <span class=n>PRE_CREATE_ATTR_DEFS_CHANGED_TOPIC</span><span class=p>,</span> <span class=n>callback</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>add_create_attr_defs_change_callback</span> <span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>callback</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Register callback to listen create attribute changes.</span>

<span class=sd>        Create plugin changed attribute definitions of instance.</span>

<span class=sd>        Data structure of event::</span>

<span class=sd>            ```python</span>
<span class=sd>            {</span>
<span class=sd>                &quot;instances&quot;: [CreatedInstance, ...],</span>
<span class=sd>                &quot;create_context&quot;: CreateContext</span>
<span class=sd>            }</span>
<span class=sd>            ```</span>

<span class=sd>        Args:</span>
<span class=sd>            callback (Callable): Callback function that will be called when</span>
<span class=sd>                create attributes changed.</span>

<span class=sd>        Returns:</span>
<span class=sd>            EventCallback: Created callback object which can be used to</span>
<span class=sd>                stop listening.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_event_hub</span><span class=o>.</span><span class=n>add_callback</span><span class=p>(</span><span class=n>CREATE_ATTR_DEFS_CHANGED_TOPIC</span><span class=p>,</span> <span class=n>callback</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>add_publish_attr_defs_change_callback</span> <span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>callback</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Register callback to listen publish attribute changes.</span>

<span class=sd>        Publish plugin changed attribute definitions of instance of context.</span>

<span class=sd>        Data structure of event::</span>

<span class=sd>            ```python</span>
<span class=sd>            {</span>
<span class=sd>                &quot;instance_changes&quot;: {</span>
<span class=sd>                    None: {</span>
<span class=sd>                        &quot;instance&quot;: None,</span>
<span class=sd>                        &quot;plugin_names&quot;: {&quot;PluginA&quot;},</span>
<span class=sd>                    }</span>
<span class=sd>                    &quot;&lt;instance_id&gt;&quot;: {</span>
<span class=sd>                        &quot;instance&quot;: CreatedInstance,</span>
<span class=sd>                        &quot;plugin_names&quot;: {&quot;PluginB&quot;, &quot;PluginC&quot;},</span>
<span class=sd>                    }</span>
<span class=sd>                },</span>
<span class=sd>                &quot;create_context&quot;: CreateContext</span>
<span class=sd>            }</span>
<span class=sd>            ```</span>

<span class=sd>        Args:</span>
<span class=sd>            callback (Callable): Callback function that will be called when</span>
<span class=sd>                publish attributes changed.</span>

<span class=sd>        Returns:</span>
<span class=sd>            EventCallback: Created callback object which can be used to</span>
<span class=sd>                stop listening.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_event_hub</span><span class=o>.</span><span class=n>add_callback</span><span class=p>(</span>
            <span class=n>PUBLISH_ATTR_DEFS_CHANGED_TOPIC</span><span class=p>,</span> <span class=n>callback</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>context_data_to_store</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Data that should be stored by host function.</span>

<span class=sd>        The same data should be returned on loading.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=p>{</span>
            <span class=s2>&quot;publish_attributes&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_publish_attributes</span><span class=o>.</span><span class=n>data_to_store</span><span class=p>()</span>
        <span class=p>}</span>

    <span class=k>def</span><span class=w> </span><span class=nf>context_data_changes</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Changes of attributes.&quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=n>TrackChangesItem</span><span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_original_context_data</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>context_data_to_store</span><span class=p>()</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_context_publish_plugin_attr_defs</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>plugin_name</span><span class=p>,</span> <span class=n>attr_defs</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Set attribute definitions for CreateContext publish plugin.</span>

<span class=sd>        Args:</span>
<span class=sd>            plugin_name(str): Name of publish plugin.</span>
<span class=sd>            attr_defs(List[AbstractAttrDef]): Attribute definitions.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>publish_attributes</span><span class=o>.</span><span class=n>set_publish_plugin_attr_defs</span><span class=p>(</span>
            <span class=n>plugin_name</span><span class=p>,</span> <span class=n>attr_defs</span>
        <span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>instance_publish_attr_defs_changed</span><span class=p>(</span>
            <span class=kc>None</span><span class=p>,</span> <span class=n>plugin_name</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>creator_adds_instance</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instance</span><span class=p>:</span> <span class=s2>&quot;CreatedInstance&quot;</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Creator adds new instance to context.</span>

<span class=sd>        Instances should be added only from creators.</span>

<span class=sd>        Args:</span>
<span class=sd>            instance(CreatedInstance): Instance with prepared data from</span>
<span class=sd>                creator.</span>

<span class=sd>        TODO: Rename method to more suit.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=c1># Add instance to instances list</span>
        <span class=k>if</span> <span class=n>instance</span><span class=o>.</span><span class=n>id</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_instances_by_id</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>((</span>
                <span class=s2>&quot;Instance with id </span><span class=si>{}</span><span class=s2> is already added to context.&quot;</span>
            <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>instance</span><span class=o>.</span><span class=n>id</span><span class=p>))</span>
            <span class=k>return</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_instances_by_id</span><span class=p>[</span><span class=n>instance</span><span class=o>.</span><span class=n>id</span><span class=p>]</span> <span class=o>=</span> <span class=n>instance</span>

        <span class=c1># Add instance to be validated inside &#39;bulk_add_instances&#39;</span>
        <span class=c1>#   context manager if is inside bulk</span>
        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>bulk_add_instances</span><span class=p>()</span> <span class=k>as</span> <span class=n>bulk_info</span><span class=p>:</span>
            <span class=n>bulk_info</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>instance</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_get_creator_in_create</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>identifier</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Creator by identifier with unified error.</span>

<span class=sd>        Helper method to get creator by identifier with same error when creator</span>
<span class=sd>        is not available.</span>

<span class=sd>        Args:</span>
<span class=sd>            identifier (str): Identifier of creator plugin.</span>

<span class=sd>        Returns:</span>
<span class=sd>            BaseCreator: Creator found by identifier.</span>

<span class=sd>        Raises:</span>
<span class=sd>            CreatorError: When identifier is not known.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>creator</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>creators</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>identifier</span><span class=p>)</span>
        <span class=c1># Fake CreatorError (Could be maybe specific exception?)</span>
        <span class=k>if</span> <span class=n>creator</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>raise</span> <span class=n>CreatorError</span><span class=p>(</span>
                <span class=s2>&quot;Creator </span><span class=si>{}</span><span class=s2> was not found&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>identifier</span><span class=p>)</span>
            <span class=p>)</span>
        <span class=k>return</span> <span class=n>creator</span>

    <span class=k>def</span><span class=w> </span><span class=nf>create</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>creator_identifier</span><span class=p>,</span>
        <span class=n>variant</span><span class=p>,</span>
        <span class=n>folder_entity</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>task_entity</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>pre_create_data</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>active</span><span class=o>=</span><span class=kc>None</span>
    <span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Trigger create of plugins with standartized arguments.</span>

<span class=sd>        Arguments &#39;folder_entity&#39; and &#39;task_name&#39; use current context as</span>
<span class=sd>        default values. If only &#39;task_entity&#39; is provided it will be</span>
<span class=sd>        overridden by task name from current context. If &#39;task_name&#39; is not</span>
<span class=sd>        provided when &#39;folder_entity&#39; is, it is considered that task name is</span>
<span class=sd>        not specified, which can lead to error if product name template</span>
<span class=sd>        requires task name.</span>

<span class=sd>        Args:</span>
<span class=sd>            creator_identifier (str): Identifier of creator plugin.</span>
<span class=sd>            variant (str): Variant used for product name.</span>
<span class=sd>            folder_entity (Dict[str, Any]): Folder entity which define context</span>
<span class=sd>                of creation (possible context of created instance/s).</span>
<span class=sd>            task_entity (Dict[str, Any]): Task entity.</span>
<span class=sd>            pre_create_data (Dict[str, Any]): Pre-create attribute values.</span>
<span class=sd>            active (Optional[bool]): Whether the created instance defaults</span>
<span class=sd>                to be active or not.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Any: Output of triggered creator&#39;s &#39;create&#39; method.</span>

<span class=sd>        Raises:</span>
<span class=sd>            CreatorError: If creator was not found or folder is empty.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>creator</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_creator_in_create</span><span class=p>(</span><span class=n>creator_identifier</span><span class=p>)</span>

        <span class=n>project_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>project_name</span>
        <span class=k>if</span> <span class=n>folder_entity</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>folder_path</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_folder_path</span><span class=p>()</span>
            <span class=n>folder_entity</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_folder_by_path</span><span class=p>(</span>
                <span class=n>project_name</span><span class=p>,</span> <span class=n>folder_path</span>
            <span class=p>)</span>
            <span class=k>if</span> <span class=n>folder_entity</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
                <span class=k>raise</span> <span class=n>CreatorError</span><span class=p>(</span>
                    <span class=s2>&quot;Folder &#39;</span><span class=si>{}</span><span class=s2>&#39; was not found&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>folder_path</span><span class=p>)</span>
                <span class=p>)</span>

        <span class=k>if</span> <span class=n>task_entity</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>current_task_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_task_name</span><span class=p>()</span>
            <span class=k>if</span> <span class=n>current_task_name</span><span class=p>:</span>
                <span class=n>task_entity</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_task_by_name</span><span class=p>(</span>
                    <span class=n>project_name</span><span class=p>,</span> <span class=n>folder_entity</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>],</span> <span class=n>current_task_name</span>
                <span class=p>)</span>

        <span class=k>if</span> <span class=n>pre_create_data</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>pre_create_data</span> <span class=o>=</span> <span class=p>{}</span>

        <span class=n>precreate_attr_defs</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=c1># Hidden creators do not have or need the pre-create attributes.</span>
        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>creator</span><span class=p>,</span> <span class=n>Creator</span><span class=p>):</span>
            <span class=n>precreate_attr_defs</span> <span class=o>=</span> <span class=n>creator</span><span class=o>.</span><span class=n>get_pre_create_attr_defs</span><span class=p>()</span>

        <span class=c1># Create default values of precreate data</span>
        <span class=n>_pre_create_data</span> <span class=o>=</span> <span class=n>get_default_values</span><span class=p>(</span><span class=n>precreate_attr_defs</span><span class=p>)</span>
        <span class=c1># Update passed precreate data to default values</span>
        <span class=c1># TODO validate types</span>
        <span class=n>_pre_create_data</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>pre_create_data</span><span class=p>)</span>

        <span class=n>project_entity</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_project_entity</span><span class=p>()</span>
        <span class=n>args</span> <span class=o>=</span> <span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span>
            <span class=n>folder_entity</span><span class=p>,</span>
            <span class=n>task_entity</span><span class=p>,</span>
            <span class=n>variant</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>host_name</span><span class=p>,</span>
        <span class=p>)</span>
        <span class=n>kwargs</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;project_entity&quot;</span><span class=p>:</span> <span class=n>project_entity</span><span class=p>}</span>
        <span class=c1># Backwards compatibility for &#39;project_entity&#39; argument</span>
        <span class=c1># - &#39;get_product_name&#39; signature changed 24/07/08</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>is_func_signature_supported</span><span class=p>(</span>
            <span class=n>creator</span><span class=o>.</span><span class=n>get_product_name</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span>
        <span class=p>):</span>
            <span class=n>kwargs</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s2>&quot;project_entity&quot;</span><span class=p>)</span>
        <span class=n>product_name</span> <span class=o>=</span> <span class=n>creator</span><span class=o>.</span><span class=n>get_product_name</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>

        <span class=n>instance_data</span> <span class=o>=</span> <span class=p>{</span>
            <span class=s2>&quot;folderPath&quot;</span><span class=p>:</span> <span class=n>folder_entity</span><span class=p>[</span><span class=s2>&quot;path&quot;</span><span class=p>],</span>
            <span class=s2>&quot;task&quot;</span><span class=p>:</span> <span class=n>task_entity</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span> <span class=k>if</span> <span class=n>task_entity</span> <span class=k>else</span> <span class=kc>None</span><span class=p>,</span>
            <span class=s2>&quot;productType&quot;</span><span class=p>:</span> <span class=n>creator</span><span class=o>.</span><span class=n>product_type</span><span class=p>,</span>
            <span class=s2>&quot;variant&quot;</span><span class=p>:</span> <span class=n>variant</span>
        <span class=p>}</span>
        <span class=k>if</span> <span class=n>active</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>active</span><span class=p>,</span> <span class=nb>bool</span><span class=p>):</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
                    <span class=s2>&quot;CreateContext.create &#39;active&#39; argument is not a bool. &quot;</span>
                    <span class=sa>f</span><span class=s2>&quot;Converting </span><span class=si>{</span><span class=n>active</span><span class=si>}</span><span class=s2> </span><span class=si>{</span><span class=nb>type</span><span class=p>(</span><span class=n>active</span><span class=p>)</span><span class=si>}</span><span class=s2> to bool.&quot;</span><span class=p>)</span>
                <span class=n>active</span> <span class=o>=</span> <span class=nb>bool</span><span class=p>(</span><span class=n>active</span><span class=p>)</span>
            <span class=n>instance_data</span><span class=p>[</span><span class=s2>&quot;active&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>active</span>

        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>bulk_add_instances</span><span class=p>():</span>
            <span class=k>return</span> <span class=n>creator</span><span class=o>.</span><span class=n>create</span><span class=p>(</span>
                <span class=n>product_name</span><span class=p>,</span>
                <span class=n>instance_data</span><span class=p>,</span>
                <span class=n>_pre_create_data</span>
            <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>create_with_unified_error</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>identifier</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Trigger create but raise only one error if anything fails.</span>

<span class=sd>        Added to raise unified exception. Capture any possible issues and</span>
<span class=sd>        reraise it with unified information.</span>

<span class=sd>        Args:</span>
<span class=sd>            identifier (str): Identifier of creator.</span>
<span class=sd>            *args (Tuple[Any]): Arguments for create method.</span>
<span class=sd>            **kwargs (Dict[Any, Any]): Keyword argument for create method.</span>

<span class=sd>        Raises:</span>
<span class=sd>            CreatorsCreateFailed: When creation fails due to any possible</span>
<span class=sd>                reason. If anything goes wrong this is only possible exception</span>
<span class=sd>                the method should raise.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>result</span><span class=p>,</span> <span class=n>fail_info</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_create_with_unified_error</span><span class=p>(</span>
            <span class=n>identifier</span><span class=p>,</span> <span class=kc>None</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span>
        <span class=p>)</span>
        <span class=k>if</span> <span class=n>fail_info</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>raise</span> <span class=n>CreatorsCreateFailed</span><span class=p>([</span><span class=n>fail_info</span><span class=p>])</span>
        <span class=k>return</span> <span class=n>result</span>

    <span class=k>def</span><span class=w> </span><span class=nf>creator_removed_instance</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instance</span><span class=p>:</span> <span class=s2>&quot;CreatedInstance&quot;</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;When creator removes instance context should be acknowledged.</span>

<span class=sd>        If creator removes instance context should know about it to avoid</span>
<span class=sd>        possible issues in the session.</span>

<span class=sd>        Args:</span>
<span class=sd>            instance (CreatedInstance): Object of instance which was removed</span>
<span class=sd>                from scene metadata.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_remove_instances</span><span class=p>([</span><span class=n>instance</span><span class=p>])</span>

    <span class=k>def</span><span class=w> </span><span class=nf>add_convertor_item</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>convertor_identifier</span><span class=p>,</span> <span class=n>label</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>convertor_items_by_id</span><span class=p>[</span><span class=n>convertor_identifier</span><span class=p>]</span> <span class=o>=</span> <span class=n>ConvertorItem</span><span class=p>(</span>
            <span class=n>convertor_identifier</span><span class=p>,</span> <span class=n>label</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>remove_convertor_item</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>convertor_identifier</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>convertor_items_by_id</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>convertor_identifier</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>

    <span class=nd>@contextmanager</span>
    <span class=k>def</span><span class=w> </span><span class=nf>bulk_add_instances</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>sender</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>_bulk_context</span><span class=p>(</span><span class=s2>&quot;add&quot;</span><span class=p>,</span> <span class=n>sender</span><span class=p>)</span> <span class=k>as</span> <span class=n>bulk_info</span><span class=p>:</span>
            <span class=k>yield</span> <span class=n>bulk_info</span>

    <span class=nd>@contextmanager</span>
    <span class=k>def</span><span class=w> </span><span class=nf>bulk_instances_collection</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>sender</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;DEPRECATED use &#39;bulk_add_instances&#39; instead.&quot;&quot;&quot;</span>
        <span class=c1># TODO add warning</span>
        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>bulk_add_instances</span><span class=p>(</span><span class=n>sender</span><span class=p>)</span> <span class=k>as</span> <span class=n>bulk_info</span><span class=p>:</span>
            <span class=k>yield</span> <span class=n>bulk_info</span>

    <span class=nd>@contextmanager</span>
    <span class=k>def</span><span class=w> </span><span class=nf>bulk_remove_instances</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>sender</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>_bulk_context</span><span class=p>(</span><span class=s2>&quot;remove&quot;</span><span class=p>,</span> <span class=n>sender</span><span class=p>)</span> <span class=k>as</span> <span class=n>bulk_info</span><span class=p>:</span>
            <span class=k>yield</span> <span class=n>bulk_info</span>

    <span class=nd>@contextmanager</span>
    <span class=k>def</span><span class=w> </span><span class=nf>bulk_value_changes</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>sender</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>_bulk_context</span><span class=p>(</span><span class=s2>&quot;change&quot;</span><span class=p>,</span> <span class=n>sender</span><span class=p>)</span> <span class=k>as</span> <span class=n>bulk_info</span><span class=p>:</span>
            <span class=k>yield</span> <span class=n>bulk_info</span>

    <span class=nd>@contextmanager</span>
    <span class=k>def</span><span class=w> </span><span class=nf>bulk_pre_create_attr_defs_change</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>sender</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>_bulk_context</span><span class=p>(</span>
            <span class=s2>&quot;pre_create_attrs_change&quot;</span><span class=p>,</span> <span class=n>sender</span>
        <span class=p>)</span> <span class=k>as</span> <span class=n>bulk_info</span><span class=p>:</span>
            <span class=k>yield</span> <span class=n>bulk_info</span>

    <span class=nd>@contextmanager</span>
    <span class=k>def</span><span class=w> </span><span class=nf>bulk_create_attr_defs_change</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>sender</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>_bulk_context</span><span class=p>(</span>
            <span class=s2>&quot;create_attrs_change&quot;</span><span class=p>,</span> <span class=n>sender</span>
        <span class=p>)</span> <span class=k>as</span> <span class=n>bulk_info</span><span class=p>:</span>
            <span class=k>yield</span> <span class=n>bulk_info</span>

    <span class=nd>@contextmanager</span>
    <span class=k>def</span><span class=w> </span><span class=nf>bulk_publish_attr_defs_change</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>sender</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>_bulk_context</span><span class=p>(</span><span class=s2>&quot;publish_attrs_change&quot;</span><span class=p>,</span> <span class=n>sender</span><span class=p>)</span> <span class=k>as</span> <span class=n>bulk_info</span><span class=p>:</span>
            <span class=k>yield</span> <span class=n>bulk_info</span>

    <span class=c1># --- instance change callbacks ---</span>
    <span class=k>def</span><span class=w> </span><span class=nf>create_plugin_pre_create_attr_defs_changed</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>identifier</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Create plugin pre-create attributes changed.</span>

<span class=sd>        Triggered by &#39;Creator&#39;.</span>

<span class=sd>        Args:</span>
<span class=sd>            identifier (str): Create plugin identifier.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>bulk_pre_create_attr_defs_change</span><span class=p>()</span> <span class=k>as</span> <span class=n>bulk_item</span><span class=p>:</span>
            <span class=n>bulk_item</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>identifier</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>instance_create_attr_defs_changed</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instance_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Instance attribute definitions changed.</span>

<span class=sd>        Triggered by instance &#39;CreatorAttributeValues&#39; on instance.</span>

<span class=sd>        Args:</span>
<span class=sd>            instance_id (str): Instance id.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_is_instance_events_ready</span><span class=p>(</span><span class=n>instance_id</span><span class=p>):</span>
            <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>bulk_create_attr_defs_change</span><span class=p>()</span> <span class=k>as</span> <span class=n>bulk_item</span><span class=p>:</span>
                <span class=n>bulk_item</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>instance_id</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>instance_publish_attr_defs_changed</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span> <span class=n>instance_id</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>],</span> <span class=n>plugin_name</span><span class=p>:</span> <span class=nb>str</span>
    <span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Instance attribute definitions changed.</span>

<span class=sd>        Triggered by instance &#39;PublishAttributeValues&#39; on instance.</span>

<span class=sd>        Args:</span>
<span class=sd>            instance_id (Optional[str]): Instance id or None for context.</span>
<span class=sd>            plugin_name (str): Plugin name which attribute definitions were</span>
<span class=sd>                changed.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_is_instance_events_ready</span><span class=p>(</span><span class=n>instance_id</span><span class=p>):</span>
            <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>bulk_publish_attr_defs_change</span><span class=p>()</span> <span class=k>as</span> <span class=n>bulk_item</span><span class=p>:</span>
                <span class=n>bulk_item</span><span class=o>.</span><span class=n>append</span><span class=p>((</span><span class=n>instance_id</span><span class=p>,</span> <span class=n>plugin_name</span><span class=p>))</span>

    <span class=k>def</span><span class=w> </span><span class=nf>instance_values_changed</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span> <span class=n>instance_id</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>],</span> <span class=n>new_values</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span>
    <span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Instance value changed.</span>

<span class=sd>        Triggered by `CreatedInstance, &#39;CreatorAttributeValues&#39;</span>
<span class=sd>            or &#39;PublishAttributeValues&#39; on instance.</span>

<span class=sd>        Args:</span>
<span class=sd>            instance_id (Optional[str]): Instance id or None for context.</span>
<span class=sd>            new_values (Dict[str, Any]): Changed values.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_is_instance_events_ready</span><span class=p>(</span><span class=n>instance_id</span><span class=p>):</span>
            <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>bulk_value_changes</span><span class=p>()</span> <span class=k>as</span> <span class=n>bulk_item</span><span class=p>:</span>
                <span class=n>bulk_item</span><span class=o>.</span><span class=n>append</span><span class=p>((</span><span class=n>instance_id</span><span class=p>,</span> <span class=n>new_values</span><span class=p>))</span>

    <span class=c1># --- context change callbacks ---</span>
    <span class=k>def</span><span class=w> </span><span class=nf>publish_attribute_value_changed</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span> <span class=n>plugin_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span>
    <span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Context publish attribute values changed.</span>

<span class=sd>        Triggered by instance &#39;PublishAttributeValues&#39; on context.</span>

<span class=sd>        Args:</span>
<span class=sd>            plugin_name (str): Plugin name which changed value.</span>
<span class=sd>            value (Dict[str, Any]): Changed values.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>instance_values_changed</span><span class=p>(</span>
            <span class=kc>None</span><span class=p>,</span>
            <span class=p>{</span>
                <span class=s2>&quot;publish_attributes&quot;</span><span class=p>:</span> <span class=p>{</span>
                    <span class=n>plugin_name</span><span class=p>:</span> <span class=n>value</span><span class=p>,</span>
                <span class=p>},</span>
            <span class=p>},</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>reset_instances</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Reload instances&quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_instances_by_id</span> <span class=o>=</span> <span class=n>collections</span><span class=o>.</span><span class=n>OrderedDict</span><span class=p>()</span>

        <span class=c1># Collect instances</span>
        <span class=n>error_message</span> <span class=o>=</span> <span class=s2>&quot;Collection of instances for creator </span><span class=si>{}</span><span class=s2> failed. </span><span class=si>{}</span><span class=s2>&quot;</span>
        <span class=n>failed_info</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>for</span> <span class=n>creator</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>sorted_creators</span><span class=p>:</span>
            <span class=n>label</span> <span class=o>=</span> <span class=n>creator</span><span class=o>.</span><span class=n>label</span>
            <span class=n>identifier</span> <span class=o>=</span> <span class=n>creator</span><span class=o>.</span><span class=n>identifier</span>
            <span class=n>failed</span> <span class=o>=</span> <span class=kc>False</span>
            <span class=n>add_traceback</span> <span class=o>=</span> <span class=kc>False</span>
            <span class=n>exc_info</span> <span class=o>=</span> <span class=kc>None</span>
            <span class=k>try</span><span class=p>:</span>
                <span class=n>creator</span><span class=o>.</span><span class=n>collect_instances</span><span class=p>()</span>

            <span class=k>except</span> <span class=n>CreatorError</span><span class=p>:</span>
                <span class=n>failed</span> <span class=o>=</span> <span class=kc>True</span>
                <span class=n>exc_info</span> <span class=o>=</span> <span class=n>sys</span><span class=o>.</span><span class=n>exc_info</span><span class=p>()</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=n>error_message</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>identifier</span><span class=p>,</span> <span class=n>exc_info</span><span class=p>[</span><span class=mi>1</span><span class=p>]))</span>

            <span class=k>except</span><span class=p>:</span>  <span class=c1># noqa: E722</span>
                <span class=n>failed</span> <span class=o>=</span> <span class=kc>True</span>
                <span class=n>add_traceback</span> <span class=o>=</span> <span class=kc>True</span>
                <span class=n>exc_info</span> <span class=o>=</span> <span class=n>sys</span><span class=o>.</span><span class=n>exc_info</span><span class=p>()</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
                    <span class=n>error_message</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>identifier</span><span class=p>,</span> <span class=s2>&quot;&quot;</span><span class=p>),</span>
                    <span class=n>exc_info</span><span class=o>=</span><span class=kc>True</span>
                <span class=p>)</span>

            <span class=k>if</span> <span class=n>failed</span><span class=p>:</span>
                <span class=n>failed_info</span><span class=o>.</span><span class=n>append</span><span class=p>(</span>
                    <span class=n>prepare_failed_creator_operation_info</span><span class=p>(</span>
                        <span class=n>identifier</span><span class=p>,</span> <span class=n>label</span><span class=p>,</span> <span class=n>exc_info</span><span class=p>,</span> <span class=n>add_traceback</span>
                    <span class=p>)</span>
                <span class=p>)</span>

        <span class=k>if</span> <span class=n>failed_info</span><span class=p>:</span>
            <span class=k>raise</span> <span class=n>CreatorsCollectionFailed</span><span class=p>(</span><span class=n>failed_info</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>find_convertor_items</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Go through convertor plugins to look for items to convert.</span>

<span class=sd>        Raises:</span>
<span class=sd>            ConvertorsFindFailed: When one or more convertors fails during</span>
<span class=sd>                finding.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>convertor_items_by_id</span> <span class=o>=</span> <span class=p>{}</span>

        <span class=n>failed_info</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>for</span> <span class=n>convertor</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>convertors_plugins</span><span class=o>.</span><span class=n>values</span><span class=p>():</span>
            <span class=k>try</span><span class=p>:</span>
                <span class=n>convertor</span><span class=o>.</span><span class=n>find_instances</span><span class=p>()</span>

            <span class=k>except</span><span class=p>:</span>  <span class=c1># noqa: E722</span>
                <span class=n>failed_info</span><span class=o>.</span><span class=n>append</span><span class=p>(</span>
                    <span class=n>prepare_failed_convertor_operation_info</span><span class=p>(</span>
                        <span class=n>convertor</span><span class=o>.</span><span class=n>identifier</span><span class=p>,</span> <span class=n>sys</span><span class=o>.</span><span class=n>exc_info</span><span class=p>()</span>
                    <span class=p>)</span>
                <span class=p>)</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
                    <span class=s2>&quot;Failed to find instances of convertor </span><span class=se>\&quot;</span><span class=si>{}</span><span class=se>\&quot;</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                        <span class=n>convertor</span><span class=o>.</span><span class=n>identifier</span>
                    <span class=p>),</span>
                    <span class=n>exc_info</span><span class=o>=</span><span class=kc>True</span>
                <span class=p>)</span>

        <span class=k>if</span> <span class=n>failed_info</span><span class=p>:</span>
            <span class=k>raise</span> <span class=n>ConvertorsFindFailed</span><span class=p>(</span><span class=n>failed_info</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>execute_autocreators</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Execute discovered AutoCreator plugins.</span>

<span class=sd>        Reset instances if any autocreator executed properly.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>failed_info</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>for</span> <span class=n>creator</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>sorted_autocreators</span><span class=p>:</span>
            <span class=n>identifier</span> <span class=o>=</span> <span class=n>creator</span><span class=o>.</span><span class=n>identifier</span>
            <span class=n>_</span><span class=p>,</span> <span class=n>fail_info</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_create_with_unified_error</span><span class=p>(</span><span class=n>identifier</span><span class=p>,</span> <span class=n>creator</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>fail_info</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
                <span class=n>failed_info</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>fail_info</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>failed_info</span><span class=p>:</span>
            <span class=k>raise</span> <span class=n>CreatorsCreateFailed</span><span class=p>(</span><span class=n>failed_info</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_folder_entities</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>folder_paths</span><span class=p>:</span> <span class=n>Iterable</span><span class=p>[</span><span class=nb>str</span><span class=p>]):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get folder entities by paths.</span>

<span class=sd>        Args:</span>
<span class=sd>            folder_paths (Iterable[str]): Folder paths.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Dict[str, Optional[Dict[str, Any]]]: Folder entities by path.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>output</span> <span class=o>=</span> <span class=p>{</span>
            <span class=n>folder_path</span><span class=p>:</span> <span class=kc>None</span>
            <span class=k>for</span> <span class=n>folder_path</span> <span class=ow>in</span> <span class=n>folder_paths</span>
        <span class=p>}</span>
        <span class=n>remainder_paths</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
        <span class=k>for</span> <span class=n>folder_path</span> <span class=ow>in</span> <span class=n>output</span><span class=p>:</span>
            <span class=c1># Skip invalid folder paths (folder name or empty path)</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=n>folder_path</span> <span class=ow>or</span> <span class=s2>&quot;/&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>folder_path</span><span class=p>:</span>
                <span class=k>continue</span>

            <span class=k>if</span> <span class=n>folder_path</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_folder_entities_by_path</span><span class=p>:</span>
                <span class=n>remainder_paths</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>folder_path</span><span class=p>)</span>
                <span class=k>continue</span>

            <span class=n>output</span><span class=p>[</span><span class=n>folder_path</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_folder_entities_by_path</span><span class=p>[</span><span class=n>folder_path</span><span class=p>]</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>remainder_paths</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>output</span>

        <span class=n>found_paths</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
        <span class=k>for</span> <span class=n>folder_entity</span> <span class=ow>in</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_folders</span><span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>project_name</span><span class=p>,</span>
            <span class=n>folder_paths</span><span class=o>=</span><span class=n>remainder_paths</span><span class=p>,</span>
        <span class=p>):</span>
            <span class=n>folder_path</span> <span class=o>=</span> <span class=n>folder_entity</span><span class=p>[</span><span class=s2>&quot;path&quot;</span><span class=p>]</span>
            <span class=n>found_paths</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>folder_path</span><span class=p>)</span>
            <span class=n>output</span><span class=p>[</span><span class=n>folder_path</span><span class=p>]</span> <span class=o>=</span> <span class=n>folder_entity</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_folder_entities_by_path</span><span class=p>[</span><span class=n>folder_path</span><span class=p>]</span> <span class=o>=</span> <span class=n>folder_entity</span>

        <span class=c1># Cache empty folder entities</span>
        <span class=k>for</span> <span class=n>path</span> <span class=ow>in</span> <span class=n>remainder_paths</span> <span class=o>-</span> <span class=n>found_paths</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_folder_entities_by_path</span><span class=p>[</span><span class=n>path</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>

        <span class=k>return</span> <span class=n>output</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_task_entities</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>task_names_by_folder_paths</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Set</span><span class=p>[</span><span class=nb>str</span><span class=p>]]</span>
    <span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]]]:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get task entities by folder path and task name.</span>

<span class=sd>        Entities are cached until reset.</span>

<span class=sd>        Args:</span>
<span class=sd>            task_names_by_folder_paths (Dict[str, Set[str]]): Task names by</span>
<span class=sd>                folder path.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Dict[str, Dict[str, Dict[str, Any]]]: Task entities by folder path</span>
<span class=sd>                and task name.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>output</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=k>for</span> <span class=n>folder_path</span><span class=p>,</span> <span class=n>task_names</span> <span class=ow>in</span> <span class=n>task_names_by_folder_paths</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=k>if</span> <span class=n>folder_path</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
                <span class=k>continue</span>
            <span class=n>output</span><span class=p>[</span><span class=n>folder_path</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span>
                <span class=n>task_name</span><span class=p>:</span> <span class=kc>None</span>
                <span class=k>for</span> <span class=n>task_name</span> <span class=ow>in</span> <span class=n>task_names</span>
                <span class=k>if</span> <span class=n>task_name</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span>
            <span class=p>}</span>

        <span class=n>missing_folder_paths</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
        <span class=k>for</span> <span class=n>folder_path</span><span class=p>,</span> <span class=n>output_task_entities_by_name</span> <span class=ow>in</span> <span class=n>output</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=n>output_task_entities_by_name</span><span class=p>:</span>
                <span class=k>continue</span>

            <span class=k>if</span> <span class=n>folder_path</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_task_ids_by_folder_path</span><span class=p>:</span>
                <span class=n>missing_folder_paths</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>folder_path</span><span class=p>)</span>
                <span class=k>continue</span>

            <span class=n>all_tasks_filled</span> <span class=o>=</span> <span class=kc>True</span>
            <span class=n>task_ids</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_task_ids_by_folder_path</span><span class=p>[</span><span class=n>folder_path</span><span class=p>]</span>
            <span class=n>task_entities_by_name</span> <span class=o>=</span> <span class=p>{}</span>
            <span class=k>for</span> <span class=n>task_id</span> <span class=ow>in</span> <span class=n>task_ids</span><span class=p>:</span>
                <span class=n>task_entity</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_task_entities_by_id</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>task_id</span><span class=p>)</span>
                <span class=k>if</span> <span class=n>task_entity</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
                    <span class=n>all_tasks_filled</span> <span class=o>=</span> <span class=kc>False</span>
                    <span class=k>continue</span>
                <span class=n>task_entities_by_name</span><span class=p>[</span><span class=n>task_entity</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]]</span> <span class=o>=</span> <span class=n>task_entity</span>

            <span class=n>any_missing</span> <span class=o>=</span> <span class=kc>False</span>
            <span class=k>for</span> <span class=n>task_name</span> <span class=ow>in</span> <span class=nb>set</span><span class=p>(</span><span class=n>output_task_entities_by_name</span><span class=p>):</span>
                <span class=n>task_entity</span> <span class=o>=</span> <span class=n>task_entities_by_name</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>task_name</span><span class=p>)</span>
                <span class=k>if</span> <span class=n>task_entity</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
                    <span class=n>any_missing</span> <span class=o>=</span> <span class=kc>True</span>
                    <span class=k>continue</span>

                <span class=n>output_task_entities_by_name</span><span class=p>[</span><span class=n>task_name</span><span class=p>]</span> <span class=o>=</span> <span class=n>task_entity</span>

            <span class=k>if</span> <span class=n>any_missing</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>all_tasks_filled</span><span class=p>:</span>
                <span class=n>missing_folder_paths</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>folder_path</span><span class=p>)</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>missing_folder_paths</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>output</span>

        <span class=n>folder_entities_by_path</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_folder_entities</span><span class=p>(</span>
            <span class=n>missing_folder_paths</span>
        <span class=p>)</span>
        <span class=n>folder_path_by_id</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=k>for</span> <span class=n>folder_path</span><span class=p>,</span> <span class=n>folder_entity</span> <span class=ow>in</span> <span class=n>folder_entities_by_path</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=k>if</span> <span class=n>folder_entity</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
                <span class=n>folder_path_by_id</span><span class=p>[</span><span class=n>folder_entity</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]]</span> <span class=o>=</span> <span class=n>folder_path</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>folder_path_by_id</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>output</span>

        <span class=n>task_entities_by_parent_id</span> <span class=o>=</span> <span class=n>collections</span><span class=o>.</span><span class=n>defaultdict</span><span class=p>(</span><span class=nb>list</span><span class=p>)</span>
        <span class=k>for</span> <span class=n>task_entity</span> <span class=ow>in</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_tasks</span><span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>project_name</span><span class=p>,</span>
            <span class=n>folder_ids</span><span class=o>=</span><span class=n>folder_path_by_id</span><span class=o>.</span><span class=n>keys</span><span class=p>()</span>
        <span class=p>):</span>
            <span class=n>folder_id</span> <span class=o>=</span> <span class=n>task_entity</span><span class=p>[</span><span class=s2>&quot;folderId&quot;</span><span class=p>]</span>
            <span class=n>task_entities_by_parent_id</span><span class=p>[</span><span class=n>folder_id</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>task_entity</span><span class=p>)</span>

        <span class=k>for</span> <span class=n>folder_id</span><span class=p>,</span> <span class=n>task_entities</span> <span class=ow>in</span> <span class=n>task_entities_by_parent_id</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=n>folder_path</span> <span class=o>=</span> <span class=n>folder_path_by_id</span><span class=p>[</span><span class=n>folder_id</span><span class=p>]</span>
            <span class=n>task_ids</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
            <span class=n>task_names</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
            <span class=k>for</span> <span class=n>task_entity</span> <span class=ow>in</span> <span class=n>task_entities</span><span class=p>:</span>
                <span class=n>task_id</span> <span class=o>=</span> <span class=n>task_entity</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]</span>
                <span class=n>task_name</span> <span class=o>=</span> <span class=n>task_entity</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span>
                <span class=n>task_ids</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>task_id</span><span class=p>)</span>
                <span class=n>task_names</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>task_name</span><span class=p>)</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_task_entities_by_id</span><span class=p>[</span><span class=n>task_id</span><span class=p>]</span> <span class=o>=</span> <span class=n>task_entity</span>

                <span class=n>output</span><span class=p>[</span><span class=n>folder_path</span><span class=p>][</span><span class=n>task_name</span><span class=p>]</span> <span class=o>=</span> <span class=n>task_entity</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_task_ids_by_folder_path</span><span class=p>[</span><span class=n>folder_path</span><span class=p>]</span> <span class=o>=</span> <span class=n>task_ids</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_task_names_by_folder_path</span><span class=p>[</span><span class=n>folder_path</span><span class=p>]</span> <span class=o>=</span> <span class=n>task_names</span>

        <span class=k>return</span> <span class=n>output</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_folder_entity</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>folder_path</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>],</span>
    <span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get folder entity by path.</span>

<span class=sd>        Entities are cached until reset.</span>

<span class=sd>        Args:</span>
<span class=sd>            folder_path (Optional[str]): Folder path.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Optional[Dict[str, Any]]: Folder entity.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>folder_path</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>None</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_folder_entities</span><span class=p>([</span><span class=n>folder_path</span><span class=p>])</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>folder_path</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_task_entity</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>folder_path</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>],</span>
        <span class=n>task_name</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>],</span>
    <span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get task entity by name and folder path.</span>

<span class=sd>        Entities are cached until reset.</span>

<span class=sd>        Args:</span>
<span class=sd>            folder_path (Optional[str]): Folder path.</span>
<span class=sd>            task_name (Optional[str]): Task name.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Optional[Dict[str, Any]]: Task entity.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>folder_path</span> <span class=ow>or</span> <span class=ow>not</span> <span class=n>task_name</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>None</span>

        <span class=n>output</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_task_entities</span><span class=p>({</span><span class=n>folder_path</span><span class=p>:</span> <span class=p>{</span><span class=n>task_name</span><span class=p>}})</span>
        <span class=k>return</span> <span class=n>output</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>folder_path</span><span class=p>,</span> <span class=p>{})</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>task_name</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_instances_folder_entities</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span> <span class=n>instances</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Iterable</span><span class=p>[</span><span class=s2>&quot;CreatedInstance&quot;</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]]:</span>
        <span class=k>if</span> <span class=n>instances</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>instances</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_instances_by_id</span><span class=o>.</span><span class=n>values</span><span class=p>()</span>
        <span class=n>instances</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>instances</span><span class=p>)</span>
        <span class=n>output</span> <span class=o>=</span> <span class=p>{</span>
            <span class=n>instance</span><span class=o>.</span><span class=n>id</span><span class=p>:</span> <span class=kc>None</span>
            <span class=k>for</span> <span class=n>instance</span> <span class=ow>in</span> <span class=n>instances</span>
        <span class=p>}</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>instances</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>output</span>

        <span class=n>folder_paths</span> <span class=o>=</span> <span class=p>{</span>
            <span class=n>instance</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;folderPath&quot;</span><span class=p>)</span>
            <span class=k>for</span> <span class=n>instance</span> <span class=ow>in</span> <span class=n>instances</span>
        <span class=p>}</span>
        <span class=n>folder_paths</span><span class=o>.</span><span class=n>discard</span><span class=p>(</span><span class=kc>None</span><span class=p>)</span>
        <span class=n>folder_entities_by_path</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_folder_entities</span><span class=p>(</span><span class=n>folder_paths</span><span class=p>)</span>
        <span class=k>for</span> <span class=n>instance</span> <span class=ow>in</span> <span class=n>instances</span><span class=p>:</span>
            <span class=n>folder_path</span> <span class=o>=</span> <span class=n>instance</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;folderPath&quot;</span><span class=p>)</span>
            <span class=n>output</span><span class=p>[</span><span class=n>instance</span><span class=o>.</span><span class=n>id</span><span class=p>]</span> <span class=o>=</span> <span class=n>folder_entities_by_path</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>folder_path</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>output</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_instances_task_entities</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span> <span class=n>instances</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Iterable</span><span class=p>[</span><span class=s2>&quot;CreatedInstance&quot;</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get task entities for instances.</span>

<span class=sd>        Args:</span>
<span class=sd>            instances (Optional[Iterable[CreatedInstance]]): Instances to</span>
<span class=sd>                get task entities. If not provided all instances are used.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Dict[str, Optional[Dict[str, Any]]]: Task entity by instance id.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=n>instances</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>instances</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_instances_by_id</span><span class=o>.</span><span class=n>values</span><span class=p>()</span>
        <span class=n>instances</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>instances</span><span class=p>)</span>

        <span class=n>output</span> <span class=o>=</span> <span class=p>{</span>
            <span class=n>instance</span><span class=o>.</span><span class=n>id</span><span class=p>:</span> <span class=kc>None</span>
            <span class=k>for</span> <span class=n>instance</span> <span class=ow>in</span> <span class=n>instances</span>
        <span class=p>}</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>instances</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>output</span>

        <span class=n>filtered_instances</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=n>task_names_by_folder_path</span> <span class=o>=</span> <span class=n>collections</span><span class=o>.</span><span class=n>defaultdict</span><span class=p>(</span><span class=nb>set</span><span class=p>)</span>
        <span class=k>for</span> <span class=n>instance</span> <span class=ow>in</span> <span class=n>instances</span><span class=p>:</span>
            <span class=n>folder_path</span> <span class=o>=</span> <span class=n>instance</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;folderPath&quot;</span><span class=p>)</span>
            <span class=n>task_name</span> <span class=o>=</span> <span class=n>instance</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;task&quot;</span><span class=p>)</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=n>folder_path</span> <span class=ow>or</span> <span class=ow>not</span> <span class=n>task_name</span><span class=p>:</span>
                <span class=k>continue</span>
            <span class=n>filtered_instances</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>instance</span><span class=p>)</span>
            <span class=n>task_names_by_folder_path</span><span class=p>[</span><span class=n>folder_path</span><span class=p>]</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>task_name</span><span class=p>)</span>

        <span class=n>task_entities_by_folder_path</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_task_entities</span><span class=p>(</span>
            <span class=n>task_names_by_folder_path</span>
        <span class=p>)</span>
        <span class=k>for</span> <span class=n>instance</span> <span class=ow>in</span> <span class=n>filtered_instances</span><span class=p>:</span>
            <span class=n>folder_path</span> <span class=o>=</span> <span class=n>instance</span><span class=p>[</span><span class=s2>&quot;folderPath&quot;</span><span class=p>]</span>
            <span class=n>task_name</span> <span class=o>=</span> <span class=n>instance</span><span class=p>[</span><span class=s2>&quot;task&quot;</span><span class=p>]</span>
            <span class=n>output</span><span class=p>[</span><span class=n>instance</span><span class=o>.</span><span class=n>id</span><span class=p>]</span> <span class=o>=</span> <span class=p>(</span>
                <span class=n>task_entities_by_folder_path</span><span class=p>[</span><span class=n>folder_path</span><span class=p>][</span><span class=n>task_name</span><span class=p>]</span>
            <span class=p>)</span>

        <span class=k>return</span> <span class=n>output</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_instances_context_info</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span> <span class=n>instances</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Iterable</span><span class=p>[</span><span class=s2>&quot;CreatedInstance&quot;</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>InstanceContextInfo</span><span class=p>]:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Validate &#39;folder&#39; and &#39;task&#39; instance context.</span>

<span class=sd>        Args:</span>
<span class=sd>            instances (Optional[Iterable[CreatedInstance]]): Instances to</span>
<span class=sd>                validate. If not provided all instances are validated.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Dict[str, InstanceContextInfo]: Validation results by instance id.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=c1># Use all instances from context if &#39;instances&#39; are not passed</span>
        <span class=k>if</span> <span class=n>instances</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>instances</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_instances_by_id</span><span class=o>.</span><span class=n>values</span><span class=p>()</span>
        <span class=n>instances</span> <span class=o>=</span> <span class=nb>tuple</span><span class=p>(</span><span class=n>instances</span><span class=p>)</span>
        <span class=n>info_by_instance_id</span> <span class=o>=</span> <span class=p>{</span>
            <span class=n>instance</span><span class=o>.</span><span class=n>id</span><span class=p>:</span> <span class=n>InstanceContextInfo</span><span class=p>(</span>
                <span class=n>instance</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;folderPath&quot;</span><span class=p>),</span>
                <span class=n>instance</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;task&quot;</span><span class=p>),</span>
                <span class=kc>False</span><span class=p>,</span>
                <span class=kc>False</span><span class=p>,</span>
            <span class=p>)</span>
            <span class=k>for</span> <span class=n>instance</span> <span class=ow>in</span> <span class=n>instances</span>
        <span class=p>}</span>

        <span class=c1># Skip if instances are empty</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>info_by_instance_id</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>info_by_instance_id</span>

        <span class=n>project_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>project_name</span>

        <span class=n>to_validate</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=n>task_names_by_folder_path</span> <span class=o>=</span> <span class=n>collections</span><span class=o>.</span><span class=n>defaultdict</span><span class=p>(</span><span class=nb>set</span><span class=p>)</span>
        <span class=k>for</span> <span class=n>instance</span> <span class=ow>in</span> <span class=n>instances</span><span class=p>:</span>
            <span class=n>context_info</span> <span class=o>=</span> <span class=n>info_by_instance_id</span><span class=p>[</span><span class=n>instance</span><span class=o>.</span><span class=n>id</span><span class=p>]</span>
            <span class=k>if</span> <span class=n>instance</span><span class=o>.</span><span class=n>has_promised_context</span><span class=p>:</span>
                <span class=n>context_info</span><span class=o>.</span><span class=n>folder_is_valid</span> <span class=o>=</span> <span class=kc>True</span>
                <span class=n>context_info</span><span class=o>.</span><span class=n>task_is_valid</span> <span class=o>=</span> <span class=kc>True</span>
                <span class=c1># NOTE missing task type</span>
                <span class=k>continue</span>
            <span class=c1># TODO allow context promise</span>
            <span class=n>folder_path</span> <span class=o>=</span> <span class=n>context_info</span><span class=o>.</span><span class=n>folder_path</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=n>folder_path</span><span class=p>:</span>
                <span class=k>continue</span>

            <span class=k>if</span> <span class=n>folder_path</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_folder_entities_by_path</span><span class=p>:</span>
                <span class=n>folder_entity</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_folder_entities_by_path</span><span class=p>[</span><span class=n>folder_path</span><span class=p>]</span>
                <span class=k>if</span> <span class=n>folder_entity</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
                    <span class=k>continue</span>
                <span class=n>context_info</span><span class=o>.</span><span class=n>folder_is_valid</span> <span class=o>=</span> <span class=kc>True</span>

            <span class=n>task_name</span> <span class=o>=</span> <span class=n>context_info</span><span class=o>.</span><span class=n>task_name</span>
            <span class=k>if</span> <span class=n>task_name</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
                <span class=n>tasks_cache</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_task_names_by_folder_path</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>folder_path</span><span class=p>)</span>
                <span class=k>if</span> <span class=n>tasks_cache</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
                    <span class=n>context_info</span><span class=o>.</span><span class=n>task_is_valid</span> <span class=o>=</span> <span class=n>task_name</span> <span class=ow>in</span> <span class=n>tasks_cache</span>
                    <span class=k>continue</span>

            <span class=n>to_validate</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>instance</span><span class=p>)</span>
            <span class=n>task_names_by_folder_path</span><span class=p>[</span><span class=n>folder_path</span><span class=p>]</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>task_name</span><span class=p>)</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>to_validate</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>info_by_instance_id</span>

        <span class=c1># Backwards compatibility for cases where folder name is set instead</span>
        <span class=c1>#   of folder path</span>
        <span class=n>folder_paths</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
        <span class=n>task_names_by_folder_name</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=n>task_names_by_folder_path_clean</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=k>for</span> <span class=n>folder_path</span><span class=p>,</span> <span class=n>task_names</span> <span class=ow>in</span> <span class=n>task_names_by_folder_path</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=k>if</span> <span class=n>folder_path</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
                <span class=k>continue</span>

            <span class=n>clean_task_names</span> <span class=o>=</span> <span class=p>{</span>
                <span class=n>task_name</span>
                <span class=k>for</span> <span class=n>task_name</span> <span class=ow>in</span> <span class=n>task_names</span>
                <span class=k>if</span> <span class=n>task_name</span>
            <span class=p>}</span>

            <span class=k>if</span> <span class=s2>&quot;/&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>folder_path</span><span class=p>:</span>
                <span class=n>task_names_by_folder_name</span><span class=p>[</span><span class=n>folder_path</span><span class=p>]</span> <span class=o>=</span> <span class=n>clean_task_names</span>
                <span class=k>continue</span>

            <span class=n>folder_paths</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>folder_path</span><span class=p>)</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=n>clean_task_names</span><span class=p>:</span>
                <span class=k>continue</span>

            <span class=n>task_names_by_folder_path_clean</span><span class=p>[</span><span class=n>folder_path</span><span class=p>]</span> <span class=o>=</span> <span class=n>clean_task_names</span>

        <span class=n>folder_paths_by_name</span> <span class=o>=</span> <span class=n>collections</span><span class=o>.</span><span class=n>defaultdict</span><span class=p>(</span><span class=nb>list</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>task_names_by_folder_name</span><span class=p>:</span>
            <span class=k>for</span> <span class=n>folder_entity</span> <span class=ow>in</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_folders</span><span class=p>(</span>
                <span class=n>project_name</span><span class=p>,</span>
                <span class=n>folder_names</span><span class=o>=</span><span class=n>task_names_by_folder_name</span><span class=o>.</span><span class=n>keys</span><span class=p>(),</span>
                <span class=n>fields</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;name&quot;</span><span class=p>,</span> <span class=s2>&quot;path&quot;</span><span class=p>}</span>
            <span class=p>):</span>
                <span class=n>folder_name</span> <span class=o>=</span> <span class=n>folder_entity</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span>
                <span class=n>folder_path</span> <span class=o>=</span> <span class=n>folder_entity</span><span class=p>[</span><span class=s2>&quot;path&quot;</span><span class=p>]</span>
                <span class=n>folder_paths_by_name</span><span class=p>[</span><span class=n>folder_name</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>folder_path</span><span class=p>)</span>

        <span class=n>folder_path_by_name</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=k>for</span> <span class=n>folder_name</span><span class=p>,</span> <span class=n>paths</span> <span class=ow>in</span> <span class=n>folder_paths_by_name</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>paths</span><span class=p>)</span> <span class=o>!=</span> <span class=mi>1</span><span class=p>:</span>
                <span class=k>continue</span>
            <span class=n>path</span> <span class=o>=</span> <span class=n>paths</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
            <span class=n>folder_path_by_name</span><span class=p>[</span><span class=n>folder_name</span><span class=p>]</span> <span class=o>=</span> <span class=n>path</span>
            <span class=n>folder_paths</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>
            <span class=n>clean_task_names</span> <span class=o>=</span> <span class=n>task_names_by_folder_name</span><span class=p>[</span><span class=n>folder_name</span><span class=p>]</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=n>clean_task_names</span><span class=p>:</span>
                <span class=k>continue</span>
            <span class=n>folder_task_names</span> <span class=o>=</span> <span class=n>task_names_by_folder_path_clean</span><span class=o>.</span><span class=n>setdefault</span><span class=p>(</span>
                <span class=n>path</span><span class=p>,</span> <span class=nb>set</span><span class=p>()</span>
            <span class=p>)</span>
            <span class=n>folder_task_names</span> <span class=o>|=</span> <span class=n>clean_task_names</span>

        <span class=n>folder_entities_by_path</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_folder_entities</span><span class=p>(</span><span class=n>folder_paths</span><span class=p>)</span>
        <span class=n>task_entities_by_folder_path</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_task_entities</span><span class=p>(</span>
            <span class=n>task_names_by_folder_path_clean</span>
        <span class=p>)</span>

        <span class=k>for</span> <span class=n>instance</span> <span class=ow>in</span> <span class=n>to_validate</span><span class=p>:</span>
            <span class=n>folder_path</span> <span class=o>=</span> <span class=n>instance</span><span class=p>[</span><span class=s2>&quot;folderPath&quot;</span><span class=p>]</span>
            <span class=n>task_name</span> <span class=o>=</span> <span class=n>instance</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;task&quot;</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>folder_path</span> <span class=ow>and</span> <span class=s2>&quot;/&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>folder_path</span><span class=p>:</span>
                <span class=n>new_folder_path</span> <span class=o>=</span> <span class=n>folder_path_by_name</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>folder_path</span><span class=p>)</span>
                <span class=k>if</span> <span class=n>new_folder_path</span><span class=p>:</span>
                    <span class=n>folder_path</span> <span class=o>=</span> <span class=n>new_folder_path</span>
                    <span class=n>instance</span><span class=p>[</span><span class=s2>&quot;folderPath&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>new_folder_path</span>

            <span class=n>folder_entity</span> <span class=o>=</span> <span class=n>folder_entities_by_path</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>folder_path</span><span class=p>)</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=n>folder_entity</span><span class=p>:</span>
                <span class=k>continue</span>
            <span class=n>context_info</span> <span class=o>=</span> <span class=n>info_by_instance_id</span><span class=p>[</span><span class=n>instance</span><span class=o>.</span><span class=n>id</span><span class=p>]</span>
            <span class=n>context_info</span><span class=o>.</span><span class=n>folder_is_valid</span> <span class=o>=</span> <span class=kc>True</span>

            <span class=k>if</span> <span class=p>(</span>
                <span class=ow>not</span> <span class=n>task_name</span>
                <span class=ow>or</span> <span class=n>task_name</span> <span class=ow>in</span> <span class=n>task_entities_by_folder_path</span><span class=p>[</span><span class=n>folder_path</span><span class=p>]</span>
            <span class=p>):</span>
                <span class=n>context_info</span><span class=o>.</span><span class=n>task_is_valid</span> <span class=o>=</span> <span class=kc>True</span>
        <span class=k>return</span> <span class=n>info_by_instance_id</span>

    <span class=k>def</span><span class=w> </span><span class=nf>save_changes</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Save changes. Update all changed values.&quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>host_is_valid</span><span class=p>:</span>
            <span class=n>missing_methods</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_host_misssing_methods</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=p>)</span>
            <span class=k>raise</span> <span class=n>HostMissRequiredMethod</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=p>,</span> <span class=n>missing_methods</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_save_context_changes</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_save_instance_changes</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_save_context_changes</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Save global context values.&quot;&quot;&quot;</span>
        <span class=n>changes</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>context_data_changes</span><span class=p>()</span>
        <span class=k>if</span> <span class=n>changes</span><span class=p>:</span>
            <span class=n>data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>context_data_to_store</span><span class=p>()</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=o>.</span><span class=n>update_context_data</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>changes</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_save_instance_changes</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Save instance specific values.&quot;&quot;&quot;</span>
        <span class=n>instances_by_identifier</span> <span class=o>=</span> <span class=n>collections</span><span class=o>.</span><span class=n>defaultdict</span><span class=p>(</span><span class=nb>list</span><span class=p>)</span>
        <span class=k>for</span> <span class=n>instance</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_instances_by_id</span><span class=o>.</span><span class=n>values</span><span class=p>():</span>
            <span class=n>instance_changes</span> <span class=o>=</span> <span class=n>instance</span><span class=o>.</span><span class=n>changes</span><span class=p>()</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=n>instance_changes</span><span class=p>:</span>
                <span class=k>continue</span>

            <span class=n>identifier</span> <span class=o>=</span> <span class=n>instance</span><span class=o>.</span><span class=n>creator_identifier</span>
            <span class=n>instances_by_identifier</span><span class=p>[</span><span class=n>identifier</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span>
                <span class=n>UpdateData</span><span class=p>(</span><span class=n>instance</span><span class=p>,</span> <span class=n>instance_changes</span><span class=p>)</span>
            <span class=p>)</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>instances_by_identifier</span><span class=p>:</span>
            <span class=k>return</span>

        <span class=n>error_message</span> <span class=o>=</span> <span class=s2>&quot;Instances update of creator </span><span class=se>\&quot;</span><span class=si>{}</span><span class=se>\&quot;</span><span class=s2> failed. </span><span class=si>{}</span><span class=s2>&quot;</span>
        <span class=n>failed_info</span> <span class=o>=</span> <span class=p>[]</span>

        <span class=k>for</span> <span class=n>creator</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_sorted_creators</span><span class=p>(</span>
            <span class=n>instances_by_identifier</span><span class=o>.</span><span class=n>keys</span><span class=p>()</span>
        <span class=p>):</span>
            <span class=n>identifier</span> <span class=o>=</span> <span class=n>creator</span><span class=o>.</span><span class=n>identifier</span>
            <span class=n>update_list</span> <span class=o>=</span> <span class=n>instances_by_identifier</span><span class=p>[</span><span class=n>identifier</span><span class=p>]</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=n>update_list</span><span class=p>:</span>
                <span class=k>continue</span>

            <span class=n>label</span> <span class=o>=</span> <span class=n>creator</span><span class=o>.</span><span class=n>label</span>
            <span class=n>failed</span> <span class=o>=</span> <span class=kc>False</span>
            <span class=n>add_traceback</span> <span class=o>=</span> <span class=kc>False</span>
            <span class=n>exc_info</span> <span class=o>=</span> <span class=kc>None</span>
            <span class=k>try</span><span class=p>:</span>
                <span class=n>creator</span><span class=o>.</span><span class=n>update_instances</span><span class=p>(</span><span class=n>update_list</span><span class=p>)</span>

            <span class=k>except</span> <span class=n>CreatorError</span><span class=p>:</span>
                <span class=n>failed</span> <span class=o>=</span> <span class=kc>True</span>
                <span class=n>exc_info</span> <span class=o>=</span> <span class=n>sys</span><span class=o>.</span><span class=n>exc_info</span><span class=p>()</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=n>error_message</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>identifier</span><span class=p>,</span> <span class=n>exc_info</span><span class=p>[</span><span class=mi>1</span><span class=p>]))</span>

            <span class=k>except</span><span class=p>:</span>  <span class=c1># noqa: E722</span>
                <span class=n>failed</span> <span class=o>=</span> <span class=kc>True</span>
                <span class=n>add_traceback</span> <span class=o>=</span> <span class=kc>True</span>
                <span class=n>exc_info</span> <span class=o>=</span> <span class=n>sys</span><span class=o>.</span><span class=n>exc_info</span><span class=p>()</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
                    <span class=n>error_message</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>identifier</span><span class=p>,</span> <span class=s2>&quot;&quot;</span><span class=p>),</span> <span class=n>exc_info</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>

            <span class=k>if</span> <span class=n>failed</span><span class=p>:</span>
                <span class=n>failed_info</span><span class=o>.</span><span class=n>append</span><span class=p>(</span>
                    <span class=n>prepare_failed_creator_operation_info</span><span class=p>(</span>
                        <span class=n>identifier</span><span class=p>,</span> <span class=n>label</span><span class=p>,</span> <span class=n>exc_info</span><span class=p>,</span> <span class=n>add_traceback</span>
                    <span class=p>)</span>
                <span class=p>)</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=k>for</span> <span class=n>update_data</span> <span class=ow>in</span> <span class=n>update_list</span><span class=p>:</span>
                    <span class=n>instance</span> <span class=o>=</span> <span class=n>update_data</span><span class=o>.</span><span class=n>instance</span>
                    <span class=n>instance</span><span class=o>.</span><span class=n>mark_as_stored</span><span class=p>()</span>

        <span class=k>if</span> <span class=n>failed_info</span><span class=p>:</span>
            <span class=k>raise</span> <span class=n>CreatorsSaveFailed</span><span class=p>(</span><span class=n>failed_info</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>remove_instances</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instances</span><span class=p>,</span> <span class=n>sender</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Remove instances from context.</span>

<span class=sd>        All instances that don&#39;t have creator identifier leading to existing</span>
<span class=sd>            creator are just removed from context.</span>

<span class=sd>        Args:</span>
<span class=sd>            instances (List[CreatedInstance]): Instances that should be</span>
<span class=sd>                removed. Remove logic is done using creator, which may require</span>
<span class=sd>                to do other cleanup than just remove instance from context.</span>
<span class=sd>            sender (Optional[str]): Sender of the event.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>instances_by_identifier</span> <span class=o>=</span> <span class=n>collections</span><span class=o>.</span><span class=n>defaultdict</span><span class=p>(</span><span class=nb>list</span><span class=p>)</span>
        <span class=k>for</span> <span class=n>instance</span> <span class=ow>in</span> <span class=n>instances</span><span class=p>:</span>
            <span class=n>identifier</span> <span class=o>=</span> <span class=n>instance</span><span class=o>.</span><span class=n>creator_identifier</span>
            <span class=n>instances_by_identifier</span><span class=p>[</span><span class=n>identifier</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>instance</span><span class=p>)</span>

        <span class=c1># Just remove instances from context if creator is not available</span>
        <span class=n>missing_creators</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span><span class=n>instances_by_identifier</span><span class=p>)</span> <span class=o>-</span> <span class=nb>set</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>creators</span><span class=p>)</span>
        <span class=n>instances</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>for</span> <span class=n>identifier</span> <span class=ow>in</span> <span class=n>missing_creators</span><span class=p>:</span>
            <span class=n>instances</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span>
                <span class=n>instance</span>
                <span class=k>for</span> <span class=n>instance</span> <span class=ow>in</span> <span class=n>instances_by_identifier</span><span class=p>[</span><span class=n>identifier</span><span class=p>]</span>
            <span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_remove_instances</span><span class=p>(</span><span class=n>instances</span><span class=p>,</span> <span class=n>sender</span><span class=p>)</span>

        <span class=n>error_message</span> <span class=o>=</span> <span class=s2>&quot;Instances removement of creator </span><span class=se>\&quot;</span><span class=si>{}</span><span class=se>\&quot;</span><span class=s2> failed. </span><span class=si>{}</span><span class=s2>&quot;</span>
        <span class=n>failed_info</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=c1># Remove instances by creator plugin order</span>
        <span class=k>for</span> <span class=n>creator</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_sorted_creators</span><span class=p>(</span>
            <span class=n>instances_by_identifier</span><span class=o>.</span><span class=n>keys</span><span class=p>()</span>
        <span class=p>):</span>
            <span class=n>identifier</span> <span class=o>=</span> <span class=n>creator</span><span class=o>.</span><span class=n>identifier</span>
            <span class=n>creator_instances</span> <span class=o>=</span> <span class=n>instances_by_identifier</span><span class=p>[</span><span class=n>identifier</span><span class=p>]</span>

            <span class=n>label</span> <span class=o>=</span> <span class=n>creator</span><span class=o>.</span><span class=n>label</span>
            <span class=n>failed</span> <span class=o>=</span> <span class=kc>False</span>
            <span class=n>add_traceback</span> <span class=o>=</span> <span class=kc>False</span>
            <span class=n>exc_info</span> <span class=o>=</span> <span class=kc>None</span>
            <span class=k>try</span><span class=p>:</span>
                <span class=n>creator</span><span class=o>.</span><span class=n>remove_instances</span><span class=p>(</span><span class=n>creator_instances</span><span class=p>)</span>

            <span class=k>except</span> <span class=n>CreatorError</span><span class=p>:</span>
                <span class=n>failed</span> <span class=o>=</span> <span class=kc>True</span>
                <span class=n>exc_info</span> <span class=o>=</span> <span class=n>sys</span><span class=o>.</span><span class=n>exc_info</span><span class=p>()</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
                    <span class=n>error_message</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>identifier</span><span class=p>,</span> <span class=n>exc_info</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span>
                <span class=p>)</span>

            <span class=k>except</span> <span class=p>(</span><span class=ne>KeyboardInterrupt</span><span class=p>,</span> <span class=ne>SystemExit</span><span class=p>):</span>
                <span class=k>raise</span>

            <span class=k>except</span><span class=p>:</span>  <span class=c1># noqa: E722</span>
                <span class=n>failed</span> <span class=o>=</span> <span class=kc>True</span>
                <span class=n>add_traceback</span> <span class=o>=</span> <span class=kc>True</span>
                <span class=n>exc_info</span> <span class=o>=</span> <span class=n>sys</span><span class=o>.</span><span class=n>exc_info</span><span class=p>()</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
                    <span class=n>error_message</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>identifier</span><span class=p>,</span> <span class=s2>&quot;&quot;</span><span class=p>),</span>
                    <span class=n>exc_info</span><span class=o>=</span><span class=kc>True</span>
                <span class=p>)</span>

            <span class=k>if</span> <span class=n>failed</span><span class=p>:</span>
                <span class=n>failed_info</span><span class=o>.</span><span class=n>append</span><span class=p>(</span>
                    <span class=n>prepare_failed_creator_operation_info</span><span class=p>(</span>
                        <span class=n>identifier</span><span class=p>,</span> <span class=n>label</span><span class=p>,</span> <span class=n>exc_info</span><span class=p>,</span> <span class=n>add_traceback</span>
                    <span class=p>)</span>
                <span class=p>)</span>

        <span class=k>if</span> <span class=n>failed_info</span><span class=p>:</span>
            <span class=k>raise</span> <span class=n>CreatorsRemoveFailed</span><span class=p>(</span><span class=n>failed_info</span><span class=p>)</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>collection_shared_data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Access to shared data that can be used during creator&#39;s collection.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Dict[str, Any]: Shared data.</span>

<span class=sd>        Raises:</span>
<span class=sd>            UnavailableSharedData: When called out of collection phase.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_collection_shared_data</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>raise</span> <span class=n>UnavailableSharedData</span><span class=p>(</span>
                <span class=s2>&quot;Accessed Collection shared data out of collection phase&quot;</span>
            <span class=p>)</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_collection_shared_data</span>

    <span class=k>def</span><span class=w> </span><span class=nf>run_convertor</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>convertor_identifier</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Run convertor plugin by identifier.</span>

<span class=sd>        Conversion is skipped if convertor is not available.</span>

<span class=sd>        Args:</span>
<span class=sd>            convertor_identifier (str): Identifier of convertor.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>convertor</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>convertors_plugins</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>convertor_identifier</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>convertor</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>convertor</span><span class=o>.</span><span class=n>convert</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>run_convertors</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>convertor_identifiers</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Run convertor plugins by identifiers.</span>

<span class=sd>        Conversion is skipped if convertor is not available. It is recommended</span>
<span class=sd>        to trigger reset after conversion to reload instances.</span>

<span class=sd>        Args:</span>
<span class=sd>            convertor_identifiers (Iterator[str]): Identifiers of convertors</span>
<span class=sd>                to run.</span>

<span class=sd>        Raises:</span>
<span class=sd>            ConvertorsConversionFailed: When one or more convertors fails.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>failed_info</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>for</span> <span class=n>convertor_identifier</span> <span class=ow>in</span> <span class=n>convertor_identifiers</span><span class=p>:</span>
            <span class=k>try</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>run_convertor</span><span class=p>(</span><span class=n>convertor_identifier</span><span class=p>)</span>

            <span class=k>except</span><span class=p>:</span>  <span class=c1># noqa: E722</span>
                <span class=n>failed_info</span><span class=o>.</span><span class=n>append</span><span class=p>(</span>
                    <span class=n>prepare_failed_convertor_operation_info</span><span class=p>(</span>
                        <span class=n>convertor_identifier</span><span class=p>,</span> <span class=n>sys</span><span class=o>.</span><span class=n>exc_info</span><span class=p>()</span>
                    <span class=p>)</span>
                <span class=p>)</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
                    <span class=s2>&quot;Failed to convert instances of convertor </span><span class=se>\&quot;</span><span class=si>{}</span><span class=se>\&quot;</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                        <span class=n>convertor_identifier</span>
                    <span class=p>),</span>
                    <span class=n>exc_info</span><span class=o>=</span><span class=kc>True</span>
                <span class=p>)</span>

        <span class=k>if</span> <span class=n>failed_info</span><span class=p>:</span>
            <span class=k>raise</span> <span class=n>ConvertorsConversionFailed</span><span class=p>(</span><span class=n>failed_info</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_register_event_callback</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>topic</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>callback</span><span class=p>:</span> <span class=n>Callable</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_event_hub</span><span class=o>.</span><span class=n>add_callback</span><span class=p>(</span><span class=n>topic</span><span class=p>,</span> <span class=n>callback</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_emit_event</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>topic</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
        <span class=n>data</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
        <span class=n>sender</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
    <span class=p>):</span>
        <span class=k>if</span> <span class=n>data</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>data</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=n>data</span><span class=o>.</span><span class=n>setdefault</span><span class=p>(</span><span class=s2>&quot;create_context&quot;</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_event_hub</span><span class=o>.</span><span class=n>emit</span><span class=p>(</span><span class=n>topic</span><span class=p>,</span> <span class=n>data</span><span class=p>,</span> <span class=n>sender</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_remove_instances</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instances</span><span class=p>,</span> <span class=n>sender</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>bulk_remove_instances</span><span class=p>(</span><span class=n>sender</span><span class=p>)</span> <span class=k>as</span> <span class=n>bulk_info</span><span class=p>:</span>
            <span class=k>for</span> <span class=n>instance</span> <span class=ow>in</span> <span class=n>instances</span><span class=p>:</span>
                <span class=n>obj</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_instances_by_id</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>instance</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
                <span class=k>if</span> <span class=n>obj</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
                    <span class=n>bulk_info</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>obj</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_create_with_unified_error</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span> <span class=n>identifier</span><span class=p>,</span> <span class=n>creator</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span>
    <span class=p>):</span>
        <span class=n>error_message</span> <span class=o>=</span> <span class=s2>&quot;Failed to run Creator with identifier </span><span class=se>\&quot;</span><span class=si>{}</span><span class=se>\&quot;</span><span class=s2>. </span><span class=si>{}</span><span class=s2>&quot;</span>

        <span class=n>label</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=n>add_traceback</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=n>result</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=n>fail_info</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=n>exc_info</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=n>success</span> <span class=o>=</span> <span class=kc>False</span>

        <span class=k>try</span><span class=p>:</span>
            <span class=c1># Try to get creator and his label</span>
            <span class=k>if</span> <span class=n>creator</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
                <span class=n>creator</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_creator_in_create</span><span class=p>(</span><span class=n>identifier</span><span class=p>)</span>
            <span class=n>label</span> <span class=o>=</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>creator</span><span class=p>,</span> <span class=s2>&quot;label&quot;</span><span class=p>,</span> <span class=n>label</span><span class=p>)</span>

            <span class=c1># Run create</span>
            <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>bulk_add_instances</span><span class=p>():</span>
                <span class=n>result</span> <span class=o>=</span> <span class=n>creator</span><span class=o>.</span><span class=n>create</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
            <span class=n>success</span> <span class=o>=</span> <span class=kc>True</span>

        <span class=k>except</span> <span class=n>CreatorError</span><span class=p>:</span>
            <span class=n>exc_info</span> <span class=o>=</span> <span class=n>sys</span><span class=o>.</span><span class=n>exc_info</span><span class=p>()</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=n>error_message</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>identifier</span><span class=p>,</span> <span class=n>exc_info</span><span class=p>[</span><span class=mi>1</span><span class=p>]))</span>

        <span class=k>except</span><span class=p>:</span>  <span class=c1># noqa: E722</span>
            <span class=n>add_traceback</span> <span class=o>=</span> <span class=kc>True</span>
            <span class=n>exc_info</span> <span class=o>=</span> <span class=n>sys</span><span class=o>.</span><span class=n>exc_info</span><span class=p>()</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
                <span class=n>error_message</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>identifier</span><span class=p>,</span> <span class=s2>&quot;&quot;</span><span class=p>),</span>
                <span class=n>exc_info</span><span class=o>=</span><span class=kc>True</span>
            <span class=p>)</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>success</span><span class=p>:</span>
            <span class=n>fail_info</span> <span class=o>=</span> <span class=n>prepare_failed_creator_operation_info</span><span class=p>(</span>
                <span class=n>identifier</span><span class=p>,</span> <span class=n>label</span><span class=p>,</span> <span class=n>exc_info</span><span class=p>,</span> <span class=n>add_traceback</span>
            <span class=p>)</span>
        <span class=k>return</span> <span class=n>result</span><span class=p>,</span> <span class=n>fail_info</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_is_instance_events_ready</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instance_id</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
        <span class=c1># Context is ready</span>
        <span class=k>if</span> <span class=n>instance_id</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>True</span>
        <span class=c1># Instance is not in yet in context</span>
        <span class=k>if</span> <span class=n>instance_id</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_instances_by_id</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>False</span>

        <span class=c1># Instance in &#39;collect&#39; bulk will be ignored</span>
        <span class=k>for</span> <span class=n>instance</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_bulk_info</span><span class=p>[</span><span class=s2>&quot;add&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>get_data</span><span class=p>():</span>
            <span class=k>if</span> <span class=n>instance</span><span class=o>.</span><span class=n>id</span> <span class=o>==</span> <span class=n>instance_id</span><span class=p>:</span>
                <span class=k>return</span> <span class=kc>False</span>
        <span class=k>return</span> <span class=kc>True</span>

    <span class=nd>@contextmanager</span>
    <span class=k>def</span><span class=w> </span><span class=nf>_bulk_context</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>sender</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]):</span>
        <span class=n>bulk_info</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_bulk_info</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
        <span class=n>bulk_info</span><span class=o>.</span><span class=n>set_sender</span><span class=p>(</span><span class=n>sender</span><span class=p>)</span>

        <span class=n>bulk_info</span><span class=o>.</span><span class=n>increase</span><span class=p>()</span>
        <span class=k>if</span> <span class=n>key</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_bulk_order</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_bulk_order</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=k>yield</span> <span class=n>bulk_info</span>
        <span class=k>finally</span><span class=p>:</span>
            <span class=n>bulk_info</span><span class=o>.</span><span class=n>decrease</span><span class=p>()</span>
            <span class=k>if</span> <span class=n>bulk_info</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_bulk_finished</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_bulk_finished</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_bulk_order</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>!=</span> <span class=n>key</span><span class=p>:</span>
            <span class=k>return</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_bulk_order</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_bulk_finish</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>

        <span class=k>while</span> <span class=bp>self</span><span class=o>.</span><span class=n>_bulk_order</span><span class=p>:</span>
            <span class=n>key</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_bulk_order</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_bulk_info</span><span class=p>[</span><span class=n>key</span><span class=p>]:</span>
                <span class=k>break</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_bulk_order</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_bulk_finish</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_bulk_finish</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
        <span class=n>bulk_info</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_bulk_info</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
        <span class=n>sender</span> <span class=o>=</span> <span class=n>bulk_info</span><span class=o>.</span><span class=n>get_sender</span><span class=p>()</span>
        <span class=n>data</span> <span class=o>=</span> <span class=n>bulk_info</span><span class=o>.</span><span class=n>pop_data</span><span class=p>()</span>
        <span class=k>if</span> <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;add&quot;</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_bulk_add_instances_finished</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>sender</span><span class=p>)</span>
        <span class=k>elif</span> <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;remove&quot;</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_bulk_remove_instances_finished</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>sender</span><span class=p>)</span>
        <span class=k>elif</span> <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;change&quot;</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_bulk_values_change_finished</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>sender</span><span class=p>)</span>
        <span class=k>elif</span> <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;pre_create_attrs_change&quot;</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_bulk_pre_create_attrs_change_finished</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>sender</span><span class=p>)</span>
        <span class=k>elif</span> <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;create_attrs_change&quot;</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_bulk_create_attrs_change_finished</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>sender</span><span class=p>)</span>
        <span class=k>elif</span> <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;publish_attrs_change&quot;</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_bulk_publish_attrs_change_finished</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>sender</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_bulk_add_instances_finished</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>instances_to_validate</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=s2>&quot;CreatedInstance&quot;</span><span class=p>],</span>
        <span class=n>sender</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span>
    <span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>instances_to_validate</span><span class=p>:</span>
            <span class=k>return</span>

        <span class=c1># Set publish attributes before bulk callbacks are triggered</span>
        <span class=k>for</span> <span class=n>instance</span> <span class=ow>in</span> <span class=n>instances_to_validate</span><span class=p>:</span>
            <span class=n>publish_attributes</span> <span class=o>=</span> <span class=n>instance</span><span class=o>.</span><span class=n>publish_attributes</span>
            <span class=c1># Prepare publish plugin attributes and set it on instance</span>
            <span class=k>for</span> <span class=n>plugin</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>plugins_with_defs</span><span class=p>:</span>
                <span class=k>try</span><span class=p>:</span>
                    <span class=k>if</span> <span class=n>is_func_signature_supported</span><span class=p>(</span>
                            <span class=n>plugin</span><span class=o>.</span><span class=n>convert_attribute_values</span><span class=p>,</span> <span class=bp>self</span><span class=p>,</span> <span class=n>instance</span>
                    <span class=p>):</span>
                        <span class=n>plugin</span><span class=o>.</span><span class=n>convert_attribute_values</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instance</span><span class=p>)</span>

                    <span class=k>elif</span> <span class=n>plugin</span><span class=o>.</span><span class=n>__instanceEnabled__</span><span class=p>:</span>
                        <span class=n>output</span> <span class=o>=</span> <span class=n>plugin</span><span class=o>.</span><span class=n>convert_attribute_values</span><span class=p>(</span>
                            <span class=n>publish_attributes</span>
                        <span class=p>)</span>
                        <span class=k>if</span> <span class=n>output</span><span class=p>:</span>
                            <span class=n>publish_attributes</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>output</span><span class=p>)</span>

                <span class=k>except</span> <span class=ne>Exception</span><span class=p>:</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>error</span><span class=p>(</span>
                        <span class=s2>&quot;Failed to convert attribute values of&quot;</span>
                        <span class=sa>f</span><span class=s2>&quot; plugin &#39;</span><span class=si>{</span><span class=n>plugin</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2>&#39;&quot;</span><span class=p>,</span>
                        <span class=n>exc_info</span><span class=o>=</span><span class=kc>True</span>
                    <span class=p>)</span>

            <span class=k>for</span> <span class=n>plugin</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>plugins_with_defs</span><span class=p>:</span>
                <span class=n>attr_defs</span> <span class=o>=</span> <span class=kc>None</span>
                <span class=k>try</span><span class=p>:</span>
                    <span class=n>attr_defs</span> <span class=o>=</span> <span class=n>plugin</span><span class=o>.</span><span class=n>get_attr_defs_for_instance</span><span class=p>(</span>
                        <span class=bp>self</span><span class=p>,</span> <span class=n>instance</span>
                    <span class=p>)</span>
                <span class=k>except</span> <span class=ne>Exception</span><span class=p>:</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>error</span><span class=p>(</span>
                        <span class=s2>&quot;Failed to get attribute definitions&quot;</span>
                        <span class=sa>f</span><span class=s2>&quot; from plugin &#39;</span><span class=si>{</span><span class=n>plugin</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2>&#39;.&quot;</span><span class=p>,</span>
                        <span class=n>exc_info</span><span class=o>=</span><span class=kc>True</span>
                    <span class=p>)</span>

                <span class=k>if</span> <span class=ow>not</span> <span class=n>attr_defs</span><span class=p>:</span>
                    <span class=k>continue</span>
                <span class=n>instance</span><span class=o>.</span><span class=n>set_publish_plugin_attr_defs</span><span class=p>(</span>
                    <span class=n>plugin</span><span class=o>.</span><span class=vm>__name__</span><span class=p>,</span> <span class=n>attr_defs</span>
                <span class=p>)</span>

        <span class=c1># Cache folder and task entities for all instances at once</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>get_instances_context_info</span><span class=p>(</span><span class=n>instances_to_validate</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_emit_event</span><span class=p>(</span>
            <span class=n>INSTANCE_ADDED_TOPIC</span><span class=p>,</span>
            <span class=p>{</span>
                <span class=s2>&quot;instances&quot;</span><span class=p>:</span> <span class=n>instances_to_validate</span><span class=p>,</span>
            <span class=p>},</span>
            <span class=n>sender</span><span class=p>,</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_bulk_remove_instances_finished</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>instances_to_remove</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=s2>&quot;CreatedInstance&quot;</span><span class=p>],</span>
        <span class=n>sender</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span>
    <span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>instances_to_remove</span><span class=p>:</span>
            <span class=k>return</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_emit_event</span><span class=p>(</span>
            <span class=n>INSTANCE_REMOVED_TOPIC</span><span class=p>,</span>
            <span class=p>{</span>
                <span class=s2>&quot;instances&quot;</span><span class=p>:</span> <span class=n>instances_to_remove</span><span class=p>,</span>
            <span class=p>},</span>
            <span class=n>sender</span><span class=p>,</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_bulk_values_change_finished</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>changes</span><span class=p>:</span> <span class=n>Tuple</span><span class=p>[</span><span class=n>Union</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=kc>None</span><span class=p>],</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]],</span>
        <span class=n>sender</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>],</span>
    <span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>changes</span><span class=p>:</span>
            <span class=k>return</span>
        <span class=n>item_data_by_id</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=k>for</span> <span class=n>item_id</span><span class=p>,</span> <span class=n>item_changes</span> <span class=ow>in</span> <span class=n>changes</span><span class=p>:</span>
            <span class=n>item_values</span> <span class=o>=</span> <span class=n>item_data_by_id</span><span class=o>.</span><span class=n>setdefault</span><span class=p>(</span><span class=n>item_id</span><span class=p>,</span> <span class=p>{})</span>
            <span class=k>if</span> <span class=s2>&quot;creator_attributes&quot;</span> <span class=ow>in</span> <span class=n>item_changes</span><span class=p>:</span>
                <span class=n>current_value</span> <span class=o>=</span> <span class=n>item_values</span><span class=o>.</span><span class=n>setdefault</span><span class=p>(</span>
                    <span class=s2>&quot;creator_attributes&quot;</span><span class=p>,</span> <span class=p>{}</span>
                <span class=p>)</span>
                <span class=n>current_value</span><span class=o>.</span><span class=n>update</span><span class=p>(</span>
                    <span class=n>item_changes</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>)</span>
                <span class=p>)</span>

            <span class=k>if</span> <span class=s2>&quot;publish_attributes&quot;</span> <span class=ow>in</span> <span class=n>item_changes</span><span class=p>:</span>
                <span class=n>current_publish</span> <span class=o>=</span> <span class=n>item_values</span><span class=o>.</span><span class=n>setdefault</span><span class=p>(</span>
                    <span class=s2>&quot;publish_attributes&quot;</span><span class=p>,</span> <span class=p>{}</span>
                <span class=p>)</span>
                <span class=k>for</span> <span class=n>plugin_name</span><span class=p>,</span> <span class=n>plugin_value</span> <span class=ow>in</span> <span class=n>item_changes</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span>
                    <span class=s2>&quot;publish_attributes&quot;</span>
                <span class=p>)</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
                    <span class=n>plugin_changes</span> <span class=o>=</span> <span class=n>current_publish</span><span class=o>.</span><span class=n>setdefault</span><span class=p>(</span>
                        <span class=n>plugin_name</span><span class=p>,</span> <span class=p>{}</span>
                    <span class=p>)</span>
                    <span class=n>plugin_changes</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>plugin_value</span><span class=p>)</span>

            <span class=n>item_values</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>item_changes</span><span class=p>)</span>

        <span class=n>event_changes</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>for</span> <span class=n>item_id</span><span class=p>,</span> <span class=n>item_changes</span> <span class=ow>in</span> <span class=n>item_data_by_id</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=n>instance</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_instance_by_id</span><span class=p>(</span><span class=n>item_id</span><span class=p>)</span>
            <span class=n>event_changes</span><span class=o>.</span><span class=n>append</span><span class=p>({</span>
                <span class=s2>&quot;instance&quot;</span><span class=p>:</span> <span class=n>instance</span><span class=p>,</span>
                <span class=s2>&quot;changes&quot;</span><span class=p>:</span> <span class=n>item_changes</span><span class=p>,</span>
            <span class=p>})</span>

        <span class=n>event_data</span> <span class=o>=</span> <span class=p>{</span>
            <span class=s2>&quot;changes&quot;</span><span class=p>:</span> <span class=n>event_changes</span><span class=p>,</span>
        <span class=p>}</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_emit_event</span><span class=p>(</span>
            <span class=n>VALUE_CHANGED_TOPIC</span><span class=p>,</span>
            <span class=n>event_data</span><span class=p>,</span>
            <span class=n>sender</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_bulk_pre_create_attrs_change_finished</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span> <span class=n>identifiers</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>],</span> <span class=n>sender</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span>
    <span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>identifiers</span><span class=p>:</span>
            <span class=k>return</span>
        <span class=n>identifiers</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=nb>set</span><span class=p>(</span><span class=n>identifiers</span><span class=p>))</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_emit_event</span><span class=p>(</span>
            <span class=n>PRE_CREATE_ATTR_DEFS_CHANGED_TOPIC</span><span class=p>,</span>
            <span class=p>{</span>
                <span class=s2>&quot;identifiers&quot;</span><span class=p>:</span> <span class=n>identifiers</span><span class=p>,</span>
            <span class=p>},</span>
            <span class=n>sender</span><span class=p>,</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_bulk_create_attrs_change_finished</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span> <span class=n>instance_ids</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>],</span> <span class=n>sender</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span>
    <span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>instance_ids</span><span class=p>:</span>
            <span class=k>return</span>

        <span class=n>instances</span> <span class=o>=</span> <span class=p>[</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>get_instance_by_id</span><span class=p>(</span><span class=n>instance_id</span><span class=p>)</span>
            <span class=k>for</span> <span class=n>instance_id</span> <span class=ow>in</span> <span class=nb>set</span><span class=p>(</span><span class=n>instance_ids</span><span class=p>)</span>
        <span class=p>]</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_emit_event</span><span class=p>(</span>
            <span class=n>CREATE_ATTR_DEFS_CHANGED_TOPIC</span><span class=p>,</span>
            <span class=p>{</span>
                <span class=s2>&quot;instances&quot;</span><span class=p>:</span> <span class=n>instances</span><span class=p>,</span>
            <span class=p>},</span>
            <span class=n>sender</span><span class=p>,</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_bulk_publish_attrs_change_finished</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>attr_info</span><span class=p>:</span> <span class=n>Tuple</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Union</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=kc>None</span><span class=p>]],</span>
        <span class=n>sender</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>],</span>
    <span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>attr_info</span><span class=p>:</span>
            <span class=k>return</span>

        <span class=n>instance_changes</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=k>for</span> <span class=n>instance_id</span><span class=p>,</span> <span class=n>plugin_name</span> <span class=ow>in</span> <span class=n>attr_info</span><span class=p>:</span>
            <span class=n>instance_data</span> <span class=o>=</span> <span class=n>instance_changes</span><span class=o>.</span><span class=n>setdefault</span><span class=p>(</span>
                <span class=n>instance_id</span><span class=p>,</span>
                <span class=p>{</span>
                    <span class=s2>&quot;instance&quot;</span><span class=p>:</span> <span class=kc>None</span><span class=p>,</span>
                    <span class=s2>&quot;plugin_names&quot;</span><span class=p>:</span> <span class=nb>set</span><span class=p>(),</span>
                <span class=p>}</span>
            <span class=p>)</span>
            <span class=n>instance</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_instance_by_id</span><span class=p>(</span><span class=n>instance_id</span><span class=p>)</span>
            <span class=n>instance_data</span><span class=p>[</span><span class=s2>&quot;instance&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>instance</span>
            <span class=n>instance_data</span><span class=p>[</span><span class=s2>&quot;plugin_names&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>plugin_name</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_emit_event</span><span class=p>(</span>
            <span class=n>PUBLISH_ATTR_DEFS_CHANGED_TOPIC</span><span class=p>,</span>
            <span class=p>{</span><span class=s2>&quot;instance_changes&quot;</span><span class=p>:</span> <span class=n>instance_changes</span><span class=p>},</span>
            <span class=n>sender</span><span class=p>,</span>
        <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.create.CreateContext.collection_shared_data class="doc doc-heading"> <code class="highlight language-python"><span class=n>collection_shared_data</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Access to shared data that can be used during creator's collection.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Dict[str, Any]: Shared data.</p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="UnavailableSharedData (client.ayon_core.pipeline.create.exceptions.UnavailableSharedData)" href=exceptions.html#client.ayon_core.pipeline.create.exceptions.UnavailableSharedData>UnavailableSharedData</a></code> </td> <td> <div class=doc-md-description> <p>When called out of collection phase.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.create.CreateContext.context_has_changed class="doc doc-heading"> <code class="highlight language-python"><span class=n>context_has_changed</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Host context has changed.</p> <p>As context is used project, folder, task name and workfile path if host does support workfiles.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>bool</code></td> <td> </td> <td> <div class=doc-md-description> <p>Context changed.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.create.CreateContext.host_is_valid class="doc doc-heading"> <code class="highlight language-python"><span class=n>host_is_valid</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Is host valid for creation.</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.create.CreateContext.log class="doc doc-heading"> <code class="highlight language-python"><span class=n>log</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Dynamic access to logger.</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.create.CreateContext.publish_attributes class="doc doc-heading"> <code class="highlight language-python"><span class=n>publish_attributes</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Access to global publish attributes.</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.create.CreateContext.sorted_autocreators class="doc doc-heading"> <code class="highlight language-python"><span class=n>sorted_autocreators</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Sorted auto-creators by 'order' attribute.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>List[AutoCreator]: Sorted plugins by 'order' value.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.create.CreateContext.sorted_creators class="doc doc-heading"> <code class="highlight language-python"><span class=n>sorted_creators</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Sorted creators by 'order' attribute.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>List[BaseCreator]: Sorted creator plugins by 'order' value.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.add_create_attr_defs_change_callback class="doc doc-heading"> <code class="highlight language-python"><span class=n>add_create_attr_defs_change_callback</span><span class=p>(</span><span class=n>callback</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Register callback to listen create attribute changes.</p> <p>Create plugin changed attribute definitions of instance.</p> <p>Data structure of event::</p> <pre><code>```python
{
    "instances": [CreatedInstance, ...],
    "create_context": CreateContext
}
```
</code></pre> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>callback</code> </td> <td> <code><span title=typing.Callable>Callable</span></code> </td> <td> <div class=doc-md-description> <p>Callback function that will be called when create attributes changed.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>EventCallback</code></td> <td> </td> <td> <div class=doc-md-description> <p>Created callback object which can be used to stop listening.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>964</span>
<span class=normal>965</span>
<span class=normal>966</span>
<span class=normal>967</span>
<span class=normal>968</span>
<span class=normal>969</span>
<span class=normal>970</span>
<span class=normal>971</span>
<span class=normal>972</span>
<span class=normal>973</span>
<span class=normal>974</span>
<span class=normal>975</span>
<span class=normal>976</span>
<span class=normal>977</span>
<span class=normal>978</span>
<span class=normal>979</span>
<span class=normal>980</span>
<span class=normal>981</span>
<span class=normal>982</span>
<span class=normal>983</span>
<span class=normal>984</span>
<span class=normal>985</span>
<span class=normal>986</span>
<span class=normal>987</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>add_create_attr_defs_change_callback</span> <span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>callback</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Register callback to listen create attribute changes.</span>

<span class=sd>    Create plugin changed attribute definitions of instance.</span>

<span class=sd>    Data structure of event::</span>

<span class=sd>        ```python</span>
<span class=sd>        {</span>
<span class=sd>            &quot;instances&quot;: [CreatedInstance, ...],</span>
<span class=sd>            &quot;create_context&quot;: CreateContext</span>
<span class=sd>        }</span>
<span class=sd>        ```</span>

<span class=sd>    Args:</span>
<span class=sd>        callback (Callable): Callback function that will be called when</span>
<span class=sd>            create attributes changed.</span>

<span class=sd>    Returns:</span>
<span class=sd>        EventCallback: Created callback object which can be used to</span>
<span class=sd>            stop listening.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_event_hub</span><span class=o>.</span><span class=n>add_callback</span><span class=p>(</span><span class=n>CREATE_ATTR_DEFS_CHANGED_TOPIC</span><span class=p>,</span> <span class=n>callback</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.add_instances_added_callback class="doc doc-heading"> <code class="highlight language-python"><span class=n>add_instances_added_callback</span><span class=p>(</span><span class=n>callback</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Register callback for added instances.</p> <p>Event is triggered when instances are already available in context and have set create/publish attribute definitions.</p> <p>Data structure of event::</p> <pre><code>```python
{
    "instances": [CreatedInstance, ...],
    "create_context": CreateContext
}
```
</code></pre> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>callback</code> </td> <td> <code><span title=typing.Callable>Callable</span></code> </td> <td> <div class=doc-md-description> <p>Callback function that will be called when instances are added to context.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>EventCallback</code></td> <td> </td> <td> <div class=doc-md-description> <p>Created callback object which can be used to stop listening.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>849</span>
<span class=normal>850</span>
<span class=normal>851</span>
<span class=normal>852</span>
<span class=normal>853</span>
<span class=normal>854</span>
<span class=normal>855</span>
<span class=normal>856</span>
<span class=normal>857</span>
<span class=normal>858</span>
<span class=normal>859</span>
<span class=normal>860</span>
<span class=normal>861</span>
<span class=normal>862</span>
<span class=normal>863</span>
<span class=normal>864</span>
<span class=normal>865</span>
<span class=normal>866</span>
<span class=normal>867</span>
<span class=normal>868</span>
<span class=normal>869</span>
<span class=normal>870</span>
<span class=normal>871</span>
<span class=normal>872</span>
<span class=normal>873</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>add_instances_added_callback</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>callback</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Register callback for added instances.</span>

<span class=sd>    Event is triggered when instances are already available in context</span>
<span class=sd>        and have set create/publish attribute definitions.</span>

<span class=sd>    Data structure of event::</span>

<span class=sd>        ```python</span>
<span class=sd>        {</span>
<span class=sd>            &quot;instances&quot;: [CreatedInstance, ...],</span>
<span class=sd>            &quot;create_context&quot;: CreateContext</span>
<span class=sd>        }</span>
<span class=sd>        ```</span>

<span class=sd>    Args:</span>
<span class=sd>        callback (Callable): Callback function that will be called when</span>
<span class=sd>            instances are added to context.</span>

<span class=sd>    Returns:</span>
<span class=sd>        EventCallback: Created callback object which can be used to</span>
<span class=sd>            stop listening.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_event_hub</span><span class=o>.</span><span class=n>add_callback</span><span class=p>(</span><span class=n>INSTANCE_ADDED_TOPIC</span><span class=p>,</span> <span class=n>callback</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.add_instances_removed_callback class="doc doc-heading"> <code class="highlight language-python"><span class=n>add_instances_removed_callback</span><span class=p>(</span><span class=n>callback</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Register callback for removed instances.</p> <p>Event is triggered when instances are already removed from context.</p> <p>Data structure of event::</p> <pre><code>```python
{
    "instances": [CreatedInstance, ...],
    "create_context": CreateContext
}
```
</code></pre> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>callback</code> </td> <td> <code><span title=typing.Callable>Callable</span></code> </td> <td> <div class=doc-md-description> <p>Callback function that will be called when instances are removed from context.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>EventCallback</code></td> <td> </td> <td> <div class=doc-md-description> <p>Created callback object which can be used to stop listening.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>875</span>
<span class=normal>876</span>
<span class=normal>877</span>
<span class=normal>878</span>
<span class=normal>879</span>
<span class=normal>880</span>
<span class=normal>881</span>
<span class=normal>882</span>
<span class=normal>883</span>
<span class=normal>884</span>
<span class=normal>885</span>
<span class=normal>886</span>
<span class=normal>887</span>
<span class=normal>888</span>
<span class=normal>889</span>
<span class=normal>890</span>
<span class=normal>891</span>
<span class=normal>892</span>
<span class=normal>893</span>
<span class=normal>894</span>
<span class=normal>895</span>
<span class=normal>896</span>
<span class=normal>897</span>
<span class=normal>898</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>add_instances_removed_callback</span> <span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>callback</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Register callback for removed instances.</span>

<span class=sd>    Event is triggered when instances are already removed from context.</span>

<span class=sd>    Data structure of event::</span>

<span class=sd>        ```python</span>
<span class=sd>        {</span>
<span class=sd>            &quot;instances&quot;: [CreatedInstance, ...],</span>
<span class=sd>            &quot;create_context&quot;: CreateContext</span>
<span class=sd>        }</span>
<span class=sd>        ```</span>

<span class=sd>    Args:</span>
<span class=sd>        callback (Callable): Callback function that will be called when</span>
<span class=sd>            instances are removed from context.</span>

<span class=sd>    Returns:</span>
<span class=sd>        EventCallback: Created callback object which can be used to</span>
<span class=sd>            stop listening.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_event_hub</span><span class=o>.</span><span class=n>add_callback</span><span class=p>(</span><span class=n>INSTANCE_REMOVED_TOPIC</span><span class=p>,</span> <span class=n>callback</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.add_pre_create_attr_defs_change_callback class="doc doc-heading"> <code class="highlight language-python"><span class=n>add_pre_create_attr_defs_change_callback</span><span class=p>(</span><span class=n>callback</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Register callback to listen pre-create attribute changes.</p> <p>Create plugin can trigger refresh of pre-create attributes. Usage of this event is mainly for publisher UI.</p> <p>Data structure of event::</p> <pre><code>```python
{
    "identifiers": ["create_plugin_identifier"],
    "create_context": CreateContext
}
```
</code></pre> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>callback</code> </td> <td> <code><span title=typing.Callable>Callable</span></code> </td> <td> <div class=doc-md-description> <p>Callback function that will be called when pre-create attributes should be refreshed.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>EventCallback</code></td> <td> </td> <td> <div class=doc-md-description> <p>Created callback object which can be used to stop listening.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>936</span>
<span class=normal>937</span>
<span class=normal>938</span>
<span class=normal>939</span>
<span class=normal>940</span>
<span class=normal>941</span>
<span class=normal>942</span>
<span class=normal>943</span>
<span class=normal>944</span>
<span class=normal>945</span>
<span class=normal>946</span>
<span class=normal>947</span>
<span class=normal>948</span>
<span class=normal>949</span>
<span class=normal>950</span>
<span class=normal>951</span>
<span class=normal>952</span>
<span class=normal>953</span>
<span class=normal>954</span>
<span class=normal>955</span>
<span class=normal>956</span>
<span class=normal>957</span>
<span class=normal>958</span>
<span class=normal>959</span>
<span class=normal>960</span>
<span class=normal>961</span>
<span class=normal>962</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>add_pre_create_attr_defs_change_callback</span> <span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>callback</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Register callback to listen pre-create attribute changes.</span>

<span class=sd>    Create plugin can trigger refresh of pre-create attributes. Usage of</span>
<span class=sd>        this event is mainly for publisher UI.</span>

<span class=sd>    Data structure of event::</span>

<span class=sd>        ```python</span>
<span class=sd>        {</span>
<span class=sd>            &quot;identifiers&quot;: [&quot;create_plugin_identifier&quot;],</span>
<span class=sd>            &quot;create_context&quot;: CreateContext</span>
<span class=sd>        }</span>
<span class=sd>        ```</span>

<span class=sd>    Args:</span>
<span class=sd>        callback (Callable): Callback function that will be called when</span>
<span class=sd>            pre-create attributes should be refreshed.</span>

<span class=sd>    Returns:</span>
<span class=sd>        EventCallback: Created callback object which can be used to</span>
<span class=sd>            stop listening.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_event_hub</span><span class=o>.</span><span class=n>add_callback</span><span class=p>(</span>
        <span class=n>PRE_CREATE_ATTR_DEFS_CHANGED_TOPIC</span><span class=p>,</span> <span class=n>callback</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.add_publish_attr_defs_change_callback class="doc doc-heading"> <code class="highlight language-python"><span class=n>add_publish_attr_defs_change_callback</span><span class=p>(</span><span class=n>callback</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Register callback to listen publish attribute changes.</p> <p>Publish plugin changed attribute definitions of instance of context.</p> <p>Data structure of event::</p> <pre><code>```python
{
    "instance_changes": {
        None: {
            "instance": None,
            "plugin_names": {"PluginA"},
        }
        "&lt;instance_id&gt;": {
            "instance": CreatedInstance,
            "plugin_names": {"PluginB", "PluginC"},
        }
    },
    "create_context": CreateContext
}
```
</code></pre> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>callback</code> </td> <td> <code><span title=typing.Callable>Callable</span></code> </td> <td> <div class=doc-md-description> <p>Callback function that will be called when publish attributes changed.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>EventCallback</code></td> <td> </td> <td> <div class=doc-md-description> <p>Created callback object which can be used to stop listening.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 989</span>
<span class=normal> 990</span>
<span class=normal> 991</span>
<span class=normal> 992</span>
<span class=normal> 993</span>
<span class=normal> 994</span>
<span class=normal> 995</span>
<span class=normal> 996</span>
<span class=normal> 997</span>
<span class=normal> 998</span>
<span class=normal> 999</span>
<span class=normal>1000</span>
<span class=normal>1001</span>
<span class=normal>1002</span>
<span class=normal>1003</span>
<span class=normal>1004</span>
<span class=normal>1005</span>
<span class=normal>1006</span>
<span class=normal>1007</span>
<span class=normal>1008</span>
<span class=normal>1009</span>
<span class=normal>1010</span>
<span class=normal>1011</span>
<span class=normal>1012</span>
<span class=normal>1013</span>
<span class=normal>1014</span>
<span class=normal>1015</span>
<span class=normal>1016</span>
<span class=normal>1017</span>
<span class=normal>1018</span>
<span class=normal>1019</span>
<span class=normal>1020</span>
<span class=normal>1021</span>
<span class=normal>1022</span>
<span class=normal>1023</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>add_publish_attr_defs_change_callback</span> <span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>callback</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Register callback to listen publish attribute changes.</span>

<span class=sd>    Publish plugin changed attribute definitions of instance of context.</span>

<span class=sd>    Data structure of event::</span>

<span class=sd>        ```python</span>
<span class=sd>        {</span>
<span class=sd>            &quot;instance_changes&quot;: {</span>
<span class=sd>                None: {</span>
<span class=sd>                    &quot;instance&quot;: None,</span>
<span class=sd>                    &quot;plugin_names&quot;: {&quot;PluginA&quot;},</span>
<span class=sd>                }</span>
<span class=sd>                &quot;&lt;instance_id&gt;&quot;: {</span>
<span class=sd>                    &quot;instance&quot;: CreatedInstance,</span>
<span class=sd>                    &quot;plugin_names&quot;: {&quot;PluginB&quot;, &quot;PluginC&quot;},</span>
<span class=sd>                }</span>
<span class=sd>            },</span>
<span class=sd>            &quot;create_context&quot;: CreateContext</span>
<span class=sd>        }</span>
<span class=sd>        ```</span>

<span class=sd>    Args:</span>
<span class=sd>        callback (Callable): Callback function that will be called when</span>
<span class=sd>            publish attributes changed.</span>

<span class=sd>    Returns:</span>
<span class=sd>        EventCallback: Created callback object which can be used to</span>
<span class=sd>            stop listening.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_event_hub</span><span class=o>.</span><span class=n>add_callback</span><span class=p>(</span>
        <span class=n>PUBLISH_ATTR_DEFS_CHANGED_TOPIC</span><span class=p>,</span> <span class=n>callback</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.add_value_changed_callback class="doc doc-heading"> <code class="highlight language-python"><span class=n>add_value_changed_callback</span><span class=p>(</span><span class=n>callback</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Register callback to listen value changes.</p> <p>Event is triggered when any value changes on any instance or context data.</p> <p>Data structure of event::</p> <pre><code>```python
{
    "changes": [
        {
            "instance": CreatedInstance,
            "changes": {
                "folderPath": "/new/folder/path",
                "creator_attributes": {
                    "attr_1": "value_1"
                }
            }
        }
    ],
    "create_context": CreateContext
}
```
</code></pre> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>callback</code> </td> <td> <code><span title=typing.Callable>Callable</span></code> </td> <td> <div class=doc-md-description> <p>Callback function that will be called when value changed.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>EventCallback</code></td> <td> </td> <td> <div class=doc-md-description> <p>Created callback object which can be used to stop listening.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>900</span>
<span class=normal>901</span>
<span class=normal>902</span>
<span class=normal>903</span>
<span class=normal>904</span>
<span class=normal>905</span>
<span class=normal>906</span>
<span class=normal>907</span>
<span class=normal>908</span>
<span class=normal>909</span>
<span class=normal>910</span>
<span class=normal>911</span>
<span class=normal>912</span>
<span class=normal>913</span>
<span class=normal>914</span>
<span class=normal>915</span>
<span class=normal>916</span>
<span class=normal>917</span>
<span class=normal>918</span>
<span class=normal>919</span>
<span class=normal>920</span>
<span class=normal>921</span>
<span class=normal>922</span>
<span class=normal>923</span>
<span class=normal>924</span>
<span class=normal>925</span>
<span class=normal>926</span>
<span class=normal>927</span>
<span class=normal>928</span>
<span class=normal>929</span>
<span class=normal>930</span>
<span class=normal>931</span>
<span class=normal>932</span>
<span class=normal>933</span>
<span class=normal>934</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>add_value_changed_callback</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>callback</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Register callback to listen value changes.</span>

<span class=sd>    Event is triggered when any value changes on any instance or</span>
<span class=sd>        context data.</span>

<span class=sd>    Data structure of event::</span>

<span class=sd>        ```python</span>
<span class=sd>        {</span>
<span class=sd>            &quot;changes&quot;: [</span>
<span class=sd>                {</span>
<span class=sd>                    &quot;instance&quot;: CreatedInstance,</span>
<span class=sd>                    &quot;changes&quot;: {</span>
<span class=sd>                        &quot;folderPath&quot;: &quot;/new/folder/path&quot;,</span>
<span class=sd>                        &quot;creator_attributes&quot;: {</span>
<span class=sd>                            &quot;attr_1&quot;: &quot;value_1&quot;</span>
<span class=sd>                        }</span>
<span class=sd>                    }</span>
<span class=sd>                }</span>
<span class=sd>            ],</span>
<span class=sd>            &quot;create_context&quot;: CreateContext</span>
<span class=sd>        }</span>
<span class=sd>        ```</span>

<span class=sd>    Args:</span>
<span class=sd>        callback (Callable): Callback function that will be called when</span>
<span class=sd>            value changed.</span>

<span class=sd>    Returns:</span>
<span class=sd>        EventCallback: Created callback object which can be used to</span>
<span class=sd>            stop listening.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_event_hub</span><span class=o>.</span><span class=n>add_callback</span><span class=p>(</span><span class=n>VALUE_CHANGED_TOPIC</span><span class=p>,</span> <span class=n>callback</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.bulk_instances_collection class="doc doc-heading"> <code class="highlight language-python"><span class=n>bulk_instances_collection</span><span class=p>(</span><span class=n>sender</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>DEPRECATED use 'bulk_add_instances' instead.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1262</span>
<span class=normal>1263</span>
<span class=normal>1264</span>
<span class=normal>1265</span>
<span class=normal>1266</span>
<span class=normal>1267</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@contextmanager</span>
<span class=k>def</span><span class=w> </span><span class=nf>bulk_instances_collection</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>sender</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;DEPRECATED use &#39;bulk_add_instances&#39; instead.&quot;&quot;&quot;</span>
    <span class=c1># TODO add warning</span>
    <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>bulk_add_instances</span><span class=p>(</span><span class=n>sender</span><span class=p>)</span> <span class=k>as</span> <span class=n>bulk_info</span><span class=p>:</span>
        <span class=k>yield</span> <span class=n>bulk_info</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.context_data_changes class="doc doc-heading"> <code class="highlight language-python"><span class=n>context_data_changes</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Changes of attributes.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1034</span>
<span class=normal>1035</span>
<span class=normal>1036</span>
<span class=normal>1037</span>
<span class=normal>1038</span>
<span class=normal>1039</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>context_data_changes</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Changes of attributes.&quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=n>TrackChangesItem</span><span class=p>(</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_original_context_data</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>context_data_to_store</span><span class=p>()</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.context_data_to_store class="doc doc-heading"> <code class="highlight language-python"><span class=n>context_data_to_store</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Data that should be stored by host function.</p> <p>The same data should be returned on loading.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1025</span>
<span class=normal>1026</span>
<span class=normal>1027</span>
<span class=normal>1028</span>
<span class=normal>1029</span>
<span class=normal>1030</span>
<span class=normal>1031</span>
<span class=normal>1032</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>context_data_to_store</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Data that should be stored by host function.</span>

<span class=sd>    The same data should be returned on loading.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>return</span> <span class=p>{</span>
        <span class=s2>&quot;publish_attributes&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_publish_attributes</span><span class=o>.</span><span class=n>data_to_store</span><span class=p>()</span>
    <span class=p>}</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.create class="doc doc-heading"> <code class="highlight language-python"><span class=n>create</span><span class=p>(</span><span class=n>creator_identifier</span><span class=p>,</span> <span class=n>variant</span><span class=p>,</span> <span class=n>folder_entity</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>task_entity</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>pre_create_data</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>active</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Trigger create of plugins with standartized arguments.</p> <p>Arguments 'folder_entity' and 'task_name' use current context as default values. If only 'task_entity' is provided it will be overridden by task name from current context. If 'task_name' is not provided when 'folder_entity' is, it is considered that task name is not specified, which can lead to error if product name template requires task name.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>creator_identifier</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Identifier of creator plugin.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>variant</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Variant used for product name.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>folder_entity</code> </td> <td> <code><span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Folder entity which define context of creation (possible context of created instance/s).</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>task_entity</code> </td> <td> <code><span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Task entity.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>pre_create_data</code> </td> <td> <code><span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Pre-create attribute values.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>active</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=bool>bool</span>]</code> </td> <td> <div class=doc-md-description> <p>Whether the created instance defaults to be active or not.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>Any</code></td> <td> </td> <td> <div class=doc-md-description> <p>Output of triggered creator's 'create' method.</p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="CreatorError (client.ayon_core.pipeline.create.exceptions.CreatorError)" href=exceptions.html#client.ayon_core.pipeline.create.exceptions.CreatorError>CreatorError</a></code> </td> <td> <div class=doc-md-description> <p>If creator was not found or folder is empty.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1105</span>
<span class=normal>1106</span>
<span class=normal>1107</span>
<span class=normal>1108</span>
<span class=normal>1109</span>
<span class=normal>1110</span>
<span class=normal>1111</span>
<span class=normal>1112</span>
<span class=normal>1113</span>
<span class=normal>1114</span>
<span class=normal>1115</span>
<span class=normal>1116</span>
<span class=normal>1117</span>
<span class=normal>1118</span>
<span class=normal>1119</span>
<span class=normal>1120</span>
<span class=normal>1121</span>
<span class=normal>1122</span>
<span class=normal>1123</span>
<span class=normal>1124</span>
<span class=normal>1125</span>
<span class=normal>1126</span>
<span class=normal>1127</span>
<span class=normal>1128</span>
<span class=normal>1129</span>
<span class=normal>1130</span>
<span class=normal>1131</span>
<span class=normal>1132</span>
<span class=normal>1133</span>
<span class=normal>1134</span>
<span class=normal>1135</span>
<span class=normal>1136</span>
<span class=normal>1137</span>
<span class=normal>1138</span>
<span class=normal>1139</span>
<span class=normal>1140</span>
<span class=normal>1141</span>
<span class=normal>1142</span>
<span class=normal>1143</span>
<span class=normal>1144</span>
<span class=normal>1145</span>
<span class=normal>1146</span>
<span class=normal>1147</span>
<span class=normal>1148</span>
<span class=normal>1149</span>
<span class=normal>1150</span>
<span class=normal>1151</span>
<span class=normal>1152</span>
<span class=normal>1153</span>
<span class=normal>1154</span>
<span class=normal>1155</span>
<span class=normal>1156</span>
<span class=normal>1157</span>
<span class=normal>1158</span>
<span class=normal>1159</span>
<span class=normal>1160</span>
<span class=normal>1161</span>
<span class=normal>1162</span>
<span class=normal>1163</span>
<span class=normal>1164</span>
<span class=normal>1165</span>
<span class=normal>1166</span>
<span class=normal>1167</span>
<span class=normal>1168</span>
<span class=normal>1169</span>
<span class=normal>1170</span>
<span class=normal>1171</span>
<span class=normal>1172</span>
<span class=normal>1173</span>
<span class=normal>1174</span>
<span class=normal>1175</span>
<span class=normal>1176</span>
<span class=normal>1177</span>
<span class=normal>1178</span>
<span class=normal>1179</span>
<span class=normal>1180</span>
<span class=normal>1181</span>
<span class=normal>1182</span>
<span class=normal>1183</span>
<span class=normal>1184</span>
<span class=normal>1185</span>
<span class=normal>1186</span>
<span class=normal>1187</span>
<span class=normal>1188</span>
<span class=normal>1189</span>
<span class=normal>1190</span>
<span class=normal>1191</span>
<span class=normal>1192</span>
<span class=normal>1193</span>
<span class=normal>1194</span>
<span class=normal>1195</span>
<span class=normal>1196</span>
<span class=normal>1197</span>
<span class=normal>1198</span>
<span class=normal>1199</span>
<span class=normal>1200</span>
<span class=normal>1201</span>
<span class=normal>1202</span>
<span class=normal>1203</span>
<span class=normal>1204</span>
<span class=normal>1205</span>
<span class=normal>1206</span>
<span class=normal>1207</span>
<span class=normal>1208</span>
<span class=normal>1209</span>
<span class=normal>1210</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>create</span><span class=p>(</span>
    <span class=bp>self</span><span class=p>,</span>
    <span class=n>creator_identifier</span><span class=p>,</span>
    <span class=n>variant</span><span class=p>,</span>
    <span class=n>folder_entity</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>task_entity</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>pre_create_data</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>active</span><span class=o>=</span><span class=kc>None</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Trigger create of plugins with standartized arguments.</span>

<span class=sd>    Arguments &#39;folder_entity&#39; and &#39;task_name&#39; use current context as</span>
<span class=sd>    default values. If only &#39;task_entity&#39; is provided it will be</span>
<span class=sd>    overridden by task name from current context. If &#39;task_name&#39; is not</span>
<span class=sd>    provided when &#39;folder_entity&#39; is, it is considered that task name is</span>
<span class=sd>    not specified, which can lead to error if product name template</span>
<span class=sd>    requires task name.</span>

<span class=sd>    Args:</span>
<span class=sd>        creator_identifier (str): Identifier of creator plugin.</span>
<span class=sd>        variant (str): Variant used for product name.</span>
<span class=sd>        folder_entity (Dict[str, Any]): Folder entity which define context</span>
<span class=sd>            of creation (possible context of created instance/s).</span>
<span class=sd>        task_entity (Dict[str, Any]): Task entity.</span>
<span class=sd>        pre_create_data (Dict[str, Any]): Pre-create attribute values.</span>
<span class=sd>        active (Optional[bool]): Whether the created instance defaults</span>
<span class=sd>            to be active or not.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Any: Output of triggered creator&#39;s &#39;create&#39; method.</span>

<span class=sd>    Raises:</span>
<span class=sd>        CreatorError: If creator was not found or folder is empty.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>creator</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_creator_in_create</span><span class=p>(</span><span class=n>creator_identifier</span><span class=p>)</span>

    <span class=n>project_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>project_name</span>
    <span class=k>if</span> <span class=n>folder_entity</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>folder_path</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_folder_path</span><span class=p>()</span>
        <span class=n>folder_entity</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_folder_by_path</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span> <span class=n>folder_path</span>
        <span class=p>)</span>
        <span class=k>if</span> <span class=n>folder_entity</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>raise</span> <span class=n>CreatorError</span><span class=p>(</span>
                <span class=s2>&quot;Folder &#39;</span><span class=si>{}</span><span class=s2>&#39; was not found&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>folder_path</span><span class=p>)</span>
            <span class=p>)</span>

    <span class=k>if</span> <span class=n>task_entity</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>current_task_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_task_name</span><span class=p>()</span>
        <span class=k>if</span> <span class=n>current_task_name</span><span class=p>:</span>
            <span class=n>task_entity</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_task_by_name</span><span class=p>(</span>
                <span class=n>project_name</span><span class=p>,</span> <span class=n>folder_entity</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>],</span> <span class=n>current_task_name</span>
            <span class=p>)</span>

    <span class=k>if</span> <span class=n>pre_create_data</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>pre_create_data</span> <span class=o>=</span> <span class=p>{}</span>

    <span class=n>precreate_attr_defs</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=c1># Hidden creators do not have or need the pre-create attributes.</span>
    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>creator</span><span class=p>,</span> <span class=n>Creator</span><span class=p>):</span>
        <span class=n>precreate_attr_defs</span> <span class=o>=</span> <span class=n>creator</span><span class=o>.</span><span class=n>get_pre_create_attr_defs</span><span class=p>()</span>

    <span class=c1># Create default values of precreate data</span>
    <span class=n>_pre_create_data</span> <span class=o>=</span> <span class=n>get_default_values</span><span class=p>(</span><span class=n>precreate_attr_defs</span><span class=p>)</span>
    <span class=c1># Update passed precreate data to default values</span>
    <span class=c1># TODO validate types</span>
    <span class=n>_pre_create_data</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>pre_create_data</span><span class=p>)</span>

    <span class=n>project_entity</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_project_entity</span><span class=p>()</span>
    <span class=n>args</span> <span class=o>=</span> <span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span>
        <span class=n>folder_entity</span><span class=p>,</span>
        <span class=n>task_entity</span><span class=p>,</span>
        <span class=n>variant</span><span class=p>,</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>host_name</span><span class=p>,</span>
    <span class=p>)</span>
    <span class=n>kwargs</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;project_entity&quot;</span><span class=p>:</span> <span class=n>project_entity</span><span class=p>}</span>
    <span class=c1># Backwards compatibility for &#39;project_entity&#39; argument</span>
    <span class=c1># - &#39;get_product_name&#39; signature changed 24/07/08</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>is_func_signature_supported</span><span class=p>(</span>
        <span class=n>creator</span><span class=o>.</span><span class=n>get_product_name</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span>
    <span class=p>):</span>
        <span class=n>kwargs</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s2>&quot;project_entity&quot;</span><span class=p>)</span>
    <span class=n>product_name</span> <span class=o>=</span> <span class=n>creator</span><span class=o>.</span><span class=n>get_product_name</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>

    <span class=n>instance_data</span> <span class=o>=</span> <span class=p>{</span>
        <span class=s2>&quot;folderPath&quot;</span><span class=p>:</span> <span class=n>folder_entity</span><span class=p>[</span><span class=s2>&quot;path&quot;</span><span class=p>],</span>
        <span class=s2>&quot;task&quot;</span><span class=p>:</span> <span class=n>task_entity</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span> <span class=k>if</span> <span class=n>task_entity</span> <span class=k>else</span> <span class=kc>None</span><span class=p>,</span>
        <span class=s2>&quot;productType&quot;</span><span class=p>:</span> <span class=n>creator</span><span class=o>.</span><span class=n>product_type</span><span class=p>,</span>
        <span class=s2>&quot;variant&quot;</span><span class=p>:</span> <span class=n>variant</span>
    <span class=p>}</span>
    <span class=k>if</span> <span class=n>active</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>active</span><span class=p>,</span> <span class=nb>bool</span><span class=p>):</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
                <span class=s2>&quot;CreateContext.create &#39;active&#39; argument is not a bool. &quot;</span>
                <span class=sa>f</span><span class=s2>&quot;Converting </span><span class=si>{</span><span class=n>active</span><span class=si>}</span><span class=s2> </span><span class=si>{</span><span class=nb>type</span><span class=p>(</span><span class=n>active</span><span class=p>)</span><span class=si>}</span><span class=s2> to bool.&quot;</span><span class=p>)</span>
            <span class=n>active</span> <span class=o>=</span> <span class=nb>bool</span><span class=p>(</span><span class=n>active</span><span class=p>)</span>
        <span class=n>instance_data</span><span class=p>[</span><span class=s2>&quot;active&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>active</span>

    <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>bulk_add_instances</span><span class=p>():</span>
        <span class=k>return</span> <span class=n>creator</span><span class=o>.</span><span class=n>create</span><span class=p>(</span>
            <span class=n>product_name</span><span class=p>,</span>
            <span class=n>instance_data</span><span class=p>,</span>
            <span class=n>_pre_create_data</span>
        <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.create_plugin_pre_create_attr_defs_changed class="doc doc-heading"> <code class="highlight language-python"><span class=n>create_plugin_pre_create_attr_defs_changed</span><span class=p>(</span><span class=n>identifier</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Create plugin pre-create attributes changed.</p> <p>Triggered by 'Creator'.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>identifier</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Create plugin identifier.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1299</span>
<span class=normal>1300</span>
<span class=normal>1301</span>
<span class=normal>1302</span>
<span class=normal>1303</span>
<span class=normal>1304</span>
<span class=normal>1305</span>
<span class=normal>1306</span>
<span class=normal>1307</span>
<span class=normal>1308</span>
<span class=normal>1309</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>create_plugin_pre_create_attr_defs_changed</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>identifier</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Create plugin pre-create attributes changed.</span>

<span class=sd>    Triggered by &#39;Creator&#39;.</span>

<span class=sd>    Args:</span>
<span class=sd>        identifier (str): Create plugin identifier.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>bulk_pre_create_attr_defs_change</span><span class=p>()</span> <span class=k>as</span> <span class=n>bulk_item</span><span class=p>:</span>
        <span class=n>bulk_item</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>identifier</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.create_with_unified_error class="doc doc-heading"> <code class="highlight language-python"><span class=n>create_with_unified_error</span><span class=p>(</span><span class=n>identifier</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Trigger create but raise only one error if anything fails.</p> <p>Added to raise unified exception. Capture any possible issues and reraise it with unified information.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>identifier</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Identifier of creator.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>*args</code> </td> <td> <code><span title=typing.Tuple>Tuple</span>[<span title=typing.Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Arguments for create method.</p> </div> </td> <td> <code>()</code> </td> </tr> <tr class=doc-section-item> <td> <code>**kwargs</code> </td> <td> <code><span title=typing.Dict>Dict</span>[<span title=typing.Any>Any</span>, <span title=typing.Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Keyword argument for create method.</p> </div> </td> <td> <code>{}</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=client.ayon_core.pipeline.create.exceptions.CreatorsCreateFailed>CreatorsCreateFailed</span></code> </td> <td> <div class=doc-md-description> <p>When creation fails due to any possible reason. If anything goes wrong this is only possible exception the method should raise.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1212</span>
<span class=normal>1213</span>
<span class=normal>1214</span>
<span class=normal>1215</span>
<span class=normal>1216</span>
<span class=normal>1217</span>
<span class=normal>1218</span>
<span class=normal>1219</span>
<span class=normal>1220</span>
<span class=normal>1221</span>
<span class=normal>1222</span>
<span class=normal>1223</span>
<span class=normal>1224</span>
<span class=normal>1225</span>
<span class=normal>1226</span>
<span class=normal>1227</span>
<span class=normal>1228</span>
<span class=normal>1229</span>
<span class=normal>1230</span>
<span class=normal>1231</span>
<span class=normal>1232</span>
<span class=normal>1233</span>
<span class=normal>1234</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>create_with_unified_error</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>identifier</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Trigger create but raise only one error if anything fails.</span>

<span class=sd>    Added to raise unified exception. Capture any possible issues and</span>
<span class=sd>    reraise it with unified information.</span>

<span class=sd>    Args:</span>
<span class=sd>        identifier (str): Identifier of creator.</span>
<span class=sd>        *args (Tuple[Any]): Arguments for create method.</span>
<span class=sd>        **kwargs (Dict[Any, Any]): Keyword argument for create method.</span>

<span class=sd>    Raises:</span>
<span class=sd>        CreatorsCreateFailed: When creation fails due to any possible</span>
<span class=sd>            reason. If anything goes wrong this is only possible exception</span>
<span class=sd>            the method should raise.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>result</span><span class=p>,</span> <span class=n>fail_info</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_create_with_unified_error</span><span class=p>(</span>
        <span class=n>identifier</span><span class=p>,</span> <span class=kc>None</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span>
    <span class=p>)</span>
    <span class=k>if</span> <span class=n>fail_info</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>raise</span> <span class=n>CreatorsCreateFailed</span><span class=p>([</span><span class=n>fail_info</span><span class=p>])</span>
    <span class=k>return</span> <span class=n>result</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.creator_adds_instance class="doc doc-heading"> <code class="highlight language-python"><span class=n>creator_adds_instance</span><span class=p>(</span><span class=n>instance</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Creator adds new instance to context.</p> <p>Instances should be added only from creators.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>instance(CreatedInstance)</code> </td> <td> </td> <td> <div class=doc-md-description> <p>Instance with prepared data from creator.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p>TODO: Rename method to more suit.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1056</span>
<span class=normal>1057</span>
<span class=normal>1058</span>
<span class=normal>1059</span>
<span class=normal>1060</span>
<span class=normal>1061</span>
<span class=normal>1062</span>
<span class=normal>1063</span>
<span class=normal>1064</span>
<span class=normal>1065</span>
<span class=normal>1066</span>
<span class=normal>1067</span>
<span class=normal>1068</span>
<span class=normal>1069</span>
<span class=normal>1070</span>
<span class=normal>1071</span>
<span class=normal>1072</span>
<span class=normal>1073</span>
<span class=normal>1074</span>
<span class=normal>1075</span>
<span class=normal>1076</span>
<span class=normal>1077</span>
<span class=normal>1078</span>
<span class=normal>1079</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>creator_adds_instance</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instance</span><span class=p>:</span> <span class=s2>&quot;CreatedInstance&quot;</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Creator adds new instance to context.</span>

<span class=sd>    Instances should be added only from creators.</span>

<span class=sd>    Args:</span>
<span class=sd>        instance(CreatedInstance): Instance with prepared data from</span>
<span class=sd>            creator.</span>

<span class=sd>    TODO: Rename method to more suit.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=c1># Add instance to instances list</span>
    <span class=k>if</span> <span class=n>instance</span><span class=o>.</span><span class=n>id</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_instances_by_id</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>((</span>
            <span class=s2>&quot;Instance with id </span><span class=si>{}</span><span class=s2> is already added to context.&quot;</span>
        <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>instance</span><span class=o>.</span><span class=n>id</span><span class=p>))</span>
        <span class=k>return</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_instances_by_id</span><span class=p>[</span><span class=n>instance</span><span class=o>.</span><span class=n>id</span><span class=p>]</span> <span class=o>=</span> <span class=n>instance</span>

    <span class=c1># Add instance to be validated inside &#39;bulk_add_instances&#39;</span>
    <span class=c1>#   context manager if is inside bulk</span>
    <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>bulk_add_instances</span><span class=p>()</span> <span class=k>as</span> <span class=n>bulk_info</span><span class=p>:</span>
        <span class=n>bulk_info</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>instance</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.creator_removed_instance class="doc doc-heading"> <code class="highlight language-python"><span class=n>creator_removed_instance</span><span class=p>(</span><span class=n>instance</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>When creator removes instance context should be acknowledged.</p> <p>If creator removes instance context should know about it to avoid possible issues in the session.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>instance</code> </td> <td> <code><a class="autorefs autorefs-internal" title="CreatedInstance (client.ayon_core.pipeline.create.structures.CreatedInstance)" href=structures.html#client.ayon_core.pipeline.create.structures.CreatedInstance>CreatedInstance</a></code> </td> <td> <div class=doc-md-description> <p>Object of instance which was removed from scene metadata.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1236</span>
<span class=normal>1237</span>
<span class=normal>1238</span>
<span class=normal>1239</span>
<span class=normal>1240</span>
<span class=normal>1241</span>
<span class=normal>1242</span>
<span class=normal>1243</span>
<span class=normal>1244</span>
<span class=normal>1245</span>
<span class=normal>1246</span>
<span class=normal>1247</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>creator_removed_instance</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instance</span><span class=p>:</span> <span class=s2>&quot;CreatedInstance&quot;</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;When creator removes instance context should be acknowledged.</span>

<span class=sd>    If creator removes instance context should know about it to avoid</span>
<span class=sd>    possible issues in the session.</span>

<span class=sd>    Args:</span>
<span class=sd>        instance (CreatedInstance): Object of instance which was removed</span>
<span class=sd>            from scene metadata.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_remove_instances</span><span class=p>([</span><span class=n>instance</span><span class=p>])</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.execute_autocreators class="doc doc-heading"> <code class="highlight language-python"><span class=n>execute_autocreators</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Execute discovered AutoCreator plugins.</p> <p>Reset instances if any autocreator executed properly.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1451</span>
<span class=normal>1452</span>
<span class=normal>1453</span>
<span class=normal>1454</span>
<span class=normal>1455</span>
<span class=normal>1456</span>
<span class=normal>1457</span>
<span class=normal>1458</span>
<span class=normal>1459</span>
<span class=normal>1460</span>
<span class=normal>1461</span>
<span class=normal>1462</span>
<span class=normal>1463</span>
<span class=normal>1464</span>
<span class=normal>1465</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>execute_autocreators</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Execute discovered AutoCreator plugins.</span>

<span class=sd>    Reset instances if any autocreator executed properly.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>failed_info</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>for</span> <span class=n>creator</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>sorted_autocreators</span><span class=p>:</span>
        <span class=n>identifier</span> <span class=o>=</span> <span class=n>creator</span><span class=o>.</span><span class=n>identifier</span>
        <span class=n>_</span><span class=p>,</span> <span class=n>fail_info</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_create_with_unified_error</span><span class=p>(</span><span class=n>identifier</span><span class=p>,</span> <span class=n>creator</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>fail_info</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>failed_info</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>fail_info</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>failed_info</span><span class=p>:</span>
        <span class=k>raise</span> <span class=n>CreatorsCreateFailed</span><span class=p>(</span><span class=n>failed_info</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.find_convertor_items class="doc doc-heading"> <code class="highlight language-python"><span class=n>find_convertor_items</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Go through convertor plugins to look for items to convert.</p> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=client.ayon_core.pipeline.create.exceptions.ConvertorsFindFailed>ConvertorsFindFailed</span></code> </td> <td> <div class=doc-md-description> <p>When one or more convertors fails during finding.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1420</span>
<span class=normal>1421</span>
<span class=normal>1422</span>
<span class=normal>1423</span>
<span class=normal>1424</span>
<span class=normal>1425</span>
<span class=normal>1426</span>
<span class=normal>1427</span>
<span class=normal>1428</span>
<span class=normal>1429</span>
<span class=normal>1430</span>
<span class=normal>1431</span>
<span class=normal>1432</span>
<span class=normal>1433</span>
<span class=normal>1434</span>
<span class=normal>1435</span>
<span class=normal>1436</span>
<span class=normal>1437</span>
<span class=normal>1438</span>
<span class=normal>1439</span>
<span class=normal>1440</span>
<span class=normal>1441</span>
<span class=normal>1442</span>
<span class=normal>1443</span>
<span class=normal>1444</span>
<span class=normal>1445</span>
<span class=normal>1446</span>
<span class=normal>1447</span>
<span class=normal>1448</span>
<span class=normal>1449</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>find_convertor_items</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Go through convertor plugins to look for items to convert.</span>

<span class=sd>    Raises:</span>
<span class=sd>        ConvertorsFindFailed: When one or more convertors fails during</span>
<span class=sd>            finding.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>convertor_items_by_id</span> <span class=o>=</span> <span class=p>{}</span>

    <span class=n>failed_info</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>for</span> <span class=n>convertor</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>convertors_plugins</span><span class=o>.</span><span class=n>values</span><span class=p>():</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=n>convertor</span><span class=o>.</span><span class=n>find_instances</span><span class=p>()</span>

        <span class=k>except</span><span class=p>:</span>  <span class=c1># noqa: E722</span>
            <span class=n>failed_info</span><span class=o>.</span><span class=n>append</span><span class=p>(</span>
                <span class=n>prepare_failed_convertor_operation_info</span><span class=p>(</span>
                    <span class=n>convertor</span><span class=o>.</span><span class=n>identifier</span><span class=p>,</span> <span class=n>sys</span><span class=o>.</span><span class=n>exc_info</span><span class=p>()</span>
                <span class=p>)</span>
            <span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
                <span class=s2>&quot;Failed to find instances of convertor </span><span class=se>\&quot;</span><span class=si>{}</span><span class=se>\&quot;</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                    <span class=n>convertor</span><span class=o>.</span><span class=n>identifier</span>
                <span class=p>),</span>
                <span class=n>exc_info</span><span class=o>=</span><span class=kc>True</span>
            <span class=p>)</span>

    <span class=k>if</span> <span class=n>failed_info</span><span class=p>:</span>
        <span class=k>raise</span> <span class=n>ConvertorsFindFailed</span><span class=p>(</span><span class=n>failed_info</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.get_current_folder_entity class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_current_folder_entity</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Folder entity for current context folder.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=typing.Optional>Optional</span>[<span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]]</code> </td> <td> <div class=doc-md-description> <p>Optional[dict[str, Any]]: Folder entity.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>426</span>
<span class=normal>427</span>
<span class=normal>428</span>
<span class=normal>429</span>
<span class=normal>430</span>
<span class=normal>431</span>
<span class=normal>432</span>
<span class=normal>433</span>
<span class=normal>434</span>
<span class=normal>435</span>
<span class=normal>436</span>
<span class=normal>437</span>
<span class=normal>438</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_current_folder_entity</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Folder entity for current context folder.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Optional[dict[str, Any]]: Folder entity.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_folder_entity</span> <span class=ow>is</span> <span class=ow>not</span> <span class=n>_NOT_SET</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_current_folder_entity</span><span class=p>)</span>

    <span class=n>folder_path</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_folder_path</span><span class=p>()</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_current_folder_entity</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_folder_entity</span><span class=p>(</span><span class=n>folder_path</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_current_folder_entity</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.get_current_folder_path class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_current_folder_path</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Folder path which was used as current context on context reset.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=typing.Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Union[str, None]: Folder path.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>377</span>
<span class=normal>378</span>
<span class=normal>379</span>
<span class=normal>380</span>
<span class=normal>381</span>
<span class=normal>382</span>
<span class=normal>383</span>
<span class=normal>384</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_current_folder_path</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Folder path which was used as current context on context reset.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Union[str, None]: Folder path.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_folder_path</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.get_current_project_anatomy class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_current_project_anatomy</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Project anatomy for current project.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>Anatomy</code></td> <td> </td> <td> <div class=doc-md-description> <p>Anatomy object ready to be used.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>466</span>
<span class=normal>467</span>
<span class=normal>468</span>
<span class=normal>469</span>
<span class=normal>470</span>
<span class=normal>471</span>
<span class=normal>472</span>
<span class=normal>473</span>
<span class=normal>474</span>
<span class=normal>475</span>
<span class=normal>476</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_current_project_anatomy</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Project anatomy for current project.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Anatomy: Anatomy object ready to be used.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_project_anatomy</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_current_project_anatomy</span> <span class=o>=</span> <span class=n>Anatomy</span><span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_current_project_name</span><span class=p>)</span>
    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_project_anatomy</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.get_current_project_entity class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_current_project_entity</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Project entity for current context project.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=typing.Optional>Optional</span>[<span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]]</code> </td> <td> <div class=doc-md-description> <p>Union[dict[str, Any], None]: Folder entity.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>410</span>
<span class=normal>411</span>
<span class=normal>412</span>
<span class=normal>413</span>
<span class=normal>414</span>
<span class=normal>415</span>
<span class=normal>416</span>
<span class=normal>417</span>
<span class=normal>418</span>
<span class=normal>419</span>
<span class=normal>420</span>
<span class=normal>421</span>
<span class=normal>422</span>
<span class=normal>423</span>
<span class=normal>424</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_current_project_entity</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Project entity for current context project.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Union[dict[str, Any], None]: Folder entity.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_project_entity</span> <span class=ow>is</span> <span class=ow>not</span> <span class=n>_NOT_SET</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_current_project_entity</span><span class=p>)</span>
    <span class=n>project_entity</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=n>project_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_project_name</span><span class=p>()</span>
    <span class=k>if</span> <span class=n>project_name</span><span class=p>:</span>
        <span class=n>project_entity</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_project</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_current_project_entity</span> <span class=o>=</span> <span class=n>project_entity</span>
    <span class=k>return</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_current_project_entity</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.get_current_project_name class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_current_project_name</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Project name which was used as current context on context reset.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=typing.Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Union[str, None]: Project name.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>368</span>
<span class=normal>369</span>
<span class=normal>370</span>
<span class=normal>371</span>
<span class=normal>372</span>
<span class=normal>373</span>
<span class=normal>374</span>
<span class=normal>375</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_current_project_name</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Project name which was used as current context on context reset.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Union[str, None]: Project name.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_project_name</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.get_current_task_entity class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_current_task_entity</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Task entity for current context task.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=typing.Optional>Optional</span>[<span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]]</code> </td> <td> <div class=doc-md-description> <p>Union[dict[str, Any], None]: Task entity.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>440</span>
<span class=normal>441</span>
<span class=normal>442</span>
<span class=normal>443</span>
<span class=normal>444</span>
<span class=normal>445</span>
<span class=normal>446</span>
<span class=normal>447</span>
<span class=normal>448</span>
<span class=normal>449</span>
<span class=normal>450</span>
<span class=normal>451</span>
<span class=normal>452</span>
<span class=normal>453</span>
<span class=normal>454</span>
<span class=normal>455</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_current_task_entity</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Task entity for current context task.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Union[dict[str, Any], None]: Task entity.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_task_entity</span> <span class=ow>is</span> <span class=ow>not</span> <span class=n>_NOT_SET</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_current_task_entity</span><span class=p>)</span>

    <span class=n>folder_path</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_folder_path</span><span class=p>()</span>
    <span class=n>task_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_task_name</span><span class=p>()</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_current_task_entity</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_task_entity</span><span class=p>(</span>
        <span class=n>folder_path</span><span class=p>,</span> <span class=n>task_name</span>
    <span class=p>)</span>
    <span class=k>return</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_current_task_entity</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.get_current_task_name class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_current_task_name</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Task name which was used as current context on context reset.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=typing.Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Union[str, None]: Task name.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>386</span>
<span class=normal>387</span>
<span class=normal>388</span>
<span class=normal>389</span>
<span class=normal>390</span>
<span class=normal>391</span>
<span class=normal>392</span>
<span class=normal>393</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_current_task_name</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Task name which was used as current context on context reset.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Union[str, None]: Task name.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_task_name</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.get_current_task_type class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_current_task_type</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Task type which was used as current context on context reset.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=typing.Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Union[str, None]: Task type.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>395</span>
<span class=normal>396</span>
<span class=normal>397</span>
<span class=normal>398</span>
<span class=normal>399</span>
<span class=normal>400</span>
<span class=normal>401</span>
<span class=normal>402</span>
<span class=normal>403</span>
<span class=normal>404</span>
<span class=normal>405</span>
<span class=normal>406</span>
<span class=normal>407</span>
<span class=normal>408</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_current_task_type</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Task type which was used as current context on context reset.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Union[str, None]: Task type.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_task_type</span> <span class=ow>is</span> <span class=n>_NOT_SET</span><span class=p>:</span>
        <span class=n>task_type</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=n>task_entity</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_task_entity</span><span class=p>()</span>
        <span class=k>if</span> <span class=n>task_entity</span><span class=p>:</span>
            <span class=n>task_type</span> <span class=o>=</span> <span class=n>task_entity</span><span class=p>[</span><span class=s2>&quot;taskType&quot;</span><span class=p>]</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_current_task_type</span> <span class=o>=</span> <span class=n>task_type</span>
    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_task_type</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.get_current_workfile_path class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_current_workfile_path</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Workfile path which was opened on context reset.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Union[str, None]: Workfile path.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>457</span>
<span class=normal>458</span>
<span class=normal>459</span>
<span class=normal>460</span>
<span class=normal>461</span>
<span class=normal>462</span>
<span class=normal>463</span>
<span class=normal>464</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_current_workfile_path</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Workfile path which was opened on context reset.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Union[str, None]: Workfile path.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_workfile_path</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.get_folder_entities class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_folder_entities</span><span class=p>(</span><span class=n>folder_paths</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Get folder entities by paths.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>folder_paths</code> </td> <td> <code><span title=typing.Iterable>Iterable</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Folder paths.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Dict[str, Optional[Dict[str, Any]]]: Folder entities by path.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1467</span>
<span class=normal>1468</span>
<span class=normal>1469</span>
<span class=normal>1470</span>
<span class=normal>1471</span>
<span class=normal>1472</span>
<span class=normal>1473</span>
<span class=normal>1474</span>
<span class=normal>1475</span>
<span class=normal>1476</span>
<span class=normal>1477</span>
<span class=normal>1478</span>
<span class=normal>1479</span>
<span class=normal>1480</span>
<span class=normal>1481</span>
<span class=normal>1482</span>
<span class=normal>1483</span>
<span class=normal>1484</span>
<span class=normal>1485</span>
<span class=normal>1486</span>
<span class=normal>1487</span>
<span class=normal>1488</span>
<span class=normal>1489</span>
<span class=normal>1490</span>
<span class=normal>1491</span>
<span class=normal>1492</span>
<span class=normal>1493</span>
<span class=normal>1494</span>
<span class=normal>1495</span>
<span class=normal>1496</span>
<span class=normal>1497</span>
<span class=normal>1498</span>
<span class=normal>1499</span>
<span class=normal>1500</span>
<span class=normal>1501</span>
<span class=normal>1502</span>
<span class=normal>1503</span>
<span class=normal>1504</span>
<span class=normal>1505</span>
<span class=normal>1506</span>
<span class=normal>1507</span>
<span class=normal>1508</span>
<span class=normal>1509</span>
<span class=normal>1510</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_folder_entities</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>folder_paths</span><span class=p>:</span> <span class=n>Iterable</span><span class=p>[</span><span class=nb>str</span><span class=p>]):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get folder entities by paths.</span>

<span class=sd>    Args:</span>
<span class=sd>        folder_paths (Iterable[str]): Folder paths.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Dict[str, Optional[Dict[str, Any]]]: Folder entities by path.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>output</span> <span class=o>=</span> <span class=p>{</span>
        <span class=n>folder_path</span><span class=p>:</span> <span class=kc>None</span>
        <span class=k>for</span> <span class=n>folder_path</span> <span class=ow>in</span> <span class=n>folder_paths</span>
    <span class=p>}</span>
    <span class=n>remainder_paths</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
    <span class=k>for</span> <span class=n>folder_path</span> <span class=ow>in</span> <span class=n>output</span><span class=p>:</span>
        <span class=c1># Skip invalid folder paths (folder name or empty path)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>folder_path</span> <span class=ow>or</span> <span class=s2>&quot;/&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>folder_path</span><span class=p>:</span>
            <span class=k>continue</span>

        <span class=k>if</span> <span class=n>folder_path</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_folder_entities_by_path</span><span class=p>:</span>
            <span class=n>remainder_paths</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>folder_path</span><span class=p>)</span>
            <span class=k>continue</span>

        <span class=n>output</span><span class=p>[</span><span class=n>folder_path</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_folder_entities_by_path</span><span class=p>[</span><span class=n>folder_path</span><span class=p>]</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>remainder_paths</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>output</span>

    <span class=n>found_paths</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
    <span class=k>for</span> <span class=n>folder_entity</span> <span class=ow>in</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_folders</span><span class=p>(</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>project_name</span><span class=p>,</span>
        <span class=n>folder_paths</span><span class=o>=</span><span class=n>remainder_paths</span><span class=p>,</span>
    <span class=p>):</span>
        <span class=n>folder_path</span> <span class=o>=</span> <span class=n>folder_entity</span><span class=p>[</span><span class=s2>&quot;path&quot;</span><span class=p>]</span>
        <span class=n>found_paths</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>folder_path</span><span class=p>)</span>
        <span class=n>output</span><span class=p>[</span><span class=n>folder_path</span><span class=p>]</span> <span class=o>=</span> <span class=n>folder_entity</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_folder_entities_by_path</span><span class=p>[</span><span class=n>folder_path</span><span class=p>]</span> <span class=o>=</span> <span class=n>folder_entity</span>

    <span class=c1># Cache empty folder entities</span>
    <span class=k>for</span> <span class=n>path</span> <span class=ow>in</span> <span class=n>remainder_paths</span> <span class=o>-</span> <span class=n>found_paths</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_folder_entities_by_path</span><span class=p>[</span><span class=n>path</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=k>return</span> <span class=n>output</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.get_folder_entity class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_folder_entity</span><span class=p>(</span><span class=n>folder_path</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Get folder entity by path.</p> <p>Entities are cached until reset.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>folder_path</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Folder path.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=typing.Optional>Optional</span>[<span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]]</code> </td> <td> <div class=doc-md-description> <p>Optional[Dict[str, Any]]: Folder entity.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1609</span>
<span class=normal>1610</span>
<span class=normal>1611</span>
<span class=normal>1612</span>
<span class=normal>1613</span>
<span class=normal>1614</span>
<span class=normal>1615</span>
<span class=normal>1616</span>
<span class=normal>1617</span>
<span class=normal>1618</span>
<span class=normal>1619</span>
<span class=normal>1620</span>
<span class=normal>1621</span>
<span class=normal>1622</span>
<span class=normal>1623</span>
<span class=normal>1624</span>
<span class=normal>1625</span>
<span class=normal>1626</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_folder_entity</span><span class=p>(</span>
    <span class=bp>self</span><span class=p>,</span>
    <span class=n>folder_path</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>],</span>
<span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get folder entity by path.</span>

<span class=sd>    Entities are cached until reset.</span>

<span class=sd>    Args:</span>
<span class=sd>        folder_path (Optional[str]): Folder path.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Optional[Dict[str, Any]]: Folder entity.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>folder_path</span><span class=p>:</span>
        <span class=k>return</span> <span class=kc>None</span>
    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_folder_entities</span><span class=p>([</span><span class=n>folder_path</span><span class=p>])</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>folder_path</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.get_host_misssing_methods class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_host_misssing_methods</span><span class=p>(</span><span class=n>host</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Collect missing methods from host.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>host(ModuleType)</code> </td> <td> </td> <td> <div class=doc-md-description> <p>Host implementaion.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>344</span>
<span class=normal>345</span>
<span class=normal>346</span>
<span class=normal>347</span>
<span class=normal>348</span>
<span class=normal>349</span>
<span class=normal>350</span>
<span class=normal>351</span>
<span class=normal>352</span>
<span class=normal>353</span>
<span class=normal>354</span>
<span class=normal>355</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@classmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>get_host_misssing_methods</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>host</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Collect missing methods from host.</span>

<span class=sd>    Args:</span>
<span class=sd>        host(ModuleType): Host implementaion.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>missing</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span>
        <span class=n>IPublishHost</span><span class=o>.</span><span class=n>get_missing_publish_methods</span><span class=p>(</span><span class=n>host</span><span class=p>)</span>
    <span class=p>)</span>
    <span class=k>return</span> <span class=n>missing</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.get_instance_by_id class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_instance_by_id</span><span class=p>(</span><span class=n>instance_id</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Receive instance by id.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>instance_id</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Instance id.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=typing.Optional>Optional</span>[<a class="autorefs autorefs-internal" title="CreatedInstance (client.ayon_core.pipeline.create.structures.CreatedInstance)" href=structures.html#client.ayon_core.pipeline.create.structures.CreatedInstance>CreatedInstance</a>]</code> </td> <td> <div class=doc-md-description> <p>Optional[CreatedInstance]: Instance or None if instance with given id is not available.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>282</span>
<span class=normal>283</span>
<span class=normal>284</span>
<span class=normal>285</span>
<span class=normal>286</span>
<span class=normal>287</span>
<span class=normal>288</span>
<span class=normal>289</span>
<span class=normal>290</span>
<span class=normal>291</span>
<span class=normal>292</span>
<span class=normal>293</span>
<span class=normal>294</span>
<span class=normal>295</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_instance_by_id</span><span class=p>(</span>
    <span class=bp>self</span><span class=p>,</span> <span class=n>instance_id</span><span class=p>:</span> <span class=nb>str</span>
<span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=s2>&quot;CreatedInstance&quot;</span><span class=p>]:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Receive instance by id.</span>

<span class=sd>    Args:</span>
<span class=sd>        instance_id (str): Instance id.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Optional[CreatedInstance]: Instance or None if instance with</span>
<span class=sd>            given id is not available.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_instances_by_id</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>instance_id</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.get_instances_context_info class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_instances_context_info</span><span class=p>(</span><span class=n>instances</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Validate 'folder' and 'task' instance context.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>instances</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=typing.Iterable>Iterable</span>[<a class="autorefs autorefs-internal" title="CreatedInstance (client.ayon_core.pipeline.create.structures.CreatedInstance)" href=structures.html#client.ayon_core.pipeline.create.structures.CreatedInstance>CreatedInstance</a>]]</code> </td> <td> <div class=doc-md-description> <p>Instances to validate. If not provided all instances are validated.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=client.ayon_core.pipeline.create.structures.InstanceContextInfo>InstanceContextInfo</span>]</code> </td> <td> <div class=doc-md-description> <p>Dict[str, InstanceContextInfo]: Validation results by instance id.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1721</span>
<span class=normal>1722</span>
<span class=normal>1723</span>
<span class=normal>1724</span>
<span class=normal>1725</span>
<span class=normal>1726</span>
<span class=normal>1727</span>
<span class=normal>1728</span>
<span class=normal>1729</span>
<span class=normal>1730</span>
<span class=normal>1731</span>
<span class=normal>1732</span>
<span class=normal>1733</span>
<span class=normal>1734</span>
<span class=normal>1735</span>
<span class=normal>1736</span>
<span class=normal>1737</span>
<span class=normal>1738</span>
<span class=normal>1739</span>
<span class=normal>1740</span>
<span class=normal>1741</span>
<span class=normal>1742</span>
<span class=normal>1743</span>
<span class=normal>1744</span>
<span class=normal>1745</span>
<span class=normal>1746</span>
<span class=normal>1747</span>
<span class=normal>1748</span>
<span class=normal>1749</span>
<span class=normal>1750</span>
<span class=normal>1751</span>
<span class=normal>1752</span>
<span class=normal>1753</span>
<span class=normal>1754</span>
<span class=normal>1755</span>
<span class=normal>1756</span>
<span class=normal>1757</span>
<span class=normal>1758</span>
<span class=normal>1759</span>
<span class=normal>1760</span>
<span class=normal>1761</span>
<span class=normal>1762</span>
<span class=normal>1763</span>
<span class=normal>1764</span>
<span class=normal>1765</span>
<span class=normal>1766</span>
<span class=normal>1767</span>
<span class=normal>1768</span>
<span class=normal>1769</span>
<span class=normal>1770</span>
<span class=normal>1771</span>
<span class=normal>1772</span>
<span class=normal>1773</span>
<span class=normal>1774</span>
<span class=normal>1775</span>
<span class=normal>1776</span>
<span class=normal>1777</span>
<span class=normal>1778</span>
<span class=normal>1779</span>
<span class=normal>1780</span>
<span class=normal>1781</span>
<span class=normal>1782</span>
<span class=normal>1783</span>
<span class=normal>1784</span>
<span class=normal>1785</span>
<span class=normal>1786</span>
<span class=normal>1787</span>
<span class=normal>1788</span>
<span class=normal>1789</span>
<span class=normal>1790</span>
<span class=normal>1791</span>
<span class=normal>1792</span>
<span class=normal>1793</span>
<span class=normal>1794</span>
<span class=normal>1795</span>
<span class=normal>1796</span>
<span class=normal>1797</span>
<span class=normal>1798</span>
<span class=normal>1799</span>
<span class=normal>1800</span>
<span class=normal>1801</span>
<span class=normal>1802</span>
<span class=normal>1803</span>
<span class=normal>1804</span>
<span class=normal>1805</span>
<span class=normal>1806</span>
<span class=normal>1807</span>
<span class=normal>1808</span>
<span class=normal>1809</span>
<span class=normal>1810</span>
<span class=normal>1811</span>
<span class=normal>1812</span>
<span class=normal>1813</span>
<span class=normal>1814</span>
<span class=normal>1815</span>
<span class=normal>1816</span>
<span class=normal>1817</span>
<span class=normal>1818</span>
<span class=normal>1819</span>
<span class=normal>1820</span>
<span class=normal>1821</span>
<span class=normal>1822</span>
<span class=normal>1823</span>
<span class=normal>1824</span>
<span class=normal>1825</span>
<span class=normal>1826</span>
<span class=normal>1827</span>
<span class=normal>1828</span>
<span class=normal>1829</span>
<span class=normal>1830</span>
<span class=normal>1831</span>
<span class=normal>1832</span>
<span class=normal>1833</span>
<span class=normal>1834</span>
<span class=normal>1835</span>
<span class=normal>1836</span>
<span class=normal>1837</span>
<span class=normal>1838</span>
<span class=normal>1839</span>
<span class=normal>1840</span>
<span class=normal>1841</span>
<span class=normal>1842</span>
<span class=normal>1843</span>
<span class=normal>1844</span>
<span class=normal>1845</span>
<span class=normal>1846</span>
<span class=normal>1847</span>
<span class=normal>1848</span>
<span class=normal>1849</span>
<span class=normal>1850</span>
<span class=normal>1851</span>
<span class=normal>1852</span>
<span class=normal>1853</span>
<span class=normal>1854</span>
<span class=normal>1855</span>
<span class=normal>1856</span>
<span class=normal>1857</span>
<span class=normal>1858</span>
<span class=normal>1859</span>
<span class=normal>1860</span>
<span class=normal>1861</span>
<span class=normal>1862</span>
<span class=normal>1863</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_instances_context_info</span><span class=p>(</span>
    <span class=bp>self</span><span class=p>,</span> <span class=n>instances</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Iterable</span><span class=p>[</span><span class=s2>&quot;CreatedInstance&quot;</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span>
<span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>InstanceContextInfo</span><span class=p>]:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Validate &#39;folder&#39; and &#39;task&#39; instance context.</span>

<span class=sd>    Args:</span>
<span class=sd>        instances (Optional[Iterable[CreatedInstance]]): Instances to</span>
<span class=sd>            validate. If not provided all instances are validated.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Dict[str, InstanceContextInfo]: Validation results by instance id.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=c1># Use all instances from context if &#39;instances&#39; are not passed</span>
    <span class=k>if</span> <span class=n>instances</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>instances</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_instances_by_id</span><span class=o>.</span><span class=n>values</span><span class=p>()</span>
    <span class=n>instances</span> <span class=o>=</span> <span class=nb>tuple</span><span class=p>(</span><span class=n>instances</span><span class=p>)</span>
    <span class=n>info_by_instance_id</span> <span class=o>=</span> <span class=p>{</span>
        <span class=n>instance</span><span class=o>.</span><span class=n>id</span><span class=p>:</span> <span class=n>InstanceContextInfo</span><span class=p>(</span>
            <span class=n>instance</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;folderPath&quot;</span><span class=p>),</span>
            <span class=n>instance</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;task&quot;</span><span class=p>),</span>
            <span class=kc>False</span><span class=p>,</span>
            <span class=kc>False</span><span class=p>,</span>
        <span class=p>)</span>
        <span class=k>for</span> <span class=n>instance</span> <span class=ow>in</span> <span class=n>instances</span>
    <span class=p>}</span>

    <span class=c1># Skip if instances are empty</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>info_by_instance_id</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>info_by_instance_id</span>

    <span class=n>project_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>project_name</span>

    <span class=n>to_validate</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=n>task_names_by_folder_path</span> <span class=o>=</span> <span class=n>collections</span><span class=o>.</span><span class=n>defaultdict</span><span class=p>(</span><span class=nb>set</span><span class=p>)</span>
    <span class=k>for</span> <span class=n>instance</span> <span class=ow>in</span> <span class=n>instances</span><span class=p>:</span>
        <span class=n>context_info</span> <span class=o>=</span> <span class=n>info_by_instance_id</span><span class=p>[</span><span class=n>instance</span><span class=o>.</span><span class=n>id</span><span class=p>]</span>
        <span class=k>if</span> <span class=n>instance</span><span class=o>.</span><span class=n>has_promised_context</span><span class=p>:</span>
            <span class=n>context_info</span><span class=o>.</span><span class=n>folder_is_valid</span> <span class=o>=</span> <span class=kc>True</span>
            <span class=n>context_info</span><span class=o>.</span><span class=n>task_is_valid</span> <span class=o>=</span> <span class=kc>True</span>
            <span class=c1># NOTE missing task type</span>
            <span class=k>continue</span>
        <span class=c1># TODO allow context promise</span>
        <span class=n>folder_path</span> <span class=o>=</span> <span class=n>context_info</span><span class=o>.</span><span class=n>folder_path</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>folder_path</span><span class=p>:</span>
            <span class=k>continue</span>

        <span class=k>if</span> <span class=n>folder_path</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_folder_entities_by_path</span><span class=p>:</span>
            <span class=n>folder_entity</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_folder_entities_by_path</span><span class=p>[</span><span class=n>folder_path</span><span class=p>]</span>
            <span class=k>if</span> <span class=n>folder_entity</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
                <span class=k>continue</span>
            <span class=n>context_info</span><span class=o>.</span><span class=n>folder_is_valid</span> <span class=o>=</span> <span class=kc>True</span>

        <span class=n>task_name</span> <span class=o>=</span> <span class=n>context_info</span><span class=o>.</span><span class=n>task_name</span>
        <span class=k>if</span> <span class=n>task_name</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>tasks_cache</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_task_names_by_folder_path</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>folder_path</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>tasks_cache</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
                <span class=n>context_info</span><span class=o>.</span><span class=n>task_is_valid</span> <span class=o>=</span> <span class=n>task_name</span> <span class=ow>in</span> <span class=n>tasks_cache</span>
                <span class=k>continue</span>

        <span class=n>to_validate</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>instance</span><span class=p>)</span>
        <span class=n>task_names_by_folder_path</span><span class=p>[</span><span class=n>folder_path</span><span class=p>]</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>task_name</span><span class=p>)</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>to_validate</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>info_by_instance_id</span>

    <span class=c1># Backwards compatibility for cases where folder name is set instead</span>
    <span class=c1>#   of folder path</span>
    <span class=n>folder_paths</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
    <span class=n>task_names_by_folder_name</span> <span class=o>=</span> <span class=p>{}</span>
    <span class=n>task_names_by_folder_path_clean</span> <span class=o>=</span> <span class=p>{}</span>
    <span class=k>for</span> <span class=n>folder_path</span><span class=p>,</span> <span class=n>task_names</span> <span class=ow>in</span> <span class=n>task_names_by_folder_path</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
        <span class=k>if</span> <span class=n>folder_path</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>continue</span>

        <span class=n>clean_task_names</span> <span class=o>=</span> <span class=p>{</span>
            <span class=n>task_name</span>
            <span class=k>for</span> <span class=n>task_name</span> <span class=ow>in</span> <span class=n>task_names</span>
            <span class=k>if</span> <span class=n>task_name</span>
        <span class=p>}</span>

        <span class=k>if</span> <span class=s2>&quot;/&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>folder_path</span><span class=p>:</span>
            <span class=n>task_names_by_folder_name</span><span class=p>[</span><span class=n>folder_path</span><span class=p>]</span> <span class=o>=</span> <span class=n>clean_task_names</span>
            <span class=k>continue</span>

        <span class=n>folder_paths</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>folder_path</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>clean_task_names</span><span class=p>:</span>
            <span class=k>continue</span>

        <span class=n>task_names_by_folder_path_clean</span><span class=p>[</span><span class=n>folder_path</span><span class=p>]</span> <span class=o>=</span> <span class=n>clean_task_names</span>

    <span class=n>folder_paths_by_name</span> <span class=o>=</span> <span class=n>collections</span><span class=o>.</span><span class=n>defaultdict</span><span class=p>(</span><span class=nb>list</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>task_names_by_folder_name</span><span class=p>:</span>
        <span class=k>for</span> <span class=n>folder_entity</span> <span class=ow>in</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_folders</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span>
            <span class=n>folder_names</span><span class=o>=</span><span class=n>task_names_by_folder_name</span><span class=o>.</span><span class=n>keys</span><span class=p>(),</span>
            <span class=n>fields</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;name&quot;</span><span class=p>,</span> <span class=s2>&quot;path&quot;</span><span class=p>}</span>
        <span class=p>):</span>
            <span class=n>folder_name</span> <span class=o>=</span> <span class=n>folder_entity</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span>
            <span class=n>folder_path</span> <span class=o>=</span> <span class=n>folder_entity</span><span class=p>[</span><span class=s2>&quot;path&quot;</span><span class=p>]</span>
            <span class=n>folder_paths_by_name</span><span class=p>[</span><span class=n>folder_name</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>folder_path</span><span class=p>)</span>

    <span class=n>folder_path_by_name</span> <span class=o>=</span> <span class=p>{}</span>
    <span class=k>for</span> <span class=n>folder_name</span><span class=p>,</span> <span class=n>paths</span> <span class=ow>in</span> <span class=n>folder_paths_by_name</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>paths</span><span class=p>)</span> <span class=o>!=</span> <span class=mi>1</span><span class=p>:</span>
            <span class=k>continue</span>
        <span class=n>path</span> <span class=o>=</span> <span class=n>paths</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
        <span class=n>folder_path_by_name</span><span class=p>[</span><span class=n>folder_name</span><span class=p>]</span> <span class=o>=</span> <span class=n>path</span>
        <span class=n>folder_paths</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>
        <span class=n>clean_task_names</span> <span class=o>=</span> <span class=n>task_names_by_folder_name</span><span class=p>[</span><span class=n>folder_name</span><span class=p>]</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>clean_task_names</span><span class=p>:</span>
            <span class=k>continue</span>
        <span class=n>folder_task_names</span> <span class=o>=</span> <span class=n>task_names_by_folder_path_clean</span><span class=o>.</span><span class=n>setdefault</span><span class=p>(</span>
            <span class=n>path</span><span class=p>,</span> <span class=nb>set</span><span class=p>()</span>
        <span class=p>)</span>
        <span class=n>folder_task_names</span> <span class=o>|=</span> <span class=n>clean_task_names</span>

    <span class=n>folder_entities_by_path</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_folder_entities</span><span class=p>(</span><span class=n>folder_paths</span><span class=p>)</span>
    <span class=n>task_entities_by_folder_path</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_task_entities</span><span class=p>(</span>
        <span class=n>task_names_by_folder_path_clean</span>
    <span class=p>)</span>

    <span class=k>for</span> <span class=n>instance</span> <span class=ow>in</span> <span class=n>to_validate</span><span class=p>:</span>
        <span class=n>folder_path</span> <span class=o>=</span> <span class=n>instance</span><span class=p>[</span><span class=s2>&quot;folderPath&quot;</span><span class=p>]</span>
        <span class=n>task_name</span> <span class=o>=</span> <span class=n>instance</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;task&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>folder_path</span> <span class=ow>and</span> <span class=s2>&quot;/&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>folder_path</span><span class=p>:</span>
            <span class=n>new_folder_path</span> <span class=o>=</span> <span class=n>folder_path_by_name</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>folder_path</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>new_folder_path</span><span class=p>:</span>
                <span class=n>folder_path</span> <span class=o>=</span> <span class=n>new_folder_path</span>
                <span class=n>instance</span><span class=p>[</span><span class=s2>&quot;folderPath&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>new_folder_path</span>

        <span class=n>folder_entity</span> <span class=o>=</span> <span class=n>folder_entities_by_path</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>folder_path</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>folder_entity</span><span class=p>:</span>
            <span class=k>continue</span>
        <span class=n>context_info</span> <span class=o>=</span> <span class=n>info_by_instance_id</span><span class=p>[</span><span class=n>instance</span><span class=o>.</span><span class=n>id</span><span class=p>]</span>
        <span class=n>context_info</span><span class=o>.</span><span class=n>folder_is_valid</span> <span class=o>=</span> <span class=kc>True</span>

        <span class=k>if</span> <span class=p>(</span>
            <span class=ow>not</span> <span class=n>task_name</span>
            <span class=ow>or</span> <span class=n>task_name</span> <span class=ow>in</span> <span class=n>task_entities_by_folder_path</span><span class=p>[</span><span class=n>folder_path</span><span class=p>]</span>
        <span class=p>):</span>
            <span class=n>context_info</span><span class=o>.</span><span class=n>task_is_valid</span> <span class=o>=</span> <span class=kc>True</span>
    <span class=k>return</span> <span class=n>info_by_instance_id</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.get_instances_task_entities class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_instances_task_entities</span><span class=p>(</span><span class=n>instances</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Get task entities for instances.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>instances</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=typing.Iterable>Iterable</span>[<a class="autorefs autorefs-internal" title="CreatedInstance (client.ayon_core.pipeline.create.structures.CreatedInstance)" href=structures.html#client.ayon_core.pipeline.create.structures.CreatedInstance>CreatedInstance</a>]]</code> </td> <td> <div class=doc-md-description> <p>Instances to get task entities. If not provided all instances are used.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Dict[str, Optional[Dict[str, Any]]]: Task entity by instance id.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1675</span>
<span class=normal>1676</span>
<span class=normal>1677</span>
<span class=normal>1678</span>
<span class=normal>1679</span>
<span class=normal>1680</span>
<span class=normal>1681</span>
<span class=normal>1682</span>
<span class=normal>1683</span>
<span class=normal>1684</span>
<span class=normal>1685</span>
<span class=normal>1686</span>
<span class=normal>1687</span>
<span class=normal>1688</span>
<span class=normal>1689</span>
<span class=normal>1690</span>
<span class=normal>1691</span>
<span class=normal>1692</span>
<span class=normal>1693</span>
<span class=normal>1694</span>
<span class=normal>1695</span>
<span class=normal>1696</span>
<span class=normal>1697</span>
<span class=normal>1698</span>
<span class=normal>1699</span>
<span class=normal>1700</span>
<span class=normal>1701</span>
<span class=normal>1702</span>
<span class=normal>1703</span>
<span class=normal>1704</span>
<span class=normal>1705</span>
<span class=normal>1706</span>
<span class=normal>1707</span>
<span class=normal>1708</span>
<span class=normal>1709</span>
<span class=normal>1710</span>
<span class=normal>1711</span>
<span class=normal>1712</span>
<span class=normal>1713</span>
<span class=normal>1714</span>
<span class=normal>1715</span>
<span class=normal>1716</span>
<span class=normal>1717</span>
<span class=normal>1718</span>
<span class=normal>1719</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_instances_task_entities</span><span class=p>(</span>
    <span class=bp>self</span><span class=p>,</span> <span class=n>instances</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Iterable</span><span class=p>[</span><span class=s2>&quot;CreatedInstance&quot;</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get task entities for instances.</span>

<span class=sd>    Args:</span>
<span class=sd>        instances (Optional[Iterable[CreatedInstance]]): Instances to</span>
<span class=sd>            get task entities. If not provided all instances are used.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Dict[str, Optional[Dict[str, Any]]]: Task entity by instance id.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=n>instances</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>instances</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_instances_by_id</span><span class=o>.</span><span class=n>values</span><span class=p>()</span>
    <span class=n>instances</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>instances</span><span class=p>)</span>

    <span class=n>output</span> <span class=o>=</span> <span class=p>{</span>
        <span class=n>instance</span><span class=o>.</span><span class=n>id</span><span class=p>:</span> <span class=kc>None</span>
        <span class=k>for</span> <span class=n>instance</span> <span class=ow>in</span> <span class=n>instances</span>
    <span class=p>}</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>instances</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>output</span>

    <span class=n>filtered_instances</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=n>task_names_by_folder_path</span> <span class=o>=</span> <span class=n>collections</span><span class=o>.</span><span class=n>defaultdict</span><span class=p>(</span><span class=nb>set</span><span class=p>)</span>
    <span class=k>for</span> <span class=n>instance</span> <span class=ow>in</span> <span class=n>instances</span><span class=p>:</span>
        <span class=n>folder_path</span> <span class=o>=</span> <span class=n>instance</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;folderPath&quot;</span><span class=p>)</span>
        <span class=n>task_name</span> <span class=o>=</span> <span class=n>instance</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;task&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>folder_path</span> <span class=ow>or</span> <span class=ow>not</span> <span class=n>task_name</span><span class=p>:</span>
            <span class=k>continue</span>
        <span class=n>filtered_instances</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>instance</span><span class=p>)</span>
        <span class=n>task_names_by_folder_path</span><span class=p>[</span><span class=n>folder_path</span><span class=p>]</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>task_name</span><span class=p>)</span>

    <span class=n>task_entities_by_folder_path</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_task_entities</span><span class=p>(</span>
        <span class=n>task_names_by_folder_path</span>
    <span class=p>)</span>
    <span class=k>for</span> <span class=n>instance</span> <span class=ow>in</span> <span class=n>filtered_instances</span><span class=p>:</span>
        <span class=n>folder_path</span> <span class=o>=</span> <span class=n>instance</span><span class=p>[</span><span class=s2>&quot;folderPath&quot;</span><span class=p>]</span>
        <span class=n>task_name</span> <span class=o>=</span> <span class=n>instance</span><span class=p>[</span><span class=s2>&quot;task&quot;</span><span class=p>]</span>
        <span class=n>output</span><span class=p>[</span><span class=n>instance</span><span class=o>.</span><span class=n>id</span><span class=p>]</span> <span class=o>=</span> <span class=p>(</span>
            <span class=n>task_entities_by_folder_path</span><span class=p>[</span><span class=n>folder_path</span><span class=p>][</span><span class=n>task_name</span><span class=p>]</span>
        <span class=p>)</span>

    <span class=k>return</span> <span class=n>output</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.get_sorted_creators class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_sorted_creators</span><span class=p>(</span><span class=n>identifiers</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Sorted creators by 'order' attribute.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>identifiers</code> </td> <td> <code><span title=typing.Iterable>Iterable</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Filter creators by identifiers. All creators are returned if 'None' is passed.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>List[BaseCreator]: Sorted creator plugins by 'order' value.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>297</span>
<span class=normal>298</span>
<span class=normal>299</span>
<span class=normal>300</span>
<span class=normal>301</span>
<span class=normal>302</span>
<span class=normal>303</span>
<span class=normal>304</span>
<span class=normal>305</span>
<span class=normal>306</span>
<span class=normal>307</span>
<span class=normal>308</span>
<span class=normal>309</span>
<span class=normal>310</span>
<span class=normal>311</span>
<span class=normal>312</span>
<span class=normal>313</span>
<span class=normal>314</span>
<span class=normal>315</span>
<span class=normal>316</span>
<span class=normal>317</span>
<span class=normal>318</span>
<span class=normal>319</span>
<span class=normal>320</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_sorted_creators</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>identifiers</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Sorted creators by &#39;order&#39; attribute.</span>

<span class=sd>    Args:</span>
<span class=sd>        identifiers (Iterable[str]): Filter creators by identifiers. All</span>
<span class=sd>            creators are returned if &#39;None&#39; is passed.</span>

<span class=sd>    Returns:</span>
<span class=sd>        List[BaseCreator]: Sorted creator plugins by &#39;order&#39; value.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=n>identifiers</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>identifiers</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span><span class=n>identifiers</span><span class=p>)</span>
        <span class=n>creators</span> <span class=o>=</span> <span class=p>[</span>
            <span class=n>creator</span>
            <span class=k>for</span> <span class=n>identifier</span><span class=p>,</span> <span class=n>creator</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>creators</span><span class=o>.</span><span class=n>items</span><span class=p>()</span>
            <span class=k>if</span> <span class=n>identifier</span> <span class=ow>in</span> <span class=n>identifiers</span>
        <span class=p>]</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=n>creators</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>creators</span><span class=o>.</span><span class=n>values</span><span class=p>()</span>

    <span class=k>return</span> <span class=nb>sorted</span><span class=p>(</span>
        <span class=n>creators</span><span class=p>,</span> <span class=n>key</span><span class=o>=</span><span class=k>lambda</span> <span class=n>creator</span><span class=p>:</span> <span class=n>creator</span><span class=o>.</span><span class=n>order</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.get_task_entities class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_task_entities</span><span class=p>(</span><span class=n>task_names_by_folder_paths</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Get task entities by folder path and task name.</p> <p>Entities are cached until reset.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>task_names_by_folder_paths</code> </td> <td> <code><span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Set>Set</span>[<span title=str>str</span>]]</code> </td> <td> <div class=doc-md-description> <p>Task names by folder path.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Optional>Optional</span>[<span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]]]]</code> </td> <td> <div class=doc-md-description> <p>Dict[str, Dict[str, Dict[str, Any]]]: Task entities by folder path and task name.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1512</span>
<span class=normal>1513</span>
<span class=normal>1514</span>
<span class=normal>1515</span>
<span class=normal>1516</span>
<span class=normal>1517</span>
<span class=normal>1518</span>
<span class=normal>1519</span>
<span class=normal>1520</span>
<span class=normal>1521</span>
<span class=normal>1522</span>
<span class=normal>1523</span>
<span class=normal>1524</span>
<span class=normal>1525</span>
<span class=normal>1526</span>
<span class=normal>1527</span>
<span class=normal>1528</span>
<span class=normal>1529</span>
<span class=normal>1530</span>
<span class=normal>1531</span>
<span class=normal>1532</span>
<span class=normal>1533</span>
<span class=normal>1534</span>
<span class=normal>1535</span>
<span class=normal>1536</span>
<span class=normal>1537</span>
<span class=normal>1538</span>
<span class=normal>1539</span>
<span class=normal>1540</span>
<span class=normal>1541</span>
<span class=normal>1542</span>
<span class=normal>1543</span>
<span class=normal>1544</span>
<span class=normal>1545</span>
<span class=normal>1546</span>
<span class=normal>1547</span>
<span class=normal>1548</span>
<span class=normal>1549</span>
<span class=normal>1550</span>
<span class=normal>1551</span>
<span class=normal>1552</span>
<span class=normal>1553</span>
<span class=normal>1554</span>
<span class=normal>1555</span>
<span class=normal>1556</span>
<span class=normal>1557</span>
<span class=normal>1558</span>
<span class=normal>1559</span>
<span class=normal>1560</span>
<span class=normal>1561</span>
<span class=normal>1562</span>
<span class=normal>1563</span>
<span class=normal>1564</span>
<span class=normal>1565</span>
<span class=normal>1566</span>
<span class=normal>1567</span>
<span class=normal>1568</span>
<span class=normal>1569</span>
<span class=normal>1570</span>
<span class=normal>1571</span>
<span class=normal>1572</span>
<span class=normal>1573</span>
<span class=normal>1574</span>
<span class=normal>1575</span>
<span class=normal>1576</span>
<span class=normal>1577</span>
<span class=normal>1578</span>
<span class=normal>1579</span>
<span class=normal>1580</span>
<span class=normal>1581</span>
<span class=normal>1582</span>
<span class=normal>1583</span>
<span class=normal>1584</span>
<span class=normal>1585</span>
<span class=normal>1586</span>
<span class=normal>1587</span>
<span class=normal>1588</span>
<span class=normal>1589</span>
<span class=normal>1590</span>
<span class=normal>1591</span>
<span class=normal>1592</span>
<span class=normal>1593</span>
<span class=normal>1594</span>
<span class=normal>1595</span>
<span class=normal>1596</span>
<span class=normal>1597</span>
<span class=normal>1598</span>
<span class=normal>1599</span>
<span class=normal>1600</span>
<span class=normal>1601</span>
<span class=normal>1602</span>
<span class=normal>1603</span>
<span class=normal>1604</span>
<span class=normal>1605</span>
<span class=normal>1606</span>
<span class=normal>1607</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_task_entities</span><span class=p>(</span>
    <span class=bp>self</span><span class=p>,</span>
    <span class=n>task_names_by_folder_paths</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Set</span><span class=p>[</span><span class=nb>str</span><span class=p>]]</span>
<span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]]]:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get task entities by folder path and task name.</span>

<span class=sd>    Entities are cached until reset.</span>

<span class=sd>    Args:</span>
<span class=sd>        task_names_by_folder_paths (Dict[str, Set[str]]): Task names by</span>
<span class=sd>            folder path.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Dict[str, Dict[str, Dict[str, Any]]]: Task entities by folder path</span>
<span class=sd>            and task name.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>output</span> <span class=o>=</span> <span class=p>{}</span>
    <span class=k>for</span> <span class=n>folder_path</span><span class=p>,</span> <span class=n>task_names</span> <span class=ow>in</span> <span class=n>task_names_by_folder_paths</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
        <span class=k>if</span> <span class=n>folder_path</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>continue</span>
        <span class=n>output</span><span class=p>[</span><span class=n>folder_path</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span>
            <span class=n>task_name</span><span class=p>:</span> <span class=kc>None</span>
            <span class=k>for</span> <span class=n>task_name</span> <span class=ow>in</span> <span class=n>task_names</span>
            <span class=k>if</span> <span class=n>task_name</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span>
        <span class=p>}</span>

    <span class=n>missing_folder_paths</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
    <span class=k>for</span> <span class=n>folder_path</span><span class=p>,</span> <span class=n>output_task_entities_by_name</span> <span class=ow>in</span> <span class=n>output</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>output_task_entities_by_name</span><span class=p>:</span>
            <span class=k>continue</span>

        <span class=k>if</span> <span class=n>folder_path</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_task_ids_by_folder_path</span><span class=p>:</span>
            <span class=n>missing_folder_paths</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>folder_path</span><span class=p>)</span>
            <span class=k>continue</span>

        <span class=n>all_tasks_filled</span> <span class=o>=</span> <span class=kc>True</span>
        <span class=n>task_ids</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_task_ids_by_folder_path</span><span class=p>[</span><span class=n>folder_path</span><span class=p>]</span>
        <span class=n>task_entities_by_name</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=k>for</span> <span class=n>task_id</span> <span class=ow>in</span> <span class=n>task_ids</span><span class=p>:</span>
            <span class=n>task_entity</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_task_entities_by_id</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>task_id</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>task_entity</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
                <span class=n>all_tasks_filled</span> <span class=o>=</span> <span class=kc>False</span>
                <span class=k>continue</span>
            <span class=n>task_entities_by_name</span><span class=p>[</span><span class=n>task_entity</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]]</span> <span class=o>=</span> <span class=n>task_entity</span>

        <span class=n>any_missing</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=k>for</span> <span class=n>task_name</span> <span class=ow>in</span> <span class=nb>set</span><span class=p>(</span><span class=n>output_task_entities_by_name</span><span class=p>):</span>
            <span class=n>task_entity</span> <span class=o>=</span> <span class=n>task_entities_by_name</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>task_name</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>task_entity</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
                <span class=n>any_missing</span> <span class=o>=</span> <span class=kc>True</span>
                <span class=k>continue</span>

            <span class=n>output_task_entities_by_name</span><span class=p>[</span><span class=n>task_name</span><span class=p>]</span> <span class=o>=</span> <span class=n>task_entity</span>

        <span class=k>if</span> <span class=n>any_missing</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>all_tasks_filled</span><span class=p>:</span>
            <span class=n>missing_folder_paths</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>folder_path</span><span class=p>)</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>missing_folder_paths</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>output</span>

    <span class=n>folder_entities_by_path</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_folder_entities</span><span class=p>(</span>
        <span class=n>missing_folder_paths</span>
    <span class=p>)</span>
    <span class=n>folder_path_by_id</span> <span class=o>=</span> <span class=p>{}</span>
    <span class=k>for</span> <span class=n>folder_path</span><span class=p>,</span> <span class=n>folder_entity</span> <span class=ow>in</span> <span class=n>folder_entities_by_path</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
        <span class=k>if</span> <span class=n>folder_entity</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>folder_path_by_id</span><span class=p>[</span><span class=n>folder_entity</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]]</span> <span class=o>=</span> <span class=n>folder_path</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>folder_path_by_id</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>output</span>

    <span class=n>task_entities_by_parent_id</span> <span class=o>=</span> <span class=n>collections</span><span class=o>.</span><span class=n>defaultdict</span><span class=p>(</span><span class=nb>list</span><span class=p>)</span>
    <span class=k>for</span> <span class=n>task_entity</span> <span class=ow>in</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_tasks</span><span class=p>(</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>project_name</span><span class=p>,</span>
        <span class=n>folder_ids</span><span class=o>=</span><span class=n>folder_path_by_id</span><span class=o>.</span><span class=n>keys</span><span class=p>()</span>
    <span class=p>):</span>
        <span class=n>folder_id</span> <span class=o>=</span> <span class=n>task_entity</span><span class=p>[</span><span class=s2>&quot;folderId&quot;</span><span class=p>]</span>
        <span class=n>task_entities_by_parent_id</span><span class=p>[</span><span class=n>folder_id</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>task_entity</span><span class=p>)</span>

    <span class=k>for</span> <span class=n>folder_id</span><span class=p>,</span> <span class=n>task_entities</span> <span class=ow>in</span> <span class=n>task_entities_by_parent_id</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
        <span class=n>folder_path</span> <span class=o>=</span> <span class=n>folder_path_by_id</span><span class=p>[</span><span class=n>folder_id</span><span class=p>]</span>
        <span class=n>task_ids</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
        <span class=n>task_names</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
        <span class=k>for</span> <span class=n>task_entity</span> <span class=ow>in</span> <span class=n>task_entities</span><span class=p>:</span>
            <span class=n>task_id</span> <span class=o>=</span> <span class=n>task_entity</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]</span>
            <span class=n>task_name</span> <span class=o>=</span> <span class=n>task_entity</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span>
            <span class=n>task_ids</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>task_id</span><span class=p>)</span>
            <span class=n>task_names</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>task_name</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_task_entities_by_id</span><span class=p>[</span><span class=n>task_id</span><span class=p>]</span> <span class=o>=</span> <span class=n>task_entity</span>

            <span class=n>output</span><span class=p>[</span><span class=n>folder_path</span><span class=p>][</span><span class=n>task_name</span><span class=p>]</span> <span class=o>=</span> <span class=n>task_entity</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_task_ids_by_folder_path</span><span class=p>[</span><span class=n>folder_path</span><span class=p>]</span> <span class=o>=</span> <span class=n>task_ids</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_task_names_by_folder_path</span><span class=p>[</span><span class=n>folder_path</span><span class=p>]</span> <span class=o>=</span> <span class=n>task_names</span>

    <span class=k>return</span> <span class=n>output</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.get_task_entity class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_task_entity</span><span class=p>(</span><span class=n>folder_path</span><span class=p>,</span> <span class=n>task_name</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Get task entity by name and folder path.</p> <p>Entities are cached until reset.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>folder_path</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Folder path.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>task_name</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Task name.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=typing.Optional>Optional</span>[<span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]]</code> </td> <td> <div class=doc-md-description> <p>Optional[Dict[str, Any]]: Task entity.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1628</span>
<span class=normal>1629</span>
<span class=normal>1630</span>
<span class=normal>1631</span>
<span class=normal>1632</span>
<span class=normal>1633</span>
<span class=normal>1634</span>
<span class=normal>1635</span>
<span class=normal>1636</span>
<span class=normal>1637</span>
<span class=normal>1638</span>
<span class=normal>1639</span>
<span class=normal>1640</span>
<span class=normal>1641</span>
<span class=normal>1642</span>
<span class=normal>1643</span>
<span class=normal>1644</span>
<span class=normal>1645</span>
<span class=normal>1646</span>
<span class=normal>1647</span>
<span class=normal>1648</span>
<span class=normal>1649</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_task_entity</span><span class=p>(</span>
    <span class=bp>self</span><span class=p>,</span>
    <span class=n>folder_path</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>],</span>
    <span class=n>task_name</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>],</span>
<span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get task entity by name and folder path.</span>

<span class=sd>    Entities are cached until reset.</span>

<span class=sd>    Args:</span>
<span class=sd>        folder_path (Optional[str]): Folder path.</span>
<span class=sd>        task_name (Optional[str]): Task name.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Optional[Dict[str, Any]]: Task entity.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>folder_path</span> <span class=ow>or</span> <span class=ow>not</span> <span class=n>task_name</span><span class=p>:</span>
        <span class=k>return</span> <span class=kc>None</span>

    <span class=n>output</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_task_entities</span><span class=p>({</span><span class=n>folder_path</span><span class=p>:</span> <span class=p>{</span><span class=n>task_name</span><span class=p>}})</span>
    <span class=k>return</span> <span class=n>output</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>folder_path</span><span class=p>,</span> <span class=p>{})</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>task_name</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.get_template_data class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_template_data</span><span class=p>(</span><span class=n>folder_path</span><span class=p>,</span> <span class=n>task_name</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Prepare template data for given context.</p> <p>Method is using cached entities and settings to prepare template data.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>folder_path</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Folder path.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>task_name</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Task name.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>dict[str, Any]: Template data.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>484</span>
<span class=normal>485</span>
<span class=normal>486</span>
<span class=normal>487</span>
<span class=normal>488</span>
<span class=normal>489</span>
<span class=normal>490</span>
<span class=normal>491</span>
<span class=normal>492</span>
<span class=normal>493</span>
<span class=normal>494</span>
<span class=normal>495</span>
<span class=normal>496</span>
<span class=normal>497</span>
<span class=normal>498</span>
<span class=normal>499</span>
<span class=normal>500</span>
<span class=normal>501</span>
<span class=normal>502</span>
<span class=normal>503</span>
<span class=normal>504</span>
<span class=normal>505</span>
<span class=normal>506</span>
<span class=normal>507</span>
<span class=normal>508</span>
<span class=normal>509</span>
<span class=normal>510</span>
<span class=normal>511</span>
<span class=normal>512</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_template_data</span><span class=p>(</span>
    <span class=bp>self</span><span class=p>,</span> <span class=n>folder_path</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>],</span> <span class=n>task_name</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span>
<span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Prepare template data for given context.</span>

<span class=sd>    Method is using cached entities and settings to prepare template data.</span>

<span class=sd>    Args:</span>
<span class=sd>        folder_path (Optional[str]): Folder path.</span>
<span class=sd>        task_name (Optional[str]): Task name.</span>

<span class=sd>    Returns:</span>
<span class=sd>        dict[str, Any]: Template data.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>project_entity</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_project_entity</span><span class=p>()</span>
    <span class=n>folder_entity</span> <span class=o>=</span> <span class=n>task_entity</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=k>if</span> <span class=n>folder_path</span><span class=p>:</span>
        <span class=n>folder_entity</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_folder_entity</span><span class=p>(</span><span class=n>folder_path</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>task_name</span> <span class=ow>and</span> <span class=n>folder_entity</span><span class=p>:</span>
            <span class=n>task_entity</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_task_entity</span><span class=p>(</span><span class=n>folder_path</span><span class=p>,</span> <span class=n>task_name</span><span class=p>)</span>

    <span class=k>return</span> <span class=n>get_template_data</span><span class=p>(</span>
        <span class=n>project_entity</span><span class=p>,</span>
        <span class=n>folder_entity</span><span class=p>,</span>
        <span class=n>task_entity</span><span class=p>,</span>
        <span class=n>host_name</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>host_name</span><span class=p>,</span>
        <span class=n>settings</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>get_current_project_settings</span><span class=p>(),</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.instance_create_attr_defs_changed class="doc doc-heading"> <code class="highlight language-python"><span class=n>instance_create_attr_defs_changed</span><span class=p>(</span><span class=n>instance_id</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Instance attribute definitions changed.</p> <p>Triggered by instance 'CreatorAttributeValues' on instance.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>instance_id</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Instance id.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1311</span>
<span class=normal>1312</span>
<span class=normal>1313</span>
<span class=normal>1314</span>
<span class=normal>1315</span>
<span class=normal>1316</span>
<span class=normal>1317</span>
<span class=normal>1318</span>
<span class=normal>1319</span>
<span class=normal>1320</span>
<span class=normal>1321</span>
<span class=normal>1322</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>instance_create_attr_defs_changed</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instance_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Instance attribute definitions changed.</span>

<span class=sd>    Triggered by instance &#39;CreatorAttributeValues&#39; on instance.</span>

<span class=sd>    Args:</span>
<span class=sd>        instance_id (str): Instance id.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_is_instance_events_ready</span><span class=p>(</span><span class=n>instance_id</span><span class=p>):</span>
        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>bulk_create_attr_defs_change</span><span class=p>()</span> <span class=k>as</span> <span class=n>bulk_item</span><span class=p>:</span>
            <span class=n>bulk_item</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>instance_id</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.instance_publish_attr_defs_changed class="doc doc-heading"> <code class="highlight language-python"><span class=n>instance_publish_attr_defs_changed</span><span class=p>(</span><span class=n>instance_id</span><span class=p>,</span> <span class=n>plugin_name</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Instance attribute definitions changed.</p> <p>Triggered by instance 'PublishAttributeValues' on instance.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>instance_id</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Instance id or None for context.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>plugin_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Plugin name which attribute definitions were changed.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1324</span>
<span class=normal>1325</span>
<span class=normal>1326</span>
<span class=normal>1327</span>
<span class=normal>1328</span>
<span class=normal>1329</span>
<span class=normal>1330</span>
<span class=normal>1331</span>
<span class=normal>1332</span>
<span class=normal>1333</span>
<span class=normal>1334</span>
<span class=normal>1335</span>
<span class=normal>1336</span>
<span class=normal>1337</span>
<span class=normal>1338</span>
<span class=normal>1339</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>instance_publish_attr_defs_changed</span><span class=p>(</span>
    <span class=bp>self</span><span class=p>,</span> <span class=n>instance_id</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>],</span> <span class=n>plugin_name</span><span class=p>:</span> <span class=nb>str</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Instance attribute definitions changed.</span>

<span class=sd>    Triggered by instance &#39;PublishAttributeValues&#39; on instance.</span>

<span class=sd>    Args:</span>
<span class=sd>        instance_id (Optional[str]): Instance id or None for context.</span>
<span class=sd>        plugin_name (str): Plugin name which attribute definitions were</span>
<span class=sd>            changed.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_is_instance_events_ready</span><span class=p>(</span><span class=n>instance_id</span><span class=p>):</span>
        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>bulk_publish_attr_defs_change</span><span class=p>()</span> <span class=k>as</span> <span class=n>bulk_item</span><span class=p>:</span>
            <span class=n>bulk_item</span><span class=o>.</span><span class=n>append</span><span class=p>((</span><span class=n>instance_id</span><span class=p>,</span> <span class=n>plugin_name</span><span class=p>))</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.instance_values_changed class="doc doc-heading"> <code class="highlight language-python"><span class=n>instance_values_changed</span><span class=p>(</span><span class=n>instance_id</span><span class=p>,</span> <span class=n>new_values</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Instance value changed.</p> <p>Triggered by `CreatedInstance, 'CreatorAttributeValues' or 'PublishAttributeValues' on instance.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>instance_id</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Instance id or None for context.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>new_values</code> </td> <td> <code><span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Changed values.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1341</span>
<span class=normal>1342</span>
<span class=normal>1343</span>
<span class=normal>1344</span>
<span class=normal>1345</span>
<span class=normal>1346</span>
<span class=normal>1347</span>
<span class=normal>1348</span>
<span class=normal>1349</span>
<span class=normal>1350</span>
<span class=normal>1351</span>
<span class=normal>1352</span>
<span class=normal>1353</span>
<span class=normal>1354</span>
<span class=normal>1355</span>
<span class=normal>1356</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>instance_values_changed</span><span class=p>(</span>
    <span class=bp>self</span><span class=p>,</span> <span class=n>instance_id</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>],</span> <span class=n>new_values</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Instance value changed.</span>

<span class=sd>    Triggered by `CreatedInstance, &#39;CreatorAttributeValues&#39;</span>
<span class=sd>        or &#39;PublishAttributeValues&#39; on instance.</span>

<span class=sd>    Args:</span>
<span class=sd>        instance_id (Optional[str]): Instance id or None for context.</span>
<span class=sd>        new_values (Dict[str, Any]): Changed values.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_is_instance_events_ready</span><span class=p>(</span><span class=n>instance_id</span><span class=p>):</span>
        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>bulk_value_changes</span><span class=p>()</span> <span class=k>as</span> <span class=n>bulk_item</span><span class=p>:</span>
            <span class=n>bulk_item</span><span class=o>.</span><span class=n>append</span><span class=p>((</span><span class=n>instance_id</span><span class=p>,</span> <span class=n>new_values</span><span class=p>))</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.publish_attribute_value_changed class="doc doc-heading"> <code class="highlight language-python"><span class=n>publish_attribute_value_changed</span><span class=p>(</span><span class=n>plugin_name</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Context publish attribute values changed.</p> <p>Triggered by instance 'PublishAttributeValues' on context.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>plugin_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Plugin name which changed value.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>value</code> </td> <td> <code><span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Changed values.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1359</span>
<span class=normal>1360</span>
<span class=normal>1361</span>
<span class=normal>1362</span>
<span class=normal>1363</span>
<span class=normal>1364</span>
<span class=normal>1365</span>
<span class=normal>1366</span>
<span class=normal>1367</span>
<span class=normal>1368</span>
<span class=normal>1369</span>
<span class=normal>1370</span>
<span class=normal>1371</span>
<span class=normal>1372</span>
<span class=normal>1373</span>
<span class=normal>1374</span>
<span class=normal>1375</span>
<span class=normal>1376</span>
<span class=normal>1377</span>
<span class=normal>1378</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>publish_attribute_value_changed</span><span class=p>(</span>
    <span class=bp>self</span><span class=p>,</span> <span class=n>plugin_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Context publish attribute values changed.</span>

<span class=sd>    Triggered by instance &#39;PublishAttributeValues&#39; on context.</span>

<span class=sd>    Args:</span>
<span class=sd>        plugin_name (str): Plugin name which changed value.</span>
<span class=sd>        value (Dict[str, Any]): Changed values.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>instance_values_changed</span><span class=p>(</span>
        <span class=kc>None</span><span class=p>,</span>
        <span class=p>{</span>
            <span class=s2>&quot;publish_attributes&quot;</span><span class=p>:</span> <span class=p>{</span>
                <span class=n>plugin_name</span><span class=p>:</span> <span class=n>value</span><span class=p>,</span>
            <span class=p>},</span>
        <span class=p>},</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.refresh_thumbnails class="doc doc-heading"> <code class="highlight language-python"><span class=n>refresh_thumbnails</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Cleanup thumbnail paths.</p> <p>Remove all thumbnail filepaths that are empty or lead to files which does not exist or of instances that are not available anymore.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>564</span>
<span class=normal>565</span>
<span class=normal>566</span>
<span class=normal>567</span>
<span class=normal>568</span>
<span class=normal>569</span>
<span class=normal>570</span>
<span class=normal>571</span>
<span class=normal>572</span>
<span class=normal>573</span>
<span class=normal>574</span>
<span class=normal>575</span>
<span class=normal>576</span>
<span class=normal>577</span>
<span class=normal>578</span>
<span class=normal>579</span>
<span class=normal>580</span>
<span class=normal>581</span>
<span class=normal>582</span>
<span class=normal>583</span>
<span class=normal>584</span>
<span class=normal>585</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>refresh_thumbnails</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Cleanup thumbnail paths.</span>

<span class=sd>    Remove all thumbnail filepaths that are empty or lead to files which</span>
<span class=sd>    does not exist or of instances that are not available anymore.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>invalid</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
    <span class=k>for</span> <span class=n>instance_id</span><span class=p>,</span> <span class=n>path</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>thumbnail_paths_by_instance_id</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
        <span class=n>instance_available</span> <span class=o>=</span> <span class=kc>True</span>
        <span class=k>if</span> <span class=n>instance_id</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>instance_available</span> <span class=o>=</span> <span class=n>instance_id</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_instances_by_id</span>

        <span class=k>if</span> <span class=p>(</span>
            <span class=ow>not</span> <span class=n>instance_available</span>
            <span class=ow>or</span> <span class=ow>not</span> <span class=n>path</span>
            <span class=ow>or</span> <span class=ow>not</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>
        <span class=p>):</span>
            <span class=n>invalid</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>instance_id</span><span class=p>)</span>

    <span class=k>for</span> <span class=n>instance_id</span> <span class=ow>in</span> <span class=n>invalid</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>thumbnail_paths_by_instance_id</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>instance_id</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.remove_instances class="doc doc-heading"> <code class="highlight language-python"><span class=n>remove_instances</span><span class=p>(</span><span class=n>instances</span><span class=p>,</span> <span class=n>sender</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Remove instances from context.</p> <p>All instances that don't have creator identifier leading to existing creator are just removed from context.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>instances</code> </td> <td> <code><span title=typing.List>List</span>[<a class="autorefs autorefs-internal" title="CreatedInstance (client.ayon_core.pipeline.create.structures.CreatedInstance)" href=structures.html#client.ayon_core.pipeline.create.structures.CreatedInstance>CreatedInstance</a>]</code> </td> <td> <div class=doc-md-description> <p>Instances that should be removed. Remove logic is done using creator, which may require to do other cleanup than just remove instance from context.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>sender</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Sender of the event.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1941</span>
<span class=normal>1942</span>
<span class=normal>1943</span>
<span class=normal>1944</span>
<span class=normal>1945</span>
<span class=normal>1946</span>
<span class=normal>1947</span>
<span class=normal>1948</span>
<span class=normal>1949</span>
<span class=normal>1950</span>
<span class=normal>1951</span>
<span class=normal>1952</span>
<span class=normal>1953</span>
<span class=normal>1954</span>
<span class=normal>1955</span>
<span class=normal>1956</span>
<span class=normal>1957</span>
<span class=normal>1958</span>
<span class=normal>1959</span>
<span class=normal>1960</span>
<span class=normal>1961</span>
<span class=normal>1962</span>
<span class=normal>1963</span>
<span class=normal>1964</span>
<span class=normal>1965</span>
<span class=normal>1966</span>
<span class=normal>1967</span>
<span class=normal>1968</span>
<span class=normal>1969</span>
<span class=normal>1970</span>
<span class=normal>1971</span>
<span class=normal>1972</span>
<span class=normal>1973</span>
<span class=normal>1974</span>
<span class=normal>1975</span>
<span class=normal>1976</span>
<span class=normal>1977</span>
<span class=normal>1978</span>
<span class=normal>1979</span>
<span class=normal>1980</span>
<span class=normal>1981</span>
<span class=normal>1982</span>
<span class=normal>1983</span>
<span class=normal>1984</span>
<span class=normal>1985</span>
<span class=normal>1986</span>
<span class=normal>1987</span>
<span class=normal>1988</span>
<span class=normal>1989</span>
<span class=normal>1990</span>
<span class=normal>1991</span>
<span class=normal>1992</span>
<span class=normal>1993</span>
<span class=normal>1994</span>
<span class=normal>1995</span>
<span class=normal>1996</span>
<span class=normal>1997</span>
<span class=normal>1998</span>
<span class=normal>1999</span>
<span class=normal>2000</span>
<span class=normal>2001</span>
<span class=normal>2002</span>
<span class=normal>2003</span>
<span class=normal>2004</span>
<span class=normal>2005</span>
<span class=normal>2006</span>
<span class=normal>2007</span>
<span class=normal>2008</span>
<span class=normal>2009</span>
<span class=normal>2010</span>
<span class=normal>2011</span>
<span class=normal>2012</span>
<span class=normal>2013</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>remove_instances</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instances</span><span class=p>,</span> <span class=n>sender</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Remove instances from context.</span>

<span class=sd>    All instances that don&#39;t have creator identifier leading to existing</span>
<span class=sd>        creator are just removed from context.</span>

<span class=sd>    Args:</span>
<span class=sd>        instances (List[CreatedInstance]): Instances that should be</span>
<span class=sd>            removed. Remove logic is done using creator, which may require</span>
<span class=sd>            to do other cleanup than just remove instance from context.</span>
<span class=sd>        sender (Optional[str]): Sender of the event.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>instances_by_identifier</span> <span class=o>=</span> <span class=n>collections</span><span class=o>.</span><span class=n>defaultdict</span><span class=p>(</span><span class=nb>list</span><span class=p>)</span>
    <span class=k>for</span> <span class=n>instance</span> <span class=ow>in</span> <span class=n>instances</span><span class=p>:</span>
        <span class=n>identifier</span> <span class=o>=</span> <span class=n>instance</span><span class=o>.</span><span class=n>creator_identifier</span>
        <span class=n>instances_by_identifier</span><span class=p>[</span><span class=n>identifier</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>instance</span><span class=p>)</span>

    <span class=c1># Just remove instances from context if creator is not available</span>
    <span class=n>missing_creators</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span><span class=n>instances_by_identifier</span><span class=p>)</span> <span class=o>-</span> <span class=nb>set</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>creators</span><span class=p>)</span>
    <span class=n>instances</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>for</span> <span class=n>identifier</span> <span class=ow>in</span> <span class=n>missing_creators</span><span class=p>:</span>
        <span class=n>instances</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span>
            <span class=n>instance</span>
            <span class=k>for</span> <span class=n>instance</span> <span class=ow>in</span> <span class=n>instances_by_identifier</span><span class=p>[</span><span class=n>identifier</span><span class=p>]</span>
        <span class=p>)</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_remove_instances</span><span class=p>(</span><span class=n>instances</span><span class=p>,</span> <span class=n>sender</span><span class=p>)</span>

    <span class=n>error_message</span> <span class=o>=</span> <span class=s2>&quot;Instances removement of creator </span><span class=se>\&quot;</span><span class=si>{}</span><span class=se>\&quot;</span><span class=s2> failed. </span><span class=si>{}</span><span class=s2>&quot;</span>
    <span class=n>failed_info</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=c1># Remove instances by creator plugin order</span>
    <span class=k>for</span> <span class=n>creator</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_sorted_creators</span><span class=p>(</span>
        <span class=n>instances_by_identifier</span><span class=o>.</span><span class=n>keys</span><span class=p>()</span>
    <span class=p>):</span>
        <span class=n>identifier</span> <span class=o>=</span> <span class=n>creator</span><span class=o>.</span><span class=n>identifier</span>
        <span class=n>creator_instances</span> <span class=o>=</span> <span class=n>instances_by_identifier</span><span class=p>[</span><span class=n>identifier</span><span class=p>]</span>

        <span class=n>label</span> <span class=o>=</span> <span class=n>creator</span><span class=o>.</span><span class=n>label</span>
        <span class=n>failed</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=n>add_traceback</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=n>exc_info</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=n>creator</span><span class=o>.</span><span class=n>remove_instances</span><span class=p>(</span><span class=n>creator_instances</span><span class=p>)</span>

        <span class=k>except</span> <span class=n>CreatorError</span><span class=p>:</span>
            <span class=n>failed</span> <span class=o>=</span> <span class=kc>True</span>
            <span class=n>exc_info</span> <span class=o>=</span> <span class=n>sys</span><span class=o>.</span><span class=n>exc_info</span><span class=p>()</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
                <span class=n>error_message</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>identifier</span><span class=p>,</span> <span class=n>exc_info</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span>
            <span class=p>)</span>

        <span class=k>except</span> <span class=p>(</span><span class=ne>KeyboardInterrupt</span><span class=p>,</span> <span class=ne>SystemExit</span><span class=p>):</span>
            <span class=k>raise</span>

        <span class=k>except</span><span class=p>:</span>  <span class=c1># noqa: E722</span>
            <span class=n>failed</span> <span class=o>=</span> <span class=kc>True</span>
            <span class=n>add_traceback</span> <span class=o>=</span> <span class=kc>True</span>
            <span class=n>exc_info</span> <span class=o>=</span> <span class=n>sys</span><span class=o>.</span><span class=n>exc_info</span><span class=p>()</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
                <span class=n>error_message</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>identifier</span><span class=p>,</span> <span class=s2>&quot;&quot;</span><span class=p>),</span>
                <span class=n>exc_info</span><span class=o>=</span><span class=kc>True</span>
            <span class=p>)</span>

        <span class=k>if</span> <span class=n>failed</span><span class=p>:</span>
            <span class=n>failed_info</span><span class=o>.</span><span class=n>append</span><span class=p>(</span>
                <span class=n>prepare_failed_creator_operation_info</span><span class=p>(</span>
                    <span class=n>identifier</span><span class=p>,</span> <span class=n>label</span><span class=p>,</span> <span class=n>exc_info</span><span class=p>,</span> <span class=n>add_traceback</span>
                <span class=p>)</span>
            <span class=p>)</span>

    <span class=k>if</span> <span class=n>failed_info</span><span class=p>:</span>
        <span class=k>raise</span> <span class=n>CreatorsRemoveFailed</span><span class=p>(</span><span class=n>failed_info</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.reset class="doc doc-heading"> <code class="highlight language-python"><span class=n>reset</span><span class=p>(</span><span class=n>discover_publish_plugins</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Reset context with all plugins and instances.</p> <p>All changes will be lost if were not saved explicitely.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>545</span>
<span class=normal>546</span>
<span class=normal>547</span>
<span class=normal>548</span>
<span class=normal>549</span>
<span class=normal>550</span>
<span class=normal>551</span>
<span class=normal>552</span>
<span class=normal>553</span>
<span class=normal>554</span>
<span class=normal>555</span>
<span class=normal>556</span>
<span class=normal>557</span>
<span class=normal>558</span>
<span class=normal>559</span>
<span class=normal>560</span>
<span class=normal>561</span>
<span class=normal>562</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>reset</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>discover_publish_plugins</span><span class=o>=</span><span class=kc>True</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Reset context with all plugins and instances.</span>

<span class=sd>    All changes will be lost if were not saved explicitely.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>reset_preparation</span><span class=p>()</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>reset_current_context</span><span class=p>()</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>reset_plugins</span><span class=p>(</span><span class=n>discover_publish_plugins</span><span class=p>)</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>reset_context_data</span><span class=p>()</span>

    <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>bulk_add_instances</span><span class=p>():</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>reset_instances</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>find_convertor_items</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>execute_autocreators</span><span class=p>()</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>reset_finalization</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.reset_context_data class="doc doc-heading"> <code class="highlight language-python"><span class=n>reset_context_data</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Reload context data using host implementation.</p> <p>These data are not related to any instance but may be needed for whole publishing.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>810</span>
<span class=normal>811</span>
<span class=normal>812</span>
<span class=normal>813</span>
<span class=normal>814</span>
<span class=normal>815</span>
<span class=normal>816</span>
<span class=normal>817</span>
<span class=normal>818</span>
<span class=normal>819</span>
<span class=normal>820</span>
<span class=normal>821</span>
<span class=normal>822</span>
<span class=normal>823</span>
<span class=normal>824</span>
<span class=normal>825</span>
<span class=normal>826</span>
<span class=normal>827</span>
<span class=normal>828</span>
<span class=normal>829</span>
<span class=normal>830</span>
<span class=normal>831</span>
<span class=normal>832</span>
<span class=normal>833</span>
<span class=normal>834</span>
<span class=normal>835</span>
<span class=normal>836</span>
<span class=normal>837</span>
<span class=normal>838</span>
<span class=normal>839</span>
<span class=normal>840</span>
<span class=normal>841</span>
<span class=normal>842</span>
<span class=normal>843</span>
<span class=normal>844</span>
<span class=normal>845</span>
<span class=normal>846</span>
<span class=normal>847</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>reset_context_data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Reload context data using host implementation.</span>

<span class=sd>    These data are not related to any instance but may be needed for whole</span>
<span class=sd>    publishing.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>host_is_valid</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_original_context_data</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_publish_attributes</span> <span class=o>=</span> <span class=n>PublishAttributes</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=p>{})</span>
        <span class=k>return</span>

    <span class=n>original_data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=o>.</span><span class=n>get_context_data</span><span class=p>()</span> <span class=ow>or</span> <span class=p>{}</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_original_context_data</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=n>original_data</span><span class=p>)</span>

    <span class=n>publish_attributes</span> <span class=o>=</span> <span class=n>original_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;publish_attributes&quot;</span><span class=p>)</span> <span class=ow>or</span> <span class=p>{}</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_publish_attributes</span> <span class=o>=</span> <span class=n>PublishAttributes</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span> <span class=n>publish_attributes</span>
    <span class=p>)</span>

    <span class=k>for</span> <span class=n>plugin</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>plugins_with_defs</span><span class=p>:</span>
        <span class=k>if</span> <span class=n>is_func_signature_supported</span><span class=p>(</span>
            <span class=n>plugin</span><span class=o>.</span><span class=n>convert_attribute_values</span><span class=p>,</span> <span class=bp>self</span><span class=p>,</span> <span class=kc>None</span>
        <span class=p>):</span>
            <span class=n>plugin</span><span class=o>.</span><span class=n>convert_attribute_values</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>

        <span class=k>elif</span> <span class=ow>not</span> <span class=n>plugin</span><span class=o>.</span><span class=n>__instanceEnabled__</span><span class=p>:</span>
            <span class=n>output</span> <span class=o>=</span> <span class=n>plugin</span><span class=o>.</span><span class=n>convert_attribute_values</span><span class=p>(</span><span class=n>publish_attributes</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>output</span><span class=p>:</span>
                <span class=n>publish_attributes</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>output</span><span class=p>)</span>

    <span class=k>for</span> <span class=n>plugin</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>plugins_with_defs</span><span class=p>:</span>
        <span class=n>attr_defs</span> <span class=o>=</span> <span class=n>plugin</span><span class=o>.</span><span class=n>get_attr_defs_for_context</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>attr_defs</span><span class=p>:</span>
            <span class=k>continue</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_publish_attributes</span><span class=o>.</span><span class=n>set_publish_plugin_attr_defs</span><span class=p>(</span>
            <span class=n>plugin</span><span class=o>.</span><span class=vm>__name__</span><span class=p>,</span> <span class=n>attr_defs</span>
        <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.reset_current_context class="doc doc-heading"> <code class="highlight language-python"><span class=n>reset_current_context</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Refresh current context.</p> <p>Reset is based on optional host implementation of <code>get_current_context</code> function.</p> <p>Some hosts have ability to change context file without using workfiles tool but that change is not propagated to 'os.environ'.</p> <details class=todos open> <summary>Todos</summary> <p>UI: Current context should be also checked on save - compare initial values vs. current values. Related to UI checks: Current workfile can be also considered as current context information as that's where the metadata are stored. We should store the workfile (if is available) too.</p> </details> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>622</span>
<span class=normal>623</span>
<span class=normal>624</span>
<span class=normal>625</span>
<span class=normal>626</span>
<span class=normal>627</span>
<span class=normal>628</span>
<span class=normal>629</span>
<span class=normal>630</span>
<span class=normal>631</span>
<span class=normal>632</span>
<span class=normal>633</span>
<span class=normal>634</span>
<span class=normal>635</span>
<span class=normal>636</span>
<span class=normal>637</span>
<span class=normal>638</span>
<span class=normal>639</span>
<span class=normal>640</span>
<span class=normal>641</span>
<span class=normal>642</span>
<span class=normal>643</span>
<span class=normal>644</span>
<span class=normal>645</span>
<span class=normal>646</span>
<span class=normal>647</span>
<span class=normal>648</span>
<span class=normal>649</span>
<span class=normal>650</span>
<span class=normal>651</span>
<span class=normal>652</span>
<span class=normal>653</span>
<span class=normal>654</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>reset_current_context</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Refresh current context.</span>

<span class=sd>    Reset is based on optional host implementation of `get_current_context`</span>
<span class=sd>    function.</span>

<span class=sd>    Some hosts have ability to change context file without using workfiles</span>
<span class=sd>    tool but that change is not propagated to &#39;os.environ&#39;.</span>

<span class=sd>    Todos:</span>
<span class=sd>        UI: Current context should be also checked on save - compare</span>
<span class=sd>            initial values vs. current values.</span>
<span class=sd>        Related to UI checks: Current workfile can be also considered</span>
<span class=sd>            as current context information as that&#39;s where the metadata</span>
<span class=sd>            are stored. We should store the workfile (if is available) too.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>project_name</span><span class=p>,</span> <span class=n>folder_path</span><span class=p>,</span> <span class=n>task_name</span><span class=p>,</span> <span class=n>workfile_path</span> <span class=o>=</span> <span class=p>(</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_get_current_host_context</span><span class=p>()</span>
    <span class=p>)</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_current_project_name</span> <span class=o>=</span> <span class=n>project_name</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_current_folder_path</span> <span class=o>=</span> <span class=n>folder_path</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_current_task_name</span> <span class=o>=</span> <span class=n>task_name</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_current_workfile_path</span> <span class=o>=</span> <span class=n>workfile_path</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_current_project_entity</span> <span class=o>=</span> <span class=n>_NOT_SET</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_current_folder_entity</span> <span class=o>=</span> <span class=n>_NOT_SET</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_current_task_entity</span> <span class=o>=</span> <span class=n>_NOT_SET</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_current_task_type</span> <span class=o>=</span> <span class=n>_NOT_SET</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_current_project_anatomy</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_current_project_settings</span> <span class=o>=</span> <span class=kc>None</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.reset_finalization class="doc doc-heading"> <code class="highlight language-python"><span class=n>reset_finalization</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Cleanup of attributes after reset.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>601</span>
<span class=normal>602</span>
<span class=normal>603</span>
<span class=normal>604</span>
<span class=normal>605</span>
<span class=normal>606</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>reset_finalization</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Cleanup of attributes after reset.&quot;&quot;&quot;</span>

    <span class=c1># Stop access to collection shared data</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_collection_shared_data</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>refresh_thumbnails</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.reset_instances class="doc doc-heading"> <code class="highlight language-python"><span class=n>reset_instances</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Reload instances</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1380</span>
<span class=normal>1381</span>
<span class=normal>1382</span>
<span class=normal>1383</span>
<span class=normal>1384</span>
<span class=normal>1385</span>
<span class=normal>1386</span>
<span class=normal>1387</span>
<span class=normal>1388</span>
<span class=normal>1389</span>
<span class=normal>1390</span>
<span class=normal>1391</span>
<span class=normal>1392</span>
<span class=normal>1393</span>
<span class=normal>1394</span>
<span class=normal>1395</span>
<span class=normal>1396</span>
<span class=normal>1397</span>
<span class=normal>1398</span>
<span class=normal>1399</span>
<span class=normal>1400</span>
<span class=normal>1401</span>
<span class=normal>1402</span>
<span class=normal>1403</span>
<span class=normal>1404</span>
<span class=normal>1405</span>
<span class=normal>1406</span>
<span class=normal>1407</span>
<span class=normal>1408</span>
<span class=normal>1409</span>
<span class=normal>1410</span>
<span class=normal>1411</span>
<span class=normal>1412</span>
<span class=normal>1413</span>
<span class=normal>1414</span>
<span class=normal>1415</span>
<span class=normal>1416</span>
<span class=normal>1417</span>
<span class=normal>1418</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>reset_instances</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Reload instances&quot;&quot;&quot;</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_instances_by_id</span> <span class=o>=</span> <span class=n>collections</span><span class=o>.</span><span class=n>OrderedDict</span><span class=p>()</span>

    <span class=c1># Collect instances</span>
    <span class=n>error_message</span> <span class=o>=</span> <span class=s2>&quot;Collection of instances for creator </span><span class=si>{}</span><span class=s2> failed. </span><span class=si>{}</span><span class=s2>&quot;</span>
    <span class=n>failed_info</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>for</span> <span class=n>creator</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>sorted_creators</span><span class=p>:</span>
        <span class=n>label</span> <span class=o>=</span> <span class=n>creator</span><span class=o>.</span><span class=n>label</span>
        <span class=n>identifier</span> <span class=o>=</span> <span class=n>creator</span><span class=o>.</span><span class=n>identifier</span>
        <span class=n>failed</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=n>add_traceback</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=n>exc_info</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=n>creator</span><span class=o>.</span><span class=n>collect_instances</span><span class=p>()</span>

        <span class=k>except</span> <span class=n>CreatorError</span><span class=p>:</span>
            <span class=n>failed</span> <span class=o>=</span> <span class=kc>True</span>
            <span class=n>exc_info</span> <span class=o>=</span> <span class=n>sys</span><span class=o>.</span><span class=n>exc_info</span><span class=p>()</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=n>error_message</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>identifier</span><span class=p>,</span> <span class=n>exc_info</span><span class=p>[</span><span class=mi>1</span><span class=p>]))</span>

        <span class=k>except</span><span class=p>:</span>  <span class=c1># noqa: E722</span>
            <span class=n>failed</span> <span class=o>=</span> <span class=kc>True</span>
            <span class=n>add_traceback</span> <span class=o>=</span> <span class=kc>True</span>
            <span class=n>exc_info</span> <span class=o>=</span> <span class=n>sys</span><span class=o>.</span><span class=n>exc_info</span><span class=p>()</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
                <span class=n>error_message</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>identifier</span><span class=p>,</span> <span class=s2>&quot;&quot;</span><span class=p>),</span>
                <span class=n>exc_info</span><span class=o>=</span><span class=kc>True</span>
            <span class=p>)</span>

        <span class=k>if</span> <span class=n>failed</span><span class=p>:</span>
            <span class=n>failed_info</span><span class=o>.</span><span class=n>append</span><span class=p>(</span>
                <span class=n>prepare_failed_creator_operation_info</span><span class=p>(</span>
                    <span class=n>identifier</span><span class=p>,</span> <span class=n>label</span><span class=p>,</span> <span class=n>exc_info</span><span class=p>,</span> <span class=n>add_traceback</span>
                <span class=p>)</span>
            <span class=p>)</span>

    <span class=k>if</span> <span class=n>failed_info</span><span class=p>:</span>
        <span class=k>raise</span> <span class=n>CreatorsCollectionFailed</span><span class=p>(</span><span class=n>failed_info</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.reset_plugins class="doc doc-heading"> <code class="highlight language-python"><span class=n>reset_plugins</span><span class=p>(</span><span class=n>discover_publish_plugins</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Reload plugins.</p> <p>Reloads creators from preregistered paths and can load publish plugins if it's enabled on context.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>656</span>
<span class=normal>657</span>
<span class=normal>658</span>
<span class=normal>659</span>
<span class=normal>660</span>
<span class=normal>661</span>
<span class=normal>662</span>
<span class=normal>663</span>
<span class=normal>664</span>
<span class=normal>665</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>reset_plugins</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>discover_publish_plugins</span><span class=o>=</span><span class=kc>True</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Reload plugins.</span>

<span class=sd>    Reloads creators from preregistered paths and can load publish plugins</span>
<span class=sd>    if it&#39;s enabled on context.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_reset_publish_plugins</span><span class=p>(</span><span class=n>discover_publish_plugins</span><span class=p>)</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_reset_creator_plugins</span><span class=p>()</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_reset_convertor_plugins</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.reset_preparation class="doc doc-heading"> <code class="highlight language-python"><span class=n>reset_preparation</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Prepare attributes that must be prepared/cleaned before reset.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>587</span>
<span class=normal>588</span>
<span class=normal>589</span>
<span class=normal>590</span>
<span class=normal>591</span>
<span class=normal>592</span>
<span class=normal>593</span>
<span class=normal>594</span>
<span class=normal>595</span>
<span class=normal>596</span>
<span class=normal>597</span>
<span class=normal>598</span>
<span class=normal>599</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>reset_preparation</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Prepare attributes that must be prepared/cleaned before reset.&quot;&quot;&quot;</span>

    <span class=c1># Give ability to store shared data for collection phase</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_collection_shared_data</span> <span class=o>=</span> <span class=p>{}</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_folder_entities_by_path</span> <span class=o>=</span> <span class=p>{}</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_task_entities_by_id</span> <span class=o>=</span> <span class=p>{}</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_task_ids_by_folder_path</span> <span class=o>=</span> <span class=p>{}</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_task_names_by_folder_path</span> <span class=o>=</span> <span class=p>{}</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_event_hub</span><span class=o>.</span><span class=n>clear_callbacks</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.run_convertor class="doc doc-heading"> <code class="highlight language-python"><span class=n>run_convertor</span><span class=p>(</span><span class=n>convertor_identifier</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Run convertor plugin by identifier.</p> <p>Conversion is skipped if convertor is not available.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>convertor_identifier</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Identifier of convertor.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>2032</span>
<span class=normal>2033</span>
<span class=normal>2034</span>
<span class=normal>2035</span>
<span class=normal>2036</span>
<span class=normal>2037</span>
<span class=normal>2038</span>
<span class=normal>2039</span>
<span class=normal>2040</span>
<span class=normal>2041</span>
<span class=normal>2042</span>
<span class=normal>2043</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>run_convertor</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>convertor_identifier</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Run convertor plugin by identifier.</span>

<span class=sd>    Conversion is skipped if convertor is not available.</span>

<span class=sd>    Args:</span>
<span class=sd>        convertor_identifier (str): Identifier of convertor.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>convertor</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>convertors_plugins</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>convertor_identifier</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>convertor</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>convertor</span><span class=o>.</span><span class=n>convert</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.run_convertors class="doc doc-heading"> <code class="highlight language-python"><span class=n>run_convertors</span><span class=p>(</span><span class=n>convertor_identifiers</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Run convertor plugins by identifiers.</p> <p>Conversion is skipped if convertor is not available. It is recommended to trigger reset after conversion to reload instances.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>convertor_identifiers</code> </td> <td> <code><span title=Iterator>Iterator</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Identifiers of convertors to run.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=client.ayon_core.pipeline.create.exceptions.ConvertorsConversionFailed>ConvertorsConversionFailed</span></code> </td> <td> <div class=doc-md-description> <p>When one or more convertors fails.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>2045</span>
<span class=normal>2046</span>
<span class=normal>2047</span>
<span class=normal>2048</span>
<span class=normal>2049</span>
<span class=normal>2050</span>
<span class=normal>2051</span>
<span class=normal>2052</span>
<span class=normal>2053</span>
<span class=normal>2054</span>
<span class=normal>2055</span>
<span class=normal>2056</span>
<span class=normal>2057</span>
<span class=normal>2058</span>
<span class=normal>2059</span>
<span class=normal>2060</span>
<span class=normal>2061</span>
<span class=normal>2062</span>
<span class=normal>2063</span>
<span class=normal>2064</span>
<span class=normal>2065</span>
<span class=normal>2066</span>
<span class=normal>2067</span>
<span class=normal>2068</span>
<span class=normal>2069</span>
<span class=normal>2070</span>
<span class=normal>2071</span>
<span class=normal>2072</span>
<span class=normal>2073</span>
<span class=normal>2074</span>
<span class=normal>2075</span>
<span class=normal>2076</span>
<span class=normal>2077</span>
<span class=normal>2078</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>run_convertors</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>convertor_identifiers</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Run convertor plugins by identifiers.</span>

<span class=sd>    Conversion is skipped if convertor is not available. It is recommended</span>
<span class=sd>    to trigger reset after conversion to reload instances.</span>

<span class=sd>    Args:</span>
<span class=sd>        convertor_identifiers (Iterator[str]): Identifiers of convertors</span>
<span class=sd>            to run.</span>

<span class=sd>    Raises:</span>
<span class=sd>        ConvertorsConversionFailed: When one or more convertors fails.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>failed_info</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>for</span> <span class=n>convertor_identifier</span> <span class=ow>in</span> <span class=n>convertor_identifiers</span><span class=p>:</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>run_convertor</span><span class=p>(</span><span class=n>convertor_identifier</span><span class=p>)</span>

        <span class=k>except</span><span class=p>:</span>  <span class=c1># noqa: E722</span>
            <span class=n>failed_info</span><span class=o>.</span><span class=n>append</span><span class=p>(</span>
                <span class=n>prepare_failed_convertor_operation_info</span><span class=p>(</span>
                    <span class=n>convertor_identifier</span><span class=p>,</span> <span class=n>sys</span><span class=o>.</span><span class=n>exc_info</span><span class=p>()</span>
                <span class=p>)</span>
            <span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
                <span class=s2>&quot;Failed to convert instances of convertor </span><span class=se>\&quot;</span><span class=si>{}</span><span class=se>\&quot;</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                    <span class=n>convertor_identifier</span>
                <span class=p>),</span>
                <span class=n>exc_info</span><span class=o>=</span><span class=kc>True</span>
            <span class=p>)</span>

    <span class=k>if</span> <span class=n>failed_info</span><span class=p>:</span>
        <span class=k>raise</span> <span class=n>ConvertorsConversionFailed</span><span class=p>(</span><span class=n>failed_info</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.save_changes class="doc doc-heading"> <code class="highlight language-python"><span class=n>save_changes</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Save changes. Update all changed values.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1865</span>
<span class=normal>1866</span>
<span class=normal>1867</span>
<span class=normal>1868</span>
<span class=normal>1869</span>
<span class=normal>1870</span>
<span class=normal>1871</span>
<span class=normal>1872</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>save_changes</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Save changes. Update all changed values.&quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>host_is_valid</span><span class=p>:</span>
        <span class=n>missing_methods</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_host_misssing_methods</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=p>)</span>
        <span class=k>raise</span> <span class=n>HostMissRequiredMethod</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=p>,</span> <span class=n>missing_methods</span><span class=p>)</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_save_context_changes</span><span class=p>()</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_save_instance_changes</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreateContext.set_context_publish_plugin_attr_defs class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_context_publish_plugin_attr_defs</span><span class=p>(</span><span class=n>plugin_name</span><span class=p>,</span> <span class=n>attr_defs</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Set attribute definitions for CreateContext publish plugin.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>plugin_name(str)</code> </td> <td> </td> <td> <div class=doc-md-description> <p>Name of publish plugin.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>attr_defs(List[AbstractAttrDef])</code> </td> <td> </td> <td> <div class=doc-md-description> <p>Attribute definitions.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/context.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1041</span>
<span class=normal>1042</span>
<span class=normal>1043</span>
<span class=normal>1044</span>
<span class=normal>1045</span>
<span class=normal>1046</span>
<span class=normal>1047</span>
<span class=normal>1048</span>
<span class=normal>1049</span>
<span class=normal>1050</span>
<span class=normal>1051</span>
<span class=normal>1052</span>
<span class=normal>1053</span>
<span class=normal>1054</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_context_publish_plugin_attr_defs</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>plugin_name</span><span class=p>,</span> <span class=n>attr_defs</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Set attribute definitions for CreateContext publish plugin.</span>

<span class=sd>    Args:</span>
<span class=sd>        plugin_name(str): Name of publish plugin.</span>
<span class=sd>        attr_defs(List[AbstractAttrDef]): Attribute definitions.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>publish_attributes</span><span class=o>.</span><span class=n>set_publish_plugin_attr_defs</span><span class=p>(</span>
        <span class=n>plugin_name</span><span class=p>,</span> <span class=n>attr_defs</span>
    <span class=p>)</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>instance_publish_attr_defs_changed</span><span class=p>(</span>
        <span class=kc>None</span><span class=p>,</span> <span class=n>plugin_name</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.create.CreatedInstance class="doc doc-heading"> <code>CreatedInstance</code> </h2> <div class="doc doc-contents "> <p>Instance entity with data that will be stored to workfile.</p> <p>I think <code>data</code> must be required argument containing all minimum information about instance like "folderPath" and "task" and all data used for filling product name as creators may have custom data for product name filling.</p> <details class=notes open> <summary>Notes</summary> <p>Object have 2 possible initialization. One using 'creator' object which is recommended for api usage. Second by passing information about creator.</p> </details> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>product_type</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Product type that will be created.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>product_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Name of product that will be created.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>data</code> </td> <td> <code><span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Data used for filling product name or override data from already existing instance.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>creator</code> </td> <td> <code><a class="autorefs autorefs-internal" title="BaseCreator (client.ayon_core.pipeline.create.creator_plugins.BaseCreator)" href=creator_plugins.html#client.ayon_core.pipeline.create.creator_plugins.BaseCreator>BaseCreator</a></code> </td> <td> <div class=doc-md-description> <p>Creator responsible for instance.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>409</span>
<span class=normal>410</span>
<span class=normal>411</span>
<span class=normal>412</span>
<span class=normal>413</span>
<span class=normal>414</span>
<span class=normal>415</span>
<span class=normal>416</span>
<span class=normal>417</span>
<span class=normal>418</span>
<span class=normal>419</span>
<span class=normal>420</span>
<span class=normal>421</span>
<span class=normal>422</span>
<span class=normal>423</span>
<span class=normal>424</span>
<span class=normal>425</span>
<span class=normal>426</span>
<span class=normal>427</span>
<span class=normal>428</span>
<span class=normal>429</span>
<span class=normal>430</span>
<span class=normal>431</span>
<span class=normal>432</span>
<span class=normal>433</span>
<span class=normal>434</span>
<span class=normal>435</span>
<span class=normal>436</span>
<span class=normal>437</span>
<span class=normal>438</span>
<span class=normal>439</span>
<span class=normal>440</span>
<span class=normal>441</span>
<span class=normal>442</span>
<span class=normal>443</span>
<span class=normal>444</span>
<span class=normal>445</span>
<span class=normal>446</span>
<span class=normal>447</span>
<span class=normal>448</span>
<span class=normal>449</span>
<span class=normal>450</span>
<span class=normal>451</span>
<span class=normal>452</span>
<span class=normal>453</span>
<span class=normal>454</span>
<span class=normal>455</span>
<span class=normal>456</span>
<span class=normal>457</span>
<span class=normal>458</span>
<span class=normal>459</span>
<span class=normal>460</span>
<span class=normal>461</span>
<span class=normal>462</span>
<span class=normal>463</span>
<span class=normal>464</span>
<span class=normal>465</span>
<span class=normal>466</span>
<span class=normal>467</span>
<span class=normal>468</span>
<span class=normal>469</span>
<span class=normal>470</span>
<span class=normal>471</span>
<span class=normal>472</span>
<span class=normal>473</span>
<span class=normal>474</span>
<span class=normal>475</span>
<span class=normal>476</span>
<span class=normal>477</span>
<span class=normal>478</span>
<span class=normal>479</span>
<span class=normal>480</span>
<span class=normal>481</span>
<span class=normal>482</span>
<span class=normal>483</span>
<span class=normal>484</span>
<span class=normal>485</span>
<span class=normal>486</span>
<span class=normal>487</span>
<span class=normal>488</span>
<span class=normal>489</span>
<span class=normal>490</span>
<span class=normal>491</span>
<span class=normal>492</span>
<span class=normal>493</span>
<span class=normal>494</span>
<span class=normal>495</span>
<span class=normal>496</span>
<span class=normal>497</span>
<span class=normal>498</span>
<span class=normal>499</span>
<span class=normal>500</span>
<span class=normal>501</span>
<span class=normal>502</span>
<span class=normal>503</span>
<span class=normal>504</span>
<span class=normal>505</span>
<span class=normal>506</span>
<span class=normal>507</span>
<span class=normal>508</span>
<span class=normal>509</span>
<span class=normal>510</span>
<span class=normal>511</span>
<span class=normal>512</span>
<span class=normal>513</span>
<span class=normal>514</span>
<span class=normal>515</span>
<span class=normal>516</span>
<span class=normal>517</span>
<span class=normal>518</span>
<span class=normal>519</span>
<span class=normal>520</span>
<span class=normal>521</span>
<span class=normal>522</span>
<span class=normal>523</span>
<span class=normal>524</span>
<span class=normal>525</span>
<span class=normal>526</span>
<span class=normal>527</span>
<span class=normal>528</span>
<span class=normal>529</span>
<span class=normal>530</span>
<span class=normal>531</span>
<span class=normal>532</span>
<span class=normal>533</span>
<span class=normal>534</span>
<span class=normal>535</span>
<span class=normal>536</span>
<span class=normal>537</span>
<span class=normal>538</span>
<span class=normal>539</span>
<span class=normal>540</span>
<span class=normal>541</span>
<span class=normal>542</span>
<span class=normal>543</span>
<span class=normal>544</span>
<span class=normal>545</span>
<span class=normal>546</span>
<span class=normal>547</span>
<span class=normal>548</span>
<span class=normal>549</span>
<span class=normal>550</span>
<span class=normal>551</span>
<span class=normal>552</span>
<span class=normal>553</span>
<span class=normal>554</span>
<span class=normal>555</span>
<span class=normal>556</span>
<span class=normal>557</span>
<span class=normal>558</span>
<span class=normal>559</span>
<span class=normal>560</span>
<span class=normal>561</span>
<span class=normal>562</span>
<span class=normal>563</span>
<span class=normal>564</span>
<span class=normal>565</span>
<span class=normal>566</span>
<span class=normal>567</span>
<span class=normal>568</span>
<span class=normal>569</span>
<span class=normal>570</span>
<span class=normal>571</span>
<span class=normal>572</span>
<span class=normal>573</span>
<span class=normal>574</span>
<span class=normal>575</span>
<span class=normal>576</span>
<span class=normal>577</span>
<span class=normal>578</span>
<span class=normal>579</span>
<span class=normal>580</span>
<span class=normal>581</span>
<span class=normal>582</span>
<span class=normal>583</span>
<span class=normal>584</span>
<span class=normal>585</span>
<span class=normal>586</span>
<span class=normal>587</span>
<span class=normal>588</span>
<span class=normal>589</span>
<span class=normal>590</span>
<span class=normal>591</span>
<span class=normal>592</span>
<span class=normal>593</span>
<span class=normal>594</span>
<span class=normal>595</span>
<span class=normal>596</span>
<span class=normal>597</span>
<span class=normal>598</span>
<span class=normal>599</span>
<span class=normal>600</span>
<span class=normal>601</span>
<span class=normal>602</span>
<span class=normal>603</span>
<span class=normal>604</span>
<span class=normal>605</span>
<span class=normal>606</span>
<span class=normal>607</span>
<span class=normal>608</span>
<span class=normal>609</span>
<span class=normal>610</span>
<span class=normal>611</span>
<span class=normal>612</span>
<span class=normal>613</span>
<span class=normal>614</span>
<span class=normal>615</span>
<span class=normal>616</span>
<span class=normal>617</span>
<span class=normal>618</span>
<span class=normal>619</span>
<span class=normal>620</span>
<span class=normal>621</span>
<span class=normal>622</span>
<span class=normal>623</span>
<span class=normal>624</span>
<span class=normal>625</span>
<span class=normal>626</span>
<span class=normal>627</span>
<span class=normal>628</span>
<span class=normal>629</span>
<span class=normal>630</span>
<span class=normal>631</span>
<span class=normal>632</span>
<span class=normal>633</span>
<span class=normal>634</span>
<span class=normal>635</span>
<span class=normal>636</span>
<span class=normal>637</span>
<span class=normal>638</span>
<span class=normal>639</span>
<span class=normal>640</span>
<span class=normal>641</span>
<span class=normal>642</span>
<span class=normal>643</span>
<span class=normal>644</span>
<span class=normal>645</span>
<span class=normal>646</span>
<span class=normal>647</span>
<span class=normal>648</span>
<span class=normal>649</span>
<span class=normal>650</span>
<span class=normal>651</span>
<span class=normal>652</span>
<span class=normal>653</span>
<span class=normal>654</span>
<span class=normal>655</span>
<span class=normal>656</span>
<span class=normal>657</span>
<span class=normal>658</span>
<span class=normal>659</span>
<span class=normal>660</span>
<span class=normal>661</span>
<span class=normal>662</span>
<span class=normal>663</span>
<span class=normal>664</span>
<span class=normal>665</span>
<span class=normal>666</span>
<span class=normal>667</span>
<span class=normal>668</span>
<span class=normal>669</span>
<span class=normal>670</span>
<span class=normal>671</span>
<span class=normal>672</span>
<span class=normal>673</span>
<span class=normal>674</span>
<span class=normal>675</span>
<span class=normal>676</span>
<span class=normal>677</span>
<span class=normal>678</span>
<span class=normal>679</span>
<span class=normal>680</span>
<span class=normal>681</span>
<span class=normal>682</span>
<span class=normal>683</span>
<span class=normal>684</span>
<span class=normal>685</span>
<span class=normal>686</span>
<span class=normal>687</span>
<span class=normal>688</span>
<span class=normal>689</span>
<span class=normal>690</span>
<span class=normal>691</span>
<span class=normal>692</span>
<span class=normal>693</span>
<span class=normal>694</span>
<span class=normal>695</span>
<span class=normal>696</span>
<span class=normal>697</span>
<span class=normal>698</span>
<span class=normal>699</span>
<span class=normal>700</span>
<span class=normal>701</span>
<span class=normal>702</span>
<span class=normal>703</span>
<span class=normal>704</span>
<span class=normal>705</span>
<span class=normal>706</span>
<span class=normal>707</span>
<span class=normal>708</span>
<span class=normal>709</span>
<span class=normal>710</span>
<span class=normal>711</span>
<span class=normal>712</span>
<span class=normal>713</span>
<span class=normal>714</span>
<span class=normal>715</span>
<span class=normal>716</span>
<span class=normal>717</span>
<span class=normal>718</span>
<span class=normal>719</span>
<span class=normal>720</span>
<span class=normal>721</span>
<span class=normal>722</span>
<span class=normal>723</span>
<span class=normal>724</span>
<span class=normal>725</span>
<span class=normal>726</span>
<span class=normal>727</span>
<span class=normal>728</span>
<span class=normal>729</span>
<span class=normal>730</span>
<span class=normal>731</span>
<span class=normal>732</span>
<span class=normal>733</span>
<span class=normal>734</span>
<span class=normal>735</span>
<span class=normal>736</span>
<span class=normal>737</span>
<span class=normal>738</span>
<span class=normal>739</span>
<span class=normal>740</span>
<span class=normal>741</span>
<span class=normal>742</span>
<span class=normal>743</span>
<span class=normal>744</span>
<span class=normal>745</span>
<span class=normal>746</span>
<span class=normal>747</span>
<span class=normal>748</span>
<span class=normal>749</span>
<span class=normal>750</span>
<span class=normal>751</span>
<span class=normal>752</span>
<span class=normal>753</span>
<span class=normal>754</span>
<span class=normal>755</span>
<span class=normal>756</span>
<span class=normal>757</span>
<span class=normal>758</span>
<span class=normal>759</span>
<span class=normal>760</span>
<span class=normal>761</span>
<span class=normal>762</span>
<span class=normal>763</span>
<span class=normal>764</span>
<span class=normal>765</span>
<span class=normal>766</span>
<span class=normal>767</span>
<span class=normal>768</span>
<span class=normal>769</span>
<span class=normal>770</span>
<span class=normal>771</span>
<span class=normal>772</span>
<span class=normal>773</span>
<span class=normal>774</span>
<span class=normal>775</span>
<span class=normal>776</span>
<span class=normal>777</span>
<span class=normal>778</span>
<span class=normal>779</span>
<span class=normal>780</span>
<span class=normal>781</span>
<span class=normal>782</span>
<span class=normal>783</span>
<span class=normal>784</span>
<span class=normal>785</span>
<span class=normal>786</span>
<span class=normal>787</span>
<span class=normal>788</span>
<span class=normal>789</span>
<span class=normal>790</span>
<span class=normal>791</span>
<span class=normal>792</span>
<span class=normal>793</span>
<span class=normal>794</span>
<span class=normal>795</span>
<span class=normal>796</span>
<span class=normal>797</span>
<span class=normal>798</span>
<span class=normal>799</span>
<span class=normal>800</span>
<span class=normal>801</span>
<span class=normal>802</span>
<span class=normal>803</span>
<span class=normal>804</span>
<span class=normal>805</span>
<span class=normal>806</span>
<span class=normal>807</span>
<span class=normal>808</span>
<span class=normal>809</span>
<span class=normal>810</span>
<span class=normal>811</span>
<span class=normal>812</span>
<span class=normal>813</span>
<span class=normal>814</span>
<span class=normal>815</span>
<span class=normal>816</span>
<span class=normal>817</span>
<span class=normal>818</span>
<span class=normal>819</span>
<span class=normal>820</span>
<span class=normal>821</span>
<span class=normal>822</span>
<span class=normal>823</span>
<span class=normal>824</span>
<span class=normal>825</span>
<span class=normal>826</span>
<span class=normal>827</span>
<span class=normal>828</span>
<span class=normal>829</span>
<span class=normal>830</span>
<span class=normal>831</span>
<span class=normal>832</span>
<span class=normal>833</span>
<span class=normal>834</span>
<span class=normal>835</span>
<span class=normal>836</span>
<span class=normal>837</span>
<span class=normal>838</span>
<span class=normal>839</span>
<span class=normal>840</span>
<span class=normal>841</span>
<span class=normal>842</span>
<span class=normal>843</span>
<span class=normal>844</span>
<span class=normal>845</span>
<span class=normal>846</span>
<span class=normal>847</span>
<span class=normal>848</span>
<span class=normal>849</span>
<span class=normal>850</span>
<span class=normal>851</span>
<span class=normal>852</span>
<span class=normal>853</span>
<span class=normal>854</span>
<span class=normal>855</span>
<span class=normal>856</span>
<span class=normal>857</span>
<span class=normal>858</span>
<span class=normal>859</span>
<span class=normal>860</span>
<span class=normal>861</span>
<span class=normal>862</span>
<span class=normal>863</span>
<span class=normal>864</span>
<span class=normal>865</span>
<span class=normal>866</span>
<span class=normal>867</span>
<span class=normal>868</span>
<span class=normal>869</span>
<span class=normal>870</span>
<span class=normal>871</span>
<span class=normal>872</span>
<span class=normal>873</span>
<span class=normal>874</span>
<span class=normal>875</span>
<span class=normal>876</span>
<span class=normal>877</span>
<span class=normal>878</span>
<span class=normal>879</span>
<span class=normal>880</span>
<span class=normal>881</span>
<span class=normal>882</span>
<span class=normal>883</span>
<span class=normal>884</span>
<span class=normal>885</span>
<span class=normal>886</span>
<span class=normal>887</span>
<span class=normal>888</span>
<span class=normal>889</span>
<span class=normal>890</span>
<span class=normal>891</span>
<span class=normal>892</span>
<span class=normal>893</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>CreatedInstance</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Instance entity with data that will be stored to workfile.</span>

<span class=sd>    I think `data` must be required argument containing all minimum information</span>
<span class=sd>    about instance like &quot;folderPath&quot; and &quot;task&quot; and all data used for filling</span>
<span class=sd>    product name as creators may have custom data for product name filling.</span>

<span class=sd>    Notes:</span>
<span class=sd>        Object have 2 possible initialization. One using &#39;creator&#39; object which</span>
<span class=sd>            is recommended for api usage. Second by passing information about</span>
<span class=sd>            creator.</span>

<span class=sd>    Args:</span>
<span class=sd>        product_type (str): Product type that will be created.</span>
<span class=sd>        product_name (str): Name of product that will be created.</span>
<span class=sd>        data (Dict[str, Any]): Data used for filling product name or override</span>
<span class=sd>            data from already existing instance.</span>
<span class=sd>        creator (BaseCreator): Creator responsible for instance.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=c1># Keys that can&#39;t be changed or removed from data after loading using</span>
    <span class=c1>#   creator.</span>
    <span class=c1># - &#39;creator_attributes&#39; and &#39;publish_attributes&#39; can change values of</span>
    <span class=c1>#   their individual children but not on their own</span>
    <span class=n>__immutable_keys</span> <span class=o>=</span> <span class=p>(</span>
        <span class=s2>&quot;id&quot;</span><span class=p>,</span>
        <span class=s2>&quot;instance_id&quot;</span><span class=p>,</span>
        <span class=s2>&quot;productType&quot;</span><span class=p>,</span>
        <span class=s2>&quot;creator_identifier&quot;</span><span class=p>,</span>
        <span class=s2>&quot;creator_attributes&quot;</span><span class=p>,</span>
        <span class=s2>&quot;publish_attributes&quot;</span>
    <span class=p>)</span>
    <span class=c1># Keys that can be changed, but should not be removed from instance</span>
    <span class=n>__required_keys</span> <span class=o>=</span> <span class=p>{</span>
        <span class=s2>&quot;folderPath&quot;</span><span class=p>:</span> <span class=kc>None</span><span class=p>,</span>
        <span class=s2>&quot;task&quot;</span><span class=p>:</span> <span class=kc>None</span><span class=p>,</span>
        <span class=s2>&quot;productName&quot;</span><span class=p>:</span> <span class=kc>None</span><span class=p>,</span>
        <span class=s2>&quot;active&quot;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span>
    <span class=p>}</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>product_type</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
        <span class=n>product_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
        <span class=n>data</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>],</span>
        <span class=n>creator</span><span class=p>:</span> <span class=s2>&quot;BaseCreator&quot;</span><span class=p>,</span>
        <span class=n>transient_data</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
    <span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_creator</span> <span class=o>=</span> <span class=n>creator</span>
        <span class=n>creator_identifier</span> <span class=o>=</span> <span class=n>creator</span><span class=o>.</span><span class=n>identifier</span>
        <span class=n>group_label</span> <span class=o>=</span> <span class=n>creator</span><span class=o>.</span><span class=n>get_group_label</span><span class=p>()</span>
        <span class=n>creator_label</span> <span class=o>=</span> <span class=n>creator</span><span class=o>.</span><span class=n>label</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_creator_label</span> <span class=o>=</span> <span class=n>creator_label</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_group_label</span> <span class=o>=</span> <span class=n>group_label</span> <span class=ow>or</span> <span class=n>creator_identifier</span>

        <span class=c1># Instance members may have actions on them</span>
        <span class=c1># TODO implement members logic</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_members</span> <span class=o>=</span> <span class=p>[]</span>

        <span class=c1># Data that can be used for lifetime of object</span>
        <span class=k>if</span> <span class=n>transient_data</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>transient_data</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_transient_data</span> <span class=o>=</span> <span class=n>transient_data</span>

        <span class=c1># Create a copy of passed data to avoid changing them on the fly</span>
        <span class=n>data</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=n>data</span> <span class=ow>or</span> <span class=p>{})</span>

        <span class=c1># Pop dictionary values that will be converted to objects to be able</span>
        <span class=c1>#   catch changes</span>
        <span class=n>orig_creator_attributes</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span> <span class=ow>or</span> <span class=p>{}</span>
        <span class=n>orig_publish_attributes</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s2>&quot;publish_attributes&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span> <span class=ow>or</span> <span class=p>{}</span>

        <span class=c1># Store original value of passed data</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_orig_data</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>

        <span class=c1># Pop &#39;productType&#39; and &#39;productName&#39; to prevent unexpected changes</span>
        <span class=n>data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s2>&quot;productType&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
        <span class=n>data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s2>&quot;productName&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
        <span class=c1># Backwards compatibility with OpenPype instances</span>
        <span class=n>data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s2>&quot;family&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
        <span class=n>data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s2>&quot;subset&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>

        <span class=n>asset_name</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s2>&quot;asset&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
        <span class=k>if</span> <span class=s2>&quot;folderPath&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>data</span><span class=p>:</span>
            <span class=n>data</span><span class=p>[</span><span class=s2>&quot;folderPath&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>asset_name</span>

        <span class=c1># QUESTION Does it make sense to have data stored as ordered dict?</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span> <span class=o>=</span> <span class=n>collections</span><span class=o>.</span><span class=n>OrderedDict</span><span class=p>()</span>
        <span class=c1># QUESTION Do we need this &quot;id&quot; information on instance?</span>
        <span class=n>item_id</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;id&quot;</span><span class=p>)</span>
        <span class=c1># TODO use only &#39;AYON_INSTANCE_ID&#39; when all hosts support it</span>
        <span class=k>if</span> <span class=n>item_id</span> <span class=ow>not</span> <span class=ow>in</span> <span class=p>{</span><span class=n>AYON_INSTANCE_ID</span><span class=p>,</span> <span class=n>AVALON_INSTANCE_ID</span><span class=p>}:</span>
            <span class=n>item_id</span> <span class=o>=</span> <span class=n>AYON_INSTANCE_ID</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>item_id</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;productType&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>product_type</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;productName&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>product_name</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;active&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;active&quot;</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_identifier&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>creator_identifier</span>

        <span class=c1># Pop from source data all keys that are defined in `_data` before</span>
        <span class=c1>#   this moment and through their values away</span>
        <span class=c1># - they should be the same and if are not then should not change</span>
        <span class=c1>#   already set values</span>
        <span class=k>for</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>keys</span><span class=p>():</span>
            <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=n>data</span><span class=p>:</span>
                <span class=n>data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;variant&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;variant&quot;</span><span class=p>)</span> <span class=ow>or</span> <span class=s2>&quot;&quot;</span>
        <span class=c1># Stored creator specific attribute values</span>
        <span class=c1># {key: value}</span>
        <span class=n>creator_values</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=n>orig_creator_attributes</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>creator_values</span>

        <span class=c1># Stored publish specific attribute values</span>
        <span class=c1># {&lt;plugin name&gt;: {key: value}}</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;publish_attributes&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>PublishAttributes</span><span class=p>(</span>
            <span class=bp>self</span><span class=p>,</span> <span class=n>orig_publish_attributes</span>
        <span class=p>)</span>
        <span class=k>if</span> <span class=n>data</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>

        <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>default</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>__required_keys</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>setdefault</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>default</span><span class=p>)</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;instance_id&quot;</span><span class=p>):</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;instance_id&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>uuid4</span><span class=p>())</span>

        <span class=n>creator_attr_defs</span> <span class=o>=</span> <span class=n>creator</span><span class=o>.</span><span class=n>get_attr_defs_for_instance</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>set_create_attr_defs</span><span class=p>(</span>
            <span class=n>creator_attr_defs</span><span class=p>,</span> <span class=n>creator_values</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__str__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=p>(</span>
            <span class=s2>&quot;&lt;CreatedInstance </span><span class=si>{product[name]}</span><span class=s2>&quot;</span>
            <span class=s2>&quot; (</span><span class=si>{product[type]}</span><span class=s2>[</span><span class=si>{creator_identifier}</span><span class=s2>])&gt; </span><span class=si>{data}</span><span class=s2>&quot;</span>
        <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
            <span class=n>creator_identifier</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>creator_identifier</span><span class=p>,</span>
            <span class=n>product</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;name&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>product_name</span><span class=p>,</span> <span class=s2>&quot;type&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>product_type</span><span class=p>},</span>
            <span class=n>data</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>)</span>
        <span class=p>)</span>

    <span class=c1># --- Dictionary like methods ---</span>
    <span class=k>def</span><span class=w> </span><span class=fm>__getitem__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__contains__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__setitem__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
        <span class=c1># Validate immutable keys</span>
        <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>__immutable_keys</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>value</span> <span class=o>==</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>):</span>
                <span class=k>return</span>
            <span class=c1># Raise exception if key is immutable and value has changed</span>
            <span class=k>raise</span> <span class=n>ImmutableKeyError</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>==</span> <span class=n>value</span><span class=p>:</span>
            <span class=k>return</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_create_context</span><span class=o>.</span><span class=n>instance_values_changed</span><span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=p>{</span><span class=n>key</span><span class=p>:</span> <span class=n>value</span><span class=p>}</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>default</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>pop</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
        <span class=c1># Raise exception if is trying to pop key which is immutable</span>
        <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>__immutable_keys</span><span class=p>:</span>
            <span class=k>raise</span> <span class=n>ImmutableKeyError</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>

        <span class=n>has_key</span> <span class=o>=</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span>
        <span class=n>output</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>has_key</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>__required_keys</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>__required_keys</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_create_context</span><span class=o>.</span><span class=n>instance_values_changed</span><span class=p>(</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=p>{</span><span class=n>key</span><span class=p>:</span> <span class=kc>None</span><span class=p>}</span>
            <span class=p>)</span>
        <span class=k>return</span> <span class=n>output</span>

    <span class=k>def</span><span class=w> </span><span class=nf>keys</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>keys</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>values</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>values</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>items</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>items</span><span class=p>()</span>
    <span class=c1># ------</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>product_type</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;productType&quot;</span><span class=p>]</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>product_name</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;productName&quot;</span><span class=p>]</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>label</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=n>label</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;label&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>label</span><span class=p>:</span>
            <span class=n>label</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>product_name</span>
        <span class=k>return</span> <span class=n>label</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>group_label</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=n>label</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;group&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>label</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>label</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_group_label</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>origin_data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=n>output</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_orig_data</span><span class=p>)</span>
        <span class=n>output</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>creator_attributes</span><span class=o>.</span><span class=n>origin_data</span>
        <span class=n>output</span><span class=p>[</span><span class=s2>&quot;publish_attributes&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>publish_attributes</span><span class=o>.</span><span class=n>origin_data</span>
        <span class=k>return</span> <span class=n>output</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>creator_identifier</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_identifier&quot;</span><span class=p>]</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>creator_label</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_creator</span><span class=o>.</span><span class=n>label</span> <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>creator_identifier</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>id</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Instance identifier.</span>

<span class=sd>        Returns:</span>
<span class=sd>            str: UUID of instance.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;instance_id&quot;</span><span class=p>]</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Legacy access to data.</span>

<span class=sd>        Access to data is needed to modify values.</span>

<span class=sd>        Returns:</span>
<span class=sd>            CreatedInstance: Object can be used as dictionary but with</span>
<span class=sd>                validations of immutable keys.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>transient_data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Data stored for lifetime of instance object.</span>

<span class=sd>        These data are not stored to scene and will be lost on object</span>
<span class=sd>        deletion.</span>

<span class=sd>        Can be used to store objects. In some host implementations is not</span>
<span class=sd>        possible to reference to object in scene with some unique identifier</span>
<span class=sd>        (e.g. node in Fusion.). In that case it is handy to store the object</span>
<span class=sd>        here. Should be used that way only if instance data are stored on the</span>
<span class=sd>        node itself.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Dict[str, Any]: Dictionary object where you can store data related</span>
<span class=sd>                to instance for lifetime of instance object.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_transient_data</span>

    <span class=k>def</span><span class=w> </span><span class=nf>changes</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Calculate and return changes.&quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=n>TrackChangesItem</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>origin_data</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>data_to_store</span><span class=p>())</span>

    <span class=k>def</span><span class=w> </span><span class=nf>mark_as_stored</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Should be called when instance data are stored.</span>

<span class=sd>        Origin data are replaced by current data so changes are cleared.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>orig_keys</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_orig_data</span><span class=o>.</span><span class=n>keys</span><span class=p>())</span>
        <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=n>orig_keys</span><span class=o>.</span><span class=n>discard</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=p>(</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>,</span> <span class=s2>&quot;publish_attributes&quot;</span><span class=p>):</span>
                <span class=k>continue</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_orig_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>

        <span class=k>for</span> <span class=n>key</span> <span class=ow>in</span> <span class=n>orig_keys</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_orig_data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>creator_attributes</span><span class=o>.</span><span class=n>mark_as_stored</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>publish_attributes</span><span class=o>.</span><span class=n>mark_as_stored</span><span class=p>()</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>creator_attributes</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>]</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>creator_attribute_defs</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Attribute definitions defined by creator plugin.</span>

<span class=sd>        Returns:</span>
<span class=sd>              List[AbstractAttrDef]: Attribute definitions.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>creator_attributes</span><span class=o>.</span><span class=n>attr_defs</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>publish_attributes</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;publish_attributes&quot;</span><span class=p>]</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>has_promised_context</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get context data that are promised to be set by creator.</span>

<span class=sd>        Returns:</span>
<span class=sd>            bool: Has context that won&#39;t bo validated. Artist can&#39;t change</span>
<span class=sd>                value when set to True.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_transient_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;has_promised_context&quot;</span><span class=p>,</span> <span class=kc>False</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>data_to_store</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Collect data that contain json parsable types.</span>

<span class=sd>        It is possible to recreate the instance using these data.</span>

<span class=sd>        Todos:</span>
<span class=sd>            We probably don&#39;t need OrderedDict. When data are loaded they</span>
<span class=sd>                are not ordered anymore.</span>

<span class=sd>        Returns:</span>
<span class=sd>            OrderedDict: Ordered dictionary with instance data.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>output</span> <span class=o>=</span> <span class=n>collections</span><span class=o>.</span><span class=n>OrderedDict</span><span class=p>()</span>
        <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=p>(</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>,</span> <span class=s2>&quot;publish_attributes&quot;</span><span class=p>):</span>
                <span class=k>continue</span>
            <span class=n>output</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>

        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>creator_attributes</span><span class=p>,</span> <span class=n>AttributeValues</span><span class=p>):</span>
            <span class=n>creator_attributes</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>creator_attributes</span><span class=o>.</span><span class=n>data_to_store</span><span class=p>()</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>creator_attributes</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>creator_attributes</span><span class=p>)</span>
        <span class=n>output</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>creator_attributes</span>
        <span class=n>output</span><span class=p>[</span><span class=s2>&quot;publish_attributes&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>publish_attributes</span><span class=o>.</span><span class=n>data_to_store</span><span class=p>()</span>

        <span class=k>return</span> <span class=n>output</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_create_attr_defs</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>attr_defs</span><span class=p>,</span> <span class=n>value</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Create plugin updates create attribute definitions.</span>

<span class=sd>        Method called by create plugin when attribute definitions should</span>
<span class=sd>            be changed.</span>

<span class=sd>        Args:</span>
<span class=sd>            attr_defs (List[AbstractAttrDef]): Attribute definitions.</span>
<span class=sd>            value (Optional[Dict[str, Any]]): Values of attribute definitions.</span>
<span class=sd>                Current values are used if not passed in.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>value</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>]</span>

        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=n>AttributeValues</span><span class=p>):</span>
            <span class=n>value</span> <span class=o>=</span> <span class=n>value</span><span class=o>.</span><span class=n>data_to_store</span><span class=p>()</span>

        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>],</span> <span class=n>AttributeValues</span><span class=p>):</span>
            <span class=n>origin_data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>origin_data</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>origin_data</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>])</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>CreatorAttributeValues</span><span class=p>(</span>
            <span class=bp>self</span><span class=p>,</span>
            <span class=s2>&quot;creator_attributes&quot;</span><span class=p>,</span>
            <span class=n>attr_defs</span><span class=p>,</span>
            <span class=n>value</span><span class=p>,</span>
            <span class=n>origin_data</span>
        <span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_create_context</span><span class=o>.</span><span class=n>instance_create_attr_defs_changed</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>)</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>from_existing</span><span class=p>(</span>
        <span class=bp>cls</span><span class=p>,</span>
        <span class=n>instance_data</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>],</span>
        <span class=n>creator</span><span class=p>:</span> <span class=s2>&quot;BaseCreator&quot;</span><span class=p>,</span>
        <span class=n>transient_data</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
    <span class=p>)</span> <span class=o>-&gt;</span> <span class=s2>&quot;CreatedInstance&quot;</span><span class=p>:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Convert instance data from workfile to CreatedInstance.</span>

<span class=sd>        Args:</span>
<span class=sd>            instance_data (Dict[str, Any]): Data in a structure ready for</span>
<span class=sd>                &#39;CreatedInstance&#39; object.</span>
<span class=sd>            creator (BaseCreator): Creator plugin which is creating the</span>
<span class=sd>                instance of for which the instance belongs.</span>
<span class=sd>            transient_data (Optional[dict[str, Any]]): Instance transient</span>
<span class=sd>                data.</span>

<span class=sd>        Returns:</span>
<span class=sd>            CreatedInstance: Instance object.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>instance_data</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=n>instance_data</span><span class=p>)</span>

        <span class=n>product_type</span> <span class=o>=</span> <span class=n>instance_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;productType&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>product_type</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>product_type</span> <span class=o>=</span> <span class=n>instance_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;family&quot;</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>product_type</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
                <span class=n>product_type</span> <span class=o>=</span> <span class=n>creator</span><span class=o>.</span><span class=n>product_type</span>
        <span class=n>product_name</span> <span class=o>=</span> <span class=n>instance_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;productName&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>product_name</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>product_name</span> <span class=o>=</span> <span class=n>instance_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;subset&quot;</span><span class=p>)</span>

        <span class=k>return</span> <span class=bp>cls</span><span class=p>(</span>
            <span class=n>product_type</span><span class=p>,</span>
            <span class=n>product_name</span><span class=p>,</span>
            <span class=n>instance_data</span><span class=p>,</span>
            <span class=n>creator</span><span class=p>,</span>
            <span class=n>transient_data</span><span class=o>=</span><span class=n>transient_data</span><span class=p>,</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>attribute_value_changed</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>changes</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;A value changed.</span>

<span class=sd>        Args:</span>
<span class=sd>            key (str): Key of attribute values.</span>
<span class=sd>            changes (Dict[str, Any]): Changes in values.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_create_context</span><span class=o>.</span><span class=n>instance_values_changed</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=p>{</span><span class=n>key</span><span class=p>:</span> <span class=n>changes</span><span class=p>})</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_publish_plugin_attr_defs</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>plugin_name</span><span class=p>,</span> <span class=n>attr_defs</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Set attribute definitions for publish plugin.</span>

<span class=sd>        Args:</span>
<span class=sd>            plugin_name(str): Name of publish plugin.</span>
<span class=sd>            attr_defs(List[AbstractAttrDef]): Attribute definitions.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>publish_attributes</span><span class=o>.</span><span class=n>set_publish_plugin_attr_defs</span><span class=p>(</span>
            <span class=n>plugin_name</span><span class=p>,</span> <span class=n>attr_defs</span>
        <span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_create_context</span><span class=o>.</span><span class=n>instance_publish_attr_defs_changed</span><span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=n>plugin_name</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>publish_attribute_value_changed</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>plugin_name</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Method called from PublishAttributes.</span>

<span class=sd>        Args:</span>
<span class=sd>            plugin_name (str): Plugin name.</span>
<span class=sd>            value (Dict[str, Any]): Changes in values for the plugin.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_create_context</span><span class=o>.</span><span class=n>instance_values_changed</span><span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
            <span class=p>{</span>
                <span class=s2>&quot;publish_attributes&quot;</span><span class=p>:</span> <span class=p>{</span>
                    <span class=n>plugin_name</span><span class=p>:</span> <span class=n>value</span><span class=p>,</span>
                <span class=p>},</span>
            <span class=p>},</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>add_members</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>members</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Currently unused method.&quot;&quot;&quot;</span>

        <span class=k>for</span> <span class=n>member</span> <span class=ow>in</span> <span class=n>members</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>member</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_members</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_members</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>member</span><span class=p>)</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>_create_context</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get create context.</span>

<span class=sd>        Returns:</span>
<span class=sd>            CreateContext: Context object which wraps object.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_creator</span><span class=o>.</span><span class=n>create_context</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.create.CreatedInstance.creator_attribute_defs class="doc doc-heading"> <code class="highlight language-python"><span class=n>creator_attribute_defs</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Attribute definitions defined by creator plugin.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>List[AbstractAttrDef]: Attribute definitions.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.create.CreatedInstance.data class="doc doc-heading"> <code class="highlight language-python"><span class=n>data</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Legacy access to data.</p> <p>Access to data is needed to modify values.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>CreatedInstance</code></td> <td> </td> <td> <div class=doc-md-description> <p>Object can be used as dictionary but with validations of immutable keys.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.create.CreatedInstance.has_promised_context class="doc doc-heading"> <code class="highlight language-python"><span class=n>has_promised_context</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Get context data that are promised to be set by creator.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>bool</code></td> <td> <code><span title=bool>bool</span></code> </td> <td> <div class=doc-md-description> <p>Has context that won't bo validated. Artist can't change value when set to True.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.create.CreatedInstance.id class="doc doc-heading"> <code class="highlight language-python"><span class=nb>id</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Instance identifier.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>UUID of instance.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.create.CreatedInstance.transient_data class="doc doc-heading"> <code class="highlight language-python"><span class=n>transient_data</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Data stored for lifetime of instance object.</p> <p>These data are not stored to scene and will be lost on object deletion.</p> <p>Can be used to store objects. In some host implementations is not possible to reference to object in scene with some unique identifier (e.g. node in Fusion.). In that case it is handy to store the object here. Should be used that way only if instance data are stored on the node itself.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Dict[str, Any]: Dictionary object where you can store data related to instance for lifetime of instance object.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreatedInstance.add_members class="doc doc-heading"> <code class="highlight language-python"><span class=n>add_members</span><span class=p>(</span><span class=n>members</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Currently unused method.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>878</span>
<span class=normal>879</span>
<span class=normal>880</span>
<span class=normal>881</span>
<span class=normal>882</span>
<span class=normal>883</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>add_members</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>members</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Currently unused method.&quot;&quot;&quot;</span>

    <span class=k>for</span> <span class=n>member</span> <span class=ow>in</span> <span class=n>members</span><span class=p>:</span>
        <span class=k>if</span> <span class=n>member</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_members</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_members</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>member</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreatedInstance.attribute_value_changed class="doc doc-heading"> <code class="highlight language-python"><span class=n>attribute_value_changed</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>changes</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>A value changed.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>key</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Key of attribute values.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>changes</code> </td> <td> <code><span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Changes in values.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>836</span>
<span class=normal>837</span>
<span class=normal>838</span>
<span class=normal>839</span>
<span class=normal>840</span>
<span class=normal>841</span>
<span class=normal>842</span>
<span class=normal>843</span>
<span class=normal>844</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>attribute_value_changed</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>changes</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;A value changed.</span>

<span class=sd>    Args:</span>
<span class=sd>        key (str): Key of attribute values.</span>
<span class=sd>        changes (Dict[str, Any]): Changes in values.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_create_context</span><span class=o>.</span><span class=n>instance_values_changed</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=p>{</span><span class=n>key</span><span class=p>:</span> <span class=n>changes</span><span class=p>})</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreatedInstance.changes class="doc doc-heading"> <code class="highlight language-python"><span class=n>changes</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Calculate and return changes.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>684</span>
<span class=normal>685</span>
<span class=normal>686</span>
<span class=normal>687</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>changes</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Calculate and return changes.&quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=n>TrackChangesItem</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>origin_data</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>data_to_store</span><span class=p>())</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreatedInstance.data_to_store class="doc doc-heading"> <code class="highlight language-python"><span class=n>data_to_store</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Collect data that contain json parsable types.</p> <p>It is possible to recreate the instance using these data.</p> <details class=todos open> <summary>Todos</summary> <p>We probably don't need OrderedDict. When data are loaded they are not ordered anymore.</p> </details> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>OrderedDict</code></td> <td> </td> <td> <div class=doc-md-description> <p>Ordered dictionary with instance data.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>737</span>
<span class=normal>738</span>
<span class=normal>739</span>
<span class=normal>740</span>
<span class=normal>741</span>
<span class=normal>742</span>
<span class=normal>743</span>
<span class=normal>744</span>
<span class=normal>745</span>
<span class=normal>746</span>
<span class=normal>747</span>
<span class=normal>748</span>
<span class=normal>749</span>
<span class=normal>750</span>
<span class=normal>751</span>
<span class=normal>752</span>
<span class=normal>753</span>
<span class=normal>754</span>
<span class=normal>755</span>
<span class=normal>756</span>
<span class=normal>757</span>
<span class=normal>758</span>
<span class=normal>759</span>
<span class=normal>760</span>
<span class=normal>761</span>
<span class=normal>762</span>
<span class=normal>763</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>data_to_store</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Collect data that contain json parsable types.</span>

<span class=sd>    It is possible to recreate the instance using these data.</span>

<span class=sd>    Todos:</span>
<span class=sd>        We probably don&#39;t need OrderedDict. When data are loaded they</span>
<span class=sd>            are not ordered anymore.</span>

<span class=sd>    Returns:</span>
<span class=sd>        OrderedDict: Ordered dictionary with instance data.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>output</span> <span class=o>=</span> <span class=n>collections</span><span class=o>.</span><span class=n>OrderedDict</span><span class=p>()</span>
    <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
        <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=p>(</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>,</span> <span class=s2>&quot;publish_attributes&quot;</span><span class=p>):</span>
            <span class=k>continue</span>
        <span class=n>output</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>

    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>creator_attributes</span><span class=p>,</span> <span class=n>AttributeValues</span><span class=p>):</span>
        <span class=n>creator_attributes</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>creator_attributes</span><span class=o>.</span><span class=n>data_to_store</span><span class=p>()</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=n>creator_attributes</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>creator_attributes</span><span class=p>)</span>
    <span class=n>output</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>creator_attributes</span>
    <span class=n>output</span><span class=p>[</span><span class=s2>&quot;publish_attributes&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>publish_attributes</span><span class=o>.</span><span class=n>data_to_store</span><span class=p>()</span>

    <span class=k>return</span> <span class=n>output</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreatedInstance.from_existing class="doc doc-heading"> <code class="highlight language-python"><span class=n>from_existing</span><span class=p>(</span><span class=n>instance_data</span><span class=p>,</span> <span class=n>creator</span><span class=p>,</span> <span class=n>transient_data</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Convert instance data from workfile to CreatedInstance.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>instance_data</code> </td> <td> <code><span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Data in a structure ready for 'CreatedInstance' object.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>creator</code> </td> <td> <code><a class="autorefs autorefs-internal" title="BaseCreator (client.ayon_core.pipeline.create.creator_plugins.BaseCreator)" href=creator_plugins.html#client.ayon_core.pipeline.create.creator_plugins.BaseCreator>BaseCreator</a></code> </td> <td> <div class=doc-md-description> <p>Creator plugin which is creating the instance of for which the instance belongs.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>transient_data</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=dict>dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]]</code> </td> <td> <div class=doc-md-description> <p>Instance transient data.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>CreatedInstance</code></td> <td> <code><a class="autorefs autorefs-internal" title="CreatedInstance (client.ayon_core.pipeline.create.structures.CreatedInstance)" href=structures.html#client.ayon_core.pipeline.create.structures.CreatedInstance>CreatedInstance</a></code> </td> <td> <div class=doc-md-description> <p>Instance object.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>796</span>
<span class=normal>797</span>
<span class=normal>798</span>
<span class=normal>799</span>
<span class=normal>800</span>
<span class=normal>801</span>
<span class=normal>802</span>
<span class=normal>803</span>
<span class=normal>804</span>
<span class=normal>805</span>
<span class=normal>806</span>
<span class=normal>807</span>
<span class=normal>808</span>
<span class=normal>809</span>
<span class=normal>810</span>
<span class=normal>811</span>
<span class=normal>812</span>
<span class=normal>813</span>
<span class=normal>814</span>
<span class=normal>815</span>
<span class=normal>816</span>
<span class=normal>817</span>
<span class=normal>818</span>
<span class=normal>819</span>
<span class=normal>820</span>
<span class=normal>821</span>
<span class=normal>822</span>
<span class=normal>823</span>
<span class=normal>824</span>
<span class=normal>825</span>
<span class=normal>826</span>
<span class=normal>827</span>
<span class=normal>828</span>
<span class=normal>829</span>
<span class=normal>830</span>
<span class=normal>831</span>
<span class=normal>832</span>
<span class=normal>833</span>
<span class=normal>834</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@classmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>from_existing</span><span class=p>(</span>
    <span class=bp>cls</span><span class=p>,</span>
    <span class=n>instance_data</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>],</span>
    <span class=n>creator</span><span class=p>:</span> <span class=s2>&quot;BaseCreator&quot;</span><span class=p>,</span>
    <span class=n>transient_data</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<span class=p>)</span> <span class=o>-&gt;</span> <span class=s2>&quot;CreatedInstance&quot;</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Convert instance data from workfile to CreatedInstance.</span>

<span class=sd>    Args:</span>
<span class=sd>        instance_data (Dict[str, Any]): Data in a structure ready for</span>
<span class=sd>            &#39;CreatedInstance&#39; object.</span>
<span class=sd>        creator (BaseCreator): Creator plugin which is creating the</span>
<span class=sd>            instance of for which the instance belongs.</span>
<span class=sd>        transient_data (Optional[dict[str, Any]]): Instance transient</span>
<span class=sd>            data.</span>

<span class=sd>    Returns:</span>
<span class=sd>        CreatedInstance: Instance object.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>instance_data</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=n>instance_data</span><span class=p>)</span>

    <span class=n>product_type</span> <span class=o>=</span> <span class=n>instance_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;productType&quot;</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>product_type</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>product_type</span> <span class=o>=</span> <span class=n>instance_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;family&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>product_type</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>product_type</span> <span class=o>=</span> <span class=n>creator</span><span class=o>.</span><span class=n>product_type</span>
    <span class=n>product_name</span> <span class=o>=</span> <span class=n>instance_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;productName&quot;</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>product_name</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>product_name</span> <span class=o>=</span> <span class=n>instance_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;subset&quot;</span><span class=p>)</span>

    <span class=k>return</span> <span class=bp>cls</span><span class=p>(</span>
        <span class=n>product_type</span><span class=p>,</span>
        <span class=n>product_name</span><span class=p>,</span>
        <span class=n>instance_data</span><span class=p>,</span>
        <span class=n>creator</span><span class=p>,</span>
        <span class=n>transient_data</span><span class=o>=</span><span class=n>transient_data</span><span class=p>,</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreatedInstance.mark_as_stored class="doc doc-heading"> <code class="highlight language-python"><span class=n>mark_as_stored</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Should be called when instance data are stored.</p> <p>Origin data are replaced by current data so changes are cleared.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>689</span>
<span class=normal>690</span>
<span class=normal>691</span>
<span class=normal>692</span>
<span class=normal>693</span>
<span class=normal>694</span>
<span class=normal>695</span>
<span class=normal>696</span>
<span class=normal>697</span>
<span class=normal>698</span>
<span class=normal>699</span>
<span class=normal>700</span>
<span class=normal>701</span>
<span class=normal>702</span>
<span class=normal>703</span>
<span class=normal>704</span>
<span class=normal>705</span>
<span class=normal>706</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>mark_as_stored</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Should be called when instance data are stored.</span>

<span class=sd>    Origin data are replaced by current data so changes are cleared.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>orig_keys</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_orig_data</span><span class=o>.</span><span class=n>keys</span><span class=p>())</span>
    <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
        <span class=n>orig_keys</span><span class=o>.</span><span class=n>discard</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=p>(</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>,</span> <span class=s2>&quot;publish_attributes&quot;</span><span class=p>):</span>
            <span class=k>continue</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_orig_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>

    <span class=k>for</span> <span class=n>key</span> <span class=ow>in</span> <span class=n>orig_keys</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_orig_data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>creator_attributes</span><span class=o>.</span><span class=n>mark_as_stored</span><span class=p>()</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>publish_attributes</span><span class=o>.</span><span class=n>mark_as_stored</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreatedInstance.publish_attribute_value_changed class="doc doc-heading"> <code class="highlight language-python"><span class=n>publish_attribute_value_changed</span><span class=p>(</span><span class=n>plugin_name</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Method called from PublishAttributes.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>plugin_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Plugin name.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>value</code> </td> <td> <code><span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Changes in values for the plugin.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>861</span>
<span class=normal>862</span>
<span class=normal>863</span>
<span class=normal>864</span>
<span class=normal>865</span>
<span class=normal>866</span>
<span class=normal>867</span>
<span class=normal>868</span>
<span class=normal>869</span>
<span class=normal>870</span>
<span class=normal>871</span>
<span class=normal>872</span>
<span class=normal>873</span>
<span class=normal>874</span>
<span class=normal>875</span>
<span class=normal>876</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>publish_attribute_value_changed</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>plugin_name</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Method called from PublishAttributes.</span>

<span class=sd>    Args:</span>
<span class=sd>        plugin_name (str): Plugin name.</span>
<span class=sd>        value (Dict[str, Any]): Changes in values for the plugin.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_create_context</span><span class=o>.</span><span class=n>instance_values_changed</span><span class=p>(</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
        <span class=p>{</span>
            <span class=s2>&quot;publish_attributes&quot;</span><span class=p>:</span> <span class=p>{</span>
                <span class=n>plugin_name</span><span class=p>:</span> <span class=n>value</span><span class=p>,</span>
            <span class=p>},</span>
        <span class=p>},</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreatedInstance.set_create_attr_defs class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_create_attr_defs</span><span class=p>(</span><span class=n>attr_defs</span><span class=p>,</span> <span class=n>value</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Create plugin updates create attribute definitions.</p> <p>Method called by create plugin when attribute definitions should be changed.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>attr_defs</code> </td> <td> <code><span title=typing.List>List</span>[<span title=ayon_core.lib.attribute_definitions.AbstractAttrDef>AbstractAttrDef</span>]</code> </td> <td> <div class=doc-md-description> <p>Attribute definitions.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>value</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]]</code> </td> <td> <div class=doc-md-description> <p>Values of attribute definitions. Current values are used if not passed in.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>765</span>
<span class=normal>766</span>
<span class=normal>767</span>
<span class=normal>768</span>
<span class=normal>769</span>
<span class=normal>770</span>
<span class=normal>771</span>
<span class=normal>772</span>
<span class=normal>773</span>
<span class=normal>774</span>
<span class=normal>775</span>
<span class=normal>776</span>
<span class=normal>777</span>
<span class=normal>778</span>
<span class=normal>779</span>
<span class=normal>780</span>
<span class=normal>781</span>
<span class=normal>782</span>
<span class=normal>783</span>
<span class=normal>784</span>
<span class=normal>785</span>
<span class=normal>786</span>
<span class=normal>787</span>
<span class=normal>788</span>
<span class=normal>789</span>
<span class=normal>790</span>
<span class=normal>791</span>
<span class=normal>792</span>
<span class=normal>793</span>
<span class=normal>794</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_create_attr_defs</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>attr_defs</span><span class=p>,</span> <span class=n>value</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Create plugin updates create attribute definitions.</span>

<span class=sd>    Method called by create plugin when attribute definitions should</span>
<span class=sd>        be changed.</span>

<span class=sd>    Args:</span>
<span class=sd>        attr_defs (List[AbstractAttrDef]): Attribute definitions.</span>
<span class=sd>        value (Optional[Dict[str, Any]]): Values of attribute definitions.</span>
<span class=sd>            Current values are used if not passed in.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>value</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>]</span>

    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=n>AttributeValues</span><span class=p>):</span>
        <span class=n>value</span> <span class=o>=</span> <span class=n>value</span><span class=o>.</span><span class=n>data_to_store</span><span class=p>()</span>

    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>],</span> <span class=n>AttributeValues</span><span class=p>):</span>
        <span class=n>origin_data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>origin_data</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=n>origin_data</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>])</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>CreatorAttributeValues</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=s2>&quot;creator_attributes&quot;</span><span class=p>,</span>
        <span class=n>attr_defs</span><span class=p>,</span>
        <span class=n>value</span><span class=p>,</span>
        <span class=n>origin_data</span>
    <span class=p>)</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_create_context</span><span class=o>.</span><span class=n>instance_create_attr_defs_changed</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.CreatedInstance.set_publish_plugin_attr_defs class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_publish_plugin_attr_defs</span><span class=p>(</span><span class=n>plugin_name</span><span class=p>,</span> <span class=n>attr_defs</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Set attribute definitions for publish plugin.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>plugin_name(str)</code> </td> <td> </td> <td> <div class=doc-md-description> <p>Name of publish plugin.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>attr_defs(List[AbstractAttrDef])</code> </td> <td> </td> <td> <div class=doc-md-description> <p>Attribute definitions.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>846</span>
<span class=normal>847</span>
<span class=normal>848</span>
<span class=normal>849</span>
<span class=normal>850</span>
<span class=normal>851</span>
<span class=normal>852</span>
<span class=normal>853</span>
<span class=normal>854</span>
<span class=normal>855</span>
<span class=normal>856</span>
<span class=normal>857</span>
<span class=normal>858</span>
<span class=normal>859</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_publish_plugin_attr_defs</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>plugin_name</span><span class=p>,</span> <span class=n>attr_defs</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Set attribute definitions for publish plugin.</span>

<span class=sd>    Args:</span>
<span class=sd>        plugin_name(str): Name of publish plugin.</span>
<span class=sd>        attr_defs(List[AbstractAttrDef]): Attribute definitions.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>publish_attributes</span><span class=o>.</span><span class=n>set_publish_plugin_attr_defs</span><span class=p>(</span>
        <span class=n>plugin_name</span><span class=p>,</span> <span class=n>attr_defs</span>
    <span class=p>)</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_create_context</span><span class=o>.</span><span class=n>instance_publish_attr_defs_changed</span><span class=p>(</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=n>plugin_name</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.create.Creator class="doc doc-heading"> <code>Creator</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="BaseCreator (client.ayon_core.pipeline.create.creator_plugins.BaseCreator)" href=creator_plugins.html#client.ayon_core.pipeline.create.creator_plugins.BaseCreator>BaseCreator</a></code></p> <p>Creator that has more information for artist to show in UI.</p> <p>Creation requires prepared product name and instance data.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>651</span>
<span class=normal>652</span>
<span class=normal>653</span>
<span class=normal>654</span>
<span class=normal>655</span>
<span class=normal>656</span>
<span class=normal>657</span>
<span class=normal>658</span>
<span class=normal>659</span>
<span class=normal>660</span>
<span class=normal>661</span>
<span class=normal>662</span>
<span class=normal>663</span>
<span class=normal>664</span>
<span class=normal>665</span>
<span class=normal>666</span>
<span class=normal>667</span>
<span class=normal>668</span>
<span class=normal>669</span>
<span class=normal>670</span>
<span class=normal>671</span>
<span class=normal>672</span>
<span class=normal>673</span>
<span class=normal>674</span>
<span class=normal>675</span>
<span class=normal>676</span>
<span class=normal>677</span>
<span class=normal>678</span>
<span class=normal>679</span>
<span class=normal>680</span>
<span class=normal>681</span>
<span class=normal>682</span>
<span class=normal>683</span>
<span class=normal>684</span>
<span class=normal>685</span>
<span class=normal>686</span>
<span class=normal>687</span>
<span class=normal>688</span>
<span class=normal>689</span>
<span class=normal>690</span>
<span class=normal>691</span>
<span class=normal>692</span>
<span class=normal>693</span>
<span class=normal>694</span>
<span class=normal>695</span>
<span class=normal>696</span>
<span class=normal>697</span>
<span class=normal>698</span>
<span class=normal>699</span>
<span class=normal>700</span>
<span class=normal>701</span>
<span class=normal>702</span>
<span class=normal>703</span>
<span class=normal>704</span>
<span class=normal>705</span>
<span class=normal>706</span>
<span class=normal>707</span>
<span class=normal>708</span>
<span class=normal>709</span>
<span class=normal>710</span>
<span class=normal>711</span>
<span class=normal>712</span>
<span class=normal>713</span>
<span class=normal>714</span>
<span class=normal>715</span>
<span class=normal>716</span>
<span class=normal>717</span>
<span class=normal>718</span>
<span class=normal>719</span>
<span class=normal>720</span>
<span class=normal>721</span>
<span class=normal>722</span>
<span class=normal>723</span>
<span class=normal>724</span>
<span class=normal>725</span>
<span class=normal>726</span>
<span class=normal>727</span>
<span class=normal>728</span>
<span class=normal>729</span>
<span class=normal>730</span>
<span class=normal>731</span>
<span class=normal>732</span>
<span class=normal>733</span>
<span class=normal>734</span>
<span class=normal>735</span>
<span class=normal>736</span>
<span class=normal>737</span>
<span class=normal>738</span>
<span class=normal>739</span>
<span class=normal>740</span>
<span class=normal>741</span>
<span class=normal>742</span>
<span class=normal>743</span>
<span class=normal>744</span>
<span class=normal>745</span>
<span class=normal>746</span>
<span class=normal>747</span>
<span class=normal>748</span>
<span class=normal>749</span>
<span class=normal>750</span>
<span class=normal>751</span>
<span class=normal>752</span>
<span class=normal>753</span>
<span class=normal>754</span>
<span class=normal>755</span>
<span class=normal>756</span>
<span class=normal>757</span>
<span class=normal>758</span>
<span class=normal>759</span>
<span class=normal>760</span>
<span class=normal>761</span>
<span class=normal>762</span>
<span class=normal>763</span>
<span class=normal>764</span>
<span class=normal>765</span>
<span class=normal>766</span>
<span class=normal>767</span>
<span class=normal>768</span>
<span class=normal>769</span>
<span class=normal>770</span>
<span class=normal>771</span>
<span class=normal>772</span>
<span class=normal>773</span>
<span class=normal>774</span>
<span class=normal>775</span>
<span class=normal>776</span>
<span class=normal>777</span>
<span class=normal>778</span>
<span class=normal>779</span>
<span class=normal>780</span>
<span class=normal>781</span>
<span class=normal>782</span>
<span class=normal>783</span>
<span class=normal>784</span>
<span class=normal>785</span>
<span class=normal>786</span>
<span class=normal>787</span>
<span class=normal>788</span>
<span class=normal>789</span>
<span class=normal>790</span>
<span class=normal>791</span>
<span class=normal>792</span>
<span class=normal>793</span>
<span class=normal>794</span>
<span class=normal>795</span>
<span class=normal>796</span>
<span class=normal>797</span>
<span class=normal>798</span>
<span class=normal>799</span>
<span class=normal>800</span>
<span class=normal>801</span>
<span class=normal>802</span>
<span class=normal>803</span>
<span class=normal>804</span>
<span class=normal>805</span>
<span class=normal>806</span>
<span class=normal>807</span>
<span class=normal>808</span>
<span class=normal>809</span>
<span class=normal>810</span>
<span class=normal>811</span>
<span class=normal>812</span>
<span class=normal>813</span>
<span class=normal>814</span>
<span class=normal>815</span>
<span class=normal>816</span>
<span class=normal>817</span>
<span class=normal>818</span>
<span class=normal>819</span>
<span class=normal>820</span>
<span class=normal>821</span>
<span class=normal>822</span>
<span class=normal>823</span>
<span class=normal>824</span>
<span class=normal>825</span>
<span class=normal>826</span>
<span class=normal>827</span>
<span class=normal>828</span>
<span class=normal>829</span>
<span class=normal>830</span>
<span class=normal>831</span>
<span class=normal>832</span>
<span class=normal>833</span>
<span class=normal>834</span>
<span class=normal>835</span>
<span class=normal>836</span>
<span class=normal>837</span>
<span class=normal>838</span>
<span class=normal>839</span>
<span class=normal>840</span>
<span class=normal>841</span>
<span class=normal>842</span>
<span class=normal>843</span>
<span class=normal>844</span>
<span class=normal>845</span>
<span class=normal>846</span>
<span class=normal>847</span>
<span class=normal>848</span>
<span class=normal>849</span>
<span class=normal>850</span>
<span class=normal>851</span>
<span class=normal>852</span>
<span class=normal>853</span>
<span class=normal>854</span>
<span class=normal>855</span>
<span class=normal>856</span>
<span class=normal>857</span>
<span class=normal>858</span>
<span class=normal>859</span>
<span class=normal>860</span>
<span class=normal>861</span>
<span class=normal>862</span>
<span class=normal>863</span>
<span class=normal>864</span>
<span class=normal>865</span>
<span class=normal>866</span>
<span class=normal>867</span>
<span class=normal>868</span>
<span class=normal>869</span>
<span class=normal>870</span>
<span class=normal>871</span>
<span class=normal>872</span>
<span class=normal>873</span>
<span class=normal>874</span>
<span class=normal>875</span>
<span class=normal>876</span>
<span class=normal>877</span>
<span class=normal>878</span>
<span class=normal>879</span>
<span class=normal>880</span>
<span class=normal>881</span>
<span class=normal>882</span>
<span class=normal>883</span>
<span class=normal>884</span>
<span class=normal>885</span>
<span class=normal>886</span>
<span class=normal>887</span>
<span class=normal>888</span>
<span class=normal>889</span>
<span class=normal>890</span>
<span class=normal>891</span>
<span class=normal>892</span>
<span class=normal>893</span>
<span class=normal>894</span>
<span class=normal>895</span>
<span class=normal>896</span>
<span class=normal>897</span>
<span class=normal>898</span>
<span class=normal>899</span>
<span class=normal>900</span>
<span class=normal>901</span>
<span class=normal>902</span>
<span class=normal>903</span>
<span class=normal>904</span>
<span class=normal>905</span>
<span class=normal>906</span>
<span class=normal>907</span>
<span class=normal>908</span>
<span class=normal>909</span>
<span class=normal>910</span>
<span class=normal>911</span>
<span class=normal>912</span>
<span class=normal>913</span>
<span class=normal>914</span>
<span class=normal>915</span>
<span class=normal>916</span>
<span class=normal>917</span>
<span class=normal>918</span>
<span class=normal>919</span>
<span class=normal>920</span>
<span class=normal>921</span>
<span class=normal>922</span>
<span class=normal>923</span>
<span class=normal>924</span>
<span class=normal>925</span>
<span class=normal>926</span>
<span class=normal>927</span>
<span class=normal>928</span>
<span class=normal>929</span>
<span class=normal>930</span>
<span class=normal>931</span>
<span class=normal>932</span>
<span class=normal>933</span>
<span class=normal>934</span>
<span class=normal>935</span>
<span class=normal>936</span>
<span class=normal>937</span>
<span class=normal>938</span>
<span class=normal>939</span>
<span class=normal>940</span>
<span class=normal>941</span>
<span class=normal>942</span>
<span class=normal>943</span>
<span class=normal>944</span>
<span class=normal>945</span>
<span class=normal>946</span>
<span class=normal>947</span>
<span class=normal>948</span>
<span class=normal>949</span>
<span class=normal>950</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>Creator</span><span class=p>(</span><span class=n>BaseCreator</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Creator that has more information for artist to show in UI.</span>

<span class=sd>    Creation requires prepared product name and instance data.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=c1># GUI Purposes</span>
    <span class=c1># - default_variants may not be used if `get_default_variants`</span>
    <span class=c1>#   is overridden</span>
    <span class=n>default_variants</span> <span class=o>=</span> <span class=p>[]</span>

    <span class=c1># Default variant used in &#39;get_default_variant&#39;</span>
    <span class=n>_default_variant</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=c1># Short description of product type</span>
    <span class=c1># - may not be used if `get_description` is overridden</span>
    <span class=n>description</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=c1># Detailed description of product type for artists</span>
    <span class=c1># - may not be used if `get_detail_description` is overridden</span>
    <span class=n>detailed_description</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=c1># It does make sense to change context on creation</span>
    <span class=c1># - in some cases it may confuse artists because it would not be used</span>
    <span class=c1>#      e.g. for buld creators</span>
    <span class=n>create_allow_context_change</span> <span class=o>=</span> <span class=kc>True</span>
    <span class=c1># A thumbnail can be passed in precreate attributes</span>
    <span class=c1># - if is set to True is should expect that a thumbnail path under key</span>
    <span class=c1>#   PRE_CREATE_THUMBNAIL_KEY can be sent in data with precreate data</span>
    <span class=c1># - is disabled by default because the feature was added in later stages</span>
    <span class=c1>#   and creators who would not expect PRE_CREATE_THUMBNAIL_KEY could</span>
    <span class=c1>#   cause issues with instance data</span>
    <span class=n>create_allow_thumbnail</span> <span class=o>=</span> <span class=kc>False</span>

    <span class=c1># Precreate attribute definitions showed before creation</span>
    <span class=c1># - similar to instance attribute definitions</span>
    <span class=n>pre_create_attr_defs</span> <span class=o>=</span> <span class=p>[]</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
        <span class=bp>cls</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span>

        <span class=c1># Fix backwards compatibility for plugins which override</span>
        <span class=c1>#   &#39;default_variant&#39; attribute directly</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=bp>cls</span><span class=o>.</span><span class=n>default_variant</span><span class=p>,</span> <span class=nb>property</span><span class=p>):</span>
            <span class=c1># Move value from &#39;default_variant&#39; to &#39;_default_variant&#39;</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_default_variant</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>default_variant</span>
            <span class=c1># Create property &#39;default_variant&#39; on the class</span>
            <span class=bp>cls</span><span class=o>.</span><span class=n>default_variant</span> <span class=o>=</span> <span class=nb>property</span><span class=p>(</span>
                <span class=bp>cls</span><span class=o>.</span><span class=n>_get_default_variant_wrap</span><span class=p>,</span>
                <span class=bp>cls</span><span class=o>.</span><span class=n>_set_default_variant_wrap</span>
            <span class=p>)</span>
        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>show_order</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Order in which is creator shown in UI.</span>

<span class=sd>        Returns:</span>
<span class=sd>            int: Order in which is creator shown (less == earlier). By default</span>
<span class=sd>                is using Creator&#39;s &#39;order&#39; or processing.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>order</span>

    <span class=nd>@abstractmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>create</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>product_name</span><span class=p>,</span> <span class=n>instance_data</span><span class=p>,</span> <span class=n>pre_create_data</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Create new instance and store it.</span>

<span class=sd>        Ideally should be stored to workfile using host implementation.</span>

<span class=sd>        Args:</span>
<span class=sd>            product_name(str): Product name of created instance.</span>
<span class=sd>            instance_data(dict): Base data for instance.</span>
<span class=sd>            pre_create_data(dict): Data based on pre creation attributes.</span>
<span class=sd>                Those may affect how creator works.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=c1># instance = CreatedInstance(</span>
        <span class=c1>#     self.product_type, product_name, instance_data</span>
        <span class=c1># )</span>
        <span class=k>pass</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_description</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Short description of product type and plugin.</span>

<span class=sd>        Returns:</span>
<span class=sd>            str: Short description of product type.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>description</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_detail_description</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Description of product type and plugin.</span>

<span class=sd>        Can be detailed with markdown or html tags.</span>

<span class=sd>        Returns:</span>
<span class=sd>            str: Detailed description of product type for artist.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>detailed_description</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_default_variants</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Default variant values for UI tooltips.</span>

<span class=sd>        Replacement of `default_variants` attribute. Using method gives</span>
<span class=sd>        ability to have some &quot;logic&quot; other than attribute values.</span>

<span class=sd>        By default, returns `default_variants` value.</span>

<span class=sd>        Returns:</span>
<span class=sd>            list[str]: Whisper variants for user input.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>default_variants</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_default_variant</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>only_explicit</span><span class=o>=</span><span class=kc>False</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Default variant value that will be used to prefill variant input.</span>

<span class=sd>        This is for user input and value may not be content of result from</span>
<span class=sd>        `get_default_variants`.</span>

<span class=sd>        Note:</span>
<span class=sd>            This method does not allow to have empty string as</span>
<span class=sd>                default variant.</span>

<span class=sd>        Args:</span>
<span class=sd>            only_explicit (Optional[bool]): If True, only explicit default</span>
<span class=sd>                variant from &#39;_default_variant&#39; will be returned.</span>

<span class=sd>        Returns:</span>
<span class=sd>            str: Variant value.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>if</span> <span class=n>only_explicit</span> <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>_default_variant</span><span class=p>:</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_default_variant</span>

        <span class=k>for</span> <span class=n>variant</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_default_variants</span><span class=p>():</span>
            <span class=k>return</span> <span class=n>variant</span>
        <span class=k>return</span> <span class=n>DEFAULT_VARIANT_VALUE</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_get_default_variant_wrap</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Default variant value that will be used to prefill variant input.</span>

<span class=sd>        Wrapper for &#39;get_default_variant&#39;.</span>

<span class=sd>        Notes:</span>
<span class=sd>            This method is wrapper for &#39;get_default_variant&#39;</span>
<span class=sd>                for &#39;default_variant&#39; property, so creator can override</span>
<span class=sd>                the method.</span>

<span class=sd>        Returns:</span>
<span class=sd>            str: Variant value.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_default_variant</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_set_default_variant_wrap</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>variant</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Set default variant value.</span>

<span class=sd>        This method is needed for automated settings overrides which are</span>
<span class=sd>        changing attributes based on keys in settings.</span>

<span class=sd>        Args:</span>
<span class=sd>            variant (str): New default variant value.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_default_variant</span> <span class=o>=</span> <span class=n>variant</span>

    <span class=n>default_variant</span> <span class=o>=</span> <span class=nb>property</span><span class=p>(</span>
        <span class=n>_get_default_variant_wrap</span><span class=p>,</span>
        <span class=n>_set_default_variant_wrap</span>
    <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_pre_create_attr_defs</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Plugin attribute definitions needed for creation.</span>
<span class=sd>        Attribute definitions of plugin that define how creation will work.</span>
<span class=sd>        Values of these definitions are passed to `create` method.</span>

<span class=sd>        Note:</span>
<span class=sd>            Convert method should be implemented which should care about</span>
<span class=sd>            updating keys/values when plugin attributes change.</span>

<span class=sd>        Returns:</span>
<span class=sd>            list[AbstractAttrDef]: Attribute definitions that can be tweaked</span>
<span class=sd>                for created instance.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>pre_create_attr_defs</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_staging_dir</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instance</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>StagingDir</span><span class=p>]:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Return the staging dir and persistence from instance.</span>

<span class=sd>        Args:</span>
<span class=sd>            instance (CreatedInstance): Instance for which should be staging</span>
<span class=sd>                dir gathered.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Optional[namedtuple]: Staging dir path and persistence or None</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>create_ctx</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span>
        <span class=n>product_name</span> <span class=o>=</span> <span class=n>instance</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;productName&quot;</span><span class=p>)</span>
        <span class=n>product_type</span> <span class=o>=</span> <span class=n>instance</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;productType&quot;</span><span class=p>)</span>
        <span class=n>folder_path</span> <span class=o>=</span> <span class=n>instance</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;folderPath&quot;</span><span class=p>)</span>

        <span class=c1># this can only work if product name and folder path are available</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>product_name</span> <span class=ow>or</span> <span class=ow>not</span> <span class=n>folder_path</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>None</span>

        <span class=n>publish_settings</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>project_settings</span><span class=p>[</span><span class=s2>&quot;core&quot;</span><span class=p>][</span><span class=s2>&quot;publish&quot;</span><span class=p>]</span>
        <span class=n>follow_workfile_version</span> <span class=o>=</span> <span class=p>(</span>
            <span class=n>publish_settings</span>
            <span class=p>[</span><span class=s2>&quot;CollectAnatomyInstanceData&quot;</span><span class=p>]</span>
            <span class=p>[</span><span class=s2>&quot;follow_workfile_version&quot;</span><span class=p>]</span>
        <span class=p>)</span>
        <span class=n>follow_version_hosts</span> <span class=o>=</span> <span class=p>(</span>
            <span class=n>publish_settings</span>
            <span class=p>[</span><span class=s2>&quot;CollectSceneVersion&quot;</span><span class=p>]</span>
            <span class=p>[</span><span class=s2>&quot;hosts&quot;</span><span class=p>]</span>
        <span class=p>)</span>

        <span class=n>current_host</span> <span class=o>=</span> <span class=n>create_ctx</span><span class=o>.</span><span class=n>host</span><span class=o>.</span><span class=n>name</span>
        <span class=n>follow_workfile_version</span> <span class=o>=</span> <span class=p>(</span>
            <span class=n>follow_workfile_version</span> <span class=ow>and</span>
            <span class=n>current_host</span> <span class=ow>in</span> <span class=n>follow_version_hosts</span>
        <span class=p>)</span>

        <span class=c1># Gather version number provided from the instance.</span>
        <span class=n>current_workfile</span> <span class=o>=</span> <span class=n>create_ctx</span><span class=o>.</span><span class=n>get_current_workfile_path</span><span class=p>()</span>
        <span class=n>version</span> <span class=o>=</span> <span class=n>instance</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;version&quot;</span><span class=p>)</span>

        <span class=c1># If follow workfile, gather version from workfile path.</span>
        <span class=k>if</span> <span class=n>version</span> <span class=ow>is</span> <span class=kc>None</span> <span class=ow>and</span> <span class=n>follow_workfile_version</span> <span class=ow>and</span> <span class=n>current_workfile</span><span class=p>:</span>
            <span class=n>workfile_version</span> <span class=o>=</span> <span class=n>get_version_from_path</span><span class=p>(</span><span class=n>current_workfile</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>workfile_version</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
                <span class=n>version</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>workfile_version</span><span class=p>)</span>

        <span class=c1># Fill-up version with next version available.</span>
        <span class=k>if</span> <span class=n>version</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>versions</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_next_versions_for_instances</span><span class=p>(</span>
                <span class=p>[</span><span class=n>instance</span><span class=p>]</span>
            <span class=p>)</span>
            <span class=n>version</span><span class=p>,</span> <span class=o>=</span> <span class=nb>tuple</span><span class=p>(</span><span class=n>versions</span><span class=o>.</span><span class=n>values</span><span class=p>())</span>

        <span class=n>template_data</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;version&quot;</span><span class=p>:</span> <span class=n>version</span><span class=p>}</span>

        <span class=n>staging_dir_info</span> <span class=o>=</span> <span class=n>get_staging_dir_info</span><span class=p>(</span>
            <span class=n>create_ctx</span><span class=o>.</span><span class=n>get_current_project_entity</span><span class=p>(),</span>
            <span class=n>create_ctx</span><span class=o>.</span><span class=n>get_folder_entity</span><span class=p>(</span><span class=n>folder_path</span><span class=p>),</span>
            <span class=n>create_ctx</span><span class=o>.</span><span class=n>get_task_entity</span><span class=p>(</span><span class=n>folder_path</span><span class=p>,</span> <span class=n>instance</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;task&quot;</span><span class=p>)),</span>
            <span class=n>product_type</span><span class=p>,</span>
            <span class=n>product_name</span><span class=p>,</span>
            <span class=n>create_ctx</span><span class=o>.</span><span class=n>host_name</span><span class=p>,</span>
            <span class=n>anatomy</span><span class=o>=</span><span class=n>create_ctx</span><span class=o>.</span><span class=n>get_current_project_anatomy</span><span class=p>(),</span>
            <span class=n>project_settings</span><span class=o>=</span><span class=n>create_ctx</span><span class=o>.</span><span class=n>get_current_project_settings</span><span class=p>(),</span>
            <span class=n>always_return_path</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
            <span class=n>logger</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=p>,</span>
            <span class=n>template_data</span><span class=o>=</span><span class=n>template_data</span><span class=p>,</span>
        <span class=p>)</span>

        <span class=k>return</span> <span class=n>staging_dir_info</span> <span class=ow>or</span> <span class=kc>None</span>

    <span class=k>def</span><span class=w> </span><span class=nf>apply_staging_dir</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instance</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Apply staging dir with persistence to instance&#39;s transient data.</span>

<span class=sd>        Method is called on instance creation and on instance update.</span>

<span class=sd>        Args:</span>
<span class=sd>            instance (CreatedInstance): Instance for which should be staging</span>
<span class=sd>                dir applied.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Optional[str]: Staging dir path or None if not applied.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>staging_dir_info</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_staging_dir</span><span class=p>(</span><span class=n>instance</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>staging_dir_info</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>None</span>

        <span class=c1># path might be already created by get_staging_dir_info</span>
        <span class=n>staging_dir_path</span> <span class=o>=</span> <span class=n>staging_dir_info</span><span class=o>.</span><span class=n>directory</span>
        <span class=n>os</span><span class=o>.</span><span class=n>makedirs</span><span class=p>(</span><span class=n>staging_dir_path</span><span class=p>,</span> <span class=n>exist_ok</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>

        <span class=n>instance</span><span class=o>.</span><span class=n>transient_data</span><span class=o>.</span><span class=n>update</span><span class=p>({</span>
            <span class=s2>&quot;stagingDir&quot;</span><span class=p>:</span> <span class=n>staging_dir_path</span><span class=p>,</span>
            <span class=s2>&quot;stagingDir_persistent&quot;</span><span class=p>:</span> <span class=n>staging_dir_info</span><span class=o>.</span><span class=n>is_persistent</span><span class=p>,</span>
            <span class=s2>&quot;stagingDir_is_custom&quot;</span><span class=p>:</span> <span class=n>staging_dir_info</span><span class=o>.</span><span class=n>is_custom</span><span class=p>,</span>
        <span class=p>})</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Applied staging dir to instance: </span><span class=si>{</span><span class=n>staging_dir_path</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>

        <span class=k>return</span> <span class=n>staging_dir_path</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_pre_create_attr_defs_changed</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Called when pre-create attribute definitions change.</span>

<span class=sd>        Create plugin can call this method when knows that</span>
<span class=sd>            &#39;get_pre_create_attr_defs&#39; should be called again.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span><span class=o>.</span><span class=n>create_plugin_pre_create_attr_defs_changed</span><span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>identifier</span>
        <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.create.Creator.show_order class="doc doc-heading"> <code class="highlight language-python"><span class=n>show_order</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Order in which is creator shown in UI.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>int</code></td> <td> </td> <td> <div class=doc-md-description> <p>Order in which is creator shown (less == earlier). By default is using Creator's 'order' or processing.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.Creator.apply_staging_dir class="doc doc-heading"> <code class="highlight language-python"><span class=n>apply_staging_dir</span><span class=p>(</span><span class=n>instance</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Apply staging dir with persistence to instance's transient data.</p> <p>Method is called on instance creation and on instance update.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>instance</code> </td> <td> <code><a class="autorefs autorefs-internal" title="CreatedInstance (client.ayon_core.pipeline.create.structures.CreatedInstance)" href=structures.html#client.ayon_core.pipeline.create.structures.CreatedInstance>CreatedInstance</a></code> </td> <td> <div class=doc-md-description> <p>Instance for which should be staging dir applied.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Optional[str]: Staging dir path or None if not applied.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>912</span>
<span class=normal>913</span>
<span class=normal>914</span>
<span class=normal>915</span>
<span class=normal>916</span>
<span class=normal>917</span>
<span class=normal>918</span>
<span class=normal>919</span>
<span class=normal>920</span>
<span class=normal>921</span>
<span class=normal>922</span>
<span class=normal>923</span>
<span class=normal>924</span>
<span class=normal>925</span>
<span class=normal>926</span>
<span class=normal>927</span>
<span class=normal>928</span>
<span class=normal>929</span>
<span class=normal>930</span>
<span class=normal>931</span>
<span class=normal>932</span>
<span class=normal>933</span>
<span class=normal>934</span>
<span class=normal>935</span>
<span class=normal>936</span>
<span class=normal>937</span>
<span class=normal>938</span>
<span class=normal>939</span>
<span class=normal>940</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>apply_staging_dir</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instance</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Apply staging dir with persistence to instance&#39;s transient data.</span>

<span class=sd>    Method is called on instance creation and on instance update.</span>

<span class=sd>    Args:</span>
<span class=sd>        instance (CreatedInstance): Instance for which should be staging</span>
<span class=sd>            dir applied.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Optional[str]: Staging dir path or None if not applied.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>staging_dir_info</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_staging_dir</span><span class=p>(</span><span class=n>instance</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>staging_dir_info</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>return</span> <span class=kc>None</span>

    <span class=c1># path might be already created by get_staging_dir_info</span>
    <span class=n>staging_dir_path</span> <span class=o>=</span> <span class=n>staging_dir_info</span><span class=o>.</span><span class=n>directory</span>
    <span class=n>os</span><span class=o>.</span><span class=n>makedirs</span><span class=p>(</span><span class=n>staging_dir_path</span><span class=p>,</span> <span class=n>exist_ok</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>

    <span class=n>instance</span><span class=o>.</span><span class=n>transient_data</span><span class=o>.</span><span class=n>update</span><span class=p>({</span>
        <span class=s2>&quot;stagingDir&quot;</span><span class=p>:</span> <span class=n>staging_dir_path</span><span class=p>,</span>
        <span class=s2>&quot;stagingDir_persistent&quot;</span><span class=p>:</span> <span class=n>staging_dir_info</span><span class=o>.</span><span class=n>is_persistent</span><span class=p>,</span>
        <span class=s2>&quot;stagingDir_is_custom&quot;</span><span class=p>:</span> <span class=n>staging_dir_info</span><span class=o>.</span><span class=n>is_custom</span><span class=p>,</span>
    <span class=p>})</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Applied staging dir to instance: </span><span class=si>{</span><span class=n>staging_dir_path</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>

    <span class=k>return</span> <span class=n>staging_dir_path</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.Creator.create class="doc doc-heading"> <code class="highlight language-python"><span class=n>create</span><span class=p>(</span><span class=n>product_name</span><span class=p>,</span> <span class=n>instance_data</span><span class=p>,</span> <span class=n>pre_create_data</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Create new instance and store it.</p> <p>Ideally should be stored to workfile using host implementation.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>product_name(str)</code> </td> <td> </td> <td> <div class=doc-md-description> <p>Product name of created instance.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>instance_data(dict)</code> </td> <td> </td> <td> <div class=doc-md-description> <p>Base data for instance.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>pre_create_data(dict)</code> </td> <td> </td> <td> <div class=doc-md-description> <p>Data based on pre creation attributes. Those may affect how creator works.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>715</span>
<span class=normal>716</span>
<span class=normal>717</span>
<span class=normal>718</span>
<span class=normal>719</span>
<span class=normal>720</span>
<span class=normal>721</span>
<span class=normal>722</span>
<span class=normal>723</span>
<span class=normal>724</span>
<span class=normal>725</span>
<span class=normal>726</span>
<span class=normal>727</span>
<span class=normal>728</span>
<span class=normal>729</span>
<span class=normal>730</span>
<span class=normal>731</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@abstractmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>create</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>product_name</span><span class=p>,</span> <span class=n>instance_data</span><span class=p>,</span> <span class=n>pre_create_data</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Create new instance and store it.</span>

<span class=sd>    Ideally should be stored to workfile using host implementation.</span>

<span class=sd>    Args:</span>
<span class=sd>        product_name(str): Product name of created instance.</span>
<span class=sd>        instance_data(dict): Base data for instance.</span>
<span class=sd>        pre_create_data(dict): Data based on pre creation attributes.</span>
<span class=sd>            Those may affect how creator works.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=c1># instance = CreatedInstance(</span>
    <span class=c1>#     self.product_type, product_name, instance_data</span>
    <span class=c1># )</span>
    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.Creator.get_default_variant class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_default_variant</span><span class=p>(</span><span class=n>only_explicit</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Default variant value that will be used to prefill variant input.</p> <p>This is for user input and value may not be content of result from <code>get_default_variants</code>.</p> <details class=note open> <summary>Note</summary> <p>This method does not allow to have empty string as default variant.</p> </details> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>only_explicit</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=bool>bool</span>]</code> </td> <td> <div class=doc-md-description> <p>If True, only explicit default variant from '_default_variant' will be returned.</p> </div> </td> <td> <code>False</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>Variant value.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>767</span>
<span class=normal>768</span>
<span class=normal>769</span>
<span class=normal>770</span>
<span class=normal>771</span>
<span class=normal>772</span>
<span class=normal>773</span>
<span class=normal>774</span>
<span class=normal>775</span>
<span class=normal>776</span>
<span class=normal>777</span>
<span class=normal>778</span>
<span class=normal>779</span>
<span class=normal>780</span>
<span class=normal>781</span>
<span class=normal>782</span>
<span class=normal>783</span>
<span class=normal>784</span>
<span class=normal>785</span>
<span class=normal>786</span>
<span class=normal>787</span>
<span class=normal>788</span>
<span class=normal>789</span>
<span class=normal>790</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_default_variant</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>only_explicit</span><span class=o>=</span><span class=kc>False</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Default variant value that will be used to prefill variant input.</span>

<span class=sd>    This is for user input and value may not be content of result from</span>
<span class=sd>    `get_default_variants`.</span>

<span class=sd>    Note:</span>
<span class=sd>        This method does not allow to have empty string as</span>
<span class=sd>            default variant.</span>

<span class=sd>    Args:</span>
<span class=sd>        only_explicit (Optional[bool]): If True, only explicit default</span>
<span class=sd>            variant from &#39;_default_variant&#39; will be returned.</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: Variant value.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>if</span> <span class=n>only_explicit</span> <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>_default_variant</span><span class=p>:</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_default_variant</span>

    <span class=k>for</span> <span class=n>variant</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_default_variants</span><span class=p>():</span>
        <span class=k>return</span> <span class=n>variant</span>
    <span class=k>return</span> <span class=n>DEFAULT_VARIANT_VALUE</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.Creator.get_default_variants class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_default_variants</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Default variant values for UI tooltips.</p> <p>Replacement of <code>default_variants</code> attribute. Using method gives ability to have some "logic" other than attribute values.</p> <p>By default, returns <code>default_variants</code> value.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>list[str]: Whisper variants for user input.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>753</span>
<span class=normal>754</span>
<span class=normal>755</span>
<span class=normal>756</span>
<span class=normal>757</span>
<span class=normal>758</span>
<span class=normal>759</span>
<span class=normal>760</span>
<span class=normal>761</span>
<span class=normal>762</span>
<span class=normal>763</span>
<span class=normal>764</span>
<span class=normal>765</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_default_variants</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Default variant values for UI tooltips.</span>

<span class=sd>    Replacement of `default_variants` attribute. Using method gives</span>
<span class=sd>    ability to have some &quot;logic&quot; other than attribute values.</span>

<span class=sd>    By default, returns `default_variants` value.</span>

<span class=sd>    Returns:</span>
<span class=sd>        list[str]: Whisper variants for user input.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>default_variants</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.Creator.get_description class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_description</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Short description of product type and plugin.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>Short description of product type.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>733</span>
<span class=normal>734</span>
<span class=normal>735</span>
<span class=normal>736</span>
<span class=normal>737</span>
<span class=normal>738</span>
<span class=normal>739</span>
<span class=normal>740</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_description</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Short description of product type and plugin.</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: Short description of product type.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>description</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.Creator.get_detail_description class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_detail_description</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Description of product type and plugin.</p> <p>Can be detailed with markdown or html tags.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>Detailed description of product type for artist.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>742</span>
<span class=normal>743</span>
<span class=normal>744</span>
<span class=normal>745</span>
<span class=normal>746</span>
<span class=normal>747</span>
<span class=normal>748</span>
<span class=normal>749</span>
<span class=normal>750</span>
<span class=normal>751</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_detail_description</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Description of product type and plugin.</span>

<span class=sd>    Can be detailed with markdown or html tags.</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: Detailed description of product type for artist.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>detailed_description</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.Creator.get_pre_create_attr_defs class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_pre_create_attr_defs</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Plugin attribute definitions needed for creation. Attribute definitions of plugin that define how creation will work. Values of these definitions are passed to <code>create</code> method.</p> <details class=note open> <summary>Note</summary> <p>Convert method should be implemented which should care about updating keys/values when plugin attributes change.</p> </details> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>list[AbstractAttrDef]: Attribute definitions that can be tweaked for created instance.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>825</span>
<span class=normal>826</span>
<span class=normal>827</span>
<span class=normal>828</span>
<span class=normal>829</span>
<span class=normal>830</span>
<span class=normal>831</span>
<span class=normal>832</span>
<span class=normal>833</span>
<span class=normal>834</span>
<span class=normal>835</span>
<span class=normal>836</span>
<span class=normal>837</span>
<span class=normal>838</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_pre_create_attr_defs</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Plugin attribute definitions needed for creation.</span>
<span class=sd>    Attribute definitions of plugin that define how creation will work.</span>
<span class=sd>    Values of these definitions are passed to `create` method.</span>

<span class=sd>    Note:</span>
<span class=sd>        Convert method should be implemented which should care about</span>
<span class=sd>        updating keys/values when plugin attributes change.</span>

<span class=sd>    Returns:</span>
<span class=sd>        list[AbstractAttrDef]: Attribute definitions that can be tweaked</span>
<span class=sd>            for created instance.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>pre_create_attr_defs</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.Creator.get_staging_dir class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_staging_dir</span><span class=p>(</span><span class=n>instance</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Return the staging dir and persistence from instance.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>instance</code> </td> <td> <code><a class="autorefs autorefs-internal" title="CreatedInstance (client.ayon_core.pipeline.create.structures.CreatedInstance)" href=structures.html#client.ayon_core.pipeline.create.structures.CreatedInstance>CreatedInstance</a></code> </td> <td> <div class=doc-md-description> <p>Instance for which should be staging dir gathered.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=typing.Optional>Optional</span>[<span title=ayon_core.pipeline.staging_dir.StagingDir>StagingDir</span>]</code> </td> <td> <div class=doc-md-description> <p>Optional[namedtuple]: Staging dir path and persistence or None</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>840</span>
<span class=normal>841</span>
<span class=normal>842</span>
<span class=normal>843</span>
<span class=normal>844</span>
<span class=normal>845</span>
<span class=normal>846</span>
<span class=normal>847</span>
<span class=normal>848</span>
<span class=normal>849</span>
<span class=normal>850</span>
<span class=normal>851</span>
<span class=normal>852</span>
<span class=normal>853</span>
<span class=normal>854</span>
<span class=normal>855</span>
<span class=normal>856</span>
<span class=normal>857</span>
<span class=normal>858</span>
<span class=normal>859</span>
<span class=normal>860</span>
<span class=normal>861</span>
<span class=normal>862</span>
<span class=normal>863</span>
<span class=normal>864</span>
<span class=normal>865</span>
<span class=normal>866</span>
<span class=normal>867</span>
<span class=normal>868</span>
<span class=normal>869</span>
<span class=normal>870</span>
<span class=normal>871</span>
<span class=normal>872</span>
<span class=normal>873</span>
<span class=normal>874</span>
<span class=normal>875</span>
<span class=normal>876</span>
<span class=normal>877</span>
<span class=normal>878</span>
<span class=normal>879</span>
<span class=normal>880</span>
<span class=normal>881</span>
<span class=normal>882</span>
<span class=normal>883</span>
<span class=normal>884</span>
<span class=normal>885</span>
<span class=normal>886</span>
<span class=normal>887</span>
<span class=normal>888</span>
<span class=normal>889</span>
<span class=normal>890</span>
<span class=normal>891</span>
<span class=normal>892</span>
<span class=normal>893</span>
<span class=normal>894</span>
<span class=normal>895</span>
<span class=normal>896</span>
<span class=normal>897</span>
<span class=normal>898</span>
<span class=normal>899</span>
<span class=normal>900</span>
<span class=normal>901</span>
<span class=normal>902</span>
<span class=normal>903</span>
<span class=normal>904</span>
<span class=normal>905</span>
<span class=normal>906</span>
<span class=normal>907</span>
<span class=normal>908</span>
<span class=normal>909</span>
<span class=normal>910</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_staging_dir</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instance</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>StagingDir</span><span class=p>]:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Return the staging dir and persistence from instance.</span>

<span class=sd>    Args:</span>
<span class=sd>        instance (CreatedInstance): Instance for which should be staging</span>
<span class=sd>            dir gathered.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Optional[namedtuple]: Staging dir path and persistence or None</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>create_ctx</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span>
    <span class=n>product_name</span> <span class=o>=</span> <span class=n>instance</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;productName&quot;</span><span class=p>)</span>
    <span class=n>product_type</span> <span class=o>=</span> <span class=n>instance</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;productType&quot;</span><span class=p>)</span>
    <span class=n>folder_path</span> <span class=o>=</span> <span class=n>instance</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;folderPath&quot;</span><span class=p>)</span>

    <span class=c1># this can only work if product name and folder path are available</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>product_name</span> <span class=ow>or</span> <span class=ow>not</span> <span class=n>folder_path</span><span class=p>:</span>
        <span class=k>return</span> <span class=kc>None</span>

    <span class=n>publish_settings</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>project_settings</span><span class=p>[</span><span class=s2>&quot;core&quot;</span><span class=p>][</span><span class=s2>&quot;publish&quot;</span><span class=p>]</span>
    <span class=n>follow_workfile_version</span> <span class=o>=</span> <span class=p>(</span>
        <span class=n>publish_settings</span>
        <span class=p>[</span><span class=s2>&quot;CollectAnatomyInstanceData&quot;</span><span class=p>]</span>
        <span class=p>[</span><span class=s2>&quot;follow_workfile_version&quot;</span><span class=p>]</span>
    <span class=p>)</span>
    <span class=n>follow_version_hosts</span> <span class=o>=</span> <span class=p>(</span>
        <span class=n>publish_settings</span>
        <span class=p>[</span><span class=s2>&quot;CollectSceneVersion&quot;</span><span class=p>]</span>
        <span class=p>[</span><span class=s2>&quot;hosts&quot;</span><span class=p>]</span>
    <span class=p>)</span>

    <span class=n>current_host</span> <span class=o>=</span> <span class=n>create_ctx</span><span class=o>.</span><span class=n>host</span><span class=o>.</span><span class=n>name</span>
    <span class=n>follow_workfile_version</span> <span class=o>=</span> <span class=p>(</span>
        <span class=n>follow_workfile_version</span> <span class=ow>and</span>
        <span class=n>current_host</span> <span class=ow>in</span> <span class=n>follow_version_hosts</span>
    <span class=p>)</span>

    <span class=c1># Gather version number provided from the instance.</span>
    <span class=n>current_workfile</span> <span class=o>=</span> <span class=n>create_ctx</span><span class=o>.</span><span class=n>get_current_workfile_path</span><span class=p>()</span>
    <span class=n>version</span> <span class=o>=</span> <span class=n>instance</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;version&quot;</span><span class=p>)</span>

    <span class=c1># If follow workfile, gather version from workfile path.</span>
    <span class=k>if</span> <span class=n>version</span> <span class=ow>is</span> <span class=kc>None</span> <span class=ow>and</span> <span class=n>follow_workfile_version</span> <span class=ow>and</span> <span class=n>current_workfile</span><span class=p>:</span>
        <span class=n>workfile_version</span> <span class=o>=</span> <span class=n>get_version_from_path</span><span class=p>(</span><span class=n>current_workfile</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>workfile_version</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>version</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>workfile_version</span><span class=p>)</span>

    <span class=c1># Fill-up version with next version available.</span>
    <span class=k>if</span> <span class=n>version</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>versions</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_next_versions_for_instances</span><span class=p>(</span>
            <span class=p>[</span><span class=n>instance</span><span class=p>]</span>
        <span class=p>)</span>
        <span class=n>version</span><span class=p>,</span> <span class=o>=</span> <span class=nb>tuple</span><span class=p>(</span><span class=n>versions</span><span class=o>.</span><span class=n>values</span><span class=p>())</span>

    <span class=n>template_data</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;version&quot;</span><span class=p>:</span> <span class=n>version</span><span class=p>}</span>

    <span class=n>staging_dir_info</span> <span class=o>=</span> <span class=n>get_staging_dir_info</span><span class=p>(</span>
        <span class=n>create_ctx</span><span class=o>.</span><span class=n>get_current_project_entity</span><span class=p>(),</span>
        <span class=n>create_ctx</span><span class=o>.</span><span class=n>get_folder_entity</span><span class=p>(</span><span class=n>folder_path</span><span class=p>),</span>
        <span class=n>create_ctx</span><span class=o>.</span><span class=n>get_task_entity</span><span class=p>(</span><span class=n>folder_path</span><span class=p>,</span> <span class=n>instance</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;task&quot;</span><span class=p>)),</span>
        <span class=n>product_type</span><span class=p>,</span>
        <span class=n>product_name</span><span class=p>,</span>
        <span class=n>create_ctx</span><span class=o>.</span><span class=n>host_name</span><span class=p>,</span>
        <span class=n>anatomy</span><span class=o>=</span><span class=n>create_ctx</span><span class=o>.</span><span class=n>get_current_project_anatomy</span><span class=p>(),</span>
        <span class=n>project_settings</span><span class=o>=</span><span class=n>create_ctx</span><span class=o>.</span><span class=n>get_current_project_settings</span><span class=p>(),</span>
        <span class=n>always_return_path</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
        <span class=n>logger</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=p>,</span>
        <span class=n>template_data</span><span class=o>=</span><span class=n>template_data</span><span class=p>,</span>
    <span class=p>)</span>

    <span class=k>return</span> <span class=n>staging_dir_info</span> <span class=ow>or</span> <span class=kc>None</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.create.CreatorAttributeValues class="doc doc-heading"> <code>CreatorAttributeValues</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="AttributeValues (client.ayon_core.pipeline.create.structures.AttributeValues)" href=structures.html#client.ayon_core.pipeline.create.structures.AttributeValues>AttributeValues</a></code></p> <p>Creator specific attribute values of an instance.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>CreatorAttributeValues</span><span class=p>(</span><span class=n>AttributeValues</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Creator specific attribute values of an instance.&quot;&quot;&quot;</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>instance</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_parent</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.create.CreatorError class="doc doc-heading"> <code>CreatorError</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=Exception>Exception</span></code></p> <p>Should be raised when creator failed because of known issue.</p> <p>Message of error should be artist friendly.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/exceptions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>63</span>
<span class=normal>64</span>
<span class=normal>65</span>
<span class=normal>66</span>
<span class=normal>67</span>
<span class=normal>68</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>CreatorError</span><span class=p>(</span><span class=ne>Exception</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Should be raised when creator failed because of known issue.</span>

<span class=sd>    Message of error should be artist friendly.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.create.CreatorsOperationFailed class="doc doc-heading"> <code>CreatorsOperationFailed</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=Exception>Exception</span></code></p> <p>Raised when a creator process crashes in 'CreateContext'.</p> <p>The exception contains information about the creator and error. The data are prepared using 'prepare_failed_creator_operation_info' and can be serialized using json.</p> <p>Usage is for UI purposes which may not have access to exceptions directly and would not have ability to catch exceptions 'per creator'.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>msg</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>General error message.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>failed_info</code> </td> <td> <code><span title=list>list</span>[<span title=dict>dict</span>[<span title=str>str</span>, <span title=Any>Any</span>]]</code> </td> <td> <div class=doc-md-description> <p>List of failed creators with exception message and optionally formatted traceback.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/exceptions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>71</span>
<span class=normal>72</span>
<span class=normal>73</span>
<span class=normal>74</span>
<span class=normal>75</span>
<span class=normal>76</span>
<span class=normal>77</span>
<span class=normal>78</span>
<span class=normal>79</span>
<span class=normal>80</span>
<span class=normal>81</span>
<span class=normal>82</span>
<span class=normal>83</span>
<span class=normal>84</span>
<span class=normal>85</span>
<span class=normal>86</span>
<span class=normal>87</span>
<span class=normal>88</span>
<span class=normal>89</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>CreatorsOperationFailed</span><span class=p>(</span><span class=ne>Exception</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Raised when a creator process crashes in &#39;CreateContext&#39;.</span>

<span class=sd>    The exception contains information about the creator and error. The data</span>
<span class=sd>    are prepared using &#39;prepare_failed_creator_operation_info&#39; and can be</span>
<span class=sd>    serialized using json.</span>

<span class=sd>    Usage is for UI purposes which may not have access to exceptions directly</span>
<span class=sd>    and would not have ability to catch exceptions &#39;per creator&#39;.</span>

<span class=sd>    Args:</span>
<span class=sd>        msg (str): General error message.</span>
<span class=sd>        failed_info (list[dict[str, Any]]): List of failed creators with</span>
<span class=sd>            exception message and optionally formatted traceback.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>msg</span><span class=p>,</span> <span class=n>failed_info</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>failed_info</span> <span class=o>=</span> <span class=n>failed_info</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.create.HostMissRequiredMethod class="doc doc-heading"> <code>HostMissRequiredMethod</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=Exception>Exception</span></code></p> <p>Host does not have implemented required functions for creation.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/exceptions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>HostMissRequiredMethod</span><span class=p>(</span><span class=ne>Exception</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Host does not have implemented required functions for creation.&quot;&quot;&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>host</span><span class=p>,</span> <span class=n>missing_methods</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>missing_methods</span> <span class=o>=</span> <span class=n>missing_methods</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>host</span> <span class=o>=</span> <span class=n>host</span>
        <span class=n>joined_methods</span> <span class=o>=</span> <span class=s2>&quot;, &quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span>
            <span class=p>[</span><span class=s1>&#39;&quot;</span><span class=si>{}</span><span class=s1>&quot;&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>name</span><span class=p>)</span> <span class=k>for</span> <span class=n>name</span> <span class=ow>in</span> <span class=n>missing_methods</span><span class=p>]</span>
        <span class=p>)</span>
        <span class=n>dirpath</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>dirname</span><span class=p>(</span>
            <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>normpath</span><span class=p>(</span><span class=n>inspect</span><span class=o>.</span><span class=n>getsourcefile</span><span class=p>(</span><span class=n>host</span><span class=p>))</span>
        <span class=p>)</span>
        <span class=n>dirpath_parts</span> <span class=o>=</span> <span class=n>dirpath</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>sep</span><span class=p>)</span>
        <span class=n>host_name</span> <span class=o>=</span> <span class=n>dirpath_parts</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>host_name</span> <span class=o>==</span> <span class=s2>&quot;api&quot;</span><span class=p>:</span>
            <span class=n>host_name</span> <span class=o>=</span> <span class=n>dirpath_parts</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>)</span>

        <span class=n>msg</span> <span class=o>=</span> <span class=s2>&quot;Host </span><span class=se>\&quot;</span><span class=si>{}</span><span class=se>\&quot;</span><span class=s2> does not have implemented method/s </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
            <span class=n>host_name</span><span class=p>,</span> <span class=n>joined_methods</span>
        <span class=p>)</span>
        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.create.ImmutableKeyError class="doc doc-heading"> <code>ImmutableKeyError</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=TypeError>TypeError</span></code></p> <p>Accessed key is immutable so does not allow changes or removals.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/exceptions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>ImmutableKeyError</span><span class=p>(</span><span class=ne>TypeError</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Accessed key is immutable so does not allow changes or removals.&quot;&quot;&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>msg</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>immutable_key</span> <span class=o>=</span> <span class=n>key</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>msg</span><span class=p>:</span>
            <span class=n>msg</span> <span class=o>=</span> <span class=s2>&quot;Key </span><span class=se>\&quot;</span><span class=si>{}</span><span class=se>\&quot;</span><span class=s2> is immutable and does not allow changes.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                <span class=n>key</span>
            <span class=p>)</span>
        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.create.LegacyCreator class="doc doc-heading"> <code>LegacyCreator</code> </h2> <div class="doc doc-contents "> <p>Determine how assets are created</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/legacy_create.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 17</span>
<span class=normal> 18</span>
<span class=normal> 19</span>
<span class=normal> 20</span>
<span class=normal> 21</span>
<span class=normal> 22</span>
<span class=normal> 23</span>
<span class=normal> 24</span>
<span class=normal> 25</span>
<span class=normal> 26</span>
<span class=normal> 27</span>
<span class=normal> 28</span>
<span class=normal> 29</span>
<span class=normal> 30</span>
<span class=normal> 31</span>
<span class=normal> 32</span>
<span class=normal> 33</span>
<span class=normal> 34</span>
<span class=normal> 35</span>
<span class=normal> 36</span>
<span class=normal> 37</span>
<span class=normal> 38</span>
<span class=normal> 39</span>
<span class=normal> 40</span>
<span class=normal> 41</span>
<span class=normal> 42</span>
<span class=normal> 43</span>
<span class=normal> 44</span>
<span class=normal> 45</span>
<span class=normal> 46</span>
<span class=normal> 47</span>
<span class=normal> 48</span>
<span class=normal> 49</span>
<span class=normal> 50</span>
<span class=normal> 51</span>
<span class=normal> 52</span>
<span class=normal> 53</span>
<span class=normal> 54</span>
<span class=normal> 55</span>
<span class=normal> 56</span>
<span class=normal> 57</span>
<span class=normal> 58</span>
<span class=normal> 59</span>
<span class=normal> 60</span>
<span class=normal> 61</span>
<span class=normal> 62</span>
<span class=normal> 63</span>
<span class=normal> 64</span>
<span class=normal> 65</span>
<span class=normal> 66</span>
<span class=normal> 67</span>
<span class=normal> 68</span>
<span class=normal> 69</span>
<span class=normal> 70</span>
<span class=normal> 71</span>
<span class=normal> 72</span>
<span class=normal> 73</span>
<span class=normal> 74</span>
<span class=normal> 75</span>
<span class=normal> 76</span>
<span class=normal> 77</span>
<span class=normal> 78</span>
<span class=normal> 79</span>
<span class=normal> 80</span>
<span class=normal> 81</span>
<span class=normal> 82</span>
<span class=normal> 83</span>
<span class=normal> 84</span>
<span class=normal> 85</span>
<span class=normal> 86</span>
<span class=normal> 87</span>
<span class=normal> 88</span>
<span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>LegacyCreator</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Determine how assets are created&quot;&quot;&quot;</span>
    <span class=n>label</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=n>product_type</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=n>defaults</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=n>maintain_selection</span> <span class=o>=</span> <span class=kc>True</span>
    <span class=n>enabled</span> <span class=o>=</span> <span class=kc>True</span>

    <span class=n>dynamic_product_name_keys</span> <span class=o>=</span> <span class=p>[]</span>

    <span class=n>log</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>getLogger</span><span class=p>(</span><span class=s2>&quot;LegacyCreator&quot;</span><span class=p>)</span>
    <span class=n>log</span><span class=o>.</span><span class=n>propagate</span> <span class=o>=</span> <span class=kc>True</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>folder_path</span><span class=p>,</span> <span class=n>options</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>data</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>name</span> <span class=o>=</span> <span class=n>name</span>  <span class=c1># For backwards compatibility</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>options</span> <span class=o>=</span> <span class=n>options</span>

        <span class=c1># Default data</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>data</span> <span class=o>=</span> <span class=n>collections</span><span class=o>.</span><span class=n>OrderedDict</span><span class=p>()</span>
        <span class=c1># TODO use &#39;AYON_INSTANCE_ID&#39; when all hosts support it</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>AYON_INSTANCE_ID</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;productType&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>product_type</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;folderPath&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>folder_path</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;productName&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>name</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;active&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>True</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>data</span> <span class=ow>or</span> <span class=p>{})</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>apply_settings</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>project_settings</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Apply AYON settings to a plugin class.&quot;&quot;&quot;</span>

        <span class=n>host_name</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AYON_HOST_NAME&quot;</span><span class=p>)</span>
        <span class=n>plugin_type</span> <span class=o>=</span> <span class=s2>&quot;create&quot;</span>
        <span class=n>plugin_type_settings</span> <span class=o>=</span> <span class=p>(</span>
            <span class=n>project_settings</span>
            <span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>host_name</span><span class=p>,</span> <span class=p>{})</span>
            <span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>plugin_type</span><span class=p>,</span> <span class=p>{})</span>
        <span class=p>)</span>
        <span class=n>global_type_settings</span> <span class=o>=</span> <span class=p>(</span>
            <span class=n>project_settings</span>
            <span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;core&quot;</span><span class=p>,</span> <span class=p>{})</span>
            <span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>plugin_type</span><span class=p>,</span> <span class=p>{})</span>
        <span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>global_type_settings</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>plugin_type_settings</span><span class=p>:</span>
            <span class=k>return</span>

        <span class=n>plugin_name</span> <span class=o>=</span> <span class=bp>cls</span><span class=o>.</span><span class=vm>__name__</span>

        <span class=n>plugin_settings</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=c1># Look for plugin settings in host specific settings</span>
        <span class=k>if</span> <span class=n>plugin_name</span> <span class=ow>in</span> <span class=n>plugin_type_settings</span><span class=p>:</span>
            <span class=n>plugin_settings</span> <span class=o>=</span> <span class=n>plugin_type_settings</span><span class=p>[</span><span class=n>plugin_name</span><span class=p>]</span>

        <span class=c1># Look for plugin settings in global settings</span>
        <span class=k>elif</span> <span class=n>plugin_name</span> <span class=ow>in</span> <span class=n>global_type_settings</span><span class=p>:</span>
            <span class=n>plugin_settings</span> <span class=o>=</span> <span class=n>global_type_settings</span><span class=p>[</span><span class=n>plugin_name</span><span class=p>]</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>plugin_settings</span><span class=p>:</span>
            <span class=k>return</span>

        <span class=bp>cls</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;&gt;&gt;&gt; We have preset for </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>plugin_name</span><span class=p>))</span>
        <span class=k>for</span> <span class=n>option</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>plugin_settings</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=k>if</span> <span class=n>option</span> <span class=o>==</span> <span class=s2>&quot;enabled&quot;</span> <span class=ow>and</span> <span class=n>value</span> <span class=ow>is</span> <span class=kc>False</span><span class=p>:</span>
                <span class=bp>cls</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;  - is disabled by preset&quot;</span><span class=p>)</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=bp>cls</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;  - setting `</span><span class=si>{}</span><span class=s2>`: `</span><span class=si>{}</span><span class=s2>`&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>option</span><span class=p>,</span> <span class=n>value</span><span class=p>))</span>
            <span class=nb>setattr</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>option</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>process</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>pass</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>get_dynamic_data</span><span class=p>(</span>
        <span class=bp>cls</span><span class=p>,</span> <span class=n>project_name</span><span class=p>,</span> <span class=n>folder_entity</span><span class=p>,</span> <span class=n>task_entity</span><span class=p>,</span> <span class=n>variant</span><span class=p>,</span> <span class=n>host_name</span>
    <span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Return dynamic data for current Creator plugin.</span>

<span class=sd>        By default return keys from `dynamic_product_name_keys` attribute</span>
<span class=sd>        as mapping to keep formatted template unchanged.</span>

<span class=sd>        ```</span>
<span class=sd>        dynamic_product_name_keys = [&quot;my_key&quot;]</span>
<span class=sd>        ---</span>
<span class=sd>        output = {</span>
<span class=sd>            &quot;my_key&quot;: &quot;{my_key}&quot;</span>
<span class=sd>        }</span>
<span class=sd>        ```</span>

<span class=sd>        Dynamic keys may override default Creator keys (productType, task,</span>
<span class=sd>        folderPath, ...) but do it wisely if you need.</span>

<span class=sd>        All of keys will be converted into 3 variants unchanged, capitalized</span>
<span class=sd>        and all upper letters. Because of that are all keys lowered.</span>

<span class=sd>        This method can be modified to prefill some values just keep in mind it</span>
<span class=sd>        is class method.</span>

<span class=sd>        Args:</span>
<span class=sd>            project_name (str): Context&#39;s project name.</span>
<span class=sd>            folder_entity (dict[str, Any]): Folder entity.</span>
<span class=sd>            task_entity (dict[str, Any]): Task entity.</span>
<span class=sd>            variant (str): What is entered by user in creator tool.</span>
<span class=sd>            host_name (str): Name of host.</span>

<span class=sd>        Returns:</span>
<span class=sd>            dict: Fill data for product name template.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>dynamic_data</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=k>for</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>cls</span><span class=o>.</span><span class=n>dynamic_product_name_keys</span><span class=p>:</span>
            <span class=n>key</span> <span class=o>=</span> <span class=n>key</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span>
            <span class=n>dynamic_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&quot;{&quot;</span> <span class=o>+</span> <span class=n>key</span> <span class=o>+</span> <span class=s2>&quot;}&quot;</span>
        <span class=k>return</span> <span class=n>dynamic_data</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>get_product_name</span><span class=p>(</span>
        <span class=bp>cls</span><span class=p>,</span> <span class=n>project_name</span><span class=p>,</span> <span class=n>folder_entity</span><span class=p>,</span> <span class=n>task_entity</span><span class=p>,</span> <span class=n>variant</span><span class=p>,</span> <span class=n>host_name</span><span class=o>=</span><span class=kc>None</span>
    <span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Return product name created with entered arguments.</span>

<span class=sd>        Logic extracted from Creator tool. This method should give ability</span>
<span class=sd>        to get product name without the tool.</span>

<span class=sd>        TODO: Maybe change `variant` variable.</span>

<span class=sd>        By default is output concatenated product type with variant.</span>

<span class=sd>        Args:</span>
<span class=sd>            project_name (str): Context&#39;s project name.</span>
<span class=sd>            folder_entity (dict[str, Any]): Folder entity.</span>
<span class=sd>            task_entity (dict[str, Any]): Task entity.</span>
<span class=sd>            variant (str): What is entered by user in creator tool.</span>
<span class=sd>            host_name (str): Name of host.</span>

<span class=sd>        Returns:</span>
<span class=sd>            str: Formatted product name with entered arguments. Should match</span>
<span class=sd>                config&#39;s logic.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>dynamic_data</span> <span class=o>=</span> <span class=bp>cls</span><span class=o>.</span><span class=n>get_dynamic_data</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span> <span class=n>folder_entity</span><span class=p>,</span> <span class=n>task_entity</span><span class=p>,</span> <span class=n>variant</span><span class=p>,</span> <span class=n>host_name</span>
        <span class=p>)</span>
        <span class=n>task_name</span> <span class=o>=</span> <span class=n>task_type</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=k>if</span> <span class=n>task_entity</span><span class=p>:</span>
            <span class=n>task_name</span> <span class=o>=</span> <span class=n>task_entity</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span>
            <span class=n>task_type</span> <span class=o>=</span> <span class=n>task_entity</span><span class=p>[</span><span class=s2>&quot;taskType&quot;</span><span class=p>]</span>
        <span class=k>return</span> <span class=n>get_product_name</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span>
            <span class=n>task_name</span><span class=p>,</span>
            <span class=n>task_type</span><span class=p>,</span>
            <span class=n>host_name</span><span class=p>,</span>
            <span class=bp>cls</span><span class=o>.</span><span class=n>product_type</span><span class=p>,</span>
            <span class=n>variant</span><span class=p>,</span>
            <span class=n>dynamic_data</span><span class=o>=</span><span class=n>dynamic_data</span>
        <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.LegacyCreator.apply_settings class="doc doc-heading"> <code class="highlight language-python"><span class=n>apply_settings</span><span class=p>(</span><span class=n>project_settings</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Apply AYON settings to a plugin class.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/legacy_create.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span>
<span class=normal>62</span>
<span class=normal>63</span>
<span class=normal>64</span>
<span class=normal>65</span>
<span class=normal>66</span>
<span class=normal>67</span>
<span class=normal>68</span>
<span class=normal>69</span>
<span class=normal>70</span>
<span class=normal>71</span>
<span class=normal>72</span>
<span class=normal>73</span>
<span class=normal>74</span>
<span class=normal>75</span>
<span class=normal>76</span>
<span class=normal>77</span>
<span class=normal>78</span>
<span class=normal>79</span>
<span class=normal>80</span>
<span class=normal>81</span>
<span class=normal>82</span>
<span class=normal>83</span>
<span class=normal>84</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@classmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>apply_settings</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>project_settings</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Apply AYON settings to a plugin class.&quot;&quot;&quot;</span>

    <span class=n>host_name</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AYON_HOST_NAME&quot;</span><span class=p>)</span>
    <span class=n>plugin_type</span> <span class=o>=</span> <span class=s2>&quot;create&quot;</span>
    <span class=n>plugin_type_settings</span> <span class=o>=</span> <span class=p>(</span>
        <span class=n>project_settings</span>
        <span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>host_name</span><span class=p>,</span> <span class=p>{})</span>
        <span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>plugin_type</span><span class=p>,</span> <span class=p>{})</span>
    <span class=p>)</span>
    <span class=n>global_type_settings</span> <span class=o>=</span> <span class=p>(</span>
        <span class=n>project_settings</span>
        <span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;core&quot;</span><span class=p>,</span> <span class=p>{})</span>
        <span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>plugin_type</span><span class=p>,</span> <span class=p>{})</span>
    <span class=p>)</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>global_type_settings</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>plugin_type_settings</span><span class=p>:</span>
        <span class=k>return</span>

    <span class=n>plugin_name</span> <span class=o>=</span> <span class=bp>cls</span><span class=o>.</span><span class=vm>__name__</span>

    <span class=n>plugin_settings</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=c1># Look for plugin settings in host specific settings</span>
    <span class=k>if</span> <span class=n>plugin_name</span> <span class=ow>in</span> <span class=n>plugin_type_settings</span><span class=p>:</span>
        <span class=n>plugin_settings</span> <span class=o>=</span> <span class=n>plugin_type_settings</span><span class=p>[</span><span class=n>plugin_name</span><span class=p>]</span>

    <span class=c1># Look for plugin settings in global settings</span>
    <span class=k>elif</span> <span class=n>plugin_name</span> <span class=ow>in</span> <span class=n>global_type_settings</span><span class=p>:</span>
        <span class=n>plugin_settings</span> <span class=o>=</span> <span class=n>global_type_settings</span><span class=p>[</span><span class=n>plugin_name</span><span class=p>]</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>plugin_settings</span><span class=p>:</span>
        <span class=k>return</span>

    <span class=bp>cls</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;&gt;&gt;&gt; We have preset for </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>plugin_name</span><span class=p>))</span>
    <span class=k>for</span> <span class=n>option</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>plugin_settings</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
        <span class=k>if</span> <span class=n>option</span> <span class=o>==</span> <span class=s2>&quot;enabled&quot;</span> <span class=ow>and</span> <span class=n>value</span> <span class=ow>is</span> <span class=kc>False</span><span class=p>:</span>
            <span class=bp>cls</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;  - is disabled by preset&quot;</span><span class=p>)</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=bp>cls</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;  - setting `</span><span class=si>{}</span><span class=s2>`: `</span><span class=si>{}</span><span class=s2>`&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>option</span><span class=p>,</span> <span class=n>value</span><span class=p>))</span>
        <span class=nb>setattr</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>option</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.LegacyCreator.get_dynamic_data class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_dynamic_data</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=n>folder_entity</span><span class=p>,</span> <span class=n>task_entity</span><span class=p>,</span> <span class=n>variant</span><span class=p>,</span> <span class=n>host_name</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Return dynamic data for current Creator plugin.</p> <p>By default return keys from <code>dynamic_product_name_keys</code> attribute as mapping to keep formatted template unchanged.</p> <pre><code>dynamic_product_name_keys = [&quot;my_key&quot;]
---
output = {
    &quot;my_key&quot;: &quot;{my_key}&quot;
}
</code></pre> <p>Dynamic keys may override default Creator keys (productType, task, folderPath, ...) but do it wisely if you need.</p> <p>All of keys will be converted into 3 variants unchanged, capitalized and all upper letters. Because of that are all keys lowered.</p> <p>This method can be modified to prefill some values just keep in mind it is class method.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>project_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Context's project name.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>folder_entity</code> </td> <td> <code><span title=dict>dict</span>[<span title=str>str</span>, <span title=Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Folder entity.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>task_entity</code> </td> <td> <code><span title=dict>dict</span>[<span title=str>str</span>, <span title=Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Task entity.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>variant</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>What is entered by user in creator tool.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>host_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Name of host.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>dict</code></td> <td> </td> <td> <div class=doc-md-description> <p>Fill data for product name template.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/legacy_create.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@classmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>get_dynamic_data</span><span class=p>(</span>
    <span class=bp>cls</span><span class=p>,</span> <span class=n>project_name</span><span class=p>,</span> <span class=n>folder_entity</span><span class=p>,</span> <span class=n>task_entity</span><span class=p>,</span> <span class=n>variant</span><span class=p>,</span> <span class=n>host_name</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Return dynamic data for current Creator plugin.</span>

<span class=sd>    By default return keys from `dynamic_product_name_keys` attribute</span>
<span class=sd>    as mapping to keep formatted template unchanged.</span>

<span class=sd>    ```</span>
<span class=sd>    dynamic_product_name_keys = [&quot;my_key&quot;]</span>
<span class=sd>    ---</span>
<span class=sd>    output = {</span>
<span class=sd>        &quot;my_key&quot;: &quot;{my_key}&quot;</span>
<span class=sd>    }</span>
<span class=sd>    ```</span>

<span class=sd>    Dynamic keys may override default Creator keys (productType, task,</span>
<span class=sd>    folderPath, ...) but do it wisely if you need.</span>

<span class=sd>    All of keys will be converted into 3 variants unchanged, capitalized</span>
<span class=sd>    and all upper letters. Because of that are all keys lowered.</span>

<span class=sd>    This method can be modified to prefill some values just keep in mind it</span>
<span class=sd>    is class method.</span>

<span class=sd>    Args:</span>
<span class=sd>        project_name (str): Context&#39;s project name.</span>
<span class=sd>        folder_entity (dict[str, Any]): Folder entity.</span>
<span class=sd>        task_entity (dict[str, Any]): Task entity.</span>
<span class=sd>        variant (str): What is entered by user in creator tool.</span>
<span class=sd>        host_name (str): Name of host.</span>

<span class=sd>    Returns:</span>
<span class=sd>        dict: Fill data for product name template.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>dynamic_data</span> <span class=o>=</span> <span class=p>{}</span>
    <span class=k>for</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>cls</span><span class=o>.</span><span class=n>dynamic_product_name_keys</span><span class=p>:</span>
        <span class=n>key</span> <span class=o>=</span> <span class=n>key</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span>
        <span class=n>dynamic_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&quot;{&quot;</span> <span class=o>+</span> <span class=n>key</span> <span class=o>+</span> <span class=s2>&quot;}&quot;</span>
    <span class=k>return</span> <span class=n>dynamic_data</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.LegacyCreator.get_product_name class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_product_name</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=n>folder_entity</span><span class=p>,</span> <span class=n>task_entity</span><span class=p>,</span> <span class=n>variant</span><span class=p>,</span> <span class=n>host_name</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Return product name created with entered arguments.</p> <p>Logic extracted from Creator tool. This method should give ability to get product name without the tool.</p> <p>TODO: Maybe change <code>variant</code> variable.</p> <p>By default is output concatenated product type with variant.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>project_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Context's project name.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>folder_entity</code> </td> <td> <code><span title=dict>dict</span>[<span title=str>str</span>, <span title=Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Folder entity.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>task_entity</code> </td> <td> <code><span title=dict>dict</span>[<span title=str>str</span>, <span title=Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Task entity.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>variant</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>What is entered by user in creator tool.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>host_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Name of host.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>Formatted product name with entered arguments. Should match config's logic.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/legacy_create.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@classmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>get_product_name</span><span class=p>(</span>
    <span class=bp>cls</span><span class=p>,</span> <span class=n>project_name</span><span class=p>,</span> <span class=n>folder_entity</span><span class=p>,</span> <span class=n>task_entity</span><span class=p>,</span> <span class=n>variant</span><span class=p>,</span> <span class=n>host_name</span><span class=o>=</span><span class=kc>None</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Return product name created with entered arguments.</span>

<span class=sd>    Logic extracted from Creator tool. This method should give ability</span>
<span class=sd>    to get product name without the tool.</span>

<span class=sd>    TODO: Maybe change `variant` variable.</span>

<span class=sd>    By default is output concatenated product type with variant.</span>

<span class=sd>    Args:</span>
<span class=sd>        project_name (str): Context&#39;s project name.</span>
<span class=sd>        folder_entity (dict[str, Any]): Folder entity.</span>
<span class=sd>        task_entity (dict[str, Any]): Task entity.</span>
<span class=sd>        variant (str): What is entered by user in creator tool.</span>
<span class=sd>        host_name (str): Name of host.</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: Formatted product name with entered arguments. Should match</span>
<span class=sd>            config&#39;s logic.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>dynamic_data</span> <span class=o>=</span> <span class=bp>cls</span><span class=o>.</span><span class=n>get_dynamic_data</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span> <span class=n>folder_entity</span><span class=p>,</span> <span class=n>task_entity</span><span class=p>,</span> <span class=n>variant</span><span class=p>,</span> <span class=n>host_name</span>
    <span class=p>)</span>
    <span class=n>task_name</span> <span class=o>=</span> <span class=n>task_type</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=k>if</span> <span class=n>task_entity</span><span class=p>:</span>
        <span class=n>task_name</span> <span class=o>=</span> <span class=n>task_entity</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span>
        <span class=n>task_type</span> <span class=o>=</span> <span class=n>task_entity</span><span class=p>[</span><span class=s2>&quot;taskType&quot;</span><span class=p>]</span>
    <span class=k>return</span> <span class=n>get_product_name</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span>
        <span class=n>task_name</span><span class=p>,</span>
        <span class=n>task_type</span><span class=p>,</span>
        <span class=n>host_name</span><span class=p>,</span>
        <span class=bp>cls</span><span class=o>.</span><span class=n>product_type</span><span class=p>,</span>
        <span class=n>variant</span><span class=p>,</span>
        <span class=n>dynamic_data</span><span class=o>=</span><span class=n>dynamic_data</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.create.PublishAttributeValues class="doc doc-heading"> <code>PublishAttributeValues</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="AttributeValues (client.ayon_core.pipeline.create.structures.AttributeValues)" href=structures.html#client.ayon_core.pipeline.create.structures.AttributeValues>AttributeValues</a></code></p> <p>Publish plugin specific attribute values.</p> <p>Values are for single plugin which can be on <code>CreatedInstance</code> or context values stored on <code>CreateContext</code>.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>PublishAttributeValues</span><span class=p>(</span><span class=n>AttributeValues</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Publish plugin specific attribute values.</span>

<span class=sd>    Values are for single plugin which can be on `CreatedInstance`</span>
<span class=sd>    or context values stored on `CreateContext`.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>publish_attributes</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_parent</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.create.PublishAttributes class="doc doc-heading"> <code>PublishAttributes</code> </h2> <div class="doc doc-contents "> <p>Wrapper for publish plugin attribute definitions.</p> <p>Cares about handling attribute definitions of multiple publish plugins. Keep information about attribute definitions and their values.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>parent(CreatedInstance,</code> </td> <td> <code><a class="autorefs autorefs-internal" title="CreateContext (client.ayon_core.pipeline.create.context.CreateContext)" href=context.html#client.ayon_core.pipeline.create.context.CreateContext>CreateContext</a></code> </td> <td> <div class=doc-md-description> <p>Parent for which will be data stored and from which are data loaded.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>origin_data(dict)</code> </td> <td> </td> <td> <div class=doc-md-description> <p>Loaded data by plugin class name.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span>
<span class=normal>277</span>
<span class=normal>278</span>
<span class=normal>279</span>
<span class=normal>280</span>
<span class=normal>281</span>
<span class=normal>282</span>
<span class=normal>283</span>
<span class=normal>284</span>
<span class=normal>285</span>
<span class=normal>286</span>
<span class=normal>287</span>
<span class=normal>288</span>
<span class=normal>289</span>
<span class=normal>290</span>
<span class=normal>291</span>
<span class=normal>292</span>
<span class=normal>293</span>
<span class=normal>294</span>
<span class=normal>295</span>
<span class=normal>296</span>
<span class=normal>297</span>
<span class=normal>298</span>
<span class=normal>299</span>
<span class=normal>300</span>
<span class=normal>301</span>
<span class=normal>302</span>
<span class=normal>303</span>
<span class=normal>304</span>
<span class=normal>305</span>
<span class=normal>306</span>
<span class=normal>307</span>
<span class=normal>308</span>
<span class=normal>309</span>
<span class=normal>310</span>
<span class=normal>311</span>
<span class=normal>312</span>
<span class=normal>313</span>
<span class=normal>314</span>
<span class=normal>315</span>
<span class=normal>316</span>
<span class=normal>317</span>
<span class=normal>318</span>
<span class=normal>319</span>
<span class=normal>320</span>
<span class=normal>321</span>
<span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span>
<span class=normal>325</span>
<span class=normal>326</span>
<span class=normal>327</span>
<span class=normal>328</span>
<span class=normal>329</span>
<span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span>
<span class=normal>334</span>
<span class=normal>335</span>
<span class=normal>336</span>
<span class=normal>337</span>
<span class=normal>338</span>
<span class=normal>339</span>
<span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span>
<span class=normal>344</span>
<span class=normal>345</span>
<span class=normal>346</span>
<span class=normal>347</span>
<span class=normal>348</span>
<span class=normal>349</span>
<span class=normal>350</span>
<span class=normal>351</span>
<span class=normal>352</span>
<span class=normal>353</span>
<span class=normal>354</span>
<span class=normal>355</span>
<span class=normal>356</span>
<span class=normal>357</span>
<span class=normal>358</span>
<span class=normal>359</span>
<span class=normal>360</span>
<span class=normal>361</span>
<span class=normal>362</span>
<span class=normal>363</span>
<span class=normal>364</span>
<span class=normal>365</span>
<span class=normal>366</span>
<span class=normal>367</span>
<span class=normal>368</span>
<span class=normal>369</span>
<span class=normal>370</span>
<span class=normal>371</span>
<span class=normal>372</span>
<span class=normal>373</span>
<span class=normal>374</span>
<span class=normal>375</span>
<span class=normal>376</span>
<span class=normal>377</span>
<span class=normal>378</span>
<span class=normal>379</span>
<span class=normal>380</span>
<span class=normal>381</span>
<span class=normal>382</span>
<span class=normal>383</span>
<span class=normal>384</span>
<span class=normal>385</span>
<span class=normal>386</span>
<span class=normal>387</span>
<span class=normal>388</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>PublishAttributes</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Wrapper for publish plugin attribute definitions.</span>

<span class=sd>    Cares about handling attribute definitions of multiple publish plugins.</span>
<span class=sd>    Keep information about attribute definitions and their values.</span>

<span class=sd>    Args:</span>
<span class=sd>        parent(CreatedInstance, CreateContext): Parent for which will be</span>
<span class=sd>            data stored and from which are data loaded.</span>
<span class=sd>        origin_data(dict): Loaded data by plugin class name.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>parent</span><span class=p>,</span> <span class=n>origin_data</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_parent</span> <span class=o>=</span> <span class=n>parent</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_origin_data</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=n>origin_data</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=n>origin_data</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__getitem__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__contains__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span>

    <span class=k>def</span><span class=w> </span><span class=nf>keys</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>keys</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>values</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>values</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>items</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>items</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>default</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>pop</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Remove or reset value for plugin.</span>

<span class=sd>        Plugin values are reset to defaults if plugin is available but</span>
<span class=sd>        data of plugin which was not found are removed.</span>

<span class=sd>        Args:</span>
<span class=sd>            key(str): Plugin name.</span>
<span class=sd>            default: Default value if plugin was not found.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>if</span> <span class=n>key</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>default</span>

        <span class=n>value</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=n>AttributeValues</span><span class=p>):</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>attribute_value_changed</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>

        <span class=n>value_item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
        <span class=c1># Prepare value to return</span>
        <span class=n>output</span> <span class=o>=</span> <span class=n>value_item</span><span class=o>.</span><span class=n>data_to_store</span><span class=p>()</span>
        <span class=c1># Reset values</span>
        <span class=n>value_item</span><span class=o>.</span><span class=n>reset_values</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>attribute_value_changed</span><span class=p>(</span>
            <span class=n>key</span><span class=p>,</span> <span class=n>value_item</span><span class=o>.</span><span class=n>data_to_store</span><span class=p>()</span>
        <span class=p>)</span>
        <span class=k>return</span> <span class=n>output</span>

    <span class=k>def</span><span class=w> </span><span class=nf>mark_as_stored</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_origin_data</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>data_to_store</span><span class=p>())</span>

    <span class=k>def</span><span class=w> </span><span class=nf>data_to_store</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Convert attribute values to &quot;data to store&quot;.&quot;&quot;&quot;</span>
        <span class=n>output</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>attr_value</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>attr_value</span><span class=p>,</span> <span class=n>AttributeValues</span><span class=p>):</span>
                <span class=n>output</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>attr_value</span><span class=o>.</span><span class=n>data_to_store</span><span class=p>()</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=n>output</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>attr_value</span>
        <span class=k>return</span> <span class=n>output</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>origin_data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_origin_data</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>attribute_value_changed</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>changes</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_parent</span><span class=o>.</span><span class=n>publish_attribute_value_changed</span><span class=p>(</span><span class=n>key</span><span class=p>,</span>  <span class=n>changes</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_publish_plugin_attr_defs</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>plugin_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
        <span class=n>attr_defs</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>AbstractAttrDef</span><span class=p>],</span>
        <span class=n>value</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Set attribute definitions for plugin.</span>

<span class=sd>        Args:</span>
<span class=sd>            plugin_name (str): Name of plugin.</span>
<span class=sd>            attr_defs (List[AbstractAttrDef]): Attribute definitions.</span>
<span class=sd>            value (Optional[Dict[str, Any]]): Attribute values.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=c1># TODO what if &#39;attr_defs&#39; is &#39;None&#39;?</span>
        <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>value</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>plugin_name</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>value</span> <span class=o>=</span> <span class=p>{}</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=n>plugin_name</span><span class=p>]</span> <span class=o>=</span> <span class=n>PublishAttributeValues</span><span class=p>(</span>
            <span class=bp>self</span><span class=p>,</span> <span class=n>plugin_name</span><span class=p>,</span> <span class=n>attr_defs</span><span class=p>,</span> <span class=n>value</span><span class=p>,</span> <span class=n>value</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>serialize_attributes</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=p>{</span>
            <span class=s2>&quot;attr_defs&quot;</span><span class=p>:</span> <span class=p>{</span>
                <span class=n>plugin_name</span><span class=p>:</span> <span class=n>attrs_value</span><span class=o>.</span><span class=n>get_serialized_attr_defs</span><span class=p>()</span>
                <span class=k>for</span> <span class=n>plugin_name</span><span class=p>,</span> <span class=n>attrs_value</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>items</span><span class=p>()</span>
            <span class=p>},</span>
        <span class=p>}</span>

    <span class=k>def</span><span class=w> </span><span class=nf>deserialize_attributes</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>data</span><span class=p>):</span>
        <span class=n>attr_defs</span> <span class=o>=</span> <span class=n>deserialize_attr_defs</span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;attr_defs&quot;</span><span class=p>])</span>

        <span class=n>origin_data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_origin_data</span>
        <span class=n>data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span> <span class=o>=</span> <span class=p>{}</span>

        <span class=n>added_keys</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
        <span class=k>for</span> <span class=n>plugin_name</span><span class=p>,</span> <span class=n>attr_defs_data</span> <span class=ow>in</span> <span class=n>attr_defs</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=n>attr_defs</span> <span class=o>=</span> <span class=n>deserialize_attr_defs</span><span class=p>(</span><span class=n>attr_defs_data</span><span class=p>)</span>
            <span class=n>value</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>plugin_name</span><span class=p>)</span> <span class=ow>or</span> <span class=p>{}</span>
            <span class=n>orig_value</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=n>origin_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>plugin_name</span><span class=p>)</span> <span class=ow>or</span> <span class=p>{})</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=n>plugin_name</span><span class=p>]</span> <span class=o>=</span> <span class=n>PublishAttributeValues</span><span class=p>(</span>
                <span class=bp>self</span><span class=p>,</span> <span class=n>plugin_name</span><span class=p>,</span> <span class=n>attr_defs</span><span class=p>,</span> <span class=n>value</span><span class=p>,</span> <span class=n>orig_value</span>
            <span class=p>)</span>

        <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>data</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=k>if</span> <span class=n>key</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>added_keys</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.PublishAttributes.data_to_store class="doc doc-heading"> <code class="highlight language-python"><span class=n>data_to_store</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Convert attribute values to "data to store".</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>320</span>
<span class=normal>321</span>
<span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span>
<span class=normal>325</span>
<span class=normal>326</span>
<span class=normal>327</span>
<span class=normal>328</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>data_to_store</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Convert attribute values to &quot;data to store&quot;.&quot;&quot;&quot;</span>
    <span class=n>output</span> <span class=o>=</span> <span class=p>{}</span>
    <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>attr_value</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>attr_value</span><span class=p>,</span> <span class=n>AttributeValues</span><span class=p>):</span>
            <span class=n>output</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>attr_value</span><span class=o>.</span><span class=n>data_to_store</span><span class=p>()</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>output</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>attr_value</span>
    <span class=k>return</span> <span class=n>output</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.PublishAttributes.pop class="doc doc-heading"> <code class="highlight language-python"><span class=n>pop</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Remove or reset value for plugin.</p> <p>Plugin values are reset to defaults if plugin is available but data of plugin which was not found are removed.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>key(str)</code> </td> <td> </td> <td> <div class=doc-md-description> <p>Plugin name.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>default</code> </td> <td> </td> <td> <div class=doc-md-description> <p>Default value if plugin was not found.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>288</span>
<span class=normal>289</span>
<span class=normal>290</span>
<span class=normal>291</span>
<span class=normal>292</span>
<span class=normal>293</span>
<span class=normal>294</span>
<span class=normal>295</span>
<span class=normal>296</span>
<span class=normal>297</span>
<span class=normal>298</span>
<span class=normal>299</span>
<span class=normal>300</span>
<span class=normal>301</span>
<span class=normal>302</span>
<span class=normal>303</span>
<span class=normal>304</span>
<span class=normal>305</span>
<span class=normal>306</span>
<span class=normal>307</span>
<span class=normal>308</span>
<span class=normal>309</span>
<span class=normal>310</span>
<span class=normal>311</span>
<span class=normal>312</span>
<span class=normal>313</span>
<span class=normal>314</span>
<span class=normal>315</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>pop</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Remove or reset value for plugin.</span>

<span class=sd>    Plugin values are reset to defaults if plugin is available but</span>
<span class=sd>    data of plugin which was not found are removed.</span>

<span class=sd>    Args:</span>
<span class=sd>        key(str): Plugin name.</span>
<span class=sd>        default: Default value if plugin was not found.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>if</span> <span class=n>key</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>default</span>

    <span class=n>value</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=n>AttributeValues</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>attribute_value_changed</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>

    <span class=n>value_item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
    <span class=c1># Prepare value to return</span>
    <span class=n>output</span> <span class=o>=</span> <span class=n>value_item</span><span class=o>.</span><span class=n>data_to_store</span><span class=p>()</span>
    <span class=c1># Reset values</span>
    <span class=n>value_item</span><span class=o>.</span><span class=n>reset_values</span><span class=p>()</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>attribute_value_changed</span><span class=p>(</span>
        <span class=n>key</span><span class=p>,</span> <span class=n>value_item</span><span class=o>.</span><span class=n>data_to_store</span><span class=p>()</span>
    <span class=p>)</span>
    <span class=k>return</span> <span class=n>output</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.PublishAttributes.set_publish_plugin_attr_defs class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_publish_plugin_attr_defs</span><span class=p>(</span><span class=n>plugin_name</span><span class=p>,</span> <span class=n>attr_defs</span><span class=p>,</span> <span class=n>value</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Set attribute definitions for plugin.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>plugin_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Name of plugin.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>attr_defs</code> </td> <td> <code><span title=typing.List>List</span>[<span title=ayon_core.lib.attribute_definitions.AbstractAttrDef>AbstractAttrDef</span>]</code> </td> <td> <div class=doc-md-description> <p>Attribute definitions.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>value</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]]</code> </td> <td> <div class=doc-md-description> <p>Attribute values.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>337</span>
<span class=normal>338</span>
<span class=normal>339</span>
<span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span>
<span class=normal>344</span>
<span class=normal>345</span>
<span class=normal>346</span>
<span class=normal>347</span>
<span class=normal>348</span>
<span class=normal>349</span>
<span class=normal>350</span>
<span class=normal>351</span>
<span class=normal>352</span>
<span class=normal>353</span>
<span class=normal>354</span>
<span class=normal>355</span>
<span class=normal>356</span>
<span class=normal>357</span>
<span class=normal>358</span>
<span class=normal>359</span>
<span class=normal>360</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_publish_plugin_attr_defs</span><span class=p>(</span>
    <span class=bp>self</span><span class=p>,</span>
    <span class=n>plugin_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
    <span class=n>attr_defs</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>AbstractAttrDef</span><span class=p>],</span>
    <span class=n>value</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Set attribute definitions for plugin.</span>

<span class=sd>    Args:</span>
<span class=sd>        plugin_name (str): Name of plugin.</span>
<span class=sd>        attr_defs (List[AbstractAttrDef]): Attribute definitions.</span>
<span class=sd>        value (Optional[Dict[str, Any]]): Attribute values.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=c1># TODO what if &#39;attr_defs&#39; is &#39;None&#39;?</span>
    <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>value</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>plugin_name</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>value</span> <span class=o>=</span> <span class=p>{}</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=n>plugin_name</span><span class=p>]</span> <span class=o>=</span> <span class=n>PublishAttributeValues</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span> <span class=n>plugin_name</span><span class=p>,</span> <span class=n>attr_defs</span><span class=p>,</span> <span class=n>value</span><span class=p>,</span> <span class=n>value</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.create.UnavailableSharedData class="doc doc-heading"> <code>UnavailableSharedData</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=Exception>Exception</span></code></p> <p>Shared data are not available at the moment when are accessed.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/exceptions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>UnavailableSharedData</span><span class=p>(</span><span class=ne>Exception</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Shared data are not available at the moment when are accessed.&quot;&quot;&quot;</span>
    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.create.cache_and_get_instances class="doc doc-heading"> <code class="highlight language-python"><span class=n>cache_and_get_instances</span><span class=p>(</span><span class=n>creator</span><span class=p>,</span> <span class=n>shared_key</span><span class=p>,</span> <span class=n>list_instances_func</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Common approach to cache instances in shared data.</p> <p>This is helper function which does not handle cases when a 'shared_key' is used for different list instances functions. The same approach of caching instances into 'collection_shared_data' is not required but is so common we've decided to unify it to some degree.</p> <p>Function 'list_instances_func' is called only if 'shared_key' is not available in 'collection_shared_data' on creator.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>creator</code> </td> <td> <code><a class="autorefs autorefs-internal" title="Creator (client.ayon_core.pipeline.create.creator_plugins.Creator)" href=creator_plugins.html#client.ayon_core.pipeline.create.creator_plugins.Creator>Creator</a></code> </td> <td> <div class=doc-md-description> <p>Plugin which would like to get instance data.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>shared_key</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Key under which output of function will be stored.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>list_instances_func</code> </td> <td> <code><span title=Function>Function</span></code> </td> <td> <div class=doc-md-description> <p>Function that will return instance data if data were not yet stored under 'shared_key'.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>dict[str, dict[str, Any]]: Cached instances by creator identifier from result of passed function.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1061</span>
<span class=normal>1062</span>
<span class=normal>1063</span>
<span class=normal>1064</span>
<span class=normal>1065</span>
<span class=normal>1066</span>
<span class=normal>1067</span>
<span class=normal>1068</span>
<span class=normal>1069</span>
<span class=normal>1070</span>
<span class=normal>1071</span>
<span class=normal>1072</span>
<span class=normal>1073</span>
<span class=normal>1074</span>
<span class=normal>1075</span>
<span class=normal>1076</span>
<span class=normal>1077</span>
<span class=normal>1078</span>
<span class=normal>1079</span>
<span class=normal>1080</span>
<span class=normal>1081</span>
<span class=normal>1082</span>
<span class=normal>1083</span>
<span class=normal>1084</span>
<span class=normal>1085</span>
<span class=normal>1086</span>
<span class=normal>1087</span>
<span class=normal>1088</span>
<span class=normal>1089</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>cache_and_get_instances</span><span class=p>(</span><span class=n>creator</span><span class=p>,</span> <span class=n>shared_key</span><span class=p>,</span> <span class=n>list_instances_func</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Common approach to cache instances in shared data.</span>

<span class=sd>    This is helper function which does not handle cases when a &#39;shared_key&#39; is</span>
<span class=sd>    used for different list instances functions. The same approach of caching</span>
<span class=sd>    instances into &#39;collection_shared_data&#39; is not required but is so common</span>
<span class=sd>    we&#39;ve decided to unify it to some degree.</span>

<span class=sd>    Function &#39;list_instances_func&#39; is called only if &#39;shared_key&#39; is not</span>
<span class=sd>    available in &#39;collection_shared_data&#39; on creator.</span>

<span class=sd>    Args:</span>
<span class=sd>        creator (Creator): Plugin which would like to get instance data.</span>
<span class=sd>        shared_key (str): Key under which output of function will be stored.</span>
<span class=sd>        list_instances_func (Function): Function that will return instance data</span>
<span class=sd>            if data were not yet stored under &#39;shared_key&#39;.</span>

<span class=sd>    Returns:</span>
<span class=sd>        dict[str, dict[str, Any]]: Cached instances by creator identifier from</span>
<span class=sd>            result of passed function.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>if</span> <span class=n>shared_key</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>creator</span><span class=o>.</span><span class=n>collection_shared_data</span><span class=p>:</span>
        <span class=n>value</span> <span class=o>=</span> <span class=n>collections</span><span class=o>.</span><span class=n>defaultdict</span><span class=p>(</span><span class=nb>list</span><span class=p>)</span>
        <span class=k>for</span> <span class=n>instance</span> <span class=ow>in</span> <span class=n>list_instances_func</span><span class=p>():</span>
            <span class=n>identifier</span> <span class=o>=</span> <span class=n>instance</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;creator_identifier&quot;</span><span class=p>)</span>
            <span class=n>value</span><span class=p>[</span><span class=n>identifier</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>instance</span><span class=p>)</span>
        <span class=n>creator</span><span class=o>.</span><span class=n>collection_shared_data</span><span class=p>[</span><span class=n>shared_key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>
    <span class=k>return</span> <span class=n>creator</span><span class=o>.</span><span class=n>collection_shared_data</span><span class=p>[</span><span class=n>shared_key</span><span class=p>]</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.create.get_last_versions_for_instances class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_last_versions_for_instances</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=n>instances</span><span class=p>,</span> <span class=n>use_value_for_missing</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Get last versions for instances by their folder path and product name.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>project_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Project name.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>instances</code> </td> <td> <code><span title=list>list</span>[<a class="autorefs autorefs-internal" title="CreatedInstance (client.ayon_core.pipeline.create.structures.CreatedInstance)" href=structures.html#client.ayon_core.pipeline.create.structures.CreatedInstance>CreatedInstance</a>]</code> </td> <td> <div class=doc-md-description> <p>Instances to get next versions for.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>use_value_for_missing</code> </td> <td> <code><span title=Optional>Optional</span>[<span title=bool>bool</span>]</code> </td> <td> <div class=doc-md-description> <p>Missing values are replaced with negative value if True. Otherwise None is used. -2 is used for instances without filled folder or product name. -1 is used for missing entities.</p> </div> </td> <td> <code>False</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>dict[str, Union[int, None]]: Last versions by instance id.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/utils.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span>
<span class=normal>62</span>
<span class=normal>63</span>
<span class=normal>64</span>
<span class=normal>65</span>
<span class=normal>66</span>
<span class=normal>67</span>
<span class=normal>68</span>
<span class=normal>69</span>
<span class=normal>70</span>
<span class=normal>71</span>
<span class=normal>72</span>
<span class=normal>73</span>
<span class=normal>74</span>
<span class=normal>75</span>
<span class=normal>76</span>
<span class=normal>77</span>
<span class=normal>78</span>
<span class=normal>79</span>
<span class=normal>80</span>
<span class=normal>81</span>
<span class=normal>82</span>
<span class=normal>83</span>
<span class=normal>84</span>
<span class=normal>85</span>
<span class=normal>86</span>
<span class=normal>87</span>
<span class=normal>88</span>
<span class=normal>89</span>
<span class=normal>90</span>
<span class=normal>91</span>
<span class=normal>92</span>
<span class=normal>93</span>
<span class=normal>94</span>
<span class=normal>95</span>
<span class=normal>96</span>
<span class=normal>97</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_last_versions_for_instances</span><span class=p>(</span>
    <span class=n>project_name</span><span class=p>,</span> <span class=n>instances</span><span class=p>,</span> <span class=n>use_value_for_missing</span><span class=o>=</span><span class=kc>False</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get last versions for instances by their folder path and product name.</span>

<span class=sd>    Args:</span>
<span class=sd>        project_name (str): Project name.</span>
<span class=sd>        instances (list[CreatedInstance]): Instances to get next versions for.</span>
<span class=sd>        use_value_for_missing (Optional[bool]): Missing values are replaced</span>
<span class=sd>            with negative value if True. Otherwise None is used. -2 is used</span>
<span class=sd>            for instances without filled folder or product name. -1 is used</span>
<span class=sd>            for missing entities.</span>

<span class=sd>    Returns:</span>
<span class=sd>        dict[str, Union[int, None]]: Last versions by instance id.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>output</span> <span class=o>=</span> <span class=p>{</span>
        <span class=n>instance</span><span class=o>.</span><span class=n>id</span><span class=p>:</span> <span class=o>-</span><span class=mi>1</span> <span class=k>if</span> <span class=n>use_value_for_missing</span> <span class=k>else</span> <span class=kc>None</span>
        <span class=k>for</span> <span class=n>instance</span> <span class=ow>in</span> <span class=n>instances</span>
    <span class=p>}</span>
    <span class=n>product_names_by_folder_path</span> <span class=o>=</span> <span class=n>collections</span><span class=o>.</span><span class=n>defaultdict</span><span class=p>(</span><span class=nb>set</span><span class=p>)</span>
    <span class=n>instances_by_hierarchy</span> <span class=o>=</span> <span class=p>{}</span>
    <span class=k>for</span> <span class=n>instance</span> <span class=ow>in</span> <span class=n>instances</span><span class=p>:</span>
        <span class=n>folder_path</span> <span class=o>=</span> <span class=n>instance</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;folderPath&quot;</span><span class=p>)</span>
        <span class=n>product_name</span> <span class=o>=</span> <span class=n>instance</span><span class=o>.</span><span class=n>product_name</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>folder_path</span> <span class=ow>or</span> <span class=ow>not</span> <span class=n>product_name</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>use_value_for_missing</span><span class=p>:</span>
                <span class=n>output</span><span class=p>[</span><span class=n>instance</span><span class=o>.</span><span class=n>id</span><span class=p>]</span> <span class=o>=</span> <span class=o>-</span><span class=mi>2</span>
            <span class=k>continue</span>

        <span class=p>(</span>
            <span class=n>instances_by_hierarchy</span>
            <span class=o>.</span><span class=n>setdefault</span><span class=p>(</span><span class=n>folder_path</span><span class=p>,</span> <span class=p>{})</span>
            <span class=o>.</span><span class=n>setdefault</span><span class=p>(</span><span class=n>product_name</span><span class=p>,</span> <span class=p>[])</span>
            <span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>instance</span><span class=p>)</span>
        <span class=p>)</span>
        <span class=n>product_names_by_folder_path</span><span class=p>[</span><span class=n>folder_path</span><span class=p>]</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>product_name</span><span class=p>)</span>

    <span class=n>product_names</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
    <span class=k>for</span> <span class=n>names</span> <span class=ow>in</span> <span class=n>product_names_by_folder_path</span><span class=o>.</span><span class=n>values</span><span class=p>():</span>
        <span class=n>product_names</span> <span class=o>|=</span> <span class=n>names</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>product_names</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>output</span>

    <span class=n>folder_entities</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_folders</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span>
        <span class=n>folder_paths</span><span class=o>=</span><span class=n>product_names_by_folder_path</span><span class=o>.</span><span class=n>keys</span><span class=p>(),</span>
        <span class=n>fields</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;id&quot;</span><span class=p>,</span> <span class=s2>&quot;path&quot;</span><span class=p>}</span>
    <span class=p>)</span>
    <span class=n>folder_paths_by_id</span> <span class=o>=</span> <span class=p>{</span>
        <span class=n>folder_entity</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]:</span> <span class=n>folder_entity</span><span class=p>[</span><span class=s2>&quot;path&quot;</span><span class=p>]</span>
        <span class=k>for</span> <span class=n>folder_entity</span> <span class=ow>in</span> <span class=n>folder_entities</span>
    <span class=p>}</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>folder_paths_by_id</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>output</span>

    <span class=n>product_entities</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_products</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span>
        <span class=n>folder_ids</span><span class=o>=</span><span class=n>folder_paths_by_id</span><span class=o>.</span><span class=n>keys</span><span class=p>(),</span>
        <span class=n>product_names</span><span class=o>=</span><span class=n>product_names</span><span class=p>,</span>
        <span class=n>fields</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;id&quot;</span><span class=p>,</span> <span class=s2>&quot;name&quot;</span><span class=p>,</span> <span class=s2>&quot;folderId&quot;</span><span class=p>}</span>
    <span class=p>)</span>
    <span class=n>product_entities_by_id</span> <span class=o>=</span> <span class=p>{}</span>
    <span class=k>for</span> <span class=n>product_entity</span> <span class=ow>in</span> <span class=n>product_entities</span><span class=p>:</span>
        <span class=c1># Filter product entities by names under parent</span>
        <span class=n>folder_id</span> <span class=o>=</span> <span class=n>product_entity</span><span class=p>[</span><span class=s2>&quot;folderId&quot;</span><span class=p>]</span>
        <span class=n>product_name</span> <span class=o>=</span> <span class=n>product_entity</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span>
        <span class=n>folder_path</span> <span class=o>=</span> <span class=n>folder_paths_by_id</span><span class=p>[</span><span class=n>folder_id</span><span class=p>]</span>
        <span class=k>if</span> <span class=n>product_name</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>product_names_by_folder_path</span><span class=p>[</span><span class=n>folder_path</span><span class=p>]:</span>
            <span class=k>continue</span>
        <span class=n>product_entities_by_id</span><span class=p>[</span><span class=n>product_entity</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]]</span> <span class=o>=</span> <span class=n>product_entity</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>product_entities_by_id</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>output</span>

    <span class=n>last_versions_by_product_id</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_last_versions</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span>
        <span class=n>product_entities_by_id</span><span class=o>.</span><span class=n>keys</span><span class=p>(),</span>
        <span class=n>fields</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;version&quot;</span><span class=p>,</span> <span class=s2>&quot;productId&quot;</span><span class=p>}</span>
    <span class=p>)</span>
    <span class=k>for</span> <span class=n>product_id</span><span class=p>,</span> <span class=n>version_entity</span> <span class=ow>in</span> <span class=n>last_versions_by_product_id</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
        <span class=n>product_entity</span> <span class=o>=</span> <span class=n>product_entities_by_id</span><span class=p>[</span><span class=n>product_id</span><span class=p>]</span>
        <span class=n>product_name</span> <span class=o>=</span> <span class=n>product_entity</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span>
        <span class=n>folder_id</span> <span class=o>=</span> <span class=n>product_entity</span><span class=p>[</span><span class=s2>&quot;folderId&quot;</span><span class=p>]</span>
        <span class=n>folder_path</span> <span class=o>=</span> <span class=n>folder_paths_by_id</span><span class=p>[</span><span class=n>folder_id</span><span class=p>]</span>
        <span class=n>_instances</span> <span class=o>=</span> <span class=n>instances_by_hierarchy</span><span class=p>[</span><span class=n>folder_path</span><span class=p>][</span><span class=n>product_name</span><span class=p>]</span>
        <span class=k>for</span> <span class=n>instance</span> <span class=ow>in</span> <span class=n>_instances</span><span class=p>:</span>
            <span class=n>output</span><span class=p>[</span><span class=n>instance</span><span class=o>.</span><span class=n>id</span><span class=p>]</span> <span class=o>=</span> <span class=n>version_entity</span><span class=p>[</span><span class=s2>&quot;version&quot;</span><span class=p>]</span>

    <span class=k>return</span> <span class=n>output</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.create.get_legacy_creator_by_name class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_legacy_creator_by_name</span><span class=p>(</span><span class=n>creator_name</span><span class=p>,</span> <span class=n>case_sensitive</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Find creator plugin by name.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>creator_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Name of creator class that should be returned.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>case_sensitive</code> </td> <td> <code><span title=bool>bool</span></code> </td> <td> <div class=doc-md-description> <p>Match of creator plugin name is case sensitive. Set to <code>False</code> by default.</p> </div> </td> <td> <code>False</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>Creator</code></td> <td> </td> <td> <div class=doc-md-description> <p>Return first matching plugin or <code>None</code>.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 999</span>
<span class=normal>1000</span>
<span class=normal>1001</span>
<span class=normal>1002</span>
<span class=normal>1003</span>
<span class=normal>1004</span>
<span class=normal>1005</span>
<span class=normal>1006</span>
<span class=normal>1007</span>
<span class=normal>1008</span>
<span class=normal>1009</span>
<span class=normal>1010</span>
<span class=normal>1011</span>
<span class=normal>1012</span>
<span class=normal>1013</span>
<span class=normal>1014</span>
<span class=normal>1015</span>
<span class=normal>1016</span>
<span class=normal>1017</span>
<span class=normal>1018</span>
<span class=normal>1019</span>
<span class=normal>1020</span>
<span class=normal>1021</span>
<span class=normal>1022</span>
<span class=normal>1023</span>
<span class=normal>1024</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_legacy_creator_by_name</span><span class=p>(</span><span class=n>creator_name</span><span class=p>,</span> <span class=n>case_sensitive</span><span class=o>=</span><span class=kc>False</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Find creator plugin by name.</span>

<span class=sd>    Args:</span>
<span class=sd>        creator_name (str): Name of creator class that should be returned.</span>
<span class=sd>        case_sensitive (bool): Match of creator plugin name is case sensitive.</span>
<span class=sd>            Set to `False` by default.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Creator: Return first matching plugin or `None`.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=c1># Lower input creator name if is not case sensitive</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>case_sensitive</span><span class=p>:</span>
        <span class=n>creator_name</span> <span class=o>=</span> <span class=n>creator_name</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span>

    <span class=k>for</span> <span class=n>creator_plugin</span> <span class=ow>in</span> <span class=n>discover_legacy_creator_plugins</span><span class=p>():</span>
        <span class=n>_creator_name</span> <span class=o>=</span> <span class=n>creator_plugin</span><span class=o>.</span><span class=vm>__name__</span>

        <span class=c1># Lower creator plugin name if is not case sensitive</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>case_sensitive</span><span class=p>:</span>
            <span class=n>_creator_name</span> <span class=o>=</span> <span class=n>_creator_name</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span>

        <span class=k>if</span> <span class=n>_creator_name</span> <span class=o>==</span> <span class=n>creator_name</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>creator_plugin</span>
    <span class=k>return</span> <span class=kc>None</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.create.get_next_versions_for_instances class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_next_versions_for_instances</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=n>instances</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Get next versions for instances by their folder path and product name.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>project_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Project name.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>instances</code> </td> <td> <code><span title=list>list</span>[<a class="autorefs autorefs-internal" title="CreatedInstance (client.ayon_core.pipeline.create.structures.CreatedInstance)" href=structures.html#client.ayon_core.pipeline.create.structures.CreatedInstance>CreatedInstance</a>]</code> </td> <td> <div class=doc-md-description> <p>Instances to get next versions for.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>dict[str, Union[int, None]]: Next versions by instance id. Version is 'None' if instance has no folder path or product name.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/utils.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_next_versions_for_instances</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=n>instances</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get next versions for instances by their folder path and product name.</span>

<span class=sd>    Args:</span>
<span class=sd>        project_name (str): Project name.</span>
<span class=sd>        instances (list[CreatedInstance]): Instances to get next versions for.</span>

<span class=sd>    Returns:</span>
<span class=sd>        dict[str, Union[int, None]]: Next versions by instance id. Version is</span>
<span class=sd>            &#39;None&#39; if instance has no folder path or product name.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>last_versions</span> <span class=o>=</span> <span class=n>get_last_versions_for_instances</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span> <span class=n>instances</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>

    <span class=n>output</span> <span class=o>=</span> <span class=p>{}</span>
    <span class=k>for</span> <span class=n>instance_id</span><span class=p>,</span> <span class=n>version</span> <span class=ow>in</span> <span class=n>last_versions</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
        <span class=k>if</span> <span class=n>version</span> <span class=o>==</span> <span class=o>-</span><span class=mi>2</span><span class=p>:</span>
            <span class=n>output</span><span class=p>[</span><span class=n>instance_id</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=k>elif</span> <span class=n>version</span> <span class=o>==</span> <span class=o>-</span><span class=mi>1</span><span class=p>:</span>
            <span class=n>output</span><span class=p>[</span><span class=n>instance_id</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>output</span><span class=p>[</span><span class=n>instance_id</span><span class=p>]</span> <span class=o>=</span> <span class=n>version</span> <span class=o>+</span> <span class=mi>1</span>
    <span class=k>return</span> <span class=n>output</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.create.get_product_name class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_product_name</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=n>task_name</span><span class=p>,</span> <span class=n>task_type</span><span class=p>,</span> <span class=n>host_name</span><span class=p>,</span> <span class=n>product_type</span><span class=p>,</span> <span class=n>variant</span><span class=p>,</span> <span class=n>default_template</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>dynamic_data</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>project_settings</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>product_type_filter</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>project_entity</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Calculate product name based on passed context and AYON settings.</p> <p>Subst name templates are defined in <code>project_settings/global/tools/creator /product_name_profiles</code> where are profiles with host name, product type, task name and task type filters. If context does not match any profile then <code>DEFAULT_PRODUCT_TEMPLATE</code> is used as default template.</p> <p>That's main reason why so many arguments are required to calculate product name.</p> <details class=todos open> <summary>Todos</summary> <p>Find better filtering options to avoid requirement of argument 'family_filter'.</p> </details> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>project_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Project name.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>task_name</code> </td> <td> <code><span title=Union>Union</span>[<span title=str>str</span>, None]</code> </td> <td> <div class=doc-md-description> <p>Task name.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>task_type</code> </td> <td> <code><span title=Union>Union</span>[<span title=str>str</span>, None]</code> </td> <td> <div class=doc-md-description> <p>Task type.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>host_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Host name.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>product_type</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Product type.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>variant</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>In most of the cases it is user input during creation.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>default_template</code> </td> <td> <code><span title=Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Default template if any profile does not match passed context. Constant 'DEFAULT_PRODUCT_TEMPLATE' is used if is not passed.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>dynamic_data</code> </td> <td> <code><span title=Optional>Optional</span>[<span title=Dict>Dict</span>[<span title=str>str</span>, <span title=Any>Any</span>]]</code> </td> <td> <div class=doc-md-description> <p>Dynamic data specific for a creator which creates instance.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>project_settings</code> </td> <td> <code><span title=Optional>Optional</span>[<span title=Union>Union</span>[<span title=Dict>Dict</span>[<span title=str>str</span>, <span title=Any>Any</span>]]]</code> </td> <td> <div class=doc-md-description> <p>Prepared settings for project. Settings are queried if not passed.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>product_type_filter</code> </td> <td> <code><span title=Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Use different product type for product template filtering. Value of <code>product_type</code> is used when not passed.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>project_entity</code> </td> <td> <code><span title=Optional>Optional</span>[<span title=Dict>Dict</span>[<span title=str>str</span>, <span title=Any>Any</span>]]</code> </td> <td> <div class=doc-md-description> <p>Project entity used when task short name is required by template.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>Product name.</p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=client.ayon_core.pipeline.create.exceptions.TaskNotSetError>TaskNotSetError</span></code> </td> <td> <div class=doc-md-description> <p>If template requires task which is not provided.</p> </div> </td> </tr> <tr class=doc-section-item> <td> <code><span title=client.ayon_core.pipeline.create.exceptions.TemplateFillError>TemplateFillError</span></code> </td> <td> <div class=doc-md-description> <p>If filled template contains placeholder key which is not collected.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/product_name.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 72</span>
<span class=normal> 73</span>
<span class=normal> 74</span>
<span class=normal> 75</span>
<span class=normal> 76</span>
<span class=normal> 77</span>
<span class=normal> 78</span>
<span class=normal> 79</span>
<span class=normal> 80</span>
<span class=normal> 81</span>
<span class=normal> 82</span>
<span class=normal> 83</span>
<span class=normal> 84</span>
<span class=normal> 85</span>
<span class=normal> 86</span>
<span class=normal> 87</span>
<span class=normal> 88</span>
<span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_product_name</span><span class=p>(</span>
    <span class=n>project_name</span><span class=p>,</span>
    <span class=n>task_name</span><span class=p>,</span>
    <span class=n>task_type</span><span class=p>,</span>
    <span class=n>host_name</span><span class=p>,</span>
    <span class=n>product_type</span><span class=p>,</span>
    <span class=n>variant</span><span class=p>,</span>
    <span class=n>default_template</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>dynamic_data</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>project_settings</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>product_type_filter</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>project_entity</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Calculate product name based on passed context and AYON settings.</span>

<span class=sd>    Subst name templates are defined in `project_settings/global/tools/creator</span>
<span class=sd>    /product_name_profiles` where are profiles with host name, product type,</span>
<span class=sd>    task name and task type filters. If context does not match any profile</span>
<span class=sd>    then `DEFAULT_PRODUCT_TEMPLATE` is used as default template.</span>

<span class=sd>    That&#39;s main reason why so many arguments are required to calculate product</span>
<span class=sd>    name.</span>

<span class=sd>    Todos:</span>
<span class=sd>        Find better filtering options to avoid requirement of</span>
<span class=sd>            argument &#39;family_filter&#39;.</span>

<span class=sd>    Args:</span>
<span class=sd>        project_name (str): Project name.</span>
<span class=sd>        task_name (Union[str, None]): Task name.</span>
<span class=sd>        task_type (Union[str, None]): Task type.</span>
<span class=sd>        host_name (str): Host name.</span>
<span class=sd>        product_type (str): Product type.</span>
<span class=sd>        variant (str): In most of the cases it is user input during creation.</span>
<span class=sd>        default_template (Optional[str]): Default template if any profile does</span>
<span class=sd>            not match passed context. Constant &#39;DEFAULT_PRODUCT_TEMPLATE&#39;</span>
<span class=sd>            is used if is not passed.</span>
<span class=sd>        dynamic_data (Optional[Dict[str, Any]]): Dynamic data specific for</span>
<span class=sd>            a creator which creates instance.</span>
<span class=sd>        project_settings (Optional[Union[Dict[str, Any]]]): Prepared settings</span>
<span class=sd>            for project. Settings are queried if not passed.</span>
<span class=sd>        product_type_filter (Optional[str]): Use different product type for</span>
<span class=sd>            product template filtering. Value of `product_type` is used when</span>
<span class=sd>            not passed.</span>
<span class=sd>        project_entity (Optional[Dict[str, Any]]): Project entity used when</span>
<span class=sd>            task short name is required by template.</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: Product name.</span>

<span class=sd>    Raises:</span>
<span class=sd>        TaskNotSetError: If template requires task which is not provided.</span>
<span class=sd>        TemplateFillError: If filled template contains placeholder key which</span>
<span class=sd>            is not collected.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>product_type</span><span class=p>:</span>
        <span class=k>return</span> <span class=s2>&quot;&quot;</span>

    <span class=n>template</span> <span class=o>=</span> <span class=n>get_product_name_template</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span>
        <span class=n>product_type_filter</span> <span class=ow>or</span> <span class=n>product_type</span><span class=p>,</span>
        <span class=n>task_name</span><span class=p>,</span>
        <span class=n>task_type</span><span class=p>,</span>
        <span class=n>host_name</span><span class=p>,</span>
        <span class=n>default_template</span><span class=o>=</span><span class=n>default_template</span><span class=p>,</span>
        <span class=n>project_settings</span><span class=o>=</span><span class=n>project_settings</span>
    <span class=p>)</span>
    <span class=c1># Simple check of task name existence for template with {task} in</span>
    <span class=c1>#   - missing task should be possible only in Standalone publisher</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>task_name</span> <span class=ow>and</span> <span class=s2>&quot;{task&quot;</span> <span class=ow>in</span> <span class=n>template</span><span class=o>.</span><span class=n>lower</span><span class=p>():</span>
        <span class=k>raise</span> <span class=n>TaskNotSetError</span><span class=p>()</span>

    <span class=n>task_value</span> <span class=o>=</span> <span class=p>{</span>
        <span class=s2>&quot;name&quot;</span><span class=p>:</span> <span class=n>task_name</span><span class=p>,</span>
        <span class=s2>&quot;type&quot;</span><span class=p>:</span> <span class=n>task_type</span><span class=p>,</span>
    <span class=p>}</span>
    <span class=k>if</span> <span class=s2>&quot;</span><span class=si>{task}</span><span class=s2>&quot;</span> <span class=ow>in</span> <span class=n>template</span><span class=o>.</span><span class=n>lower</span><span class=p>():</span>
        <span class=n>task_value</span> <span class=o>=</span> <span class=n>task_name</span>

    <span class=k>elif</span> <span class=s2>&quot;</span><span class=si>{task[short]}</span><span class=s2>&quot;</span> <span class=ow>in</span> <span class=n>template</span><span class=o>.</span><span class=n>lower</span><span class=p>():</span>
        <span class=k>if</span> <span class=n>project_entity</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>project_entity</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_project</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>
        <span class=n>task_types_by_name</span> <span class=o>=</span> <span class=p>{</span>
            <span class=n>task</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]:</span> <span class=n>task</span> <span class=k>for</span> <span class=n>task</span> <span class=ow>in</span>
            <span class=n>project_entity</span><span class=p>[</span><span class=s2>&quot;taskTypes&quot;</span><span class=p>]</span>
        <span class=p>}</span>
        <span class=n>task_short</span> <span class=o>=</span> <span class=n>task_types_by_name</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>task_type</span><span class=p>,</span> <span class=p>{})</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;shortName&quot;</span><span class=p>)</span>
        <span class=n>task_value</span><span class=p>[</span><span class=s2>&quot;short&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>task_short</span>

    <span class=n>fill_pairs</span> <span class=o>=</span> <span class=p>{</span>
        <span class=s2>&quot;variant&quot;</span><span class=p>:</span> <span class=n>variant</span><span class=p>,</span>
        <span class=s2>&quot;family&quot;</span><span class=p>:</span> <span class=n>product_type</span><span class=p>,</span>
        <span class=s2>&quot;task&quot;</span><span class=p>:</span> <span class=n>task_value</span><span class=p>,</span>
        <span class=s2>&quot;product&quot;</span><span class=p>:</span> <span class=p>{</span>
            <span class=s2>&quot;type&quot;</span><span class=p>:</span> <span class=n>product_type</span>
        <span class=p>}</span>
    <span class=p>}</span>
    <span class=k>if</span> <span class=n>dynamic_data</span><span class=p>:</span>
        <span class=c1># Dynamic data may override default values</span>
        <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>dynamic_data</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=n>fill_pairs</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>

    <span class=k>try</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>StringTemplate</span><span class=o>.</span><span class=n>format_strict_template</span><span class=p>(</span>
            <span class=n>template</span><span class=o>=</span><span class=n>template</span><span class=p>,</span>
            <span class=n>data</span><span class=o>=</span><span class=n>prepare_template_data</span><span class=p>(</span><span class=n>fill_pairs</span><span class=p>)</span>
        <span class=p>)</span>
    <span class=k>except</span> <span class=ne>KeyError</span> <span class=k>as</span> <span class=n>exp</span><span class=p>:</span>
        <span class=k>raise</span> <span class=n>TemplateFillError</span><span class=p>(</span>
            <span class=s2>&quot;Value for </span><span class=si>{}</span><span class=s2> key is missing in template &#39;</span><span class=si>{}</span><span class=s2>&#39;.&quot;</span>
            <span class=s2>&quot; Available values are </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>exp</span><span class=p>),</span> <span class=n>template</span><span class=p>,</span> <span class=n>fill_pairs</span><span class=p>)</span>
        <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.create.get_product_name_template class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_product_name_template</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=n>product_type</span><span class=p>,</span> <span class=n>task_name</span><span class=p>,</span> <span class=n>task_type</span><span class=p>,</span> <span class=n>host_name</span><span class=p>,</span> <span class=n>default_template</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>project_settings</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Get product name template based on passed context.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>project_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Project on which the context lives.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>product_type</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Product type for which the product name is calculated.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>host_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Name of host in which the product name is calculated.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>task_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Name of task in which context the product is created.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>task_type</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Type of task in which context the product is created.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>default_template</code> </td> <td> <code><span title=Union>Union</span>[<span title=str>str</span>, None]</code> </td> <td> <div class=doc-md-description> <p>Default template which is used if settings won't find any matching possibility. Constant 'DEFAULT_PRODUCT_TEMPLATE' is used if not defined.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>project_settings</code> </td> <td> <code><span title=Union>Union</span>[<span title=Dict>Dict</span>[<span title=str>str</span>, <span title=Any>Any</span>], None]</code> </td> <td> <div class=doc-md-description> <p>Prepared settings for project. Settings are queried if not passed.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/product_name.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span>
<span class=normal>62</span>
<span class=normal>63</span>
<span class=normal>64</span>
<span class=normal>65</span>
<span class=normal>66</span>
<span class=normal>67</span>
<span class=normal>68</span>
<span class=normal>69</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_product_name_template</span><span class=p>(</span>
    <span class=n>project_name</span><span class=p>,</span>
    <span class=n>product_type</span><span class=p>,</span>
    <span class=n>task_name</span><span class=p>,</span>
    <span class=n>task_type</span><span class=p>,</span>
    <span class=n>host_name</span><span class=p>,</span>
    <span class=n>default_template</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>project_settings</span><span class=o>=</span><span class=kc>None</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get product name template based on passed context.</span>

<span class=sd>    Args:</span>
<span class=sd>        project_name (str): Project on which the context lives.</span>
<span class=sd>        product_type (str): Product type for which the product name is</span>
<span class=sd>            calculated.</span>
<span class=sd>        host_name (str): Name of host in which the product name is calculated.</span>
<span class=sd>        task_name (str): Name of task in which context the product is created.</span>
<span class=sd>        task_type (str): Type of task in which context the product is created.</span>
<span class=sd>        default_template (Union[str, None]): Default template which is used if</span>
<span class=sd>            settings won&#39;t find any matching possibility. Constant</span>
<span class=sd>            &#39;DEFAULT_PRODUCT_TEMPLATE&#39; is used if not defined.</span>
<span class=sd>        project_settings (Union[Dict[str, Any], None]): Prepared settings for</span>
<span class=sd>            project. Settings are queried if not passed.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>if</span> <span class=n>project_settings</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>project_settings</span> <span class=o>=</span> <span class=n>get_project_settings</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>
    <span class=n>tools_settings</span> <span class=o>=</span> <span class=n>project_settings</span><span class=p>[</span><span class=s2>&quot;core&quot;</span><span class=p>][</span><span class=s2>&quot;tools&quot;</span><span class=p>]</span>
    <span class=n>profiles</span> <span class=o>=</span> <span class=n>tools_settings</span><span class=p>[</span><span class=s2>&quot;creator&quot;</span><span class=p>][</span><span class=s2>&quot;product_name_profiles&quot;</span><span class=p>]</span>
    <span class=n>filtering_criteria</span> <span class=o>=</span> <span class=p>{</span>
        <span class=s2>&quot;product_types&quot;</span><span class=p>:</span> <span class=n>product_type</span><span class=p>,</span>
        <span class=s2>&quot;hosts&quot;</span><span class=p>:</span> <span class=n>host_name</span><span class=p>,</span>
        <span class=s2>&quot;tasks&quot;</span><span class=p>:</span> <span class=n>task_name</span><span class=p>,</span>
        <span class=s2>&quot;task_types&quot;</span><span class=p>:</span> <span class=n>task_type</span>
    <span class=p>}</span>

    <span class=n>matching_profile</span> <span class=o>=</span> <span class=n>filter_profiles</span><span class=p>(</span><span class=n>profiles</span><span class=p>,</span> <span class=n>filtering_criteria</span><span class=p>)</span>
    <span class=n>template</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=k>if</span> <span class=n>matching_profile</span><span class=p>:</span>
        <span class=c1># TODO remove formatting keys replacement</span>
        <span class=n>template</span> <span class=o>=</span> <span class=p>(</span>
            <span class=n>matching_profile</span><span class=p>[</span><span class=s2>&quot;template&quot;</span><span class=p>]</span>
            <span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s2>&quot;</span><span class=si>{task[name]}</span><span class=s2>&quot;</span><span class=p>,</span> <span class=s2>&quot;</span><span class=si>{task}</span><span class=s2>&quot;</span><span class=p>)</span>
            <span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s2>&quot;</span><span class=si>{Task[name]}</span><span class=s2>&quot;</span><span class=p>,</span> <span class=s2>&quot;</span><span class=si>{Task}</span><span class=s2>&quot;</span><span class=p>)</span>
            <span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s2>&quot;</span><span class=si>{TASK[NAME]}</span><span class=s2>&quot;</span><span class=p>,</span> <span class=s2>&quot;</span><span class=si>{TASK}</span><span class=s2>&quot;</span><span class=p>)</span>
            <span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s2>&quot;</span><span class=si>{product[type]}</span><span class=s2>&quot;</span><span class=p>,</span> <span class=s2>&quot;</span><span class=si>{family}</span><span class=s2>&quot;</span><span class=p>)</span>
            <span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s2>&quot;</span><span class=si>{Product[type]}</span><span class=s2>&quot;</span><span class=p>,</span> <span class=s2>&quot;</span><span class=si>{Family}</span><span class=s2>&quot;</span><span class=p>)</span>
            <span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s2>&quot;</span><span class=si>{PRODUCT[TYPE]}</span><span class=s2>&quot;</span><span class=p>,</span> <span class=s2>&quot;</span><span class=si>{FAMILY}</span><span class=s2>&quot;</span><span class=p>)</span>
            <span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s2>&quot;</span><span class=si>{folder[name]}</span><span class=s2>&quot;</span><span class=p>,</span> <span class=s2>&quot;</span><span class=si>{asset}</span><span class=s2>&quot;</span><span class=p>)</span>
            <span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s2>&quot;</span><span class=si>{Folder[name]}</span><span class=s2>&quot;</span><span class=p>,</span> <span class=s2>&quot;</span><span class=si>{Asset}</span><span class=s2>&quot;</span><span class=p>)</span>
            <span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s2>&quot;</span><span class=si>{FOLDER[NAME]}</span><span class=s2>&quot;</span><span class=p>,</span> <span class=s2>&quot;</span><span class=si>{ASSET}</span><span class=s2>&quot;</span><span class=p>)</span>
        <span class=p>)</span>

    <span class=c1># Make sure template is set (matching may have empty string)</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>template</span><span class=p>:</span>
        <span class=n>template</span> <span class=o>=</span> <span class=n>default_template</span> <span class=ow>or</span> <span class=n>DEFAULT_PRODUCT_TEMPLATE</span>
    <span class=k>return</span> <span class=n>template</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../../..", "features": ["navigation.sections", "navigation.path", "navigation.prune"], "search": "../../../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../../../../assets/javascripts/bundle.c8b220af.min.js></script> </body> </html>