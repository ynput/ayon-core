<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=prev href=product_name.html><link rel=next href=utils.html><link rel=icon href=../../../../../img/favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.8"><title>structures - ayon-core</title><link rel=stylesheet href=../../../../../assets/stylesheets/main.8608ea7d.min.css><link rel=stylesheet href=../../../../../assets/stylesheets/palette.06af60db.min.css><script src=https://unpkg.com/iframe-worker/shim></script><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../../../assets/_mkdocstrings.css><link rel=stylesheet href=../../../../../css/custom.css><script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#client.ayon_core.pipeline.create.structures class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../../../index.html title=ayon-core class="md-header__button md-logo" aria-label=ayon-core data-md-component=logo> <img src=../../../../../img/ay-symbol-blackw-full.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> ayon-core </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> structures </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../../../index.html title=ayon-core class="md-nav__button md-logo" aria-label=ayon-core data-md-component=logo> <img src=../../../../../img/ay-symbol-blackw-full.png alt=logo> </a> ayon-core </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../index.html class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../../../../../license.html class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1 checked> <div class="md-nav__link md-nav__container"> <a href=../../../index.html class="md-nav__link "> <span class=md-ellipsis> client </span> </a> <label class="md-nav__link " for=__nav_3_1 id=__nav_3_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> client </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1 checked> <div class="md-nav__link md-nav__container"> <a href=../../index.html class="md-nav__link "> <span class=md-ellipsis> ayon_core </span> </a> <label class="md-nav__link " for=__nav_3_1_1 id=__nav_3_1_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_1_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1> <span class="md-nav__icon md-icon"></span> ayon_core </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../__main__.html class=md-nav__link> <span class=md-ellipsis> __main__ </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../addon/base.html class=md-nav__link> <span class=md-ellipsis> addon </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../../cli.html class=md-nav__link> <span class=md-ellipsis> cli </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../hooks/pre_add_last_workfile_arg.html class=md-nav__link> <span class=md-ellipsis> hooks </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../host/dirmap.html class=md-nav__link> <span class=md-ellipsis> host </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../lib/attribute_definitions.html class=md-nav__link> <span class=md-ellipsis> lib </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1_7 checked> <div class="md-nav__link md-nav__container"> <a href=../index.html class="md-nav__link "> <span class=md-ellipsis> pipeline </span> </a> <label class="md-nav__link " for=__nav_3_1_1_7 id=__nav_3_1_1_7_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_1_1_7_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1_7> <span class="md-nav__icon md-icon"></span> pipeline </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../actions.html class=md-nav__link> <span class=md-ellipsis> actions </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../anatomy/anatomy.html class=md-nav__link> <span class=md-ellipsis> anatomy </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../colorspace.html class=md-nav__link> <span class=md-ellipsis> colorspace </span> </a> </li> <li class=md-nav__item> <a href=../constants.html class=md-nav__link> <span class=md-ellipsis> constants </span> </a> </li> <li class=md-nav__item> <a href=../context_tools.html class=md-nav__link> <span class=md-ellipsis> context_tools </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1_7_6 checked> <div class="md-nav__link md-nav__container"> <a href=index.html class="md-nav__link "> <span class=md-ellipsis> create </span> </a> <label class="md-nav__link " for=__nav_3_1_1_7_6 id=__nav_3_1_1_7_6_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=5 aria-labelledby=__nav_3_1_1_7_6_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1_7_6> <span class="md-nav__icon md-icon"></span> create </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=changes.html class=md-nav__link> <span class=md-ellipsis> changes </span> </a> </li> <li class=md-nav__item> <a href=constants.html class=md-nav__link> <span class=md-ellipsis> constants </span> </a> </li> <li class=md-nav__item> <a href=context.html class=md-nav__link> <span class=md-ellipsis> context </span> </a> </li> <li class=md-nav__item> <a href=creator_plugins.html class=md-nav__link> <span class=md-ellipsis> creator_plugins </span> </a> </li> <li class=md-nav__item> <a href=exceptions.html class=md-nav__link> <span class=md-ellipsis> exceptions </span> </a> </li> <li class=md-nav__item> <a href=legacy_create.html class=md-nav__link> <span class=md-ellipsis> legacy_create </span> </a> </li> <li class=md-nav__item> <a href=product_name.html class=md-nav__link> <span class=md-ellipsis> product_name </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> structures </span> <span class="md-nav__icon md-icon"></span> </label> <a href=structures.html class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> structures </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures class=md-nav__link> <span class=md-ellipsis> structures </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.AttributeValues class=md-nav__link> <span class=md-ellipsis> AttributeValues </span> </a> <nav class=md-nav aria-label=AttributeValues> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.AttributeValues.attr_defs class=md-nav__link> <span class=md-ellipsis> attr_defs </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.AttributeValues.data_to_store class=md-nav__link> <span class=md-ellipsis> data_to_store </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.AttributeValues.get_serialized_attr_defs class=md-nav__link> <span class=md-ellipsis> get_serialized_attr_defs </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.ConvertorItem class=md-nav__link> <span class=md-ellipsis> ConvertorItem </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.CreatedInstance class=md-nav__link> <span class=md-ellipsis> CreatedInstance </span> </a> <nav class=md-nav aria-label=CreatedInstance> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.CreatedInstance._create_context class=md-nav__link> <span class=md-ellipsis> _create_context </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.CreatedInstance.creator_attribute_defs class=md-nav__link> <span class=md-ellipsis> creator_attribute_defs </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.CreatedInstance.data class=md-nav__link> <span class=md-ellipsis> data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.CreatedInstance.has_promised_context class=md-nav__link> <span class=md-ellipsis> has_promised_context </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.CreatedInstance.id class=md-nav__link> <span class=md-ellipsis> id </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.CreatedInstance.transient_data class=md-nav__link> <span class=md-ellipsis> transient_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.CreatedInstance.add_members class=md-nav__link> <span class=md-ellipsis> add_members </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.CreatedInstance.attribute_value_changed class=md-nav__link> <span class=md-ellipsis> attribute_value_changed </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.CreatedInstance.changes class=md-nav__link> <span class=md-ellipsis> changes </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.CreatedInstance.data_to_store class=md-nav__link> <span class=md-ellipsis> data_to_store </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.CreatedInstance.from_existing class=md-nav__link> <span class=md-ellipsis> from_existing </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.CreatedInstance.mark_as_stored class=md-nav__link> <span class=md-ellipsis> mark_as_stored </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.CreatedInstance.publish_attribute_value_changed class=md-nav__link> <span class=md-ellipsis> publish_attribute_value_changed </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.CreatedInstance.set_create_attr_defs class=md-nav__link> <span class=md-ellipsis> set_create_attr_defs </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.CreatedInstance.set_publish_plugin_attr_defs class=md-nav__link> <span class=md-ellipsis> set_publish_plugin_attr_defs </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.CreatorAttributeValues class=md-nav__link> <span class=md-ellipsis> CreatorAttributeValues </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.InstanceMember class=md-nav__link> <span class=md-ellipsis> InstanceMember </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.PublishAttributeValues class=md-nav__link> <span class=md-ellipsis> PublishAttributeValues </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.PublishAttributes class=md-nav__link> <span class=md-ellipsis> PublishAttributes </span> </a> <nav class=md-nav aria-label=PublishAttributes> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.PublishAttributes.data_to_store class=md-nav__link> <span class=md-ellipsis> data_to_store </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.PublishAttributes.pop class=md-nav__link> <span class=md-ellipsis> pop </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.PublishAttributes.set_publish_plugin_attr_defs class=md-nav__link> <span class=md-ellipsis> set_publish_plugin_attr_defs </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=utils.html class=md-nav__link> <span class=md-ellipsis> utils </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../delivery.html class=md-nav__link> <span class=md-ellipsis> delivery </span> </a> </li> <li class=md-nav__item> <a href=../editorial.html class=md-nav__link> <span class=md-ellipsis> editorial </span> </a> </li> <li class=md-nav__item> <a href=../entity_uri.html class=md-nav__link> <span class=md-ellipsis> entity_uri </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../farm/patterning.html class=md-nav__link> <span class=md-ellipsis> farm </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../load/plugins.html class=md-nav__link> <span class=md-ellipsis> load </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../plugin_discover.html class=md-nav__link> <span class=md-ellipsis> plugin_discover </span> </a> </li> <li class=md-nav__item> <a href=../project_folders.html class=md-nav__link> <span class=md-ellipsis> project_folders </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../publish/abstract_collect_render.html class=md-nav__link> <span class=md-ellipsis> publish </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../schema/index.html class=md-nav__link> <span class=md-ellipsis> schema </span> </a> </li> <li class=md-nav__item> <a href=../staging_dir.html class=md-nav__link> <span class=md-ellipsis> staging_dir </span> </a> </li> <li class=md-nav__item> <a href=../tempdir.html class=md-nav__link> <span class=md-ellipsis> tempdir </span> </a> </li> <li class=md-nav__item> <a href=../template_data.html class=md-nav__link> <span class=md-ellipsis> template_data </span> </a> </li> <li class=md-nav__item> <a href=../thumbnails.html class=md-nav__link> <span class=md-ellipsis> thumbnails </span> </a> </li> <li class=md-nav__item> <a href=../usdlib.html class=md-nav__link> <span class=md-ellipsis> usdlib </span> </a> </li> <li class=md-nav__item> <a href=../version_start.html class=md-nav__link> <span class=md-ellipsis> version_start </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../workfile/build_workfile.html class=md-nav__link> <span class=md-ellipsis> workfile </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../plugins/actions/open_file_explorer.html class=md-nav__link> <span class=md-ellipsis> plugins </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../resources/app_icons/index.html class=md-nav__link> <span class=md-ellipsis> resources </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../scripts/ocio_wrapper.html class=md-nav__link> <span class=md-ellipsis> scripts </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../settings/lib.html class=md-nav__link> <span class=md-ellipsis> settings </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../style/color_defs.html class=md-nav__link> <span class=md-ellipsis> style </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../tests/conftest.html class=md-nav__link> <span class=md-ellipsis> tests </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../tools/attribute_defs/_constants.html class=md-nav__link> <span class=md-ellipsis> tools </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../vendor/python/qargparse.html class=md-nav__link> <span class=md-ellipsis> vendor </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../../version.html class=md-nav__link> <span class=md-ellipsis> version </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../server/settings/conversion.html class=md-nav__link> <span class=md-ellipsis> server </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures class=md-nav__link> <span class=md-ellipsis> structures </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.AttributeValues class=md-nav__link> <span class=md-ellipsis> AttributeValues </span> </a> <nav class=md-nav aria-label=AttributeValues> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.AttributeValues.attr_defs class=md-nav__link> <span class=md-ellipsis> attr_defs </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.AttributeValues.data_to_store class=md-nav__link> <span class=md-ellipsis> data_to_store </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.AttributeValues.get_serialized_attr_defs class=md-nav__link> <span class=md-ellipsis> get_serialized_attr_defs </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.ConvertorItem class=md-nav__link> <span class=md-ellipsis> ConvertorItem </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.CreatedInstance class=md-nav__link> <span class=md-ellipsis> CreatedInstance </span> </a> <nav class=md-nav aria-label=CreatedInstance> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.CreatedInstance._create_context class=md-nav__link> <span class=md-ellipsis> _create_context </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.CreatedInstance.creator_attribute_defs class=md-nav__link> <span class=md-ellipsis> creator_attribute_defs </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.CreatedInstance.data class=md-nav__link> <span class=md-ellipsis> data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.CreatedInstance.has_promised_context class=md-nav__link> <span class=md-ellipsis> has_promised_context </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.CreatedInstance.id class=md-nav__link> <span class=md-ellipsis> id </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.CreatedInstance.transient_data class=md-nav__link> <span class=md-ellipsis> transient_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.CreatedInstance.add_members class=md-nav__link> <span class=md-ellipsis> add_members </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.CreatedInstance.attribute_value_changed class=md-nav__link> <span class=md-ellipsis> attribute_value_changed </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.CreatedInstance.changes class=md-nav__link> <span class=md-ellipsis> changes </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.CreatedInstance.data_to_store class=md-nav__link> <span class=md-ellipsis> data_to_store </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.CreatedInstance.from_existing class=md-nav__link> <span class=md-ellipsis> from_existing </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.CreatedInstance.mark_as_stored class=md-nav__link> <span class=md-ellipsis> mark_as_stored </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.CreatedInstance.publish_attribute_value_changed class=md-nav__link> <span class=md-ellipsis> publish_attribute_value_changed </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.CreatedInstance.set_create_attr_defs class=md-nav__link> <span class=md-ellipsis> set_create_attr_defs </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.CreatedInstance.set_publish_plugin_attr_defs class=md-nav__link> <span class=md-ellipsis> set_publish_plugin_attr_defs </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.CreatorAttributeValues class=md-nav__link> <span class=md-ellipsis> CreatorAttributeValues </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.InstanceMember class=md-nav__link> <span class=md-ellipsis> InstanceMember </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.PublishAttributeValues class=md-nav__link> <span class=md-ellipsis> PublishAttributeValues </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.PublishAttributes class=md-nav__link> <span class=md-ellipsis> PublishAttributes </span> </a> <nav class=md-nav aria-label=PublishAttributes> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.PublishAttributes.data_to_store class=md-nav__link> <span class=md-ellipsis> data_to_store </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.PublishAttributes.pop class=md-nav__link> <span class=md-ellipsis> pop </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.create.structures.PublishAttributes.set_publish_plugin_attr_defs class=md-nav__link> <span class=md-ellipsis> set_publish_plugin_attr_defs </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>structures</h1> <div class="doc doc-object doc-module"> <a id=client.ayon_core.pipeline.create.structures></a> <div class="doc doc-contents first"> <div class="doc doc-children"> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.create.structures.AttributeValues class="doc doc-heading"> <code>AttributeValues</code> </h2> <div class="doc doc-contents "> <p>Container which keep values of Attribute definitions.</p> <p>Goal is to have one object which hold values of attribute definitions for single instance.</p> <p>Has dictionary like methods. Not all of them are allowed all the time.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>parent</code> </td> <td> <code><span title=Union>Union</span>[<a class="autorefs autorefs-internal" title="CreatedInstance (client.ayon_core.pipeline.create.structures.CreatedInstance)" href=#client.ayon_core.pipeline.create.structures.CreatedInstance>CreatedInstance</a>, <a class="autorefs autorefs-internal" title="PublishAttributes (client.ayon_core.pipeline.create.structures.PublishAttributes)" href=#client.ayon_core.pipeline.create.structures.PublishAttributes>PublishAttributes</a>]</code> </td> <td> <div class=doc-md-description> <p>Parent object.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>key</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Key of attribute values.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>attr_defs</code> </td> <td> <code><span title=typing.List>List</span>[<span title=ayon_core.lib.attribute_definitions.AbstractAttrDef>AbstractAttrDef</span>]</code> </td> <td> <div class=doc-md-description> <p>Definitions of value type and properties.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>values</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>Values after possible conversion.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>origin_data</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>Values loaded from host before conversion.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 78</span>
<span class=normal> 79</span>
<span class=normal> 80</span>
<span class=normal> 81</span>
<span class=normal> 82</span>
<span class=normal> 83</span>
<span class=normal> 84</span>
<span class=normal> 85</span>
<span class=normal> 86</span>
<span class=normal> 87</span>
<span class=normal> 88</span>
<span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>AttributeValues</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Container which keep values of Attribute definitions.</span>

<span class=sd>    Goal is to have one object which hold values of attribute definitions for</span>
<span class=sd>    single instance.</span>

<span class=sd>    Has dictionary like methods. Not all of them are allowed all the time.</span>

<span class=sd>    Args:</span>
<span class=sd>        parent (Union[CreatedInstance, PublishAttributes]): Parent object.</span>
<span class=sd>        key (str): Key of attribute values.</span>
<span class=sd>        attr_defs (List[AbstractAttrDef]): Definitions of value type</span>
<span class=sd>            and properties.</span>
<span class=sd>        values (dict): Values after possible conversion.</span>
<span class=sd>        origin_data (dict): Values loaded from host before conversion.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>parent</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>attr_defs</span><span class=p>,</span> <span class=n>values</span><span class=p>,</span> <span class=n>origin_data</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_parent</span> <span class=o>=</span> <span class=n>parent</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_key</span> <span class=o>=</span> <span class=n>key</span>
        <span class=k>if</span> <span class=n>origin_data</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>origin_data</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=n>values</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_origin_data</span> <span class=o>=</span> <span class=n>origin_data</span>

        <span class=n>attr_defs_by_key</span> <span class=o>=</span> <span class=p>{</span>
            <span class=n>attr_def</span><span class=o>.</span><span class=n>key</span><span class=p>:</span> <span class=n>attr_def</span>
            <span class=k>for</span> <span class=n>attr_def</span> <span class=ow>in</span> <span class=n>attr_defs</span>
            <span class=k>if</span> <span class=n>attr_def</span><span class=o>.</span><span class=n>is_value_def</span>
        <span class=p>}</span>
        <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>values</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=k>if</span> <span class=n>key</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>attr_defs_by_key</span><span class=p>:</span>
                <span class=n>new_def</span> <span class=o>=</span> <span class=n>UnknownDef</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>label</span><span class=o>=</span><span class=n>key</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=n>value</span><span class=p>)</span>
                <span class=n>attr_defs</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>new_def</span><span class=p>)</span>
                <span class=n>attr_defs_by_key</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>new_def</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_attr_defs</span> <span class=o>=</span> <span class=n>attr_defs</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_attr_defs_by_key</span> <span class=o>=</span> <span class=n>attr_defs_by_key</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=k>for</span> <span class=n>attr_def</span> <span class=ow>in</span> <span class=n>attr_defs</span><span class=p>:</span>
            <span class=n>value</span> <span class=o>=</span> <span class=n>values</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>attr_def</span><span class=o>.</span><span class=n>key</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
                <span class=k>continue</span>
            <span class=n>converted_value</span> <span class=o>=</span> <span class=n>attr_def</span><span class=o>.</span><span class=n>convert_value</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>converted_value</span> <span class=o>==</span> <span class=n>value</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=n>attr_def</span><span class=o>.</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__setitem__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
        <span class=k>if</span> <span class=n>key</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_attr_defs_by_key</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>KeyError</span><span class=p>(</span><span class=s2>&quot;Key </span><span class=se>\&quot;</span><span class=si>{}</span><span class=se>\&quot;</span><span class=s2> was not found.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>key</span><span class=p>))</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>update</span><span class=p>({</span><span class=n>key</span><span class=p>:</span> <span class=n>value</span><span class=p>})</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__getitem__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
        <span class=k>if</span> <span class=n>key</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_attr_defs_by_key</span><span class=p>:</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_attr_defs_by_key</span><span class=p>[</span><span class=n>key</span><span class=p>]</span><span class=o>.</span><span class=n>default</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__contains__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_attr_defs_by_key</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__iter__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>for</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_attr_defs_by_key</span><span class=p>:</span>
            <span class=k>yield</span> <span class=n>key</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_attr_defs_by_key</span><span class=p>:</span>
            <span class=k>return</span> <span class=bp>self</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
        <span class=k>return</span> <span class=n>default</span>

    <span class=k>def</span><span class=w> </span><span class=nf>keys</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_attr_defs_by_key</span><span class=o>.</span><span class=n>keys</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>values</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>for</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_attr_defs_by_key</span><span class=o>.</span><span class=n>keys</span><span class=p>():</span>
            <span class=k>yield</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>items</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>for</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_attr_defs_by_key</span><span class=o>.</span><span class=n>keys</span><span class=p>():</span>
            <span class=k>yield</span> <span class=n>key</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_attr_def</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_attr_defs_by_key</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>default</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>update</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
        <span class=n>changes</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=k>for</span> <span class=n>_key</span><span class=p>,</span> <span class=n>_value</span> <span class=ow>in</span> <span class=nb>dict</span><span class=p>(</span><span class=n>value</span><span class=p>)</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=k>if</span> <span class=n>_key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>_key</span><span class=p>)</span> <span class=o>==</span> <span class=n>_value</span><span class=p>:</span>
                <span class=k>continue</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=n>_key</span><span class=p>]</span> <span class=o>=</span> <span class=n>_value</span>
            <span class=n>changes</span><span class=p>[</span><span class=n>_key</span><span class=p>]</span> <span class=o>=</span> <span class=n>_value</span>

        <span class=k>if</span> <span class=n>changes</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_parent</span><span class=o>.</span><span class=n>attribute_value_changed</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_key</span><span class=p>,</span> <span class=n>changes</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>pop</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=n>has_key</span> <span class=o>=</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span>
        <span class=n>value</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>default</span><span class=p>)</span>
        <span class=c1># Remove attribute definition if is &#39;UnknownDef&#39;</span>
        <span class=c1># - gives option to get rid of unknown values</span>
        <span class=n>attr_def</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_attr_defs_by_key</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>attr_def</span><span class=p>,</span> <span class=n>UnknownDef</span><span class=p>):</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_attr_defs_by_key</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_attr_defs</span><span class=o>.</span><span class=n>remove</span><span class=p>(</span><span class=n>attr_def</span><span class=p>)</span>
        <span class=k>elif</span> <span class=n>has_key</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_parent</span><span class=o>.</span><span class=n>attribute_value_changed</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_key</span><span class=p>,</span> <span class=p>{</span><span class=n>key</span><span class=p>:</span> <span class=kc>None</span><span class=p>})</span>
        <span class=k>return</span> <span class=n>value</span>

    <span class=k>def</span><span class=w> </span><span class=nf>reset_values</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span> <span class=o>=</span> <span class=p>{}</span>

    <span class=k>def</span><span class=w> </span><span class=nf>mark_as_stored</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_origin_data</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>)</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>attr_defs</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Pointer to attribute definitions.</span>

<span class=sd>        Returns:</span>
<span class=sd>            List[AbstractAttrDef]: Attribute definitions.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=nb>list</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_attr_defs</span><span class=p>)</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>origin_data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_origin_data</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>data_to_store</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Create new dictionary with data to store.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Dict[str, Any]: Attribute values that should be stored.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>output</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=k>for</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>:</span>
            <span class=n>output</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>

        <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>attr_def</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_attr_defs_by_key</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=k>if</span> <span class=n>key</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>output</span><span class=p>:</span>
                <span class=n>output</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>attr_def</span><span class=o>.</span><span class=n>default</span>
        <span class=k>return</span> <span class=n>output</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_serialized_attr_defs</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Serialize attribute definitions to json serializable types.</span>

<span class=sd>        Returns:</span>
<span class=sd>            List[Dict[str, Any]]: Serialized attribute definitions.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=n>serialize_attr_defs</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_attr_defs</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.create.structures.AttributeValues.attr_defs class="doc doc-heading"> <code class="highlight language-python"><span class=n>attr_defs</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Pointer to attribute definitions.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>List[AbstractAttrDef]: Attribute definitions.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.structures.AttributeValues.data_to_store class="doc doc-heading"> <code class="highlight language-python"><span class=n>data_to_store</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Create new dictionary with data to store.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Dict[str, Any]: Attribute values that should be stored.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>data_to_store</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Create new dictionary with data to store.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Dict[str, Any]: Attribute values that should be stored.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>output</span> <span class=o>=</span> <span class=p>{}</span>
    <span class=k>for</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>:</span>
        <span class=n>output</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>

    <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>attr_def</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_attr_defs_by_key</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
        <span class=k>if</span> <span class=n>key</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>output</span><span class=p>:</span>
            <span class=n>output</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>attr_def</span><span class=o>.</span><span class=n>default</span>
    <span class=k>return</span> <span class=n>output</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.structures.AttributeValues.get_serialized_attr_defs class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_serialized_attr_defs</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Serialize attribute definitions to json serializable types.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>List[Dict[str, Any]]: Serialized attribute definitions.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_serialized_attr_defs</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Serialize attribute definitions to json serializable types.</span>

<span class=sd>    Returns:</span>
<span class=sd>        List[Dict[str, Any]]: Serialized attribute definitions.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=n>serialize_attr_defs</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_attr_defs</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.create.structures.ConvertorItem class="doc doc-heading"> <code>ConvertorItem</code> </h2> <div class="doc doc-contents "> <p>Item representing convertor plugin.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>identifier</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Identifier of convertor.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>label</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Label which will be shown in UI.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>ConvertorItem</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Item representing convertor plugin.</span>

<span class=sd>    Args:</span>
<span class=sd>        identifier (str): Identifier of convertor.</span>
<span class=sd>        label (str): Label which will be shown in UI.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>identifier</span><span class=p>,</span> <span class=n>label</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_id</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>uuid4</span><span class=p>())</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>identifier</span> <span class=o>=</span> <span class=n>identifier</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>label</span> <span class=o>=</span> <span class=n>label</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>id</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_id</span>

    <span class=k>def</span><span class=w> </span><span class=nf>to_data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=p>{</span>
            <span class=s2>&quot;id&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
            <span class=s2>&quot;identifier&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>identifier</span><span class=p>,</span>
            <span class=s2>&quot;label&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>label</span>
        <span class=p>}</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>from_data</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>data</span><span class=p>):</span>
        <span class=n>obj</span> <span class=o>=</span> <span class=bp>cls</span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;identifier&quot;</span><span class=p>],</span> <span class=n>data</span><span class=p>[</span><span class=s2>&quot;label&quot;</span><span class=p>])</span>
        <span class=n>obj</span><span class=o>.</span><span class=n>_id</span> <span class=o>=</span> <span class=n>data</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]</span>
        <span class=k>return</span> <span class=n>obj</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.create.structures.CreatedInstance class="doc doc-heading"> <code>CreatedInstance</code> </h2> <div class="doc doc-contents "> <p>Instance entity with data that will be stored to workfile.</p> <p>I think <code>data</code> must be required argument containing all minimum information about instance like "folderPath" and "task" and all data used for filling product name as creators may have custom data for product name filling.</p> <details class=notes open> <summary>Notes</summary> <p>Object have 2 possible initialization. One using 'creator' object which is recommended for api usage. Second by passing information about creator.</p> </details> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>product_type</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Product type that will be created.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>product_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Name of product that will be created.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>data</code> </td> <td> <code><span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Data used for filling product name or override data from already existing instance.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>creator</code> </td> <td> <code><a class="autorefs autorefs-internal" title="BaseCreator (client.ayon_core.pipeline.create.creator_plugins.BaseCreator)" href=creator_plugins.html#client.ayon_core.pipeline.create.creator_plugins.BaseCreator>BaseCreator</a></code> </td> <td> <div class=doc-md-description> <p>Creator responsible for instance.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>409</span>
<span class=normal>410</span>
<span class=normal>411</span>
<span class=normal>412</span>
<span class=normal>413</span>
<span class=normal>414</span>
<span class=normal>415</span>
<span class=normal>416</span>
<span class=normal>417</span>
<span class=normal>418</span>
<span class=normal>419</span>
<span class=normal>420</span>
<span class=normal>421</span>
<span class=normal>422</span>
<span class=normal>423</span>
<span class=normal>424</span>
<span class=normal>425</span>
<span class=normal>426</span>
<span class=normal>427</span>
<span class=normal>428</span>
<span class=normal>429</span>
<span class=normal>430</span>
<span class=normal>431</span>
<span class=normal>432</span>
<span class=normal>433</span>
<span class=normal>434</span>
<span class=normal>435</span>
<span class=normal>436</span>
<span class=normal>437</span>
<span class=normal>438</span>
<span class=normal>439</span>
<span class=normal>440</span>
<span class=normal>441</span>
<span class=normal>442</span>
<span class=normal>443</span>
<span class=normal>444</span>
<span class=normal>445</span>
<span class=normal>446</span>
<span class=normal>447</span>
<span class=normal>448</span>
<span class=normal>449</span>
<span class=normal>450</span>
<span class=normal>451</span>
<span class=normal>452</span>
<span class=normal>453</span>
<span class=normal>454</span>
<span class=normal>455</span>
<span class=normal>456</span>
<span class=normal>457</span>
<span class=normal>458</span>
<span class=normal>459</span>
<span class=normal>460</span>
<span class=normal>461</span>
<span class=normal>462</span>
<span class=normal>463</span>
<span class=normal>464</span>
<span class=normal>465</span>
<span class=normal>466</span>
<span class=normal>467</span>
<span class=normal>468</span>
<span class=normal>469</span>
<span class=normal>470</span>
<span class=normal>471</span>
<span class=normal>472</span>
<span class=normal>473</span>
<span class=normal>474</span>
<span class=normal>475</span>
<span class=normal>476</span>
<span class=normal>477</span>
<span class=normal>478</span>
<span class=normal>479</span>
<span class=normal>480</span>
<span class=normal>481</span>
<span class=normal>482</span>
<span class=normal>483</span>
<span class=normal>484</span>
<span class=normal>485</span>
<span class=normal>486</span>
<span class=normal>487</span>
<span class=normal>488</span>
<span class=normal>489</span>
<span class=normal>490</span>
<span class=normal>491</span>
<span class=normal>492</span>
<span class=normal>493</span>
<span class=normal>494</span>
<span class=normal>495</span>
<span class=normal>496</span>
<span class=normal>497</span>
<span class=normal>498</span>
<span class=normal>499</span>
<span class=normal>500</span>
<span class=normal>501</span>
<span class=normal>502</span>
<span class=normal>503</span>
<span class=normal>504</span>
<span class=normal>505</span>
<span class=normal>506</span>
<span class=normal>507</span>
<span class=normal>508</span>
<span class=normal>509</span>
<span class=normal>510</span>
<span class=normal>511</span>
<span class=normal>512</span>
<span class=normal>513</span>
<span class=normal>514</span>
<span class=normal>515</span>
<span class=normal>516</span>
<span class=normal>517</span>
<span class=normal>518</span>
<span class=normal>519</span>
<span class=normal>520</span>
<span class=normal>521</span>
<span class=normal>522</span>
<span class=normal>523</span>
<span class=normal>524</span>
<span class=normal>525</span>
<span class=normal>526</span>
<span class=normal>527</span>
<span class=normal>528</span>
<span class=normal>529</span>
<span class=normal>530</span>
<span class=normal>531</span>
<span class=normal>532</span>
<span class=normal>533</span>
<span class=normal>534</span>
<span class=normal>535</span>
<span class=normal>536</span>
<span class=normal>537</span>
<span class=normal>538</span>
<span class=normal>539</span>
<span class=normal>540</span>
<span class=normal>541</span>
<span class=normal>542</span>
<span class=normal>543</span>
<span class=normal>544</span>
<span class=normal>545</span>
<span class=normal>546</span>
<span class=normal>547</span>
<span class=normal>548</span>
<span class=normal>549</span>
<span class=normal>550</span>
<span class=normal>551</span>
<span class=normal>552</span>
<span class=normal>553</span>
<span class=normal>554</span>
<span class=normal>555</span>
<span class=normal>556</span>
<span class=normal>557</span>
<span class=normal>558</span>
<span class=normal>559</span>
<span class=normal>560</span>
<span class=normal>561</span>
<span class=normal>562</span>
<span class=normal>563</span>
<span class=normal>564</span>
<span class=normal>565</span>
<span class=normal>566</span>
<span class=normal>567</span>
<span class=normal>568</span>
<span class=normal>569</span>
<span class=normal>570</span>
<span class=normal>571</span>
<span class=normal>572</span>
<span class=normal>573</span>
<span class=normal>574</span>
<span class=normal>575</span>
<span class=normal>576</span>
<span class=normal>577</span>
<span class=normal>578</span>
<span class=normal>579</span>
<span class=normal>580</span>
<span class=normal>581</span>
<span class=normal>582</span>
<span class=normal>583</span>
<span class=normal>584</span>
<span class=normal>585</span>
<span class=normal>586</span>
<span class=normal>587</span>
<span class=normal>588</span>
<span class=normal>589</span>
<span class=normal>590</span>
<span class=normal>591</span>
<span class=normal>592</span>
<span class=normal>593</span>
<span class=normal>594</span>
<span class=normal>595</span>
<span class=normal>596</span>
<span class=normal>597</span>
<span class=normal>598</span>
<span class=normal>599</span>
<span class=normal>600</span>
<span class=normal>601</span>
<span class=normal>602</span>
<span class=normal>603</span>
<span class=normal>604</span>
<span class=normal>605</span>
<span class=normal>606</span>
<span class=normal>607</span>
<span class=normal>608</span>
<span class=normal>609</span>
<span class=normal>610</span>
<span class=normal>611</span>
<span class=normal>612</span>
<span class=normal>613</span>
<span class=normal>614</span>
<span class=normal>615</span>
<span class=normal>616</span>
<span class=normal>617</span>
<span class=normal>618</span>
<span class=normal>619</span>
<span class=normal>620</span>
<span class=normal>621</span>
<span class=normal>622</span>
<span class=normal>623</span>
<span class=normal>624</span>
<span class=normal>625</span>
<span class=normal>626</span>
<span class=normal>627</span>
<span class=normal>628</span>
<span class=normal>629</span>
<span class=normal>630</span>
<span class=normal>631</span>
<span class=normal>632</span>
<span class=normal>633</span>
<span class=normal>634</span>
<span class=normal>635</span>
<span class=normal>636</span>
<span class=normal>637</span>
<span class=normal>638</span>
<span class=normal>639</span>
<span class=normal>640</span>
<span class=normal>641</span>
<span class=normal>642</span>
<span class=normal>643</span>
<span class=normal>644</span>
<span class=normal>645</span>
<span class=normal>646</span>
<span class=normal>647</span>
<span class=normal>648</span>
<span class=normal>649</span>
<span class=normal>650</span>
<span class=normal>651</span>
<span class=normal>652</span>
<span class=normal>653</span>
<span class=normal>654</span>
<span class=normal>655</span>
<span class=normal>656</span>
<span class=normal>657</span>
<span class=normal>658</span>
<span class=normal>659</span>
<span class=normal>660</span>
<span class=normal>661</span>
<span class=normal>662</span>
<span class=normal>663</span>
<span class=normal>664</span>
<span class=normal>665</span>
<span class=normal>666</span>
<span class=normal>667</span>
<span class=normal>668</span>
<span class=normal>669</span>
<span class=normal>670</span>
<span class=normal>671</span>
<span class=normal>672</span>
<span class=normal>673</span>
<span class=normal>674</span>
<span class=normal>675</span>
<span class=normal>676</span>
<span class=normal>677</span>
<span class=normal>678</span>
<span class=normal>679</span>
<span class=normal>680</span>
<span class=normal>681</span>
<span class=normal>682</span>
<span class=normal>683</span>
<span class=normal>684</span>
<span class=normal>685</span>
<span class=normal>686</span>
<span class=normal>687</span>
<span class=normal>688</span>
<span class=normal>689</span>
<span class=normal>690</span>
<span class=normal>691</span>
<span class=normal>692</span>
<span class=normal>693</span>
<span class=normal>694</span>
<span class=normal>695</span>
<span class=normal>696</span>
<span class=normal>697</span>
<span class=normal>698</span>
<span class=normal>699</span>
<span class=normal>700</span>
<span class=normal>701</span>
<span class=normal>702</span>
<span class=normal>703</span>
<span class=normal>704</span>
<span class=normal>705</span>
<span class=normal>706</span>
<span class=normal>707</span>
<span class=normal>708</span>
<span class=normal>709</span>
<span class=normal>710</span>
<span class=normal>711</span>
<span class=normal>712</span>
<span class=normal>713</span>
<span class=normal>714</span>
<span class=normal>715</span>
<span class=normal>716</span>
<span class=normal>717</span>
<span class=normal>718</span>
<span class=normal>719</span>
<span class=normal>720</span>
<span class=normal>721</span>
<span class=normal>722</span>
<span class=normal>723</span>
<span class=normal>724</span>
<span class=normal>725</span>
<span class=normal>726</span>
<span class=normal>727</span>
<span class=normal>728</span>
<span class=normal>729</span>
<span class=normal>730</span>
<span class=normal>731</span>
<span class=normal>732</span>
<span class=normal>733</span>
<span class=normal>734</span>
<span class=normal>735</span>
<span class=normal>736</span>
<span class=normal>737</span>
<span class=normal>738</span>
<span class=normal>739</span>
<span class=normal>740</span>
<span class=normal>741</span>
<span class=normal>742</span>
<span class=normal>743</span>
<span class=normal>744</span>
<span class=normal>745</span>
<span class=normal>746</span>
<span class=normal>747</span>
<span class=normal>748</span>
<span class=normal>749</span>
<span class=normal>750</span>
<span class=normal>751</span>
<span class=normal>752</span>
<span class=normal>753</span>
<span class=normal>754</span>
<span class=normal>755</span>
<span class=normal>756</span>
<span class=normal>757</span>
<span class=normal>758</span>
<span class=normal>759</span>
<span class=normal>760</span>
<span class=normal>761</span>
<span class=normal>762</span>
<span class=normal>763</span>
<span class=normal>764</span>
<span class=normal>765</span>
<span class=normal>766</span>
<span class=normal>767</span>
<span class=normal>768</span>
<span class=normal>769</span>
<span class=normal>770</span>
<span class=normal>771</span>
<span class=normal>772</span>
<span class=normal>773</span>
<span class=normal>774</span>
<span class=normal>775</span>
<span class=normal>776</span>
<span class=normal>777</span>
<span class=normal>778</span>
<span class=normal>779</span>
<span class=normal>780</span>
<span class=normal>781</span>
<span class=normal>782</span>
<span class=normal>783</span>
<span class=normal>784</span>
<span class=normal>785</span>
<span class=normal>786</span>
<span class=normal>787</span>
<span class=normal>788</span>
<span class=normal>789</span>
<span class=normal>790</span>
<span class=normal>791</span>
<span class=normal>792</span>
<span class=normal>793</span>
<span class=normal>794</span>
<span class=normal>795</span>
<span class=normal>796</span>
<span class=normal>797</span>
<span class=normal>798</span>
<span class=normal>799</span>
<span class=normal>800</span>
<span class=normal>801</span>
<span class=normal>802</span>
<span class=normal>803</span>
<span class=normal>804</span>
<span class=normal>805</span>
<span class=normal>806</span>
<span class=normal>807</span>
<span class=normal>808</span>
<span class=normal>809</span>
<span class=normal>810</span>
<span class=normal>811</span>
<span class=normal>812</span>
<span class=normal>813</span>
<span class=normal>814</span>
<span class=normal>815</span>
<span class=normal>816</span>
<span class=normal>817</span>
<span class=normal>818</span>
<span class=normal>819</span>
<span class=normal>820</span>
<span class=normal>821</span>
<span class=normal>822</span>
<span class=normal>823</span>
<span class=normal>824</span>
<span class=normal>825</span>
<span class=normal>826</span>
<span class=normal>827</span>
<span class=normal>828</span>
<span class=normal>829</span>
<span class=normal>830</span>
<span class=normal>831</span>
<span class=normal>832</span>
<span class=normal>833</span>
<span class=normal>834</span>
<span class=normal>835</span>
<span class=normal>836</span>
<span class=normal>837</span>
<span class=normal>838</span>
<span class=normal>839</span>
<span class=normal>840</span>
<span class=normal>841</span>
<span class=normal>842</span>
<span class=normal>843</span>
<span class=normal>844</span>
<span class=normal>845</span>
<span class=normal>846</span>
<span class=normal>847</span>
<span class=normal>848</span>
<span class=normal>849</span>
<span class=normal>850</span>
<span class=normal>851</span>
<span class=normal>852</span>
<span class=normal>853</span>
<span class=normal>854</span>
<span class=normal>855</span>
<span class=normal>856</span>
<span class=normal>857</span>
<span class=normal>858</span>
<span class=normal>859</span>
<span class=normal>860</span>
<span class=normal>861</span>
<span class=normal>862</span>
<span class=normal>863</span>
<span class=normal>864</span>
<span class=normal>865</span>
<span class=normal>866</span>
<span class=normal>867</span>
<span class=normal>868</span>
<span class=normal>869</span>
<span class=normal>870</span>
<span class=normal>871</span>
<span class=normal>872</span>
<span class=normal>873</span>
<span class=normal>874</span>
<span class=normal>875</span>
<span class=normal>876</span>
<span class=normal>877</span>
<span class=normal>878</span>
<span class=normal>879</span>
<span class=normal>880</span>
<span class=normal>881</span>
<span class=normal>882</span>
<span class=normal>883</span>
<span class=normal>884</span>
<span class=normal>885</span>
<span class=normal>886</span>
<span class=normal>887</span>
<span class=normal>888</span>
<span class=normal>889</span>
<span class=normal>890</span>
<span class=normal>891</span>
<span class=normal>892</span>
<span class=normal>893</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>CreatedInstance</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Instance entity with data that will be stored to workfile.</span>

<span class=sd>    I think `data` must be required argument containing all minimum information</span>
<span class=sd>    about instance like &quot;folderPath&quot; and &quot;task&quot; and all data used for filling</span>
<span class=sd>    product name as creators may have custom data for product name filling.</span>

<span class=sd>    Notes:</span>
<span class=sd>        Object have 2 possible initialization. One using &#39;creator&#39; object which</span>
<span class=sd>            is recommended for api usage. Second by passing information about</span>
<span class=sd>            creator.</span>

<span class=sd>    Args:</span>
<span class=sd>        product_type (str): Product type that will be created.</span>
<span class=sd>        product_name (str): Name of product that will be created.</span>
<span class=sd>        data (Dict[str, Any]): Data used for filling product name or override</span>
<span class=sd>            data from already existing instance.</span>
<span class=sd>        creator (BaseCreator): Creator responsible for instance.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=c1># Keys that can&#39;t be changed or removed from data after loading using</span>
    <span class=c1>#   creator.</span>
    <span class=c1># - &#39;creator_attributes&#39; and &#39;publish_attributes&#39; can change values of</span>
    <span class=c1>#   their individual children but not on their own</span>
    <span class=n>__immutable_keys</span> <span class=o>=</span> <span class=p>(</span>
        <span class=s2>&quot;id&quot;</span><span class=p>,</span>
        <span class=s2>&quot;instance_id&quot;</span><span class=p>,</span>
        <span class=s2>&quot;productType&quot;</span><span class=p>,</span>
        <span class=s2>&quot;creator_identifier&quot;</span><span class=p>,</span>
        <span class=s2>&quot;creator_attributes&quot;</span><span class=p>,</span>
        <span class=s2>&quot;publish_attributes&quot;</span>
    <span class=p>)</span>
    <span class=c1># Keys that can be changed, but should not be removed from instance</span>
    <span class=n>__required_keys</span> <span class=o>=</span> <span class=p>{</span>
        <span class=s2>&quot;folderPath&quot;</span><span class=p>:</span> <span class=kc>None</span><span class=p>,</span>
        <span class=s2>&quot;task&quot;</span><span class=p>:</span> <span class=kc>None</span><span class=p>,</span>
        <span class=s2>&quot;productName&quot;</span><span class=p>:</span> <span class=kc>None</span><span class=p>,</span>
        <span class=s2>&quot;active&quot;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span>
    <span class=p>}</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>product_type</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
        <span class=n>product_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
        <span class=n>data</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>],</span>
        <span class=n>creator</span><span class=p>:</span> <span class=s2>&quot;BaseCreator&quot;</span><span class=p>,</span>
        <span class=n>transient_data</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
    <span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_creator</span> <span class=o>=</span> <span class=n>creator</span>
        <span class=n>creator_identifier</span> <span class=o>=</span> <span class=n>creator</span><span class=o>.</span><span class=n>identifier</span>
        <span class=n>group_label</span> <span class=o>=</span> <span class=n>creator</span><span class=o>.</span><span class=n>get_group_label</span><span class=p>()</span>
        <span class=n>creator_label</span> <span class=o>=</span> <span class=n>creator</span><span class=o>.</span><span class=n>label</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_creator_label</span> <span class=o>=</span> <span class=n>creator_label</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_group_label</span> <span class=o>=</span> <span class=n>group_label</span> <span class=ow>or</span> <span class=n>creator_identifier</span>

        <span class=c1># Instance members may have actions on them</span>
        <span class=c1># TODO implement members logic</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_members</span> <span class=o>=</span> <span class=p>[]</span>

        <span class=c1># Data that can be used for lifetime of object</span>
        <span class=k>if</span> <span class=n>transient_data</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>transient_data</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_transient_data</span> <span class=o>=</span> <span class=n>transient_data</span>

        <span class=c1># Create a copy of passed data to avoid changing them on the fly</span>
        <span class=n>data</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=n>data</span> <span class=ow>or</span> <span class=p>{})</span>

        <span class=c1># Pop dictionary values that will be converted to objects to be able</span>
        <span class=c1>#   catch changes</span>
        <span class=n>orig_creator_attributes</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span> <span class=ow>or</span> <span class=p>{}</span>
        <span class=n>orig_publish_attributes</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s2>&quot;publish_attributes&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span> <span class=ow>or</span> <span class=p>{}</span>

        <span class=c1># Store original value of passed data</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_orig_data</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>

        <span class=c1># Pop &#39;productType&#39; and &#39;productName&#39; to prevent unexpected changes</span>
        <span class=n>data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s2>&quot;productType&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
        <span class=n>data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s2>&quot;productName&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
        <span class=c1># Backwards compatibility with OpenPype instances</span>
        <span class=n>data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s2>&quot;family&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
        <span class=n>data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s2>&quot;subset&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>

        <span class=n>asset_name</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s2>&quot;asset&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
        <span class=k>if</span> <span class=s2>&quot;folderPath&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>data</span><span class=p>:</span>
            <span class=n>data</span><span class=p>[</span><span class=s2>&quot;folderPath&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>asset_name</span>

        <span class=c1># QUESTION Does it make sense to have data stored as ordered dict?</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span> <span class=o>=</span> <span class=n>collections</span><span class=o>.</span><span class=n>OrderedDict</span><span class=p>()</span>
        <span class=c1># QUESTION Do we need this &quot;id&quot; information on instance?</span>
        <span class=n>item_id</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;id&quot;</span><span class=p>)</span>
        <span class=c1># TODO use only &#39;AYON_INSTANCE_ID&#39; when all hosts support it</span>
        <span class=k>if</span> <span class=n>item_id</span> <span class=ow>not</span> <span class=ow>in</span> <span class=p>{</span><span class=n>AYON_INSTANCE_ID</span><span class=p>,</span> <span class=n>AVALON_INSTANCE_ID</span><span class=p>}:</span>
            <span class=n>item_id</span> <span class=o>=</span> <span class=n>AYON_INSTANCE_ID</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>item_id</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;productType&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>product_type</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;productName&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>product_name</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;active&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;active&quot;</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_identifier&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>creator_identifier</span>

        <span class=c1># Pop from source data all keys that are defined in `_data` before</span>
        <span class=c1>#   this moment and through their values away</span>
        <span class=c1># - they should be the same and if are not then should not change</span>
        <span class=c1>#   already set values</span>
        <span class=k>for</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>keys</span><span class=p>():</span>
            <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=n>data</span><span class=p>:</span>
                <span class=n>data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;variant&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;variant&quot;</span><span class=p>)</span> <span class=ow>or</span> <span class=s2>&quot;&quot;</span>
        <span class=c1># Stored creator specific attribute values</span>
        <span class=c1># {key: value}</span>
        <span class=n>creator_values</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=n>orig_creator_attributes</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>creator_values</span>

        <span class=c1># Stored publish specific attribute values</span>
        <span class=c1># {&lt;plugin name&gt;: {key: value}}</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;publish_attributes&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>PublishAttributes</span><span class=p>(</span>
            <span class=bp>self</span><span class=p>,</span> <span class=n>orig_publish_attributes</span>
        <span class=p>)</span>
        <span class=k>if</span> <span class=n>data</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>

        <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>default</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>__required_keys</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>setdefault</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>default</span><span class=p>)</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;instance_id&quot;</span><span class=p>):</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;instance_id&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>uuid4</span><span class=p>())</span>

        <span class=n>creator_attr_defs</span> <span class=o>=</span> <span class=n>creator</span><span class=o>.</span><span class=n>get_attr_defs_for_instance</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>set_create_attr_defs</span><span class=p>(</span>
            <span class=n>creator_attr_defs</span><span class=p>,</span> <span class=n>creator_values</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__str__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=p>(</span>
            <span class=s2>&quot;&lt;CreatedInstance </span><span class=si>{product[name]}</span><span class=s2>&quot;</span>
            <span class=s2>&quot; (</span><span class=si>{product[type]}</span><span class=s2>[</span><span class=si>{creator_identifier}</span><span class=s2>])&gt; </span><span class=si>{data}</span><span class=s2>&quot;</span>
        <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
            <span class=n>creator_identifier</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>creator_identifier</span><span class=p>,</span>
            <span class=n>product</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;name&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>product_name</span><span class=p>,</span> <span class=s2>&quot;type&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>product_type</span><span class=p>},</span>
            <span class=n>data</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>)</span>
        <span class=p>)</span>

    <span class=c1># --- Dictionary like methods ---</span>
    <span class=k>def</span><span class=w> </span><span class=fm>__getitem__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__contains__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__setitem__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
        <span class=c1># Validate immutable keys</span>
        <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>__immutable_keys</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>value</span> <span class=o>==</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>):</span>
                <span class=k>return</span>
            <span class=c1># Raise exception if key is immutable and value has changed</span>
            <span class=k>raise</span> <span class=n>ImmutableKeyError</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>==</span> <span class=n>value</span><span class=p>:</span>
            <span class=k>return</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_create_context</span><span class=o>.</span><span class=n>instance_values_changed</span><span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=p>{</span><span class=n>key</span><span class=p>:</span> <span class=n>value</span><span class=p>}</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>default</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>pop</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
        <span class=c1># Raise exception if is trying to pop key which is immutable</span>
        <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>__immutable_keys</span><span class=p>:</span>
            <span class=k>raise</span> <span class=n>ImmutableKeyError</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>

        <span class=n>has_key</span> <span class=o>=</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span>
        <span class=n>output</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>has_key</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>__required_keys</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>__required_keys</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_create_context</span><span class=o>.</span><span class=n>instance_values_changed</span><span class=p>(</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=p>{</span><span class=n>key</span><span class=p>:</span> <span class=kc>None</span><span class=p>}</span>
            <span class=p>)</span>
        <span class=k>return</span> <span class=n>output</span>

    <span class=k>def</span><span class=w> </span><span class=nf>keys</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>keys</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>values</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>values</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>items</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>items</span><span class=p>()</span>
    <span class=c1># ------</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>product_type</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;productType&quot;</span><span class=p>]</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>product_name</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;productName&quot;</span><span class=p>]</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>label</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=n>label</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;label&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>label</span><span class=p>:</span>
            <span class=n>label</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>product_name</span>
        <span class=k>return</span> <span class=n>label</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>group_label</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=n>label</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;group&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>label</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>label</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_group_label</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>origin_data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=n>output</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_orig_data</span><span class=p>)</span>
        <span class=n>output</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>creator_attributes</span><span class=o>.</span><span class=n>origin_data</span>
        <span class=n>output</span><span class=p>[</span><span class=s2>&quot;publish_attributes&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>publish_attributes</span><span class=o>.</span><span class=n>origin_data</span>
        <span class=k>return</span> <span class=n>output</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>creator_identifier</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_identifier&quot;</span><span class=p>]</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>creator_label</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_creator</span><span class=o>.</span><span class=n>label</span> <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>creator_identifier</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>id</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Instance identifier.</span>

<span class=sd>        Returns:</span>
<span class=sd>            str: UUID of instance.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;instance_id&quot;</span><span class=p>]</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Legacy access to data.</span>

<span class=sd>        Access to data is needed to modify values.</span>

<span class=sd>        Returns:</span>
<span class=sd>            CreatedInstance: Object can be used as dictionary but with</span>
<span class=sd>                validations of immutable keys.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>transient_data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Data stored for lifetime of instance object.</span>

<span class=sd>        These data are not stored to scene and will be lost on object</span>
<span class=sd>        deletion.</span>

<span class=sd>        Can be used to store objects. In some host implementations is not</span>
<span class=sd>        possible to reference to object in scene with some unique identifier</span>
<span class=sd>        (e.g. node in Fusion.). In that case it is handy to store the object</span>
<span class=sd>        here. Should be used that way only if instance data are stored on the</span>
<span class=sd>        node itself.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Dict[str, Any]: Dictionary object where you can store data related</span>
<span class=sd>                to instance for lifetime of instance object.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_transient_data</span>

    <span class=k>def</span><span class=w> </span><span class=nf>changes</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Calculate and return changes.&quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=n>TrackChangesItem</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>origin_data</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>data_to_store</span><span class=p>())</span>

    <span class=k>def</span><span class=w> </span><span class=nf>mark_as_stored</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Should be called when instance data are stored.</span>

<span class=sd>        Origin data are replaced by current data so changes are cleared.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>orig_keys</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_orig_data</span><span class=o>.</span><span class=n>keys</span><span class=p>())</span>
        <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=n>orig_keys</span><span class=o>.</span><span class=n>discard</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=p>(</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>,</span> <span class=s2>&quot;publish_attributes&quot;</span><span class=p>):</span>
                <span class=k>continue</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_orig_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>

        <span class=k>for</span> <span class=n>key</span> <span class=ow>in</span> <span class=n>orig_keys</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_orig_data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>creator_attributes</span><span class=o>.</span><span class=n>mark_as_stored</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>publish_attributes</span><span class=o>.</span><span class=n>mark_as_stored</span><span class=p>()</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>creator_attributes</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>]</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>creator_attribute_defs</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Attribute definitions defined by creator plugin.</span>

<span class=sd>        Returns:</span>
<span class=sd>              List[AbstractAttrDef]: Attribute definitions.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>creator_attributes</span><span class=o>.</span><span class=n>attr_defs</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>publish_attributes</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;publish_attributes&quot;</span><span class=p>]</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>has_promised_context</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get context data that are promised to be set by creator.</span>

<span class=sd>        Returns:</span>
<span class=sd>            bool: Has context that won&#39;t bo validated. Artist can&#39;t change</span>
<span class=sd>                value when set to True.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_transient_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;has_promised_context&quot;</span><span class=p>,</span> <span class=kc>False</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>data_to_store</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Collect data that contain json parsable types.</span>

<span class=sd>        It is possible to recreate the instance using these data.</span>

<span class=sd>        Todos:</span>
<span class=sd>            We probably don&#39;t need OrderedDict. When data are loaded they</span>
<span class=sd>                are not ordered anymore.</span>

<span class=sd>        Returns:</span>
<span class=sd>            OrderedDict: Ordered dictionary with instance data.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>output</span> <span class=o>=</span> <span class=n>collections</span><span class=o>.</span><span class=n>OrderedDict</span><span class=p>()</span>
        <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=p>(</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>,</span> <span class=s2>&quot;publish_attributes&quot;</span><span class=p>):</span>
                <span class=k>continue</span>
            <span class=n>output</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>

        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>creator_attributes</span><span class=p>,</span> <span class=n>AttributeValues</span><span class=p>):</span>
            <span class=n>creator_attributes</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>creator_attributes</span><span class=o>.</span><span class=n>data_to_store</span><span class=p>()</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>creator_attributes</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>creator_attributes</span><span class=p>)</span>
        <span class=n>output</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>creator_attributes</span>
        <span class=n>output</span><span class=p>[</span><span class=s2>&quot;publish_attributes&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>publish_attributes</span><span class=o>.</span><span class=n>data_to_store</span><span class=p>()</span>

        <span class=k>return</span> <span class=n>output</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_create_attr_defs</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>attr_defs</span><span class=p>,</span> <span class=n>value</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Create plugin updates create attribute definitions.</span>

<span class=sd>        Method called by create plugin when attribute definitions should</span>
<span class=sd>            be changed.</span>

<span class=sd>        Args:</span>
<span class=sd>            attr_defs (List[AbstractAttrDef]): Attribute definitions.</span>
<span class=sd>            value (Optional[Dict[str, Any]]): Values of attribute definitions.</span>
<span class=sd>                Current values are used if not passed in.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>value</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>]</span>

        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=n>AttributeValues</span><span class=p>):</span>
            <span class=n>value</span> <span class=o>=</span> <span class=n>value</span><span class=o>.</span><span class=n>data_to_store</span><span class=p>()</span>

        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>],</span> <span class=n>AttributeValues</span><span class=p>):</span>
            <span class=n>origin_data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>origin_data</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>origin_data</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>])</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>CreatorAttributeValues</span><span class=p>(</span>
            <span class=bp>self</span><span class=p>,</span>
            <span class=s2>&quot;creator_attributes&quot;</span><span class=p>,</span>
            <span class=n>attr_defs</span><span class=p>,</span>
            <span class=n>value</span><span class=p>,</span>
            <span class=n>origin_data</span>
        <span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_create_context</span><span class=o>.</span><span class=n>instance_create_attr_defs_changed</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>)</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>from_existing</span><span class=p>(</span>
        <span class=bp>cls</span><span class=p>,</span>
        <span class=n>instance_data</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>],</span>
        <span class=n>creator</span><span class=p>:</span> <span class=s2>&quot;BaseCreator&quot;</span><span class=p>,</span>
        <span class=n>transient_data</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
    <span class=p>)</span> <span class=o>-&gt;</span> <span class=s2>&quot;CreatedInstance&quot;</span><span class=p>:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Convert instance data from workfile to CreatedInstance.</span>

<span class=sd>        Args:</span>
<span class=sd>            instance_data (Dict[str, Any]): Data in a structure ready for</span>
<span class=sd>                &#39;CreatedInstance&#39; object.</span>
<span class=sd>            creator (BaseCreator): Creator plugin which is creating the</span>
<span class=sd>                instance of for which the instance belongs.</span>
<span class=sd>            transient_data (Optional[dict[str, Any]]): Instance transient</span>
<span class=sd>                data.</span>

<span class=sd>        Returns:</span>
<span class=sd>            CreatedInstance: Instance object.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>instance_data</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=n>instance_data</span><span class=p>)</span>

        <span class=n>product_type</span> <span class=o>=</span> <span class=n>instance_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;productType&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>product_type</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>product_type</span> <span class=o>=</span> <span class=n>instance_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;family&quot;</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>product_type</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
                <span class=n>product_type</span> <span class=o>=</span> <span class=n>creator</span><span class=o>.</span><span class=n>product_type</span>
        <span class=n>product_name</span> <span class=o>=</span> <span class=n>instance_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;productName&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>product_name</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>product_name</span> <span class=o>=</span> <span class=n>instance_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;subset&quot;</span><span class=p>)</span>

        <span class=k>return</span> <span class=bp>cls</span><span class=p>(</span>
            <span class=n>product_type</span><span class=p>,</span>
            <span class=n>product_name</span><span class=p>,</span>
            <span class=n>instance_data</span><span class=p>,</span>
            <span class=n>creator</span><span class=p>,</span>
            <span class=n>transient_data</span><span class=o>=</span><span class=n>transient_data</span><span class=p>,</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>attribute_value_changed</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>changes</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;A value changed.</span>

<span class=sd>        Args:</span>
<span class=sd>            key (str): Key of attribute values.</span>
<span class=sd>            changes (Dict[str, Any]): Changes in values.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_create_context</span><span class=o>.</span><span class=n>instance_values_changed</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=p>{</span><span class=n>key</span><span class=p>:</span> <span class=n>changes</span><span class=p>})</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_publish_plugin_attr_defs</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>plugin_name</span><span class=p>,</span> <span class=n>attr_defs</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Set attribute definitions for publish plugin.</span>

<span class=sd>        Args:</span>
<span class=sd>            plugin_name(str): Name of publish plugin.</span>
<span class=sd>            attr_defs(List[AbstractAttrDef]): Attribute definitions.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>publish_attributes</span><span class=o>.</span><span class=n>set_publish_plugin_attr_defs</span><span class=p>(</span>
            <span class=n>plugin_name</span><span class=p>,</span> <span class=n>attr_defs</span>
        <span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_create_context</span><span class=o>.</span><span class=n>instance_publish_attr_defs_changed</span><span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=n>plugin_name</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>publish_attribute_value_changed</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>plugin_name</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Method called from PublishAttributes.</span>

<span class=sd>        Args:</span>
<span class=sd>            plugin_name (str): Plugin name.</span>
<span class=sd>            value (Dict[str, Any]): Changes in values for the plugin.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_create_context</span><span class=o>.</span><span class=n>instance_values_changed</span><span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
            <span class=p>{</span>
                <span class=s2>&quot;publish_attributes&quot;</span><span class=p>:</span> <span class=p>{</span>
                    <span class=n>plugin_name</span><span class=p>:</span> <span class=n>value</span><span class=p>,</span>
                <span class=p>},</span>
            <span class=p>},</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>add_members</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>members</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Currently unused method.&quot;&quot;&quot;</span>

        <span class=k>for</span> <span class=n>member</span> <span class=ow>in</span> <span class=n>members</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>member</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_members</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_members</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>member</span><span class=p>)</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>_create_context</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get create context.</span>

<span class=sd>        Returns:</span>
<span class=sd>            CreateContext: Context object which wraps object.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_creator</span><span class=o>.</span><span class=n>create_context</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.create.structures.CreatedInstance._create_context class="doc doc-heading"> <code class="highlight language-python"><span class=n>_create_context</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Get create context.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>CreateContext</code></td> <td> </td> <td> <div class=doc-md-description> <p>Context object which wraps object.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.create.structures.CreatedInstance.creator_attribute_defs class="doc doc-heading"> <code class="highlight language-python"><span class=n>creator_attribute_defs</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Attribute definitions defined by creator plugin.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>List[AbstractAttrDef]: Attribute definitions.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.create.structures.CreatedInstance.data class="doc doc-heading"> <code class="highlight language-python"><span class=n>data</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Legacy access to data.</p> <p>Access to data is needed to modify values.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>CreatedInstance</code></td> <td> </td> <td> <div class=doc-md-description> <p>Object can be used as dictionary but with validations of immutable keys.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.create.structures.CreatedInstance.has_promised_context class="doc doc-heading"> <code class="highlight language-python"><span class=n>has_promised_context</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Get context data that are promised to be set by creator.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>bool</code></td> <td> <code><span title=bool>bool</span></code> </td> <td> <div class=doc-md-description> <p>Has context that won't bo validated. Artist can't change value when set to True.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.create.structures.CreatedInstance.id class="doc doc-heading"> <code class="highlight language-python"><span class=nb>id</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Instance identifier.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>UUID of instance.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.create.structures.CreatedInstance.transient_data class="doc doc-heading"> <code class="highlight language-python"><span class=n>transient_data</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Data stored for lifetime of instance object.</p> <p>These data are not stored to scene and will be lost on object deletion.</p> <p>Can be used to store objects. In some host implementations is not possible to reference to object in scene with some unique identifier (e.g. node in Fusion.). In that case it is handy to store the object here. Should be used that way only if instance data are stored on the node itself.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Dict[str, Any]: Dictionary object where you can store data related to instance for lifetime of instance object.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.structures.CreatedInstance.add_members class="doc doc-heading"> <code class="highlight language-python"><span class=n>add_members</span><span class=p>(</span><span class=n>members</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Currently unused method.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>878</span>
<span class=normal>879</span>
<span class=normal>880</span>
<span class=normal>881</span>
<span class=normal>882</span>
<span class=normal>883</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>add_members</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>members</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Currently unused method.&quot;&quot;&quot;</span>

    <span class=k>for</span> <span class=n>member</span> <span class=ow>in</span> <span class=n>members</span><span class=p>:</span>
        <span class=k>if</span> <span class=n>member</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_members</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_members</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>member</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.structures.CreatedInstance.attribute_value_changed class="doc doc-heading"> <code class="highlight language-python"><span class=n>attribute_value_changed</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>changes</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>A value changed.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>key</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Key of attribute values.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>changes</code> </td> <td> <code><span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Changes in values.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>836</span>
<span class=normal>837</span>
<span class=normal>838</span>
<span class=normal>839</span>
<span class=normal>840</span>
<span class=normal>841</span>
<span class=normal>842</span>
<span class=normal>843</span>
<span class=normal>844</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>attribute_value_changed</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>changes</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;A value changed.</span>

<span class=sd>    Args:</span>
<span class=sd>        key (str): Key of attribute values.</span>
<span class=sd>        changes (Dict[str, Any]): Changes in values.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_create_context</span><span class=o>.</span><span class=n>instance_values_changed</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=p>{</span><span class=n>key</span><span class=p>:</span> <span class=n>changes</span><span class=p>})</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.structures.CreatedInstance.changes class="doc doc-heading"> <code class="highlight language-python"><span class=n>changes</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Calculate and return changes.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>684</span>
<span class=normal>685</span>
<span class=normal>686</span>
<span class=normal>687</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>changes</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Calculate and return changes.&quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=n>TrackChangesItem</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>origin_data</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>data_to_store</span><span class=p>())</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.structures.CreatedInstance.data_to_store class="doc doc-heading"> <code class="highlight language-python"><span class=n>data_to_store</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Collect data that contain json parsable types.</p> <p>It is possible to recreate the instance using these data.</p> <details class=todos open> <summary>Todos</summary> <p>We probably don't need OrderedDict. When data are loaded they are not ordered anymore.</p> </details> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>OrderedDict</code></td> <td> </td> <td> <div class=doc-md-description> <p>Ordered dictionary with instance data.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>737</span>
<span class=normal>738</span>
<span class=normal>739</span>
<span class=normal>740</span>
<span class=normal>741</span>
<span class=normal>742</span>
<span class=normal>743</span>
<span class=normal>744</span>
<span class=normal>745</span>
<span class=normal>746</span>
<span class=normal>747</span>
<span class=normal>748</span>
<span class=normal>749</span>
<span class=normal>750</span>
<span class=normal>751</span>
<span class=normal>752</span>
<span class=normal>753</span>
<span class=normal>754</span>
<span class=normal>755</span>
<span class=normal>756</span>
<span class=normal>757</span>
<span class=normal>758</span>
<span class=normal>759</span>
<span class=normal>760</span>
<span class=normal>761</span>
<span class=normal>762</span>
<span class=normal>763</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>data_to_store</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Collect data that contain json parsable types.</span>

<span class=sd>    It is possible to recreate the instance using these data.</span>

<span class=sd>    Todos:</span>
<span class=sd>        We probably don&#39;t need OrderedDict. When data are loaded they</span>
<span class=sd>            are not ordered anymore.</span>

<span class=sd>    Returns:</span>
<span class=sd>        OrderedDict: Ordered dictionary with instance data.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>output</span> <span class=o>=</span> <span class=n>collections</span><span class=o>.</span><span class=n>OrderedDict</span><span class=p>()</span>
    <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
        <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=p>(</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>,</span> <span class=s2>&quot;publish_attributes&quot;</span><span class=p>):</span>
            <span class=k>continue</span>
        <span class=n>output</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>

    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>creator_attributes</span><span class=p>,</span> <span class=n>AttributeValues</span><span class=p>):</span>
        <span class=n>creator_attributes</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>creator_attributes</span><span class=o>.</span><span class=n>data_to_store</span><span class=p>()</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=n>creator_attributes</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>creator_attributes</span><span class=p>)</span>
    <span class=n>output</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>creator_attributes</span>
    <span class=n>output</span><span class=p>[</span><span class=s2>&quot;publish_attributes&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>publish_attributes</span><span class=o>.</span><span class=n>data_to_store</span><span class=p>()</span>

    <span class=k>return</span> <span class=n>output</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.structures.CreatedInstance.from_existing class="doc doc-heading"> <code class="highlight language-python"><span class=n>from_existing</span><span class=p>(</span><span class=n>instance_data</span><span class=p>,</span> <span class=n>creator</span><span class=p>,</span> <span class=n>transient_data</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Convert instance data from workfile to CreatedInstance.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>instance_data</code> </td> <td> <code><span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Data in a structure ready for 'CreatedInstance' object.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>creator</code> </td> <td> <code><a class="autorefs autorefs-internal" title="BaseCreator (client.ayon_core.pipeline.create.creator_plugins.BaseCreator)" href=creator_plugins.html#client.ayon_core.pipeline.create.creator_plugins.BaseCreator>BaseCreator</a></code> </td> <td> <div class=doc-md-description> <p>Creator plugin which is creating the instance of for which the instance belongs.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>transient_data</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=dict>dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]]</code> </td> <td> <div class=doc-md-description> <p>Instance transient data.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>CreatedInstance</code></td> <td> <code><a class="autorefs autorefs-internal" title="CreatedInstance (client.ayon_core.pipeline.create.structures.CreatedInstance)" href=#client.ayon_core.pipeline.create.structures.CreatedInstance>CreatedInstance</a></code> </td> <td> <div class=doc-md-description> <p>Instance object.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>796</span>
<span class=normal>797</span>
<span class=normal>798</span>
<span class=normal>799</span>
<span class=normal>800</span>
<span class=normal>801</span>
<span class=normal>802</span>
<span class=normal>803</span>
<span class=normal>804</span>
<span class=normal>805</span>
<span class=normal>806</span>
<span class=normal>807</span>
<span class=normal>808</span>
<span class=normal>809</span>
<span class=normal>810</span>
<span class=normal>811</span>
<span class=normal>812</span>
<span class=normal>813</span>
<span class=normal>814</span>
<span class=normal>815</span>
<span class=normal>816</span>
<span class=normal>817</span>
<span class=normal>818</span>
<span class=normal>819</span>
<span class=normal>820</span>
<span class=normal>821</span>
<span class=normal>822</span>
<span class=normal>823</span>
<span class=normal>824</span>
<span class=normal>825</span>
<span class=normal>826</span>
<span class=normal>827</span>
<span class=normal>828</span>
<span class=normal>829</span>
<span class=normal>830</span>
<span class=normal>831</span>
<span class=normal>832</span>
<span class=normal>833</span>
<span class=normal>834</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@classmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>from_existing</span><span class=p>(</span>
    <span class=bp>cls</span><span class=p>,</span>
    <span class=n>instance_data</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>],</span>
    <span class=n>creator</span><span class=p>:</span> <span class=s2>&quot;BaseCreator&quot;</span><span class=p>,</span>
    <span class=n>transient_data</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<span class=p>)</span> <span class=o>-&gt;</span> <span class=s2>&quot;CreatedInstance&quot;</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Convert instance data from workfile to CreatedInstance.</span>

<span class=sd>    Args:</span>
<span class=sd>        instance_data (Dict[str, Any]): Data in a structure ready for</span>
<span class=sd>            &#39;CreatedInstance&#39; object.</span>
<span class=sd>        creator (BaseCreator): Creator plugin which is creating the</span>
<span class=sd>            instance of for which the instance belongs.</span>
<span class=sd>        transient_data (Optional[dict[str, Any]]): Instance transient</span>
<span class=sd>            data.</span>

<span class=sd>    Returns:</span>
<span class=sd>        CreatedInstance: Instance object.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>instance_data</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=n>instance_data</span><span class=p>)</span>

    <span class=n>product_type</span> <span class=o>=</span> <span class=n>instance_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;productType&quot;</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>product_type</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>product_type</span> <span class=o>=</span> <span class=n>instance_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;family&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>product_type</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>product_type</span> <span class=o>=</span> <span class=n>creator</span><span class=o>.</span><span class=n>product_type</span>
    <span class=n>product_name</span> <span class=o>=</span> <span class=n>instance_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;productName&quot;</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>product_name</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>product_name</span> <span class=o>=</span> <span class=n>instance_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;subset&quot;</span><span class=p>)</span>

    <span class=k>return</span> <span class=bp>cls</span><span class=p>(</span>
        <span class=n>product_type</span><span class=p>,</span>
        <span class=n>product_name</span><span class=p>,</span>
        <span class=n>instance_data</span><span class=p>,</span>
        <span class=n>creator</span><span class=p>,</span>
        <span class=n>transient_data</span><span class=o>=</span><span class=n>transient_data</span><span class=p>,</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.structures.CreatedInstance.mark_as_stored class="doc doc-heading"> <code class="highlight language-python"><span class=n>mark_as_stored</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Should be called when instance data are stored.</p> <p>Origin data are replaced by current data so changes are cleared.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>689</span>
<span class=normal>690</span>
<span class=normal>691</span>
<span class=normal>692</span>
<span class=normal>693</span>
<span class=normal>694</span>
<span class=normal>695</span>
<span class=normal>696</span>
<span class=normal>697</span>
<span class=normal>698</span>
<span class=normal>699</span>
<span class=normal>700</span>
<span class=normal>701</span>
<span class=normal>702</span>
<span class=normal>703</span>
<span class=normal>704</span>
<span class=normal>705</span>
<span class=normal>706</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>mark_as_stored</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Should be called when instance data are stored.</span>

<span class=sd>    Origin data are replaced by current data so changes are cleared.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>orig_keys</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_orig_data</span><span class=o>.</span><span class=n>keys</span><span class=p>())</span>
    <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
        <span class=n>orig_keys</span><span class=o>.</span><span class=n>discard</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=p>(</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>,</span> <span class=s2>&quot;publish_attributes&quot;</span><span class=p>):</span>
            <span class=k>continue</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_orig_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>

    <span class=k>for</span> <span class=n>key</span> <span class=ow>in</span> <span class=n>orig_keys</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_orig_data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>creator_attributes</span><span class=o>.</span><span class=n>mark_as_stored</span><span class=p>()</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>publish_attributes</span><span class=o>.</span><span class=n>mark_as_stored</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.structures.CreatedInstance.publish_attribute_value_changed class="doc doc-heading"> <code class="highlight language-python"><span class=n>publish_attribute_value_changed</span><span class=p>(</span><span class=n>plugin_name</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Method called from PublishAttributes.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>plugin_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Plugin name.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>value</code> </td> <td> <code><span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Changes in values for the plugin.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>861</span>
<span class=normal>862</span>
<span class=normal>863</span>
<span class=normal>864</span>
<span class=normal>865</span>
<span class=normal>866</span>
<span class=normal>867</span>
<span class=normal>868</span>
<span class=normal>869</span>
<span class=normal>870</span>
<span class=normal>871</span>
<span class=normal>872</span>
<span class=normal>873</span>
<span class=normal>874</span>
<span class=normal>875</span>
<span class=normal>876</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>publish_attribute_value_changed</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>plugin_name</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Method called from PublishAttributes.</span>

<span class=sd>    Args:</span>
<span class=sd>        plugin_name (str): Plugin name.</span>
<span class=sd>        value (Dict[str, Any]): Changes in values for the plugin.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_create_context</span><span class=o>.</span><span class=n>instance_values_changed</span><span class=p>(</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
        <span class=p>{</span>
            <span class=s2>&quot;publish_attributes&quot;</span><span class=p>:</span> <span class=p>{</span>
                <span class=n>plugin_name</span><span class=p>:</span> <span class=n>value</span><span class=p>,</span>
            <span class=p>},</span>
        <span class=p>},</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.structures.CreatedInstance.set_create_attr_defs class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_create_attr_defs</span><span class=p>(</span><span class=n>attr_defs</span><span class=p>,</span> <span class=n>value</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Create plugin updates create attribute definitions.</p> <p>Method called by create plugin when attribute definitions should be changed.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>attr_defs</code> </td> <td> <code><span title=typing.List>List</span>[<span title=ayon_core.lib.attribute_definitions.AbstractAttrDef>AbstractAttrDef</span>]</code> </td> <td> <div class=doc-md-description> <p>Attribute definitions.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>value</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]]</code> </td> <td> <div class=doc-md-description> <p>Values of attribute definitions. Current values are used if not passed in.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>765</span>
<span class=normal>766</span>
<span class=normal>767</span>
<span class=normal>768</span>
<span class=normal>769</span>
<span class=normal>770</span>
<span class=normal>771</span>
<span class=normal>772</span>
<span class=normal>773</span>
<span class=normal>774</span>
<span class=normal>775</span>
<span class=normal>776</span>
<span class=normal>777</span>
<span class=normal>778</span>
<span class=normal>779</span>
<span class=normal>780</span>
<span class=normal>781</span>
<span class=normal>782</span>
<span class=normal>783</span>
<span class=normal>784</span>
<span class=normal>785</span>
<span class=normal>786</span>
<span class=normal>787</span>
<span class=normal>788</span>
<span class=normal>789</span>
<span class=normal>790</span>
<span class=normal>791</span>
<span class=normal>792</span>
<span class=normal>793</span>
<span class=normal>794</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_create_attr_defs</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>attr_defs</span><span class=p>,</span> <span class=n>value</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Create plugin updates create attribute definitions.</span>

<span class=sd>    Method called by create plugin when attribute definitions should</span>
<span class=sd>        be changed.</span>

<span class=sd>    Args:</span>
<span class=sd>        attr_defs (List[AbstractAttrDef]): Attribute definitions.</span>
<span class=sd>        value (Optional[Dict[str, Any]]): Values of attribute definitions.</span>
<span class=sd>            Current values are used if not passed in.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>value</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>]</span>

    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=n>AttributeValues</span><span class=p>):</span>
        <span class=n>value</span> <span class=o>=</span> <span class=n>value</span><span class=o>.</span><span class=n>data_to_store</span><span class=p>()</span>

    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>],</span> <span class=n>AttributeValues</span><span class=p>):</span>
        <span class=n>origin_data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>origin_data</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=n>origin_data</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>])</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>CreatorAttributeValues</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=s2>&quot;creator_attributes&quot;</span><span class=p>,</span>
        <span class=n>attr_defs</span><span class=p>,</span>
        <span class=n>value</span><span class=p>,</span>
        <span class=n>origin_data</span>
    <span class=p>)</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_create_context</span><span class=o>.</span><span class=n>instance_create_attr_defs_changed</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.structures.CreatedInstance.set_publish_plugin_attr_defs class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_publish_plugin_attr_defs</span><span class=p>(</span><span class=n>plugin_name</span><span class=p>,</span> <span class=n>attr_defs</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Set attribute definitions for publish plugin.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>plugin_name(str)</code> </td> <td> </td> <td> <div class=doc-md-description> <p>Name of publish plugin.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>attr_defs(List[AbstractAttrDef])</code> </td> <td> </td> <td> <div class=doc-md-description> <p>Attribute definitions.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>846</span>
<span class=normal>847</span>
<span class=normal>848</span>
<span class=normal>849</span>
<span class=normal>850</span>
<span class=normal>851</span>
<span class=normal>852</span>
<span class=normal>853</span>
<span class=normal>854</span>
<span class=normal>855</span>
<span class=normal>856</span>
<span class=normal>857</span>
<span class=normal>858</span>
<span class=normal>859</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_publish_plugin_attr_defs</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>plugin_name</span><span class=p>,</span> <span class=n>attr_defs</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Set attribute definitions for publish plugin.</span>

<span class=sd>    Args:</span>
<span class=sd>        plugin_name(str): Name of publish plugin.</span>
<span class=sd>        attr_defs(List[AbstractAttrDef]): Attribute definitions.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>publish_attributes</span><span class=o>.</span><span class=n>set_publish_plugin_attr_defs</span><span class=p>(</span>
        <span class=n>plugin_name</span><span class=p>,</span> <span class=n>attr_defs</span>
    <span class=p>)</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_create_context</span><span class=o>.</span><span class=n>instance_publish_attr_defs_changed</span><span class=p>(</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=n>plugin_name</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.create.structures.CreatorAttributeValues class="doc doc-heading"> <code>CreatorAttributeValues</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="AttributeValues (client.ayon_core.pipeline.create.structures.AttributeValues)" href=#client.ayon_core.pipeline.create.structures.AttributeValues>AttributeValues</a></code></p> <p>Creator specific attribute values of an instance.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>CreatorAttributeValues</span><span class=p>(</span><span class=n>AttributeValues</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Creator specific attribute values of an instance.&quot;&quot;&quot;</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>instance</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_parent</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.create.structures.InstanceMember class="doc doc-heading"> <code>InstanceMember</code> </h2> <div class="doc doc-contents "> <p>Representation of instance member.</p> <p>TODO: Implement and use!</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span>
<span class=normal>62</span>
<span class=normal>63</span>
<span class=normal>64</span>
<span class=normal>65</span>
<span class=normal>66</span>
<span class=normal>67</span>
<span class=normal>68</span>
<span class=normal>69</span>
<span class=normal>70</span>
<span class=normal>71</span>
<span class=normal>72</span>
<span class=normal>73</span>
<span class=normal>74</span>
<span class=normal>75</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>InstanceMember</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Representation of instance member.</span>

<span class=sd>    TODO:</span>
<span class=sd>    Implement and use!</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instance</span><span class=p>,</span> <span class=n>name</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>instance</span> <span class=o>=</span> <span class=n>instance</span>

        <span class=n>instance</span><span class=o>.</span><span class=n>add_members</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>name</span> <span class=o>=</span> <span class=n>name</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_actions</span> <span class=o>=</span> <span class=p>[]</span>

    <span class=k>def</span><span class=w> </span><span class=nf>add_action</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>label</span><span class=p>,</span> <span class=n>callback</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_actions</span><span class=o>.</span><span class=n>append</span><span class=p>({</span>
            <span class=s2>&quot;label&quot;</span><span class=p>:</span> <span class=n>label</span><span class=p>,</span>
            <span class=s2>&quot;callback&quot;</span><span class=p>:</span> <span class=n>callback</span>
        <span class=p>})</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.create.structures.PublishAttributeValues class="doc doc-heading"> <code>PublishAttributeValues</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="AttributeValues (client.ayon_core.pipeline.create.structures.AttributeValues)" href=#client.ayon_core.pipeline.create.structures.AttributeValues>AttributeValues</a></code></p> <p>Publish plugin specific attribute values.</p> <p>Values are for single plugin which can be on <code>CreatedInstance</code> or context values stored on <code>CreateContext</code>.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>PublishAttributeValues</span><span class=p>(</span><span class=n>AttributeValues</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Publish plugin specific attribute values.</span>

<span class=sd>    Values are for single plugin which can be on `CreatedInstance`</span>
<span class=sd>    or context values stored on `CreateContext`.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>publish_attributes</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_parent</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.create.structures.PublishAttributes class="doc doc-heading"> <code>PublishAttributes</code> </h2> <div class="doc doc-contents "> <p>Wrapper for publish plugin attribute definitions.</p> <p>Cares about handling attribute definitions of multiple publish plugins. Keep information about attribute definitions and their values.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>parent(CreatedInstance,</code> </td> <td> <code><a class="autorefs autorefs-internal" title="CreateContext (client.ayon_core.pipeline.create.context.CreateContext)" href=context.html#client.ayon_core.pipeline.create.context.CreateContext>CreateContext</a></code> </td> <td> <div class=doc-md-description> <p>Parent for which will be data stored and from which are data loaded.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>origin_data(dict)</code> </td> <td> </td> <td> <div class=doc-md-description> <p>Loaded data by plugin class name.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span>
<span class=normal>277</span>
<span class=normal>278</span>
<span class=normal>279</span>
<span class=normal>280</span>
<span class=normal>281</span>
<span class=normal>282</span>
<span class=normal>283</span>
<span class=normal>284</span>
<span class=normal>285</span>
<span class=normal>286</span>
<span class=normal>287</span>
<span class=normal>288</span>
<span class=normal>289</span>
<span class=normal>290</span>
<span class=normal>291</span>
<span class=normal>292</span>
<span class=normal>293</span>
<span class=normal>294</span>
<span class=normal>295</span>
<span class=normal>296</span>
<span class=normal>297</span>
<span class=normal>298</span>
<span class=normal>299</span>
<span class=normal>300</span>
<span class=normal>301</span>
<span class=normal>302</span>
<span class=normal>303</span>
<span class=normal>304</span>
<span class=normal>305</span>
<span class=normal>306</span>
<span class=normal>307</span>
<span class=normal>308</span>
<span class=normal>309</span>
<span class=normal>310</span>
<span class=normal>311</span>
<span class=normal>312</span>
<span class=normal>313</span>
<span class=normal>314</span>
<span class=normal>315</span>
<span class=normal>316</span>
<span class=normal>317</span>
<span class=normal>318</span>
<span class=normal>319</span>
<span class=normal>320</span>
<span class=normal>321</span>
<span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span>
<span class=normal>325</span>
<span class=normal>326</span>
<span class=normal>327</span>
<span class=normal>328</span>
<span class=normal>329</span>
<span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span>
<span class=normal>334</span>
<span class=normal>335</span>
<span class=normal>336</span>
<span class=normal>337</span>
<span class=normal>338</span>
<span class=normal>339</span>
<span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span>
<span class=normal>344</span>
<span class=normal>345</span>
<span class=normal>346</span>
<span class=normal>347</span>
<span class=normal>348</span>
<span class=normal>349</span>
<span class=normal>350</span>
<span class=normal>351</span>
<span class=normal>352</span>
<span class=normal>353</span>
<span class=normal>354</span>
<span class=normal>355</span>
<span class=normal>356</span>
<span class=normal>357</span>
<span class=normal>358</span>
<span class=normal>359</span>
<span class=normal>360</span>
<span class=normal>361</span>
<span class=normal>362</span>
<span class=normal>363</span>
<span class=normal>364</span>
<span class=normal>365</span>
<span class=normal>366</span>
<span class=normal>367</span>
<span class=normal>368</span>
<span class=normal>369</span>
<span class=normal>370</span>
<span class=normal>371</span>
<span class=normal>372</span>
<span class=normal>373</span>
<span class=normal>374</span>
<span class=normal>375</span>
<span class=normal>376</span>
<span class=normal>377</span>
<span class=normal>378</span>
<span class=normal>379</span>
<span class=normal>380</span>
<span class=normal>381</span>
<span class=normal>382</span>
<span class=normal>383</span>
<span class=normal>384</span>
<span class=normal>385</span>
<span class=normal>386</span>
<span class=normal>387</span>
<span class=normal>388</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>PublishAttributes</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Wrapper for publish plugin attribute definitions.</span>

<span class=sd>    Cares about handling attribute definitions of multiple publish plugins.</span>
<span class=sd>    Keep information about attribute definitions and their values.</span>

<span class=sd>    Args:</span>
<span class=sd>        parent(CreatedInstance, CreateContext): Parent for which will be</span>
<span class=sd>            data stored and from which are data loaded.</span>
<span class=sd>        origin_data(dict): Loaded data by plugin class name.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>parent</span><span class=p>,</span> <span class=n>origin_data</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_parent</span> <span class=o>=</span> <span class=n>parent</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_origin_data</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=n>origin_data</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=n>origin_data</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__getitem__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__contains__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span>

    <span class=k>def</span><span class=w> </span><span class=nf>keys</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>keys</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>values</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>values</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>items</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>items</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>default</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>pop</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Remove or reset value for plugin.</span>

<span class=sd>        Plugin values are reset to defaults if plugin is available but</span>
<span class=sd>        data of plugin which was not found are removed.</span>

<span class=sd>        Args:</span>
<span class=sd>            key(str): Plugin name.</span>
<span class=sd>            default: Default value if plugin was not found.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>if</span> <span class=n>key</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>default</span>

        <span class=n>value</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=n>AttributeValues</span><span class=p>):</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>attribute_value_changed</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>

        <span class=n>value_item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
        <span class=c1># Prepare value to return</span>
        <span class=n>output</span> <span class=o>=</span> <span class=n>value_item</span><span class=o>.</span><span class=n>data_to_store</span><span class=p>()</span>
        <span class=c1># Reset values</span>
        <span class=n>value_item</span><span class=o>.</span><span class=n>reset_values</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>attribute_value_changed</span><span class=p>(</span>
            <span class=n>key</span><span class=p>,</span> <span class=n>value_item</span><span class=o>.</span><span class=n>data_to_store</span><span class=p>()</span>
        <span class=p>)</span>
        <span class=k>return</span> <span class=n>output</span>

    <span class=k>def</span><span class=w> </span><span class=nf>mark_as_stored</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_origin_data</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>data_to_store</span><span class=p>())</span>

    <span class=k>def</span><span class=w> </span><span class=nf>data_to_store</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Convert attribute values to &quot;data to store&quot;.&quot;&quot;&quot;</span>
        <span class=n>output</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>attr_value</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>attr_value</span><span class=p>,</span> <span class=n>AttributeValues</span><span class=p>):</span>
                <span class=n>output</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>attr_value</span><span class=o>.</span><span class=n>data_to_store</span><span class=p>()</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=n>output</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>attr_value</span>
        <span class=k>return</span> <span class=n>output</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>origin_data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_origin_data</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>attribute_value_changed</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>changes</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_parent</span><span class=o>.</span><span class=n>publish_attribute_value_changed</span><span class=p>(</span><span class=n>key</span><span class=p>,</span>  <span class=n>changes</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_publish_plugin_attr_defs</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>plugin_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
        <span class=n>attr_defs</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>AbstractAttrDef</span><span class=p>],</span>
        <span class=n>value</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Set attribute definitions for plugin.</span>

<span class=sd>        Args:</span>
<span class=sd>            plugin_name (str): Name of plugin.</span>
<span class=sd>            attr_defs (List[AbstractAttrDef]): Attribute definitions.</span>
<span class=sd>            value (Optional[Dict[str, Any]]): Attribute values.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=c1># TODO what if &#39;attr_defs&#39; is &#39;None&#39;?</span>
        <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>value</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>plugin_name</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>value</span> <span class=o>=</span> <span class=p>{}</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=n>plugin_name</span><span class=p>]</span> <span class=o>=</span> <span class=n>PublishAttributeValues</span><span class=p>(</span>
            <span class=bp>self</span><span class=p>,</span> <span class=n>plugin_name</span><span class=p>,</span> <span class=n>attr_defs</span><span class=p>,</span> <span class=n>value</span><span class=p>,</span> <span class=n>value</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>serialize_attributes</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=p>{</span>
            <span class=s2>&quot;attr_defs&quot;</span><span class=p>:</span> <span class=p>{</span>
                <span class=n>plugin_name</span><span class=p>:</span> <span class=n>attrs_value</span><span class=o>.</span><span class=n>get_serialized_attr_defs</span><span class=p>()</span>
                <span class=k>for</span> <span class=n>plugin_name</span><span class=p>,</span> <span class=n>attrs_value</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>items</span><span class=p>()</span>
            <span class=p>},</span>
        <span class=p>}</span>

    <span class=k>def</span><span class=w> </span><span class=nf>deserialize_attributes</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>data</span><span class=p>):</span>
        <span class=n>attr_defs</span> <span class=o>=</span> <span class=n>deserialize_attr_defs</span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;attr_defs&quot;</span><span class=p>])</span>

        <span class=n>origin_data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_origin_data</span>
        <span class=n>data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span> <span class=o>=</span> <span class=p>{}</span>

        <span class=n>added_keys</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
        <span class=k>for</span> <span class=n>plugin_name</span><span class=p>,</span> <span class=n>attr_defs_data</span> <span class=ow>in</span> <span class=n>attr_defs</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=n>attr_defs</span> <span class=o>=</span> <span class=n>deserialize_attr_defs</span><span class=p>(</span><span class=n>attr_defs_data</span><span class=p>)</span>
            <span class=n>value</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>plugin_name</span><span class=p>)</span> <span class=ow>or</span> <span class=p>{}</span>
            <span class=n>orig_value</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=n>origin_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>plugin_name</span><span class=p>)</span> <span class=ow>or</span> <span class=p>{})</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=n>plugin_name</span><span class=p>]</span> <span class=o>=</span> <span class=n>PublishAttributeValues</span><span class=p>(</span>
                <span class=bp>self</span><span class=p>,</span> <span class=n>plugin_name</span><span class=p>,</span> <span class=n>attr_defs</span><span class=p>,</span> <span class=n>value</span><span class=p>,</span> <span class=n>orig_value</span>
            <span class=p>)</span>

        <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>data</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=k>if</span> <span class=n>key</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>added_keys</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.structures.PublishAttributes.data_to_store class="doc doc-heading"> <code class="highlight language-python"><span class=n>data_to_store</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Convert attribute values to "data to store".</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>320</span>
<span class=normal>321</span>
<span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span>
<span class=normal>325</span>
<span class=normal>326</span>
<span class=normal>327</span>
<span class=normal>328</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>data_to_store</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Convert attribute values to &quot;data to store&quot;.&quot;&quot;&quot;</span>
    <span class=n>output</span> <span class=o>=</span> <span class=p>{}</span>
    <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>attr_value</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>attr_value</span><span class=p>,</span> <span class=n>AttributeValues</span><span class=p>):</span>
            <span class=n>output</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>attr_value</span><span class=o>.</span><span class=n>data_to_store</span><span class=p>()</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>output</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>attr_value</span>
    <span class=k>return</span> <span class=n>output</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.structures.PublishAttributes.pop class="doc doc-heading"> <code class="highlight language-python"><span class=n>pop</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Remove or reset value for plugin.</p> <p>Plugin values are reset to defaults if plugin is available but data of plugin which was not found are removed.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>key(str)</code> </td> <td> </td> <td> <div class=doc-md-description> <p>Plugin name.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>default</code> </td> <td> </td> <td> <div class=doc-md-description> <p>Default value if plugin was not found.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>288</span>
<span class=normal>289</span>
<span class=normal>290</span>
<span class=normal>291</span>
<span class=normal>292</span>
<span class=normal>293</span>
<span class=normal>294</span>
<span class=normal>295</span>
<span class=normal>296</span>
<span class=normal>297</span>
<span class=normal>298</span>
<span class=normal>299</span>
<span class=normal>300</span>
<span class=normal>301</span>
<span class=normal>302</span>
<span class=normal>303</span>
<span class=normal>304</span>
<span class=normal>305</span>
<span class=normal>306</span>
<span class=normal>307</span>
<span class=normal>308</span>
<span class=normal>309</span>
<span class=normal>310</span>
<span class=normal>311</span>
<span class=normal>312</span>
<span class=normal>313</span>
<span class=normal>314</span>
<span class=normal>315</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>pop</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Remove or reset value for plugin.</span>

<span class=sd>    Plugin values are reset to defaults if plugin is available but</span>
<span class=sd>    data of plugin which was not found are removed.</span>

<span class=sd>    Args:</span>
<span class=sd>        key(str): Plugin name.</span>
<span class=sd>        default: Default value if plugin was not found.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>if</span> <span class=n>key</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>default</span>

    <span class=n>value</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=n>AttributeValues</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>attribute_value_changed</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>

    <span class=n>value_item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
    <span class=c1># Prepare value to return</span>
    <span class=n>output</span> <span class=o>=</span> <span class=n>value_item</span><span class=o>.</span><span class=n>data_to_store</span><span class=p>()</span>
    <span class=c1># Reset values</span>
    <span class=n>value_item</span><span class=o>.</span><span class=n>reset_values</span><span class=p>()</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>attribute_value_changed</span><span class=p>(</span>
        <span class=n>key</span><span class=p>,</span> <span class=n>value_item</span><span class=o>.</span><span class=n>data_to_store</span><span class=p>()</span>
    <span class=p>)</span>
    <span class=k>return</span> <span class=n>output</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.create.structures.PublishAttributes.set_publish_plugin_attr_defs class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_publish_plugin_attr_defs</span><span class=p>(</span><span class=n>plugin_name</span><span class=p>,</span> <span class=n>attr_defs</span><span class=p>,</span> <span class=n>value</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Set attribute definitions for plugin.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>plugin_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Name of plugin.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>attr_defs</code> </td> <td> <code><span title=typing.List>List</span>[<span title=ayon_core.lib.attribute_definitions.AbstractAttrDef>AbstractAttrDef</span>]</code> </td> <td> <div class=doc-md-description> <p>Attribute definitions.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>value</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]]</code> </td> <td> <div class=doc-md-description> <p>Attribute values.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>337</span>
<span class=normal>338</span>
<span class=normal>339</span>
<span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span>
<span class=normal>344</span>
<span class=normal>345</span>
<span class=normal>346</span>
<span class=normal>347</span>
<span class=normal>348</span>
<span class=normal>349</span>
<span class=normal>350</span>
<span class=normal>351</span>
<span class=normal>352</span>
<span class=normal>353</span>
<span class=normal>354</span>
<span class=normal>355</span>
<span class=normal>356</span>
<span class=normal>357</span>
<span class=normal>358</span>
<span class=normal>359</span>
<span class=normal>360</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_publish_plugin_attr_defs</span><span class=p>(</span>
    <span class=bp>self</span><span class=p>,</span>
    <span class=n>plugin_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
    <span class=n>attr_defs</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>AbstractAttrDef</span><span class=p>],</span>
    <span class=n>value</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Set attribute definitions for plugin.</span>

<span class=sd>    Args:</span>
<span class=sd>        plugin_name (str): Name of plugin.</span>
<span class=sd>        attr_defs (List[AbstractAttrDef]): Attribute definitions.</span>
<span class=sd>        value (Optional[Dict[str, Any]]): Attribute values.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=c1># TODO what if &#39;attr_defs&#39; is &#39;None&#39;?</span>
    <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>value</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>plugin_name</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>value</span> <span class=o>=</span> <span class=p>{}</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=n>plugin_name</span><span class=p>]</span> <span class=o>=</span> <span class=n>PublishAttributeValues</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span> <span class=n>plugin_name</span><span class=p>,</span> <span class=n>attr_defs</span><span class=p>,</span> <span class=n>value</span><span class=p>,</span> <span class=n>value</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> </div> </div> </div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../../..", "features": ["navigation.sections", "navigation.path", "navigation.prune"], "search": "../../../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../../../../assets/javascripts/bundle.c8b220af.min.js></script> </body> </html>