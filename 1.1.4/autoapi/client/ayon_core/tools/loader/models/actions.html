<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=prev href=index.html><link rel=next href=products.html><link rel=icon href=../../../../../../img/favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.8"><title>actions - ayon-core</title><link rel=stylesheet href=../../../../../../assets/stylesheets/main.8608ea7d.min.css><link rel=stylesheet href=../../../../../../assets/stylesheets/palette.06af60db.min.css><script src=https://unpkg.com/iframe-worker/shim></script><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../../../../assets/_mkdocstrings.css><link rel=stylesheet href=../../../../../../css/custom.css><script>__md_scope=new URL("../../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#client.ayon_core.tools.loader.models.actions class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../../../../index.html title=ayon-core class="md-header__button md-logo" aria-label=ayon-core data-md-component=logo> <img src=../../../../../../img/ay-symbol-blackw-full.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> ayon-core </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> actions </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../../../../index.html title=ayon-core class="md-nav__button md-logo" aria-label=ayon-core data-md-component=logo> <img src=../../../../../../img/ay-symbol-blackw-full.png alt=logo> </a> ayon-core </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../../index.html class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../../../../../../license.html class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1 checked> <div class="md-nav__link md-nav__container"> <a href=../../../../index.html class="md-nav__link "> <span class=md-ellipsis> client </span> </a> <label class="md-nav__link " for=__nav_3_1 id=__nav_3_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> client </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1 checked> <div class="md-nav__link md-nav__container"> <a href=../../../index.html class="md-nav__link "> <span class=md-ellipsis> ayon_core </span> </a> <label class="md-nav__link " for=__nav_3_1_1 id=__nav_3_1_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_1_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1> <span class="md-nav__icon md-icon"></span> ayon_core </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../__main__.html class=md-nav__link> <span class=md-ellipsis> __main__ </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../addon/base.html class=md-nav__link> <span class=md-ellipsis> addon </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../../../cli.html class=md-nav__link> <span class=md-ellipsis> cli </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../hooks/pre_add_last_workfile_arg.html class=md-nav__link> <span class=md-ellipsis> hooks </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../host/dirmap.html class=md-nav__link> <span class=md-ellipsis> host </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../lib/attribute_definitions.html class=md-nav__link> <span class=md-ellipsis> lib </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../pipeline/actions.html class=md-nav__link> <span class=md-ellipsis> pipeline </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../plugins/actions/open_file_explorer.html class=md-nav__link> <span class=md-ellipsis> plugins </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../resources/app_icons/index.html class=md-nav__link> <span class=md-ellipsis> resources </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../scripts/ocio_wrapper.html class=md-nav__link> <span class=md-ellipsis> scripts </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../settings/lib.html class=md-nav__link> <span class=md-ellipsis> settings </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../style/color_defs.html class=md-nav__link> <span class=md-ellipsis> style </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../tests/conftest.html class=md-nav__link> <span class=md-ellipsis> tests </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1_14 checked> <div class="md-nav__link md-nav__container"> <a href=../../index.html class="md-nav__link "> <span class=md-ellipsis> tools </span> </a> <label class="md-nav__link " for=__nav_3_1_1_14 id=__nav_3_1_1_14_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_1_1_14_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1_14> <span class="md-nav__icon md-icon"></span> tools </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../attribute_defs/_constants.html class=md-nav__link> <span class=md-ellipsis> attribute_defs </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../common_models/cache.html class=md-nav__link> <span class=md-ellipsis> common_models </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../console_interpreter/abstract.html class=md-nav__link> <span class=md-ellipsis> console_interpreter </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../context_dialog/window.html class=md-nav__link> <span class=md-ellipsis> context_dialog </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../creator/constants.html class=md-nav__link> <span class=md-ellipsis> creator </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../experimental_tools/dialog.html class=md-nav__link> <span class=md-ellipsis> experimental_tools </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../../flickcharm.html class=md-nav__link> <span class=md-ellipsis> flickcharm </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../launcher/abstract.html class=md-nav__link> <span class=md-ellipsis> launcher </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1_14_9 checked> <div class="md-nav__link md-nav__container"> <a href=../index.html class="md-nav__link "> <span class=md-ellipsis> loader </span> </a> <label class="md-nav__link " for=__nav_3_1_1_14_9 id=__nav_3_1_1_14_9_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=5 aria-labelledby=__nav_3_1_1_14_9_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1_14_9> <span class="md-nav__icon md-icon"></span> loader </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../abstract.html class=md-nav__link> <span class=md-ellipsis> abstract </span> </a> </li> <li class=md-nav__item> <a href=../control.html class=md-nav__link> <span class=md-ellipsis> control </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1_14_9_3 checked> <div class="md-nav__link md-nav__container"> <a href=index.html class="md-nav__link "> <span class=md-ellipsis> models </span> </a> <label class="md-nav__link " for=__nav_3_1_1_14_9_3 id=__nav_3_1_1_14_9_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=6 aria-labelledby=__nav_3_1_1_14_9_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1_14_9_3> <span class="md-nav__icon md-icon"></span> models </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> actions </span> <span class="md-nav__icon md-icon"></span> </label> <a href=actions.html class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> actions </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#client.ayon_core.tools.loader.models.actions class=md-nav__link> <span class=md-ellipsis> actions </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.loader.models.actions.LoaderActionsModel class=md-nav__link> <span class=md-ellipsis> LoaderActionsModel </span> </a> <nav class=md-nav aria-label=LoaderActionsModel> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.tools.loader.models.actions.LoaderActionsModel._actions_sorter class=md-nav__link> <span class=md-ellipsis> _actions_sorter </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.loader.models.actions.LoaderActionsModel._contexts_for_representations class=md-nav__link> <span class=md-ellipsis> _contexts_for_representations </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.loader.models.actions.LoaderActionsModel._contexts_for_versions class=md-nav__link> <span class=md-ellipsis> _contexts_for_versions </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.loader.models.actions.LoaderActionsModel._filter_loaders_by_tool_name class=md-nav__link> <span class=md-ellipsis> _filter_loaders_by_tool_name </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.loader.models.actions.LoaderActionsModel._get_action_icon class=md-nav__link> <span class=md-ellipsis> _get_action_icon </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.loader.models.actions.LoaderActionsModel._get_action_items_for_contexts class=md-nav__link> <span class=md-ellipsis> _get_action_items_for_contexts </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.loader.models.actions.LoaderActionsModel._get_action_label class=md-nav__link> <span class=md-ellipsis> _get_action_label </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.loader.models.actions.LoaderActionsModel._get_action_tooltip class=md-nav__link> <span class=md-ellipsis> _get_action_tooltip </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.loader.models.actions.LoaderActionsModel._get_current_context_project class=md-nav__link> <span class=md-ellipsis> _get_current_context_project </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.loader.models.actions.LoaderActionsModel._get_loaders class=md-nav__link> <span class=md-ellipsis> _get_loaders </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.loader.models.actions.LoaderActionsModel._load_products_by_loader class=md-nav__link> <span class=md-ellipsis> _load_products_by_loader </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.loader.models.actions.LoaderActionsModel._load_representations_by_loader class=md-nav__link> <span class=md-ellipsis> _load_representations_by_loader </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.loader.models.actions.LoaderActionsModel._trigger_representation_loader class=md-nav__link> <span class=md-ellipsis> _trigger_representation_loader </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.loader.models.actions.LoaderActionsModel._trigger_version_loader class=md-nav__link> <span class=md-ellipsis> _trigger_version_loader </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.loader.models.actions.LoaderActionsModel.get_representations_action_items class=md-nav__link> <span class=md-ellipsis> get_representations_action_items </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.loader.models.actions.LoaderActionsModel.get_versions_action_items class=md-nav__link> <span class=md-ellipsis> get_versions_action_items </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.loader.models.actions.LoaderActionsModel.reset class=md-nav__link> <span class=md-ellipsis> reset </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.loader.models.actions.LoaderActionsModel.trigger_action_item class=md-nav__link> <span class=md-ellipsis> trigger_action_item </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=products.html class=md-nav__link> <span class=md-ellipsis> products </span> </a> </li> <li class=md-nav__item> <a href=selection.html class=md-nav__link> <span class=md-ellipsis> selection </span> </a> </li> <li class=md-nav__item> <a href=sitesync.html class=md-nav__link> <span class=md-ellipsis> sitesync </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../ui/_multicombobox.html class=md-nav__link> <span class=md-ellipsis> ui </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../publisher/abstract.html class=md-nav__link> <span class=md-ellipsis> publisher </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../push_to_project/control.html class=md-nav__link> <span class=md-ellipsis> push_to_project </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../resources/images/index.html class=md-nav__link> <span class=md-ellipsis> resources </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../sceneinventory/control.html class=md-nav__link> <span class=md-ellipsis> sceneinventory </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../stdout_broker/app.html class=md-nav__link> <span class=md-ellipsis> stdout_broker </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../subsetmanager/model.html class=md-nav__link> <span class=md-ellipsis> subsetmanager </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../texture_copy/app.html class=md-nav__link> <span class=md-ellipsis> texture_copy </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../tray/lib.html class=md-nav__link> <span class=md-ellipsis> tray </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../utils/color_widgets/color_inputs.html class=md-nav__link> <span class=md-ellipsis> utils </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../workfile_template_build/lib.html class=md-nav__link> <span class=md-ellipsis> workfile_template_build </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../workfiles/abstract.html class=md-nav__link> <span class=md-ellipsis> workfiles </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../vendor/python/qargparse.html class=md-nav__link> <span class=md-ellipsis> vendor </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../../../version.html class=md-nav__link> <span class=md-ellipsis> version </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../../server/settings/conversion.html class=md-nav__link> <span class=md-ellipsis> server </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#client.ayon_core.tools.loader.models.actions class=md-nav__link> <span class=md-ellipsis> actions </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.loader.models.actions.LoaderActionsModel class=md-nav__link> <span class=md-ellipsis> LoaderActionsModel </span> </a> <nav class=md-nav aria-label=LoaderActionsModel> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.tools.loader.models.actions.LoaderActionsModel._actions_sorter class=md-nav__link> <span class=md-ellipsis> _actions_sorter </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.loader.models.actions.LoaderActionsModel._contexts_for_representations class=md-nav__link> <span class=md-ellipsis> _contexts_for_representations </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.loader.models.actions.LoaderActionsModel._contexts_for_versions class=md-nav__link> <span class=md-ellipsis> _contexts_for_versions </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.loader.models.actions.LoaderActionsModel._filter_loaders_by_tool_name class=md-nav__link> <span class=md-ellipsis> _filter_loaders_by_tool_name </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.loader.models.actions.LoaderActionsModel._get_action_icon class=md-nav__link> <span class=md-ellipsis> _get_action_icon </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.loader.models.actions.LoaderActionsModel._get_action_items_for_contexts class=md-nav__link> <span class=md-ellipsis> _get_action_items_for_contexts </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.loader.models.actions.LoaderActionsModel._get_action_label class=md-nav__link> <span class=md-ellipsis> _get_action_label </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.loader.models.actions.LoaderActionsModel._get_action_tooltip class=md-nav__link> <span class=md-ellipsis> _get_action_tooltip </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.loader.models.actions.LoaderActionsModel._get_current_context_project class=md-nav__link> <span class=md-ellipsis> _get_current_context_project </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.loader.models.actions.LoaderActionsModel._get_loaders class=md-nav__link> <span class=md-ellipsis> _get_loaders </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.loader.models.actions.LoaderActionsModel._load_products_by_loader class=md-nav__link> <span class=md-ellipsis> _load_products_by_loader </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.loader.models.actions.LoaderActionsModel._load_representations_by_loader class=md-nav__link> <span class=md-ellipsis> _load_representations_by_loader </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.loader.models.actions.LoaderActionsModel._trigger_representation_loader class=md-nav__link> <span class=md-ellipsis> _trigger_representation_loader </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.loader.models.actions.LoaderActionsModel._trigger_version_loader class=md-nav__link> <span class=md-ellipsis> _trigger_version_loader </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.loader.models.actions.LoaderActionsModel.get_representations_action_items class=md-nav__link> <span class=md-ellipsis> get_representations_action_items </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.loader.models.actions.LoaderActionsModel.get_versions_action_items class=md-nav__link> <span class=md-ellipsis> get_versions_action_items </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.loader.models.actions.LoaderActionsModel.reset class=md-nav__link> <span class=md-ellipsis> reset </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.loader.models.actions.LoaderActionsModel.trigger_action_item class=md-nav__link> <span class=md-ellipsis> trigger_action_item </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>actions</h1> <div class="doc doc-object doc-module"> <a id=client.ayon_core.tools.loader.models.actions></a> <div class="doc doc-contents first"> <div class="doc doc-children"> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.tools.loader.models.actions.LoaderActionsModel class="doc doc-heading"> <code>LoaderActionsModel</code> </h2> <div class="doc doc-contents "> <p>Model for loader actions.</p> <details class=todos open> <summary>TODOs</summary> <p>Deprecate 'qargparse' usage in loaders and implement conversion of 'ActionItem' to data (and 'from_data'). Use controller to get entities -&gt; possible only when loaders are able to handle AYON vs. OpenPype logic. Add missing site sync logic, and if possible remove it from loaders. Implement loader actions to replace load plugins. Ask loader actions to return action items instead of guessing them.</p> </details> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/loader/models/actions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 27</span>
<span class=normal> 28</span>
<span class=normal> 29</span>
<span class=normal> 30</span>
<span class=normal> 31</span>
<span class=normal> 32</span>
<span class=normal> 33</span>
<span class=normal> 34</span>
<span class=normal> 35</span>
<span class=normal> 36</span>
<span class=normal> 37</span>
<span class=normal> 38</span>
<span class=normal> 39</span>
<span class=normal> 40</span>
<span class=normal> 41</span>
<span class=normal> 42</span>
<span class=normal> 43</span>
<span class=normal> 44</span>
<span class=normal> 45</span>
<span class=normal> 46</span>
<span class=normal> 47</span>
<span class=normal> 48</span>
<span class=normal> 49</span>
<span class=normal> 50</span>
<span class=normal> 51</span>
<span class=normal> 52</span>
<span class=normal> 53</span>
<span class=normal> 54</span>
<span class=normal> 55</span>
<span class=normal> 56</span>
<span class=normal> 57</span>
<span class=normal> 58</span>
<span class=normal> 59</span>
<span class=normal> 60</span>
<span class=normal> 61</span>
<span class=normal> 62</span>
<span class=normal> 63</span>
<span class=normal> 64</span>
<span class=normal> 65</span>
<span class=normal> 66</span>
<span class=normal> 67</span>
<span class=normal> 68</span>
<span class=normal> 69</span>
<span class=normal> 70</span>
<span class=normal> 71</span>
<span class=normal> 72</span>
<span class=normal> 73</span>
<span class=normal> 74</span>
<span class=normal> 75</span>
<span class=normal> 76</span>
<span class=normal> 77</span>
<span class=normal> 78</span>
<span class=normal> 79</span>
<span class=normal> 80</span>
<span class=normal> 81</span>
<span class=normal> 82</span>
<span class=normal> 83</span>
<span class=normal> 84</span>
<span class=normal> 85</span>
<span class=normal> 86</span>
<span class=normal> 87</span>
<span class=normal> 88</span>
<span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span>
<span class=normal>277</span>
<span class=normal>278</span>
<span class=normal>279</span>
<span class=normal>280</span>
<span class=normal>281</span>
<span class=normal>282</span>
<span class=normal>283</span>
<span class=normal>284</span>
<span class=normal>285</span>
<span class=normal>286</span>
<span class=normal>287</span>
<span class=normal>288</span>
<span class=normal>289</span>
<span class=normal>290</span>
<span class=normal>291</span>
<span class=normal>292</span>
<span class=normal>293</span>
<span class=normal>294</span>
<span class=normal>295</span>
<span class=normal>296</span>
<span class=normal>297</span>
<span class=normal>298</span>
<span class=normal>299</span>
<span class=normal>300</span>
<span class=normal>301</span>
<span class=normal>302</span>
<span class=normal>303</span>
<span class=normal>304</span>
<span class=normal>305</span>
<span class=normal>306</span>
<span class=normal>307</span>
<span class=normal>308</span>
<span class=normal>309</span>
<span class=normal>310</span>
<span class=normal>311</span>
<span class=normal>312</span>
<span class=normal>313</span>
<span class=normal>314</span>
<span class=normal>315</span>
<span class=normal>316</span>
<span class=normal>317</span>
<span class=normal>318</span>
<span class=normal>319</span>
<span class=normal>320</span>
<span class=normal>321</span>
<span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span>
<span class=normal>325</span>
<span class=normal>326</span>
<span class=normal>327</span>
<span class=normal>328</span>
<span class=normal>329</span>
<span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span>
<span class=normal>334</span>
<span class=normal>335</span>
<span class=normal>336</span>
<span class=normal>337</span>
<span class=normal>338</span>
<span class=normal>339</span>
<span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span>
<span class=normal>344</span>
<span class=normal>345</span>
<span class=normal>346</span>
<span class=normal>347</span>
<span class=normal>348</span>
<span class=normal>349</span>
<span class=normal>350</span>
<span class=normal>351</span>
<span class=normal>352</span>
<span class=normal>353</span>
<span class=normal>354</span>
<span class=normal>355</span>
<span class=normal>356</span>
<span class=normal>357</span>
<span class=normal>358</span>
<span class=normal>359</span>
<span class=normal>360</span>
<span class=normal>361</span>
<span class=normal>362</span>
<span class=normal>363</span>
<span class=normal>364</span>
<span class=normal>365</span>
<span class=normal>366</span>
<span class=normal>367</span>
<span class=normal>368</span>
<span class=normal>369</span>
<span class=normal>370</span>
<span class=normal>371</span>
<span class=normal>372</span>
<span class=normal>373</span>
<span class=normal>374</span>
<span class=normal>375</span>
<span class=normal>376</span>
<span class=normal>377</span>
<span class=normal>378</span>
<span class=normal>379</span>
<span class=normal>380</span>
<span class=normal>381</span>
<span class=normal>382</span>
<span class=normal>383</span>
<span class=normal>384</span>
<span class=normal>385</span>
<span class=normal>386</span>
<span class=normal>387</span>
<span class=normal>388</span>
<span class=normal>389</span>
<span class=normal>390</span>
<span class=normal>391</span>
<span class=normal>392</span>
<span class=normal>393</span>
<span class=normal>394</span>
<span class=normal>395</span>
<span class=normal>396</span>
<span class=normal>397</span>
<span class=normal>398</span>
<span class=normal>399</span>
<span class=normal>400</span>
<span class=normal>401</span>
<span class=normal>402</span>
<span class=normal>403</span>
<span class=normal>404</span>
<span class=normal>405</span>
<span class=normal>406</span>
<span class=normal>407</span>
<span class=normal>408</span>
<span class=normal>409</span>
<span class=normal>410</span>
<span class=normal>411</span>
<span class=normal>412</span>
<span class=normal>413</span>
<span class=normal>414</span>
<span class=normal>415</span>
<span class=normal>416</span>
<span class=normal>417</span>
<span class=normal>418</span>
<span class=normal>419</span>
<span class=normal>420</span>
<span class=normal>421</span>
<span class=normal>422</span>
<span class=normal>423</span>
<span class=normal>424</span>
<span class=normal>425</span>
<span class=normal>426</span>
<span class=normal>427</span>
<span class=normal>428</span>
<span class=normal>429</span>
<span class=normal>430</span>
<span class=normal>431</span>
<span class=normal>432</span>
<span class=normal>433</span>
<span class=normal>434</span>
<span class=normal>435</span>
<span class=normal>436</span>
<span class=normal>437</span>
<span class=normal>438</span>
<span class=normal>439</span>
<span class=normal>440</span>
<span class=normal>441</span>
<span class=normal>442</span>
<span class=normal>443</span>
<span class=normal>444</span>
<span class=normal>445</span>
<span class=normal>446</span>
<span class=normal>447</span>
<span class=normal>448</span>
<span class=normal>449</span>
<span class=normal>450</span>
<span class=normal>451</span>
<span class=normal>452</span>
<span class=normal>453</span>
<span class=normal>454</span>
<span class=normal>455</span>
<span class=normal>456</span>
<span class=normal>457</span>
<span class=normal>458</span>
<span class=normal>459</span>
<span class=normal>460</span>
<span class=normal>461</span>
<span class=normal>462</span>
<span class=normal>463</span>
<span class=normal>464</span>
<span class=normal>465</span>
<span class=normal>466</span>
<span class=normal>467</span>
<span class=normal>468</span>
<span class=normal>469</span>
<span class=normal>470</span>
<span class=normal>471</span>
<span class=normal>472</span>
<span class=normal>473</span>
<span class=normal>474</span>
<span class=normal>475</span>
<span class=normal>476</span>
<span class=normal>477</span>
<span class=normal>478</span>
<span class=normal>479</span>
<span class=normal>480</span>
<span class=normal>481</span>
<span class=normal>482</span>
<span class=normal>483</span>
<span class=normal>484</span>
<span class=normal>485</span>
<span class=normal>486</span>
<span class=normal>487</span>
<span class=normal>488</span>
<span class=normal>489</span>
<span class=normal>490</span>
<span class=normal>491</span>
<span class=normal>492</span>
<span class=normal>493</span>
<span class=normal>494</span>
<span class=normal>495</span>
<span class=normal>496</span>
<span class=normal>497</span>
<span class=normal>498</span>
<span class=normal>499</span>
<span class=normal>500</span>
<span class=normal>501</span>
<span class=normal>502</span>
<span class=normal>503</span>
<span class=normal>504</span>
<span class=normal>505</span>
<span class=normal>506</span>
<span class=normal>507</span>
<span class=normal>508</span>
<span class=normal>509</span>
<span class=normal>510</span>
<span class=normal>511</span>
<span class=normal>512</span>
<span class=normal>513</span>
<span class=normal>514</span>
<span class=normal>515</span>
<span class=normal>516</span>
<span class=normal>517</span>
<span class=normal>518</span>
<span class=normal>519</span>
<span class=normal>520</span>
<span class=normal>521</span>
<span class=normal>522</span>
<span class=normal>523</span>
<span class=normal>524</span>
<span class=normal>525</span>
<span class=normal>526</span>
<span class=normal>527</span>
<span class=normal>528</span>
<span class=normal>529</span>
<span class=normal>530</span>
<span class=normal>531</span>
<span class=normal>532</span>
<span class=normal>533</span>
<span class=normal>534</span>
<span class=normal>535</span>
<span class=normal>536</span>
<span class=normal>537</span>
<span class=normal>538</span>
<span class=normal>539</span>
<span class=normal>540</span>
<span class=normal>541</span>
<span class=normal>542</span>
<span class=normal>543</span>
<span class=normal>544</span>
<span class=normal>545</span>
<span class=normal>546</span>
<span class=normal>547</span>
<span class=normal>548</span>
<span class=normal>549</span>
<span class=normal>550</span>
<span class=normal>551</span>
<span class=normal>552</span>
<span class=normal>553</span>
<span class=normal>554</span>
<span class=normal>555</span>
<span class=normal>556</span>
<span class=normal>557</span>
<span class=normal>558</span>
<span class=normal>559</span>
<span class=normal>560</span>
<span class=normal>561</span>
<span class=normal>562</span>
<span class=normal>563</span>
<span class=normal>564</span>
<span class=normal>565</span>
<span class=normal>566</span>
<span class=normal>567</span>
<span class=normal>568</span>
<span class=normal>569</span>
<span class=normal>570</span>
<span class=normal>571</span>
<span class=normal>572</span>
<span class=normal>573</span>
<span class=normal>574</span>
<span class=normal>575</span>
<span class=normal>576</span>
<span class=normal>577</span>
<span class=normal>578</span>
<span class=normal>579</span>
<span class=normal>580</span>
<span class=normal>581</span>
<span class=normal>582</span>
<span class=normal>583</span>
<span class=normal>584</span>
<span class=normal>585</span>
<span class=normal>586</span>
<span class=normal>587</span>
<span class=normal>588</span>
<span class=normal>589</span>
<span class=normal>590</span>
<span class=normal>591</span>
<span class=normal>592</span>
<span class=normal>593</span>
<span class=normal>594</span>
<span class=normal>595</span>
<span class=normal>596</span>
<span class=normal>597</span>
<span class=normal>598</span>
<span class=normal>599</span>
<span class=normal>600</span>
<span class=normal>601</span>
<span class=normal>602</span>
<span class=normal>603</span>
<span class=normal>604</span>
<span class=normal>605</span>
<span class=normal>606</span>
<span class=normal>607</span>
<span class=normal>608</span>
<span class=normal>609</span>
<span class=normal>610</span>
<span class=normal>611</span>
<span class=normal>612</span>
<span class=normal>613</span>
<span class=normal>614</span>
<span class=normal>615</span>
<span class=normal>616</span>
<span class=normal>617</span>
<span class=normal>618</span>
<span class=normal>619</span>
<span class=normal>620</span>
<span class=normal>621</span>
<span class=normal>622</span>
<span class=normal>623</span>
<span class=normal>624</span>
<span class=normal>625</span>
<span class=normal>626</span>
<span class=normal>627</span>
<span class=normal>628</span>
<span class=normal>629</span>
<span class=normal>630</span>
<span class=normal>631</span>
<span class=normal>632</span>
<span class=normal>633</span>
<span class=normal>634</span>
<span class=normal>635</span>
<span class=normal>636</span>
<span class=normal>637</span>
<span class=normal>638</span>
<span class=normal>639</span>
<span class=normal>640</span>
<span class=normal>641</span>
<span class=normal>642</span>
<span class=normal>643</span>
<span class=normal>644</span>
<span class=normal>645</span>
<span class=normal>646</span>
<span class=normal>647</span>
<span class=normal>648</span>
<span class=normal>649</span>
<span class=normal>650</span>
<span class=normal>651</span>
<span class=normal>652</span>
<span class=normal>653</span>
<span class=normal>654</span>
<span class=normal>655</span>
<span class=normal>656</span>
<span class=normal>657</span>
<span class=normal>658</span>
<span class=normal>659</span>
<span class=normal>660</span>
<span class=normal>661</span>
<span class=normal>662</span>
<span class=normal>663</span>
<span class=normal>664</span>
<span class=normal>665</span>
<span class=normal>666</span>
<span class=normal>667</span>
<span class=normal>668</span>
<span class=normal>669</span>
<span class=normal>670</span>
<span class=normal>671</span>
<span class=normal>672</span>
<span class=normal>673</span>
<span class=normal>674</span>
<span class=normal>675</span>
<span class=normal>676</span>
<span class=normal>677</span>
<span class=normal>678</span>
<span class=normal>679</span>
<span class=normal>680</span>
<span class=normal>681</span>
<span class=normal>682</span>
<span class=normal>683</span>
<span class=normal>684</span>
<span class=normal>685</span>
<span class=normal>686</span>
<span class=normal>687</span>
<span class=normal>688</span>
<span class=normal>689</span>
<span class=normal>690</span>
<span class=normal>691</span>
<span class=normal>692</span>
<span class=normal>693</span>
<span class=normal>694</span>
<span class=normal>695</span>
<span class=normal>696</span>
<span class=normal>697</span>
<span class=normal>698</span>
<span class=normal>699</span>
<span class=normal>700</span>
<span class=normal>701</span>
<span class=normal>702</span>
<span class=normal>703</span>
<span class=normal>704</span>
<span class=normal>705</span>
<span class=normal>706</span>
<span class=normal>707</span>
<span class=normal>708</span>
<span class=normal>709</span>
<span class=normal>710</span>
<span class=normal>711</span>
<span class=normal>712</span>
<span class=normal>713</span>
<span class=normal>714</span>
<span class=normal>715</span>
<span class=normal>716</span>
<span class=normal>717</span>
<span class=normal>718</span>
<span class=normal>719</span>
<span class=normal>720</span>
<span class=normal>721</span>
<span class=normal>722</span>
<span class=normal>723</span>
<span class=normal>724</span>
<span class=normal>725</span>
<span class=normal>726</span>
<span class=normal>727</span>
<span class=normal>728</span>
<span class=normal>729</span>
<span class=normal>730</span>
<span class=normal>731</span>
<span class=normal>732</span>
<span class=normal>733</span>
<span class=normal>734</span>
<span class=normal>735</span>
<span class=normal>736</span>
<span class=normal>737</span>
<span class=normal>738</span>
<span class=normal>739</span>
<span class=normal>740</span>
<span class=normal>741</span>
<span class=normal>742</span>
<span class=normal>743</span>
<span class=normal>744</span>
<span class=normal>745</span>
<span class=normal>746</span>
<span class=normal>747</span>
<span class=normal>748</span>
<span class=normal>749</span>
<span class=normal>750</span>
<span class=normal>751</span>
<span class=normal>752</span>
<span class=normal>753</span>
<span class=normal>754</span>
<span class=normal>755</span>
<span class=normal>756</span>
<span class=normal>757</span>
<span class=normal>758</span>
<span class=normal>759</span>
<span class=normal>760</span>
<span class=normal>761</span>
<span class=normal>762</span>
<span class=normal>763</span>
<span class=normal>764</span>
<span class=normal>765</span>
<span class=normal>766</span>
<span class=normal>767</span>
<span class=normal>768</span>
<span class=normal>769</span>
<span class=normal>770</span>
<span class=normal>771</span>
<span class=normal>772</span>
<span class=normal>773</span>
<span class=normal>774</span>
<span class=normal>775</span>
<span class=normal>776</span>
<span class=normal>777</span>
<span class=normal>778</span>
<span class=normal>779</span>
<span class=normal>780</span>
<span class=normal>781</span>
<span class=normal>782</span>
<span class=normal>783</span>
<span class=normal>784</span>
<span class=normal>785</span>
<span class=normal>786</span>
<span class=normal>787</span>
<span class=normal>788</span>
<span class=normal>789</span>
<span class=normal>790</span>
<span class=normal>791</span>
<span class=normal>792</span>
<span class=normal>793</span>
<span class=normal>794</span>
<span class=normal>795</span>
<span class=normal>796</span>
<span class=normal>797</span>
<span class=normal>798</span>
<span class=normal>799</span>
<span class=normal>800</span>
<span class=normal>801</span>
<span class=normal>802</span>
<span class=normal>803</span>
<span class=normal>804</span>
<span class=normal>805</span>
<span class=normal>806</span>
<span class=normal>807</span>
<span class=normal>808</span>
<span class=normal>809</span>
<span class=normal>810</span>
<span class=normal>811</span>
<span class=normal>812</span>
<span class=normal>813</span>
<span class=normal>814</span>
<span class=normal>815</span>
<span class=normal>816</span>
<span class=normal>817</span>
<span class=normal>818</span>
<span class=normal>819</span>
<span class=normal>820</span>
<span class=normal>821</span>
<span class=normal>822</span>
<span class=normal>823</span>
<span class=normal>824</span>
<span class=normal>825</span>
<span class=normal>826</span>
<span class=normal>827</span>
<span class=normal>828</span>
<span class=normal>829</span>
<span class=normal>830</span>
<span class=normal>831</span>
<span class=normal>832</span>
<span class=normal>833</span>
<span class=normal>834</span>
<span class=normal>835</span>
<span class=normal>836</span>
<span class=normal>837</span>
<span class=normal>838</span>
<span class=normal>839</span>
<span class=normal>840</span>
<span class=normal>841</span>
<span class=normal>842</span>
<span class=normal>843</span>
<span class=normal>844</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>LoaderActionsModel</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Model for loader actions.</span>

<span class=sd>    TODOs:</span>
<span class=sd>        Deprecate &#39;qargparse&#39; usage in loaders and implement conversion</span>
<span class=sd>            of &#39;ActionItem&#39; to data (and &#39;from_data&#39;).</span>
<span class=sd>        Use controller to get entities -&gt; possible only when</span>
<span class=sd>            loaders are able to handle AYON vs. OpenPype logic.</span>
<span class=sd>        Add missing site sync logic, and if possible remove it from loaders.</span>
<span class=sd>        Implement loader actions to replace load plugins.</span>
<span class=sd>        Ask loader actions to return action items instead of guessing them.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=c1># Cache loader plugins for some time</span>
    <span class=c1># NOTE Set to &#39;0&#39; for development</span>
    <span class=n>loaders_cache_lifetime</span> <span class=o>=</span> <span class=mi>30</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>controller</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_controller</span> <span class=o>=</span> <span class=n>controller</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_current_context_project</span> <span class=o>=</span> <span class=n>NOT_SET</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_loaders_by_identifier</span> <span class=o>=</span> <span class=n>NestedCacheItem</span><span class=p>(</span>
            <span class=n>levels</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=n>lifetime</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>loaders_cache_lifetime</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_product_loaders</span> <span class=o>=</span> <span class=n>NestedCacheItem</span><span class=p>(</span>
            <span class=n>levels</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=n>lifetime</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>loaders_cache_lifetime</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_repre_loaders</span> <span class=o>=</span> <span class=n>NestedCacheItem</span><span class=p>(</span>
            <span class=n>levels</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=n>lifetime</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>loaders_cache_lifetime</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>reset</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Reset the model with all cached items.&quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_current_context_project</span> <span class=o>=</span> <span class=n>NOT_SET</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_loaders_by_identifier</span><span class=o>.</span><span class=n>reset</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_product_loaders</span><span class=o>.</span><span class=n>reset</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_repre_loaders</span><span class=o>.</span><span class=n>reset</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_versions_action_items</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>project_name</span><span class=p>,</span> <span class=n>version_ids</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get action items for given version ids.</span>

<span class=sd>        Args:</span>
<span class=sd>            project_name (str): Project name.</span>
<span class=sd>            version_ids (Iterable[str]): Version ids.</span>

<span class=sd>        Returns:</span>
<span class=sd>            list[ActionItem]: List of action items.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=p>(</span>
            <span class=n>version_context_by_id</span><span class=p>,</span>
            <span class=n>repre_context_by_id</span>
        <span class=p>)</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_contexts_for_versions</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span>
            <span class=n>version_ids</span>
        <span class=p>)</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_action_items_for_contexts</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span>
            <span class=n>version_context_by_id</span><span class=p>,</span>
            <span class=n>repre_context_by_id</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_representations_action_items</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span> <span class=n>project_name</span><span class=p>,</span> <span class=n>representation_ids</span>
    <span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get action items for given representation ids.</span>

<span class=sd>        Args:</span>
<span class=sd>            project_name (str): Project name.</span>
<span class=sd>            representation_ids (Iterable[str]): Representation ids.</span>

<span class=sd>        Returns:</span>
<span class=sd>            list[ActionItem]: List of action items.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=p>(</span>
            <span class=n>product_context_by_id</span><span class=p>,</span>
            <span class=n>repre_context_by_id</span>
        <span class=p>)</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_contexts_for_representations</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span>
            <span class=n>representation_ids</span>
        <span class=p>)</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_action_items_for_contexts</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span>
            <span class=n>product_context_by_id</span><span class=p>,</span>
            <span class=n>repre_context_by_id</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>trigger_action_item</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>identifier</span><span class=p>,</span>
        <span class=n>options</span><span class=p>,</span>
        <span class=n>project_name</span><span class=p>,</span>
        <span class=n>version_ids</span><span class=p>,</span>
        <span class=n>representation_ids</span>
    <span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Trigger action by identifier.</span>

<span class=sd>        Triggers the action by identifier for given contexts.</span>

<span class=sd>        Triggers events &quot;load.started&quot; and &quot;load.finished&quot;. Finished event</span>
<span class=sd>            also contains &quot;error_info&quot; key with error information if any</span>
<span class=sd>            happened.</span>

<span class=sd>        Args:</span>
<span class=sd>            identifier (str): Loader identifier.</span>
<span class=sd>            options (dict[str, Any]): Loader option values.</span>
<span class=sd>            project_name (str): Project name.</span>
<span class=sd>            version_ids (Iterable[str]): Version ids.</span>
<span class=sd>            representation_ids (Iterable[str]): Representation ids.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>event_data</span> <span class=o>=</span> <span class=p>{</span>
            <span class=s2>&quot;identifier&quot;</span><span class=p>:</span> <span class=n>identifier</span><span class=p>,</span>
            <span class=s2>&quot;id&quot;</span><span class=p>:</span> <span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>()</span><span class=o>.</span><span class=n>hex</span><span class=p>,</span>
        <span class=p>}</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_controller</span><span class=o>.</span><span class=n>emit_event</span><span class=p>(</span>
            <span class=s2>&quot;load.started&quot;</span><span class=p>,</span>
            <span class=n>event_data</span><span class=p>,</span>
            <span class=n>ACTIONS_MODEL_SENDER</span><span class=p>,</span>
        <span class=p>)</span>
        <span class=n>loader</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_loader_by_identifier</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=n>identifier</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>representation_ids</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>error_info</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_trigger_representation_loader</span><span class=p>(</span>
                <span class=n>loader</span><span class=p>,</span>
                <span class=n>options</span><span class=p>,</span>
                <span class=n>project_name</span><span class=p>,</span>
                <span class=n>representation_ids</span><span class=p>,</span>
            <span class=p>)</span>
        <span class=k>elif</span> <span class=n>version_ids</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>error_info</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_trigger_version_loader</span><span class=p>(</span>
                <span class=n>loader</span><span class=p>,</span>
                <span class=n>options</span><span class=p>,</span>
                <span class=n>project_name</span><span class=p>,</span>
                <span class=n>version_ids</span><span class=p>,</span>
            <span class=p>)</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>NotImplementedError</span><span class=p>(</span>
                <span class=s2>&quot;Invalid arguments to trigger action item&quot;</span><span class=p>)</span>

        <span class=n>event_data</span><span class=p>[</span><span class=s2>&quot;error_info&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>error_info</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_controller</span><span class=o>.</span><span class=n>emit_event</span><span class=p>(</span>
            <span class=s2>&quot;load.finished&quot;</span><span class=p>,</span>
            <span class=n>event_data</span><span class=p>,</span>
            <span class=n>ACTIONS_MODEL_SENDER</span><span class=p>,</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_get_current_context_project</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get current context project name.</span>

<span class=sd>        The value is based on controller (host) and cached.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Union[str, None]: Current context project.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_context_project</span> <span class=ow>is</span> <span class=n>NOT_SET</span><span class=p>:</span>
            <span class=n>context</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_controller</span><span class=o>.</span><span class=n>get_current_context</span><span class=p>()</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_current_context_project</span> <span class=o>=</span> <span class=n>context</span><span class=p>[</span><span class=s2>&quot;project_name&quot;</span><span class=p>]</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_context_project</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_get_action_label</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>loader</span><span class=p>,</span> <span class=n>representation</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Pull label info from loader class.</span>

<span class=sd>        Args:</span>
<span class=sd>            loader (LoaderPlugin): Plugin class.</span>
<span class=sd>            representation (Optional[dict[str, Any]]): Representation data.</span>

<span class=sd>        Returns:</span>
<span class=sd>            str: Action label.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>label</span> <span class=o>=</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>loader</span><span class=p>,</span> <span class=s2>&quot;label&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>label</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>label</span> <span class=o>=</span> <span class=n>loader</span><span class=o>.</span><span class=vm>__name__</span>
        <span class=k>if</span> <span class=n>representation</span><span class=p>:</span>
            <span class=c1># Add the representation as suffix</span>
            <span class=n>label</span> <span class=o>=</span> <span class=s2>&quot;</span><span class=si>{}</span><span class=s2> (</span><span class=si>{}</span><span class=s2>)&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>label</span><span class=p>,</span> <span class=n>representation</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>])</span>
        <span class=k>return</span> <span class=n>label</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_get_action_icon</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>loader</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Pull icon info from loader class.</span>

<span class=sd>        Args:</span>
<span class=sd>            loader (LoaderPlugin): Plugin class.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Union[dict[str, Any], None]: Icon definition based on</span>
<span class=sd>                loader plugin.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=c1># Support font-awesome icons using the `.icon` and `.color`</span>
        <span class=c1># attributes on plug-ins.</span>
        <span class=n>icon</span> <span class=o>=</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>loader</span><span class=p>,</span> <span class=s2>&quot;icon&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>icon</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=ow>and</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>icon</span><span class=p>,</span> <span class=nb>dict</span><span class=p>):</span>
            <span class=n>icon</span> <span class=o>=</span> <span class=p>{</span>
                <span class=s2>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;awesome-font&quot;</span><span class=p>,</span>
                <span class=s2>&quot;name&quot;</span><span class=p>:</span> <span class=n>icon</span><span class=p>,</span>
                <span class=s2>&quot;color&quot;</span><span class=p>:</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>loader</span><span class=p>,</span> <span class=s2>&quot;color&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span> <span class=ow>or</span> <span class=s2>&quot;white&quot;</span>
            <span class=p>}</span>
        <span class=k>return</span> <span class=n>icon</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_get_action_tooltip</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>loader</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Pull tooltip info from loader class.</span>

<span class=sd>        Args:</span>
<span class=sd>            loader (LoaderPlugin): Plugin class.</span>

<span class=sd>        Returns:</span>
<span class=sd>            str: Action tooltip.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=c1># Add tooltip and statustip from Loader docstring</span>
        <span class=k>return</span> <span class=n>inspect</span><span class=o>.</span><span class=n>getdoc</span><span class=p>(</span><span class=n>loader</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_filter_loaders_by_tool_name</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>project_name</span><span class=p>,</span> <span class=n>loaders</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Filter loaders by tool name.</span>

<span class=sd>        Tool names are based on AYON tools loader tool and library</span>
<span class=sd>        loader tool. The new tool merged both into one tool and the difference</span>
<span class=sd>        is based only on current project name.</span>

<span class=sd>        Args:</span>
<span class=sd>            project_name (str): Project name.</span>
<span class=sd>            loaders (list[LoaderPlugin]): List of loader plugins.</span>

<span class=sd>        Returns:</span>
<span class=sd>            list[LoaderPlugin]: Filtered list of loader plugins.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=c1># Keep filtering by tool name</span>
        <span class=c1># - if current context project name is same as project name we do</span>
        <span class=c1>#   expect the tool is used as AYON loader tool, otherwise</span>
        <span class=c1>#   as library loader tool.</span>
        <span class=k>if</span> <span class=n>project_name</span> <span class=o>==</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_current_context_project</span><span class=p>():</span>
            <span class=n>tool_name</span> <span class=o>=</span> <span class=s2>&quot;loader&quot;</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>tool_name</span> <span class=o>=</span> <span class=s2>&quot;library_loader&quot;</span>
        <span class=n>filtered_loaders</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>for</span> <span class=n>loader</span> <span class=ow>in</span> <span class=n>loaders</span><span class=p>:</span>
            <span class=n>tool_names</span> <span class=o>=</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>loader</span><span class=p>,</span> <span class=s2>&quot;tool_names&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
            <span class=k>if</span> <span class=p>(</span>
                <span class=n>tool_names</span> <span class=ow>is</span> <span class=kc>None</span>
                <span class=ow>or</span> <span class=s2>&quot;*&quot;</span> <span class=ow>in</span> <span class=n>tool_names</span>
                <span class=ow>or</span> <span class=n>tool_name</span> <span class=ow>in</span> <span class=n>tool_names</span>
            <span class=p>):</span>
                <span class=n>filtered_loaders</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>loader</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>filtered_loaders</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_create_loader_action_item</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>loader</span><span class=p>,</span>
        <span class=n>contexts</span><span class=p>,</span>
        <span class=n>project_name</span><span class=p>,</span>
        <span class=n>folder_ids</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>product_ids</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>version_ids</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>representation_ids</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>repre_name</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=p>):</span>
        <span class=n>label</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_action_label</span><span class=p>(</span><span class=n>loader</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>repre_name</span><span class=p>:</span>
            <span class=n>label</span> <span class=o>=</span> <span class=s2>&quot;</span><span class=si>{}</span><span class=s2> (</span><span class=si>{}</span><span class=s2>)&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>label</span><span class=p>,</span> <span class=n>repre_name</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>ActionItem</span><span class=p>(</span>
            <span class=n>get_loader_identifier</span><span class=p>(</span><span class=n>loader</span><span class=p>),</span>
            <span class=n>label</span><span class=o>=</span><span class=n>label</span><span class=p>,</span>
            <span class=n>icon</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_get_action_icon</span><span class=p>(</span><span class=n>loader</span><span class=p>),</span>
            <span class=n>tooltip</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_get_action_tooltip</span><span class=p>(</span><span class=n>loader</span><span class=p>),</span>
            <span class=n>options</span><span class=o>=</span><span class=n>loader</span><span class=o>.</span><span class=n>get_options</span><span class=p>(</span><span class=n>contexts</span><span class=p>),</span>
            <span class=n>order</span><span class=o>=</span><span class=n>loader</span><span class=o>.</span><span class=n>order</span><span class=p>,</span>
            <span class=n>project_name</span><span class=o>=</span><span class=n>project_name</span><span class=p>,</span>
            <span class=n>folder_ids</span><span class=o>=</span><span class=n>folder_ids</span><span class=p>,</span>
            <span class=n>product_ids</span><span class=o>=</span><span class=n>product_ids</span><span class=p>,</span>
            <span class=n>version_ids</span><span class=o>=</span><span class=n>version_ids</span><span class=p>,</span>
            <span class=n>representation_ids</span><span class=o>=</span><span class=n>representation_ids</span><span class=p>,</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_get_loaders</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>project_name</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Loaders with loaded settings for a project.</span>

<span class=sd>        Questions:</span>
<span class=sd>            Project name is required because of settings. Should we actually</span>
<span class=sd>                pass in current project name instead of project name where</span>
<span class=sd>                we want to show loaders for?</span>

<span class=sd>        Returns:</span>
<span class=sd>            tuple[list[ProductLoaderPlugin], list[LoaderPlugin]]: Discovered</span>
<span class=sd>                loader plugins.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>loaders_by_identifier_c</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_loaders_by_identifier</span><span class=p>[</span><span class=n>project_name</span><span class=p>]</span>
        <span class=n>product_loaders_c</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_product_loaders</span><span class=p>[</span><span class=n>project_name</span><span class=p>]</span>
        <span class=n>repre_loaders_c</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_repre_loaders</span><span class=p>[</span><span class=n>project_name</span><span class=p>]</span>
        <span class=k>if</span> <span class=n>loaders_by_identifier_c</span><span class=o>.</span><span class=n>is_valid</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>product_loaders_c</span><span class=o>.</span><span class=n>get_data</span><span class=p>(),</span> <span class=n>repre_loaders_c</span><span class=o>.</span><span class=n>get_data</span><span class=p>()</span>

        <span class=c1># Get all representation-&gt;loader combinations available for the</span>
        <span class=c1># index under the cursor, so we can list the user the options.</span>
        <span class=n>available_loaders</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_filter_loaders_by_tool_name</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span> <span class=n>discover_loader_plugins</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>
        <span class=p>)</span>

        <span class=n>repre_loaders</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=n>product_loaders</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=n>loaders_by_identifier</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=k>for</span> <span class=n>loader_cls</span> <span class=ow>in</span> <span class=n>available_loaders</span><span class=p>:</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=n>loader_cls</span><span class=o>.</span><span class=n>enabled</span><span class=p>:</span>
                <span class=k>continue</span>

            <span class=n>identifier</span> <span class=o>=</span> <span class=n>get_loader_identifier</span><span class=p>(</span><span class=n>loader_cls</span><span class=p>)</span>
            <span class=n>loaders_by_identifier</span><span class=p>[</span><span class=n>identifier</span><span class=p>]</span> <span class=o>=</span> <span class=n>loader_cls</span>
            <span class=k>if</span> <span class=nb>issubclass</span><span class=p>(</span><span class=n>loader_cls</span><span class=p>,</span> <span class=n>ProductLoaderPlugin</span><span class=p>):</span>
                <span class=n>product_loaders</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>loader_cls</span><span class=p>)</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=n>repre_loaders</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>loader_cls</span><span class=p>)</span>

        <span class=n>loaders_by_identifier_c</span><span class=o>.</span><span class=n>update_data</span><span class=p>(</span><span class=n>loaders_by_identifier</span><span class=p>)</span>
        <span class=n>product_loaders_c</span><span class=o>.</span><span class=n>update_data</span><span class=p>(</span><span class=n>product_loaders</span><span class=p>)</span>
        <span class=n>repre_loaders_c</span><span class=o>.</span><span class=n>update_data</span><span class=p>(</span><span class=n>repre_loaders</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>product_loaders</span><span class=p>,</span> <span class=n>repre_loaders</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_get_loader_by_identifier</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>project_name</span><span class=p>,</span> <span class=n>identifier</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_loaders_by_identifier</span><span class=p>[</span><span class=n>project_name</span><span class=p>]</span><span class=o>.</span><span class=n>is_valid</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_get_loaders</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>
        <span class=n>loaders_by_identifier_c</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_loaders_by_identifier</span><span class=p>[</span><span class=n>project_name</span><span class=p>]</span>
        <span class=n>loaders_by_identifier</span> <span class=o>=</span> <span class=n>loaders_by_identifier_c</span><span class=o>.</span><span class=n>get_data</span><span class=p>()</span>
        <span class=k>return</span> <span class=n>loaders_by_identifier</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>identifier</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_actions_sorter</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>action_item</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Sort the Loaders by their order and then their name.</span>

<span class=sd>        Returns:</span>
<span class=sd>            tuple[int, str]: Sort keys.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=n>action_item</span><span class=o>.</span><span class=n>order</span><span class=p>,</span> <span class=n>action_item</span><span class=o>.</span><span class=n>label</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_contexts_for_versions</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>project_name</span><span class=p>,</span> <span class=n>version_ids</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get contexts for given version ids.</span>

<span class=sd>        Prepare version contexts for &#39;ProductLoaderPlugin&#39; and representation</span>
<span class=sd>        contexts for &#39;LoaderPlugin&#39; for all children representations of</span>
<span class=sd>        given versions.</span>

<span class=sd>        This method is very similar to &#39;_contexts_for_representations&#39; but the</span>
<span class=sd>        queries of entities are called in a different order.</span>

<span class=sd>        Args:</span>
<span class=sd>            project_name (str): Project name.</span>
<span class=sd>            version_ids (Iterable[str]): Version ids.</span>

<span class=sd>        Returns:</span>
<span class=sd>            tuple[list[dict[str, Any]], list[dict[str, Any]]]: Version and</span>
<span class=sd>                representation contexts.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=c1># TODO fix hero version</span>
        <span class=n>version_context_by_id</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=n>repre_context_by_id</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>project_name</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>version_ids</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>version_context_by_id</span><span class=p>,</span> <span class=n>repre_context_by_id</span>

        <span class=n>version_entities</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_versions</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span> <span class=n>version_ids</span><span class=o>=</span><span class=n>version_ids</span>
        <span class=p>)</span>
        <span class=n>version_entities_by_id</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=n>version_entities_by_product_id</span> <span class=o>=</span> <span class=n>collections</span><span class=o>.</span><span class=n>defaultdict</span><span class=p>(</span><span class=nb>list</span><span class=p>)</span>
        <span class=k>for</span> <span class=n>version_entity</span> <span class=ow>in</span> <span class=n>version_entities</span><span class=p>:</span>
            <span class=n>version_id</span> <span class=o>=</span> <span class=n>version_entity</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]</span>
            <span class=n>product_id</span> <span class=o>=</span> <span class=n>version_entity</span><span class=p>[</span><span class=s2>&quot;productId&quot;</span><span class=p>]</span>
            <span class=n>version_entities_by_id</span><span class=p>[</span><span class=n>version_id</span><span class=p>]</span> <span class=o>=</span> <span class=n>version_entity</span>
            <span class=n>version_entities_by_product_id</span><span class=p>[</span><span class=n>product_id</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>version_entity</span><span class=p>)</span>

        <span class=n>_product_ids</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span><span class=n>version_entities_by_product_id</span><span class=o>.</span><span class=n>keys</span><span class=p>())</span>
        <span class=n>_product_entities</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_products</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span> <span class=n>product_ids</span><span class=o>=</span><span class=n>_product_ids</span>
        <span class=p>)</span>
        <span class=n>product_entities_by_id</span> <span class=o>=</span> <span class=p>{</span><span class=n>p</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]:</span> <span class=n>p</span> <span class=k>for</span> <span class=n>p</span> <span class=ow>in</span> <span class=n>_product_entities</span><span class=p>}</span>

        <span class=n>_folder_ids</span> <span class=o>=</span> <span class=p>{</span><span class=n>p</span><span class=p>[</span><span class=s2>&quot;folderId&quot;</span><span class=p>]</span> <span class=k>for</span> <span class=n>p</span> <span class=ow>in</span> <span class=n>product_entities_by_id</span><span class=o>.</span><span class=n>values</span><span class=p>()}</span>
        <span class=n>_folder_entities</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_folders</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span> <span class=n>folder_ids</span><span class=o>=</span><span class=n>_folder_ids</span>
        <span class=p>)</span>
        <span class=n>folder_entities_by_id</span> <span class=o>=</span> <span class=p>{</span><span class=n>f</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]:</span> <span class=n>f</span> <span class=k>for</span> <span class=n>f</span> <span class=ow>in</span> <span class=n>_folder_entities</span><span class=p>}</span>

        <span class=n>project_entity</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_project</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>

        <span class=k>for</span> <span class=n>version_id</span><span class=p>,</span> <span class=n>version_entity</span> <span class=ow>in</span> <span class=n>version_entities_by_id</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=n>product_id</span> <span class=o>=</span> <span class=n>version_entity</span><span class=p>[</span><span class=s2>&quot;productId&quot;</span><span class=p>]</span>
            <span class=n>product_entity</span> <span class=o>=</span> <span class=n>product_entities_by_id</span><span class=p>[</span><span class=n>product_id</span><span class=p>]</span>
            <span class=n>folder_id</span> <span class=o>=</span> <span class=n>product_entity</span><span class=p>[</span><span class=s2>&quot;folderId&quot;</span><span class=p>]</span>
            <span class=n>folder_entity</span> <span class=o>=</span> <span class=n>folder_entities_by_id</span><span class=p>[</span><span class=n>folder_id</span><span class=p>]</span>
            <span class=n>version_context_by_id</span><span class=p>[</span><span class=n>version_id</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span>
                <span class=s2>&quot;project&quot;</span><span class=p>:</span> <span class=n>project_entity</span><span class=p>,</span>
                <span class=s2>&quot;folder&quot;</span><span class=p>:</span> <span class=n>folder_entity</span><span class=p>,</span>
                <span class=s2>&quot;product&quot;</span><span class=p>:</span> <span class=n>product_entity</span><span class=p>,</span>
                <span class=s2>&quot;version&quot;</span><span class=p>:</span> <span class=n>version_entity</span><span class=p>,</span>
            <span class=p>}</span>

        <span class=n>repre_entities</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_representations</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span> <span class=n>version_ids</span><span class=o>=</span><span class=n>version_ids</span><span class=p>)</span>
        <span class=k>for</span> <span class=n>repre_entity</span> <span class=ow>in</span> <span class=n>repre_entities</span><span class=p>:</span>
            <span class=n>version_id</span> <span class=o>=</span> <span class=n>repre_entity</span><span class=p>[</span><span class=s2>&quot;versionId&quot;</span><span class=p>]</span>
            <span class=n>version_entity</span> <span class=o>=</span> <span class=n>version_entities_by_id</span><span class=p>[</span><span class=n>version_id</span><span class=p>]</span>
            <span class=n>product_id</span> <span class=o>=</span> <span class=n>version_entity</span><span class=p>[</span><span class=s2>&quot;productId&quot;</span><span class=p>]</span>
            <span class=n>product_entity</span> <span class=o>=</span> <span class=n>product_entities_by_id</span><span class=p>[</span><span class=n>product_id</span><span class=p>]</span>
            <span class=n>folder_id</span> <span class=o>=</span> <span class=n>product_entity</span><span class=p>[</span><span class=s2>&quot;folderId&quot;</span><span class=p>]</span>
            <span class=n>folder_entity</span> <span class=o>=</span> <span class=n>folder_entities_by_id</span><span class=p>[</span><span class=n>folder_id</span><span class=p>]</span>

            <span class=n>repre_context_by_id</span><span class=p>[</span><span class=n>repre_entity</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]]</span> <span class=o>=</span> <span class=p>{</span>
                <span class=s2>&quot;project&quot;</span><span class=p>:</span> <span class=n>project_entity</span><span class=p>,</span>
                <span class=s2>&quot;folder&quot;</span><span class=p>:</span> <span class=n>folder_entity</span><span class=p>,</span>
                <span class=s2>&quot;product&quot;</span><span class=p>:</span> <span class=n>product_entity</span><span class=p>,</span>
                <span class=s2>&quot;version&quot;</span><span class=p>:</span> <span class=n>version_entity</span><span class=p>,</span>
                <span class=s2>&quot;representation&quot;</span><span class=p>:</span> <span class=n>repre_entity</span><span class=p>,</span>
            <span class=p>}</span>

        <span class=k>return</span> <span class=n>version_context_by_id</span><span class=p>,</span> <span class=n>repre_context_by_id</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_contexts_for_representations</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>project_name</span><span class=p>,</span> <span class=n>repre_ids</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get contexts for given representation ids.</span>

<span class=sd>        Prepare version contexts for &#39;ProductLoaderPlugin&#39; and representation</span>
<span class=sd>        contexts for &#39;LoaderPlugin&#39; for all children representations of</span>
<span class=sd>        given versions.</span>

<span class=sd>        This method is very similar to &#39;_contexts_for_versions&#39; but the</span>
<span class=sd>        queries of entities are called in a different order.</span>

<span class=sd>        Args:</span>
<span class=sd>            project_name (str): Project name.</span>
<span class=sd>            repre_ids (Iterable[str]): Representation ids.</span>

<span class=sd>        Returns:</span>
<span class=sd>            tuple[list[dict[str, Any]], list[dict[str, Any]]]: Version and</span>
<span class=sd>                representation contexts.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>product_context_by_id</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=n>repre_context_by_id</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>project_name</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>repre_ids</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>product_context_by_id</span><span class=p>,</span> <span class=n>repre_context_by_id</span>

        <span class=n>repre_entities</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>ayon_api</span><span class=o>.</span><span class=n>get_representations</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span> <span class=n>representation_ids</span><span class=o>=</span><span class=n>repre_ids</span>
        <span class=p>))</span>
        <span class=n>version_ids</span> <span class=o>=</span> <span class=p>{</span><span class=n>r</span><span class=p>[</span><span class=s2>&quot;versionId&quot;</span><span class=p>]</span> <span class=k>for</span> <span class=n>r</span> <span class=ow>in</span> <span class=n>repre_entities</span><span class=p>}</span>
        <span class=n>version_entities</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_versions</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span> <span class=n>version_ids</span><span class=o>=</span><span class=n>version_ids</span>
        <span class=p>)</span>
        <span class=n>version_entities_by_id</span> <span class=o>=</span> <span class=p>{</span>
            <span class=n>v</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]:</span> <span class=n>v</span> <span class=k>for</span> <span class=n>v</span> <span class=ow>in</span> <span class=n>version_entities</span>
        <span class=p>}</span>

        <span class=n>product_ids</span> <span class=o>=</span> <span class=p>{</span><span class=n>v</span><span class=p>[</span><span class=s2>&quot;productId&quot;</span><span class=p>]</span> <span class=k>for</span> <span class=n>v</span> <span class=ow>in</span> <span class=n>version_entities_by_id</span><span class=o>.</span><span class=n>values</span><span class=p>()}</span>
        <span class=n>product_entities</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_products</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span> <span class=n>product_ids</span><span class=o>=</span><span class=n>product_ids</span>
        <span class=p>)</span>
        <span class=n>product_entities_by_id</span> <span class=o>=</span> <span class=p>{</span>
            <span class=n>p</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]:</span> <span class=n>p</span> <span class=k>for</span> <span class=n>p</span> <span class=ow>in</span> <span class=n>product_entities</span>
        <span class=p>}</span>

        <span class=n>folder_ids</span> <span class=o>=</span> <span class=p>{</span><span class=n>p</span><span class=p>[</span><span class=s2>&quot;folderId&quot;</span><span class=p>]</span> <span class=k>for</span> <span class=n>p</span> <span class=ow>in</span> <span class=n>product_entities_by_id</span><span class=o>.</span><span class=n>values</span><span class=p>()}</span>
        <span class=n>folder_entities</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_folders</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span> <span class=n>folder_ids</span><span class=o>=</span><span class=n>folder_ids</span>
        <span class=p>)</span>
        <span class=n>folder_entities_by_id</span> <span class=o>=</span> <span class=p>{</span>
            <span class=n>f</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]:</span> <span class=n>f</span> <span class=k>for</span> <span class=n>f</span> <span class=ow>in</span> <span class=n>folder_entities</span>
        <span class=p>}</span>

        <span class=n>project_entity</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_project</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>

        <span class=k>for</span> <span class=n>product_id</span><span class=p>,</span> <span class=n>product_entity</span> <span class=ow>in</span> <span class=n>product_entities_by_id</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=n>folder_id</span> <span class=o>=</span> <span class=n>product_entity</span><span class=p>[</span><span class=s2>&quot;folderId&quot;</span><span class=p>]</span>
            <span class=n>folder_entity</span> <span class=o>=</span> <span class=n>folder_entities_by_id</span><span class=p>[</span><span class=n>folder_id</span><span class=p>]</span>
            <span class=n>product_context_by_id</span><span class=p>[</span><span class=n>product_id</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span>
                <span class=s2>&quot;project&quot;</span><span class=p>:</span> <span class=n>project_entity</span><span class=p>,</span>
                <span class=s2>&quot;folder&quot;</span><span class=p>:</span> <span class=n>folder_entity</span><span class=p>,</span>
                <span class=s2>&quot;product&quot;</span><span class=p>:</span> <span class=n>product_entity</span><span class=p>,</span>
            <span class=p>}</span>

        <span class=k>for</span> <span class=n>repre_entity</span> <span class=ow>in</span> <span class=n>repre_entities</span><span class=p>:</span>
            <span class=n>version_id</span> <span class=o>=</span> <span class=n>repre_entity</span><span class=p>[</span><span class=s2>&quot;versionId&quot;</span><span class=p>]</span>
            <span class=n>version_entity</span> <span class=o>=</span> <span class=n>version_entities_by_id</span><span class=p>[</span><span class=n>version_id</span><span class=p>]</span>
            <span class=n>product_id</span> <span class=o>=</span> <span class=n>version_entity</span><span class=p>[</span><span class=s2>&quot;productId&quot;</span><span class=p>]</span>
            <span class=n>product_entity</span> <span class=o>=</span> <span class=n>product_entities_by_id</span><span class=p>[</span><span class=n>product_id</span><span class=p>]</span>
            <span class=n>folder_id</span> <span class=o>=</span> <span class=n>product_entity</span><span class=p>[</span><span class=s2>&quot;folderId&quot;</span><span class=p>]</span>
            <span class=n>folder_entity</span> <span class=o>=</span> <span class=n>folder_entities_by_id</span><span class=p>[</span><span class=n>folder_id</span><span class=p>]</span>

            <span class=n>repre_context_by_id</span><span class=p>[</span><span class=n>repre_entity</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]]</span> <span class=o>=</span> <span class=p>{</span>
                <span class=s2>&quot;project&quot;</span><span class=p>:</span> <span class=n>project_entity</span><span class=p>,</span>
                <span class=s2>&quot;folder&quot;</span><span class=p>:</span> <span class=n>folder_entity</span><span class=p>,</span>
                <span class=s2>&quot;product&quot;</span><span class=p>:</span> <span class=n>product_entity</span><span class=p>,</span>
                <span class=s2>&quot;version&quot;</span><span class=p>:</span> <span class=n>version_entity</span><span class=p>,</span>
                <span class=s2>&quot;representation&quot;</span><span class=p>:</span> <span class=n>repre_entity</span><span class=p>,</span>
            <span class=p>}</span>
        <span class=k>return</span> <span class=n>product_context_by_id</span><span class=p>,</span> <span class=n>repre_context_by_id</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_get_action_items_for_contexts</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>project_name</span><span class=p>,</span>
        <span class=n>version_context_by_id</span><span class=p>,</span>
        <span class=n>repre_context_by_id</span>
    <span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Prepare action items based on contexts.</span>

<span class=sd>        Actions are prepared based on discovered loader plugins and contexts.</span>
<span class=sd>        The context must be valid for the loader plugin.</span>

<span class=sd>        Args:</span>
<span class=sd>            project_name (str): Project name.</span>
<span class=sd>            version_context_by_id (dict[str, dict[str, Any]]): Version</span>
<span class=sd>                contexts by version id.</span>
<span class=sd>            repre_context_by_id (dict[str, dict[str, Any]]): Representation</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>action_items</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>version_context_by_id</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>repre_context_by_id</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>action_items</span>

        <span class=n>product_loaders</span><span class=p>,</span> <span class=n>repre_loaders</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_loaders</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>

        <span class=n>repre_contexts_by_name</span> <span class=o>=</span> <span class=n>collections</span><span class=o>.</span><span class=n>defaultdict</span><span class=p>(</span><span class=nb>list</span><span class=p>)</span>
        <span class=k>for</span> <span class=n>repre_context</span> <span class=ow>in</span> <span class=n>repre_context_by_id</span><span class=o>.</span><span class=n>values</span><span class=p>():</span>
            <span class=n>repre_name</span> <span class=o>=</span> <span class=n>repre_context</span><span class=p>[</span><span class=s2>&quot;representation&quot;</span><span class=p>][</span><span class=s2>&quot;name&quot;</span><span class=p>]</span>
            <span class=n>repre_contexts_by_name</span><span class=p>[</span><span class=n>repre_name</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>repre_context</span><span class=p>)</span>

        <span class=k>for</span> <span class=n>loader</span> <span class=ow>in</span> <span class=n>repre_loaders</span><span class=p>:</span>
            <span class=k>for</span> <span class=n>repre_name</span><span class=p>,</span> <span class=n>repre_contexts</span> <span class=ow>in</span> <span class=n>repre_contexts_by_name</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
                <span class=n>filtered_repre_contexts</span> <span class=o>=</span> <span class=n>filter_repre_contexts_by_loader</span><span class=p>(</span>
                    <span class=n>repre_contexts</span><span class=p>,</span> <span class=n>loader</span><span class=p>)</span>
                <span class=k>if</span> <span class=ow>not</span> <span class=n>filtered_repre_contexts</span><span class=p>:</span>
                    <span class=k>continue</span>

                <span class=n>repre_ids</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
                <span class=n>repre_version_ids</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
                <span class=n>repre_product_ids</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
                <span class=n>repre_folder_ids</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
                <span class=k>for</span> <span class=n>repre_context</span> <span class=ow>in</span> <span class=n>filtered_repre_contexts</span><span class=p>:</span>
                    <span class=n>repre_ids</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>repre_context</span><span class=p>[</span><span class=s2>&quot;representation&quot;</span><span class=p>][</span><span class=s2>&quot;id&quot;</span><span class=p>])</span>
                    <span class=n>repre_product_ids</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>repre_context</span><span class=p>[</span><span class=s2>&quot;product&quot;</span><span class=p>][</span><span class=s2>&quot;id&quot;</span><span class=p>])</span>
                    <span class=n>repre_version_ids</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>repre_context</span><span class=p>[</span><span class=s2>&quot;version&quot;</span><span class=p>][</span><span class=s2>&quot;id&quot;</span><span class=p>])</span>
                    <span class=n>repre_folder_ids</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>repre_context</span><span class=p>[</span><span class=s2>&quot;folder&quot;</span><span class=p>][</span><span class=s2>&quot;id&quot;</span><span class=p>])</span>

                <span class=n>item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_create_loader_action_item</span><span class=p>(</span>
                    <span class=n>loader</span><span class=p>,</span>
                    <span class=n>repre_contexts</span><span class=p>,</span>
                    <span class=n>project_name</span><span class=o>=</span><span class=n>project_name</span><span class=p>,</span>
                    <span class=n>folder_ids</span><span class=o>=</span><span class=n>repre_folder_ids</span><span class=p>,</span>
                    <span class=n>product_ids</span><span class=o>=</span><span class=n>repre_product_ids</span><span class=p>,</span>
                    <span class=n>version_ids</span><span class=o>=</span><span class=n>repre_version_ids</span><span class=p>,</span>
                    <span class=n>representation_ids</span><span class=o>=</span><span class=n>repre_ids</span><span class=p>,</span>
                    <span class=n>repre_name</span><span class=o>=</span><span class=n>repre_name</span><span class=p>,</span>
                <span class=p>)</span>
                <span class=n>action_items</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>

        <span class=c1># Product Loaders.</span>
        <span class=n>version_ids</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span><span class=n>version_context_by_id</span><span class=o>.</span><span class=n>keys</span><span class=p>())</span>
        <span class=n>product_folder_ids</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
        <span class=n>product_ids</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
        <span class=k>for</span> <span class=n>product_context</span> <span class=ow>in</span> <span class=n>version_context_by_id</span><span class=o>.</span><span class=n>values</span><span class=p>():</span>
            <span class=n>product_ids</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>product_context</span><span class=p>[</span><span class=s2>&quot;product&quot;</span><span class=p>][</span><span class=s2>&quot;id&quot;</span><span class=p>])</span>
            <span class=n>product_folder_ids</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>product_context</span><span class=p>[</span><span class=s2>&quot;folder&quot;</span><span class=p>][</span><span class=s2>&quot;id&quot;</span><span class=p>])</span>

        <span class=n>version_contexts</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>version_context_by_id</span><span class=o>.</span><span class=n>values</span><span class=p>())</span>
        <span class=k>for</span> <span class=n>loader</span> <span class=ow>in</span> <span class=n>product_loaders</span><span class=p>:</span>
            <span class=n>item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_create_loader_action_item</span><span class=p>(</span>
                <span class=n>loader</span><span class=p>,</span>
                <span class=n>version_contexts</span><span class=p>,</span>
                <span class=n>project_name</span><span class=o>=</span><span class=n>project_name</span><span class=p>,</span>
                <span class=n>folder_ids</span><span class=o>=</span><span class=n>product_folder_ids</span><span class=p>,</span>
                <span class=n>product_ids</span><span class=o>=</span><span class=n>product_ids</span><span class=p>,</span>
                <span class=n>version_ids</span><span class=o>=</span><span class=n>version_ids</span><span class=p>,</span>
            <span class=p>)</span>
            <span class=n>action_items</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>

        <span class=n>action_items</span><span class=o>.</span><span class=n>sort</span><span class=p>(</span><span class=n>key</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_actions_sorter</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>action_items</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_trigger_version_loader</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>loader</span><span class=p>,</span>
        <span class=n>options</span><span class=p>,</span>
        <span class=n>project_name</span><span class=p>,</span>
        <span class=n>version_ids</span><span class=p>,</span>
    <span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Trigger version loader.</span>

<span class=sd>        This triggers &#39;load&#39; method of &#39;ProductLoaderPlugin&#39; for given version</span>
<span class=sd>        ids.</span>

<span class=sd>        Note:</span>
<span class=sd>            Even when the plugin is &#39;ProductLoaderPlugin&#39; it actually expects</span>
<span class=sd>                versions and should be named &#39;VersionLoaderPlugin&#39;. Because it</span>
<span class=sd>                is planned to refactor load system and introduce</span>
<span class=sd>                &#39;LoaderAction&#39; plugins it is not relevant to change it</span>
<span class=sd>                anymore.</span>

<span class=sd>        Args:</span>
<span class=sd>            loader (ProductLoaderPlugin): Loader plugin to use.</span>
<span class=sd>            options (dict): Option values for loader.</span>
<span class=sd>            project_name (str): Project name.</span>
<span class=sd>            version_ids (Iterable[str]): Version ids.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>project_entity</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_project</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>

        <span class=n>version_entities</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>ayon_api</span><span class=o>.</span><span class=n>get_versions</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span> <span class=n>version_ids</span><span class=o>=</span><span class=n>version_ids</span>
        <span class=p>))</span>
        <span class=n>product_ids</span> <span class=o>=</span> <span class=p>{</span><span class=n>v</span><span class=p>[</span><span class=s2>&quot;productId&quot;</span><span class=p>]</span> <span class=k>for</span> <span class=n>v</span> <span class=ow>in</span> <span class=n>version_entities</span><span class=p>}</span>
        <span class=n>product_entities</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_products</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span> <span class=n>product_ids</span><span class=o>=</span><span class=n>product_ids</span>
        <span class=p>)</span>
        <span class=n>product_entities_by_id</span> <span class=o>=</span> <span class=p>{</span><span class=n>p</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]:</span> <span class=n>p</span> <span class=k>for</span> <span class=n>p</span> <span class=ow>in</span> <span class=n>product_entities</span><span class=p>}</span>
        <span class=n>folder_ids</span> <span class=o>=</span> <span class=p>{</span><span class=n>p</span><span class=p>[</span><span class=s2>&quot;folderId&quot;</span><span class=p>]</span> <span class=k>for</span> <span class=n>p</span> <span class=ow>in</span> <span class=n>product_entities_by_id</span><span class=o>.</span><span class=n>values</span><span class=p>()}</span>
        <span class=n>folder_entities</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_folders</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span> <span class=n>folder_ids</span><span class=o>=</span><span class=n>folder_ids</span>
        <span class=p>)</span>
        <span class=n>folder_entities_by_id</span> <span class=o>=</span> <span class=p>{</span><span class=n>f</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]:</span> <span class=n>f</span> <span class=k>for</span> <span class=n>f</span> <span class=ow>in</span> <span class=n>folder_entities</span><span class=p>}</span>
        <span class=n>product_contexts</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>for</span> <span class=n>version_entity</span> <span class=ow>in</span> <span class=n>version_entities</span><span class=p>:</span>
            <span class=n>product_id</span> <span class=o>=</span> <span class=n>version_entity</span><span class=p>[</span><span class=s2>&quot;productId&quot;</span><span class=p>]</span>
            <span class=n>product_entity</span> <span class=o>=</span> <span class=n>product_entities_by_id</span><span class=p>[</span><span class=n>product_id</span><span class=p>]</span>
            <span class=n>folder_id</span> <span class=o>=</span> <span class=n>product_entity</span><span class=p>[</span><span class=s2>&quot;folderId&quot;</span><span class=p>]</span>
            <span class=n>folder_entity</span> <span class=o>=</span> <span class=n>folder_entities_by_id</span><span class=p>[</span><span class=n>folder_id</span><span class=p>]</span>
            <span class=n>product_contexts</span><span class=o>.</span><span class=n>append</span><span class=p>({</span>
                <span class=s2>&quot;project&quot;</span><span class=p>:</span> <span class=n>project_entity</span><span class=p>,</span>
                <span class=s2>&quot;folder&quot;</span><span class=p>:</span> <span class=n>folder_entity</span><span class=p>,</span>
                <span class=s2>&quot;product&quot;</span><span class=p>:</span> <span class=n>product_entity</span><span class=p>,</span>
                <span class=s2>&quot;version&quot;</span><span class=p>:</span> <span class=n>version_entity</span><span class=p>,</span>
            <span class=p>})</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_load_products_by_loader</span><span class=p>(</span>
            <span class=n>loader</span><span class=p>,</span> <span class=n>product_contexts</span><span class=p>,</span> <span class=n>options</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_trigger_representation_loader</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>loader</span><span class=p>,</span>
        <span class=n>options</span><span class=p>,</span>
        <span class=n>project_name</span><span class=p>,</span>
        <span class=n>representation_ids</span><span class=p>,</span>
    <span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Trigger representation loader.</span>

<span class=sd>        This triggers &#39;load&#39; method of &#39;LoaderPlugin&#39; for given representation</span>
<span class=sd>            ids. For that are prepared contexts for each representation, with</span>
<span class=sd>            all parent entities.</span>

<span class=sd>        Args:</span>
<span class=sd>            loader (LoaderPlugin): Loader plugin to use.</span>
<span class=sd>            options (dict): Option values for loader.</span>
<span class=sd>            project_name (str): Project name.</span>
<span class=sd>            representation_ids (Iterable[str]): Representation ids.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>project_entity</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_project</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>
        <span class=n>repre_entities</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>ayon_api</span><span class=o>.</span><span class=n>get_representations</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span> <span class=n>representation_ids</span><span class=o>=</span><span class=n>representation_ids</span>
        <span class=p>))</span>
        <span class=n>version_ids</span> <span class=o>=</span> <span class=p>{</span><span class=n>r</span><span class=p>[</span><span class=s2>&quot;versionId&quot;</span><span class=p>]</span> <span class=k>for</span> <span class=n>r</span> <span class=ow>in</span> <span class=n>repre_entities</span><span class=p>}</span>
        <span class=n>version_entities</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_versions</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span> <span class=n>version_ids</span><span class=o>=</span><span class=n>version_ids</span>
        <span class=p>)</span>
        <span class=n>version_entities_by_id</span> <span class=o>=</span> <span class=p>{</span><span class=n>v</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]:</span> <span class=n>v</span> <span class=k>for</span> <span class=n>v</span> <span class=ow>in</span> <span class=n>version_entities</span><span class=p>}</span>
        <span class=n>product_ids</span> <span class=o>=</span> <span class=p>{</span>
            <span class=n>v</span><span class=p>[</span><span class=s2>&quot;productId&quot;</span><span class=p>]</span> <span class=k>for</span> <span class=n>v</span> <span class=ow>in</span> <span class=n>version_entities_by_id</span><span class=o>.</span><span class=n>values</span><span class=p>()</span>
        <span class=p>}</span>
        <span class=n>product_entities</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_products</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span> <span class=n>product_ids</span><span class=o>=</span><span class=n>product_ids</span>
        <span class=p>)</span>
        <span class=n>product_entities_by_id</span> <span class=o>=</span> <span class=p>{</span><span class=n>p</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]:</span> <span class=n>p</span> <span class=k>for</span> <span class=n>p</span> <span class=ow>in</span> <span class=n>product_entities</span><span class=p>}</span>
        <span class=n>folder_ids</span> <span class=o>=</span> <span class=p>{</span><span class=n>p</span><span class=p>[</span><span class=s2>&quot;folderId&quot;</span><span class=p>]</span> <span class=k>for</span> <span class=n>p</span> <span class=ow>in</span> <span class=n>product_entities_by_id</span><span class=o>.</span><span class=n>values</span><span class=p>()}</span>
        <span class=n>folder_entities</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_folders</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span> <span class=n>folder_ids</span><span class=o>=</span><span class=n>folder_ids</span>
        <span class=p>)</span>
        <span class=n>folder_entities_by_id</span> <span class=o>=</span> <span class=p>{</span><span class=n>f</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]:</span> <span class=n>f</span> <span class=k>for</span> <span class=n>f</span> <span class=ow>in</span> <span class=n>folder_entities</span><span class=p>}</span>
        <span class=n>repre_contexts</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>for</span> <span class=n>repre_entity</span> <span class=ow>in</span> <span class=n>repre_entities</span><span class=p>:</span>
            <span class=n>version_id</span> <span class=o>=</span> <span class=n>repre_entity</span><span class=p>[</span><span class=s2>&quot;versionId&quot;</span><span class=p>]</span>
            <span class=n>version_entity</span> <span class=o>=</span> <span class=n>version_entities_by_id</span><span class=p>[</span><span class=n>version_id</span><span class=p>]</span>
            <span class=n>product_id</span> <span class=o>=</span> <span class=n>version_entity</span><span class=p>[</span><span class=s2>&quot;productId&quot;</span><span class=p>]</span>
            <span class=n>product_entity</span> <span class=o>=</span> <span class=n>product_entities_by_id</span><span class=p>[</span><span class=n>product_id</span><span class=p>]</span>
            <span class=n>folder_id</span> <span class=o>=</span> <span class=n>product_entity</span><span class=p>[</span><span class=s2>&quot;folderId&quot;</span><span class=p>]</span>
            <span class=n>folder_entity</span> <span class=o>=</span> <span class=n>folder_entities_by_id</span><span class=p>[</span><span class=n>folder_id</span><span class=p>]</span>
            <span class=n>repre_contexts</span><span class=o>.</span><span class=n>append</span><span class=p>({</span>
                <span class=s2>&quot;project&quot;</span><span class=p>:</span> <span class=n>project_entity</span><span class=p>,</span>
                <span class=s2>&quot;folder&quot;</span><span class=p>:</span> <span class=n>folder_entity</span><span class=p>,</span>
                <span class=s2>&quot;product&quot;</span><span class=p>:</span> <span class=n>product_entity</span><span class=p>,</span>
                <span class=s2>&quot;version&quot;</span><span class=p>:</span> <span class=n>version_entity</span><span class=p>,</span>
                <span class=s2>&quot;representation&quot;</span><span class=p>:</span> <span class=n>repre_entity</span><span class=p>,</span>
            <span class=p>})</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_load_representations_by_loader</span><span class=p>(</span>
            <span class=n>loader</span><span class=p>,</span> <span class=n>repre_contexts</span><span class=p>,</span> <span class=n>options</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_load_representations_by_loader</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>loader</span><span class=p>,</span> <span class=n>repre_contexts</span><span class=p>,</span> <span class=n>options</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Loops through list of repre_contexts and loads them with one loader</span>

<span class=sd>        Args:</span>
<span class=sd>            loader (LoaderPlugin): Loader plugin to use.</span>
<span class=sd>            repre_contexts (list[dict]): Full info about selected</span>
<span class=sd>                representations, containing repre, version, product, folder</span>
<span class=sd>                and project entities.</span>
<span class=sd>            options (dict): Data from options.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>error_info</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>for</span> <span class=n>repre_context</span> <span class=ow>in</span> <span class=n>repre_contexts</span><span class=p>:</span>
            <span class=n>version_entity</span> <span class=o>=</span> <span class=n>repre_context</span><span class=p>[</span><span class=s2>&quot;version&quot;</span><span class=p>]</span>
            <span class=n>version</span> <span class=o>=</span> <span class=n>version_entity</span><span class=p>[</span><span class=s2>&quot;version&quot;</span><span class=p>]</span>
            <span class=k>if</span> <span class=n>version</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=p>:</span>
                <span class=n>version</span> <span class=o>=</span> <span class=s2>&quot;Hero&quot;</span>
            <span class=k>try</span><span class=p>:</span>
                <span class=n>load_with_repre_context</span><span class=p>(</span>
                    <span class=n>loader</span><span class=p>,</span>
                    <span class=n>repre_context</span><span class=p>,</span>
                    <span class=n>options</span><span class=o>=</span><span class=n>options</span>
                <span class=p>)</span>

            <span class=k>except</span> <span class=n>IncompatibleLoaderError</span> <span class=k>as</span> <span class=n>exc</span><span class=p>:</span>
                <span class=nb>print</span><span class=p>(</span><span class=n>exc</span><span class=p>)</span>
                <span class=n>error_info</span><span class=o>.</span><span class=n>append</span><span class=p>((</span>
                    <span class=s2>&quot;Incompatible Loader&quot;</span><span class=p>,</span>
                    <span class=kc>None</span><span class=p>,</span>
                    <span class=n>repre_context</span><span class=p>[</span><span class=s2>&quot;representation&quot;</span><span class=p>][</span><span class=s2>&quot;name&quot;</span><span class=p>],</span>
                    <span class=n>repre_context</span><span class=p>[</span><span class=s2>&quot;product&quot;</span><span class=p>][</span><span class=s2>&quot;name&quot;</span><span class=p>],</span>
                    <span class=n>version</span>
                <span class=p>))</span>

            <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>exc</span><span class=p>:</span>
                <span class=n>formatted_traceback</span> <span class=o>=</span> <span class=kc>None</span>
                <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>exc</span><span class=p>,</span> <span class=n>LoadError</span><span class=p>):</span>
                    <span class=n>exc_type</span><span class=p>,</span> <span class=n>exc_value</span><span class=p>,</span> <span class=n>exc_traceback</span> <span class=o>=</span> <span class=n>sys</span><span class=o>.</span><span class=n>exc_info</span><span class=p>()</span>
                    <span class=n>formatted_traceback</span> <span class=o>=</span> <span class=s2>&quot;&quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>traceback</span><span class=o>.</span><span class=n>format_exception</span><span class=p>(</span>
                        <span class=n>exc_type</span><span class=p>,</span> <span class=n>exc_value</span><span class=p>,</span> <span class=n>exc_traceback</span>
                    <span class=p>))</span>

                <span class=n>error_info</span><span class=o>.</span><span class=n>append</span><span class=p>((</span>
                    <span class=nb>str</span><span class=p>(</span><span class=n>exc</span><span class=p>),</span>
                    <span class=n>formatted_traceback</span><span class=p>,</span>
                    <span class=n>repre_context</span><span class=p>[</span><span class=s2>&quot;representation&quot;</span><span class=p>][</span><span class=s2>&quot;name&quot;</span><span class=p>],</span>
                    <span class=n>repre_context</span><span class=p>[</span><span class=s2>&quot;product&quot;</span><span class=p>][</span><span class=s2>&quot;name&quot;</span><span class=p>],</span>
                    <span class=n>version</span>
                <span class=p>))</span>
        <span class=k>return</span> <span class=n>error_info</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_load_products_by_loader</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>loader</span><span class=p>,</span> <span class=n>version_contexts</span><span class=p>,</span> <span class=n>options</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Triggers load with ProductLoader type of loaders.</span>

<span class=sd>        Warning:</span>
<span class=sd>            Plugin is named &#39;ProductLoader&#39; but version is passed to context</span>
<span class=sd>                too.</span>

<span class=sd>        Args:</span>
<span class=sd>            loader (ProductLoader): Loader used to load.</span>
<span class=sd>            version_contexts (list[dict[str, Any]]): For context for each</span>
<span class=sd>                version.</span>
<span class=sd>            options (dict[str, Any]): Options for loader that user could fill.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>error_info</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>if</span> <span class=n>loader</span><span class=o>.</span><span class=n>is_multiple_contexts_compatible</span><span class=p>:</span>
            <span class=n>product_names</span> <span class=o>=</span> <span class=p>[]</span>
            <span class=k>for</span> <span class=n>context</span> <span class=ow>in</span> <span class=n>version_contexts</span><span class=p>:</span>
                <span class=n>product_name</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;product&quot;</span><span class=p>,</span> <span class=p>{})</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;name&quot;</span><span class=p>)</span> <span class=ow>or</span> <span class=s2>&quot;N/A&quot;</span>
                <span class=n>product_names</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>product_name</span><span class=p>)</span>
            <span class=k>try</span><span class=p>:</span>
                <span class=n>load_with_product_contexts</span><span class=p>(</span>
                    <span class=n>loader</span><span class=p>,</span>
                    <span class=n>version_contexts</span><span class=p>,</span>
                    <span class=n>options</span><span class=o>=</span><span class=n>options</span>
                <span class=p>)</span>

            <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>exc</span><span class=p>:</span>
                <span class=n>formatted_traceback</span> <span class=o>=</span> <span class=kc>None</span>
                <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>exc</span><span class=p>,</span> <span class=n>LoadError</span><span class=p>):</span>
                    <span class=n>exc_type</span><span class=p>,</span> <span class=n>exc_value</span><span class=p>,</span> <span class=n>exc_traceback</span> <span class=o>=</span> <span class=n>sys</span><span class=o>.</span><span class=n>exc_info</span><span class=p>()</span>
                    <span class=n>formatted_traceback</span> <span class=o>=</span> <span class=s2>&quot;&quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>traceback</span><span class=o>.</span><span class=n>format_exception</span><span class=p>(</span>
                        <span class=n>exc_type</span><span class=p>,</span> <span class=n>exc_value</span><span class=p>,</span> <span class=n>exc_traceback</span>
                    <span class=p>))</span>
                <span class=n>error_info</span><span class=o>.</span><span class=n>append</span><span class=p>((</span>
                    <span class=nb>str</span><span class=p>(</span><span class=n>exc</span><span class=p>),</span>
                    <span class=n>formatted_traceback</span><span class=p>,</span>
                    <span class=kc>None</span><span class=p>,</span>
                    <span class=s2>&quot;, &quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>product_names</span><span class=p>),</span>
                    <span class=kc>None</span>
                <span class=p>))</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=k>for</span> <span class=n>version_context</span> <span class=ow>in</span> <span class=n>version_contexts</span><span class=p>:</span>
                <span class=n>product_name</span> <span class=o>=</span> <span class=p>(</span>
                    <span class=n>version_context</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;product&quot;</span><span class=p>,</span> <span class=p>{})</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;name&quot;</span><span class=p>)</span> <span class=ow>or</span> <span class=s2>&quot;N/A&quot;</span>
                <span class=p>)</span>
                <span class=k>try</span><span class=p>:</span>
                    <span class=n>load_with_product_context</span><span class=p>(</span>
                        <span class=n>loader</span><span class=p>,</span>
                        <span class=n>version_context</span><span class=p>,</span>
                        <span class=n>options</span><span class=o>=</span><span class=n>options</span>
                    <span class=p>)</span>

                <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>exc</span><span class=p>:</span>
                    <span class=n>formatted_traceback</span> <span class=o>=</span> <span class=kc>None</span>
                    <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>exc</span><span class=p>,</span> <span class=n>LoadError</span><span class=p>):</span>
                        <span class=n>exc_type</span><span class=p>,</span> <span class=n>exc_value</span><span class=p>,</span> <span class=n>exc_traceback</span> <span class=o>=</span> <span class=n>sys</span><span class=o>.</span><span class=n>exc_info</span><span class=p>()</span>
                        <span class=n>formatted_traceback</span> <span class=o>=</span> <span class=s2>&quot;&quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span>
                            <span class=n>traceback</span><span class=o>.</span><span class=n>format_exception</span><span class=p>(</span>
                                <span class=n>exc_type</span><span class=p>,</span> <span class=n>exc_value</span><span class=p>,</span> <span class=n>exc_traceback</span>
                            <span class=p>)</span>
                        <span class=p>)</span>

                    <span class=n>error_info</span><span class=o>.</span><span class=n>append</span><span class=p>((</span>
                        <span class=nb>str</span><span class=p>(</span><span class=n>exc</span><span class=p>),</span>
                        <span class=n>formatted_traceback</span><span class=p>,</span>
                        <span class=kc>None</span><span class=p>,</span>
                        <span class=n>product_name</span><span class=p>,</span>
                        <span class=kc>None</span>
                    <span class=p>))</span>

        <span class=k>return</span> <span class=n>error_info</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.loader.models.actions.LoaderActionsModel._actions_sorter class="doc doc-heading"> <code class="highlight language-python"><span class=n>_actions_sorter</span><span class=p>(</span><span class=n>action_item</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Sort the Loaders by their order and then their name.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>tuple[int, str]: Sort keys.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/loader/models/actions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>352</span>
<span class=normal>353</span>
<span class=normal>354</span>
<span class=normal>355</span>
<span class=normal>356</span>
<span class=normal>357</span>
<span class=normal>358</span>
<span class=normal>359</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>_actions_sorter</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>action_item</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Sort the Loaders by their order and then their name.</span>

<span class=sd>    Returns:</span>
<span class=sd>        tuple[int, str]: Sort keys.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=n>action_item</span><span class=o>.</span><span class=n>order</span><span class=p>,</span> <span class=n>action_item</span><span class=o>.</span><span class=n>label</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.loader.models.actions.LoaderActionsModel._contexts_for_representations class="doc doc-heading"> <code class="highlight language-python"><span class=n>_contexts_for_representations</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=n>repre_ids</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Get contexts for given representation ids.</p> <p>Prepare version contexts for 'ProductLoaderPlugin' and representation contexts for 'LoaderPlugin' for all children representations of given versions.</p> <p>This method is very similar to '_contexts_for_versions' but the queries of entities are called in a different order.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>project_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Project name.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>repre_ids</code> </td> <td> <code><span title=Iterable>Iterable</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Representation ids.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>tuple[list[dict[str, Any]], list[dict[str, Any]]]: Version and representation contexts.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/loader/models/actions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>443</span>
<span class=normal>444</span>
<span class=normal>445</span>
<span class=normal>446</span>
<span class=normal>447</span>
<span class=normal>448</span>
<span class=normal>449</span>
<span class=normal>450</span>
<span class=normal>451</span>
<span class=normal>452</span>
<span class=normal>453</span>
<span class=normal>454</span>
<span class=normal>455</span>
<span class=normal>456</span>
<span class=normal>457</span>
<span class=normal>458</span>
<span class=normal>459</span>
<span class=normal>460</span>
<span class=normal>461</span>
<span class=normal>462</span>
<span class=normal>463</span>
<span class=normal>464</span>
<span class=normal>465</span>
<span class=normal>466</span>
<span class=normal>467</span>
<span class=normal>468</span>
<span class=normal>469</span>
<span class=normal>470</span>
<span class=normal>471</span>
<span class=normal>472</span>
<span class=normal>473</span>
<span class=normal>474</span>
<span class=normal>475</span>
<span class=normal>476</span>
<span class=normal>477</span>
<span class=normal>478</span>
<span class=normal>479</span>
<span class=normal>480</span>
<span class=normal>481</span>
<span class=normal>482</span>
<span class=normal>483</span>
<span class=normal>484</span>
<span class=normal>485</span>
<span class=normal>486</span>
<span class=normal>487</span>
<span class=normal>488</span>
<span class=normal>489</span>
<span class=normal>490</span>
<span class=normal>491</span>
<span class=normal>492</span>
<span class=normal>493</span>
<span class=normal>494</span>
<span class=normal>495</span>
<span class=normal>496</span>
<span class=normal>497</span>
<span class=normal>498</span>
<span class=normal>499</span>
<span class=normal>500</span>
<span class=normal>501</span>
<span class=normal>502</span>
<span class=normal>503</span>
<span class=normal>504</span>
<span class=normal>505</span>
<span class=normal>506</span>
<span class=normal>507</span>
<span class=normal>508</span>
<span class=normal>509</span>
<span class=normal>510</span>
<span class=normal>511</span>
<span class=normal>512</span>
<span class=normal>513</span>
<span class=normal>514</span>
<span class=normal>515</span>
<span class=normal>516</span>
<span class=normal>517</span>
<span class=normal>518</span>
<span class=normal>519</span>
<span class=normal>520</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>_contexts_for_representations</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>project_name</span><span class=p>,</span> <span class=n>repre_ids</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get contexts for given representation ids.</span>

<span class=sd>    Prepare version contexts for &#39;ProductLoaderPlugin&#39; and representation</span>
<span class=sd>    contexts for &#39;LoaderPlugin&#39; for all children representations of</span>
<span class=sd>    given versions.</span>

<span class=sd>    This method is very similar to &#39;_contexts_for_versions&#39; but the</span>
<span class=sd>    queries of entities are called in a different order.</span>

<span class=sd>    Args:</span>
<span class=sd>        project_name (str): Project name.</span>
<span class=sd>        repre_ids (Iterable[str]): Representation ids.</span>

<span class=sd>    Returns:</span>
<span class=sd>        tuple[list[dict[str, Any]], list[dict[str, Any]]]: Version and</span>
<span class=sd>            representation contexts.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>product_context_by_id</span> <span class=o>=</span> <span class=p>{}</span>
    <span class=n>repre_context_by_id</span> <span class=o>=</span> <span class=p>{}</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>project_name</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>repre_ids</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>product_context_by_id</span><span class=p>,</span> <span class=n>repre_context_by_id</span>

    <span class=n>repre_entities</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>ayon_api</span><span class=o>.</span><span class=n>get_representations</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span> <span class=n>representation_ids</span><span class=o>=</span><span class=n>repre_ids</span>
    <span class=p>))</span>
    <span class=n>version_ids</span> <span class=o>=</span> <span class=p>{</span><span class=n>r</span><span class=p>[</span><span class=s2>&quot;versionId&quot;</span><span class=p>]</span> <span class=k>for</span> <span class=n>r</span> <span class=ow>in</span> <span class=n>repre_entities</span><span class=p>}</span>
    <span class=n>version_entities</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_versions</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span> <span class=n>version_ids</span><span class=o>=</span><span class=n>version_ids</span>
    <span class=p>)</span>
    <span class=n>version_entities_by_id</span> <span class=o>=</span> <span class=p>{</span>
        <span class=n>v</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]:</span> <span class=n>v</span> <span class=k>for</span> <span class=n>v</span> <span class=ow>in</span> <span class=n>version_entities</span>
    <span class=p>}</span>

    <span class=n>product_ids</span> <span class=o>=</span> <span class=p>{</span><span class=n>v</span><span class=p>[</span><span class=s2>&quot;productId&quot;</span><span class=p>]</span> <span class=k>for</span> <span class=n>v</span> <span class=ow>in</span> <span class=n>version_entities_by_id</span><span class=o>.</span><span class=n>values</span><span class=p>()}</span>
    <span class=n>product_entities</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_products</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span> <span class=n>product_ids</span><span class=o>=</span><span class=n>product_ids</span>
    <span class=p>)</span>
    <span class=n>product_entities_by_id</span> <span class=o>=</span> <span class=p>{</span>
        <span class=n>p</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]:</span> <span class=n>p</span> <span class=k>for</span> <span class=n>p</span> <span class=ow>in</span> <span class=n>product_entities</span>
    <span class=p>}</span>

    <span class=n>folder_ids</span> <span class=o>=</span> <span class=p>{</span><span class=n>p</span><span class=p>[</span><span class=s2>&quot;folderId&quot;</span><span class=p>]</span> <span class=k>for</span> <span class=n>p</span> <span class=ow>in</span> <span class=n>product_entities_by_id</span><span class=o>.</span><span class=n>values</span><span class=p>()}</span>
    <span class=n>folder_entities</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_folders</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span> <span class=n>folder_ids</span><span class=o>=</span><span class=n>folder_ids</span>
    <span class=p>)</span>
    <span class=n>folder_entities_by_id</span> <span class=o>=</span> <span class=p>{</span>
        <span class=n>f</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]:</span> <span class=n>f</span> <span class=k>for</span> <span class=n>f</span> <span class=ow>in</span> <span class=n>folder_entities</span>
    <span class=p>}</span>

    <span class=n>project_entity</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_project</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>

    <span class=k>for</span> <span class=n>product_id</span><span class=p>,</span> <span class=n>product_entity</span> <span class=ow>in</span> <span class=n>product_entities_by_id</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
        <span class=n>folder_id</span> <span class=o>=</span> <span class=n>product_entity</span><span class=p>[</span><span class=s2>&quot;folderId&quot;</span><span class=p>]</span>
        <span class=n>folder_entity</span> <span class=o>=</span> <span class=n>folder_entities_by_id</span><span class=p>[</span><span class=n>folder_id</span><span class=p>]</span>
        <span class=n>product_context_by_id</span><span class=p>[</span><span class=n>product_id</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span>
            <span class=s2>&quot;project&quot;</span><span class=p>:</span> <span class=n>project_entity</span><span class=p>,</span>
            <span class=s2>&quot;folder&quot;</span><span class=p>:</span> <span class=n>folder_entity</span><span class=p>,</span>
            <span class=s2>&quot;product&quot;</span><span class=p>:</span> <span class=n>product_entity</span><span class=p>,</span>
        <span class=p>}</span>

    <span class=k>for</span> <span class=n>repre_entity</span> <span class=ow>in</span> <span class=n>repre_entities</span><span class=p>:</span>
        <span class=n>version_id</span> <span class=o>=</span> <span class=n>repre_entity</span><span class=p>[</span><span class=s2>&quot;versionId&quot;</span><span class=p>]</span>
        <span class=n>version_entity</span> <span class=o>=</span> <span class=n>version_entities_by_id</span><span class=p>[</span><span class=n>version_id</span><span class=p>]</span>
        <span class=n>product_id</span> <span class=o>=</span> <span class=n>version_entity</span><span class=p>[</span><span class=s2>&quot;productId&quot;</span><span class=p>]</span>
        <span class=n>product_entity</span> <span class=o>=</span> <span class=n>product_entities_by_id</span><span class=p>[</span><span class=n>product_id</span><span class=p>]</span>
        <span class=n>folder_id</span> <span class=o>=</span> <span class=n>product_entity</span><span class=p>[</span><span class=s2>&quot;folderId&quot;</span><span class=p>]</span>
        <span class=n>folder_entity</span> <span class=o>=</span> <span class=n>folder_entities_by_id</span><span class=p>[</span><span class=n>folder_id</span><span class=p>]</span>

        <span class=n>repre_context_by_id</span><span class=p>[</span><span class=n>repre_entity</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]]</span> <span class=o>=</span> <span class=p>{</span>
            <span class=s2>&quot;project&quot;</span><span class=p>:</span> <span class=n>project_entity</span><span class=p>,</span>
            <span class=s2>&quot;folder&quot;</span><span class=p>:</span> <span class=n>folder_entity</span><span class=p>,</span>
            <span class=s2>&quot;product&quot;</span><span class=p>:</span> <span class=n>product_entity</span><span class=p>,</span>
            <span class=s2>&quot;version&quot;</span><span class=p>:</span> <span class=n>version_entity</span><span class=p>,</span>
            <span class=s2>&quot;representation&quot;</span><span class=p>:</span> <span class=n>repre_entity</span><span class=p>,</span>
        <span class=p>}</span>
    <span class=k>return</span> <span class=n>product_context_by_id</span><span class=p>,</span> <span class=n>repre_context_by_id</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.loader.models.actions.LoaderActionsModel._contexts_for_versions class="doc doc-heading"> <code class="highlight language-python"><span class=n>_contexts_for_versions</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=n>version_ids</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Get contexts for given version ids.</p> <p>Prepare version contexts for 'ProductLoaderPlugin' and representation contexts for 'LoaderPlugin' for all children representations of given versions.</p> <p>This method is very similar to '_contexts_for_representations' but the queries of entities are called in a different order.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>project_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Project name.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>version_ids</code> </td> <td> <code><span title=Iterable>Iterable</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Version ids.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>tuple[list[dict[str, Any]], list[dict[str, Any]]]: Version and representation contexts.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/loader/models/actions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>361</span>
<span class=normal>362</span>
<span class=normal>363</span>
<span class=normal>364</span>
<span class=normal>365</span>
<span class=normal>366</span>
<span class=normal>367</span>
<span class=normal>368</span>
<span class=normal>369</span>
<span class=normal>370</span>
<span class=normal>371</span>
<span class=normal>372</span>
<span class=normal>373</span>
<span class=normal>374</span>
<span class=normal>375</span>
<span class=normal>376</span>
<span class=normal>377</span>
<span class=normal>378</span>
<span class=normal>379</span>
<span class=normal>380</span>
<span class=normal>381</span>
<span class=normal>382</span>
<span class=normal>383</span>
<span class=normal>384</span>
<span class=normal>385</span>
<span class=normal>386</span>
<span class=normal>387</span>
<span class=normal>388</span>
<span class=normal>389</span>
<span class=normal>390</span>
<span class=normal>391</span>
<span class=normal>392</span>
<span class=normal>393</span>
<span class=normal>394</span>
<span class=normal>395</span>
<span class=normal>396</span>
<span class=normal>397</span>
<span class=normal>398</span>
<span class=normal>399</span>
<span class=normal>400</span>
<span class=normal>401</span>
<span class=normal>402</span>
<span class=normal>403</span>
<span class=normal>404</span>
<span class=normal>405</span>
<span class=normal>406</span>
<span class=normal>407</span>
<span class=normal>408</span>
<span class=normal>409</span>
<span class=normal>410</span>
<span class=normal>411</span>
<span class=normal>412</span>
<span class=normal>413</span>
<span class=normal>414</span>
<span class=normal>415</span>
<span class=normal>416</span>
<span class=normal>417</span>
<span class=normal>418</span>
<span class=normal>419</span>
<span class=normal>420</span>
<span class=normal>421</span>
<span class=normal>422</span>
<span class=normal>423</span>
<span class=normal>424</span>
<span class=normal>425</span>
<span class=normal>426</span>
<span class=normal>427</span>
<span class=normal>428</span>
<span class=normal>429</span>
<span class=normal>430</span>
<span class=normal>431</span>
<span class=normal>432</span>
<span class=normal>433</span>
<span class=normal>434</span>
<span class=normal>435</span>
<span class=normal>436</span>
<span class=normal>437</span>
<span class=normal>438</span>
<span class=normal>439</span>
<span class=normal>440</span>
<span class=normal>441</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>_contexts_for_versions</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>project_name</span><span class=p>,</span> <span class=n>version_ids</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get contexts for given version ids.</span>

<span class=sd>    Prepare version contexts for &#39;ProductLoaderPlugin&#39; and representation</span>
<span class=sd>    contexts for &#39;LoaderPlugin&#39; for all children representations of</span>
<span class=sd>    given versions.</span>

<span class=sd>    This method is very similar to &#39;_contexts_for_representations&#39; but the</span>
<span class=sd>    queries of entities are called in a different order.</span>

<span class=sd>    Args:</span>
<span class=sd>        project_name (str): Project name.</span>
<span class=sd>        version_ids (Iterable[str]): Version ids.</span>

<span class=sd>    Returns:</span>
<span class=sd>        tuple[list[dict[str, Any]], list[dict[str, Any]]]: Version and</span>
<span class=sd>            representation contexts.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=c1># TODO fix hero version</span>
    <span class=n>version_context_by_id</span> <span class=o>=</span> <span class=p>{}</span>
    <span class=n>repre_context_by_id</span> <span class=o>=</span> <span class=p>{}</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>project_name</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>version_ids</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>version_context_by_id</span><span class=p>,</span> <span class=n>repre_context_by_id</span>

    <span class=n>version_entities</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_versions</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span> <span class=n>version_ids</span><span class=o>=</span><span class=n>version_ids</span>
    <span class=p>)</span>
    <span class=n>version_entities_by_id</span> <span class=o>=</span> <span class=p>{}</span>
    <span class=n>version_entities_by_product_id</span> <span class=o>=</span> <span class=n>collections</span><span class=o>.</span><span class=n>defaultdict</span><span class=p>(</span><span class=nb>list</span><span class=p>)</span>
    <span class=k>for</span> <span class=n>version_entity</span> <span class=ow>in</span> <span class=n>version_entities</span><span class=p>:</span>
        <span class=n>version_id</span> <span class=o>=</span> <span class=n>version_entity</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]</span>
        <span class=n>product_id</span> <span class=o>=</span> <span class=n>version_entity</span><span class=p>[</span><span class=s2>&quot;productId&quot;</span><span class=p>]</span>
        <span class=n>version_entities_by_id</span><span class=p>[</span><span class=n>version_id</span><span class=p>]</span> <span class=o>=</span> <span class=n>version_entity</span>
        <span class=n>version_entities_by_product_id</span><span class=p>[</span><span class=n>product_id</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>version_entity</span><span class=p>)</span>

    <span class=n>_product_ids</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span><span class=n>version_entities_by_product_id</span><span class=o>.</span><span class=n>keys</span><span class=p>())</span>
    <span class=n>_product_entities</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_products</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span> <span class=n>product_ids</span><span class=o>=</span><span class=n>_product_ids</span>
    <span class=p>)</span>
    <span class=n>product_entities_by_id</span> <span class=o>=</span> <span class=p>{</span><span class=n>p</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]:</span> <span class=n>p</span> <span class=k>for</span> <span class=n>p</span> <span class=ow>in</span> <span class=n>_product_entities</span><span class=p>}</span>

    <span class=n>_folder_ids</span> <span class=o>=</span> <span class=p>{</span><span class=n>p</span><span class=p>[</span><span class=s2>&quot;folderId&quot;</span><span class=p>]</span> <span class=k>for</span> <span class=n>p</span> <span class=ow>in</span> <span class=n>product_entities_by_id</span><span class=o>.</span><span class=n>values</span><span class=p>()}</span>
    <span class=n>_folder_entities</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_folders</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span> <span class=n>folder_ids</span><span class=o>=</span><span class=n>_folder_ids</span>
    <span class=p>)</span>
    <span class=n>folder_entities_by_id</span> <span class=o>=</span> <span class=p>{</span><span class=n>f</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]:</span> <span class=n>f</span> <span class=k>for</span> <span class=n>f</span> <span class=ow>in</span> <span class=n>_folder_entities</span><span class=p>}</span>

    <span class=n>project_entity</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_project</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>

    <span class=k>for</span> <span class=n>version_id</span><span class=p>,</span> <span class=n>version_entity</span> <span class=ow>in</span> <span class=n>version_entities_by_id</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
        <span class=n>product_id</span> <span class=o>=</span> <span class=n>version_entity</span><span class=p>[</span><span class=s2>&quot;productId&quot;</span><span class=p>]</span>
        <span class=n>product_entity</span> <span class=o>=</span> <span class=n>product_entities_by_id</span><span class=p>[</span><span class=n>product_id</span><span class=p>]</span>
        <span class=n>folder_id</span> <span class=o>=</span> <span class=n>product_entity</span><span class=p>[</span><span class=s2>&quot;folderId&quot;</span><span class=p>]</span>
        <span class=n>folder_entity</span> <span class=o>=</span> <span class=n>folder_entities_by_id</span><span class=p>[</span><span class=n>folder_id</span><span class=p>]</span>
        <span class=n>version_context_by_id</span><span class=p>[</span><span class=n>version_id</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span>
            <span class=s2>&quot;project&quot;</span><span class=p>:</span> <span class=n>project_entity</span><span class=p>,</span>
            <span class=s2>&quot;folder&quot;</span><span class=p>:</span> <span class=n>folder_entity</span><span class=p>,</span>
            <span class=s2>&quot;product&quot;</span><span class=p>:</span> <span class=n>product_entity</span><span class=p>,</span>
            <span class=s2>&quot;version&quot;</span><span class=p>:</span> <span class=n>version_entity</span><span class=p>,</span>
        <span class=p>}</span>

    <span class=n>repre_entities</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_representations</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span> <span class=n>version_ids</span><span class=o>=</span><span class=n>version_ids</span><span class=p>)</span>
    <span class=k>for</span> <span class=n>repre_entity</span> <span class=ow>in</span> <span class=n>repre_entities</span><span class=p>:</span>
        <span class=n>version_id</span> <span class=o>=</span> <span class=n>repre_entity</span><span class=p>[</span><span class=s2>&quot;versionId&quot;</span><span class=p>]</span>
        <span class=n>version_entity</span> <span class=o>=</span> <span class=n>version_entities_by_id</span><span class=p>[</span><span class=n>version_id</span><span class=p>]</span>
        <span class=n>product_id</span> <span class=o>=</span> <span class=n>version_entity</span><span class=p>[</span><span class=s2>&quot;productId&quot;</span><span class=p>]</span>
        <span class=n>product_entity</span> <span class=o>=</span> <span class=n>product_entities_by_id</span><span class=p>[</span><span class=n>product_id</span><span class=p>]</span>
        <span class=n>folder_id</span> <span class=o>=</span> <span class=n>product_entity</span><span class=p>[</span><span class=s2>&quot;folderId&quot;</span><span class=p>]</span>
        <span class=n>folder_entity</span> <span class=o>=</span> <span class=n>folder_entities_by_id</span><span class=p>[</span><span class=n>folder_id</span><span class=p>]</span>

        <span class=n>repre_context_by_id</span><span class=p>[</span><span class=n>repre_entity</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]]</span> <span class=o>=</span> <span class=p>{</span>
            <span class=s2>&quot;project&quot;</span><span class=p>:</span> <span class=n>project_entity</span><span class=p>,</span>
            <span class=s2>&quot;folder&quot;</span><span class=p>:</span> <span class=n>folder_entity</span><span class=p>,</span>
            <span class=s2>&quot;product&quot;</span><span class=p>:</span> <span class=n>product_entity</span><span class=p>,</span>
            <span class=s2>&quot;version&quot;</span><span class=p>:</span> <span class=n>version_entity</span><span class=p>,</span>
            <span class=s2>&quot;representation&quot;</span><span class=p>:</span> <span class=n>repre_entity</span><span class=p>,</span>
        <span class=p>}</span>

    <span class=k>return</span> <span class=n>version_context_by_id</span><span class=p>,</span> <span class=n>repre_context_by_id</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.loader.models.actions.LoaderActionsModel._filter_loaders_by_tool_name class="doc doc-heading"> <code class="highlight language-python"><span class=n>_filter_loaders_by_tool_name</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=n>loaders</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Filter loaders by tool name.</p> <p>Tool names are based on AYON tools loader tool and library loader tool. The new tool merged both into one tool and the difference is based only on current project name.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>project_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Project name.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>loaders</code> </td> <td> <code><span title=list>list</span>[<span title=LoaderPlugin>LoaderPlugin</span>]</code> </td> <td> <div class=doc-md-description> <p>List of loader plugins.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>list[LoaderPlugin]: Filtered list of loader plugins.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/loader/models/actions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>_filter_loaders_by_tool_name</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>project_name</span><span class=p>,</span> <span class=n>loaders</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Filter loaders by tool name.</span>

<span class=sd>    Tool names are based on AYON tools loader tool and library</span>
<span class=sd>    loader tool. The new tool merged both into one tool and the difference</span>
<span class=sd>    is based only on current project name.</span>

<span class=sd>    Args:</span>
<span class=sd>        project_name (str): Project name.</span>
<span class=sd>        loaders (list[LoaderPlugin]): List of loader plugins.</span>

<span class=sd>    Returns:</span>
<span class=sd>        list[LoaderPlugin]: Filtered list of loader plugins.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=c1># Keep filtering by tool name</span>
    <span class=c1># - if current context project name is same as project name we do</span>
    <span class=c1>#   expect the tool is used as AYON loader tool, otherwise</span>
    <span class=c1>#   as library loader tool.</span>
    <span class=k>if</span> <span class=n>project_name</span> <span class=o>==</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_current_context_project</span><span class=p>():</span>
        <span class=n>tool_name</span> <span class=o>=</span> <span class=s2>&quot;loader&quot;</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=n>tool_name</span> <span class=o>=</span> <span class=s2>&quot;library_loader&quot;</span>
    <span class=n>filtered_loaders</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>for</span> <span class=n>loader</span> <span class=ow>in</span> <span class=n>loaders</span><span class=p>:</span>
        <span class=n>tool_names</span> <span class=o>=</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>loader</span><span class=p>,</span> <span class=s2>&quot;tool_names&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
        <span class=k>if</span> <span class=p>(</span>
            <span class=n>tool_names</span> <span class=ow>is</span> <span class=kc>None</span>
            <span class=ow>or</span> <span class=s2>&quot;*&quot;</span> <span class=ow>in</span> <span class=n>tool_names</span>
            <span class=ow>or</span> <span class=n>tool_name</span> <span class=ow>in</span> <span class=n>tool_names</span>
        <span class=p>):</span>
            <span class=n>filtered_loaders</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>loader</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>filtered_loaders</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.loader.models.actions.LoaderActionsModel._get_action_icon class="doc doc-heading"> <code class="highlight language-python"><span class=n>_get_action_icon</span><span class=p>(</span><span class=n>loader</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Pull icon info from loader class.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>loader</code> </td> <td> <code><span title=LoaderPlugin>LoaderPlugin</span></code> </td> <td> <div class=doc-md-description> <p>Plugin class.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Union[dict[str, Any], None]: Icon definition based on loader plugin.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/loader/models/actions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>_get_action_icon</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>loader</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Pull icon info from loader class.</span>

<span class=sd>    Args:</span>
<span class=sd>        loader (LoaderPlugin): Plugin class.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Union[dict[str, Any], None]: Icon definition based on</span>
<span class=sd>            loader plugin.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=c1># Support font-awesome icons using the `.icon` and `.color`</span>
    <span class=c1># attributes on plug-ins.</span>
    <span class=n>icon</span> <span class=o>=</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>loader</span><span class=p>,</span> <span class=s2>&quot;icon&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>icon</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=ow>and</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>icon</span><span class=p>,</span> <span class=nb>dict</span><span class=p>):</span>
        <span class=n>icon</span> <span class=o>=</span> <span class=p>{</span>
            <span class=s2>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;awesome-font&quot;</span><span class=p>,</span>
            <span class=s2>&quot;name&quot;</span><span class=p>:</span> <span class=n>icon</span><span class=p>,</span>
            <span class=s2>&quot;color&quot;</span><span class=p>:</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>loader</span><span class=p>,</span> <span class=s2>&quot;color&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span> <span class=ow>or</span> <span class=s2>&quot;white&quot;</span>
        <span class=p>}</span>
    <span class=k>return</span> <span class=n>icon</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.loader.models.actions.LoaderActionsModel._get_action_items_for_contexts class="doc doc-heading"> <code class="highlight language-python"><span class=n>_get_action_items_for_contexts</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=n>version_context_by_id</span><span class=p>,</span> <span class=n>repre_context_by_id</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Prepare action items based on contexts.</p> <p>Actions are prepared based on discovered loader plugins and contexts. The context must be valid for the loader plugin.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>project_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Project name.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>version_context_by_id</code> </td> <td> <code><span title=dict>dict</span>[<span title=str>str</span>, <span title=dict>dict</span>[<span title=str>str</span>, <span title=Any>Any</span>]]</code> </td> <td> <div class=doc-md-description> <p>Version contexts by version id.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>repre_context_by_id</code> </td> <td> <code><span title=dict>dict</span>[<span title=str>str</span>, <span title=dict>dict</span>[<span title=str>str</span>, <span title=Any>Any</span>]]</code> </td> <td> <div class=doc-md-description> <p>Representation</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/loader/models/actions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>522</span>
<span class=normal>523</span>
<span class=normal>524</span>
<span class=normal>525</span>
<span class=normal>526</span>
<span class=normal>527</span>
<span class=normal>528</span>
<span class=normal>529</span>
<span class=normal>530</span>
<span class=normal>531</span>
<span class=normal>532</span>
<span class=normal>533</span>
<span class=normal>534</span>
<span class=normal>535</span>
<span class=normal>536</span>
<span class=normal>537</span>
<span class=normal>538</span>
<span class=normal>539</span>
<span class=normal>540</span>
<span class=normal>541</span>
<span class=normal>542</span>
<span class=normal>543</span>
<span class=normal>544</span>
<span class=normal>545</span>
<span class=normal>546</span>
<span class=normal>547</span>
<span class=normal>548</span>
<span class=normal>549</span>
<span class=normal>550</span>
<span class=normal>551</span>
<span class=normal>552</span>
<span class=normal>553</span>
<span class=normal>554</span>
<span class=normal>555</span>
<span class=normal>556</span>
<span class=normal>557</span>
<span class=normal>558</span>
<span class=normal>559</span>
<span class=normal>560</span>
<span class=normal>561</span>
<span class=normal>562</span>
<span class=normal>563</span>
<span class=normal>564</span>
<span class=normal>565</span>
<span class=normal>566</span>
<span class=normal>567</span>
<span class=normal>568</span>
<span class=normal>569</span>
<span class=normal>570</span>
<span class=normal>571</span>
<span class=normal>572</span>
<span class=normal>573</span>
<span class=normal>574</span>
<span class=normal>575</span>
<span class=normal>576</span>
<span class=normal>577</span>
<span class=normal>578</span>
<span class=normal>579</span>
<span class=normal>580</span>
<span class=normal>581</span>
<span class=normal>582</span>
<span class=normal>583</span>
<span class=normal>584</span>
<span class=normal>585</span>
<span class=normal>586</span>
<span class=normal>587</span>
<span class=normal>588</span>
<span class=normal>589</span>
<span class=normal>590</span>
<span class=normal>591</span>
<span class=normal>592</span>
<span class=normal>593</span>
<span class=normal>594</span>
<span class=normal>595</span>
<span class=normal>596</span>
<span class=normal>597</span>
<span class=normal>598</span>
<span class=normal>599</span>
<span class=normal>600</span>
<span class=normal>601</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>_get_action_items_for_contexts</span><span class=p>(</span>
    <span class=bp>self</span><span class=p>,</span>
    <span class=n>project_name</span><span class=p>,</span>
    <span class=n>version_context_by_id</span><span class=p>,</span>
    <span class=n>repre_context_by_id</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Prepare action items based on contexts.</span>

<span class=sd>    Actions are prepared based on discovered loader plugins and contexts.</span>
<span class=sd>    The context must be valid for the loader plugin.</span>

<span class=sd>    Args:</span>
<span class=sd>        project_name (str): Project name.</span>
<span class=sd>        version_context_by_id (dict[str, dict[str, Any]]): Version</span>
<span class=sd>            contexts by version id.</span>
<span class=sd>        repre_context_by_id (dict[str, dict[str, Any]]): Representation</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>action_items</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>version_context_by_id</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>repre_context_by_id</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>action_items</span>

    <span class=n>product_loaders</span><span class=p>,</span> <span class=n>repre_loaders</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_loaders</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>

    <span class=n>repre_contexts_by_name</span> <span class=o>=</span> <span class=n>collections</span><span class=o>.</span><span class=n>defaultdict</span><span class=p>(</span><span class=nb>list</span><span class=p>)</span>
    <span class=k>for</span> <span class=n>repre_context</span> <span class=ow>in</span> <span class=n>repre_context_by_id</span><span class=o>.</span><span class=n>values</span><span class=p>():</span>
        <span class=n>repre_name</span> <span class=o>=</span> <span class=n>repre_context</span><span class=p>[</span><span class=s2>&quot;representation&quot;</span><span class=p>][</span><span class=s2>&quot;name&quot;</span><span class=p>]</span>
        <span class=n>repre_contexts_by_name</span><span class=p>[</span><span class=n>repre_name</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>repre_context</span><span class=p>)</span>

    <span class=k>for</span> <span class=n>loader</span> <span class=ow>in</span> <span class=n>repre_loaders</span><span class=p>:</span>
        <span class=k>for</span> <span class=n>repre_name</span><span class=p>,</span> <span class=n>repre_contexts</span> <span class=ow>in</span> <span class=n>repre_contexts_by_name</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=n>filtered_repre_contexts</span> <span class=o>=</span> <span class=n>filter_repre_contexts_by_loader</span><span class=p>(</span>
                <span class=n>repre_contexts</span><span class=p>,</span> <span class=n>loader</span><span class=p>)</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=n>filtered_repre_contexts</span><span class=p>:</span>
                <span class=k>continue</span>

            <span class=n>repre_ids</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
            <span class=n>repre_version_ids</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
            <span class=n>repre_product_ids</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
            <span class=n>repre_folder_ids</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
            <span class=k>for</span> <span class=n>repre_context</span> <span class=ow>in</span> <span class=n>filtered_repre_contexts</span><span class=p>:</span>
                <span class=n>repre_ids</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>repre_context</span><span class=p>[</span><span class=s2>&quot;representation&quot;</span><span class=p>][</span><span class=s2>&quot;id&quot;</span><span class=p>])</span>
                <span class=n>repre_product_ids</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>repre_context</span><span class=p>[</span><span class=s2>&quot;product&quot;</span><span class=p>][</span><span class=s2>&quot;id&quot;</span><span class=p>])</span>
                <span class=n>repre_version_ids</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>repre_context</span><span class=p>[</span><span class=s2>&quot;version&quot;</span><span class=p>][</span><span class=s2>&quot;id&quot;</span><span class=p>])</span>
                <span class=n>repre_folder_ids</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>repre_context</span><span class=p>[</span><span class=s2>&quot;folder&quot;</span><span class=p>][</span><span class=s2>&quot;id&quot;</span><span class=p>])</span>

            <span class=n>item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_create_loader_action_item</span><span class=p>(</span>
                <span class=n>loader</span><span class=p>,</span>
                <span class=n>repre_contexts</span><span class=p>,</span>
                <span class=n>project_name</span><span class=o>=</span><span class=n>project_name</span><span class=p>,</span>
                <span class=n>folder_ids</span><span class=o>=</span><span class=n>repre_folder_ids</span><span class=p>,</span>
                <span class=n>product_ids</span><span class=o>=</span><span class=n>repre_product_ids</span><span class=p>,</span>
                <span class=n>version_ids</span><span class=o>=</span><span class=n>repre_version_ids</span><span class=p>,</span>
                <span class=n>representation_ids</span><span class=o>=</span><span class=n>repre_ids</span><span class=p>,</span>
                <span class=n>repre_name</span><span class=o>=</span><span class=n>repre_name</span><span class=p>,</span>
            <span class=p>)</span>
            <span class=n>action_items</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>

    <span class=c1># Product Loaders.</span>
    <span class=n>version_ids</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span><span class=n>version_context_by_id</span><span class=o>.</span><span class=n>keys</span><span class=p>())</span>
    <span class=n>product_folder_ids</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
    <span class=n>product_ids</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
    <span class=k>for</span> <span class=n>product_context</span> <span class=ow>in</span> <span class=n>version_context_by_id</span><span class=o>.</span><span class=n>values</span><span class=p>():</span>
        <span class=n>product_ids</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>product_context</span><span class=p>[</span><span class=s2>&quot;product&quot;</span><span class=p>][</span><span class=s2>&quot;id&quot;</span><span class=p>])</span>
        <span class=n>product_folder_ids</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>product_context</span><span class=p>[</span><span class=s2>&quot;folder&quot;</span><span class=p>][</span><span class=s2>&quot;id&quot;</span><span class=p>])</span>

    <span class=n>version_contexts</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>version_context_by_id</span><span class=o>.</span><span class=n>values</span><span class=p>())</span>
    <span class=k>for</span> <span class=n>loader</span> <span class=ow>in</span> <span class=n>product_loaders</span><span class=p>:</span>
        <span class=n>item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_create_loader_action_item</span><span class=p>(</span>
            <span class=n>loader</span><span class=p>,</span>
            <span class=n>version_contexts</span><span class=p>,</span>
            <span class=n>project_name</span><span class=o>=</span><span class=n>project_name</span><span class=p>,</span>
            <span class=n>folder_ids</span><span class=o>=</span><span class=n>product_folder_ids</span><span class=p>,</span>
            <span class=n>product_ids</span><span class=o>=</span><span class=n>product_ids</span><span class=p>,</span>
            <span class=n>version_ids</span><span class=o>=</span><span class=n>version_ids</span><span class=p>,</span>
        <span class=p>)</span>
        <span class=n>action_items</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>

    <span class=n>action_items</span><span class=o>.</span><span class=n>sort</span><span class=p>(</span><span class=n>key</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_actions_sorter</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>action_items</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.loader.models.actions.LoaderActionsModel._get_action_label class="doc doc-heading"> <code class="highlight language-python"><span class=n>_get_action_label</span><span class=p>(</span><span class=n>loader</span><span class=p>,</span> <span class=n>representation</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Pull label info from loader class.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>loader</code> </td> <td> <code><span title=LoaderPlugin>LoaderPlugin</span></code> </td> <td> <div class=doc-md-description> <p>Plugin class.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>representation</code> </td> <td> <code><span title=Optional>Optional</span>[<span title=dict>dict</span>[<span title=str>str</span>, <span title=Any>Any</span>]]</code> </td> <td> <div class=doc-md-description> <p>Representation data.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>Action label.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/loader/models/actions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>_get_action_label</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>loader</span><span class=p>,</span> <span class=n>representation</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Pull label info from loader class.</span>

<span class=sd>    Args:</span>
<span class=sd>        loader (LoaderPlugin): Plugin class.</span>
<span class=sd>        representation (Optional[dict[str, Any]]): Representation data.</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: Action label.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>label</span> <span class=o>=</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>loader</span><span class=p>,</span> <span class=s2>&quot;label&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>label</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>label</span> <span class=o>=</span> <span class=n>loader</span><span class=o>.</span><span class=vm>__name__</span>
    <span class=k>if</span> <span class=n>representation</span><span class=p>:</span>
        <span class=c1># Add the representation as suffix</span>
        <span class=n>label</span> <span class=o>=</span> <span class=s2>&quot;</span><span class=si>{}</span><span class=s2> (</span><span class=si>{}</span><span class=s2>)&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>label</span><span class=p>,</span> <span class=n>representation</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>])</span>
    <span class=k>return</span> <span class=n>label</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.loader.models.actions.LoaderActionsModel._get_action_tooltip class="doc doc-heading"> <code class="highlight language-python"><span class=n>_get_action_tooltip</span><span class=p>(</span><span class=n>loader</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Pull tooltip info from loader class.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>loader</code> </td> <td> <code><span title=LoaderPlugin>LoaderPlugin</span></code> </td> <td> <div class=doc-md-description> <p>Plugin class.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>Action tooltip.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/loader/models/actions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>_get_action_tooltip</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>loader</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Pull tooltip info from loader class.</span>

<span class=sd>    Args:</span>
<span class=sd>        loader (LoaderPlugin): Plugin class.</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: Action tooltip.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=c1># Add tooltip and statustip from Loader docstring</span>
    <span class=k>return</span> <span class=n>inspect</span><span class=o>.</span><span class=n>getdoc</span><span class=p>(</span><span class=n>loader</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.loader.models.actions.LoaderActionsModel._get_current_context_project class="doc doc-heading"> <code class="highlight language-python"><span class=n>_get_current_context_project</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Get current context project name.</p> <p>The value is based on controller (host) and cached.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Union[str, None]: Current context project.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/loader/models/actions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>_get_current_context_project</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get current context project name.</span>

<span class=sd>    The value is based on controller (host) and cached.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Union[str, None]: Current context project.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_context_project</span> <span class=ow>is</span> <span class=n>NOT_SET</span><span class=p>:</span>
        <span class=n>context</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_controller</span><span class=o>.</span><span class=n>get_current_context</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_current_context_project</span> <span class=o>=</span> <span class=n>context</span><span class=p>[</span><span class=s2>&quot;project_name&quot;</span><span class=p>]</span>
    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_context_project</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.loader.models.actions.LoaderActionsModel._get_loaders class="doc doc-heading"> <code class="highlight language-python"><span class=n>_get_loaders</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Loaders with loaded settings for a project.</p> <details class=questions open> <summary>Questions</summary> <p>Project name is required because of settings. Should we actually pass in current project name instead of project name where we want to show loaders for?</p> </details> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>tuple[list[ProductLoaderPlugin], list[LoaderPlugin]]: Discovered loader plugins.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/loader/models/actions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>301</span>
<span class=normal>302</span>
<span class=normal>303</span>
<span class=normal>304</span>
<span class=normal>305</span>
<span class=normal>306</span>
<span class=normal>307</span>
<span class=normal>308</span>
<span class=normal>309</span>
<span class=normal>310</span>
<span class=normal>311</span>
<span class=normal>312</span>
<span class=normal>313</span>
<span class=normal>314</span>
<span class=normal>315</span>
<span class=normal>316</span>
<span class=normal>317</span>
<span class=normal>318</span>
<span class=normal>319</span>
<span class=normal>320</span>
<span class=normal>321</span>
<span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span>
<span class=normal>325</span>
<span class=normal>326</span>
<span class=normal>327</span>
<span class=normal>328</span>
<span class=normal>329</span>
<span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span>
<span class=normal>334</span>
<span class=normal>335</span>
<span class=normal>336</span>
<span class=normal>337</span>
<span class=normal>338</span>
<span class=normal>339</span>
<span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>_get_loaders</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>project_name</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Loaders with loaded settings for a project.</span>

<span class=sd>    Questions:</span>
<span class=sd>        Project name is required because of settings. Should we actually</span>
<span class=sd>            pass in current project name instead of project name where</span>
<span class=sd>            we want to show loaders for?</span>

<span class=sd>    Returns:</span>
<span class=sd>        tuple[list[ProductLoaderPlugin], list[LoaderPlugin]]: Discovered</span>
<span class=sd>            loader plugins.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>loaders_by_identifier_c</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_loaders_by_identifier</span><span class=p>[</span><span class=n>project_name</span><span class=p>]</span>
    <span class=n>product_loaders_c</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_product_loaders</span><span class=p>[</span><span class=n>project_name</span><span class=p>]</span>
    <span class=n>repre_loaders_c</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_repre_loaders</span><span class=p>[</span><span class=n>project_name</span><span class=p>]</span>
    <span class=k>if</span> <span class=n>loaders_by_identifier_c</span><span class=o>.</span><span class=n>is_valid</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>product_loaders_c</span><span class=o>.</span><span class=n>get_data</span><span class=p>(),</span> <span class=n>repre_loaders_c</span><span class=o>.</span><span class=n>get_data</span><span class=p>()</span>

    <span class=c1># Get all representation-&gt;loader combinations available for the</span>
    <span class=c1># index under the cursor, so we can list the user the options.</span>
    <span class=n>available_loaders</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_filter_loaders_by_tool_name</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span> <span class=n>discover_loader_plugins</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>
    <span class=p>)</span>

    <span class=n>repre_loaders</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=n>product_loaders</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=n>loaders_by_identifier</span> <span class=o>=</span> <span class=p>{}</span>
    <span class=k>for</span> <span class=n>loader_cls</span> <span class=ow>in</span> <span class=n>available_loaders</span><span class=p>:</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>loader_cls</span><span class=o>.</span><span class=n>enabled</span><span class=p>:</span>
            <span class=k>continue</span>

        <span class=n>identifier</span> <span class=o>=</span> <span class=n>get_loader_identifier</span><span class=p>(</span><span class=n>loader_cls</span><span class=p>)</span>
        <span class=n>loaders_by_identifier</span><span class=p>[</span><span class=n>identifier</span><span class=p>]</span> <span class=o>=</span> <span class=n>loader_cls</span>
        <span class=k>if</span> <span class=nb>issubclass</span><span class=p>(</span><span class=n>loader_cls</span><span class=p>,</span> <span class=n>ProductLoaderPlugin</span><span class=p>):</span>
            <span class=n>product_loaders</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>loader_cls</span><span class=p>)</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>repre_loaders</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>loader_cls</span><span class=p>)</span>

    <span class=n>loaders_by_identifier_c</span><span class=o>.</span><span class=n>update_data</span><span class=p>(</span><span class=n>loaders_by_identifier</span><span class=p>)</span>
    <span class=n>product_loaders_c</span><span class=o>.</span><span class=n>update_data</span><span class=p>(</span><span class=n>product_loaders</span><span class=p>)</span>
    <span class=n>repre_loaders_c</span><span class=o>.</span><span class=n>update_data</span><span class=p>(</span><span class=n>repre_loaders</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>product_loaders</span><span class=p>,</span> <span class=n>repre_loaders</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.loader.models.actions.LoaderActionsModel._load_products_by_loader class="doc doc-heading"> <code class="highlight language-python"><span class=n>_load_products_by_loader</span><span class=p>(</span><span class=n>loader</span><span class=p>,</span> <span class=n>version_contexts</span><span class=p>,</span> <span class=n>options</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Triggers load with ProductLoader type of loaders.</p> <details class=warning open> <summary>Warning</summary> <p>Plugin is named 'ProductLoader' but version is passed to context too.</p> </details> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>loader</code> </td> <td> <code><span title=ProductLoader>ProductLoader</span></code> </td> <td> <div class=doc-md-description> <p>Loader used to load.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>version_contexts</code> </td> <td> <code><span title=list>list</span>[<span title=dict>dict</span>[<span title=str>str</span>, <span title=Any>Any</span>]]</code> </td> <td> <div class=doc-md-description> <p>For context for each version.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>options</code> </td> <td> <code><span title=dict>dict</span>[<span title=str>str</span>, <span title=Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Options for loader that user could fill.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/loader/models/actions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>773</span>
<span class=normal>774</span>
<span class=normal>775</span>
<span class=normal>776</span>
<span class=normal>777</span>
<span class=normal>778</span>
<span class=normal>779</span>
<span class=normal>780</span>
<span class=normal>781</span>
<span class=normal>782</span>
<span class=normal>783</span>
<span class=normal>784</span>
<span class=normal>785</span>
<span class=normal>786</span>
<span class=normal>787</span>
<span class=normal>788</span>
<span class=normal>789</span>
<span class=normal>790</span>
<span class=normal>791</span>
<span class=normal>792</span>
<span class=normal>793</span>
<span class=normal>794</span>
<span class=normal>795</span>
<span class=normal>796</span>
<span class=normal>797</span>
<span class=normal>798</span>
<span class=normal>799</span>
<span class=normal>800</span>
<span class=normal>801</span>
<span class=normal>802</span>
<span class=normal>803</span>
<span class=normal>804</span>
<span class=normal>805</span>
<span class=normal>806</span>
<span class=normal>807</span>
<span class=normal>808</span>
<span class=normal>809</span>
<span class=normal>810</span>
<span class=normal>811</span>
<span class=normal>812</span>
<span class=normal>813</span>
<span class=normal>814</span>
<span class=normal>815</span>
<span class=normal>816</span>
<span class=normal>817</span>
<span class=normal>818</span>
<span class=normal>819</span>
<span class=normal>820</span>
<span class=normal>821</span>
<span class=normal>822</span>
<span class=normal>823</span>
<span class=normal>824</span>
<span class=normal>825</span>
<span class=normal>826</span>
<span class=normal>827</span>
<span class=normal>828</span>
<span class=normal>829</span>
<span class=normal>830</span>
<span class=normal>831</span>
<span class=normal>832</span>
<span class=normal>833</span>
<span class=normal>834</span>
<span class=normal>835</span>
<span class=normal>836</span>
<span class=normal>837</span>
<span class=normal>838</span>
<span class=normal>839</span>
<span class=normal>840</span>
<span class=normal>841</span>
<span class=normal>842</span>
<span class=normal>843</span>
<span class=normal>844</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>_load_products_by_loader</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>loader</span><span class=p>,</span> <span class=n>version_contexts</span><span class=p>,</span> <span class=n>options</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Triggers load with ProductLoader type of loaders.</span>

<span class=sd>    Warning:</span>
<span class=sd>        Plugin is named &#39;ProductLoader&#39; but version is passed to context</span>
<span class=sd>            too.</span>

<span class=sd>    Args:</span>
<span class=sd>        loader (ProductLoader): Loader used to load.</span>
<span class=sd>        version_contexts (list[dict[str, Any]]): For context for each</span>
<span class=sd>            version.</span>
<span class=sd>        options (dict[str, Any]): Options for loader that user could fill.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>error_info</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>if</span> <span class=n>loader</span><span class=o>.</span><span class=n>is_multiple_contexts_compatible</span><span class=p>:</span>
        <span class=n>product_names</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>for</span> <span class=n>context</span> <span class=ow>in</span> <span class=n>version_contexts</span><span class=p>:</span>
            <span class=n>product_name</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;product&quot;</span><span class=p>,</span> <span class=p>{})</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;name&quot;</span><span class=p>)</span> <span class=ow>or</span> <span class=s2>&quot;N/A&quot;</span>
            <span class=n>product_names</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>product_name</span><span class=p>)</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=n>load_with_product_contexts</span><span class=p>(</span>
                <span class=n>loader</span><span class=p>,</span>
                <span class=n>version_contexts</span><span class=p>,</span>
                <span class=n>options</span><span class=o>=</span><span class=n>options</span>
            <span class=p>)</span>

        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>exc</span><span class=p>:</span>
            <span class=n>formatted_traceback</span> <span class=o>=</span> <span class=kc>None</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>exc</span><span class=p>,</span> <span class=n>LoadError</span><span class=p>):</span>
                <span class=n>exc_type</span><span class=p>,</span> <span class=n>exc_value</span><span class=p>,</span> <span class=n>exc_traceback</span> <span class=o>=</span> <span class=n>sys</span><span class=o>.</span><span class=n>exc_info</span><span class=p>()</span>
                <span class=n>formatted_traceback</span> <span class=o>=</span> <span class=s2>&quot;&quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>traceback</span><span class=o>.</span><span class=n>format_exception</span><span class=p>(</span>
                    <span class=n>exc_type</span><span class=p>,</span> <span class=n>exc_value</span><span class=p>,</span> <span class=n>exc_traceback</span>
                <span class=p>))</span>
            <span class=n>error_info</span><span class=o>.</span><span class=n>append</span><span class=p>((</span>
                <span class=nb>str</span><span class=p>(</span><span class=n>exc</span><span class=p>),</span>
                <span class=n>formatted_traceback</span><span class=p>,</span>
                <span class=kc>None</span><span class=p>,</span>
                <span class=s2>&quot;, &quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>product_names</span><span class=p>),</span>
                <span class=kc>None</span>
            <span class=p>))</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=k>for</span> <span class=n>version_context</span> <span class=ow>in</span> <span class=n>version_contexts</span><span class=p>:</span>
            <span class=n>product_name</span> <span class=o>=</span> <span class=p>(</span>
                <span class=n>version_context</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;product&quot;</span><span class=p>,</span> <span class=p>{})</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;name&quot;</span><span class=p>)</span> <span class=ow>or</span> <span class=s2>&quot;N/A&quot;</span>
            <span class=p>)</span>
            <span class=k>try</span><span class=p>:</span>
                <span class=n>load_with_product_context</span><span class=p>(</span>
                    <span class=n>loader</span><span class=p>,</span>
                    <span class=n>version_context</span><span class=p>,</span>
                    <span class=n>options</span><span class=o>=</span><span class=n>options</span>
                <span class=p>)</span>

            <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>exc</span><span class=p>:</span>
                <span class=n>formatted_traceback</span> <span class=o>=</span> <span class=kc>None</span>
                <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>exc</span><span class=p>,</span> <span class=n>LoadError</span><span class=p>):</span>
                    <span class=n>exc_type</span><span class=p>,</span> <span class=n>exc_value</span><span class=p>,</span> <span class=n>exc_traceback</span> <span class=o>=</span> <span class=n>sys</span><span class=o>.</span><span class=n>exc_info</span><span class=p>()</span>
                    <span class=n>formatted_traceback</span> <span class=o>=</span> <span class=s2>&quot;&quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span>
                        <span class=n>traceback</span><span class=o>.</span><span class=n>format_exception</span><span class=p>(</span>
                            <span class=n>exc_type</span><span class=p>,</span> <span class=n>exc_value</span><span class=p>,</span> <span class=n>exc_traceback</span>
                        <span class=p>)</span>
                    <span class=p>)</span>

                <span class=n>error_info</span><span class=o>.</span><span class=n>append</span><span class=p>((</span>
                    <span class=nb>str</span><span class=p>(</span><span class=n>exc</span><span class=p>),</span>
                    <span class=n>formatted_traceback</span><span class=p>,</span>
                    <span class=kc>None</span><span class=p>,</span>
                    <span class=n>product_name</span><span class=p>,</span>
                    <span class=kc>None</span>
                <span class=p>))</span>

    <span class=k>return</span> <span class=n>error_info</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.loader.models.actions.LoaderActionsModel._load_representations_by_loader class="doc doc-heading"> <code class="highlight language-python"><span class=n>_load_representations_by_loader</span><span class=p>(</span><span class=n>loader</span><span class=p>,</span> <span class=n>repre_contexts</span><span class=p>,</span> <span class=n>options</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Loops through list of repre_contexts and loads them with one loader</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>loader</code> </td> <td> <code><span title=LoaderPlugin>LoaderPlugin</span></code> </td> <td> <div class=doc-md-description> <p>Loader plugin to use.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>repre_contexts</code> </td> <td> <code><span title=list>list</span>[<span title=dict>dict</span>]</code> </td> <td> <div class=doc-md-description> <p>Full info about selected representations, containing repre, version, product, folder and project entities.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>options</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>Data from options.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/loader/models/actions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>722</span>
<span class=normal>723</span>
<span class=normal>724</span>
<span class=normal>725</span>
<span class=normal>726</span>
<span class=normal>727</span>
<span class=normal>728</span>
<span class=normal>729</span>
<span class=normal>730</span>
<span class=normal>731</span>
<span class=normal>732</span>
<span class=normal>733</span>
<span class=normal>734</span>
<span class=normal>735</span>
<span class=normal>736</span>
<span class=normal>737</span>
<span class=normal>738</span>
<span class=normal>739</span>
<span class=normal>740</span>
<span class=normal>741</span>
<span class=normal>742</span>
<span class=normal>743</span>
<span class=normal>744</span>
<span class=normal>745</span>
<span class=normal>746</span>
<span class=normal>747</span>
<span class=normal>748</span>
<span class=normal>749</span>
<span class=normal>750</span>
<span class=normal>751</span>
<span class=normal>752</span>
<span class=normal>753</span>
<span class=normal>754</span>
<span class=normal>755</span>
<span class=normal>756</span>
<span class=normal>757</span>
<span class=normal>758</span>
<span class=normal>759</span>
<span class=normal>760</span>
<span class=normal>761</span>
<span class=normal>762</span>
<span class=normal>763</span>
<span class=normal>764</span>
<span class=normal>765</span>
<span class=normal>766</span>
<span class=normal>767</span>
<span class=normal>768</span>
<span class=normal>769</span>
<span class=normal>770</span>
<span class=normal>771</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>_load_representations_by_loader</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>loader</span><span class=p>,</span> <span class=n>repre_contexts</span><span class=p>,</span> <span class=n>options</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Loops through list of repre_contexts and loads them with one loader</span>

<span class=sd>    Args:</span>
<span class=sd>        loader (LoaderPlugin): Loader plugin to use.</span>
<span class=sd>        repre_contexts (list[dict]): Full info about selected</span>
<span class=sd>            representations, containing repre, version, product, folder</span>
<span class=sd>            and project entities.</span>
<span class=sd>        options (dict): Data from options.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>error_info</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>for</span> <span class=n>repre_context</span> <span class=ow>in</span> <span class=n>repre_contexts</span><span class=p>:</span>
        <span class=n>version_entity</span> <span class=o>=</span> <span class=n>repre_context</span><span class=p>[</span><span class=s2>&quot;version&quot;</span><span class=p>]</span>
        <span class=n>version</span> <span class=o>=</span> <span class=n>version_entity</span><span class=p>[</span><span class=s2>&quot;version&quot;</span><span class=p>]</span>
        <span class=k>if</span> <span class=n>version</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=p>:</span>
            <span class=n>version</span> <span class=o>=</span> <span class=s2>&quot;Hero&quot;</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=n>load_with_repre_context</span><span class=p>(</span>
                <span class=n>loader</span><span class=p>,</span>
                <span class=n>repre_context</span><span class=p>,</span>
                <span class=n>options</span><span class=o>=</span><span class=n>options</span>
            <span class=p>)</span>

        <span class=k>except</span> <span class=n>IncompatibleLoaderError</span> <span class=k>as</span> <span class=n>exc</span><span class=p>:</span>
            <span class=nb>print</span><span class=p>(</span><span class=n>exc</span><span class=p>)</span>
            <span class=n>error_info</span><span class=o>.</span><span class=n>append</span><span class=p>((</span>
                <span class=s2>&quot;Incompatible Loader&quot;</span><span class=p>,</span>
                <span class=kc>None</span><span class=p>,</span>
                <span class=n>repre_context</span><span class=p>[</span><span class=s2>&quot;representation&quot;</span><span class=p>][</span><span class=s2>&quot;name&quot;</span><span class=p>],</span>
                <span class=n>repre_context</span><span class=p>[</span><span class=s2>&quot;product&quot;</span><span class=p>][</span><span class=s2>&quot;name&quot;</span><span class=p>],</span>
                <span class=n>version</span>
            <span class=p>))</span>

        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>exc</span><span class=p>:</span>
            <span class=n>formatted_traceback</span> <span class=o>=</span> <span class=kc>None</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>exc</span><span class=p>,</span> <span class=n>LoadError</span><span class=p>):</span>
                <span class=n>exc_type</span><span class=p>,</span> <span class=n>exc_value</span><span class=p>,</span> <span class=n>exc_traceback</span> <span class=o>=</span> <span class=n>sys</span><span class=o>.</span><span class=n>exc_info</span><span class=p>()</span>
                <span class=n>formatted_traceback</span> <span class=o>=</span> <span class=s2>&quot;&quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>traceback</span><span class=o>.</span><span class=n>format_exception</span><span class=p>(</span>
                    <span class=n>exc_type</span><span class=p>,</span> <span class=n>exc_value</span><span class=p>,</span> <span class=n>exc_traceback</span>
                <span class=p>))</span>

            <span class=n>error_info</span><span class=o>.</span><span class=n>append</span><span class=p>((</span>
                <span class=nb>str</span><span class=p>(</span><span class=n>exc</span><span class=p>),</span>
                <span class=n>formatted_traceback</span><span class=p>,</span>
                <span class=n>repre_context</span><span class=p>[</span><span class=s2>&quot;representation&quot;</span><span class=p>][</span><span class=s2>&quot;name&quot;</span><span class=p>],</span>
                <span class=n>repre_context</span><span class=p>[</span><span class=s2>&quot;product&quot;</span><span class=p>][</span><span class=s2>&quot;name&quot;</span><span class=p>],</span>
                <span class=n>version</span>
            <span class=p>))</span>
    <span class=k>return</span> <span class=n>error_info</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.loader.models.actions.LoaderActionsModel._trigger_representation_loader class="doc doc-heading"> <code class="highlight language-python"><span class=n>_trigger_representation_loader</span><span class=p>(</span><span class=n>loader</span><span class=p>,</span> <span class=n>options</span><span class=p>,</span> <span class=n>project_name</span><span class=p>,</span> <span class=n>representation_ids</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Trigger representation loader.</p> <p>This triggers 'load' method of 'LoaderPlugin' for given representation ids. For that are prepared contexts for each representation, with all parent entities.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>loader</code> </td> <td> <code><span title=LoaderPlugin>LoaderPlugin</span></code> </td> <td> <div class=doc-md-description> <p>Loader plugin to use.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>options</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>Option values for loader.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>project_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Project name.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>representation_ids</code> </td> <td> <code><span title=Iterable>Iterable</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Representation ids.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/loader/models/actions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>661</span>
<span class=normal>662</span>
<span class=normal>663</span>
<span class=normal>664</span>
<span class=normal>665</span>
<span class=normal>666</span>
<span class=normal>667</span>
<span class=normal>668</span>
<span class=normal>669</span>
<span class=normal>670</span>
<span class=normal>671</span>
<span class=normal>672</span>
<span class=normal>673</span>
<span class=normal>674</span>
<span class=normal>675</span>
<span class=normal>676</span>
<span class=normal>677</span>
<span class=normal>678</span>
<span class=normal>679</span>
<span class=normal>680</span>
<span class=normal>681</span>
<span class=normal>682</span>
<span class=normal>683</span>
<span class=normal>684</span>
<span class=normal>685</span>
<span class=normal>686</span>
<span class=normal>687</span>
<span class=normal>688</span>
<span class=normal>689</span>
<span class=normal>690</span>
<span class=normal>691</span>
<span class=normal>692</span>
<span class=normal>693</span>
<span class=normal>694</span>
<span class=normal>695</span>
<span class=normal>696</span>
<span class=normal>697</span>
<span class=normal>698</span>
<span class=normal>699</span>
<span class=normal>700</span>
<span class=normal>701</span>
<span class=normal>702</span>
<span class=normal>703</span>
<span class=normal>704</span>
<span class=normal>705</span>
<span class=normal>706</span>
<span class=normal>707</span>
<span class=normal>708</span>
<span class=normal>709</span>
<span class=normal>710</span>
<span class=normal>711</span>
<span class=normal>712</span>
<span class=normal>713</span>
<span class=normal>714</span>
<span class=normal>715</span>
<span class=normal>716</span>
<span class=normal>717</span>
<span class=normal>718</span>
<span class=normal>719</span>
<span class=normal>720</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>_trigger_representation_loader</span><span class=p>(</span>
    <span class=bp>self</span><span class=p>,</span>
    <span class=n>loader</span><span class=p>,</span>
    <span class=n>options</span><span class=p>,</span>
    <span class=n>project_name</span><span class=p>,</span>
    <span class=n>representation_ids</span><span class=p>,</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Trigger representation loader.</span>

<span class=sd>    This triggers &#39;load&#39; method of &#39;LoaderPlugin&#39; for given representation</span>
<span class=sd>        ids. For that are prepared contexts for each representation, with</span>
<span class=sd>        all parent entities.</span>

<span class=sd>    Args:</span>
<span class=sd>        loader (LoaderPlugin): Loader plugin to use.</span>
<span class=sd>        options (dict): Option values for loader.</span>
<span class=sd>        project_name (str): Project name.</span>
<span class=sd>        representation_ids (Iterable[str]): Representation ids.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>project_entity</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_project</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>
    <span class=n>repre_entities</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>ayon_api</span><span class=o>.</span><span class=n>get_representations</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span> <span class=n>representation_ids</span><span class=o>=</span><span class=n>representation_ids</span>
    <span class=p>))</span>
    <span class=n>version_ids</span> <span class=o>=</span> <span class=p>{</span><span class=n>r</span><span class=p>[</span><span class=s2>&quot;versionId&quot;</span><span class=p>]</span> <span class=k>for</span> <span class=n>r</span> <span class=ow>in</span> <span class=n>repre_entities</span><span class=p>}</span>
    <span class=n>version_entities</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_versions</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span> <span class=n>version_ids</span><span class=o>=</span><span class=n>version_ids</span>
    <span class=p>)</span>
    <span class=n>version_entities_by_id</span> <span class=o>=</span> <span class=p>{</span><span class=n>v</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]:</span> <span class=n>v</span> <span class=k>for</span> <span class=n>v</span> <span class=ow>in</span> <span class=n>version_entities</span><span class=p>}</span>
    <span class=n>product_ids</span> <span class=o>=</span> <span class=p>{</span>
        <span class=n>v</span><span class=p>[</span><span class=s2>&quot;productId&quot;</span><span class=p>]</span> <span class=k>for</span> <span class=n>v</span> <span class=ow>in</span> <span class=n>version_entities_by_id</span><span class=o>.</span><span class=n>values</span><span class=p>()</span>
    <span class=p>}</span>
    <span class=n>product_entities</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_products</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span> <span class=n>product_ids</span><span class=o>=</span><span class=n>product_ids</span>
    <span class=p>)</span>
    <span class=n>product_entities_by_id</span> <span class=o>=</span> <span class=p>{</span><span class=n>p</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]:</span> <span class=n>p</span> <span class=k>for</span> <span class=n>p</span> <span class=ow>in</span> <span class=n>product_entities</span><span class=p>}</span>
    <span class=n>folder_ids</span> <span class=o>=</span> <span class=p>{</span><span class=n>p</span><span class=p>[</span><span class=s2>&quot;folderId&quot;</span><span class=p>]</span> <span class=k>for</span> <span class=n>p</span> <span class=ow>in</span> <span class=n>product_entities_by_id</span><span class=o>.</span><span class=n>values</span><span class=p>()}</span>
    <span class=n>folder_entities</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_folders</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span> <span class=n>folder_ids</span><span class=o>=</span><span class=n>folder_ids</span>
    <span class=p>)</span>
    <span class=n>folder_entities_by_id</span> <span class=o>=</span> <span class=p>{</span><span class=n>f</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]:</span> <span class=n>f</span> <span class=k>for</span> <span class=n>f</span> <span class=ow>in</span> <span class=n>folder_entities</span><span class=p>}</span>
    <span class=n>repre_contexts</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>for</span> <span class=n>repre_entity</span> <span class=ow>in</span> <span class=n>repre_entities</span><span class=p>:</span>
        <span class=n>version_id</span> <span class=o>=</span> <span class=n>repre_entity</span><span class=p>[</span><span class=s2>&quot;versionId&quot;</span><span class=p>]</span>
        <span class=n>version_entity</span> <span class=o>=</span> <span class=n>version_entities_by_id</span><span class=p>[</span><span class=n>version_id</span><span class=p>]</span>
        <span class=n>product_id</span> <span class=o>=</span> <span class=n>version_entity</span><span class=p>[</span><span class=s2>&quot;productId&quot;</span><span class=p>]</span>
        <span class=n>product_entity</span> <span class=o>=</span> <span class=n>product_entities_by_id</span><span class=p>[</span><span class=n>product_id</span><span class=p>]</span>
        <span class=n>folder_id</span> <span class=o>=</span> <span class=n>product_entity</span><span class=p>[</span><span class=s2>&quot;folderId&quot;</span><span class=p>]</span>
        <span class=n>folder_entity</span> <span class=o>=</span> <span class=n>folder_entities_by_id</span><span class=p>[</span><span class=n>folder_id</span><span class=p>]</span>
        <span class=n>repre_contexts</span><span class=o>.</span><span class=n>append</span><span class=p>({</span>
            <span class=s2>&quot;project&quot;</span><span class=p>:</span> <span class=n>project_entity</span><span class=p>,</span>
            <span class=s2>&quot;folder&quot;</span><span class=p>:</span> <span class=n>folder_entity</span><span class=p>,</span>
            <span class=s2>&quot;product&quot;</span><span class=p>:</span> <span class=n>product_entity</span><span class=p>,</span>
            <span class=s2>&quot;version&quot;</span><span class=p>:</span> <span class=n>version_entity</span><span class=p>,</span>
            <span class=s2>&quot;representation&quot;</span><span class=p>:</span> <span class=n>repre_entity</span><span class=p>,</span>
        <span class=p>})</span>

    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_load_representations_by_loader</span><span class=p>(</span>
        <span class=n>loader</span><span class=p>,</span> <span class=n>repre_contexts</span><span class=p>,</span> <span class=n>options</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.loader.models.actions.LoaderActionsModel._trigger_version_loader class="doc doc-heading"> <code class="highlight language-python"><span class=n>_trigger_version_loader</span><span class=p>(</span><span class=n>loader</span><span class=p>,</span> <span class=n>options</span><span class=p>,</span> <span class=n>project_name</span><span class=p>,</span> <span class=n>version_ids</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Trigger version loader.</p> <p>This triggers 'load' method of 'ProductLoaderPlugin' for given version ids.</p> <details class=note open> <summary>Note</summary> <p>Even when the plugin is 'ProductLoaderPlugin' it actually expects versions and should be named 'VersionLoaderPlugin'. Because it is planned to refactor load system and introduce 'LoaderAction' plugins it is not relevant to change it anymore.</p> </details> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>loader</code> </td> <td> <code><span title=ayon_core.pipeline.load.ProductLoaderPlugin>ProductLoaderPlugin</span></code> </td> <td> <div class=doc-md-description> <p>Loader plugin to use.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>options</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>Option values for loader.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>project_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Project name.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>version_ids</code> </td> <td> <code><span title=Iterable>Iterable</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Version ids.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/loader/models/actions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>603</span>
<span class=normal>604</span>
<span class=normal>605</span>
<span class=normal>606</span>
<span class=normal>607</span>
<span class=normal>608</span>
<span class=normal>609</span>
<span class=normal>610</span>
<span class=normal>611</span>
<span class=normal>612</span>
<span class=normal>613</span>
<span class=normal>614</span>
<span class=normal>615</span>
<span class=normal>616</span>
<span class=normal>617</span>
<span class=normal>618</span>
<span class=normal>619</span>
<span class=normal>620</span>
<span class=normal>621</span>
<span class=normal>622</span>
<span class=normal>623</span>
<span class=normal>624</span>
<span class=normal>625</span>
<span class=normal>626</span>
<span class=normal>627</span>
<span class=normal>628</span>
<span class=normal>629</span>
<span class=normal>630</span>
<span class=normal>631</span>
<span class=normal>632</span>
<span class=normal>633</span>
<span class=normal>634</span>
<span class=normal>635</span>
<span class=normal>636</span>
<span class=normal>637</span>
<span class=normal>638</span>
<span class=normal>639</span>
<span class=normal>640</span>
<span class=normal>641</span>
<span class=normal>642</span>
<span class=normal>643</span>
<span class=normal>644</span>
<span class=normal>645</span>
<span class=normal>646</span>
<span class=normal>647</span>
<span class=normal>648</span>
<span class=normal>649</span>
<span class=normal>650</span>
<span class=normal>651</span>
<span class=normal>652</span>
<span class=normal>653</span>
<span class=normal>654</span>
<span class=normal>655</span>
<span class=normal>656</span>
<span class=normal>657</span>
<span class=normal>658</span>
<span class=normal>659</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>_trigger_version_loader</span><span class=p>(</span>
    <span class=bp>self</span><span class=p>,</span>
    <span class=n>loader</span><span class=p>,</span>
    <span class=n>options</span><span class=p>,</span>
    <span class=n>project_name</span><span class=p>,</span>
    <span class=n>version_ids</span><span class=p>,</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Trigger version loader.</span>

<span class=sd>    This triggers &#39;load&#39; method of &#39;ProductLoaderPlugin&#39; for given version</span>
<span class=sd>    ids.</span>

<span class=sd>    Note:</span>
<span class=sd>        Even when the plugin is &#39;ProductLoaderPlugin&#39; it actually expects</span>
<span class=sd>            versions and should be named &#39;VersionLoaderPlugin&#39;. Because it</span>
<span class=sd>            is planned to refactor load system and introduce</span>
<span class=sd>            &#39;LoaderAction&#39; plugins it is not relevant to change it</span>
<span class=sd>            anymore.</span>

<span class=sd>    Args:</span>
<span class=sd>        loader (ProductLoaderPlugin): Loader plugin to use.</span>
<span class=sd>        options (dict): Option values for loader.</span>
<span class=sd>        project_name (str): Project name.</span>
<span class=sd>        version_ids (Iterable[str]): Version ids.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>project_entity</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_project</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>

    <span class=n>version_entities</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>ayon_api</span><span class=o>.</span><span class=n>get_versions</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span> <span class=n>version_ids</span><span class=o>=</span><span class=n>version_ids</span>
    <span class=p>))</span>
    <span class=n>product_ids</span> <span class=o>=</span> <span class=p>{</span><span class=n>v</span><span class=p>[</span><span class=s2>&quot;productId&quot;</span><span class=p>]</span> <span class=k>for</span> <span class=n>v</span> <span class=ow>in</span> <span class=n>version_entities</span><span class=p>}</span>
    <span class=n>product_entities</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_products</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span> <span class=n>product_ids</span><span class=o>=</span><span class=n>product_ids</span>
    <span class=p>)</span>
    <span class=n>product_entities_by_id</span> <span class=o>=</span> <span class=p>{</span><span class=n>p</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]:</span> <span class=n>p</span> <span class=k>for</span> <span class=n>p</span> <span class=ow>in</span> <span class=n>product_entities</span><span class=p>}</span>
    <span class=n>folder_ids</span> <span class=o>=</span> <span class=p>{</span><span class=n>p</span><span class=p>[</span><span class=s2>&quot;folderId&quot;</span><span class=p>]</span> <span class=k>for</span> <span class=n>p</span> <span class=ow>in</span> <span class=n>product_entities_by_id</span><span class=o>.</span><span class=n>values</span><span class=p>()}</span>
    <span class=n>folder_entities</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_folders</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span> <span class=n>folder_ids</span><span class=o>=</span><span class=n>folder_ids</span>
    <span class=p>)</span>
    <span class=n>folder_entities_by_id</span> <span class=o>=</span> <span class=p>{</span><span class=n>f</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]:</span> <span class=n>f</span> <span class=k>for</span> <span class=n>f</span> <span class=ow>in</span> <span class=n>folder_entities</span><span class=p>}</span>
    <span class=n>product_contexts</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>for</span> <span class=n>version_entity</span> <span class=ow>in</span> <span class=n>version_entities</span><span class=p>:</span>
        <span class=n>product_id</span> <span class=o>=</span> <span class=n>version_entity</span><span class=p>[</span><span class=s2>&quot;productId&quot;</span><span class=p>]</span>
        <span class=n>product_entity</span> <span class=o>=</span> <span class=n>product_entities_by_id</span><span class=p>[</span><span class=n>product_id</span><span class=p>]</span>
        <span class=n>folder_id</span> <span class=o>=</span> <span class=n>product_entity</span><span class=p>[</span><span class=s2>&quot;folderId&quot;</span><span class=p>]</span>
        <span class=n>folder_entity</span> <span class=o>=</span> <span class=n>folder_entities_by_id</span><span class=p>[</span><span class=n>folder_id</span><span class=p>]</span>
        <span class=n>product_contexts</span><span class=o>.</span><span class=n>append</span><span class=p>({</span>
            <span class=s2>&quot;project&quot;</span><span class=p>:</span> <span class=n>project_entity</span><span class=p>,</span>
            <span class=s2>&quot;folder&quot;</span><span class=p>:</span> <span class=n>folder_entity</span><span class=p>,</span>
            <span class=s2>&quot;product&quot;</span><span class=p>:</span> <span class=n>product_entity</span><span class=p>,</span>
            <span class=s2>&quot;version&quot;</span><span class=p>:</span> <span class=n>version_entity</span><span class=p>,</span>
        <span class=p>})</span>

    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_load_products_by_loader</span><span class=p>(</span>
        <span class=n>loader</span><span class=p>,</span> <span class=n>product_contexts</span><span class=p>,</span> <span class=n>options</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.loader.models.actions.LoaderActionsModel.get_representations_action_items class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_representations_action_items</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=n>representation_ids</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Get action items for given representation ids.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>project_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Project name.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>representation_ids</code> </td> <td> <code><span title=Iterable>Iterable</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Representation ids.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>list[ActionItem]: List of action items.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/loader/models/actions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 86</span>
<span class=normal> 87</span>
<span class=normal> 88</span>
<span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_representations_action_items</span><span class=p>(</span>
    <span class=bp>self</span><span class=p>,</span> <span class=n>project_name</span><span class=p>,</span> <span class=n>representation_ids</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get action items for given representation ids.</span>

<span class=sd>    Args:</span>
<span class=sd>        project_name (str): Project name.</span>
<span class=sd>        representation_ids (Iterable[str]): Representation ids.</span>

<span class=sd>    Returns:</span>
<span class=sd>        list[ActionItem]: List of action items.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=p>(</span>
        <span class=n>product_context_by_id</span><span class=p>,</span>
        <span class=n>repre_context_by_id</span>
    <span class=p>)</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_contexts_for_representations</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span>
        <span class=n>representation_ids</span>
    <span class=p>)</span>
    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_action_items_for_contexts</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span>
        <span class=n>product_context_by_id</span><span class=p>,</span>
        <span class=n>repre_context_by_id</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.loader.models.actions.LoaderActionsModel.get_versions_action_items class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_versions_action_items</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=n>version_ids</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Get action items for given version ids.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>project_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Project name.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>version_ids</code> </td> <td> <code><span title=Iterable>Iterable</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Version ids.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>list[ActionItem]: List of action items.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/loader/models/actions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>62</span>
<span class=normal>63</span>
<span class=normal>64</span>
<span class=normal>65</span>
<span class=normal>66</span>
<span class=normal>67</span>
<span class=normal>68</span>
<span class=normal>69</span>
<span class=normal>70</span>
<span class=normal>71</span>
<span class=normal>72</span>
<span class=normal>73</span>
<span class=normal>74</span>
<span class=normal>75</span>
<span class=normal>76</span>
<span class=normal>77</span>
<span class=normal>78</span>
<span class=normal>79</span>
<span class=normal>80</span>
<span class=normal>81</span>
<span class=normal>82</span>
<span class=normal>83</span>
<span class=normal>84</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_versions_action_items</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>project_name</span><span class=p>,</span> <span class=n>version_ids</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get action items for given version ids.</span>

<span class=sd>    Args:</span>
<span class=sd>        project_name (str): Project name.</span>
<span class=sd>        version_ids (Iterable[str]): Version ids.</span>

<span class=sd>    Returns:</span>
<span class=sd>        list[ActionItem]: List of action items.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=p>(</span>
        <span class=n>version_context_by_id</span><span class=p>,</span>
        <span class=n>repre_context_by_id</span>
    <span class=p>)</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_contexts_for_versions</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span>
        <span class=n>version_ids</span>
    <span class=p>)</span>
    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_action_items_for_contexts</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span>
        <span class=n>version_context_by_id</span><span class=p>,</span>
        <span class=n>repre_context_by_id</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.loader.models.actions.LoaderActionsModel.reset class="doc doc-heading"> <code class="highlight language-python"><span class=n>reset</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Reset the model with all cached items.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/loader/models/actions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>reset</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Reset the model with all cached items.&quot;&quot;&quot;</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_current_context_project</span> <span class=o>=</span> <span class=n>NOT_SET</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_loaders_by_identifier</span><span class=o>.</span><span class=n>reset</span><span class=p>()</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_product_loaders</span><span class=o>.</span><span class=n>reset</span><span class=p>()</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_repre_loaders</span><span class=o>.</span><span class=n>reset</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.loader.models.actions.LoaderActionsModel.trigger_action_item class="doc doc-heading"> <code class="highlight language-python"><span class=n>trigger_action_item</span><span class=p>(</span><span class=n>identifier</span><span class=p>,</span> <span class=n>options</span><span class=p>,</span> <span class=n>project_name</span><span class=p>,</span> <span class=n>version_ids</span><span class=p>,</span> <span class=n>representation_ids</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Trigger action by identifier.</p> <p>Triggers the action by identifier for given contexts.</p> <p>Triggers events "load.started" and "load.finished". Finished event also contains "error_info" key with error information if any happened.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>identifier</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Loader identifier.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>options</code> </td> <td> <code><span title=dict>dict</span>[<span title=str>str</span>, <span title=Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Loader option values.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>project_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Project name.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>version_ids</code> </td> <td> <code><span title=Iterable>Iterable</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Version ids.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>representation_ids</code> </td> <td> <code><span title=Iterable>Iterable</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Representation ids.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/loader/models/actions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>trigger_action_item</span><span class=p>(</span>
    <span class=bp>self</span><span class=p>,</span>
    <span class=n>identifier</span><span class=p>,</span>
    <span class=n>options</span><span class=p>,</span>
    <span class=n>project_name</span><span class=p>,</span>
    <span class=n>version_ids</span><span class=p>,</span>
    <span class=n>representation_ids</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Trigger action by identifier.</span>

<span class=sd>    Triggers the action by identifier for given contexts.</span>

<span class=sd>    Triggers events &quot;load.started&quot; and &quot;load.finished&quot;. Finished event</span>
<span class=sd>        also contains &quot;error_info&quot; key with error information if any</span>
<span class=sd>        happened.</span>

<span class=sd>    Args:</span>
<span class=sd>        identifier (str): Loader identifier.</span>
<span class=sd>        options (dict[str, Any]): Loader option values.</span>
<span class=sd>        project_name (str): Project name.</span>
<span class=sd>        version_ids (Iterable[str]): Version ids.</span>
<span class=sd>        representation_ids (Iterable[str]): Representation ids.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>event_data</span> <span class=o>=</span> <span class=p>{</span>
        <span class=s2>&quot;identifier&quot;</span><span class=p>:</span> <span class=n>identifier</span><span class=p>,</span>
        <span class=s2>&quot;id&quot;</span><span class=p>:</span> <span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>()</span><span class=o>.</span><span class=n>hex</span><span class=p>,</span>
    <span class=p>}</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_controller</span><span class=o>.</span><span class=n>emit_event</span><span class=p>(</span>
        <span class=s2>&quot;load.started&quot;</span><span class=p>,</span>
        <span class=n>event_data</span><span class=p>,</span>
        <span class=n>ACTIONS_MODEL_SENDER</span><span class=p>,</span>
    <span class=p>)</span>
    <span class=n>loader</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_loader_by_identifier</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=n>identifier</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>representation_ids</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>error_info</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_trigger_representation_loader</span><span class=p>(</span>
            <span class=n>loader</span><span class=p>,</span>
            <span class=n>options</span><span class=p>,</span>
            <span class=n>project_name</span><span class=p>,</span>
            <span class=n>representation_ids</span><span class=p>,</span>
        <span class=p>)</span>
    <span class=k>elif</span> <span class=n>version_ids</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>error_info</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_trigger_version_loader</span><span class=p>(</span>
            <span class=n>loader</span><span class=p>,</span>
            <span class=n>options</span><span class=p>,</span>
            <span class=n>project_name</span><span class=p>,</span>
            <span class=n>version_ids</span><span class=p>,</span>
        <span class=p>)</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>NotImplementedError</span><span class=p>(</span>
            <span class=s2>&quot;Invalid arguments to trigger action item&quot;</span><span class=p>)</span>

    <span class=n>event_data</span><span class=p>[</span><span class=s2>&quot;error_info&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>error_info</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_controller</span><span class=o>.</span><span class=n>emit_event</span><span class=p>(</span>
        <span class=s2>&quot;load.finished&quot;</span><span class=p>,</span>
        <span class=n>event_data</span><span class=p>,</span>
        <span class=n>ACTIONS_MODEL_SENDER</span><span class=p>,</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> </div> </div> </div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../../../..", "features": ["navigation.sections", "navigation.path", "navigation.prune"], "search": "../../../../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../../../../../assets/javascripts/bundle.c8b220af.min.js></script> </body> </html>