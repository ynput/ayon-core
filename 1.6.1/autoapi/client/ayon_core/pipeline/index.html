<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=prev href=../lib/vendor_bin_utils.html><link rel=next href=actions.html><link rel=icon href=../../../../img/favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.20"><title>pipeline - ayon-core</title><link rel=stylesheet href=../../../../assets/stylesheets/main.e53b48f4.min.css><link rel=stylesheet href=../../../../assets/stylesheets/palette.06af60db.min.css><script src=https://unpkg.com/iframe-worker/shim></script><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../../assets/_mkdocstrings.css><link rel=stylesheet href=../../../../css/custom.css><script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#client.ayon_core.pipeline class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../../index.html title=ayon-core class="md-header__button md-logo" aria-label=ayon-core data-md-component=logo> <img src=../../../../img/ay-symbol-blackw-full.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> ayon-core </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> pipeline </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/ynput/ayon-core title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../../index.html title=ayon-core class="md-nav__button md-logo" aria-label=ayon-core data-md-component=logo> <img src=../../../../img/ay-symbol-blackw-full.png alt=logo> </a> ayon-core </label> <div class=md-nav__source> <a href=https://github.com/ynput/ayon-core title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../index.html class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../../../../license.html class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1 checked> <label class=md-nav__link for=__nav_3_1 id=__nav_3_1_label tabindex=0> <span class=md-ellipsis> client </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> client </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1 checked> <label class=md-nav__link for=__nav_3_1_1 id=__nav_3_1_1_label tabindex=0> <span class=md-ellipsis> ayon_core </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_1_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1> <span class="md-nav__icon md-icon"></span> ayon_core </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../__main__.html class=md-nav__link> <span class=md-ellipsis> __main__ </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../addon/base.html class=md-nav__link> <span class=md-ellipsis> addon </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../cli.html class=md-nav__link> <span class=md-ellipsis> cli </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../hooks/pre_add_last_workfile_arg.html class=md-nav__link> <span class=md-ellipsis> hooks </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../host/abstract.html class=md-nav__link> <span class=md-ellipsis> host </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../lib/attribute_definitions.html class=md-nav__link> <span class=md-ellipsis> lib </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1_7 checked> <label class=md-nav__link for=__nav_3_1_1_7 id=__nav_3_1_1_7_label tabindex=0> <span class=md-ellipsis> pipeline </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_1_1_7_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1_7> <span class="md-nav__icon md-icon"></span> pipeline </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=actions.html class=md-nav__link> <span class=md-ellipsis> actions </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=anatomy/anatomy.html class=md-nav__link> <span class=md-ellipsis> anatomy </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=colorspace.html class=md-nav__link> <span class=md-ellipsis> colorspace </span> </a> </li> <li class=md-nav__item> <a href=compatibility.html class=md-nav__link> <span class=md-ellipsis> compatibility </span> </a> </li> <li class=md-nav__item> <a href=constants.html class=md-nav__link> <span class=md-ellipsis> constants </span> </a> </li> <li class=md-nav__item> <a href=context_tools.html class=md-nav__link> <span class=md-ellipsis> context_tools </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=create/changes.html class=md-nav__link> <span class=md-ellipsis> create </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=delivery.html class=md-nav__link> <span class=md-ellipsis> delivery </span> </a> </li> <li class=md-nav__item> <a href=editorial.html class=md-nav__link> <span class=md-ellipsis> editorial </span> </a> </li> <li class=md-nav__item> <a href=entity_uri.html class=md-nav__link> <span class=md-ellipsis> entity_uri </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=farm/patterning.html class=md-nav__link> <span class=md-ellipsis> farm </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=load/plugins.html class=md-nav__link> <span class=md-ellipsis> load </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=plugin_discover.html class=md-nav__link> <span class=md-ellipsis> plugin_discover </span> </a> </li> <li class=md-nav__item> <a href=project_folders.html class=md-nav__link> <span class=md-ellipsis> project_folders </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=publish/abstract_collect_render.html class=md-nav__link> <span class=md-ellipsis> publish </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=schema/index.html class=md-nav__link> <span class=md-ellipsis> schema </span> </a> </li> <li class=md-nav__item> <a href=staging_dir.html class=md-nav__link> <span class=md-ellipsis> staging_dir </span> </a> </li> <li class=md-nav__item> <a href=tempdir.html class=md-nav__link> <span class=md-ellipsis> tempdir </span> </a> </li> <li class=md-nav__item> <a href=template_data.html class=md-nav__link> <span class=md-ellipsis> template_data </span> </a> </li> <li class=md-nav__item> <a href=thumbnails.html class=md-nav__link> <span class=md-ellipsis> thumbnails </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=traits/color.html class=md-nav__link> <span class=md-ellipsis> traits </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=usdlib.html class=md-nav__link> <span class=md-ellipsis> usdlib </span> </a> </li> <li class=md-nav__item> <a href=version_start.html class=md-nav__link> <span class=md-ellipsis> version_start </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=workfile/build_workfile.html class=md-nav__link> <span class=md-ellipsis> workfile </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../plugins/actions/open_file_explorer.html class=md-nav__link> <span class=md-ellipsis> plugins </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../resources/index.html class=md-nav__link> <span class=md-ellipsis> resources </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../scripts/ocio_wrapper.html class=md-nav__link> <span class=md-ellipsis> scripts </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../settings/lib.html class=md-nav__link> <span class=md-ellipsis> settings </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../style/color_defs.html class=md-nav__link> <span class=md-ellipsis> style </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../tests/conftest.html class=md-nav__link> <span class=md-ellipsis> tests </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../tools/attribute_defs/_constants.html class=md-nav__link> <span class=md-ellipsis> tools </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../vendor/python/qargparse.html class=md-nav__link> <span class=md-ellipsis> vendor </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../version.html class=md-nav__link> <span class=md-ellipsis> version </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../server/settings/conversion.html class=md-nav__link> <span class=md-ellipsis> server </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#client.ayon_core.pipeline class=md-nav__link> <span class=md-ellipsis> pipeline </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.AYONPyblishPluginMixin class=md-nav__link> <span class=md-ellipsis> AYONPyblishPluginMixin </span> </a> <nav class=md-nav aria-label=AYONPyblishPluginMixin> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.AYONPyblishPluginMixin.convert_attribute_values class=md-nav__link> <span class=md-ellipsis> convert_attribute_values </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.AYONPyblishPluginMixin.get_attr_defs_for_context class=md-nav__link> <span class=md-ellipsis> get_attr_defs_for_context </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.AYONPyblishPluginMixin.get_attr_defs_for_instance class=md-nav__link> <span class=md-ellipsis> get_attr_defs_for_instance </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.AYONPyblishPluginMixin.get_attr_values_from_data class=md-nav__link> <span class=md-ellipsis> get_attr_values_from_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.AYONPyblishPluginMixin.get_attr_values_from_data_for_plugin class=md-nav__link> <span class=md-ellipsis> get_attr_values_from_data_for_plugin </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.AYONPyblishPluginMixin.get_attribute_defs class=md-nav__link> <span class=md-ellipsis> get_attribute_defs </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.AYONPyblishPluginMixin.instance_matches_plugin_families class=md-nav__link> <span class=md-ellipsis> instance_matches_plugin_families </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.AYONPyblishPluginMixin.register_create_context_callbacks class=md-nav__link> <span class=md-ellipsis> register_create_context_callbacks </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.Anatomy class=md-nav__link> <span class=md-ellipsis> Anatomy </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.AutoCreator class=md-nav__link> <span class=md-ellipsis> AutoCreator </span> </a> <nav class=md-nav aria-label=AutoCreator> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.AutoCreator.remove_instances class=md-nav__link> <span class=md-ellipsis> remove_instances </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.BaseCreator class=md-nav__link> <span class=md-ellipsis> BaseCreator </span> </a> <nav class=md-nav aria-label=BaseCreator> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.BaseCreator.collection_shared_data class=md-nav__link> <span class=md-ellipsis> collection_shared_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.BaseCreator.identifier class=md-nav__link> <span class=md-ellipsis> identifier </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.BaseCreator.log class=md-nav__link> <span class=md-ellipsis> log </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.BaseCreator.product_type class=md-nav__link> <span class=md-ellipsis> product_type </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.BaseCreator.project_anatomy class=md-nav__link> <span class=md-ellipsis> project_anatomy </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.BaseCreator.project_name class=md-nav__link> <span class=md-ellipsis> project_name </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.BaseCreator.apply_settings class=md-nav__link> <span class=md-ellipsis> apply_settings </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.BaseCreator.collect_instances class=md-nav__link> <span class=md-ellipsis> collect_instances </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.BaseCreator.create class=md-nav__link> <span class=md-ellipsis> create </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.BaseCreator.get_attr_defs_for_instance class=md-nav__link> <span class=md-ellipsis> get_attr_defs_for_instance </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.BaseCreator.get_dynamic_data class=md-nav__link> <span class=md-ellipsis> get_dynamic_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.BaseCreator.get_group_label class=md-nav__link> <span class=md-ellipsis> get_group_label </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.BaseCreator.get_icon class=md-nav__link> <span class=md-ellipsis> get_icon </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.BaseCreator.get_instance_attr_defs class=md-nav__link> <span class=md-ellipsis> get_instance_attr_defs </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.BaseCreator.get_next_versions_for_instances class=md-nav__link> <span class=md-ellipsis> get_next_versions_for_instances </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.BaseCreator.get_product_name class=md-nav__link> <span class=md-ellipsis> get_product_name </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.BaseCreator.register_callbacks class=md-nav__link> <span class=md-ellipsis> register_callbacks </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.BaseCreator.remove_instances class=md-nav__link> <span class=md-ellipsis> remove_instances </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.BaseCreator.set_instance_thumbnail_path class=md-nav__link> <span class=md-ellipsis> set_instance_thumbnail_path </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.BaseCreator.update_instances class=md-nav__link> <span class=md-ellipsis> update_instances </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.CreatedInstance class=md-nav__link> <span class=md-ellipsis> CreatedInstance </span> </a> <nav class=md-nav aria-label=CreatedInstance> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.CreatedInstance.creator_attribute_defs class=md-nav__link> <span class=md-ellipsis> creator_attribute_defs </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.CreatedInstance.data class=md-nav__link> <span class=md-ellipsis> data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.CreatedInstance.has_promised_context class=md-nav__link> <span class=md-ellipsis> has_promised_context </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.CreatedInstance.id class=md-nav__link> <span class=md-ellipsis> id </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.CreatedInstance.is_mandatory class=md-nav__link> <span class=md-ellipsis> is_mandatory </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.CreatedInstance.transient_data class=md-nav__link> <span class=md-ellipsis> transient_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.CreatedInstance.add_members class=md-nav__link> <span class=md-ellipsis> add_members </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.CreatedInstance.attribute_value_changed class=md-nav__link> <span class=md-ellipsis> attribute_value_changed </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.CreatedInstance.changes class=md-nav__link> <span class=md-ellipsis> changes </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.CreatedInstance.data_to_store class=md-nav__link> <span class=md-ellipsis> data_to_store </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.CreatedInstance.from_existing class=md-nav__link> <span class=md-ellipsis> from_existing </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.CreatedInstance.mark_as_stored class=md-nav__link> <span class=md-ellipsis> mark_as_stored </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.CreatedInstance.publish_attribute_value_changed class=md-nav__link> <span class=md-ellipsis> publish_attribute_value_changed </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.CreatedInstance.set_create_attr_defs class=md-nav__link> <span class=md-ellipsis> set_create_attr_defs </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.CreatedInstance.set_mandatory class=md-nav__link> <span class=md-ellipsis> set_mandatory </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.CreatedInstance.set_parent class=md-nav__link> <span class=md-ellipsis> set_parent </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.CreatedInstance.set_publish_plugin_attr_defs class=md-nav__link> <span class=md-ellipsis> set_publish_plugin_attr_defs </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.Creator class=md-nav__link> <span class=md-ellipsis> Creator </span> </a> <nav class=md-nav aria-label=Creator> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.Creator.show_order class=md-nav__link> <span class=md-ellipsis> show_order </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.Creator.apply_staging_dir class=md-nav__link> <span class=md-ellipsis> apply_staging_dir </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.Creator.create class=md-nav__link> <span class=md-ellipsis> create </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.Creator.get_default_variant class=md-nav__link> <span class=md-ellipsis> get_default_variant </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.Creator.get_default_variants class=md-nav__link> <span class=md-ellipsis> get_default_variants </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.Creator.get_description class=md-nav__link> <span class=md-ellipsis> get_description </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.Creator.get_detail_description class=md-nav__link> <span class=md-ellipsis> get_detail_description </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.Creator.get_pre_create_attr_defs class=md-nav__link> <span class=md-ellipsis> get_pre_create_attr_defs </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.Creator.get_staging_dir class=md-nav__link> <span class=md-ellipsis> get_staging_dir </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.CreatorError class=md-nav__link> <span class=md-ellipsis> CreatorError </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.IncompatibleLoaderError class=md-nav__link> <span class=md-ellipsis> IncompatibleLoaderError </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.InventoryAction class=md-nav__link> <span class=md-ellipsis> InventoryAction </span> </a> <nav class=md-nav aria-label=InventoryAction> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.InventoryAction.is_compatible class=md-nav__link> <span class=md-ellipsis> is_compatible </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.InventoryAction.process class=md-nav__link> <span class=md-ellipsis> process </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.KnownPublishError class=md-nav__link> <span class=md-ellipsis> KnownPublishError </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.LauncherAction class=md-nav__link> <span class=md-ellipsis> LauncherAction </span> </a> <nav class=md-nav aria-label=LauncherAction> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.LauncherAction.is_compatible class=md-nav__link> <span class=md-ellipsis> is_compatible </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.LauncherAction.process class=md-nav__link> <span class=md-ellipsis> process </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.LoaderPlugin class=md-nav__link> <span class=md-ellipsis> LoaderPlugin </span> </a> <nav class=md-nav aria-label=LoaderPlugin> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.LoaderPlugin.get_options class=md-nav__link> <span class=md-ellipsis> get_options </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.LoaderPlugin.get_representation_name_aliases class=md-nav__link> <span class=md-ellipsis> get_representation_name_aliases </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.LoaderPlugin.get_representations class=md-nav__link> <span class=md-ellipsis> get_representations </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.LoaderPlugin.has_valid_extension class=md-nav__link> <span class=md-ellipsis> has_valid_extension </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.LoaderPlugin.is_compatible_loader class=md-nav__link> <span class=md-ellipsis> is_compatible_loader </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.LoaderPlugin.load class=md-nav__link> <span class=md-ellipsis> load </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.LoaderPlugin.remove class=md-nav__link> <span class=md-ellipsis> remove </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.LoaderPlugin.update class=md-nav__link> <span class=md-ellipsis> update </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.OptionalPyblishPluginMixin class=md-nav__link> <span class=md-ellipsis> OptionalPyblishPluginMixin </span> </a> <nav class=md-nav aria-label=OptionalPyblishPluginMixin> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.OptionalPyblishPluginMixin.get_attribute_defs class=md-nav__link> <span class=md-ellipsis> get_attribute_defs </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.OptionalPyblishPluginMixin.is_active class=md-nav__link> <span class=md-ellipsis> is_active </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.ProductLoaderPlugin class=md-nav__link> <span class=md-ellipsis> ProductLoaderPlugin </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.PublishError class=md-nav__link> <span class=md-ellipsis> PublishError </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.PublishValidationError class=md-nav__link> <span class=md-ellipsis> PublishValidationError </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.get_current_host_name class=md-nav__link> <span class=md-ellipsis> get_current_host_name </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.get_global_context class=md-nav__link> <span class=md-ellipsis> get_global_context </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.get_process_id class=md-nav__link> <span class=md-ellipsis> get_process_id </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.get_repres_contexts class=md-nav__link> <span class=md-ellipsis> get_repres_contexts </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.get_representation_context class=md-nav__link> <span class=md-ellipsis> get_representation_context </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.get_representation_path class=md-nav__link> <span class=md-ellipsis> get_representation_path </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.get_staging_dir_info class=md-nav__link> <span class=md-ellipsis> get_staging_dir_info </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.get_temp_dir class=md-nav__link> <span class=md-ellipsis> get_temp_dir </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.install_ayon_plugins class=md-nav__link> <span class=md-ellipsis> install_ayon_plugins </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.install_host class=md-nav__link> <span class=md-ellipsis> install_host </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.is_installed class=md-nav__link> <span class=md-ellipsis> is_installed </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.is_product_base_type_supported class=md-nav__link> <span class=md-ellipsis> is_product_base_type_supported </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.load_container class=md-nav__link> <span class=md-ellipsis> load_container </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.loaders_from_representation class=md-nav__link> <span class=md-ellipsis> loaders_from_representation </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.register_host class=md-nav__link> <span class=md-ellipsis> register_host </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.register_root class=md-nav__link> <span class=md-ellipsis> register_root </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.registered_host class=md-nav__link> <span class=md-ellipsis> registered_host </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.registered_root class=md-nav__link> <span class=md-ellipsis> registered_root </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.remove_container class=md-nav__link> <span class=md-ellipsis> remove_container </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.switch_container class=md-nav__link> <span class=md-ellipsis> switch_container </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.uninstall_host class=md-nav__link> <span class=md-ellipsis> uninstall_host </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.update_container class=md-nav__link> <span class=md-ellipsis> update_container </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>pipeline</h1> <div class="doc doc-object doc-module"> <a id=client.ayon_core.pipeline></a> <div class="doc doc-contents first"> <div class="doc doc-children"> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.AYONPyblishPluginMixin class="doc doc-heading"> <code>AYONPyblishPluginMixin</code> </h2> <div class="doc doc-contents "> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/publish_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>AYONPyblishPluginMixin</span><span class=p>:</span>
    <span class=c1># TODO</span>
    <span class=c1># executable_in_thread = False</span>
    <span class=c1>#</span>
    <span class=c1># state_message = None</span>
    <span class=c1># state_percent = None</span>
    <span class=c1># _state_change_callbacks = []</span>
    <span class=c1>#</span>
    <span class=c1># def set_state(self, percent=None, message=None):</span>
    <span class=c1>#     &quot;&quot;&quot;Inner callback of plugin that would help to show in UI state.</span>
    <span class=c1>#</span>
    <span class=c1>#     Plugin have registered callbacks on state change which could trigger</span>
    <span class=c1>#     update message and percent in UI and repaint the change.</span>
    <span class=c1>#</span>
    <span class=c1>#     This part must be optional and should not be used to display errors</span>
    <span class=c1>#     or for logging.</span>
    <span class=c1>#</span>
    <span class=c1>#     Message should be short without details.</span>
    <span class=c1>#</span>
    <span class=c1>#     Args:</span>
    <span class=c1>#         percent(int): Percent of processing in range &lt;1-100&gt;.</span>
    <span class=c1>#         message(str): Message which will be shown to user (if in UI).</span>
    <span class=c1>#     &quot;&quot;&quot;</span>
    <span class=c1>#     if percent is not None:</span>
    <span class=c1>#         self.state_percent = percent</span>
    <span class=c1>#</span>
    <span class=c1>#     if message:</span>
    <span class=c1>#         self.state_message = message</span>
    <span class=c1>#</span>
    <span class=c1>#     for callback in self._state_change_callbacks:</span>
    <span class=c1>#         callback(self)</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>register_create_context_callbacks</span><span class=p>(</span>
        <span class=bp>cls</span><span class=p>,</span> <span class=n>create_context</span><span class=p>:</span> <span class=s2>&quot;CreateContext&quot;</span>
    <span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Register callbacks for create context.</span>

<span class=sd>        It is possible to register callbacks listening to changes happened</span>
<span class=sd>        in create context.</span>

<span class=sd>        Methods available on create context:</span>
<span class=sd>        - add_instances_added_callback</span>
<span class=sd>        - add_instances_removed_callback</span>
<span class=sd>        - add_value_changed_callback</span>
<span class=sd>        - add_pre_create_attr_defs_change_callback</span>
<span class=sd>        - add_create_attr_defs_change_callback</span>
<span class=sd>        - add_publish_attr_defs_change_callback</span>

<span class=sd>        Args:</span>
<span class=sd>            create_context (CreateContext): Create context.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>pass</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>get_attribute_defs</span><span class=p>(</span><span class=bp>cls</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Publish attribute definitions.</span>

<span class=sd>        Attributes available for all families in plugin&#39;s `families` attribute.</span>

<span class=sd>        Returns:</span>
<span class=sd>            list[AbstractAttrDef]: Attribute definitions for plugin.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=p>[]</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>get_attr_defs_for_context</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>create_context</span><span class=p>:</span> <span class=s2>&quot;CreateContext&quot;</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Publish attribute definitions for context.</span>

<span class=sd>        Attributes available for all families in plugin&#39;s `families` attribute.</span>

<span class=sd>        Args:</span>
<span class=sd>            create_context (CreateContext): Create context.</span>

<span class=sd>        Returns:</span>
<span class=sd>            list[AbstractAttrDef]: Attribute definitions for plugin.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=bp>cls</span><span class=o>.</span><span class=n>__instanceEnabled__</span><span class=p>:</span>
            <span class=k>return</span> <span class=p>[]</span>
        <span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>get_attribute_defs</span><span class=p>()</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>instance_matches_plugin_families</span><span class=p>(</span>
        <span class=bp>cls</span><span class=p>,</span> <span class=n>instance</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=s2>&quot;CreatedInstance&quot;</span><span class=p>]</span>
    <span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Check if instance matches families.</span>

<span class=sd>        Args:</span>
<span class=sd>            instance (Optional[CreatedInstance]): Instance to check. Or None</span>
<span class=sd>                for context.</span>

<span class=sd>        Returns:</span>
<span class=sd>            bool: True if instance matches plugin families.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=n>instance</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span> <span class=ow>not</span> <span class=bp>cls</span><span class=o>.</span><span class=n>__instanceEnabled__</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=bp>cls</span><span class=o>.</span><span class=n>__instanceEnabled__</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>False</span>

        <span class=n>families</span> <span class=o>=</span> <span class=p>[</span><span class=n>instance</span><span class=o>.</span><span class=n>product_type</span><span class=p>]</span>
        <span class=n>families</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>instance</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;families&quot;</span><span class=p>,</span> <span class=p>[]))</span>
        <span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=n>pyblish</span><span class=o>.</span><span class=n>logic</span><span class=o>.</span><span class=n>plugins_by_families</span><span class=p>([</span><span class=bp>cls</span><span class=p>],</span> <span class=n>families</span><span class=p>):</span>
            <span class=k>return</span> <span class=kc>True</span>
        <span class=k>return</span> <span class=kc>False</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>get_attr_defs_for_instance</span><span class=p>(</span>
        <span class=bp>cls</span><span class=p>,</span> <span class=n>create_context</span><span class=p>:</span> <span class=s2>&quot;CreateContext&quot;</span><span class=p>,</span> <span class=n>instance</span><span class=p>:</span> <span class=s2>&quot;CreatedInstance&quot;</span>
    <span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Publish attribute definitions for an instance.</span>

<span class=sd>        Attributes available for all families in plugin&#39;s `families` attribute.</span>

<span class=sd>        Args:</span>
<span class=sd>            create_context (CreateContext): Create context.</span>
<span class=sd>            instance (CreatedInstance): Instance for which attributes are</span>
<span class=sd>                collected.</span>

<span class=sd>        Returns:</span>
<span class=sd>            list[AbstractAttrDef]: Attribute definitions for plugin.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>cls</span><span class=o>.</span><span class=n>instance_matches_plugin_families</span><span class=p>(</span><span class=n>instance</span><span class=p>):</span>
            <span class=k>return</span> <span class=p>[]</span>
        <span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>get_attribute_defs</span><span class=p>()</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>convert_attribute_values</span><span class=p>(</span>
        <span class=bp>cls</span><span class=p>,</span> <span class=n>create_context</span><span class=p>:</span> <span class=s2>&quot;CreateContext&quot;</span><span class=p>,</span> <span class=n>instance</span><span class=p>:</span> <span class=s2>&quot;CreatedInstance&quot;</span>
    <span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Convert attribute values for instance.</span>

<span class=sd>        Args:</span>
<span class=sd>            create_context (CreateContext): Create context.</span>
<span class=sd>            instance (CreatedInstance): Instance for which attributes are</span>
<span class=sd>                converted.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span>

    <span class=nd>@staticmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>get_attr_values_from_data_for_plugin</span><span class=p>(</span><span class=n>plugin</span><span class=p>,</span> <span class=n>data</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get attribute values for attribute definitions from data.</span>

<span class=sd>        Args:</span>
<span class=sd>            plugin (Union[publish.api.Plugin, Type[publish.api.Plugin]]): The</span>
<span class=sd>                plugin for which attributes are extracted.</span>
<span class=sd>            data(dict): Data from instance or context.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>inspect</span><span class=o>.</span><span class=n>isclass</span><span class=p>(</span><span class=n>plugin</span><span class=p>):</span>
            <span class=n>plugin</span> <span class=o>=</span> <span class=n>plugin</span><span class=o>.</span><span class=vm>__class__</span>

        <span class=k>return</span> <span class=p>(</span>
            <span class=n>data</span>
            <span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;publish_attributes&quot;</span><span class=p>,</span> <span class=p>{})</span>
            <span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>plugin</span><span class=o>.</span><span class=vm>__name__</span><span class=p>,</span> <span class=p>{})</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_attr_values_from_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>data</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get attribute values for attribute definitions from data.</span>

<span class=sd>        Args:</span>
<span class=sd>            data(dict): Data from instance or context.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_attr_values_from_data_for_plugin</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=p>,</span> <span class=n>data</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.AYONPyblishPluginMixin.convert_attribute_values class="doc doc-heading"> <code class="highlight language-python"><span class=n>convert_attribute_values</span><span class=p>(</span><span class=n>create_context</span><span class=p>,</span> <span class=n>instance</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Convert attribute values for instance.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>create_context</code> </td> <td> <code><span title=ayon_core.pipeline.create.CreateContext>CreateContext</span></code> </td> <td> <div class=doc-md-description> <p>Create context.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>instance</code> </td> <td> <code><span title=ayon_core.pipeline.create.CreatedInstance>CreatedInstance</span></code> </td> <td> <div class=doc-md-description> <p>Instance for which attributes are converted.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/publish_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@classmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>convert_attribute_values</span><span class=p>(</span>
    <span class=bp>cls</span><span class=p>,</span> <span class=n>create_context</span><span class=p>:</span> <span class=s2>&quot;CreateContext&quot;</span><span class=p>,</span> <span class=n>instance</span><span class=p>:</span> <span class=s2>&quot;CreatedInstance&quot;</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Convert attribute values for instance.</span>

<span class=sd>    Args:</span>
<span class=sd>        create_context (CreateContext): Create context.</span>
<span class=sd>        instance (CreatedInstance): Instance for which attributes are</span>
<span class=sd>            converted.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>return</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.AYONPyblishPluginMixin.get_attr_defs_for_context class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_attr_defs_for_context</span><span class=p>(</span><span class=n>create_context</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Publish attribute definitions for context.</p> <p>Attributes available for all families in plugin's <code>families</code> attribute.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>create_context</code> </td> <td> <code><span title=ayon_core.pipeline.create.CreateContext>CreateContext</span></code> </td> <td> <div class=doc-md-description> <p>Create context.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>list[AbstractAttrDef]: Attribute definitions for plugin.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/publish_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@classmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>get_attr_defs_for_context</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>create_context</span><span class=p>:</span> <span class=s2>&quot;CreateContext&quot;</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Publish attribute definitions for context.</span>

<span class=sd>    Attributes available for all families in plugin&#39;s `families` attribute.</span>

<span class=sd>    Args:</span>
<span class=sd>        create_context (CreateContext): Create context.</span>

<span class=sd>    Returns:</span>
<span class=sd>        list[AbstractAttrDef]: Attribute definitions for plugin.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=bp>cls</span><span class=o>.</span><span class=n>__instanceEnabled__</span><span class=p>:</span>
        <span class=k>return</span> <span class=p>[]</span>
    <span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>get_attribute_defs</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.AYONPyblishPluginMixin.get_attr_defs_for_instance class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_attr_defs_for_instance</span><span class=p>(</span><span class=n>create_context</span><span class=p>,</span> <span class=n>instance</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Publish attribute definitions for an instance.</p> <p>Attributes available for all families in plugin's <code>families</code> attribute.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>create_context</code> </td> <td> <code><span title=ayon_core.pipeline.create.CreateContext>CreateContext</span></code> </td> <td> <div class=doc-md-description> <p>Create context.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>instance</code> </td> <td> <code><span title=ayon_core.pipeline.create.CreatedInstance>CreatedInstance</span></code> </td> <td> <div class=doc-md-description> <p>Instance for which attributes are collected.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>list[AbstractAttrDef]: Attribute definitions for plugin.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/publish_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@classmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>get_attr_defs_for_instance</span><span class=p>(</span>
    <span class=bp>cls</span><span class=p>,</span> <span class=n>create_context</span><span class=p>:</span> <span class=s2>&quot;CreateContext&quot;</span><span class=p>,</span> <span class=n>instance</span><span class=p>:</span> <span class=s2>&quot;CreatedInstance&quot;</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Publish attribute definitions for an instance.</span>

<span class=sd>    Attributes available for all families in plugin&#39;s `families` attribute.</span>

<span class=sd>    Args:</span>
<span class=sd>        create_context (CreateContext): Create context.</span>
<span class=sd>        instance (CreatedInstance): Instance for which attributes are</span>
<span class=sd>            collected.</span>

<span class=sd>    Returns:</span>
<span class=sd>        list[AbstractAttrDef]: Attribute definitions for plugin.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=bp>cls</span><span class=o>.</span><span class=n>instance_matches_plugin_families</span><span class=p>(</span><span class=n>instance</span><span class=p>):</span>
        <span class=k>return</span> <span class=p>[]</span>
    <span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>get_attribute_defs</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.AYONPyblishPluginMixin.get_attr_values_from_data class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_attr_values_from_data</span><span class=p>(</span><span class=n>data</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Get attribute values for attribute definitions from data.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>data</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>Data from instance or context.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/publish_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_attr_values_from_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>data</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get attribute values for attribute definitions from data.</span>

<span class=sd>    Args:</span>
<span class=sd>        data(dict): Data from instance or context.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_attr_values_from_data_for_plugin</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=p>,</span> <span class=n>data</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.AYONPyblishPluginMixin.get_attr_values_from_data_for_plugin class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_attr_values_from_data_for_plugin</span><span class=p>(</span><span class=n>plugin</span><span class=p>,</span> <span class=n>data</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Get attribute values for attribute definitions from data.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>plugin</code> </td> <td> <code><span title=Union>Union</span>[<span title=client.ayon_core.pipeline.publish.api.Plugin>Plugin</span>, <span title=Type>Type</span>[<span title=client.ayon_core.pipeline.publish.api.Plugin>Plugin</span>]]</code> </td> <td> <div class=doc-md-description> <p>The plugin for which attributes are extracted.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>data</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>Data from instance or context.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/publish_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@staticmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>get_attr_values_from_data_for_plugin</span><span class=p>(</span><span class=n>plugin</span><span class=p>,</span> <span class=n>data</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get attribute values for attribute definitions from data.</span>

<span class=sd>    Args:</span>
<span class=sd>        plugin (Union[publish.api.Plugin, Type[publish.api.Plugin]]): The</span>
<span class=sd>            plugin for which attributes are extracted.</span>
<span class=sd>        data(dict): Data from instance or context.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>inspect</span><span class=o>.</span><span class=n>isclass</span><span class=p>(</span><span class=n>plugin</span><span class=p>):</span>
        <span class=n>plugin</span> <span class=o>=</span> <span class=n>plugin</span><span class=o>.</span><span class=vm>__class__</span>

    <span class=k>return</span> <span class=p>(</span>
        <span class=n>data</span>
        <span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;publish_attributes&quot;</span><span class=p>,</span> <span class=p>{})</span>
        <span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>plugin</span><span class=o>.</span><span class=vm>__name__</span><span class=p>,</span> <span class=p>{})</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.AYONPyblishPluginMixin.get_attribute_defs class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_attribute_defs</span><span class=p>()</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Publish attribute definitions.</p> <p>Attributes available for all families in plugin's <code>families</code> attribute.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>list[AbstractAttrDef]: Attribute definitions for plugin.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/publish_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@classmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>get_attribute_defs</span><span class=p>(</span><span class=bp>cls</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Publish attribute definitions.</span>

<span class=sd>    Attributes available for all families in plugin&#39;s `families` attribute.</span>

<span class=sd>    Returns:</span>
<span class=sd>        list[AbstractAttrDef]: Attribute definitions for plugin.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>return</span> <span class=p>[]</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.AYONPyblishPluginMixin.instance_matches_plugin_families class="doc doc-heading"> <code class="highlight language-python"><span class=n>instance_matches_plugin_families</span><span class=p>(</span><span class=n>instance</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Check if instance matches families.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>instance</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=ayon_core.pipeline.create.CreatedInstance>CreatedInstance</span>]</code> </td> <td> <div class=doc-md-description> <p>Instance to check. Or None for context.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>bool</code></td> <td> </td> <td> <div class=doc-md-description> <p>True if instance matches plugin families.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/publish_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@classmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>instance_matches_plugin_families</span><span class=p>(</span>
    <span class=bp>cls</span><span class=p>,</span> <span class=n>instance</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=s2>&quot;CreatedInstance&quot;</span><span class=p>]</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Check if instance matches families.</span>

<span class=sd>    Args:</span>
<span class=sd>        instance (Optional[CreatedInstance]): Instance to check. Or None</span>
<span class=sd>            for context.</span>

<span class=sd>    Returns:</span>
<span class=sd>        bool: True if instance matches plugin families.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=n>instance</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>return</span> <span class=ow>not</span> <span class=bp>cls</span><span class=o>.</span><span class=n>__instanceEnabled__</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=bp>cls</span><span class=o>.</span><span class=n>__instanceEnabled__</span><span class=p>:</span>
        <span class=k>return</span> <span class=kc>False</span>

    <span class=n>families</span> <span class=o>=</span> <span class=p>[</span><span class=n>instance</span><span class=o>.</span><span class=n>product_type</span><span class=p>]</span>
    <span class=n>families</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>instance</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;families&quot;</span><span class=p>,</span> <span class=p>[]))</span>
    <span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=n>pyblish</span><span class=o>.</span><span class=n>logic</span><span class=o>.</span><span class=n>plugins_by_families</span><span class=p>([</span><span class=bp>cls</span><span class=p>],</span> <span class=n>families</span><span class=p>):</span>
        <span class=k>return</span> <span class=kc>True</span>
    <span class=k>return</span> <span class=kc>False</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.AYONPyblishPluginMixin.register_create_context_callbacks class="doc doc-heading"> <code class="highlight language-python"><span class=n>register_create_context_callbacks</span><span class=p>(</span><span class=n>create_context</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Register callbacks for create context.</p> <p>It is possible to register callbacks listening to changes happened in create context.</p> <p>Methods available on create context: - add_instances_added_callback - add_instances_removed_callback - add_value_changed_callback - add_pre_create_attr_defs_change_callback - add_create_attr_defs_change_callback - add_publish_attr_defs_change_callback</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>create_context</code> </td> <td> <code><span title=ayon_core.pipeline.create.CreateContext>CreateContext</span></code> </td> <td> <div class=doc-md-description> <p>Create context.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/publish_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@classmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>register_create_context_callbacks</span><span class=p>(</span>
    <span class=bp>cls</span><span class=p>,</span> <span class=n>create_context</span><span class=p>:</span> <span class=s2>&quot;CreateContext&quot;</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Register callbacks for create context.</span>

<span class=sd>    It is possible to register callbacks listening to changes happened</span>
<span class=sd>    in create context.</span>

<span class=sd>    Methods available on create context:</span>
<span class=sd>    - add_instances_added_callback</span>
<span class=sd>    - add_instances_removed_callback</span>
<span class=sd>    - add_value_changed_callback</span>
<span class=sd>    - add_pre_create_attr_defs_change_callback</span>
<span class=sd>    - add_create_attr_defs_change_callback</span>
<span class=sd>    - add_publish_attr_defs_change_callback</span>

<span class=sd>    Args:</span>
<span class=sd>        create_context (CreateContext): Create context.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.Anatomy class="doc doc-heading"> <code>Anatomy</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="BaseAnatomy (client.ayon_core.pipeline.anatomy.anatomy.BaseAnatomy)" href=anatomy/anatomy.html#client.ayon_core.pipeline.anatomy.anatomy.BaseAnatomy>BaseAnatomy</a></code></p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/anatomy/anatomy.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>405</span>
<span class=normal>406</span>
<span class=normal>407</span>
<span class=normal>408</span>
<span class=normal>409</span>
<span class=normal>410</span>
<span class=normal>411</span>
<span class=normal>412</span>
<span class=normal>413</span>
<span class=normal>414</span>
<span class=normal>415</span>
<span class=normal>416</span>
<span class=normal>417</span>
<span class=normal>418</span>
<span class=normal>419</span>
<span class=normal>420</span>
<span class=normal>421</span>
<span class=normal>422</span>
<span class=normal>423</span>
<span class=normal>424</span>
<span class=normal>425</span>
<span class=normal>426</span>
<span class=normal>427</span>
<span class=normal>428</span>
<span class=normal>429</span>
<span class=normal>430</span>
<span class=normal>431</span>
<span class=normal>432</span>
<span class=normal>433</span>
<span class=normal>434</span>
<span class=normal>435</span>
<span class=normal>436</span>
<span class=normal>437</span>
<span class=normal>438</span>
<span class=normal>439</span>
<span class=normal>440</span>
<span class=normal>441</span>
<span class=normal>442</span>
<span class=normal>443</span>
<span class=normal>444</span>
<span class=normal>445</span>
<span class=normal>446</span>
<span class=normal>447</span>
<span class=normal>448</span>
<span class=normal>449</span>
<span class=normal>450</span>
<span class=normal>451</span>
<span class=normal>452</span>
<span class=normal>453</span>
<span class=normal>454</span>
<span class=normal>455</span>
<span class=normal>456</span>
<span class=normal>457</span>
<span class=normal>458</span>
<span class=normal>459</span>
<span class=normal>460</span>
<span class=normal>461</span>
<span class=normal>462</span>
<span class=normal>463</span>
<span class=normal>464</span>
<span class=normal>465</span>
<span class=normal>466</span>
<span class=normal>467</span>
<span class=normal>468</span>
<span class=normal>469</span>
<span class=normal>470</span>
<span class=normal>471</span>
<span class=normal>472</span>
<span class=normal>473</span>
<span class=normal>474</span>
<span class=normal>475</span>
<span class=normal>476</span>
<span class=normal>477</span>
<span class=normal>478</span>
<span class=normal>479</span>
<span class=normal>480</span>
<span class=normal>481</span>
<span class=normal>482</span>
<span class=normal>483</span>
<span class=normal>484</span>
<span class=normal>485</span>
<span class=normal>486</span>
<span class=normal>487</span>
<span class=normal>488</span>
<span class=normal>489</span>
<span class=normal>490</span>
<span class=normal>491</span>
<span class=normal>492</span>
<span class=normal>493</span>
<span class=normal>494</span>
<span class=normal>495</span>
<span class=normal>496</span>
<span class=normal>497</span>
<span class=normal>498</span>
<span class=normal>499</span>
<span class=normal>500</span>
<span class=normal>501</span>
<span class=normal>502</span>
<span class=normal>503</span>
<span class=normal>504</span>
<span class=normal>505</span>
<span class=normal>506</span>
<span class=normal>507</span>
<span class=normal>508</span>
<span class=normal>509</span>
<span class=normal>510</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>Anatomy</span><span class=p>(</span><span class=n>BaseAnatomy</span><span class=p>):</span>
    <span class=n>_project_cache</span> <span class=o>=</span> <span class=n>NestedCacheItem</span><span class=p>(</span><span class=n>lifetime</span><span class=o>=</span><span class=mi>10</span><span class=p>)</span>
    <span class=n>_sitesync_addon_cache</span> <span class=o>=</span> <span class=n>CacheItem</span><span class=p>(</span><span class=n>lifetime</span><span class=o>=</span><span class=mi>60</span><span class=p>)</span>
    <span class=n>_default_site_id_cache</span> <span class=o>=</span> <span class=n>NestedCacheItem</span><span class=p>(</span><span class=n>lifetime</span><span class=o>=</span><span class=mi>60</span><span class=p>)</span>
    <span class=n>_root_overrides_cache</span> <span class=o>=</span> <span class=n>NestedCacheItem</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=n>lifetime</span><span class=o>=</span><span class=mi>60</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span> <span class=n>project_name</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>site_name</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>project_entity</span><span class=o>=</span><span class=kc>None</span>
    <span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>project_name</span><span class=p>:</span>
            <span class=n>project_name</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AYON_PROJECT_NAME&quot;</span><span class=p>)</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>project_name</span><span class=p>:</span>
            <span class=k>raise</span> <span class=n>ProjectNotSet</span><span class=p>((</span>
                <span class=s2>&quot;Implementation bug: Project name is not set. Anatomy requires&quot;</span>
                <span class=s2>&quot; to load data for specific project.&quot;</span>
            <span class=p>))</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>project_entity</span><span class=p>:</span>
            <span class=n>project_entity</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_project_entity_from_cache</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>
        <span class=n>root_overrides</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_site_root_overrides</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span> <span class=n>site_name</span>
        <span class=p>)</span>

        <span class=nb>super</span><span class=p>(</span><span class=n>Anatomy</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>project_entity</span><span class=p>,</span> <span class=n>root_overrides</span><span class=p>)</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>get_project_entity_from_cache</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>project_name</span><span class=p>):</span>
        <span class=n>project_cache</span> <span class=o>=</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_project_cache</span><span class=p>[</span><span class=n>project_name</span><span class=p>]</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>project_cache</span><span class=o>.</span><span class=n>is_valid</span><span class=p>:</span>
            <span class=n>project_cache</span><span class=o>.</span><span class=n>update_data</span><span class=p>(</span><span class=n>ayon_api</span><span class=o>.</span><span class=n>get_project</span><span class=p>(</span><span class=n>project_name</span><span class=p>))</span>
        <span class=k>return</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=n>project_cache</span><span class=o>.</span><span class=n>get_data</span><span class=p>())</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>get_sitesync_addon</span><span class=p>(</span><span class=bp>cls</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_sitesync_addon_cache</span><span class=o>.</span><span class=n>is_valid</span><span class=p>:</span>
            <span class=n>manager</span> <span class=o>=</span> <span class=n>AddonsManager</span><span class=p>()</span>
            <span class=bp>cls</span><span class=o>.</span><span class=n>_sitesync_addon_cache</span><span class=o>.</span><span class=n>update_data</span><span class=p>(</span>
                <span class=n>manager</span><span class=o>.</span><span class=n>get_enabled_addon</span><span class=p>(</span><span class=s2>&quot;sitesync&quot;</span><span class=p>)</span>
            <span class=p>)</span>
        <span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_sitesync_addon_cache</span><span class=o>.</span><span class=n>get_data</span><span class=p>()</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>_get_studio_roots_overrides</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>project_name</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;This would return &#39;studio&#39; site override by local settings.</span>

<span class=sd>        Notes:</span>
<span class=sd>            This logic handles local overrides of studio site which may be</span>
<span class=sd>                available even when sync server is not enabled.</span>
<span class=sd>            Handling of &#39;studio&#39; and &#39;local&#39; site was separated as preparation</span>
<span class=sd>                for AYON development where that will be received from</span>
<span class=sd>                separated sources.</span>

<span class=sd>        Args:</span>
<span class=sd>            project_name (str): Name of project.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Union[Dict[str, str], None]): Local root overrides.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>project_name</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>None</span>
        <span class=k>return</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_project_root_overrides_by_site_id</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span> <span class=n>get_local_site_id</span><span class=p>()</span>
        <span class=p>)</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>_get_site_root_overrides</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>project_name</span><span class=p>,</span> <span class=n>site_name</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get root overrides for site.</span>

<span class=sd>        Args:</span>
<span class=sd>            project_name (str): Project name for which root overrides should be</span>
<span class=sd>                received.</span>
<span class=sd>            site_name (Union[str, None]): Name of site for which root overrides</span>
<span class=sd>                should be returned.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=c1># First check if sync server is available and enabled</span>
        <span class=n>sitesync_addon</span> <span class=o>=</span> <span class=bp>cls</span><span class=o>.</span><span class=n>get_sitesync_addon</span><span class=p>()</span>
        <span class=k>if</span> <span class=n>sitesync_addon</span> <span class=ow>is</span> <span class=kc>None</span> <span class=ow>or</span> <span class=ow>not</span> <span class=n>sitesync_addon</span><span class=o>.</span><span class=n>enabled</span><span class=p>:</span>
            <span class=c1># QUESTION is ok to force &#39;studio&#39; when site sync is not enabled?</span>
            <span class=n>site_name</span> <span class=o>=</span> <span class=s2>&quot;studio&quot;</span>

        <span class=k>elif</span> <span class=ow>not</span> <span class=n>site_name</span><span class=p>:</span>
            <span class=c1># Use sync server to receive active site name</span>
            <span class=n>project_cache</span> <span class=o>=</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_default_site_id_cache</span><span class=p>[</span><span class=n>project_name</span><span class=p>]</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=n>project_cache</span><span class=o>.</span><span class=n>is_valid</span><span class=p>:</span>
                <span class=n>project_cache</span><span class=o>.</span><span class=n>update_data</span><span class=p>(</span>
                    <span class=n>sitesync_addon</span><span class=o>.</span><span class=n>get_active_site_type</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>
                <span class=p>)</span>
            <span class=n>site_name</span> <span class=o>=</span> <span class=n>project_cache</span><span class=o>.</span><span class=n>get_data</span><span class=p>()</span>

        <span class=n>site_cache</span> <span class=o>=</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_root_overrides_cache</span><span class=p>[</span><span class=n>project_name</span><span class=p>][</span><span class=n>site_name</span><span class=p>]</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>site_cache</span><span class=o>.</span><span class=n>is_valid</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>site_name</span> <span class=o>==</span> <span class=s2>&quot;studio&quot;</span><span class=p>:</span>
                <span class=c1># Handle studio root overrides without sync server</span>
                <span class=c1># - studio root overrides can be done even without sync server</span>
                <span class=n>roots_overrides</span> <span class=o>=</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_get_studio_roots_overrides</span><span class=p>(</span>
                    <span class=n>project_name</span>
                <span class=p>)</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=c1># Ask sync server to get roots overrides</span>
                <span class=n>roots_overrides</span> <span class=o>=</span> <span class=n>sitesync_addon</span><span class=o>.</span><span class=n>get_site_root_overrides</span><span class=p>(</span>
                    <span class=n>project_name</span><span class=p>,</span> <span class=n>site_name</span>
                <span class=p>)</span>
            <span class=n>site_cache</span><span class=o>.</span><span class=n>update_data</span><span class=p>(</span><span class=n>roots_overrides</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>site_cache</span><span class=o>.</span><span class=n>get_data</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.AutoCreator class="doc doc-heading"> <code>AutoCreator</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="BaseCreator (client.ayon_core.pipeline.create.creator_plugins.BaseCreator)" href=create/creator_plugins.html#client.ayon_core.pipeline.create.creator_plugins.BaseCreator>BaseCreator</a></code></p> <p>Creator which is automatically triggered without user interaction.</p> <p>Can be used e.g. for <code>workfile</code>.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>957</span>
<span class=normal>958</span>
<span class=normal>959</span>
<span class=normal>960</span>
<span class=normal>961</span>
<span class=normal>962</span>
<span class=normal>963</span>
<span class=normal>964</span>
<span class=normal>965</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>AutoCreator</span><span class=p>(</span><span class=n>BaseCreator</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Creator which is automatically triggered without user interaction.</span>

<span class=sd>    Can be used e.g. for `workfile`.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=nf>remove_instances</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instances</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Skip removal.&quot;&quot;&quot;</span>
        <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.AutoCreator.remove_instances class="doc doc-heading"> <code class="highlight language-python"><span class=n>remove_instances</span><span class=p>(</span><span class=n>instances</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Skip removal.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>963</span>
<span class=normal>964</span>
<span class=normal>965</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>remove_instances</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instances</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Skip removal.&quot;&quot;&quot;</span>
    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.BaseCreator class="doc doc-heading"> <code>BaseCreator</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=abc.ABC>ABC</span></code></p> <p>Plugin that create and modify instance data before publishing process.</p> <p>We should maybe find better name as creation is only one part of its logic and to avoid expectations that it is the same as <code>avalon.api.Creator</code>.</p> <p>Single object should be used for multiple instances instead of single instance per one creator object. Do not store temp data or mid-process data to <code>self</code> if it's not Plugin specific.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>project_settings</code> </td> <td> <code><span title=dict>dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Project settings.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>create_context</code> </td> <td> <code><a class="autorefs autorefs-internal" title="CreateContext (client.ayon_core.pipeline.create.context.CreateContext)" href=create/context.html#client.ayon_core.pipeline.create.context.CreateContext>CreateContext</a></code> </td> <td> <div class=doc-md-description> <p>Context which initialized creator.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>headless</code> </td> <td> <code><span title=bool>bool</span></code> </td> <td> <div class=doc-md-description> <p>Running in headless mode.</p> </div> </td> <td> <code>False</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span>
<span class=normal>277</span>
<span class=normal>278</span>
<span class=normal>279</span>
<span class=normal>280</span>
<span class=normal>281</span>
<span class=normal>282</span>
<span class=normal>283</span>
<span class=normal>284</span>
<span class=normal>285</span>
<span class=normal>286</span>
<span class=normal>287</span>
<span class=normal>288</span>
<span class=normal>289</span>
<span class=normal>290</span>
<span class=normal>291</span>
<span class=normal>292</span>
<span class=normal>293</span>
<span class=normal>294</span>
<span class=normal>295</span>
<span class=normal>296</span>
<span class=normal>297</span>
<span class=normal>298</span>
<span class=normal>299</span>
<span class=normal>300</span>
<span class=normal>301</span>
<span class=normal>302</span>
<span class=normal>303</span>
<span class=normal>304</span>
<span class=normal>305</span>
<span class=normal>306</span>
<span class=normal>307</span>
<span class=normal>308</span>
<span class=normal>309</span>
<span class=normal>310</span>
<span class=normal>311</span>
<span class=normal>312</span>
<span class=normal>313</span>
<span class=normal>314</span>
<span class=normal>315</span>
<span class=normal>316</span>
<span class=normal>317</span>
<span class=normal>318</span>
<span class=normal>319</span>
<span class=normal>320</span>
<span class=normal>321</span>
<span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span>
<span class=normal>325</span>
<span class=normal>326</span>
<span class=normal>327</span>
<span class=normal>328</span>
<span class=normal>329</span>
<span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span>
<span class=normal>334</span>
<span class=normal>335</span>
<span class=normal>336</span>
<span class=normal>337</span>
<span class=normal>338</span>
<span class=normal>339</span>
<span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span>
<span class=normal>344</span>
<span class=normal>345</span>
<span class=normal>346</span>
<span class=normal>347</span>
<span class=normal>348</span>
<span class=normal>349</span>
<span class=normal>350</span>
<span class=normal>351</span>
<span class=normal>352</span>
<span class=normal>353</span>
<span class=normal>354</span>
<span class=normal>355</span>
<span class=normal>356</span>
<span class=normal>357</span>
<span class=normal>358</span>
<span class=normal>359</span>
<span class=normal>360</span>
<span class=normal>361</span>
<span class=normal>362</span>
<span class=normal>363</span>
<span class=normal>364</span>
<span class=normal>365</span>
<span class=normal>366</span>
<span class=normal>367</span>
<span class=normal>368</span>
<span class=normal>369</span>
<span class=normal>370</span>
<span class=normal>371</span>
<span class=normal>372</span>
<span class=normal>373</span>
<span class=normal>374</span>
<span class=normal>375</span>
<span class=normal>376</span>
<span class=normal>377</span>
<span class=normal>378</span>
<span class=normal>379</span>
<span class=normal>380</span>
<span class=normal>381</span>
<span class=normal>382</span>
<span class=normal>383</span>
<span class=normal>384</span>
<span class=normal>385</span>
<span class=normal>386</span>
<span class=normal>387</span>
<span class=normal>388</span>
<span class=normal>389</span>
<span class=normal>390</span>
<span class=normal>391</span>
<span class=normal>392</span>
<span class=normal>393</span>
<span class=normal>394</span>
<span class=normal>395</span>
<span class=normal>396</span>
<span class=normal>397</span>
<span class=normal>398</span>
<span class=normal>399</span>
<span class=normal>400</span>
<span class=normal>401</span>
<span class=normal>402</span>
<span class=normal>403</span>
<span class=normal>404</span>
<span class=normal>405</span>
<span class=normal>406</span>
<span class=normal>407</span>
<span class=normal>408</span>
<span class=normal>409</span>
<span class=normal>410</span>
<span class=normal>411</span>
<span class=normal>412</span>
<span class=normal>413</span>
<span class=normal>414</span>
<span class=normal>415</span>
<span class=normal>416</span>
<span class=normal>417</span>
<span class=normal>418</span>
<span class=normal>419</span>
<span class=normal>420</span>
<span class=normal>421</span>
<span class=normal>422</span>
<span class=normal>423</span>
<span class=normal>424</span>
<span class=normal>425</span>
<span class=normal>426</span>
<span class=normal>427</span>
<span class=normal>428</span>
<span class=normal>429</span>
<span class=normal>430</span>
<span class=normal>431</span>
<span class=normal>432</span>
<span class=normal>433</span>
<span class=normal>434</span>
<span class=normal>435</span>
<span class=normal>436</span>
<span class=normal>437</span>
<span class=normal>438</span>
<span class=normal>439</span>
<span class=normal>440</span>
<span class=normal>441</span>
<span class=normal>442</span>
<span class=normal>443</span>
<span class=normal>444</span>
<span class=normal>445</span>
<span class=normal>446</span>
<span class=normal>447</span>
<span class=normal>448</span>
<span class=normal>449</span>
<span class=normal>450</span>
<span class=normal>451</span>
<span class=normal>452</span>
<span class=normal>453</span>
<span class=normal>454</span>
<span class=normal>455</span>
<span class=normal>456</span>
<span class=normal>457</span>
<span class=normal>458</span>
<span class=normal>459</span>
<span class=normal>460</span>
<span class=normal>461</span>
<span class=normal>462</span>
<span class=normal>463</span>
<span class=normal>464</span>
<span class=normal>465</span>
<span class=normal>466</span>
<span class=normal>467</span>
<span class=normal>468</span>
<span class=normal>469</span>
<span class=normal>470</span>
<span class=normal>471</span>
<span class=normal>472</span>
<span class=normal>473</span>
<span class=normal>474</span>
<span class=normal>475</span>
<span class=normal>476</span>
<span class=normal>477</span>
<span class=normal>478</span>
<span class=normal>479</span>
<span class=normal>480</span>
<span class=normal>481</span>
<span class=normal>482</span>
<span class=normal>483</span>
<span class=normal>484</span>
<span class=normal>485</span>
<span class=normal>486</span>
<span class=normal>487</span>
<span class=normal>488</span>
<span class=normal>489</span>
<span class=normal>490</span>
<span class=normal>491</span>
<span class=normal>492</span>
<span class=normal>493</span>
<span class=normal>494</span>
<span class=normal>495</span>
<span class=normal>496</span>
<span class=normal>497</span>
<span class=normal>498</span>
<span class=normal>499</span>
<span class=normal>500</span>
<span class=normal>501</span>
<span class=normal>502</span>
<span class=normal>503</span>
<span class=normal>504</span>
<span class=normal>505</span>
<span class=normal>506</span>
<span class=normal>507</span>
<span class=normal>508</span>
<span class=normal>509</span>
<span class=normal>510</span>
<span class=normal>511</span>
<span class=normal>512</span>
<span class=normal>513</span>
<span class=normal>514</span>
<span class=normal>515</span>
<span class=normal>516</span>
<span class=normal>517</span>
<span class=normal>518</span>
<span class=normal>519</span>
<span class=normal>520</span>
<span class=normal>521</span>
<span class=normal>522</span>
<span class=normal>523</span>
<span class=normal>524</span>
<span class=normal>525</span>
<span class=normal>526</span>
<span class=normal>527</span>
<span class=normal>528</span>
<span class=normal>529</span>
<span class=normal>530</span>
<span class=normal>531</span>
<span class=normal>532</span>
<span class=normal>533</span>
<span class=normal>534</span>
<span class=normal>535</span>
<span class=normal>536</span>
<span class=normal>537</span>
<span class=normal>538</span>
<span class=normal>539</span>
<span class=normal>540</span>
<span class=normal>541</span>
<span class=normal>542</span>
<span class=normal>543</span>
<span class=normal>544</span>
<span class=normal>545</span>
<span class=normal>546</span>
<span class=normal>547</span>
<span class=normal>548</span>
<span class=normal>549</span>
<span class=normal>550</span>
<span class=normal>551</span>
<span class=normal>552</span>
<span class=normal>553</span>
<span class=normal>554</span>
<span class=normal>555</span>
<span class=normal>556</span>
<span class=normal>557</span>
<span class=normal>558</span>
<span class=normal>559</span>
<span class=normal>560</span>
<span class=normal>561</span>
<span class=normal>562</span>
<span class=normal>563</span>
<span class=normal>564</span>
<span class=normal>565</span>
<span class=normal>566</span>
<span class=normal>567</span>
<span class=normal>568</span>
<span class=normal>569</span>
<span class=normal>570</span>
<span class=normal>571</span>
<span class=normal>572</span>
<span class=normal>573</span>
<span class=normal>574</span>
<span class=normal>575</span>
<span class=normal>576</span>
<span class=normal>577</span>
<span class=normal>578</span>
<span class=normal>579</span>
<span class=normal>580</span>
<span class=normal>581</span>
<span class=normal>582</span>
<span class=normal>583</span>
<span class=normal>584</span>
<span class=normal>585</span>
<span class=normal>586</span>
<span class=normal>587</span>
<span class=normal>588</span>
<span class=normal>589</span>
<span class=normal>590</span>
<span class=normal>591</span>
<span class=normal>592</span>
<span class=normal>593</span>
<span class=normal>594</span>
<span class=normal>595</span>
<span class=normal>596</span>
<span class=normal>597</span>
<span class=normal>598</span>
<span class=normal>599</span>
<span class=normal>600</span>
<span class=normal>601</span>
<span class=normal>602</span>
<span class=normal>603</span>
<span class=normal>604</span>
<span class=normal>605</span>
<span class=normal>606</span>
<span class=normal>607</span>
<span class=normal>608</span>
<span class=normal>609</span>
<span class=normal>610</span>
<span class=normal>611</span>
<span class=normal>612</span>
<span class=normal>613</span>
<span class=normal>614</span>
<span class=normal>615</span>
<span class=normal>616</span>
<span class=normal>617</span>
<span class=normal>618</span>
<span class=normal>619</span>
<span class=normal>620</span>
<span class=normal>621</span>
<span class=normal>622</span>
<span class=normal>623</span>
<span class=normal>624</span>
<span class=normal>625</span>
<span class=normal>626</span>
<span class=normal>627</span>
<span class=normal>628</span>
<span class=normal>629</span>
<span class=normal>630</span>
<span class=normal>631</span>
<span class=normal>632</span>
<span class=normal>633</span>
<span class=normal>634</span>
<span class=normal>635</span>
<span class=normal>636</span>
<span class=normal>637</span>
<span class=normal>638</span>
<span class=normal>639</span>
<span class=normal>640</span>
<span class=normal>641</span>
<span class=normal>642</span>
<span class=normal>643</span>
<span class=normal>644</span>
<span class=normal>645</span>
<span class=normal>646</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>BaseCreator</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Plugin that create and modify instance data before publishing process.</span>

<span class=sd>    We should maybe find better name as creation is only one part of its logic</span>
<span class=sd>    and to avoid expectations that it is the same as `avalon.api.Creator`.</span>

<span class=sd>    Single object should be used for multiple instances instead of single</span>
<span class=sd>    instance per one creator object. Do not store temp data or mid-process data</span>
<span class=sd>    to `self` if it&#39;s not Plugin specific.</span>

<span class=sd>    Args:</span>
<span class=sd>        project_settings (dict[str, Any]): Project settings.</span>
<span class=sd>        create_context (CreateContext): Context which initialized creator.</span>
<span class=sd>        headless (bool): Running in headless mode.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=c1># Label shown in UI</span>
    <span class=n>label</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=n>group_label</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=c1># Cached group label after first call &#39;get_group_label&#39;</span>
    <span class=n>_cached_group_label</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=c1># Order in which will be plugin executed (collect &amp; update instances)</span>
    <span class=c1>#   less == earlier -&gt; Order &#39;90&#39; will be processed before &#39;100&#39;</span>
    <span class=n>order</span> <span class=o>=</span> <span class=mi>100</span>

    <span class=c1># Variable to store logger</span>
    <span class=n>_log</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=c1># Creator is enabled (Probably does not have reason of existence?)</span>
    <span class=n>enabled</span> <span class=o>=</span> <span class=kc>True</span>

    <span class=c1># Creator (and product type) icon</span>
    <span class=c1># - may not be used if `get_icon` is reimplemented</span>
    <span class=n>icon</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=c1># Instance attribute definitions that can be changed per instance</span>
    <span class=c1># - returns list of attribute definitions from</span>
    <span class=c1>#       `ayon_core.lib.attribute_definitions`</span>
    <span class=n>instance_attr_defs</span><span class=p>:</span> <span class=s2>&quot;list[AbstractAttrDef]&quot;</span> <span class=o>=</span> <span class=p>[]</span>

    <span class=c1># Filtering by host name - can be used to be filtered by host name</span>
    <span class=c1># - used on all hosts when set to &#39;None&#39; for Backwards compatibility</span>
    <span class=c1>#   - was added afterwards</span>
    <span class=c1># QUESTION make this required?</span>
    <span class=n>host_name</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=c1># Settings auto-apply helpers</span>
    <span class=c1># Root key in project settings (mandatory for auto-apply to work)</span>
    <span class=n>settings_category</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=c1># Name of plugin in create settings &gt; class name is used if not set</span>
    <span class=n>settings_name</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span> <span class=n>project_settings</span><span class=p>,</span> <span class=n>create_context</span><span class=p>,</span> <span class=n>headless</span><span class=o>=</span><span class=kc>False</span>
    <span class=p>):</span>
        <span class=c1># Reference to CreateContext</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span> <span class=o>=</span> <span class=n>create_context</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>project_settings</span> <span class=o>=</span> <span class=n>project_settings</span>

        <span class=c1># Creator is running in headless mode (without UI elements)</span>
        <span class=c1># - we may use UI inside processing this attribute should be checked</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>headless</span> <span class=o>=</span> <span class=n>headless</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>apply_settings</span><span class=p>(</span><span class=n>project_settings</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>register_callbacks</span><span class=p>()</span>

    <span class=nd>@staticmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>_get_settings_values</span><span class=p>(</span><span class=n>project_settings</span><span class=p>,</span> <span class=n>category_name</span><span class=p>,</span> <span class=n>plugin_name</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Helper method to get settings values.</span>

<span class=sd>        Args:</span>
<span class=sd>            project_settings (dict[str, Any]): Project settings.</span>
<span class=sd>            category_name (str): Category of settings.</span>
<span class=sd>            plugin_name (str): Name of settings.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Optional[dict[str, Any]]: Settings values or None.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>settings</span> <span class=o>=</span> <span class=n>project_settings</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>category_name</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>settings</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>None</span>

        <span class=n>create_settings</span> <span class=o>=</span> <span class=n>settings</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;create&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>create_settings</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>None</span>

        <span class=k>return</span> <span class=n>create_settings</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>plugin_name</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>apply_settings</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>project_settings</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Method called on initialization of plugin to apply settings.</span>

<span class=sd>        Default implementation tries to auto-apply settings values if are</span>
<span class=sd>            in expected hierarchy.</span>

<span class=sd>        Data hierarchy to auto-apply settings:</span>
<span class=sd>            ├─ {self.settings_category}                 - Root key in settings</span>
<span class=sd>            │ └─ &quot;create&quot;                               - Hardcoded key</span>
<span class=sd>            │   └─ {self.settings_name} | {class name}  - Name of plugin</span>
<span class=sd>            │     ├─ ... attribute values...            - Attribute/value pair</span>

<span class=sd>        It is mandatory to define &#39;settings_category&#39; attribute. Attribute</span>
<span class=sd>        &#39;settings_name&#39; is optional and class name is used if is not defined.</span>

<span class=sd>        Example data:</span>
<span class=sd>            ProjectSettings {</span>
<span class=sd>                &quot;maya&quot;: {                    # self.settings_category</span>
<span class=sd>                    &quot;create&quot;: {              # Hardcoded key</span>
<span class=sd>                        &quot;CreateAnimation&quot;: { # self.settings_name / class name</span>
<span class=sd>                            &quot;enabled&quot;: True, # --- Attributes to set ---</span>
<span class=sd>                            &quot;optional&quot;: True,#</span>
<span class=sd>                            &quot;active&quot;: True,  #</span>
<span class=sd>                            &quot;fps&quot;: 25,       # -------------------------</span>
<span class=sd>                        },</span>
<span class=sd>                        ...</span>
<span class=sd>                    },</span>
<span class=sd>                    ...</span>
<span class=sd>                },</span>
<span class=sd>                ...</span>
<span class=sd>            }</span>

<span class=sd>        Args:</span>
<span class=sd>            project_settings (dict[str, Any]): Project settings.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>settings_category</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>settings_category</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>settings_category</span><span class=p>:</span>
            <span class=k>return</span>

        <span class=n>cls_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span>
        <span class=n>settings_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>settings_name</span> <span class=ow>or</span> <span class=n>cls_name</span>

        <span class=n>settings</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_settings_values</span><span class=p>(</span>
            <span class=n>project_settings</span><span class=p>,</span> <span class=n>settings_category</span><span class=p>,</span> <span class=n>settings_name</span>
        <span class=p>)</span>
        <span class=k>if</span> <span class=n>settings</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;No settings found for </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>cls_name</span><span class=p>))</span>
            <span class=k>return</span>

        <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>settings</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=c1># Log out attributes that are not defined on plugin object</span>
            <span class=c1># - those may be potential dangerous typos in settings</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=nb>hasattr</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>((</span>
                    <span class=s2>&quot;Applying settings to unknown attribute &#39;</span><span class=si>{}</span><span class=s2>&#39; on &#39;</span><span class=si>{}</span><span class=s2>&#39;.&quot;</span>
                <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                    <span class=n>key</span><span class=p>,</span> <span class=n>cls_name</span>
                <span class=p>))</span>
            <span class=nb>setattr</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>register_callbacks</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Register callbacks for creator.</span>

<span class=sd>        Default implementation does nothing. It can be overridden to register</span>
<span class=sd>        callbacks for creator.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>pass</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>identifier</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Identifier of creator (must be unique).</span>

<span class=sd>        Default implementation returns plugin&#39;s product type.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>product_type</span>

    <span class=nd>@property</span>
    <span class=nd>@abstractmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>product_type</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Family that plugin represents.&quot;&quot;&quot;</span>

        <span class=k>pass</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>project_name</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Current project name.</span>

<span class=sd>        Returns:</span>
<span class=sd>            str: Name of a project.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span><span class=o>.</span><span class=n>project_name</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>project_anatomy</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Current project anatomy.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Anatomy: Project anatomy object.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span><span class=o>.</span><span class=n>project_anatomy</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>host</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span><span class=o>.</span><span class=n>host</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_group_label</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Group label under which are instances grouped in UI.</span>

<span class=sd>        Default implementation use attributes in this order:</span>
<span class=sd>            - &#39;group_label&#39; -&gt; &#39;label&#39; -&gt; &#39;identifier&#39;</span>
<span class=sd>                Keep in mind that &#39;identifier&#39; use &#39;product_type&#39; by default.</span>

<span class=sd>        Returns:</span>
<span class=sd>            str: Group label that can be used for grouping of instances in UI.</span>
<span class=sd>                Group label can be overridden by instance itself.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_cached_group_label</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>label</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>identifier</span>
            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>group_label</span><span class=p>:</span>
                <span class=n>label</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>group_label</span>
            <span class=k>elif</span> <span class=bp>self</span><span class=o>.</span><span class=n>label</span><span class=p>:</span>
                <span class=n>label</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>label</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_cached_group_label</span> <span class=o>=</span> <span class=n>label</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_cached_group_label</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>log</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Logger of the plugin.</span>

<span class=sd>        Returns:</span>
<span class=sd>            logging.Logger: Logger with name of the plugin.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_log</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_log</span> <span class=o>=</span> <span class=n>Logger</span><span class=o>.</span><span class=n>get_logger</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=p>)</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_log</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_create_instance</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>product_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
        <span class=n>data</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>],</span>
        <span class=n>product_type</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=p>)</span> <span class=o>-&gt;</span> <span class=n>CreatedInstance</span><span class=p>:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Create instance and add instance to context.</span>

<span class=sd>        Args:</span>
<span class=sd>            product_name (str): Product name.</span>
<span class=sd>            data (Dict[str, Any]): Instance data.</span>
<span class=sd>            product_type (Optional[str]): Product type, object attribute</span>
<span class=sd>                &#39;product_type&#39; is used if not passed.</span>

<span class=sd>        Returns:</span>
<span class=sd>            CreatedInstance: Created instance.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=n>product_type</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>product_type</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>product_type</span>
        <span class=n>instance</span> <span class=o>=</span> <span class=n>CreatedInstance</span><span class=p>(</span>
            <span class=n>product_type</span><span class=p>,</span>
            <span class=n>product_name</span><span class=p>,</span>
            <span class=n>data</span><span class=p>,</span>
            <span class=n>creator</span><span class=o>=</span><span class=bp>self</span><span class=p>,</span>
        <span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_add_instance_to_context</span><span class=p>(</span><span class=n>instance</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>instance</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_add_instance_to_context</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instance</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Helper method to add instance to create context.</span>

<span class=sd>        Instances should be stored to DCC workfile metadata to be able reload</span>
<span class=sd>        them and also stored to CreateContext in which is creator plugin</span>
<span class=sd>        existing at the moment to be able use it without refresh of</span>
<span class=sd>        CreateContext.</span>

<span class=sd>        Args:</span>
<span class=sd>            instance (CreatedInstance): New created instance.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span><span class=o>.</span><span class=n>creator_adds_instance</span><span class=p>(</span><span class=n>instance</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_remove_instance_from_context</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instance</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Helper method to remove instance from create context.</span>

<span class=sd>        Instances must be removed from DCC workfile metadat aand from create</span>
<span class=sd>        context in which plugin is existing at the moment of removal to</span>
<span class=sd>        propagate the change without restarting create context.</span>

<span class=sd>        Args:</span>
<span class=sd>            instance (CreatedInstance): Instance which should be removed.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span><span class=o>.</span><span class=n>creator_removed_instance</span><span class=p>(</span><span class=n>instance</span><span class=p>)</span>

    <span class=nd>@abstractmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>create</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Create new instance.</span>

<span class=sd>        Replacement of `process` method from avalon implementation.</span>
<span class=sd>        - must expect all data that were passed to init in previous</span>
<span class=sd>            implementation</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>pass</span>

    <span class=nd>@abstractmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>collect_instances</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Collect existing instances related to this creator plugin.</span>

<span class=sd>        The implementation differs on host abilities. The creator has to</span>
<span class=sd>        collect metadata about instance and create &#39;CreatedInstance&#39; object</span>
<span class=sd>        which should be added to &#39;CreateContext&#39;.</span>

<span class=sd>        Example:</span>
<span class=sd>        ```python</span>
<span class=sd>        def collect_instances(self):</span>
<span class=sd>            # Getting existing instances is different per host implementation</span>
<span class=sd>            for instance_data in pipeline.list_instances():</span>
<span class=sd>                # Process only instances that were created by this creator</span>
<span class=sd>                creator_id = instance_data.get(&quot;creator_identifier&quot;)</span>
<span class=sd>                if creator_id == self.identifier:</span>
<span class=sd>                    # Create instance object from existing data</span>
<span class=sd>                    instance = CreatedInstance.from_existing(</span>
<span class=sd>                        instance_data, self</span>
<span class=sd>                    )</span>
<span class=sd>                    # Add instance to create context</span>
<span class=sd>                    self._add_instance_to_context(instance)</span>
<span class=sd>        ```</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>pass</span>

    <span class=nd>@abstractmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>update_instances</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>update_list</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Store changes of existing instances so they can be recollected.</span>

<span class=sd>        Args:</span>
<span class=sd>            update_list (list[UpdateData]): Gets list of tuples. Each item</span>
<span class=sd>                contain changed instance and it&#39;s changes.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>pass</span>

    <span class=nd>@abstractmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>remove_instances</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instances</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Method called on instance removal.</span>

<span class=sd>        Can also remove instance metadata from context but should return</span>
<span class=sd>        &#39;True&#39; if did so.</span>

<span class=sd>        Args:</span>
<span class=sd>            instances (list[CreatedInstance]): Instance objects which should be</span>
<span class=sd>                removed.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>pass</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_icon</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Icon of creator (product type).</span>

<span class=sd>        Can return path to image file or awesome icon name.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>icon</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_dynamic_data</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>project_name</span><span class=p>,</span>
        <span class=n>folder_entity</span><span class=p>,</span>
        <span class=n>task_entity</span><span class=p>,</span>
        <span class=n>variant</span><span class=p>,</span>
        <span class=n>host_name</span><span class=p>,</span>
        <span class=n>instance</span>
    <span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Dynamic data for product name filling.</span>

<span class=sd>        These may be dynamically created based on current context of workfile.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=p>{}</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_product_name</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>project_name</span><span class=p>,</span>
        <span class=n>folder_entity</span><span class=p>,</span>
        <span class=n>task_entity</span><span class=p>,</span>
        <span class=n>variant</span><span class=p>,</span>
        <span class=n>host_name</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>instance</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>project_entity</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Return product name for passed context.</span>

<span class=sd>        Method is also called on product name update. In that case origin</span>
<span class=sd>        instance is passed in.</span>

<span class=sd>        Args:</span>
<span class=sd>            project_name (str): Project name.</span>
<span class=sd>            folder_entity (dict): Folder entity.</span>
<span class=sd>            task_entity (dict): Task entity.</span>
<span class=sd>            variant (str): Product name variant. In most of cases user input.</span>
<span class=sd>            host_name (Optional[str]): Which host creates product. Defaults</span>
<span class=sd>                to host name on create context.</span>
<span class=sd>            instance (Optional[CreatedInstance]): Object of &#39;CreatedInstance&#39;</span>
<span class=sd>                for which is product name updated. Passed only on product name</span>
<span class=sd>                update.</span>
<span class=sd>            project_entity (Optional[dict[str, Any]]): Project entity.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=n>host_name</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>host_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span><span class=o>.</span><span class=n>host_name</span>

        <span class=n>task_name</span> <span class=o>=</span> <span class=n>task_type</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=k>if</span> <span class=n>task_entity</span><span class=p>:</span>
            <span class=n>task_name</span> <span class=o>=</span> <span class=n>task_entity</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span>
            <span class=n>task_type</span> <span class=o>=</span> <span class=n>task_entity</span><span class=p>[</span><span class=s2>&quot;taskType&quot;</span><span class=p>]</span>

        <span class=n>dynamic_data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_dynamic_data</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span>
            <span class=n>folder_entity</span><span class=p>,</span>
            <span class=n>task_entity</span><span class=p>,</span>
            <span class=n>variant</span><span class=p>,</span>
            <span class=n>host_name</span><span class=p>,</span>
            <span class=n>instance</span>
        <span class=p>)</span>

        <span class=n>cur_project_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span><span class=o>.</span><span class=n>get_current_project_name</span><span class=p>()</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>project_entity</span> <span class=ow>and</span> <span class=n>project_name</span> <span class=o>==</span> <span class=n>cur_project_name</span><span class=p>:</span>
            <span class=n>project_entity</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span><span class=o>.</span><span class=n>get_current_project_entity</span><span class=p>()</span>

        <span class=k>return</span> <span class=n>get_product_name</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span>
            <span class=n>task_name</span><span class=p>,</span>
            <span class=n>task_type</span><span class=p>,</span>
            <span class=n>host_name</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>product_type</span><span class=p>,</span>
            <span class=n>variant</span><span class=p>,</span>
            <span class=n>dynamic_data</span><span class=o>=</span><span class=n>dynamic_data</span><span class=p>,</span>
            <span class=n>project_settings</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>project_settings</span><span class=p>,</span>
            <span class=n>project_entity</span><span class=o>=</span><span class=n>project_entity</span><span class=p>,</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_instance_attr_defs</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Plugin attribute definitions.</span>

<span class=sd>        Attribute definitions of plugin that hold data about created instance</span>
<span class=sd>        and values are stored to metadata for future usage and for publishing</span>
<span class=sd>        purposes.</span>

<span class=sd>        NOTE:</span>
<span class=sd>        Convert method should be implemented which should care about updating</span>
<span class=sd>        keys/values when plugin attributes change.</span>

<span class=sd>        Returns:</span>
<span class=sd>            list[AbstractAttrDef]: Attribute definitions that can be tweaked</span>
<span class=sd>                for created instance.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>instance_attr_defs</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_attr_defs_for_instance</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instance</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get attribute definitions for an instance.</span>

<span class=sd>        Args:</span>
<span class=sd>            instance (CreatedInstance): Instance for which to get</span>
<span class=sd>                attribute definitions.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_instance_attr_defs</span><span class=p>()</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>collection_shared_data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Access to shared data that can be used during creator&#39;s collection.</span>

<span class=sd>        Returns:</span>
<span class=sd>            dict[str, Any]: Shared data.</span>

<span class=sd>        Raises:</span>
<span class=sd>            UnavailableSharedData: When called out of collection phase.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span><span class=o>.</span><span class=n>collection_shared_data</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_instance_thumbnail_path</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instance_id</span><span class=p>,</span> <span class=n>thumbnail_path</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Set path to thumbnail for instance.&quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span><span class=o>.</span><span class=n>thumbnail_paths_by_instance_id</span><span class=p>[</span><span class=n>instance_id</span><span class=p>]</span> <span class=o>=</span> <span class=p>(</span>
            <span class=n>thumbnail_path</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_next_versions_for_instances</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instances</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Prepare next versions for instances.</span>

<span class=sd>        This is helper method to receive next possible versions for instances.</span>
<span class=sd>        It is using context information on instance to receive them,</span>
<span class=sd>        &#39;folderPath&#39; and &#39;product&#39;.</span>

<span class=sd>        Output will contain version by each instance id.</span>

<span class=sd>        Args:</span>
<span class=sd>            instances (list[CreatedInstance]): Instances for which to get next</span>
<span class=sd>                versions.</span>

<span class=sd>        Returns:</span>
<span class=sd>            dict[str, int]: Next versions by instance id.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=n>get_next_versions_for_instances</span><span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span><span class=o>.</span><span class=n>project_name</span><span class=p>,</span> <span class=n>instances</span>
        <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.BaseCreator.collection_shared_data class="doc doc-heading"> <code class="highlight language-python"><span class=n>collection_shared_data</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Access to shared data that can be used during creator's collection.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>dict[str, Any]: Shared data.</p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="UnavailableSharedData (client.ayon_core.pipeline.create.exceptions.UnavailableSharedData)" href=create/exceptions.html#client.ayon_core.pipeline.create.exceptions.UnavailableSharedData>UnavailableSharedData</a></code> </td> <td> <div class=doc-md-description> <p>When called out of collection phase.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.BaseCreator.identifier class="doc doc-heading"> <code class="highlight language-python"><span class=n>identifier</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Identifier of creator (must be unique).</p> <p>Default implementation returns plugin's product type.</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.BaseCreator.log class="doc doc-heading"> <code class="highlight language-python"><span class=n>log</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Logger of the plugin.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>logging.Logger: Logger with name of the plugin.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.BaseCreator.product_type class="doc doc-heading"> <code class="highlight language-python"><span class=n>product_type</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Family that plugin represents.</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.BaseCreator.project_anatomy class="doc doc-heading"> <code class="highlight language-python"><span class=n>project_anatomy</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Current project anatomy.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>Anatomy</code></td> <td> </td> <td> <div class=doc-md-description> <p>Project anatomy object.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.BaseCreator.project_name class="doc doc-heading"> <code class="highlight language-python"><span class=n>project_name</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Current project name.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>Name of a project.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.BaseCreator.apply_settings class="doc doc-heading"> <code class="highlight language-python"><span class=n>apply_settings</span><span class=p>(</span><span class=n>project_settings</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Method called on initialization of plugin to apply settings.</p> <p>Default implementation tries to auto-apply settings values if are in expected hierarchy.</p> <details class=data-hierarchy-to-auto-apply-settings open> <summary>Data hierarchy to auto-apply settings</summary> <p>├─ {self.settings_category} - Root key in settings │ └─ "create" - Hardcoded key │ └─ {self.settings_name} | {class name} - Name of plugin │ ├─ ... attribute values... - Attribute/value pair</p> </details> <p>It is mandatory to define 'settings_category' attribute. Attribute 'settings_name' is optional and class name is used if is not defined.</p> <details class=example-data open> <summary>Example data</summary> <p>ProjectSettings { "maya": { # self.settings_category "create": { # Hardcoded key "CreateAnimation": { # self.settings_name / class name "enabled": True, # --- Attributes to set --- "optional": True,# "active": True, # "fps": 25, # ------------------------- }, ... }, ... }, ... }</p> </details> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>project_settings</code> </td> <td> <code><span title=dict>dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Project settings.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span>
<span class=normal>277</span>
<span class=normal>278</span>
<span class=normal>279</span>
<span class=normal>280</span>
<span class=normal>281</span>
<span class=normal>282</span>
<span class=normal>283</span>
<span class=normal>284</span>
<span class=normal>285</span>
<span class=normal>286</span>
<span class=normal>287</span>
<span class=normal>288</span>
<span class=normal>289</span>
<span class=normal>290</span>
<span class=normal>291</span>
<span class=normal>292</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>apply_settings</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>project_settings</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Method called on initialization of plugin to apply settings.</span>

<span class=sd>    Default implementation tries to auto-apply settings values if are</span>
<span class=sd>        in expected hierarchy.</span>

<span class=sd>    Data hierarchy to auto-apply settings:</span>
<span class=sd>        ├─ {self.settings_category}                 - Root key in settings</span>
<span class=sd>        │ └─ &quot;create&quot;                               - Hardcoded key</span>
<span class=sd>        │   └─ {self.settings_name} | {class name}  - Name of plugin</span>
<span class=sd>        │     ├─ ... attribute values...            - Attribute/value pair</span>

<span class=sd>    It is mandatory to define &#39;settings_category&#39; attribute. Attribute</span>
<span class=sd>    &#39;settings_name&#39; is optional and class name is used if is not defined.</span>

<span class=sd>    Example data:</span>
<span class=sd>        ProjectSettings {</span>
<span class=sd>            &quot;maya&quot;: {                    # self.settings_category</span>
<span class=sd>                &quot;create&quot;: {              # Hardcoded key</span>
<span class=sd>                    &quot;CreateAnimation&quot;: { # self.settings_name / class name</span>
<span class=sd>                        &quot;enabled&quot;: True, # --- Attributes to set ---</span>
<span class=sd>                        &quot;optional&quot;: True,#</span>
<span class=sd>                        &quot;active&quot;: True,  #</span>
<span class=sd>                        &quot;fps&quot;: 25,       # -------------------------</span>
<span class=sd>                    },</span>
<span class=sd>                    ...</span>
<span class=sd>                },</span>
<span class=sd>                ...</span>
<span class=sd>            },</span>
<span class=sd>            ...</span>
<span class=sd>        }</span>

<span class=sd>    Args:</span>
<span class=sd>        project_settings (dict[str, Any]): Project settings.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>settings_category</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>settings_category</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>settings_category</span><span class=p>:</span>
        <span class=k>return</span>

    <span class=n>cls_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span>
    <span class=n>settings_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>settings_name</span> <span class=ow>or</span> <span class=n>cls_name</span>

    <span class=n>settings</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_settings_values</span><span class=p>(</span>
        <span class=n>project_settings</span><span class=p>,</span> <span class=n>settings_category</span><span class=p>,</span> <span class=n>settings_name</span>
    <span class=p>)</span>
    <span class=k>if</span> <span class=n>settings</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;No settings found for </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>cls_name</span><span class=p>))</span>
        <span class=k>return</span>

    <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>settings</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
        <span class=c1># Log out attributes that are not defined on plugin object</span>
        <span class=c1># - those may be potential dangerous typos in settings</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=nb>hasattr</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>((</span>
                <span class=s2>&quot;Applying settings to unknown attribute &#39;</span><span class=si>{}</span><span class=s2>&#39; on &#39;</span><span class=si>{}</span><span class=s2>&#39;.&quot;</span>
            <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                <span class=n>key</span><span class=p>,</span> <span class=n>cls_name</span>
            <span class=p>))</span>
        <span class=nb>setattr</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.BaseCreator.collect_instances class="doc doc-heading"> <code class="highlight language-python"><span class=n>collect_instances</span><span class=p>()</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Collect existing instances related to this creator plugin.</p> <p>The implementation differs on host abilities. The creator has to collect metadata about instance and create 'CreatedInstance' object which should be added to 'CreateContext'.</p> <p>Example:</p> <pre><code class=language-python>def collect_instances(self):
    # Getting existing instances is different per host implementation
    for instance_data in pipeline.list_instances():
        # Process only instances that were created by this creator
        creator_id = instance_data.get(&quot;creator_identifier&quot;)
        if creator_id == self.identifier:
            # Create instance object from existing data
            instance = CreatedInstance.from_existing(
                instance_data, self
            )
            # Add instance to create context
            self._add_instance_to_context(instance)
</code></pre> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>442</span>
<span class=normal>443</span>
<span class=normal>444</span>
<span class=normal>445</span>
<span class=normal>446</span>
<span class=normal>447</span>
<span class=normal>448</span>
<span class=normal>449</span>
<span class=normal>450</span>
<span class=normal>451</span>
<span class=normal>452</span>
<span class=normal>453</span>
<span class=normal>454</span>
<span class=normal>455</span>
<span class=normal>456</span>
<span class=normal>457</span>
<span class=normal>458</span>
<span class=normal>459</span>
<span class=normal>460</span>
<span class=normal>461</span>
<span class=normal>462</span>
<span class=normal>463</span>
<span class=normal>464</span>
<span class=normal>465</span>
<span class=normal>466</span>
<span class=normal>467</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@abstractmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>collect_instances</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Collect existing instances related to this creator plugin.</span>

<span class=sd>    The implementation differs on host abilities. The creator has to</span>
<span class=sd>    collect metadata about instance and create &#39;CreatedInstance&#39; object</span>
<span class=sd>    which should be added to &#39;CreateContext&#39;.</span>

<span class=sd>    Example:</span>
<span class=sd>    ```python</span>
<span class=sd>    def collect_instances(self):</span>
<span class=sd>        # Getting existing instances is different per host implementation</span>
<span class=sd>        for instance_data in pipeline.list_instances():</span>
<span class=sd>            # Process only instances that were created by this creator</span>
<span class=sd>            creator_id = instance_data.get(&quot;creator_identifier&quot;)</span>
<span class=sd>            if creator_id == self.identifier:</span>
<span class=sd>                # Create instance object from existing data</span>
<span class=sd>                instance = CreatedInstance.from_existing(</span>
<span class=sd>                    instance_data, self</span>
<span class=sd>                )</span>
<span class=sd>                # Add instance to create context</span>
<span class=sd>                self._add_instance_to_context(instance)</span>
<span class=sd>    ```</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.BaseCreator.create class="doc doc-heading"> <code class="highlight language-python"><span class=n>create</span><span class=p>()</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Create new instance.</p> <p>Replacement of <code>process</code> method from avalon implementation. - must expect all data that were passed to init in previous implementation</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>431</span>
<span class=normal>432</span>
<span class=normal>433</span>
<span class=normal>434</span>
<span class=normal>435</span>
<span class=normal>436</span>
<span class=normal>437</span>
<span class=normal>438</span>
<span class=normal>439</span>
<span class=normal>440</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@abstractmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>create</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Create new instance.</span>

<span class=sd>    Replacement of `process` method from avalon implementation.</span>
<span class=sd>    - must expect all data that were passed to init in previous</span>
<span class=sd>        implementation</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.BaseCreator.get_attr_defs_for_instance class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_attr_defs_for_instance</span><span class=p>(</span><span class=n>instance</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Get attribute definitions for an instance.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>instance</code> </td> <td> <code><a class="autorefs autorefs-internal" title="CreatedInstance (client.ayon_core.pipeline.create.structures.CreatedInstance)" href=create/structures.html#client.ayon_core.pipeline.create.structures.CreatedInstance>CreatedInstance</a></code> </td> <td> <div class=doc-md-description> <p>Instance for which to get attribute definitions.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>597</span>
<span class=normal>598</span>
<span class=normal>599</span>
<span class=normal>600</span>
<span class=normal>601</span>
<span class=normal>602</span>
<span class=normal>603</span>
<span class=normal>604</span>
<span class=normal>605</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_attr_defs_for_instance</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instance</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get attribute definitions for an instance.</span>

<span class=sd>    Args:</span>
<span class=sd>        instance (CreatedInstance): Instance for which to get</span>
<span class=sd>            attribute definitions.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_instance_attr_defs</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.BaseCreator.get_dynamic_data class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_dynamic_data</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=n>folder_entity</span><span class=p>,</span> <span class=n>task_entity</span><span class=p>,</span> <span class=n>variant</span><span class=p>,</span> <span class=n>host_name</span><span class=p>,</span> <span class=n>instance</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Dynamic data for product name filling.</p> <p>These may be dynamically created based on current context of workfile.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>502</span>
<span class=normal>503</span>
<span class=normal>504</span>
<span class=normal>505</span>
<span class=normal>506</span>
<span class=normal>507</span>
<span class=normal>508</span>
<span class=normal>509</span>
<span class=normal>510</span>
<span class=normal>511</span>
<span class=normal>512</span>
<span class=normal>513</span>
<span class=normal>514</span>
<span class=normal>515</span>
<span class=normal>516</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_dynamic_data</span><span class=p>(</span>
    <span class=bp>self</span><span class=p>,</span>
    <span class=n>project_name</span><span class=p>,</span>
    <span class=n>folder_entity</span><span class=p>,</span>
    <span class=n>task_entity</span><span class=p>,</span>
    <span class=n>variant</span><span class=p>,</span>
    <span class=n>host_name</span><span class=p>,</span>
    <span class=n>instance</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Dynamic data for product name filling.</span>

<span class=sd>    These may be dynamically created based on current context of workfile.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=p>{}</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.BaseCreator.get_group_label class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_group_label</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Group label under which are instances grouped in UI.</p> <details class=default-implementation-use-attributes-in-this-order open> <summary>Default implementation use attributes in this order</summary> <ul> <li>'group_label' -&gt; 'label' -&gt; 'identifier' Keep in mind that 'identifier' use 'product_type' by default.</li> </ul> </details> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>Group label that can be used for grouping of instances in UI. Group label can be overridden by instance itself.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>342</span>
<span class=normal>343</span>
<span class=normal>344</span>
<span class=normal>345</span>
<span class=normal>346</span>
<span class=normal>347</span>
<span class=normal>348</span>
<span class=normal>349</span>
<span class=normal>350</span>
<span class=normal>351</span>
<span class=normal>352</span>
<span class=normal>353</span>
<span class=normal>354</span>
<span class=normal>355</span>
<span class=normal>356</span>
<span class=normal>357</span>
<span class=normal>358</span>
<span class=normal>359</span>
<span class=normal>360</span>
<span class=normal>361</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_group_label</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Group label under which are instances grouped in UI.</span>

<span class=sd>    Default implementation use attributes in this order:</span>
<span class=sd>        - &#39;group_label&#39; -&gt; &#39;label&#39; -&gt; &#39;identifier&#39;</span>
<span class=sd>            Keep in mind that &#39;identifier&#39; use &#39;product_type&#39; by default.</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: Group label that can be used for grouping of instances in UI.</span>
<span class=sd>            Group label can be overridden by instance itself.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_cached_group_label</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>label</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>identifier</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>group_label</span><span class=p>:</span>
            <span class=n>label</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>group_label</span>
        <span class=k>elif</span> <span class=bp>self</span><span class=o>.</span><span class=n>label</span><span class=p>:</span>
            <span class=n>label</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>label</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_cached_group_label</span> <span class=o>=</span> <span class=n>label</span>
    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_cached_group_label</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.BaseCreator.get_icon class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_icon</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Icon of creator (product type).</p> <p>Can return path to image file or awesome icon name.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>494</span>
<span class=normal>495</span>
<span class=normal>496</span>
<span class=normal>497</span>
<span class=normal>498</span>
<span class=normal>499</span>
<span class=normal>500</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_icon</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Icon of creator (product type).</span>

<span class=sd>    Can return path to image file or awesome icon name.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>icon</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.BaseCreator.get_instance_attr_defs class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_instance_attr_defs</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Plugin attribute definitions.</p> <p>Attribute definitions of plugin that hold data about created instance and values are stored to metadata for future usage and for publishing purposes.</p> <p>NOTE: Convert method should be implemented which should care about updating keys/values when plugin attributes change.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>list[AbstractAttrDef]: Attribute definitions that can be tweaked for created instance.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>579</span>
<span class=normal>580</span>
<span class=normal>581</span>
<span class=normal>582</span>
<span class=normal>583</span>
<span class=normal>584</span>
<span class=normal>585</span>
<span class=normal>586</span>
<span class=normal>587</span>
<span class=normal>588</span>
<span class=normal>589</span>
<span class=normal>590</span>
<span class=normal>591</span>
<span class=normal>592</span>
<span class=normal>593</span>
<span class=normal>594</span>
<span class=normal>595</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_instance_attr_defs</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Plugin attribute definitions.</span>

<span class=sd>    Attribute definitions of plugin that hold data about created instance</span>
<span class=sd>    and values are stored to metadata for future usage and for publishing</span>
<span class=sd>    purposes.</span>

<span class=sd>    NOTE:</span>
<span class=sd>    Convert method should be implemented which should care about updating</span>
<span class=sd>    keys/values when plugin attributes change.</span>

<span class=sd>    Returns:</span>
<span class=sd>        list[AbstractAttrDef]: Attribute definitions that can be tweaked</span>
<span class=sd>            for created instance.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>instance_attr_defs</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.BaseCreator.get_next_versions_for_instances class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_next_versions_for_instances</span><span class=p>(</span><span class=n>instances</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Prepare next versions for instances.</p> <p>This is helper method to receive next possible versions for instances. It is using context information on instance to receive them, 'folderPath' and 'product'.</p> <p>Output will contain version by each instance id.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>instances</code> </td> <td> <code><span title=list>list</span>[<a class="autorefs autorefs-internal" title="CreatedInstance (client.ayon_core.pipeline.create.structures.CreatedInstance)" href=create/structures.html#client.ayon_core.pipeline.create.structures.CreatedInstance>CreatedInstance</a>]</code> </td> <td> <div class=doc-md-description> <p>Instances for which to get next versions.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>dict[str, int]: Next versions by instance id.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>627</span>
<span class=normal>628</span>
<span class=normal>629</span>
<span class=normal>630</span>
<span class=normal>631</span>
<span class=normal>632</span>
<span class=normal>633</span>
<span class=normal>634</span>
<span class=normal>635</span>
<span class=normal>636</span>
<span class=normal>637</span>
<span class=normal>638</span>
<span class=normal>639</span>
<span class=normal>640</span>
<span class=normal>641</span>
<span class=normal>642</span>
<span class=normal>643</span>
<span class=normal>644</span>
<span class=normal>645</span>
<span class=normal>646</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_next_versions_for_instances</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instances</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Prepare next versions for instances.</span>

<span class=sd>    This is helper method to receive next possible versions for instances.</span>
<span class=sd>    It is using context information on instance to receive them,</span>
<span class=sd>    &#39;folderPath&#39; and &#39;product&#39;.</span>

<span class=sd>    Output will contain version by each instance id.</span>

<span class=sd>    Args:</span>
<span class=sd>        instances (list[CreatedInstance]): Instances for which to get next</span>
<span class=sd>            versions.</span>

<span class=sd>    Returns:</span>
<span class=sd>        dict[str, int]: Next versions by instance id.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=n>get_next_versions_for_instances</span><span class=p>(</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span><span class=o>.</span><span class=n>project_name</span><span class=p>,</span> <span class=n>instances</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.BaseCreator.get_product_name class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_product_name</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=n>folder_entity</span><span class=p>,</span> <span class=n>task_entity</span><span class=p>,</span> <span class=n>variant</span><span class=p>,</span> <span class=n>host_name</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>instance</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>project_entity</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Return product name for passed context.</p> <p>Method is also called on product name update. In that case origin instance is passed in.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>project_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Project name.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>folder_entity</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>Folder entity.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>task_entity</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>Task entity.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>variant</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Product name variant. In most of cases user input.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>host_name</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Which host creates product. Defaults to host name on create context.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>instance</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<a class="autorefs autorefs-internal" title="CreatedInstance (client.ayon_core.pipeline.create.structures.CreatedInstance)" href=create/structures.html#client.ayon_core.pipeline.create.structures.CreatedInstance>CreatedInstance</a>]</code> </td> <td> <div class=doc-md-description> <p>Object of 'CreatedInstance' for which is product name updated. Passed only on product name update.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>project_entity</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=dict>dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]]</code> </td> <td> <div class=doc-md-description> <p>Project entity.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>518</span>
<span class=normal>519</span>
<span class=normal>520</span>
<span class=normal>521</span>
<span class=normal>522</span>
<span class=normal>523</span>
<span class=normal>524</span>
<span class=normal>525</span>
<span class=normal>526</span>
<span class=normal>527</span>
<span class=normal>528</span>
<span class=normal>529</span>
<span class=normal>530</span>
<span class=normal>531</span>
<span class=normal>532</span>
<span class=normal>533</span>
<span class=normal>534</span>
<span class=normal>535</span>
<span class=normal>536</span>
<span class=normal>537</span>
<span class=normal>538</span>
<span class=normal>539</span>
<span class=normal>540</span>
<span class=normal>541</span>
<span class=normal>542</span>
<span class=normal>543</span>
<span class=normal>544</span>
<span class=normal>545</span>
<span class=normal>546</span>
<span class=normal>547</span>
<span class=normal>548</span>
<span class=normal>549</span>
<span class=normal>550</span>
<span class=normal>551</span>
<span class=normal>552</span>
<span class=normal>553</span>
<span class=normal>554</span>
<span class=normal>555</span>
<span class=normal>556</span>
<span class=normal>557</span>
<span class=normal>558</span>
<span class=normal>559</span>
<span class=normal>560</span>
<span class=normal>561</span>
<span class=normal>562</span>
<span class=normal>563</span>
<span class=normal>564</span>
<span class=normal>565</span>
<span class=normal>566</span>
<span class=normal>567</span>
<span class=normal>568</span>
<span class=normal>569</span>
<span class=normal>570</span>
<span class=normal>571</span>
<span class=normal>572</span>
<span class=normal>573</span>
<span class=normal>574</span>
<span class=normal>575</span>
<span class=normal>576</span>
<span class=normal>577</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_product_name</span><span class=p>(</span>
    <span class=bp>self</span><span class=p>,</span>
    <span class=n>project_name</span><span class=p>,</span>
    <span class=n>folder_entity</span><span class=p>,</span>
    <span class=n>task_entity</span><span class=p>,</span>
    <span class=n>variant</span><span class=p>,</span>
    <span class=n>host_name</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>instance</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>project_entity</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Return product name for passed context.</span>

<span class=sd>    Method is also called on product name update. In that case origin</span>
<span class=sd>    instance is passed in.</span>

<span class=sd>    Args:</span>
<span class=sd>        project_name (str): Project name.</span>
<span class=sd>        folder_entity (dict): Folder entity.</span>
<span class=sd>        task_entity (dict): Task entity.</span>
<span class=sd>        variant (str): Product name variant. In most of cases user input.</span>
<span class=sd>        host_name (Optional[str]): Which host creates product. Defaults</span>
<span class=sd>            to host name on create context.</span>
<span class=sd>        instance (Optional[CreatedInstance]): Object of &#39;CreatedInstance&#39;</span>
<span class=sd>            for which is product name updated. Passed only on product name</span>
<span class=sd>            update.</span>
<span class=sd>        project_entity (Optional[dict[str, Any]]): Project entity.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=n>host_name</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>host_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span><span class=o>.</span><span class=n>host_name</span>

    <span class=n>task_name</span> <span class=o>=</span> <span class=n>task_type</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=k>if</span> <span class=n>task_entity</span><span class=p>:</span>
        <span class=n>task_name</span> <span class=o>=</span> <span class=n>task_entity</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span>
        <span class=n>task_type</span> <span class=o>=</span> <span class=n>task_entity</span><span class=p>[</span><span class=s2>&quot;taskType&quot;</span><span class=p>]</span>

    <span class=n>dynamic_data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_dynamic_data</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span>
        <span class=n>folder_entity</span><span class=p>,</span>
        <span class=n>task_entity</span><span class=p>,</span>
        <span class=n>variant</span><span class=p>,</span>
        <span class=n>host_name</span><span class=p>,</span>
        <span class=n>instance</span>
    <span class=p>)</span>

    <span class=n>cur_project_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span><span class=o>.</span><span class=n>get_current_project_name</span><span class=p>()</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>project_entity</span> <span class=ow>and</span> <span class=n>project_name</span> <span class=o>==</span> <span class=n>cur_project_name</span><span class=p>:</span>
        <span class=n>project_entity</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span><span class=o>.</span><span class=n>get_current_project_entity</span><span class=p>()</span>

    <span class=k>return</span> <span class=n>get_product_name</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span>
        <span class=n>task_name</span><span class=p>,</span>
        <span class=n>task_type</span><span class=p>,</span>
        <span class=n>host_name</span><span class=p>,</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>product_type</span><span class=p>,</span>
        <span class=n>variant</span><span class=p>,</span>
        <span class=n>dynamic_data</span><span class=o>=</span><span class=n>dynamic_data</span><span class=p>,</span>
        <span class=n>project_settings</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>project_settings</span><span class=p>,</span>
        <span class=n>project_entity</span><span class=o>=</span><span class=n>project_entity</span><span class=p>,</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.BaseCreator.register_callbacks class="doc doc-heading"> <code class="highlight language-python"><span class=n>register_callbacks</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Register callbacks for creator.</p> <p>Default implementation does nothing. It can be overridden to register callbacks for creator.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>294</span>
<span class=normal>295</span>
<span class=normal>296</span>
<span class=normal>297</span>
<span class=normal>298</span>
<span class=normal>299</span>
<span class=normal>300</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>register_callbacks</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Register callbacks for creator.</span>

<span class=sd>    Default implementation does nothing. It can be overridden to register</span>
<span class=sd>    callbacks for creator.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.BaseCreator.remove_instances class="doc doc-heading"> <code class="highlight language-python"><span class=n>remove_instances</span><span class=p>(</span><span class=n>instances</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Method called on instance removal.</p> <p>Can also remove instance metadata from context but should return 'True' if did so.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>instances</code> </td> <td> <code><span title=list>list</span>[<a class="autorefs autorefs-internal" title="CreatedInstance (client.ayon_core.pipeline.create.structures.CreatedInstance)" href=create/structures.html#client.ayon_core.pipeline.create.structures.CreatedInstance>CreatedInstance</a>]</code> </td> <td> <div class=doc-md-description> <p>Instance objects which should be removed.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>480</span>
<span class=normal>481</span>
<span class=normal>482</span>
<span class=normal>483</span>
<span class=normal>484</span>
<span class=normal>485</span>
<span class=normal>486</span>
<span class=normal>487</span>
<span class=normal>488</span>
<span class=normal>489</span>
<span class=normal>490</span>
<span class=normal>491</span>
<span class=normal>492</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@abstractmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>remove_instances</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instances</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Method called on instance removal.</span>

<span class=sd>    Can also remove instance metadata from context but should return</span>
<span class=sd>    &#39;True&#39; if did so.</span>

<span class=sd>    Args:</span>
<span class=sd>        instances (list[CreatedInstance]): Instance objects which should be</span>
<span class=sd>            removed.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.BaseCreator.set_instance_thumbnail_path class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_instance_thumbnail_path</span><span class=p>(</span><span class=n>instance_id</span><span class=p>,</span> <span class=n>thumbnail_path</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Set path to thumbnail for instance.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>620</span>
<span class=normal>621</span>
<span class=normal>622</span>
<span class=normal>623</span>
<span class=normal>624</span>
<span class=normal>625</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_instance_thumbnail_path</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instance_id</span><span class=p>,</span> <span class=n>thumbnail_path</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Set path to thumbnail for instance.&quot;&quot;&quot;</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span><span class=o>.</span><span class=n>thumbnail_paths_by_instance_id</span><span class=p>[</span><span class=n>instance_id</span><span class=p>]</span> <span class=o>=</span> <span class=p>(</span>
        <span class=n>thumbnail_path</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.BaseCreator.update_instances class="doc doc-heading"> <code class="highlight language-python"><span class=n>update_instances</span><span class=p>(</span><span class=n>update_list</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Store changes of existing instances so they can be recollected.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>update_list</code> </td> <td> <code><span title=list>list</span>[<span title=client.ayon_core.pipeline.create.context.UpdateData>UpdateData</span>]</code> </td> <td> <div class=doc-md-description> <p>Gets list of tuples. Each item contain changed instance and it's changes.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>469</span>
<span class=normal>470</span>
<span class=normal>471</span>
<span class=normal>472</span>
<span class=normal>473</span>
<span class=normal>474</span>
<span class=normal>475</span>
<span class=normal>476</span>
<span class=normal>477</span>
<span class=normal>478</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@abstractmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>update_instances</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>update_list</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Store changes of existing instances so they can be recollected.</span>

<span class=sd>    Args:</span>
<span class=sd>        update_list (list[UpdateData]): Gets list of tuples. Each item</span>
<span class=sd>            contain changed instance and it&#39;s changes.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.CreatedInstance class="doc doc-heading"> <code>CreatedInstance</code> </h2> <div class="doc doc-contents "> <p>Instance entity with data that will be stored to workfile.</p> <p>I think <code>data</code> must be required argument containing all minimum information about instance like "folderPath" and "task" and all data used for filling product name as creators may have custom data for product name filling.</p> <details class=notes open> <summary>Notes</summary> <p>Object have 2 possible initialization. One using 'creator' object which is recommended for api usage. Second by passing information about creator.</p> </details> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>product_type</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Product type that will be created.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>product_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Name of product that will be created.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>data</code> </td> <td> <code><span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Data used for filling product name or override data from already existing instance.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>creator</code> </td> <td> <code><a class="autorefs autorefs-internal" title="BaseCreator (client.ayon_core.pipeline.create.creator_plugins.BaseCreator)" href=create/creator_plugins.html#client.ayon_core.pipeline.create.creator_plugins.BaseCreator>BaseCreator</a></code> </td> <td> <div class=doc-md-description> <p>Creator responsible for instance.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 464</span>
<span class=normal> 465</span>
<span class=normal> 466</span>
<span class=normal> 467</span>
<span class=normal> 468</span>
<span class=normal> 469</span>
<span class=normal> 470</span>
<span class=normal> 471</span>
<span class=normal> 472</span>
<span class=normal> 473</span>
<span class=normal> 474</span>
<span class=normal> 475</span>
<span class=normal> 476</span>
<span class=normal> 477</span>
<span class=normal> 478</span>
<span class=normal> 479</span>
<span class=normal> 480</span>
<span class=normal> 481</span>
<span class=normal> 482</span>
<span class=normal> 483</span>
<span class=normal> 484</span>
<span class=normal> 485</span>
<span class=normal> 486</span>
<span class=normal> 487</span>
<span class=normal> 488</span>
<span class=normal> 489</span>
<span class=normal> 490</span>
<span class=normal> 491</span>
<span class=normal> 492</span>
<span class=normal> 493</span>
<span class=normal> 494</span>
<span class=normal> 495</span>
<span class=normal> 496</span>
<span class=normal> 497</span>
<span class=normal> 498</span>
<span class=normal> 499</span>
<span class=normal> 500</span>
<span class=normal> 501</span>
<span class=normal> 502</span>
<span class=normal> 503</span>
<span class=normal> 504</span>
<span class=normal> 505</span>
<span class=normal> 506</span>
<span class=normal> 507</span>
<span class=normal> 508</span>
<span class=normal> 509</span>
<span class=normal> 510</span>
<span class=normal> 511</span>
<span class=normal> 512</span>
<span class=normal> 513</span>
<span class=normal> 514</span>
<span class=normal> 515</span>
<span class=normal> 516</span>
<span class=normal> 517</span>
<span class=normal> 518</span>
<span class=normal> 519</span>
<span class=normal> 520</span>
<span class=normal> 521</span>
<span class=normal> 522</span>
<span class=normal> 523</span>
<span class=normal> 524</span>
<span class=normal> 525</span>
<span class=normal> 526</span>
<span class=normal> 527</span>
<span class=normal> 528</span>
<span class=normal> 529</span>
<span class=normal> 530</span>
<span class=normal> 531</span>
<span class=normal> 532</span>
<span class=normal> 533</span>
<span class=normal> 534</span>
<span class=normal> 535</span>
<span class=normal> 536</span>
<span class=normal> 537</span>
<span class=normal> 538</span>
<span class=normal> 539</span>
<span class=normal> 540</span>
<span class=normal> 541</span>
<span class=normal> 542</span>
<span class=normal> 543</span>
<span class=normal> 544</span>
<span class=normal> 545</span>
<span class=normal> 546</span>
<span class=normal> 547</span>
<span class=normal> 548</span>
<span class=normal> 549</span>
<span class=normal> 550</span>
<span class=normal> 551</span>
<span class=normal> 552</span>
<span class=normal> 553</span>
<span class=normal> 554</span>
<span class=normal> 555</span>
<span class=normal> 556</span>
<span class=normal> 557</span>
<span class=normal> 558</span>
<span class=normal> 559</span>
<span class=normal> 560</span>
<span class=normal> 561</span>
<span class=normal> 562</span>
<span class=normal> 563</span>
<span class=normal> 564</span>
<span class=normal> 565</span>
<span class=normal> 566</span>
<span class=normal> 567</span>
<span class=normal> 568</span>
<span class=normal> 569</span>
<span class=normal> 570</span>
<span class=normal> 571</span>
<span class=normal> 572</span>
<span class=normal> 573</span>
<span class=normal> 574</span>
<span class=normal> 575</span>
<span class=normal> 576</span>
<span class=normal> 577</span>
<span class=normal> 578</span>
<span class=normal> 579</span>
<span class=normal> 580</span>
<span class=normal> 581</span>
<span class=normal> 582</span>
<span class=normal> 583</span>
<span class=normal> 584</span>
<span class=normal> 585</span>
<span class=normal> 586</span>
<span class=normal> 587</span>
<span class=normal> 588</span>
<span class=normal> 589</span>
<span class=normal> 590</span>
<span class=normal> 591</span>
<span class=normal> 592</span>
<span class=normal> 593</span>
<span class=normal> 594</span>
<span class=normal> 595</span>
<span class=normal> 596</span>
<span class=normal> 597</span>
<span class=normal> 598</span>
<span class=normal> 599</span>
<span class=normal> 600</span>
<span class=normal> 601</span>
<span class=normal> 602</span>
<span class=normal> 603</span>
<span class=normal> 604</span>
<span class=normal> 605</span>
<span class=normal> 606</span>
<span class=normal> 607</span>
<span class=normal> 608</span>
<span class=normal> 609</span>
<span class=normal> 610</span>
<span class=normal> 611</span>
<span class=normal> 612</span>
<span class=normal> 613</span>
<span class=normal> 614</span>
<span class=normal> 615</span>
<span class=normal> 616</span>
<span class=normal> 617</span>
<span class=normal> 618</span>
<span class=normal> 619</span>
<span class=normal> 620</span>
<span class=normal> 621</span>
<span class=normal> 622</span>
<span class=normal> 623</span>
<span class=normal> 624</span>
<span class=normal> 625</span>
<span class=normal> 626</span>
<span class=normal> 627</span>
<span class=normal> 628</span>
<span class=normal> 629</span>
<span class=normal> 630</span>
<span class=normal> 631</span>
<span class=normal> 632</span>
<span class=normal> 633</span>
<span class=normal> 634</span>
<span class=normal> 635</span>
<span class=normal> 636</span>
<span class=normal> 637</span>
<span class=normal> 638</span>
<span class=normal> 639</span>
<span class=normal> 640</span>
<span class=normal> 641</span>
<span class=normal> 642</span>
<span class=normal> 643</span>
<span class=normal> 644</span>
<span class=normal> 645</span>
<span class=normal> 646</span>
<span class=normal> 647</span>
<span class=normal> 648</span>
<span class=normal> 649</span>
<span class=normal> 650</span>
<span class=normal> 651</span>
<span class=normal> 652</span>
<span class=normal> 653</span>
<span class=normal> 654</span>
<span class=normal> 655</span>
<span class=normal> 656</span>
<span class=normal> 657</span>
<span class=normal> 658</span>
<span class=normal> 659</span>
<span class=normal> 660</span>
<span class=normal> 661</span>
<span class=normal> 662</span>
<span class=normal> 663</span>
<span class=normal> 664</span>
<span class=normal> 665</span>
<span class=normal> 666</span>
<span class=normal> 667</span>
<span class=normal> 668</span>
<span class=normal> 669</span>
<span class=normal> 670</span>
<span class=normal> 671</span>
<span class=normal> 672</span>
<span class=normal> 673</span>
<span class=normal> 674</span>
<span class=normal> 675</span>
<span class=normal> 676</span>
<span class=normal> 677</span>
<span class=normal> 678</span>
<span class=normal> 679</span>
<span class=normal> 680</span>
<span class=normal> 681</span>
<span class=normal> 682</span>
<span class=normal> 683</span>
<span class=normal> 684</span>
<span class=normal> 685</span>
<span class=normal> 686</span>
<span class=normal> 687</span>
<span class=normal> 688</span>
<span class=normal> 689</span>
<span class=normal> 690</span>
<span class=normal> 691</span>
<span class=normal> 692</span>
<span class=normal> 693</span>
<span class=normal> 694</span>
<span class=normal> 695</span>
<span class=normal> 696</span>
<span class=normal> 697</span>
<span class=normal> 698</span>
<span class=normal> 699</span>
<span class=normal> 700</span>
<span class=normal> 701</span>
<span class=normal> 702</span>
<span class=normal> 703</span>
<span class=normal> 704</span>
<span class=normal> 705</span>
<span class=normal> 706</span>
<span class=normal> 707</span>
<span class=normal> 708</span>
<span class=normal> 709</span>
<span class=normal> 710</span>
<span class=normal> 711</span>
<span class=normal> 712</span>
<span class=normal> 713</span>
<span class=normal> 714</span>
<span class=normal> 715</span>
<span class=normal> 716</span>
<span class=normal> 717</span>
<span class=normal> 718</span>
<span class=normal> 719</span>
<span class=normal> 720</span>
<span class=normal> 721</span>
<span class=normal> 722</span>
<span class=normal> 723</span>
<span class=normal> 724</span>
<span class=normal> 725</span>
<span class=normal> 726</span>
<span class=normal> 727</span>
<span class=normal> 728</span>
<span class=normal> 729</span>
<span class=normal> 730</span>
<span class=normal> 731</span>
<span class=normal> 732</span>
<span class=normal> 733</span>
<span class=normal> 734</span>
<span class=normal> 735</span>
<span class=normal> 736</span>
<span class=normal> 737</span>
<span class=normal> 738</span>
<span class=normal> 739</span>
<span class=normal> 740</span>
<span class=normal> 741</span>
<span class=normal> 742</span>
<span class=normal> 743</span>
<span class=normal> 744</span>
<span class=normal> 745</span>
<span class=normal> 746</span>
<span class=normal> 747</span>
<span class=normal> 748</span>
<span class=normal> 749</span>
<span class=normal> 750</span>
<span class=normal> 751</span>
<span class=normal> 752</span>
<span class=normal> 753</span>
<span class=normal> 754</span>
<span class=normal> 755</span>
<span class=normal> 756</span>
<span class=normal> 757</span>
<span class=normal> 758</span>
<span class=normal> 759</span>
<span class=normal> 760</span>
<span class=normal> 761</span>
<span class=normal> 762</span>
<span class=normal> 763</span>
<span class=normal> 764</span>
<span class=normal> 765</span>
<span class=normal> 766</span>
<span class=normal> 767</span>
<span class=normal> 768</span>
<span class=normal> 769</span>
<span class=normal> 770</span>
<span class=normal> 771</span>
<span class=normal> 772</span>
<span class=normal> 773</span>
<span class=normal> 774</span>
<span class=normal> 775</span>
<span class=normal> 776</span>
<span class=normal> 777</span>
<span class=normal> 778</span>
<span class=normal> 779</span>
<span class=normal> 780</span>
<span class=normal> 781</span>
<span class=normal> 782</span>
<span class=normal> 783</span>
<span class=normal> 784</span>
<span class=normal> 785</span>
<span class=normal> 786</span>
<span class=normal> 787</span>
<span class=normal> 788</span>
<span class=normal> 789</span>
<span class=normal> 790</span>
<span class=normal> 791</span>
<span class=normal> 792</span>
<span class=normal> 793</span>
<span class=normal> 794</span>
<span class=normal> 795</span>
<span class=normal> 796</span>
<span class=normal> 797</span>
<span class=normal> 798</span>
<span class=normal> 799</span>
<span class=normal> 800</span>
<span class=normal> 801</span>
<span class=normal> 802</span>
<span class=normal> 803</span>
<span class=normal> 804</span>
<span class=normal> 805</span>
<span class=normal> 806</span>
<span class=normal> 807</span>
<span class=normal> 808</span>
<span class=normal> 809</span>
<span class=normal> 810</span>
<span class=normal> 811</span>
<span class=normal> 812</span>
<span class=normal> 813</span>
<span class=normal> 814</span>
<span class=normal> 815</span>
<span class=normal> 816</span>
<span class=normal> 817</span>
<span class=normal> 818</span>
<span class=normal> 819</span>
<span class=normal> 820</span>
<span class=normal> 821</span>
<span class=normal> 822</span>
<span class=normal> 823</span>
<span class=normal> 824</span>
<span class=normal> 825</span>
<span class=normal> 826</span>
<span class=normal> 827</span>
<span class=normal> 828</span>
<span class=normal> 829</span>
<span class=normal> 830</span>
<span class=normal> 831</span>
<span class=normal> 832</span>
<span class=normal> 833</span>
<span class=normal> 834</span>
<span class=normal> 835</span>
<span class=normal> 836</span>
<span class=normal> 837</span>
<span class=normal> 838</span>
<span class=normal> 839</span>
<span class=normal> 840</span>
<span class=normal> 841</span>
<span class=normal> 842</span>
<span class=normal> 843</span>
<span class=normal> 844</span>
<span class=normal> 845</span>
<span class=normal> 846</span>
<span class=normal> 847</span>
<span class=normal> 848</span>
<span class=normal> 849</span>
<span class=normal> 850</span>
<span class=normal> 851</span>
<span class=normal> 852</span>
<span class=normal> 853</span>
<span class=normal> 854</span>
<span class=normal> 855</span>
<span class=normal> 856</span>
<span class=normal> 857</span>
<span class=normal> 858</span>
<span class=normal> 859</span>
<span class=normal> 860</span>
<span class=normal> 861</span>
<span class=normal> 862</span>
<span class=normal> 863</span>
<span class=normal> 864</span>
<span class=normal> 865</span>
<span class=normal> 866</span>
<span class=normal> 867</span>
<span class=normal> 868</span>
<span class=normal> 869</span>
<span class=normal> 870</span>
<span class=normal> 871</span>
<span class=normal> 872</span>
<span class=normal> 873</span>
<span class=normal> 874</span>
<span class=normal> 875</span>
<span class=normal> 876</span>
<span class=normal> 877</span>
<span class=normal> 878</span>
<span class=normal> 879</span>
<span class=normal> 880</span>
<span class=normal> 881</span>
<span class=normal> 882</span>
<span class=normal> 883</span>
<span class=normal> 884</span>
<span class=normal> 885</span>
<span class=normal> 886</span>
<span class=normal> 887</span>
<span class=normal> 888</span>
<span class=normal> 889</span>
<span class=normal> 890</span>
<span class=normal> 891</span>
<span class=normal> 892</span>
<span class=normal> 893</span>
<span class=normal> 894</span>
<span class=normal> 895</span>
<span class=normal> 896</span>
<span class=normal> 897</span>
<span class=normal> 898</span>
<span class=normal> 899</span>
<span class=normal> 900</span>
<span class=normal> 901</span>
<span class=normal> 902</span>
<span class=normal> 903</span>
<span class=normal> 904</span>
<span class=normal> 905</span>
<span class=normal> 906</span>
<span class=normal> 907</span>
<span class=normal> 908</span>
<span class=normal> 909</span>
<span class=normal> 910</span>
<span class=normal> 911</span>
<span class=normal> 912</span>
<span class=normal> 913</span>
<span class=normal> 914</span>
<span class=normal> 915</span>
<span class=normal> 916</span>
<span class=normal> 917</span>
<span class=normal> 918</span>
<span class=normal> 919</span>
<span class=normal> 920</span>
<span class=normal> 921</span>
<span class=normal> 922</span>
<span class=normal> 923</span>
<span class=normal> 924</span>
<span class=normal> 925</span>
<span class=normal> 926</span>
<span class=normal> 927</span>
<span class=normal> 928</span>
<span class=normal> 929</span>
<span class=normal> 930</span>
<span class=normal> 931</span>
<span class=normal> 932</span>
<span class=normal> 933</span>
<span class=normal> 934</span>
<span class=normal> 935</span>
<span class=normal> 936</span>
<span class=normal> 937</span>
<span class=normal> 938</span>
<span class=normal> 939</span>
<span class=normal> 940</span>
<span class=normal> 941</span>
<span class=normal> 942</span>
<span class=normal> 943</span>
<span class=normal> 944</span>
<span class=normal> 945</span>
<span class=normal> 946</span>
<span class=normal> 947</span>
<span class=normal> 948</span>
<span class=normal> 949</span>
<span class=normal> 950</span>
<span class=normal> 951</span>
<span class=normal> 952</span>
<span class=normal> 953</span>
<span class=normal> 954</span>
<span class=normal> 955</span>
<span class=normal> 956</span>
<span class=normal> 957</span>
<span class=normal> 958</span>
<span class=normal> 959</span>
<span class=normal> 960</span>
<span class=normal> 961</span>
<span class=normal> 962</span>
<span class=normal> 963</span>
<span class=normal> 964</span>
<span class=normal> 965</span>
<span class=normal> 966</span>
<span class=normal> 967</span>
<span class=normal> 968</span>
<span class=normal> 969</span>
<span class=normal> 970</span>
<span class=normal> 971</span>
<span class=normal> 972</span>
<span class=normal> 973</span>
<span class=normal> 974</span>
<span class=normal> 975</span>
<span class=normal> 976</span>
<span class=normal> 977</span>
<span class=normal> 978</span>
<span class=normal> 979</span>
<span class=normal> 980</span>
<span class=normal> 981</span>
<span class=normal> 982</span>
<span class=normal> 983</span>
<span class=normal> 984</span>
<span class=normal> 985</span>
<span class=normal> 986</span>
<span class=normal> 987</span>
<span class=normal> 988</span>
<span class=normal> 989</span>
<span class=normal> 990</span>
<span class=normal> 991</span>
<span class=normal> 992</span>
<span class=normal> 993</span>
<span class=normal> 994</span>
<span class=normal> 995</span>
<span class=normal> 996</span>
<span class=normal> 997</span>
<span class=normal> 998</span>
<span class=normal> 999</span>
<span class=normal>1000</span>
<span class=normal>1001</span>
<span class=normal>1002</span>
<span class=normal>1003</span>
<span class=normal>1004</span>
<span class=normal>1005</span>
<span class=normal>1006</span>
<span class=normal>1007</span>
<span class=normal>1008</span>
<span class=normal>1009</span>
<span class=normal>1010</span>
<span class=normal>1011</span>
<span class=normal>1012</span>
<span class=normal>1013</span>
<span class=normal>1014</span>
<span class=normal>1015</span>
<span class=normal>1016</span>
<span class=normal>1017</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>CreatedInstance</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Instance entity with data that will be stored to workfile.</span>

<span class=sd>    I think `data` must be required argument containing all minimum information</span>
<span class=sd>    about instance like &quot;folderPath&quot; and &quot;task&quot; and all data used for filling</span>
<span class=sd>    product name as creators may have custom data for product name filling.</span>

<span class=sd>    Notes:</span>
<span class=sd>        Object have 2 possible initialization. One using &#39;creator&#39; object which</span>
<span class=sd>            is recommended for api usage. Second by passing information about</span>
<span class=sd>            creator.</span>

<span class=sd>    Args:</span>
<span class=sd>        product_type (str): Product type that will be created.</span>
<span class=sd>        product_name (str): Name of product that will be created.</span>
<span class=sd>        data (Dict[str, Any]): Data used for filling product name or override</span>
<span class=sd>            data from already existing instance.</span>
<span class=sd>        creator (BaseCreator): Creator responsible for instance.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=c1># Keys that can&#39;t be changed or removed from data after loading using</span>
    <span class=c1>#   creator.</span>
    <span class=c1># - &#39;creator_attributes&#39; and &#39;publish_attributes&#39; can change values of</span>
    <span class=c1>#   their individual children but not on their own</span>
    <span class=n>__immutable_keys</span> <span class=o>=</span> <span class=p>(</span>
        <span class=s2>&quot;id&quot;</span><span class=p>,</span>
        <span class=s2>&quot;instance_id&quot;</span><span class=p>,</span>
        <span class=s2>&quot;productType&quot;</span><span class=p>,</span>
        <span class=s2>&quot;creator_identifier&quot;</span><span class=p>,</span>
        <span class=s2>&quot;creator_attributes&quot;</span><span class=p>,</span>
        <span class=s2>&quot;publish_attributes&quot;</span>
    <span class=p>)</span>
    <span class=c1># Keys that can be changed, but should not be removed from instance</span>
    <span class=n>__required_keys</span> <span class=o>=</span> <span class=p>{</span>
        <span class=s2>&quot;folderPath&quot;</span><span class=p>:</span> <span class=kc>None</span><span class=p>,</span>
        <span class=s2>&quot;task&quot;</span><span class=p>:</span> <span class=kc>None</span><span class=p>,</span>
        <span class=s2>&quot;productName&quot;</span><span class=p>:</span> <span class=kc>None</span><span class=p>,</span>
        <span class=s2>&quot;active&quot;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span>
    <span class=p>}</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>product_type</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
        <span class=n>product_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
        <span class=n>data</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>],</span>
        <span class=n>creator</span><span class=p>:</span> <span class=s2>&quot;BaseCreator&quot;</span><span class=p>,</span>
        <span class=n>transient_data</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
    <span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_creator</span> <span class=o>=</span> <span class=n>creator</span>
        <span class=n>creator_identifier</span> <span class=o>=</span> <span class=n>creator</span><span class=o>.</span><span class=n>identifier</span>
        <span class=n>group_label</span> <span class=o>=</span> <span class=n>creator</span><span class=o>.</span><span class=n>get_group_label</span><span class=p>()</span>
        <span class=n>creator_label</span> <span class=o>=</span> <span class=n>creator</span><span class=o>.</span><span class=n>label</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_creator_label</span> <span class=o>=</span> <span class=n>creator_label</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_group_label</span> <span class=o>=</span> <span class=n>group_label</span> <span class=ow>or</span> <span class=n>creator_identifier</span>

        <span class=c1># Instance members may have actions on them</span>
        <span class=c1># TODO implement members logic</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_members</span> <span class=o>=</span> <span class=p>[]</span>

        <span class=c1># Data that can be used for lifetime of object</span>
        <span class=k>if</span> <span class=n>transient_data</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>transient_data</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_transient_data</span> <span class=o>=</span> <span class=n>transient_data</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_is_mandatory</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_parent_instance_id</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_parent_flags</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>0</span>

        <span class=c1># Create a copy of passed data to avoid changing them on the fly</span>
        <span class=n>data</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=n>data</span> <span class=ow>or</span> <span class=p>{})</span>

        <span class=c1># Pop dictionary values that will be converted to objects to be able</span>
        <span class=c1>#   catch changes</span>
        <span class=n>orig_creator_attributes</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span> <span class=ow>or</span> <span class=p>{}</span>
        <span class=n>orig_publish_attributes</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s2>&quot;publish_attributes&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span> <span class=ow>or</span> <span class=p>{}</span>

        <span class=c1># Store original value of passed data</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_orig_data</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>

        <span class=c1># Pop &#39;productType&#39; and &#39;productName&#39; to prevent unexpected changes</span>
        <span class=n>data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s2>&quot;productType&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
        <span class=n>data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s2>&quot;productName&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
        <span class=c1># Backwards compatibility with OpenPype instances</span>
        <span class=n>data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s2>&quot;family&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
        <span class=n>data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s2>&quot;subset&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>

        <span class=n>asset_name</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s2>&quot;asset&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
        <span class=k>if</span> <span class=s2>&quot;folderPath&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>data</span><span class=p>:</span>
            <span class=n>data</span><span class=p>[</span><span class=s2>&quot;folderPath&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>asset_name</span>

        <span class=c1># QUESTION Does it make sense to have data stored as ordered dict?</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span> <span class=o>=</span> <span class=n>collections</span><span class=o>.</span><span class=n>OrderedDict</span><span class=p>()</span>
        <span class=c1># QUESTION Do we need this &quot;id&quot; information on instance?</span>
        <span class=n>item_id</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;id&quot;</span><span class=p>)</span>
        <span class=c1># TODO use only &#39;AYON_INSTANCE_ID&#39; when all hosts support it</span>
        <span class=k>if</span> <span class=n>item_id</span> <span class=ow>not</span> <span class=ow>in</span> <span class=p>{</span><span class=n>AYON_INSTANCE_ID</span><span class=p>,</span> <span class=n>AVALON_INSTANCE_ID</span><span class=p>}:</span>
            <span class=n>item_id</span> <span class=o>=</span> <span class=n>AYON_INSTANCE_ID</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>item_id</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;productType&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>product_type</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;productName&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>product_name</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;active&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;active&quot;</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_identifier&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>creator_identifier</span>

        <span class=c1># Pop from source data all keys that are defined in `_data` before</span>
        <span class=c1>#   this moment and through their values away</span>
        <span class=c1># - they should be the same and if are not then should not change</span>
        <span class=c1>#   already set values</span>
        <span class=k>for</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>keys</span><span class=p>():</span>
            <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=n>data</span><span class=p>:</span>
                <span class=n>data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;variant&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;variant&quot;</span><span class=p>)</span> <span class=ow>or</span> <span class=s2>&quot;&quot;</span>
        <span class=c1># Stored creator specific attribute values</span>
        <span class=c1># {key: value}</span>
        <span class=n>creator_values</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=n>orig_creator_attributes</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>creator_values</span>

        <span class=c1># Stored publish specific attribute values</span>
        <span class=c1># {&lt;plugin name&gt;: {key: value}}</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;publish_attributes&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>PublishAttributes</span><span class=p>(</span>
            <span class=bp>self</span><span class=p>,</span> <span class=n>orig_publish_attributes</span>
        <span class=p>)</span>
        <span class=k>if</span> <span class=n>data</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>

        <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>default</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>__required_keys</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>setdefault</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>default</span><span class=p>)</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;instance_id&quot;</span><span class=p>):</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;instance_id&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>uuid4</span><span class=p>())</span>

        <span class=n>creator_attr_defs</span> <span class=o>=</span> <span class=n>creator</span><span class=o>.</span><span class=n>get_attr_defs_for_instance</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>set_create_attr_defs</span><span class=p>(</span>
            <span class=n>creator_attr_defs</span><span class=p>,</span> <span class=n>creator_values</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__str__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=p>(</span>
            <span class=s2>&quot;&lt;CreatedInstance </span><span class=si>{product[name]}</span><span class=s2>&quot;</span>
            <span class=s2>&quot; (</span><span class=si>{product[type]}</span><span class=s2>[</span><span class=si>{creator_identifier}</span><span class=s2>])&gt; </span><span class=si>{data}</span><span class=s2>&quot;</span>
        <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
            <span class=n>creator_identifier</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>creator_identifier</span><span class=p>,</span>
            <span class=n>product</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;name&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>product_name</span><span class=p>,</span> <span class=s2>&quot;type&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>product_type</span><span class=p>},</span>
            <span class=n>data</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>)</span>
        <span class=p>)</span>

    <span class=c1># --- Dictionary like methods ---</span>
    <span class=k>def</span><span class=w> </span><span class=fm>__getitem__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__contains__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__setitem__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
        <span class=c1># Validate immutable keys</span>
        <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>__immutable_keys</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>value</span> <span class=o>==</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>):</span>
                <span class=k>return</span>
            <span class=c1># Raise exception if key is immutable and value has changed</span>
            <span class=k>raise</span> <span class=n>ImmutableKeyError</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>==</span> <span class=n>value</span><span class=p>:</span>
            <span class=k>return</span>

        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>is_mandatory</span> <span class=ow>and</span> <span class=n>key</span> <span class=o>==</span> <span class=s2>&quot;active&quot;</span> <span class=ow>and</span> <span class=n>value</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>True</span><span class=p>:</span>
            <span class=k>raise</span> <span class=n>ImmutableKeyError</span><span class=p>(</span>
                <span class=n>key</span><span class=p>,</span>
                <span class=s2>&quot;Instance is mandatory and can&#39;t be disabled.&quot;</span>
            <span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_create_context</span><span class=o>.</span><span class=n>instance_values_changed</span><span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=p>{</span><span class=n>key</span><span class=p>:</span> <span class=n>value</span><span class=p>}</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>default</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>pop</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
        <span class=c1># Raise exception if is trying to pop key which is immutable</span>
        <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>__immutable_keys</span><span class=p>:</span>
            <span class=k>raise</span> <span class=n>ImmutableKeyError</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>

        <span class=n>has_key</span> <span class=o>=</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span>
        <span class=n>output</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>has_key</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>__required_keys</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>__required_keys</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_create_context</span><span class=o>.</span><span class=n>instance_values_changed</span><span class=p>(</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=p>{</span><span class=n>key</span><span class=p>:</span> <span class=kc>None</span><span class=p>}</span>
            <span class=p>)</span>
        <span class=k>return</span> <span class=n>output</span>

    <span class=k>def</span><span class=w> </span><span class=nf>keys</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>keys</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>values</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>values</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>items</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>items</span><span class=p>()</span>
    <span class=c1># ------</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>product_type</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;productType&quot;</span><span class=p>]</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>product_name</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;productName&quot;</span><span class=p>]</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>label</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=n>label</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;label&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>label</span><span class=p>:</span>
            <span class=n>label</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>product_name</span>
        <span class=k>return</span> <span class=n>label</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>group_label</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=n>label</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;group&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>label</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>label</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_group_label</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>origin_data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=n>output</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_orig_data</span><span class=p>)</span>
        <span class=n>output</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>creator_attributes</span><span class=o>.</span><span class=n>origin_data</span>
        <span class=n>output</span><span class=p>[</span><span class=s2>&quot;publish_attributes&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>publish_attributes</span><span class=o>.</span><span class=n>origin_data</span>
        <span class=k>return</span> <span class=n>output</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>creator_identifier</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_identifier&quot;</span><span class=p>]</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>creator_label</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_creator</span><span class=o>.</span><span class=n>label</span> <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>creator_identifier</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>id</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Instance identifier.</span>

<span class=sd>        Returns:</span>
<span class=sd>            str: UUID of instance.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;instance_id&quot;</span><span class=p>]</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Legacy access to data.</span>

<span class=sd>        Access to data is needed to modify values.</span>

<span class=sd>        Returns:</span>
<span class=sd>            CreatedInstance: Object can be used as dictionary but with</span>
<span class=sd>                validations of immutable keys.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>transient_data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Data stored for lifetime of instance object.</span>

<span class=sd>        These data are not stored to scene and will be lost on object</span>
<span class=sd>        deletion.</span>

<span class=sd>        Can be used to store objects. In some host implementations is not</span>
<span class=sd>        possible to reference to object in scene with some unique identifier</span>
<span class=sd>        (e.g. node in Fusion.). In that case it is handy to store the object</span>
<span class=sd>        here. Should be used that way only if instance data are stored on the</span>
<span class=sd>        node itself.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Dict[str, Any]: Dictionary object where you can store data related</span>
<span class=sd>                to instance for lifetime of instance object.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_transient_data</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>is_mandatory</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Check if instance is mandatory.</span>

<span class=sd>        Returns:</span>
<span class=sd>            bool: True if instance is mandatory, False otherwise.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_is_mandatory</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_mandatory</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=nb>bool</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Set instance as mandatory or not.</span>

<span class=sd>        Mandatory instance can&#39;t be disabled in UI.</span>

<span class=sd>        Args:</span>
<span class=sd>            value (bool): True if instance should be mandatory, False</span>
<span class=sd>                otherwise.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=bp>self</span><span class=o>.</span><span class=n>_is_mandatory</span><span class=p>:</span>
            <span class=k>return</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_is_mandatory</span> <span class=o>=</span> <span class=n>value</span>
        <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=kc>True</span><span class=p>:</span>
            <span class=bp>self</span><span class=p>[</span><span class=s2>&quot;active&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>True</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_create_context</span><span class=o>.</span><span class=n>instance_requirement_changed</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>)</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>parent_instance_id</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_parent_instance_id</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>parent_flags</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>int</span><span class=p>:</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_parent_flags</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_parent</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span> <span class=n>instance_id</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>],</span> <span class=n>flags</span><span class=p>:</span> <span class=nb>int</span>
    <span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Set parent instance id and parenting flags.</span>

<span class=sd>        Args:</span>
<span class=sd>            instance_id (Optional[str]): Parent instance id.</span>
<span class=sd>            flags (int): Parenting flags.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>changed</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=k>if</span> <span class=n>instance_id</span> <span class=o>!=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_parent_instance_id</span><span class=p>:</span>
            <span class=n>changed</span> <span class=o>=</span> <span class=kc>True</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_parent_instance_id</span> <span class=o>=</span> <span class=n>instance_id</span>

        <span class=k>if</span> <span class=n>flags</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>flags</span> <span class=o>=</span> <span class=mi>0</span>

        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_parent_flags</span> <span class=o>!=</span> <span class=n>flags</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_parent_flags</span> <span class=o>=</span> <span class=n>flags</span>
            <span class=n>changed</span> <span class=o>=</span> <span class=kc>True</span>

        <span class=k>if</span> <span class=n>changed</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_create_context</span><span class=o>.</span><span class=n>instance_parent_changed</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>changes</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Calculate and return changes.&quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=n>TrackChangesItem</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>origin_data</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>data_to_store</span><span class=p>())</span>

    <span class=k>def</span><span class=w> </span><span class=nf>mark_as_stored</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Should be called when instance data are stored.</span>

<span class=sd>        Origin data are replaced by current data so changes are cleared.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>orig_keys</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_orig_data</span><span class=o>.</span><span class=n>keys</span><span class=p>())</span>
        <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=n>orig_keys</span><span class=o>.</span><span class=n>discard</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=p>(</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>,</span> <span class=s2>&quot;publish_attributes&quot;</span><span class=p>):</span>
                <span class=k>continue</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_orig_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>

        <span class=k>for</span> <span class=n>key</span> <span class=ow>in</span> <span class=n>orig_keys</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_orig_data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>creator_attributes</span><span class=o>.</span><span class=n>mark_as_stored</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>publish_attributes</span><span class=o>.</span><span class=n>mark_as_stored</span><span class=p>()</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>creator_attributes</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>]</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>creator_attribute_defs</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Attribute definitions defined by creator plugin.</span>

<span class=sd>        Returns:</span>
<span class=sd>              List[AbstractAttrDef]: Attribute definitions.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>creator_attributes</span><span class=o>.</span><span class=n>attr_defs</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>publish_attributes</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;publish_attributes&quot;</span><span class=p>]</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>has_promised_context</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get context data that are promised to be set by creator.</span>

<span class=sd>        Returns:</span>
<span class=sd>            bool: Has context that won&#39;t bo validated. Artist can&#39;t change</span>
<span class=sd>                value when set to True.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_transient_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;has_promised_context&quot;</span><span class=p>,</span> <span class=kc>False</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>data_to_store</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Collect data that contain json parsable types.</span>

<span class=sd>        It is possible to recreate the instance using these data.</span>

<span class=sd>        Todos:</span>
<span class=sd>            We probably don&#39;t need OrderedDict. When data are loaded they</span>
<span class=sd>                are not ordered anymore.</span>

<span class=sd>        Returns:</span>
<span class=sd>            OrderedDict: Ordered dictionary with instance data.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>output</span> <span class=o>=</span> <span class=n>collections</span><span class=o>.</span><span class=n>OrderedDict</span><span class=p>()</span>
        <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=p>(</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>,</span> <span class=s2>&quot;publish_attributes&quot;</span><span class=p>):</span>
                <span class=k>continue</span>
            <span class=n>output</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>

        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>creator_attributes</span><span class=p>,</span> <span class=n>AttributeValues</span><span class=p>):</span>
            <span class=n>creator_attributes</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>creator_attributes</span><span class=o>.</span><span class=n>data_to_store</span><span class=p>()</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>creator_attributes</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>creator_attributes</span><span class=p>)</span>
        <span class=n>output</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>creator_attributes</span>
        <span class=n>output</span><span class=p>[</span><span class=s2>&quot;publish_attributes&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>publish_attributes</span><span class=o>.</span><span class=n>data_to_store</span><span class=p>()</span>

        <span class=k>return</span> <span class=n>output</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_create_attr_defs</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>attr_defs</span><span class=p>,</span> <span class=n>value</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Create plugin updates create attribute definitions.</span>

<span class=sd>        Method called by create plugin when attribute definitions should</span>
<span class=sd>            be changed.</span>

<span class=sd>        Args:</span>
<span class=sd>            attr_defs (List[AbstractAttrDef]): Attribute definitions.</span>
<span class=sd>            value (Optional[Dict[str, Any]]): Values of attribute definitions.</span>
<span class=sd>                Current values are used if not passed in.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>value</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>]</span>

        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=n>AttributeValues</span><span class=p>):</span>
            <span class=n>value</span> <span class=o>=</span> <span class=n>value</span><span class=o>.</span><span class=n>data_to_store</span><span class=p>()</span>

        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>],</span> <span class=n>AttributeValues</span><span class=p>):</span>
            <span class=n>origin_data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>origin_data</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>origin_data</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>])</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>CreatorAttributeValues</span><span class=p>(</span>
            <span class=bp>self</span><span class=p>,</span>
            <span class=s2>&quot;creator_attributes&quot;</span><span class=p>,</span>
            <span class=n>attr_defs</span><span class=p>,</span>
            <span class=n>value</span><span class=p>,</span>
            <span class=n>origin_data</span>
        <span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_create_context</span><span class=o>.</span><span class=n>instance_create_attr_defs_changed</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>)</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>from_existing</span><span class=p>(</span>
        <span class=bp>cls</span><span class=p>,</span>
        <span class=n>instance_data</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>],</span>
        <span class=n>creator</span><span class=p>:</span> <span class=s2>&quot;BaseCreator&quot;</span><span class=p>,</span>
        <span class=n>transient_data</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
    <span class=p>)</span> <span class=o>-&gt;</span> <span class=s2>&quot;CreatedInstance&quot;</span><span class=p>:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Convert instance data from workfile to CreatedInstance.</span>

<span class=sd>        Args:</span>
<span class=sd>            instance_data (Dict[str, Any]): Data in a structure ready for</span>
<span class=sd>                &#39;CreatedInstance&#39; object.</span>
<span class=sd>            creator (BaseCreator): Creator plugin which is creating the</span>
<span class=sd>                instance of for which the instance belongs.</span>
<span class=sd>            transient_data (Optional[dict[str, Any]]): Instance transient</span>
<span class=sd>                data.</span>

<span class=sd>        Returns:</span>
<span class=sd>            CreatedInstance: Instance object.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>instance_data</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=n>instance_data</span><span class=p>)</span>

        <span class=n>product_type</span> <span class=o>=</span> <span class=n>instance_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;productType&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>product_type</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>product_type</span> <span class=o>=</span> <span class=n>instance_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;family&quot;</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>product_type</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
                <span class=n>product_type</span> <span class=o>=</span> <span class=n>creator</span><span class=o>.</span><span class=n>product_type</span>
        <span class=n>product_name</span> <span class=o>=</span> <span class=n>instance_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;productName&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>product_name</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>product_name</span> <span class=o>=</span> <span class=n>instance_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;subset&quot;</span><span class=p>)</span>

        <span class=k>return</span> <span class=bp>cls</span><span class=p>(</span>
            <span class=n>product_type</span><span class=p>,</span>
            <span class=n>product_name</span><span class=p>,</span>
            <span class=n>instance_data</span><span class=p>,</span>
            <span class=n>creator</span><span class=p>,</span>
            <span class=n>transient_data</span><span class=o>=</span><span class=n>transient_data</span><span class=p>,</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>attribute_value_changed</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>changes</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;A value changed.</span>

<span class=sd>        Args:</span>
<span class=sd>            key (str): Key of attribute values.</span>
<span class=sd>            changes (Dict[str, Any]): Changes in values.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_create_context</span><span class=o>.</span><span class=n>instance_values_changed</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=p>{</span><span class=n>key</span><span class=p>:</span> <span class=n>changes</span><span class=p>})</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_publish_plugin_attr_defs</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>plugin_name</span><span class=p>,</span> <span class=n>attr_defs</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Set attribute definitions for publish plugin.</span>

<span class=sd>        Args:</span>
<span class=sd>            plugin_name(str): Name of publish plugin.</span>
<span class=sd>            attr_defs(List[AbstractAttrDef]): Attribute definitions.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>publish_attributes</span><span class=o>.</span><span class=n>set_publish_plugin_attr_defs</span><span class=p>(</span>
            <span class=n>plugin_name</span><span class=p>,</span> <span class=n>attr_defs</span>
        <span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_create_context</span><span class=o>.</span><span class=n>instance_publish_attr_defs_changed</span><span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=n>plugin_name</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>publish_attribute_value_changed</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>plugin_name</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Method called from PublishAttributes.</span>

<span class=sd>        Args:</span>
<span class=sd>            plugin_name (str): Plugin name.</span>
<span class=sd>            value (Dict[str, Any]): Changes in values for the plugin.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_create_context</span><span class=o>.</span><span class=n>instance_values_changed</span><span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
            <span class=p>{</span>
                <span class=s2>&quot;publish_attributes&quot;</span><span class=p>:</span> <span class=p>{</span>
                    <span class=n>plugin_name</span><span class=p>:</span> <span class=n>value</span><span class=p>,</span>
                <span class=p>},</span>
            <span class=p>},</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>add_members</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>members</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Currently unused method.&quot;&quot;&quot;</span>

        <span class=k>for</span> <span class=n>member</span> <span class=ow>in</span> <span class=n>members</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>member</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_members</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_members</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>member</span><span class=p>)</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>_create_context</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get create context.</span>

<span class=sd>        Returns:</span>
<span class=sd>            CreateContext: Context object which wraps object.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_creator</span><span class=o>.</span><span class=n>create_context</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.CreatedInstance.creator_attribute_defs class="doc doc-heading"> <code class="highlight language-python"><span class=n>creator_attribute_defs</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Attribute definitions defined by creator plugin.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>List[AbstractAttrDef]: Attribute definitions.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.CreatedInstance.data class="doc doc-heading"> <code class="highlight language-python"><span class=n>data</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Legacy access to data.</p> <p>Access to data is needed to modify values.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>CreatedInstance</code></td> <td> </td> <td> <div class=doc-md-description> <p>Object can be used as dictionary but with validations of immutable keys.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.CreatedInstance.has_promised_context class="doc doc-heading"> <code class="highlight language-python"><span class=n>has_promised_context</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Get context data that are promised to be set by creator.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>bool</code></td> <td> <code><span title=bool>bool</span></code> </td> <td> <div class=doc-md-description> <p>Has context that won't bo validated. Artist can't change value when set to True.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.CreatedInstance.id class="doc doc-heading"> <code class="highlight language-python"><span class=nb>id</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Instance identifier.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>UUID of instance.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.CreatedInstance.is_mandatory class="doc doc-heading"> <code class="highlight language-python"><span class=n>is_mandatory</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Check if instance is mandatory.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>bool</code></td> <td> <code><span title=bool>bool</span></code> </td> <td> <div class=doc-md-description> <p>True if instance is mandatory, False otherwise.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.CreatedInstance.transient_data class="doc doc-heading"> <code class="highlight language-python"><span class=n>transient_data</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Data stored for lifetime of instance object.</p> <p>These data are not stored to scene and will be lost on object deletion.</p> <p>Can be used to store objects. In some host implementations is not possible to reference to object in scene with some unique identifier (e.g. node in Fusion.). In that case it is handy to store the object here. Should be used that way only if instance data are stored on the node itself.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Dict[str, Any]: Dictionary object where you can store data related to instance for lifetime of instance object.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.CreatedInstance.add_members class="doc doc-heading"> <code class="highlight language-python"><span class=n>add_members</span><span class=p>(</span><span class=n>members</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Currently unused method.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1002</span>
<span class=normal>1003</span>
<span class=normal>1004</span>
<span class=normal>1005</span>
<span class=normal>1006</span>
<span class=normal>1007</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>add_members</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>members</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Currently unused method.&quot;&quot;&quot;</span>

    <span class=k>for</span> <span class=n>member</span> <span class=ow>in</span> <span class=n>members</span><span class=p>:</span>
        <span class=k>if</span> <span class=n>member</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_members</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_members</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>member</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.CreatedInstance.attribute_value_changed class="doc doc-heading"> <code class="highlight language-python"><span class=n>attribute_value_changed</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>changes</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>A value changed.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>key</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Key of attribute values.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>changes</code> </td> <td> <code><span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Changes in values.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>960</span>
<span class=normal>961</span>
<span class=normal>962</span>
<span class=normal>963</span>
<span class=normal>964</span>
<span class=normal>965</span>
<span class=normal>966</span>
<span class=normal>967</span>
<span class=normal>968</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>attribute_value_changed</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>changes</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;A value changed.</span>

<span class=sd>    Args:</span>
<span class=sd>        key (str): Key of attribute values.</span>
<span class=sd>        changes (Dict[str, Any]): Changes in values.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_create_context</span><span class=o>.</span><span class=n>instance_values_changed</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=p>{</span><span class=n>key</span><span class=p>:</span> <span class=n>changes</span><span class=p>})</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.CreatedInstance.changes class="doc doc-heading"> <code class="highlight language-python"><span class=n>changes</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Calculate and return changes.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>808</span>
<span class=normal>809</span>
<span class=normal>810</span>
<span class=normal>811</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>changes</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Calculate and return changes.&quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=n>TrackChangesItem</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>origin_data</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>data_to_store</span><span class=p>())</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.CreatedInstance.data_to_store class="doc doc-heading"> <code class="highlight language-python"><span class=n>data_to_store</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Collect data that contain json parsable types.</p> <p>It is possible to recreate the instance using these data.</p> <details class=todos open> <summary>Todos</summary> <p>We probably don't need OrderedDict. When data are loaded they are not ordered anymore.</p> </details> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>OrderedDict</code></td> <td> </td> <td> <div class=doc-md-description> <p>Ordered dictionary with instance data.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>861</span>
<span class=normal>862</span>
<span class=normal>863</span>
<span class=normal>864</span>
<span class=normal>865</span>
<span class=normal>866</span>
<span class=normal>867</span>
<span class=normal>868</span>
<span class=normal>869</span>
<span class=normal>870</span>
<span class=normal>871</span>
<span class=normal>872</span>
<span class=normal>873</span>
<span class=normal>874</span>
<span class=normal>875</span>
<span class=normal>876</span>
<span class=normal>877</span>
<span class=normal>878</span>
<span class=normal>879</span>
<span class=normal>880</span>
<span class=normal>881</span>
<span class=normal>882</span>
<span class=normal>883</span>
<span class=normal>884</span>
<span class=normal>885</span>
<span class=normal>886</span>
<span class=normal>887</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>data_to_store</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Collect data that contain json parsable types.</span>

<span class=sd>    It is possible to recreate the instance using these data.</span>

<span class=sd>    Todos:</span>
<span class=sd>        We probably don&#39;t need OrderedDict. When data are loaded they</span>
<span class=sd>            are not ordered anymore.</span>

<span class=sd>    Returns:</span>
<span class=sd>        OrderedDict: Ordered dictionary with instance data.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>output</span> <span class=o>=</span> <span class=n>collections</span><span class=o>.</span><span class=n>OrderedDict</span><span class=p>()</span>
    <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
        <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=p>(</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>,</span> <span class=s2>&quot;publish_attributes&quot;</span><span class=p>):</span>
            <span class=k>continue</span>
        <span class=n>output</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>

    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>creator_attributes</span><span class=p>,</span> <span class=n>AttributeValues</span><span class=p>):</span>
        <span class=n>creator_attributes</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>creator_attributes</span><span class=o>.</span><span class=n>data_to_store</span><span class=p>()</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=n>creator_attributes</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>creator_attributes</span><span class=p>)</span>
    <span class=n>output</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>creator_attributes</span>
    <span class=n>output</span><span class=p>[</span><span class=s2>&quot;publish_attributes&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>publish_attributes</span><span class=o>.</span><span class=n>data_to_store</span><span class=p>()</span>

    <span class=k>return</span> <span class=n>output</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.CreatedInstance.from_existing class="doc doc-heading"> <code class="highlight language-python"><span class=n>from_existing</span><span class=p>(</span><span class=n>instance_data</span><span class=p>,</span> <span class=n>creator</span><span class=p>,</span> <span class=n>transient_data</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Convert instance data from workfile to CreatedInstance.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>instance_data</code> </td> <td> <code><span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Data in a structure ready for 'CreatedInstance' object.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>creator</code> </td> <td> <code><a class="autorefs autorefs-internal" title="BaseCreator (client.ayon_core.pipeline.create.creator_plugins.BaseCreator)" href=create/creator_plugins.html#client.ayon_core.pipeline.create.creator_plugins.BaseCreator>BaseCreator</a></code> </td> <td> <div class=doc-md-description> <p>Creator plugin which is creating the instance of for which the instance belongs.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>transient_data</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=dict>dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]]</code> </td> <td> <div class=doc-md-description> <p>Instance transient data.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>CreatedInstance</code></td> <td> <code><a class="autorefs autorefs-internal" title="CreatedInstance (client.ayon_core.pipeline.create.structures.CreatedInstance)" href=create/structures.html#client.ayon_core.pipeline.create.structures.CreatedInstance>CreatedInstance</a></code> </td> <td> <div class=doc-md-description> <p>Instance object.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>920</span>
<span class=normal>921</span>
<span class=normal>922</span>
<span class=normal>923</span>
<span class=normal>924</span>
<span class=normal>925</span>
<span class=normal>926</span>
<span class=normal>927</span>
<span class=normal>928</span>
<span class=normal>929</span>
<span class=normal>930</span>
<span class=normal>931</span>
<span class=normal>932</span>
<span class=normal>933</span>
<span class=normal>934</span>
<span class=normal>935</span>
<span class=normal>936</span>
<span class=normal>937</span>
<span class=normal>938</span>
<span class=normal>939</span>
<span class=normal>940</span>
<span class=normal>941</span>
<span class=normal>942</span>
<span class=normal>943</span>
<span class=normal>944</span>
<span class=normal>945</span>
<span class=normal>946</span>
<span class=normal>947</span>
<span class=normal>948</span>
<span class=normal>949</span>
<span class=normal>950</span>
<span class=normal>951</span>
<span class=normal>952</span>
<span class=normal>953</span>
<span class=normal>954</span>
<span class=normal>955</span>
<span class=normal>956</span>
<span class=normal>957</span>
<span class=normal>958</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@classmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>from_existing</span><span class=p>(</span>
    <span class=bp>cls</span><span class=p>,</span>
    <span class=n>instance_data</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>],</span>
    <span class=n>creator</span><span class=p>:</span> <span class=s2>&quot;BaseCreator&quot;</span><span class=p>,</span>
    <span class=n>transient_data</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<span class=p>)</span> <span class=o>-&gt;</span> <span class=s2>&quot;CreatedInstance&quot;</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Convert instance data from workfile to CreatedInstance.</span>

<span class=sd>    Args:</span>
<span class=sd>        instance_data (Dict[str, Any]): Data in a structure ready for</span>
<span class=sd>            &#39;CreatedInstance&#39; object.</span>
<span class=sd>        creator (BaseCreator): Creator plugin which is creating the</span>
<span class=sd>            instance of for which the instance belongs.</span>
<span class=sd>        transient_data (Optional[dict[str, Any]]): Instance transient</span>
<span class=sd>            data.</span>

<span class=sd>    Returns:</span>
<span class=sd>        CreatedInstance: Instance object.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>instance_data</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=n>instance_data</span><span class=p>)</span>

    <span class=n>product_type</span> <span class=o>=</span> <span class=n>instance_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;productType&quot;</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>product_type</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>product_type</span> <span class=o>=</span> <span class=n>instance_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;family&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>product_type</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>product_type</span> <span class=o>=</span> <span class=n>creator</span><span class=o>.</span><span class=n>product_type</span>
    <span class=n>product_name</span> <span class=o>=</span> <span class=n>instance_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;productName&quot;</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>product_name</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>product_name</span> <span class=o>=</span> <span class=n>instance_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;subset&quot;</span><span class=p>)</span>

    <span class=k>return</span> <span class=bp>cls</span><span class=p>(</span>
        <span class=n>product_type</span><span class=p>,</span>
        <span class=n>product_name</span><span class=p>,</span>
        <span class=n>instance_data</span><span class=p>,</span>
        <span class=n>creator</span><span class=p>,</span>
        <span class=n>transient_data</span><span class=o>=</span><span class=n>transient_data</span><span class=p>,</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.CreatedInstance.mark_as_stored class="doc doc-heading"> <code class="highlight language-python"><span class=n>mark_as_stored</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Should be called when instance data are stored.</p> <p>Origin data are replaced by current data so changes are cleared.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>813</span>
<span class=normal>814</span>
<span class=normal>815</span>
<span class=normal>816</span>
<span class=normal>817</span>
<span class=normal>818</span>
<span class=normal>819</span>
<span class=normal>820</span>
<span class=normal>821</span>
<span class=normal>822</span>
<span class=normal>823</span>
<span class=normal>824</span>
<span class=normal>825</span>
<span class=normal>826</span>
<span class=normal>827</span>
<span class=normal>828</span>
<span class=normal>829</span>
<span class=normal>830</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>mark_as_stored</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Should be called when instance data are stored.</span>

<span class=sd>    Origin data are replaced by current data so changes are cleared.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>orig_keys</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_orig_data</span><span class=o>.</span><span class=n>keys</span><span class=p>())</span>
    <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
        <span class=n>orig_keys</span><span class=o>.</span><span class=n>discard</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=p>(</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>,</span> <span class=s2>&quot;publish_attributes&quot;</span><span class=p>):</span>
            <span class=k>continue</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_orig_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>

    <span class=k>for</span> <span class=n>key</span> <span class=ow>in</span> <span class=n>orig_keys</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_orig_data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>creator_attributes</span><span class=o>.</span><span class=n>mark_as_stored</span><span class=p>()</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>publish_attributes</span><span class=o>.</span><span class=n>mark_as_stored</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.CreatedInstance.publish_attribute_value_changed class="doc doc-heading"> <code class="highlight language-python"><span class=n>publish_attribute_value_changed</span><span class=p>(</span><span class=n>plugin_name</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Method called from PublishAttributes.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>plugin_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Plugin name.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>value</code> </td> <td> <code><span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Changes in values for the plugin.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 985</span>
<span class=normal> 986</span>
<span class=normal> 987</span>
<span class=normal> 988</span>
<span class=normal> 989</span>
<span class=normal> 990</span>
<span class=normal> 991</span>
<span class=normal> 992</span>
<span class=normal> 993</span>
<span class=normal> 994</span>
<span class=normal> 995</span>
<span class=normal> 996</span>
<span class=normal> 997</span>
<span class=normal> 998</span>
<span class=normal> 999</span>
<span class=normal>1000</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>publish_attribute_value_changed</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>plugin_name</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Method called from PublishAttributes.</span>

<span class=sd>    Args:</span>
<span class=sd>        plugin_name (str): Plugin name.</span>
<span class=sd>        value (Dict[str, Any]): Changes in values for the plugin.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_create_context</span><span class=o>.</span><span class=n>instance_values_changed</span><span class=p>(</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>,</span>
        <span class=p>{</span>
            <span class=s2>&quot;publish_attributes&quot;</span><span class=p>:</span> <span class=p>{</span>
                <span class=n>plugin_name</span><span class=p>:</span> <span class=n>value</span><span class=p>,</span>
            <span class=p>},</span>
        <span class=p>},</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.CreatedInstance.set_create_attr_defs class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_create_attr_defs</span><span class=p>(</span><span class=n>attr_defs</span><span class=p>,</span> <span class=n>value</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Create plugin updates create attribute definitions.</p> <p>Method called by create plugin when attribute definitions should be changed.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>attr_defs</code> </td> <td> <code><span title=typing.List>List</span>[<span title=ayon_core.lib.attribute_definitions.AbstractAttrDef>AbstractAttrDef</span>]</code> </td> <td> <div class=doc-md-description> <p>Attribute definitions.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>value</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]]</code> </td> <td> <div class=doc-md-description> <p>Values of attribute definitions. Current values are used if not passed in.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>889</span>
<span class=normal>890</span>
<span class=normal>891</span>
<span class=normal>892</span>
<span class=normal>893</span>
<span class=normal>894</span>
<span class=normal>895</span>
<span class=normal>896</span>
<span class=normal>897</span>
<span class=normal>898</span>
<span class=normal>899</span>
<span class=normal>900</span>
<span class=normal>901</span>
<span class=normal>902</span>
<span class=normal>903</span>
<span class=normal>904</span>
<span class=normal>905</span>
<span class=normal>906</span>
<span class=normal>907</span>
<span class=normal>908</span>
<span class=normal>909</span>
<span class=normal>910</span>
<span class=normal>911</span>
<span class=normal>912</span>
<span class=normal>913</span>
<span class=normal>914</span>
<span class=normal>915</span>
<span class=normal>916</span>
<span class=normal>917</span>
<span class=normal>918</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_create_attr_defs</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>attr_defs</span><span class=p>,</span> <span class=n>value</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Create plugin updates create attribute definitions.</span>

<span class=sd>    Method called by create plugin when attribute definitions should</span>
<span class=sd>        be changed.</span>

<span class=sd>    Args:</span>
<span class=sd>        attr_defs (List[AbstractAttrDef]): Attribute definitions.</span>
<span class=sd>        value (Optional[Dict[str, Any]]): Values of attribute definitions.</span>
<span class=sd>            Current values are used if not passed in.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>value</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>]</span>

    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=n>AttributeValues</span><span class=p>):</span>
        <span class=n>value</span> <span class=o>=</span> <span class=n>value</span><span class=o>.</span><span class=n>data_to_store</span><span class=p>()</span>

    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>],</span> <span class=n>AttributeValues</span><span class=p>):</span>
        <span class=n>origin_data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>origin_data</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=n>origin_data</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>])</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=p>[</span><span class=s2>&quot;creator_attributes&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>CreatorAttributeValues</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=s2>&quot;creator_attributes&quot;</span><span class=p>,</span>
        <span class=n>attr_defs</span><span class=p>,</span>
        <span class=n>value</span><span class=p>,</span>
        <span class=n>origin_data</span>
    <span class=p>)</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_create_context</span><span class=o>.</span><span class=n>instance_create_attr_defs_changed</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.CreatedInstance.set_mandatory class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_mandatory</span><span class=p>(</span><span class=n>value</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Set instance as mandatory or not.</p> <p>Mandatory instance can't be disabled in UI.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>value</code> </td> <td> <code><span title=bool>bool</span></code> </td> <td> <div class=doc-md-description> <p>True if instance should be mandatory, False otherwise.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>758</span>
<span class=normal>759</span>
<span class=normal>760</span>
<span class=normal>761</span>
<span class=normal>762</span>
<span class=normal>763</span>
<span class=normal>764</span>
<span class=normal>765</span>
<span class=normal>766</span>
<span class=normal>767</span>
<span class=normal>768</span>
<span class=normal>769</span>
<span class=normal>770</span>
<span class=normal>771</span>
<span class=normal>772</span>
<span class=normal>773</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_mandatory</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=nb>bool</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Set instance as mandatory or not.</span>

<span class=sd>    Mandatory instance can&#39;t be disabled in UI.</span>

<span class=sd>    Args:</span>
<span class=sd>        value (bool): True if instance should be mandatory, False</span>
<span class=sd>            otherwise.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=bp>self</span><span class=o>.</span><span class=n>_is_mandatory</span><span class=p>:</span>
        <span class=k>return</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_is_mandatory</span> <span class=o>=</span> <span class=n>value</span>
    <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=kc>True</span><span class=p>:</span>
        <span class=bp>self</span><span class=p>[</span><span class=s2>&quot;active&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>True</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_create_context</span><span class=o>.</span><span class=n>instance_requirement_changed</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.CreatedInstance.set_parent class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_parent</span><span class=p>(</span><span class=n>instance_id</span><span class=p>,</span> <span class=n>flags</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Set parent instance id and parenting flags.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>instance_id</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Parent instance id.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>flags</code> </td> <td> <code><span title=int>int</span></code> </td> <td> <div class=doc-md-description> <p>Parenting flags.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>783</span>
<span class=normal>784</span>
<span class=normal>785</span>
<span class=normal>786</span>
<span class=normal>787</span>
<span class=normal>788</span>
<span class=normal>789</span>
<span class=normal>790</span>
<span class=normal>791</span>
<span class=normal>792</span>
<span class=normal>793</span>
<span class=normal>794</span>
<span class=normal>795</span>
<span class=normal>796</span>
<span class=normal>797</span>
<span class=normal>798</span>
<span class=normal>799</span>
<span class=normal>800</span>
<span class=normal>801</span>
<span class=normal>802</span>
<span class=normal>803</span>
<span class=normal>804</span>
<span class=normal>805</span>
<span class=normal>806</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_parent</span><span class=p>(</span>
    <span class=bp>self</span><span class=p>,</span> <span class=n>instance_id</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>],</span> <span class=n>flags</span><span class=p>:</span> <span class=nb>int</span>
<span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Set parent instance id and parenting flags.</span>

<span class=sd>    Args:</span>
<span class=sd>        instance_id (Optional[str]): Parent instance id.</span>
<span class=sd>        flags (int): Parenting flags.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>changed</span> <span class=o>=</span> <span class=kc>False</span>
    <span class=k>if</span> <span class=n>instance_id</span> <span class=o>!=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_parent_instance_id</span><span class=p>:</span>
        <span class=n>changed</span> <span class=o>=</span> <span class=kc>True</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_parent_instance_id</span> <span class=o>=</span> <span class=n>instance_id</span>

    <span class=k>if</span> <span class=n>flags</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>flags</span> <span class=o>=</span> <span class=mi>0</span>

    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_parent_flags</span> <span class=o>!=</span> <span class=n>flags</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_parent_flags</span> <span class=o>=</span> <span class=n>flags</span>
        <span class=n>changed</span> <span class=o>=</span> <span class=kc>True</span>

    <span class=k>if</span> <span class=n>changed</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_create_context</span><span class=o>.</span><span class=n>instance_parent_changed</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.CreatedInstance.set_publish_plugin_attr_defs class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_publish_plugin_attr_defs</span><span class=p>(</span><span class=n>plugin_name</span><span class=p>,</span> <span class=n>attr_defs</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Set attribute definitions for publish plugin.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>plugin_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Name of publish plugin.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>attr_defs</code> </td> <td> <code><span title=typing.List>List</span>[<span title=ayon_core.lib.attribute_definitions.AbstractAttrDef>AbstractAttrDef</span>]</code> </td> <td> <div class=doc-md-description> <p>Attribute definitions.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/structures.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>970</span>
<span class=normal>971</span>
<span class=normal>972</span>
<span class=normal>973</span>
<span class=normal>974</span>
<span class=normal>975</span>
<span class=normal>976</span>
<span class=normal>977</span>
<span class=normal>978</span>
<span class=normal>979</span>
<span class=normal>980</span>
<span class=normal>981</span>
<span class=normal>982</span>
<span class=normal>983</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_publish_plugin_attr_defs</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>plugin_name</span><span class=p>,</span> <span class=n>attr_defs</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Set attribute definitions for publish plugin.</span>

<span class=sd>    Args:</span>
<span class=sd>        plugin_name(str): Name of publish plugin.</span>
<span class=sd>        attr_defs(List[AbstractAttrDef]): Attribute definitions.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>publish_attributes</span><span class=o>.</span><span class=n>set_publish_plugin_attr_defs</span><span class=p>(</span>
        <span class=n>plugin_name</span><span class=p>,</span> <span class=n>attr_defs</span>
    <span class=p>)</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_create_context</span><span class=o>.</span><span class=n>instance_publish_attr_defs_changed</span><span class=p>(</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=n>plugin_name</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.Creator class="doc doc-heading"> <code>Creator</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="BaseCreator (client.ayon_core.pipeline.create.creator_plugins.BaseCreator)" href=create/creator_plugins.html#client.ayon_core.pipeline.create.creator_plugins.BaseCreator>BaseCreator</a></code></p> <p>Creator that has more information for artist to show in UI.</p> <p>Creation requires prepared product name and instance data.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>649</span>
<span class=normal>650</span>
<span class=normal>651</span>
<span class=normal>652</span>
<span class=normal>653</span>
<span class=normal>654</span>
<span class=normal>655</span>
<span class=normal>656</span>
<span class=normal>657</span>
<span class=normal>658</span>
<span class=normal>659</span>
<span class=normal>660</span>
<span class=normal>661</span>
<span class=normal>662</span>
<span class=normal>663</span>
<span class=normal>664</span>
<span class=normal>665</span>
<span class=normal>666</span>
<span class=normal>667</span>
<span class=normal>668</span>
<span class=normal>669</span>
<span class=normal>670</span>
<span class=normal>671</span>
<span class=normal>672</span>
<span class=normal>673</span>
<span class=normal>674</span>
<span class=normal>675</span>
<span class=normal>676</span>
<span class=normal>677</span>
<span class=normal>678</span>
<span class=normal>679</span>
<span class=normal>680</span>
<span class=normal>681</span>
<span class=normal>682</span>
<span class=normal>683</span>
<span class=normal>684</span>
<span class=normal>685</span>
<span class=normal>686</span>
<span class=normal>687</span>
<span class=normal>688</span>
<span class=normal>689</span>
<span class=normal>690</span>
<span class=normal>691</span>
<span class=normal>692</span>
<span class=normal>693</span>
<span class=normal>694</span>
<span class=normal>695</span>
<span class=normal>696</span>
<span class=normal>697</span>
<span class=normal>698</span>
<span class=normal>699</span>
<span class=normal>700</span>
<span class=normal>701</span>
<span class=normal>702</span>
<span class=normal>703</span>
<span class=normal>704</span>
<span class=normal>705</span>
<span class=normal>706</span>
<span class=normal>707</span>
<span class=normal>708</span>
<span class=normal>709</span>
<span class=normal>710</span>
<span class=normal>711</span>
<span class=normal>712</span>
<span class=normal>713</span>
<span class=normal>714</span>
<span class=normal>715</span>
<span class=normal>716</span>
<span class=normal>717</span>
<span class=normal>718</span>
<span class=normal>719</span>
<span class=normal>720</span>
<span class=normal>721</span>
<span class=normal>722</span>
<span class=normal>723</span>
<span class=normal>724</span>
<span class=normal>725</span>
<span class=normal>726</span>
<span class=normal>727</span>
<span class=normal>728</span>
<span class=normal>729</span>
<span class=normal>730</span>
<span class=normal>731</span>
<span class=normal>732</span>
<span class=normal>733</span>
<span class=normal>734</span>
<span class=normal>735</span>
<span class=normal>736</span>
<span class=normal>737</span>
<span class=normal>738</span>
<span class=normal>739</span>
<span class=normal>740</span>
<span class=normal>741</span>
<span class=normal>742</span>
<span class=normal>743</span>
<span class=normal>744</span>
<span class=normal>745</span>
<span class=normal>746</span>
<span class=normal>747</span>
<span class=normal>748</span>
<span class=normal>749</span>
<span class=normal>750</span>
<span class=normal>751</span>
<span class=normal>752</span>
<span class=normal>753</span>
<span class=normal>754</span>
<span class=normal>755</span>
<span class=normal>756</span>
<span class=normal>757</span>
<span class=normal>758</span>
<span class=normal>759</span>
<span class=normal>760</span>
<span class=normal>761</span>
<span class=normal>762</span>
<span class=normal>763</span>
<span class=normal>764</span>
<span class=normal>765</span>
<span class=normal>766</span>
<span class=normal>767</span>
<span class=normal>768</span>
<span class=normal>769</span>
<span class=normal>770</span>
<span class=normal>771</span>
<span class=normal>772</span>
<span class=normal>773</span>
<span class=normal>774</span>
<span class=normal>775</span>
<span class=normal>776</span>
<span class=normal>777</span>
<span class=normal>778</span>
<span class=normal>779</span>
<span class=normal>780</span>
<span class=normal>781</span>
<span class=normal>782</span>
<span class=normal>783</span>
<span class=normal>784</span>
<span class=normal>785</span>
<span class=normal>786</span>
<span class=normal>787</span>
<span class=normal>788</span>
<span class=normal>789</span>
<span class=normal>790</span>
<span class=normal>791</span>
<span class=normal>792</span>
<span class=normal>793</span>
<span class=normal>794</span>
<span class=normal>795</span>
<span class=normal>796</span>
<span class=normal>797</span>
<span class=normal>798</span>
<span class=normal>799</span>
<span class=normal>800</span>
<span class=normal>801</span>
<span class=normal>802</span>
<span class=normal>803</span>
<span class=normal>804</span>
<span class=normal>805</span>
<span class=normal>806</span>
<span class=normal>807</span>
<span class=normal>808</span>
<span class=normal>809</span>
<span class=normal>810</span>
<span class=normal>811</span>
<span class=normal>812</span>
<span class=normal>813</span>
<span class=normal>814</span>
<span class=normal>815</span>
<span class=normal>816</span>
<span class=normal>817</span>
<span class=normal>818</span>
<span class=normal>819</span>
<span class=normal>820</span>
<span class=normal>821</span>
<span class=normal>822</span>
<span class=normal>823</span>
<span class=normal>824</span>
<span class=normal>825</span>
<span class=normal>826</span>
<span class=normal>827</span>
<span class=normal>828</span>
<span class=normal>829</span>
<span class=normal>830</span>
<span class=normal>831</span>
<span class=normal>832</span>
<span class=normal>833</span>
<span class=normal>834</span>
<span class=normal>835</span>
<span class=normal>836</span>
<span class=normal>837</span>
<span class=normal>838</span>
<span class=normal>839</span>
<span class=normal>840</span>
<span class=normal>841</span>
<span class=normal>842</span>
<span class=normal>843</span>
<span class=normal>844</span>
<span class=normal>845</span>
<span class=normal>846</span>
<span class=normal>847</span>
<span class=normal>848</span>
<span class=normal>849</span>
<span class=normal>850</span>
<span class=normal>851</span>
<span class=normal>852</span>
<span class=normal>853</span>
<span class=normal>854</span>
<span class=normal>855</span>
<span class=normal>856</span>
<span class=normal>857</span>
<span class=normal>858</span>
<span class=normal>859</span>
<span class=normal>860</span>
<span class=normal>861</span>
<span class=normal>862</span>
<span class=normal>863</span>
<span class=normal>864</span>
<span class=normal>865</span>
<span class=normal>866</span>
<span class=normal>867</span>
<span class=normal>868</span>
<span class=normal>869</span>
<span class=normal>870</span>
<span class=normal>871</span>
<span class=normal>872</span>
<span class=normal>873</span>
<span class=normal>874</span>
<span class=normal>875</span>
<span class=normal>876</span>
<span class=normal>877</span>
<span class=normal>878</span>
<span class=normal>879</span>
<span class=normal>880</span>
<span class=normal>881</span>
<span class=normal>882</span>
<span class=normal>883</span>
<span class=normal>884</span>
<span class=normal>885</span>
<span class=normal>886</span>
<span class=normal>887</span>
<span class=normal>888</span>
<span class=normal>889</span>
<span class=normal>890</span>
<span class=normal>891</span>
<span class=normal>892</span>
<span class=normal>893</span>
<span class=normal>894</span>
<span class=normal>895</span>
<span class=normal>896</span>
<span class=normal>897</span>
<span class=normal>898</span>
<span class=normal>899</span>
<span class=normal>900</span>
<span class=normal>901</span>
<span class=normal>902</span>
<span class=normal>903</span>
<span class=normal>904</span>
<span class=normal>905</span>
<span class=normal>906</span>
<span class=normal>907</span>
<span class=normal>908</span>
<span class=normal>909</span>
<span class=normal>910</span>
<span class=normal>911</span>
<span class=normal>912</span>
<span class=normal>913</span>
<span class=normal>914</span>
<span class=normal>915</span>
<span class=normal>916</span>
<span class=normal>917</span>
<span class=normal>918</span>
<span class=normal>919</span>
<span class=normal>920</span>
<span class=normal>921</span>
<span class=normal>922</span>
<span class=normal>923</span>
<span class=normal>924</span>
<span class=normal>925</span>
<span class=normal>926</span>
<span class=normal>927</span>
<span class=normal>928</span>
<span class=normal>929</span>
<span class=normal>930</span>
<span class=normal>931</span>
<span class=normal>932</span>
<span class=normal>933</span>
<span class=normal>934</span>
<span class=normal>935</span>
<span class=normal>936</span>
<span class=normal>937</span>
<span class=normal>938</span>
<span class=normal>939</span>
<span class=normal>940</span>
<span class=normal>941</span>
<span class=normal>942</span>
<span class=normal>943</span>
<span class=normal>944</span>
<span class=normal>945</span>
<span class=normal>946</span>
<span class=normal>947</span>
<span class=normal>948</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>Creator</span><span class=p>(</span><span class=n>BaseCreator</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Creator that has more information for artist to show in UI.</span>

<span class=sd>    Creation requires prepared product name and instance data.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=c1># GUI Purposes</span>
    <span class=c1># - default_variants may not be used if `get_default_variants`</span>
    <span class=c1>#   is overridden</span>
    <span class=n>default_variants</span> <span class=o>=</span> <span class=p>[]</span>

    <span class=c1># Default variant used in &#39;get_default_variant&#39;</span>
    <span class=n>_default_variant</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=c1># Short description of product type</span>
    <span class=c1># - may not be used if `get_description` is overridden</span>
    <span class=n>description</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=c1># Detailed description of product type for artists</span>
    <span class=c1># - may not be used if `get_detail_description` is overridden</span>
    <span class=n>detailed_description</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=c1># It does make sense to change context on creation</span>
    <span class=c1># - in some cases it may confuse artists because it would not be used</span>
    <span class=c1>#      e.g. for buld creators</span>
    <span class=n>create_allow_context_change</span> <span class=o>=</span> <span class=kc>True</span>
    <span class=c1># A thumbnail can be passed in precreate attributes</span>
    <span class=c1># - if is set to True is should expect that a thumbnail path under key</span>
    <span class=c1>#   PRE_CREATE_THUMBNAIL_KEY can be sent in data with precreate data</span>
    <span class=c1># - is disabled by default because the feature was added in later stages</span>
    <span class=c1>#   and creators who would not expect PRE_CREATE_THUMBNAIL_KEY could</span>
    <span class=c1>#   cause issues with instance data</span>
    <span class=n>create_allow_thumbnail</span> <span class=o>=</span> <span class=kc>False</span>

    <span class=c1># Precreate attribute definitions showed before creation</span>
    <span class=c1># - similar to instance attribute definitions</span>
    <span class=n>pre_create_attr_defs</span> <span class=o>=</span> <span class=p>[]</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
        <span class=bp>cls</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span>

        <span class=c1># Fix backwards compatibility for plugins which override</span>
        <span class=c1>#   &#39;default_variant&#39; attribute directly</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=bp>cls</span><span class=o>.</span><span class=n>default_variant</span><span class=p>,</span> <span class=nb>property</span><span class=p>):</span>
            <span class=c1># Move value from &#39;default_variant&#39; to &#39;_default_variant&#39;</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_default_variant</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>default_variant</span>
            <span class=c1># Create property &#39;default_variant&#39; on the class</span>
            <span class=bp>cls</span><span class=o>.</span><span class=n>default_variant</span> <span class=o>=</span> <span class=nb>property</span><span class=p>(</span>
                <span class=bp>cls</span><span class=o>.</span><span class=n>_get_default_variant_wrap</span><span class=p>,</span>
                <span class=bp>cls</span><span class=o>.</span><span class=n>_set_default_variant_wrap</span>
            <span class=p>)</span>
        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>show_order</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Order in which is creator shown in UI.</span>

<span class=sd>        Returns:</span>
<span class=sd>            int: Order in which is creator shown (less == earlier). By default</span>
<span class=sd>                is using Creator&#39;s &#39;order&#39; or processing.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>order</span>

    <span class=nd>@abstractmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>create</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>product_name</span><span class=p>,</span> <span class=n>instance_data</span><span class=p>,</span> <span class=n>pre_create_data</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Create new instance and store it.</span>

<span class=sd>        Ideally should be stored to workfile using host implementation.</span>

<span class=sd>        Args:</span>
<span class=sd>            product_name(str): Product name of created instance.</span>
<span class=sd>            instance_data(dict): Base data for instance.</span>
<span class=sd>            pre_create_data(dict): Data based on pre creation attributes.</span>
<span class=sd>                Those may affect how creator works.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=c1># instance = CreatedInstance(</span>
        <span class=c1>#     self.product_type, product_name, instance_data</span>
        <span class=c1># )</span>
        <span class=k>pass</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_description</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Short description of product type and plugin.</span>

<span class=sd>        Returns:</span>
<span class=sd>            str: Short description of product type.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>description</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_detail_description</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Description of product type and plugin.</span>

<span class=sd>        Can be detailed with markdown or html tags.</span>

<span class=sd>        Returns:</span>
<span class=sd>            str: Detailed description of product type for artist.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>detailed_description</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_default_variants</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Default variant values for UI tooltips.</span>

<span class=sd>        Replacement of `default_variants` attribute. Using method gives</span>
<span class=sd>        ability to have some &quot;logic&quot; other than attribute values.</span>

<span class=sd>        By default, returns `default_variants` value.</span>

<span class=sd>        Returns:</span>
<span class=sd>            list[str]: Whisper variants for user input.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>default_variants</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_default_variant</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>only_explicit</span><span class=o>=</span><span class=kc>False</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Default variant value that will be used to prefill variant input.</span>

<span class=sd>        This is for user input and value may not be content of result from</span>
<span class=sd>        `get_default_variants`.</span>

<span class=sd>        Note:</span>
<span class=sd>            This method does not allow to have empty string as</span>
<span class=sd>                default variant.</span>

<span class=sd>        Args:</span>
<span class=sd>            only_explicit (Optional[bool]): If True, only explicit default</span>
<span class=sd>                variant from &#39;_default_variant&#39; will be returned.</span>

<span class=sd>        Returns:</span>
<span class=sd>            str: Variant value.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>if</span> <span class=n>only_explicit</span> <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>_default_variant</span><span class=p>:</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_default_variant</span>

        <span class=k>for</span> <span class=n>variant</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_default_variants</span><span class=p>():</span>
            <span class=k>return</span> <span class=n>variant</span>
        <span class=k>return</span> <span class=n>DEFAULT_VARIANT_VALUE</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_get_default_variant_wrap</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Default variant value that will be used to prefill variant input.</span>

<span class=sd>        Wrapper for &#39;get_default_variant&#39;.</span>

<span class=sd>        Notes:</span>
<span class=sd>            This method is wrapper for &#39;get_default_variant&#39;</span>
<span class=sd>                for &#39;default_variant&#39; property, so creator can override</span>
<span class=sd>                the method.</span>

<span class=sd>        Returns:</span>
<span class=sd>            str: Variant value.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_default_variant</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_set_default_variant_wrap</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>variant</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Set default variant value.</span>

<span class=sd>        This method is needed for automated settings overrides which are</span>
<span class=sd>        changing attributes based on keys in settings.</span>

<span class=sd>        Args:</span>
<span class=sd>            variant (str): New default variant value.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_default_variant</span> <span class=o>=</span> <span class=n>variant</span>

    <span class=n>default_variant</span> <span class=o>=</span> <span class=nb>property</span><span class=p>(</span>
        <span class=n>_get_default_variant_wrap</span><span class=p>,</span>
        <span class=n>_set_default_variant_wrap</span>
    <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_pre_create_attr_defs</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Plugin attribute definitions needed for creation.</span>
<span class=sd>        Attribute definitions of plugin that define how creation will work.</span>
<span class=sd>        Values of these definitions are passed to `create` method.</span>

<span class=sd>        Note:</span>
<span class=sd>            Convert method should be implemented which should care about</span>
<span class=sd>            updating keys/values when plugin attributes change.</span>

<span class=sd>        Returns:</span>
<span class=sd>            list[AbstractAttrDef]: Attribute definitions that can be tweaked</span>
<span class=sd>                for created instance.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>pre_create_attr_defs</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_staging_dir</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instance</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>StagingDir</span><span class=p>]:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Return the staging dir and persistence from instance.</span>

<span class=sd>        Args:</span>
<span class=sd>            instance (CreatedInstance): Instance for which should be staging</span>
<span class=sd>                dir gathered.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Optional[namedtuple]: Staging dir path and persistence or None</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>create_ctx</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span>
        <span class=n>product_name</span> <span class=o>=</span> <span class=n>instance</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;productName&quot;</span><span class=p>)</span>
        <span class=n>product_type</span> <span class=o>=</span> <span class=n>instance</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;productType&quot;</span><span class=p>)</span>
        <span class=n>folder_path</span> <span class=o>=</span> <span class=n>instance</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;folderPath&quot;</span><span class=p>)</span>

        <span class=c1># this can only work if product name and folder path are available</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>product_name</span> <span class=ow>or</span> <span class=ow>not</span> <span class=n>folder_path</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>None</span>

        <span class=n>publish_settings</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>project_settings</span><span class=p>[</span><span class=s2>&quot;core&quot;</span><span class=p>][</span><span class=s2>&quot;publish&quot;</span><span class=p>]</span>
        <span class=n>follow_workfile_version</span> <span class=o>=</span> <span class=p>(</span>
            <span class=n>publish_settings</span>
            <span class=p>[</span><span class=s2>&quot;CollectAnatomyInstanceData&quot;</span><span class=p>]</span>
            <span class=p>[</span><span class=s2>&quot;follow_workfile_version&quot;</span><span class=p>]</span>
        <span class=p>)</span>
        <span class=n>follow_version_hosts</span> <span class=o>=</span> <span class=p>(</span>
            <span class=n>publish_settings</span>
            <span class=p>[</span><span class=s2>&quot;CollectSceneVersion&quot;</span><span class=p>]</span>
            <span class=p>[</span><span class=s2>&quot;hosts&quot;</span><span class=p>]</span>
        <span class=p>)</span>

        <span class=n>current_host</span> <span class=o>=</span> <span class=n>create_ctx</span><span class=o>.</span><span class=n>host</span><span class=o>.</span><span class=n>name</span>
        <span class=n>follow_workfile_version</span> <span class=o>=</span> <span class=p>(</span>
            <span class=n>follow_workfile_version</span> <span class=ow>and</span>
            <span class=n>current_host</span> <span class=ow>in</span> <span class=n>follow_version_hosts</span>
        <span class=p>)</span>

        <span class=c1># Gather version number provided from the instance.</span>
        <span class=n>current_workfile</span> <span class=o>=</span> <span class=n>create_ctx</span><span class=o>.</span><span class=n>get_current_workfile_path</span><span class=p>()</span>
        <span class=n>version</span> <span class=o>=</span> <span class=n>instance</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;version&quot;</span><span class=p>)</span>

        <span class=c1># If follow workfile, gather version from workfile path.</span>
        <span class=k>if</span> <span class=n>version</span> <span class=ow>is</span> <span class=kc>None</span> <span class=ow>and</span> <span class=n>follow_workfile_version</span> <span class=ow>and</span> <span class=n>current_workfile</span><span class=p>:</span>
            <span class=n>workfile_version</span> <span class=o>=</span> <span class=n>get_version_from_path</span><span class=p>(</span><span class=n>current_workfile</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>workfile_version</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
                <span class=n>version</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>workfile_version</span><span class=p>)</span>

        <span class=c1># Fill-up version with next version available.</span>
        <span class=k>if</span> <span class=n>version</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>versions</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_next_versions_for_instances</span><span class=p>(</span>
                <span class=p>[</span><span class=n>instance</span><span class=p>]</span>
            <span class=p>)</span>
            <span class=n>version</span><span class=p>,</span> <span class=o>=</span> <span class=nb>tuple</span><span class=p>(</span><span class=n>versions</span><span class=o>.</span><span class=n>values</span><span class=p>())</span>

        <span class=n>template_data</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;version&quot;</span><span class=p>:</span> <span class=n>version</span><span class=p>}</span>

        <span class=n>staging_dir_info</span> <span class=o>=</span> <span class=n>get_staging_dir_info</span><span class=p>(</span>
            <span class=n>create_ctx</span><span class=o>.</span><span class=n>get_current_project_entity</span><span class=p>(),</span>
            <span class=n>create_ctx</span><span class=o>.</span><span class=n>get_folder_entity</span><span class=p>(</span><span class=n>folder_path</span><span class=p>),</span>
            <span class=n>create_ctx</span><span class=o>.</span><span class=n>get_task_entity</span><span class=p>(</span><span class=n>folder_path</span><span class=p>,</span> <span class=n>instance</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;task&quot;</span><span class=p>)),</span>
            <span class=n>product_type</span><span class=p>,</span>
            <span class=n>product_name</span><span class=p>,</span>
            <span class=n>create_ctx</span><span class=o>.</span><span class=n>host_name</span><span class=p>,</span>
            <span class=n>anatomy</span><span class=o>=</span><span class=n>create_ctx</span><span class=o>.</span><span class=n>get_current_project_anatomy</span><span class=p>(),</span>
            <span class=n>project_settings</span><span class=o>=</span><span class=n>create_ctx</span><span class=o>.</span><span class=n>get_current_project_settings</span><span class=p>(),</span>
            <span class=n>always_return_path</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
            <span class=n>logger</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=p>,</span>
            <span class=n>template_data</span><span class=o>=</span><span class=n>template_data</span><span class=p>,</span>
        <span class=p>)</span>

        <span class=k>return</span> <span class=n>staging_dir_info</span> <span class=ow>or</span> <span class=kc>None</span>

    <span class=k>def</span><span class=w> </span><span class=nf>apply_staging_dir</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instance</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Apply staging dir with persistence to instance&#39;s transient data.</span>

<span class=sd>        Method is called on instance creation and on instance update.</span>

<span class=sd>        Args:</span>
<span class=sd>            instance (CreatedInstance): Instance for which should be staging</span>
<span class=sd>                dir applied.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Optional[str]: Staging dir path or None if not applied.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>staging_dir_info</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_staging_dir</span><span class=p>(</span><span class=n>instance</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>staging_dir_info</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>None</span>

        <span class=c1># path might be already created by get_staging_dir_info</span>
        <span class=n>staging_dir_path</span> <span class=o>=</span> <span class=n>staging_dir_info</span><span class=o>.</span><span class=n>directory</span>
        <span class=n>os</span><span class=o>.</span><span class=n>makedirs</span><span class=p>(</span><span class=n>staging_dir_path</span><span class=p>,</span> <span class=n>exist_ok</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>

        <span class=n>instance</span><span class=o>.</span><span class=n>transient_data</span><span class=o>.</span><span class=n>update</span><span class=p>({</span>
            <span class=s2>&quot;stagingDir&quot;</span><span class=p>:</span> <span class=n>staging_dir_path</span><span class=p>,</span>
            <span class=s2>&quot;stagingDir_persistent&quot;</span><span class=p>:</span> <span class=n>staging_dir_info</span><span class=o>.</span><span class=n>is_persistent</span><span class=p>,</span>
            <span class=s2>&quot;stagingDir_is_custom&quot;</span><span class=p>:</span> <span class=n>staging_dir_info</span><span class=o>.</span><span class=n>is_custom</span><span class=p>,</span>
        <span class=p>})</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Applied staging dir to instance: </span><span class=si>{</span><span class=n>staging_dir_path</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>

        <span class=k>return</span> <span class=n>staging_dir_path</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_pre_create_attr_defs_changed</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Called when pre-create attribute definitions change.</span>

<span class=sd>        Create plugin can call this method when knows that</span>
<span class=sd>            &#39;get_pre_create_attr_defs&#39; should be called again.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span><span class=o>.</span><span class=n>create_plugin_pre_create_attr_defs_changed</span><span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>identifier</span>
        <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.Creator.show_order class="doc doc-heading"> <code class="highlight language-python"><span class=n>show_order</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Order in which is creator shown in UI.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>int</code></td> <td> </td> <td> <div class=doc-md-description> <p>Order in which is creator shown (less == earlier). By default is using Creator's 'order' or processing.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.Creator.apply_staging_dir class="doc doc-heading"> <code class="highlight language-python"><span class=n>apply_staging_dir</span><span class=p>(</span><span class=n>instance</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Apply staging dir with persistence to instance's transient data.</p> <p>Method is called on instance creation and on instance update.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>instance</code> </td> <td> <code><a class="autorefs autorefs-internal" title="CreatedInstance (client.ayon_core.pipeline.create.structures.CreatedInstance)" href=create/structures.html#client.ayon_core.pipeline.create.structures.CreatedInstance>CreatedInstance</a></code> </td> <td> <div class=doc-md-description> <p>Instance for which should be staging dir applied.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Optional[str]: Staging dir path or None if not applied.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>910</span>
<span class=normal>911</span>
<span class=normal>912</span>
<span class=normal>913</span>
<span class=normal>914</span>
<span class=normal>915</span>
<span class=normal>916</span>
<span class=normal>917</span>
<span class=normal>918</span>
<span class=normal>919</span>
<span class=normal>920</span>
<span class=normal>921</span>
<span class=normal>922</span>
<span class=normal>923</span>
<span class=normal>924</span>
<span class=normal>925</span>
<span class=normal>926</span>
<span class=normal>927</span>
<span class=normal>928</span>
<span class=normal>929</span>
<span class=normal>930</span>
<span class=normal>931</span>
<span class=normal>932</span>
<span class=normal>933</span>
<span class=normal>934</span>
<span class=normal>935</span>
<span class=normal>936</span>
<span class=normal>937</span>
<span class=normal>938</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>apply_staging_dir</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instance</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Apply staging dir with persistence to instance&#39;s transient data.</span>

<span class=sd>    Method is called on instance creation and on instance update.</span>

<span class=sd>    Args:</span>
<span class=sd>        instance (CreatedInstance): Instance for which should be staging</span>
<span class=sd>            dir applied.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Optional[str]: Staging dir path or None if not applied.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>staging_dir_info</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_staging_dir</span><span class=p>(</span><span class=n>instance</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>staging_dir_info</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>return</span> <span class=kc>None</span>

    <span class=c1># path might be already created by get_staging_dir_info</span>
    <span class=n>staging_dir_path</span> <span class=o>=</span> <span class=n>staging_dir_info</span><span class=o>.</span><span class=n>directory</span>
    <span class=n>os</span><span class=o>.</span><span class=n>makedirs</span><span class=p>(</span><span class=n>staging_dir_path</span><span class=p>,</span> <span class=n>exist_ok</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>

    <span class=n>instance</span><span class=o>.</span><span class=n>transient_data</span><span class=o>.</span><span class=n>update</span><span class=p>({</span>
        <span class=s2>&quot;stagingDir&quot;</span><span class=p>:</span> <span class=n>staging_dir_path</span><span class=p>,</span>
        <span class=s2>&quot;stagingDir_persistent&quot;</span><span class=p>:</span> <span class=n>staging_dir_info</span><span class=o>.</span><span class=n>is_persistent</span><span class=p>,</span>
        <span class=s2>&quot;stagingDir_is_custom&quot;</span><span class=p>:</span> <span class=n>staging_dir_info</span><span class=o>.</span><span class=n>is_custom</span><span class=p>,</span>
    <span class=p>})</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Applied staging dir to instance: </span><span class=si>{</span><span class=n>staging_dir_path</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>

    <span class=k>return</span> <span class=n>staging_dir_path</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.Creator.create class="doc doc-heading"> <code class="highlight language-python"><span class=n>create</span><span class=p>(</span><span class=n>product_name</span><span class=p>,</span> <span class=n>instance_data</span><span class=p>,</span> <span class=n>pre_create_data</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Create new instance and store it.</p> <p>Ideally should be stored to workfile using host implementation.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>product_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Product name of created instance.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>instance_data</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>Base data for instance.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>pre_create_data</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>Data based on pre creation attributes. Those may affect how creator works.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>713</span>
<span class=normal>714</span>
<span class=normal>715</span>
<span class=normal>716</span>
<span class=normal>717</span>
<span class=normal>718</span>
<span class=normal>719</span>
<span class=normal>720</span>
<span class=normal>721</span>
<span class=normal>722</span>
<span class=normal>723</span>
<span class=normal>724</span>
<span class=normal>725</span>
<span class=normal>726</span>
<span class=normal>727</span>
<span class=normal>728</span>
<span class=normal>729</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@abstractmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>create</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>product_name</span><span class=p>,</span> <span class=n>instance_data</span><span class=p>,</span> <span class=n>pre_create_data</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Create new instance and store it.</span>

<span class=sd>    Ideally should be stored to workfile using host implementation.</span>

<span class=sd>    Args:</span>
<span class=sd>        product_name(str): Product name of created instance.</span>
<span class=sd>        instance_data(dict): Base data for instance.</span>
<span class=sd>        pre_create_data(dict): Data based on pre creation attributes.</span>
<span class=sd>            Those may affect how creator works.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=c1># instance = CreatedInstance(</span>
    <span class=c1>#     self.product_type, product_name, instance_data</span>
    <span class=c1># )</span>
    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.Creator.get_default_variant class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_default_variant</span><span class=p>(</span><span class=n>only_explicit</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Default variant value that will be used to prefill variant input.</p> <p>This is for user input and value may not be content of result from <code>get_default_variants</code>.</p> <details class=note open> <summary>Note</summary> <p>This method does not allow to have empty string as default variant.</p> </details> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>only_explicit</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=bool>bool</span>]</code> </td> <td> <div class=doc-md-description> <p>If True, only explicit default variant from '_default_variant' will be returned.</p> </div> </td> <td> <code>False</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>Variant value.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>765</span>
<span class=normal>766</span>
<span class=normal>767</span>
<span class=normal>768</span>
<span class=normal>769</span>
<span class=normal>770</span>
<span class=normal>771</span>
<span class=normal>772</span>
<span class=normal>773</span>
<span class=normal>774</span>
<span class=normal>775</span>
<span class=normal>776</span>
<span class=normal>777</span>
<span class=normal>778</span>
<span class=normal>779</span>
<span class=normal>780</span>
<span class=normal>781</span>
<span class=normal>782</span>
<span class=normal>783</span>
<span class=normal>784</span>
<span class=normal>785</span>
<span class=normal>786</span>
<span class=normal>787</span>
<span class=normal>788</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_default_variant</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>only_explicit</span><span class=o>=</span><span class=kc>False</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Default variant value that will be used to prefill variant input.</span>

<span class=sd>    This is for user input and value may not be content of result from</span>
<span class=sd>    `get_default_variants`.</span>

<span class=sd>    Note:</span>
<span class=sd>        This method does not allow to have empty string as</span>
<span class=sd>            default variant.</span>

<span class=sd>    Args:</span>
<span class=sd>        only_explicit (Optional[bool]): If True, only explicit default</span>
<span class=sd>            variant from &#39;_default_variant&#39; will be returned.</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: Variant value.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>if</span> <span class=n>only_explicit</span> <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>_default_variant</span><span class=p>:</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_default_variant</span>

    <span class=k>for</span> <span class=n>variant</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_default_variants</span><span class=p>():</span>
        <span class=k>return</span> <span class=n>variant</span>
    <span class=k>return</span> <span class=n>DEFAULT_VARIANT_VALUE</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.Creator.get_default_variants class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_default_variants</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Default variant values for UI tooltips.</p> <p>Replacement of <code>default_variants</code> attribute. Using method gives ability to have some "logic" other than attribute values.</p> <p>By default, returns <code>default_variants</code> value.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>list[str]: Whisper variants for user input.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>751</span>
<span class=normal>752</span>
<span class=normal>753</span>
<span class=normal>754</span>
<span class=normal>755</span>
<span class=normal>756</span>
<span class=normal>757</span>
<span class=normal>758</span>
<span class=normal>759</span>
<span class=normal>760</span>
<span class=normal>761</span>
<span class=normal>762</span>
<span class=normal>763</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_default_variants</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Default variant values for UI tooltips.</span>

<span class=sd>    Replacement of `default_variants` attribute. Using method gives</span>
<span class=sd>    ability to have some &quot;logic&quot; other than attribute values.</span>

<span class=sd>    By default, returns `default_variants` value.</span>

<span class=sd>    Returns:</span>
<span class=sd>        list[str]: Whisper variants for user input.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>default_variants</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.Creator.get_description class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_description</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Short description of product type and plugin.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>Short description of product type.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>731</span>
<span class=normal>732</span>
<span class=normal>733</span>
<span class=normal>734</span>
<span class=normal>735</span>
<span class=normal>736</span>
<span class=normal>737</span>
<span class=normal>738</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_description</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Short description of product type and plugin.</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: Short description of product type.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>description</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.Creator.get_detail_description class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_detail_description</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Description of product type and plugin.</p> <p>Can be detailed with markdown or html tags.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>Detailed description of product type for artist.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>740</span>
<span class=normal>741</span>
<span class=normal>742</span>
<span class=normal>743</span>
<span class=normal>744</span>
<span class=normal>745</span>
<span class=normal>746</span>
<span class=normal>747</span>
<span class=normal>748</span>
<span class=normal>749</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_detail_description</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Description of product type and plugin.</span>

<span class=sd>    Can be detailed with markdown or html tags.</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: Detailed description of product type for artist.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>detailed_description</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.Creator.get_pre_create_attr_defs class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_pre_create_attr_defs</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Plugin attribute definitions needed for creation. Attribute definitions of plugin that define how creation will work. Values of these definitions are passed to <code>create</code> method.</p> <details class=note open> <summary>Note</summary> <p>Convert method should be implemented which should care about updating keys/values when plugin attributes change.</p> </details> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>list[AbstractAttrDef]: Attribute definitions that can be tweaked for created instance.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>823</span>
<span class=normal>824</span>
<span class=normal>825</span>
<span class=normal>826</span>
<span class=normal>827</span>
<span class=normal>828</span>
<span class=normal>829</span>
<span class=normal>830</span>
<span class=normal>831</span>
<span class=normal>832</span>
<span class=normal>833</span>
<span class=normal>834</span>
<span class=normal>835</span>
<span class=normal>836</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_pre_create_attr_defs</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Plugin attribute definitions needed for creation.</span>
<span class=sd>    Attribute definitions of plugin that define how creation will work.</span>
<span class=sd>    Values of these definitions are passed to `create` method.</span>

<span class=sd>    Note:</span>
<span class=sd>        Convert method should be implemented which should care about</span>
<span class=sd>        updating keys/values when plugin attributes change.</span>

<span class=sd>    Returns:</span>
<span class=sd>        list[AbstractAttrDef]: Attribute definitions that can be tweaked</span>
<span class=sd>            for created instance.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>pre_create_attr_defs</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.Creator.get_staging_dir class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_staging_dir</span><span class=p>(</span><span class=n>instance</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Return the staging dir and persistence from instance.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>instance</code> </td> <td> <code><a class="autorefs autorefs-internal" title="CreatedInstance (client.ayon_core.pipeline.create.structures.CreatedInstance)" href=create/structures.html#client.ayon_core.pipeline.create.structures.CreatedInstance>CreatedInstance</a></code> </td> <td> <div class=doc-md-description> <p>Instance for which should be staging dir gathered.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=typing.Optional>Optional</span>[<span title=ayon_core.pipeline.staging_dir.StagingDir>StagingDir</span>]</code> </td> <td> <div class=doc-md-description> <p>Optional[namedtuple]: Staging dir path and persistence or None</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/creator_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>838</span>
<span class=normal>839</span>
<span class=normal>840</span>
<span class=normal>841</span>
<span class=normal>842</span>
<span class=normal>843</span>
<span class=normal>844</span>
<span class=normal>845</span>
<span class=normal>846</span>
<span class=normal>847</span>
<span class=normal>848</span>
<span class=normal>849</span>
<span class=normal>850</span>
<span class=normal>851</span>
<span class=normal>852</span>
<span class=normal>853</span>
<span class=normal>854</span>
<span class=normal>855</span>
<span class=normal>856</span>
<span class=normal>857</span>
<span class=normal>858</span>
<span class=normal>859</span>
<span class=normal>860</span>
<span class=normal>861</span>
<span class=normal>862</span>
<span class=normal>863</span>
<span class=normal>864</span>
<span class=normal>865</span>
<span class=normal>866</span>
<span class=normal>867</span>
<span class=normal>868</span>
<span class=normal>869</span>
<span class=normal>870</span>
<span class=normal>871</span>
<span class=normal>872</span>
<span class=normal>873</span>
<span class=normal>874</span>
<span class=normal>875</span>
<span class=normal>876</span>
<span class=normal>877</span>
<span class=normal>878</span>
<span class=normal>879</span>
<span class=normal>880</span>
<span class=normal>881</span>
<span class=normal>882</span>
<span class=normal>883</span>
<span class=normal>884</span>
<span class=normal>885</span>
<span class=normal>886</span>
<span class=normal>887</span>
<span class=normal>888</span>
<span class=normal>889</span>
<span class=normal>890</span>
<span class=normal>891</span>
<span class=normal>892</span>
<span class=normal>893</span>
<span class=normal>894</span>
<span class=normal>895</span>
<span class=normal>896</span>
<span class=normal>897</span>
<span class=normal>898</span>
<span class=normal>899</span>
<span class=normal>900</span>
<span class=normal>901</span>
<span class=normal>902</span>
<span class=normal>903</span>
<span class=normal>904</span>
<span class=normal>905</span>
<span class=normal>906</span>
<span class=normal>907</span>
<span class=normal>908</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_staging_dir</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instance</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>StagingDir</span><span class=p>]:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Return the staging dir and persistence from instance.</span>

<span class=sd>    Args:</span>
<span class=sd>        instance (CreatedInstance): Instance for which should be staging</span>
<span class=sd>            dir gathered.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Optional[namedtuple]: Staging dir path and persistence or None</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>create_ctx</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span>
    <span class=n>product_name</span> <span class=o>=</span> <span class=n>instance</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;productName&quot;</span><span class=p>)</span>
    <span class=n>product_type</span> <span class=o>=</span> <span class=n>instance</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;productType&quot;</span><span class=p>)</span>
    <span class=n>folder_path</span> <span class=o>=</span> <span class=n>instance</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;folderPath&quot;</span><span class=p>)</span>

    <span class=c1># this can only work if product name and folder path are available</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>product_name</span> <span class=ow>or</span> <span class=ow>not</span> <span class=n>folder_path</span><span class=p>:</span>
        <span class=k>return</span> <span class=kc>None</span>

    <span class=n>publish_settings</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>project_settings</span><span class=p>[</span><span class=s2>&quot;core&quot;</span><span class=p>][</span><span class=s2>&quot;publish&quot;</span><span class=p>]</span>
    <span class=n>follow_workfile_version</span> <span class=o>=</span> <span class=p>(</span>
        <span class=n>publish_settings</span>
        <span class=p>[</span><span class=s2>&quot;CollectAnatomyInstanceData&quot;</span><span class=p>]</span>
        <span class=p>[</span><span class=s2>&quot;follow_workfile_version&quot;</span><span class=p>]</span>
    <span class=p>)</span>
    <span class=n>follow_version_hosts</span> <span class=o>=</span> <span class=p>(</span>
        <span class=n>publish_settings</span>
        <span class=p>[</span><span class=s2>&quot;CollectSceneVersion&quot;</span><span class=p>]</span>
        <span class=p>[</span><span class=s2>&quot;hosts&quot;</span><span class=p>]</span>
    <span class=p>)</span>

    <span class=n>current_host</span> <span class=o>=</span> <span class=n>create_ctx</span><span class=o>.</span><span class=n>host</span><span class=o>.</span><span class=n>name</span>
    <span class=n>follow_workfile_version</span> <span class=o>=</span> <span class=p>(</span>
        <span class=n>follow_workfile_version</span> <span class=ow>and</span>
        <span class=n>current_host</span> <span class=ow>in</span> <span class=n>follow_version_hosts</span>
    <span class=p>)</span>

    <span class=c1># Gather version number provided from the instance.</span>
    <span class=n>current_workfile</span> <span class=o>=</span> <span class=n>create_ctx</span><span class=o>.</span><span class=n>get_current_workfile_path</span><span class=p>()</span>
    <span class=n>version</span> <span class=o>=</span> <span class=n>instance</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;version&quot;</span><span class=p>)</span>

    <span class=c1># If follow workfile, gather version from workfile path.</span>
    <span class=k>if</span> <span class=n>version</span> <span class=ow>is</span> <span class=kc>None</span> <span class=ow>and</span> <span class=n>follow_workfile_version</span> <span class=ow>and</span> <span class=n>current_workfile</span><span class=p>:</span>
        <span class=n>workfile_version</span> <span class=o>=</span> <span class=n>get_version_from_path</span><span class=p>(</span><span class=n>current_workfile</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>workfile_version</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>version</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>workfile_version</span><span class=p>)</span>

    <span class=c1># Fill-up version with next version available.</span>
    <span class=k>if</span> <span class=n>version</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>versions</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_next_versions_for_instances</span><span class=p>(</span>
            <span class=p>[</span><span class=n>instance</span><span class=p>]</span>
        <span class=p>)</span>
        <span class=n>version</span><span class=p>,</span> <span class=o>=</span> <span class=nb>tuple</span><span class=p>(</span><span class=n>versions</span><span class=o>.</span><span class=n>values</span><span class=p>())</span>

    <span class=n>template_data</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;version&quot;</span><span class=p>:</span> <span class=n>version</span><span class=p>}</span>

    <span class=n>staging_dir_info</span> <span class=o>=</span> <span class=n>get_staging_dir_info</span><span class=p>(</span>
        <span class=n>create_ctx</span><span class=o>.</span><span class=n>get_current_project_entity</span><span class=p>(),</span>
        <span class=n>create_ctx</span><span class=o>.</span><span class=n>get_folder_entity</span><span class=p>(</span><span class=n>folder_path</span><span class=p>),</span>
        <span class=n>create_ctx</span><span class=o>.</span><span class=n>get_task_entity</span><span class=p>(</span><span class=n>folder_path</span><span class=p>,</span> <span class=n>instance</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;task&quot;</span><span class=p>)),</span>
        <span class=n>product_type</span><span class=p>,</span>
        <span class=n>product_name</span><span class=p>,</span>
        <span class=n>create_ctx</span><span class=o>.</span><span class=n>host_name</span><span class=p>,</span>
        <span class=n>anatomy</span><span class=o>=</span><span class=n>create_ctx</span><span class=o>.</span><span class=n>get_current_project_anatomy</span><span class=p>(),</span>
        <span class=n>project_settings</span><span class=o>=</span><span class=n>create_ctx</span><span class=o>.</span><span class=n>get_current_project_settings</span><span class=p>(),</span>
        <span class=n>always_return_path</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
        <span class=n>logger</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=p>,</span>
        <span class=n>template_data</span><span class=o>=</span><span class=n>template_data</span><span class=p>,</span>
    <span class=p>)</span>

    <span class=k>return</span> <span class=n>staging_dir_info</span> <span class=ow>or</span> <span class=kc>None</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.CreatorError class="doc doc-heading"> <code>CreatorError</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=Exception>Exception</span></code></p> <p>Should be raised when creator failed because of known issue.</p> <p>Message of error should be artist friendly.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/create/exceptions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>63</span>
<span class=normal>64</span>
<span class=normal>65</span>
<span class=normal>66</span>
<span class=normal>67</span>
<span class=normal>68</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>CreatorError</span><span class=p>(</span><span class=ne>Exception</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Should be raised when creator failed because of known issue.</span>

<span class=sd>    Message of error should be artist friendly.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.IncompatibleLoaderError class="doc doc-heading"> <code>IncompatibleLoaderError</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=ValueError>ValueError</span></code></p> <p>Error when Loader is incompatible with a representation.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/load/utils.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>IncompatibleLoaderError</span><span class=p>(</span><span class=ne>ValueError</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Error when Loader is incompatible with a representation.&quot;&quot;&quot;</span>
    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.InventoryAction class="doc doc-heading"> <code>InventoryAction</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=object>object</span></code></p> <p>A custom action for the scene inventory tool</p> <p>If registered the action will be visible in the Right Mouse Button menu under the submenu "Actions".</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/actions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>350</span>
<span class=normal>351</span>
<span class=normal>352</span>
<span class=normal>353</span>
<span class=normal>354</span>
<span class=normal>355</span>
<span class=normal>356</span>
<span class=normal>357</span>
<span class=normal>358</span>
<span class=normal>359</span>
<span class=normal>360</span>
<span class=normal>361</span>
<span class=normal>362</span>
<span class=normal>363</span>
<span class=normal>364</span>
<span class=normal>365</span>
<span class=normal>366</span>
<span class=normal>367</span>
<span class=normal>368</span>
<span class=normal>369</span>
<span class=normal>370</span>
<span class=normal>371</span>
<span class=normal>372</span>
<span class=normal>373</span>
<span class=normal>374</span>
<span class=normal>375</span>
<span class=normal>376</span>
<span class=normal>377</span>
<span class=normal>378</span>
<span class=normal>379</span>
<span class=normal>380</span>
<span class=normal>381</span>
<span class=normal>382</span>
<span class=normal>383</span>
<span class=normal>384</span>
<span class=normal>385</span>
<span class=normal>386</span>
<span class=normal>387</span>
<span class=normal>388</span>
<span class=normal>389</span>
<span class=normal>390</span>
<span class=normal>391</span>
<span class=normal>392</span>
<span class=normal>393</span>
<span class=normal>394</span>
<span class=normal>395</span>
<span class=normal>396</span>
<span class=normal>397</span>
<span class=normal>398</span>
<span class=normal>399</span>
<span class=normal>400</span>
<span class=normal>401</span>
<span class=normal>402</span>
<span class=normal>403</span>
<span class=normal>404</span>
<span class=normal>405</span>
<span class=normal>406</span>
<span class=normal>407</span>
<span class=normal>408</span>
<span class=normal>409</span>
<span class=normal>410</span>
<span class=normal>411</span>
<span class=normal>412</span>
<span class=normal>413</span>
<span class=normal>414</span>
<span class=normal>415</span>
<span class=normal>416</span>
<span class=normal>417</span>
<span class=normal>418</span>
<span class=normal>419</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>InventoryAction</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;A custom action for the scene inventory tool</span>

<span class=sd>    If registered the action will be visible in the Right Mouse Button menu</span>
<span class=sd>    under the submenu &quot;Actions&quot;.</span>

<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>label</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=n>icon</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=n>color</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=n>order</span> <span class=o>=</span> <span class=mi>0</span>

    <span class=n>log</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>getLogger</span><span class=p>(</span><span class=s2>&quot;InventoryAction&quot;</span><span class=p>)</span>
    <span class=n>log</span><span class=o>.</span><span class=n>propagate</span> <span class=o>=</span> <span class=kc>True</span>

    <span class=nd>@staticmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>is_compatible</span><span class=p>(</span><span class=n>container</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Override function in a custom class</span>

<span class=sd>        This method is specifically used to ensure the action can operate on</span>
<span class=sd>        the container.</span>

<span class=sd>        Args:</span>
<span class=sd>            container(dict): the data of a loaded asset, see host.ls()</span>

<span class=sd>        Returns:</span>
<span class=sd>            bool</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=nb>bool</span><span class=p>(</span><span class=n>container</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;objectName&quot;</span><span class=p>))</span>

    <span class=k>def</span><span class=w> </span><span class=nf>process</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>containers</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Override function in a custom class</span>

<span class=sd>        This method will receive all containers even those which are</span>
<span class=sd>        incompatible. It is advised to create a small filter along the lines</span>
<span class=sd>        of this example:</span>

<span class=sd>        valid_containers = filter(self.is_compatible(c) for c in containers)</span>

<span class=sd>        The return value will need to be a True-ish value to trigger</span>
<span class=sd>        the data_changed signal in order to refresh the view.</span>

<span class=sd>        You can return a list of container names to trigger GUI to select</span>
<span class=sd>        treeview items.</span>

<span class=sd>        You can return a dict to carry extra GUI options. For example:</span>
<span class=sd>            {</span>
<span class=sd>                &quot;objectNames&quot;: [container names...],</span>
<span class=sd>                &quot;options&quot;: {&quot;mode&quot;: &quot;toggle&quot;,</span>
<span class=sd>                            &quot;clear&quot;: False}</span>
<span class=sd>            }</span>
<span class=sd>        Currently workable GUI options are:</span>
<span class=sd>            - clear (bool): Clear current selection before selecting by action.</span>
<span class=sd>                            Default `True`.</span>
<span class=sd>            - mode (str): selection mode, use one of these:</span>
<span class=sd>                          &quot;select&quot;, &quot;deselect&quot;, &quot;toggle&quot;. Default is &quot;select&quot;.</span>

<span class=sd>        Args:</span>
<span class=sd>            containers (list): list of dictionaries</span>

<span class=sd>        Return:</span>
<span class=sd>            bool, list or dict</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=kc>True</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>filepath_from_context</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>context</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>get_representation_path_from_context</span><span class=p>(</span><span class=n>context</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.InventoryAction.is_compatible class="doc doc-heading"> <code class="highlight language-python"><span class=n>is_compatible</span><span class=p>(</span><span class=n>container</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Override function in a custom class</p> <p>This method is specifically used to ensure the action can operate on the container.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>container</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>the data of a loaded asset, see host.ls()</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>bool</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/actions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>366</span>
<span class=normal>367</span>
<span class=normal>368</span>
<span class=normal>369</span>
<span class=normal>370</span>
<span class=normal>371</span>
<span class=normal>372</span>
<span class=normal>373</span>
<span class=normal>374</span>
<span class=normal>375</span>
<span class=normal>376</span>
<span class=normal>377</span>
<span class=normal>378</span>
<span class=normal>379</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@staticmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>is_compatible</span><span class=p>(</span><span class=n>container</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Override function in a custom class</span>

<span class=sd>    This method is specifically used to ensure the action can operate on</span>
<span class=sd>    the container.</span>

<span class=sd>    Args:</span>
<span class=sd>        container(dict): the data of a loaded asset, see host.ls()</span>

<span class=sd>    Returns:</span>
<span class=sd>        bool</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>return</span> <span class=nb>bool</span><span class=p>(</span><span class=n>container</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;objectName&quot;</span><span class=p>))</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.InventoryAction.process class="doc doc-heading"> <code class="highlight language-python"><span class=n>process</span><span class=p>(</span><span class=n>containers</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Override function in a custom class</p> <p>This method will receive all containers even those which are incompatible. It is advised to create a small filter along the lines of this example:</p> <p>valid_containers = filter(self.is_compatible(c) for c in containers)</p> <p>The return value will need to be a True-ish value to trigger the data_changed signal in order to refresh the view.</p> <p>You can return a list of container names to trigger GUI to select treeview items.</p> <p>You can return a dict to carry extra GUI options. For example: { "objectNames": [container names...], "options": {"mode": "toggle", "clear": False} } Currently workable GUI options are: - clear (bool): Clear current selection before selecting by action. Default <code>True</code>. - mode (str): selection mode, use one of these: "select", "deselect", "toggle". Default is "select".</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>containers</code> </td> <td> <code><span title=list>list</span></code> </td> <td> <div class=doc-md-description> <p>list of dictionaries</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=return open> <summary>Return</summary> <p>bool, list or dict</p> </details> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/actions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>381</span>
<span class=normal>382</span>
<span class=normal>383</span>
<span class=normal>384</span>
<span class=normal>385</span>
<span class=normal>386</span>
<span class=normal>387</span>
<span class=normal>388</span>
<span class=normal>389</span>
<span class=normal>390</span>
<span class=normal>391</span>
<span class=normal>392</span>
<span class=normal>393</span>
<span class=normal>394</span>
<span class=normal>395</span>
<span class=normal>396</span>
<span class=normal>397</span>
<span class=normal>398</span>
<span class=normal>399</span>
<span class=normal>400</span>
<span class=normal>401</span>
<span class=normal>402</span>
<span class=normal>403</span>
<span class=normal>404</span>
<span class=normal>405</span>
<span class=normal>406</span>
<span class=normal>407</span>
<span class=normal>408</span>
<span class=normal>409</span>
<span class=normal>410</span>
<span class=normal>411</span>
<span class=normal>412</span>
<span class=normal>413</span>
<span class=normal>414</span>
<span class=normal>415</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>process</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>containers</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Override function in a custom class</span>

<span class=sd>    This method will receive all containers even those which are</span>
<span class=sd>    incompatible. It is advised to create a small filter along the lines</span>
<span class=sd>    of this example:</span>

<span class=sd>    valid_containers = filter(self.is_compatible(c) for c in containers)</span>

<span class=sd>    The return value will need to be a True-ish value to trigger</span>
<span class=sd>    the data_changed signal in order to refresh the view.</span>

<span class=sd>    You can return a list of container names to trigger GUI to select</span>
<span class=sd>    treeview items.</span>

<span class=sd>    You can return a dict to carry extra GUI options. For example:</span>
<span class=sd>        {</span>
<span class=sd>            &quot;objectNames&quot;: [container names...],</span>
<span class=sd>            &quot;options&quot;: {&quot;mode&quot;: &quot;toggle&quot;,</span>
<span class=sd>                        &quot;clear&quot;: False}</span>
<span class=sd>        }</span>
<span class=sd>    Currently workable GUI options are:</span>
<span class=sd>        - clear (bool): Clear current selection before selecting by action.</span>
<span class=sd>                        Default `True`.</span>
<span class=sd>        - mode (str): selection mode, use one of these:</span>
<span class=sd>                      &quot;select&quot;, &quot;deselect&quot;, &quot;toggle&quot;. Default is &quot;select&quot;.</span>

<span class=sd>    Args:</span>
<span class=sd>        containers (list): list of dictionaries</span>

<span class=sd>    Return:</span>
<span class=sd>        bool, list or dict</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>return</span> <span class=kc>True</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.KnownPublishError class="doc doc-heading"> <code>KnownPublishError</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=Exception>Exception</span></code></p> <p>Publishing crashed because of known error.</p> <p>Artist can't affect source of the error.</p> <details class=deprecated open> <summary>Deprecated</summary> <p>Please use <code>PublishError</code> instead. Marked as deprecated 24/09/02.</p> </details> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/publish_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>KnownPublishError</span><span class=p>(</span><span class=ne>Exception</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Publishing crashed because of known error.</span>

<span class=sd>    Artist can&#39;t affect source of the error.</span>

<span class=sd>    Deprecated:</span>
<span class=sd>        Please use `PublishError` instead. Marked as deprecated 24/09/02.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.LauncherAction class="doc doc-heading"> <code>LauncherAction</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=object>object</span></code></p> <p>A custom action available</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/actions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>319</span>
<span class=normal>320</span>
<span class=normal>321</span>
<span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span>
<span class=normal>325</span>
<span class=normal>326</span>
<span class=normal>327</span>
<span class=normal>328</span>
<span class=normal>329</span>
<span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span>
<span class=normal>334</span>
<span class=normal>335</span>
<span class=normal>336</span>
<span class=normal>337</span>
<span class=normal>338</span>
<span class=normal>339</span>
<span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span>
<span class=normal>344</span>
<span class=normal>345</span>
<span class=normal>346</span>
<span class=normal>347</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>LauncherAction</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;A custom action available&quot;&quot;&quot;</span>
    <span class=n>name</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=n>label</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=n>icon</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=n>color</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=n>order</span> <span class=o>=</span> <span class=mi>0</span>

    <span class=n>log</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>getLogger</span><span class=p>(</span><span class=s2>&quot;LauncherAction&quot;</span><span class=p>)</span>
    <span class=n>log</span><span class=o>.</span><span class=n>propagate</span> <span class=o>=</span> <span class=kc>True</span>

    <span class=k>def</span><span class=w> </span><span class=nf>is_compatible</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>selection</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Return whether the class is compatible with the Session.</span>

<span class=sd>        Args:</span>
<span class=sd>            selection (LauncherActionSelection): Data with selection.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=kc>True</span>

    <span class=k>def</span><span class=w> </span><span class=nf>process</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>selection</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Process the action.</span>

<span class=sd>        Args:</span>
<span class=sd>            selection (LauncherActionSelection): Data with selection.</span>
<span class=sd>            **kwargs: Additional arguments.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.LauncherAction.is_compatible class="doc doc-heading"> <code class="highlight language-python"><span class=n>is_compatible</span><span class=p>(</span><span class=n>selection</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Return whether the class is compatible with the Session.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>selection</code> </td> <td> <code><a class="autorefs autorefs-internal" title="LauncherActionSelection (client.ayon_core.pipeline.actions.LauncherActionSelection)" href=actions.html#client.ayon_core.pipeline.actions.LauncherActionSelection>LauncherActionSelection</a></code> </td> <td> <div class=doc-md-description> <p>Data with selection.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/actions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span>
<span class=normal>334</span>
<span class=normal>335</span>
<span class=normal>336</span>
<span class=normal>337</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>is_compatible</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>selection</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Return whether the class is compatible with the Session.</span>

<span class=sd>    Args:</span>
<span class=sd>        selection (LauncherActionSelection): Data with selection.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>return</span> <span class=kc>True</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.LauncherAction.process class="doc doc-heading"> <code class="highlight language-python"><span class=n>process</span><span class=p>(</span><span class=n>selection</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Process the action.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>selection</code> </td> <td> <code><a class="autorefs autorefs-internal" title="LauncherActionSelection (client.ayon_core.pipeline.actions.LauncherActionSelection)" href=actions.html#client.ayon_core.pipeline.actions.LauncherActionSelection>LauncherActionSelection</a></code> </td> <td> <div class=doc-md-description> <p>Data with selection.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>**kwargs</code> </td> <td> </td> <td> <div class=doc-md-description> <p>Additional arguments.</p> </div> </td> <td> <code>{}</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/actions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>339</span>
<span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span>
<span class=normal>344</span>
<span class=normal>345</span>
<span class=normal>346</span>
<span class=normal>347</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>process</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>selection</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Process the action.</span>

<span class=sd>    Args:</span>
<span class=sd>        selection (LauncherActionSelection): Data with selection.</span>
<span class=sd>        **kwargs: Additional arguments.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.LoaderPlugin class="doc doc-heading"> <code>LoaderPlugin</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=list>list</span></code></p> <p>Load representation into host application</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/load/plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 21</span>
<span class=normal> 22</span>
<span class=normal> 23</span>
<span class=normal> 24</span>
<span class=normal> 25</span>
<span class=normal> 26</span>
<span class=normal> 27</span>
<span class=normal> 28</span>
<span class=normal> 29</span>
<span class=normal> 30</span>
<span class=normal> 31</span>
<span class=normal> 32</span>
<span class=normal> 33</span>
<span class=normal> 34</span>
<span class=normal> 35</span>
<span class=normal> 36</span>
<span class=normal> 37</span>
<span class=normal> 38</span>
<span class=normal> 39</span>
<span class=normal> 40</span>
<span class=normal> 41</span>
<span class=normal> 42</span>
<span class=normal> 43</span>
<span class=normal> 44</span>
<span class=normal> 45</span>
<span class=normal> 46</span>
<span class=normal> 47</span>
<span class=normal> 48</span>
<span class=normal> 49</span>
<span class=normal> 50</span>
<span class=normal> 51</span>
<span class=normal> 52</span>
<span class=normal> 53</span>
<span class=normal> 54</span>
<span class=normal> 55</span>
<span class=normal> 56</span>
<span class=normal> 57</span>
<span class=normal> 58</span>
<span class=normal> 59</span>
<span class=normal> 60</span>
<span class=normal> 61</span>
<span class=normal> 62</span>
<span class=normal> 63</span>
<span class=normal> 64</span>
<span class=normal> 65</span>
<span class=normal> 66</span>
<span class=normal> 67</span>
<span class=normal> 68</span>
<span class=normal> 69</span>
<span class=normal> 70</span>
<span class=normal> 71</span>
<span class=normal> 72</span>
<span class=normal> 73</span>
<span class=normal> 74</span>
<span class=normal> 75</span>
<span class=normal> 76</span>
<span class=normal> 77</span>
<span class=normal> 78</span>
<span class=normal> 79</span>
<span class=normal> 80</span>
<span class=normal> 81</span>
<span class=normal> 82</span>
<span class=normal> 83</span>
<span class=normal> 84</span>
<span class=normal> 85</span>
<span class=normal> 86</span>
<span class=normal> 87</span>
<span class=normal> 88</span>
<span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span>
<span class=normal>277</span>
<span class=normal>278</span>
<span class=normal>279</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>LoaderPlugin</span><span class=p>(</span><span class=nb>list</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Load representation into host application&quot;&quot;&quot;</span>

    <span class=n>product_types</span><span class=p>:</span> <span class=nb>set</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
    <span class=n>product_base_types</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>set</span><span class=p>[</span><span class=nb>str</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=n>representations</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
    <span class=n>extensions</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;*&quot;</span><span class=p>}</span>
    <span class=n>order</span> <span class=o>=</span> <span class=mi>0</span>
    <span class=n>is_multiple_contexts_compatible</span> <span class=o>=</span> <span class=kc>False</span>
    <span class=n>enabled</span> <span class=o>=</span> <span class=kc>True</span>

    <span class=n>options</span> <span class=o>=</span> <span class=p>[]</span>

    <span class=n>log</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>getLogger</span><span class=p>(</span><span class=s2>&quot;ProductLoader&quot;</span><span class=p>)</span>
    <span class=n>log</span><span class=o>.</span><span class=n>propagate</span> <span class=o>=</span> <span class=kc>True</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>apply_settings</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>project_settings</span><span class=p>):</span>
        <span class=n>host_name</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AYON_HOST_NAME&quot;</span><span class=p>)</span>
        <span class=n>plugin_type</span> <span class=o>=</span> <span class=s2>&quot;load&quot;</span>
        <span class=n>plugin_type_settings</span> <span class=o>=</span> <span class=p>(</span>
            <span class=n>project_settings</span>
            <span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>host_name</span><span class=p>,</span> <span class=p>{})</span>
            <span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>plugin_type</span><span class=p>,</span> <span class=p>{})</span>
        <span class=p>)</span>
        <span class=n>global_type_settings</span> <span class=o>=</span> <span class=p>(</span>
            <span class=n>project_settings</span>
            <span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;core&quot;</span><span class=p>,</span> <span class=p>{})</span>
            <span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>plugin_type</span><span class=p>,</span> <span class=p>{})</span>
        <span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>global_type_settings</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>plugin_type_settings</span><span class=p>:</span>
            <span class=k>return</span>

        <span class=n>plugin_name</span> <span class=o>=</span> <span class=bp>cls</span><span class=o>.</span><span class=vm>__name__</span>

        <span class=n>plugin_settings</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=c1># Look for plugin settings in host specific settings</span>
        <span class=k>if</span> <span class=n>plugin_name</span> <span class=ow>in</span> <span class=n>plugin_type_settings</span><span class=p>:</span>
            <span class=n>plugin_settings</span> <span class=o>=</span> <span class=n>plugin_type_settings</span><span class=p>[</span><span class=n>plugin_name</span><span class=p>]</span>

        <span class=c1># Look for plugin settings in global settings</span>
        <span class=k>elif</span> <span class=n>plugin_name</span> <span class=ow>in</span> <span class=n>global_type_settings</span><span class=p>:</span>
            <span class=n>plugin_settings</span> <span class=o>=</span> <span class=n>global_type_settings</span><span class=p>[</span><span class=n>plugin_name</span><span class=p>]</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>plugin_settings</span><span class=p>:</span>
            <span class=k>return</span>

        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;&gt;&gt;&gt; We have preset for </span><span class=si>{</span><span class=n>plugin_name</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
        <span class=k>for</span> <span class=n>option</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>plugin_settings</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=k>if</span> <span class=n>option</span> <span class=o>==</span> <span class=s2>&quot;enabled&quot;</span> <span class=ow>and</span> <span class=n>value</span> <span class=ow>is</span> <span class=kc>False</span><span class=p>:</span>
                <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;  - is disabled by preset&quot;</span><span class=p>)</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;  - setting `</span><span class=si>{</span><span class=n>option</span><span class=si>}</span><span class=s2>`: `</span><span class=si>{</span><span class=n>value</span><span class=si>}</span><span class=s2>`&quot;</span><span class=p>)</span>
            <span class=nb>setattr</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>option</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>has_valid_extension</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>repre_entity</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Has representation document valid extension for loader.</span>

<span class=sd>        Args:</span>
<span class=sd>            repre_entity (dict[str, Any]): Representation entity.</span>

<span class=sd>        Returns:</span>
<span class=sd>             bool: Representation has valid extension</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=s2>&quot;*&quot;</span> <span class=ow>in</span> <span class=bp>cls</span><span class=o>.</span><span class=n>extensions</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>True</span>

        <span class=c1># Get representation main file extension from &#39;context&#39;</span>
        <span class=n>repre_context</span> <span class=o>=</span> <span class=n>repre_entity</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;context&quot;</span><span class=p>)</span> <span class=ow>or</span> <span class=p>{}</span>
        <span class=n>ext</span> <span class=o>=</span> <span class=n>repre_context</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;ext&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>ext</span><span class=p>:</span>
            <span class=c1># Legacy way how to get extensions</span>
            <span class=n>path</span> <span class=o>=</span> <span class=n>repre_entity</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;attrib&quot;</span><span class=p>,</span> <span class=p>{})</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;path&quot;</span><span class=p>)</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=n>path</span><span class=p>:</span>
                <span class=bp>cls</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span>
                    <span class=s2>&quot;Representation doesn&#39;t have known source of extension&quot;</span>
                    <span class=s2>&quot; information.&quot;</span>
                <span class=p>)</span>
                <span class=k>return</span> <span class=kc>False</span>

            <span class=bp>cls</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Using legacy source of extension from path.&quot;</span><span class=p>)</span>
            <span class=n>ext</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>splitext</span><span class=p>(</span><span class=n>path</span><span class=p>)[</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>lstrip</span><span class=p>(</span><span class=s2>&quot;.&quot;</span><span class=p>)</span>

        <span class=c1># If representation does not have extension then can&#39;t be valid</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>ext</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>False</span>

        <span class=n>valid_extensions_low</span> <span class=o>=</span> <span class=p>{</span><span class=n>ext</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span> <span class=k>for</span> <span class=n>ext</span> <span class=ow>in</span> <span class=bp>cls</span><span class=o>.</span><span class=n>extensions</span><span class=p>}</span>
        <span class=k>return</span> <span class=n>ext</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span> <span class=ow>in</span> <span class=n>valid_extensions_low</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>is_compatible_loader</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>context</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Return whether a loader is compatible with a context.</span>

<span class=sd>        On override make sure it is overridden as class or static method.</span>

<span class=sd>        This checks the product type and the representation for the given</span>
<span class=sd>        loader plugin.</span>

<span class=sd>        Args:</span>
<span class=sd>            context (dict[str, Any]): Documents of context for which should</span>
<span class=sd>                be loader used.</span>

<span class=sd>        Returns:</span>
<span class=sd>            bool: Is loader compatible for context.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>plugin_repre_names</span> <span class=o>=</span> <span class=bp>cls</span><span class=o>.</span><span class=n>get_representations</span><span class=p>()</span>

        <span class=c1># If the product base type isn&#39;t defined on the loader plugin,</span>
        <span class=c1># then we will use the product types.</span>
        <span class=n>plugin_product_filter</span> <span class=o>=</span> <span class=bp>cls</span><span class=o>.</span><span class=n>product_base_types</span>
        <span class=k>if</span> <span class=n>plugin_product_filter</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>plugin_product_filter</span> <span class=o>=</span> <span class=bp>cls</span><span class=o>.</span><span class=n>product_types</span>

        <span class=k>if</span> <span class=n>plugin_product_filter</span><span class=p>:</span>
            <span class=n>plugin_product_filter</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span><span class=n>plugin_product_filter</span><span class=p>)</span>

        <span class=n>repre_entity</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;representation&quot;</span><span class=p>)</span>
        <span class=n>product_entity</span> <span class=o>=</span> <span class=n>context</span><span class=p>[</span><span class=s2>&quot;product&quot;</span><span class=p>]</span>

        <span class=c1># If no representation names, product types or extensions are defined</span>
        <span class=c1># then loader is not compatible with any context.</span>
        <span class=k>if</span> <span class=p>(</span>
            <span class=ow>not</span> <span class=n>plugin_repre_names</span>
            <span class=ow>or</span> <span class=ow>not</span> <span class=n>plugin_product_filter</span>
            <span class=ow>or</span> <span class=ow>not</span> <span class=bp>cls</span><span class=o>.</span><span class=n>extensions</span>
        <span class=p>):</span>
            <span class=k>return</span> <span class=kc>False</span>

        <span class=c1># If no representation entity is provided then loader is not</span>
        <span class=c1># compatible with context.</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>repre_entity</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>False</span>

        <span class=c1># Check the compatibility with the representation names.</span>
        <span class=n>plugin_repre_names</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span><span class=n>plugin_repre_names</span><span class=p>)</span>
        <span class=k>if</span> <span class=p>(</span>
            <span class=s2>&quot;*&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>plugin_repre_names</span>
            <span class=ow>and</span> <span class=n>repre_entity</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>plugin_repre_names</span>
        <span class=p>):</span>
            <span class=k>return</span> <span class=kc>False</span>

        <span class=c1># Check the compatibility with the extension of the representation.</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>cls</span><span class=o>.</span><span class=n>has_valid_extension</span><span class=p>(</span><span class=n>repre_entity</span><span class=p>):</span>
            <span class=k>return</span> <span class=kc>False</span>

        <span class=n>product_type</span> <span class=o>=</span> <span class=n>product_entity</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;productType&quot;</span><span class=p>)</span>
        <span class=n>product_base_type</span> <span class=o>=</span> <span class=n>product_entity</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;productBaseType&quot;</span><span class=p>)</span>

        <span class=c1># Use product base type if defined, otherwise use product type.</span>
        <span class=n>product_filter</span> <span class=o>=</span> <span class=n>product_base_type</span>
        <span class=c1># If there is no product base type defined in the product entity,</span>
        <span class=c1># then we will use the product type.</span>
        <span class=k>if</span> <span class=n>product_filter</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>product_filter</span> <span class=o>=</span> <span class=n>product_type</span>

        <span class=c1># If wildcard is used in product types or base types,</span>
        <span class=c1># then we will consider the loader compatible with any product type.</span>
        <span class=k>if</span> <span class=s2>&quot;*&quot;</span> <span class=ow>in</span> <span class=n>plugin_product_filter</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>True</span>

        <span class=c1># compatibility with legacy loader</span>
        <span class=k>if</span> <span class=bp>cls</span><span class=o>.</span><span class=n>product_base_types</span> <span class=ow>is</span> <span class=kc>None</span> <span class=ow>and</span> <span class=n>product_base_type</span><span class=p>:</span>
            <span class=bp>cls</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>error</span><span class=p>(</span>
                <span class=sa>f</span><span class=s2>&quot;Loader </span><span class=si>{</span><span class=bp>cls</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2> is doesn&#39;t specify &quot;</span>
                <span class=s2>&quot;`product_base_types` but product entity has &quot;</span>
                <span class=sa>f</span><span class=s2>&quot;`productBaseType` defined as `</span><span class=si>{</span><span class=n>product_base_type</span><span class=si>}</span><span class=s2>`. &quot;</span>
            <span class=p>)</span>

        <span class=k>return</span> <span class=n>product_filter</span> <span class=ow>in</span> <span class=n>plugin_product_filter</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>get_representations</span><span class=p>(</span><span class=bp>cls</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Representation names with which is plugin compatible.</span>

<span class=sd>        Empty set makes the plugin incompatible with any representation. To</span>
<span class=sd>            allow compatibility with all representations use &#39;{&quot;*&quot;}&#39;.</span>

<span class=sd>        Returns:</span>
<span class=sd>            set[str]: Names with which is plugin compatible.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>representations</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>filepath_from_context</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>context</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>get_representation_path_from_context</span><span class=p>(</span><span class=n>context</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>load</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>context</span><span class=p>,</span> <span class=n>name</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>namespace</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>options</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Load asset via database</span>

<span class=sd>        Arguments:</span>
<span class=sd>            context (dict): Full parenthood of representation to load</span>
<span class=sd>            name (str, optional): Use pre-defined name</span>
<span class=sd>            namespace (str, optional): Use pre-defined namespace</span>
<span class=sd>            options (dict, optional): Additional settings dictionary</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>raise</span> <span class=ne>NotImplementedError</span><span class=p>(</span><span class=s2>&quot;Loader.load() must be &quot;</span>
                                  <span class=s2>&quot;implemented by subclass&quot;</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>update</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>container</span><span class=p>,</span> <span class=n>context</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Update `container` to `representation`</span>

<span class=sd>        Args:</span>
<span class=sd>            container (avalon-core:container-1.0): Container to update,</span>
<span class=sd>                from `host.ls()`.</span>
<span class=sd>            context (dict): Update the container to this representation.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>raise</span> <span class=ne>NotImplementedError</span><span class=p>(</span><span class=s2>&quot;Loader.update() must be &quot;</span>
                                  <span class=s2>&quot;implemented by subclass&quot;</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>remove</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>container</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Remove a container</span>

<span class=sd>        Arguments:</span>
<span class=sd>            container (avalon-core:container-1.0): Container to remove,</span>
<span class=sd>                from `host.ls()`.</span>

<span class=sd>        Returns:</span>
<span class=sd>            bool: Whether the container was deleted</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>raise</span> <span class=ne>NotImplementedError</span><span class=p>(</span><span class=s2>&quot;Loader.remove() must be &quot;</span>
                                  <span class=s2>&quot;implemented by subclass&quot;</span><span class=p>)</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>get_options</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>contexts</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Returns static (cls) options or could collect from &#39;contexts&#39;.</span>

<span class=sd>        Args:</span>
<span class=sd>            contexts (list): of repre or product contexts</span>
<span class=sd>        Returns:</span>
<span class=sd>            (list)</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>options</span> <span class=ow>or</span> <span class=p>[]</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>get_representation_name_aliases</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>representation_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Return representation names to which switching is allowed from</span>
<span class=sd>        the input representation name, like an alias replacement of the input</span>
<span class=sd>        `representation_name`.</span>

<span class=sd>        For example, to allow an automated switch on update from representation</span>
<span class=sd>        `ma` to `mb` or `abc`, then when `representation_name` is `ma` return:</span>
<span class=sd>            [&quot;mb&quot;, &quot;abc&quot;]</span>

<span class=sd>        The order of the names in the returned representation names is</span>
<span class=sd>        important, because the first one existing under the new version will</span>
<span class=sd>        be chosen.</span>

<span class=sd>        Returns:</span>
<span class=sd>            List[str]: Representation names switching to is allowed on update</span>
<span class=sd>              if the input representation name is not found on the new version.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=p>[]</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.LoaderPlugin.get_options class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_options</span><span class=p>(</span><span class=n>contexts</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Returns static (cls) options or could collect from 'contexts'.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>contexts</code> </td> <td> <code><span title=list>list</span></code> </td> <td> <div class=doc-md-description> <p>of repre or product contexts</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p>Returns: (list)</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/load/plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@classmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>get_options</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>contexts</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Returns static (cls) options or could collect from &#39;contexts&#39;.</span>

<span class=sd>    Args:</span>
<span class=sd>        contexts (list): of repre or product contexts</span>
<span class=sd>    Returns:</span>
<span class=sd>        (list)</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>options</span> <span class=ow>or</span> <span class=p>[]</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.LoaderPlugin.get_representation_name_aliases class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_representation_name_aliases</span><span class=p>(</span><span class=n>representation_name</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Return representation names to which switching is allowed from the input representation name, like an alias replacement of the input <code>representation_name</code>.</p> <p>For example, to allow an automated switch on update from representation <code>ma</code> to <code>mb</code> or <code>abc</code>, then when <code>representation_name</code> is <code>ma</code> return: ["mb", "abc"]</p> <p>The order of the names in the returned representation names is important, because the first one existing under the new version will be chosen.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>List[str]: Representation names switching to is allowed on update if the input representation name is not found on the new version.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/load/plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span>
<span class=normal>277</span>
<span class=normal>278</span>
<span class=normal>279</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@classmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>get_representation_name_aliases</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>representation_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Return representation names to which switching is allowed from</span>
<span class=sd>    the input representation name, like an alias replacement of the input</span>
<span class=sd>    `representation_name`.</span>

<span class=sd>    For example, to allow an automated switch on update from representation</span>
<span class=sd>    `ma` to `mb` or `abc`, then when `representation_name` is `ma` return:</span>
<span class=sd>        [&quot;mb&quot;, &quot;abc&quot;]</span>

<span class=sd>    The order of the names in the returned representation names is</span>
<span class=sd>    important, because the first one existing under the new version will</span>
<span class=sd>    be chosen.</span>

<span class=sd>    Returns:</span>
<span class=sd>        List[str]: Representation names switching to is allowed on update</span>
<span class=sd>          if the input representation name is not found on the new version.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>return</span> <span class=p>[]</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.LoaderPlugin.get_representations class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_representations</span><span class=p>()</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Representation names with which is plugin compatible.</p> <p>Empty set makes the plugin incompatible with any representation. To allow compatibility with all representations use '{"*"}'.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>set[str]: Names with which is plugin compatible.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/load/plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@classmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>get_representations</span><span class=p>(</span><span class=bp>cls</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Representation names with which is plugin compatible.</span>

<span class=sd>    Empty set makes the plugin incompatible with any representation. To</span>
<span class=sd>        allow compatibility with all representations use &#39;{&quot;*&quot;}&#39;.</span>

<span class=sd>    Returns:</span>
<span class=sd>        set[str]: Names with which is plugin compatible.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>representations</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.LoaderPlugin.has_valid_extension class="doc doc-heading"> <code class="highlight language-python"><span class=n>has_valid_extension</span><span class=p>(</span><span class=n>repre_entity</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Has representation document valid extension for loader.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>repre_entity</code> </td> <td> <code><span title=dict>dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Representation entity.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>bool</code></td> <td> </td> <td> <div class=doc-md-description> <p>Representation has valid extension</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/load/plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 76</span>
<span class=normal> 77</span>
<span class=normal> 78</span>
<span class=normal> 79</span>
<span class=normal> 80</span>
<span class=normal> 81</span>
<span class=normal> 82</span>
<span class=normal> 83</span>
<span class=normal> 84</span>
<span class=normal> 85</span>
<span class=normal> 86</span>
<span class=normal> 87</span>
<span class=normal> 88</span>
<span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@classmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>has_valid_extension</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>repre_entity</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Has representation document valid extension for loader.</span>

<span class=sd>    Args:</span>
<span class=sd>        repre_entity (dict[str, Any]): Representation entity.</span>

<span class=sd>    Returns:</span>
<span class=sd>         bool: Representation has valid extension</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=s2>&quot;*&quot;</span> <span class=ow>in</span> <span class=bp>cls</span><span class=o>.</span><span class=n>extensions</span><span class=p>:</span>
        <span class=k>return</span> <span class=kc>True</span>

    <span class=c1># Get representation main file extension from &#39;context&#39;</span>
    <span class=n>repre_context</span> <span class=o>=</span> <span class=n>repre_entity</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;context&quot;</span><span class=p>)</span> <span class=ow>or</span> <span class=p>{}</span>
    <span class=n>ext</span> <span class=o>=</span> <span class=n>repre_context</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;ext&quot;</span><span class=p>)</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>ext</span><span class=p>:</span>
        <span class=c1># Legacy way how to get extensions</span>
        <span class=n>path</span> <span class=o>=</span> <span class=n>repre_entity</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;attrib&quot;</span><span class=p>,</span> <span class=p>{})</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;path&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>path</span><span class=p>:</span>
            <span class=bp>cls</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span>
                <span class=s2>&quot;Representation doesn&#39;t have known source of extension&quot;</span>
                <span class=s2>&quot; information.&quot;</span>
            <span class=p>)</span>
            <span class=k>return</span> <span class=kc>False</span>

        <span class=bp>cls</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Using legacy source of extension from path.&quot;</span><span class=p>)</span>
        <span class=n>ext</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>splitext</span><span class=p>(</span><span class=n>path</span><span class=p>)[</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>lstrip</span><span class=p>(</span><span class=s2>&quot;.&quot;</span><span class=p>)</span>

    <span class=c1># If representation does not have extension then can&#39;t be valid</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>ext</span><span class=p>:</span>
        <span class=k>return</span> <span class=kc>False</span>

    <span class=n>valid_extensions_low</span> <span class=o>=</span> <span class=p>{</span><span class=n>ext</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span> <span class=k>for</span> <span class=n>ext</span> <span class=ow>in</span> <span class=bp>cls</span><span class=o>.</span><span class=n>extensions</span><span class=p>}</span>
    <span class=k>return</span> <span class=n>ext</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span> <span class=ow>in</span> <span class=n>valid_extensions_low</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.LoaderPlugin.is_compatible_loader class="doc doc-heading"> <code class="highlight language-python"><span class=n>is_compatible_loader</span><span class=p>(</span><span class=n>context</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Return whether a loader is compatible with a context.</p> <p>On override make sure it is overridden as class or static method.</p> <p>This checks the product type and the representation for the given loader plugin.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>context</code> </td> <td> <code><span title=dict>dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Documents of context for which should be loader used.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>bool</code></td> <td> </td> <td> <div class=doc-md-description> <p>Is loader compatible for context.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/load/plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@classmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>is_compatible_loader</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>context</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Return whether a loader is compatible with a context.</span>

<span class=sd>    On override make sure it is overridden as class or static method.</span>

<span class=sd>    This checks the product type and the representation for the given</span>
<span class=sd>    loader plugin.</span>

<span class=sd>    Args:</span>
<span class=sd>        context (dict[str, Any]): Documents of context for which should</span>
<span class=sd>            be loader used.</span>

<span class=sd>    Returns:</span>
<span class=sd>        bool: Is loader compatible for context.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>plugin_repre_names</span> <span class=o>=</span> <span class=bp>cls</span><span class=o>.</span><span class=n>get_representations</span><span class=p>()</span>

    <span class=c1># If the product base type isn&#39;t defined on the loader plugin,</span>
    <span class=c1># then we will use the product types.</span>
    <span class=n>plugin_product_filter</span> <span class=o>=</span> <span class=bp>cls</span><span class=o>.</span><span class=n>product_base_types</span>
    <span class=k>if</span> <span class=n>plugin_product_filter</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>plugin_product_filter</span> <span class=o>=</span> <span class=bp>cls</span><span class=o>.</span><span class=n>product_types</span>

    <span class=k>if</span> <span class=n>plugin_product_filter</span><span class=p>:</span>
        <span class=n>plugin_product_filter</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span><span class=n>plugin_product_filter</span><span class=p>)</span>

    <span class=n>repre_entity</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;representation&quot;</span><span class=p>)</span>
    <span class=n>product_entity</span> <span class=o>=</span> <span class=n>context</span><span class=p>[</span><span class=s2>&quot;product&quot;</span><span class=p>]</span>

    <span class=c1># If no representation names, product types or extensions are defined</span>
    <span class=c1># then loader is not compatible with any context.</span>
    <span class=k>if</span> <span class=p>(</span>
        <span class=ow>not</span> <span class=n>plugin_repre_names</span>
        <span class=ow>or</span> <span class=ow>not</span> <span class=n>plugin_product_filter</span>
        <span class=ow>or</span> <span class=ow>not</span> <span class=bp>cls</span><span class=o>.</span><span class=n>extensions</span>
    <span class=p>):</span>
        <span class=k>return</span> <span class=kc>False</span>

    <span class=c1># If no representation entity is provided then loader is not</span>
    <span class=c1># compatible with context.</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>repre_entity</span><span class=p>:</span>
        <span class=k>return</span> <span class=kc>False</span>

    <span class=c1># Check the compatibility with the representation names.</span>
    <span class=n>plugin_repre_names</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span><span class=n>plugin_repre_names</span><span class=p>)</span>
    <span class=k>if</span> <span class=p>(</span>
        <span class=s2>&quot;*&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>plugin_repre_names</span>
        <span class=ow>and</span> <span class=n>repre_entity</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>plugin_repre_names</span>
    <span class=p>):</span>
        <span class=k>return</span> <span class=kc>False</span>

    <span class=c1># Check the compatibility with the extension of the representation.</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=bp>cls</span><span class=o>.</span><span class=n>has_valid_extension</span><span class=p>(</span><span class=n>repre_entity</span><span class=p>):</span>
        <span class=k>return</span> <span class=kc>False</span>

    <span class=n>product_type</span> <span class=o>=</span> <span class=n>product_entity</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;productType&quot;</span><span class=p>)</span>
    <span class=n>product_base_type</span> <span class=o>=</span> <span class=n>product_entity</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;productBaseType&quot;</span><span class=p>)</span>

    <span class=c1># Use product base type if defined, otherwise use product type.</span>
    <span class=n>product_filter</span> <span class=o>=</span> <span class=n>product_base_type</span>
    <span class=c1># If there is no product base type defined in the product entity,</span>
    <span class=c1># then we will use the product type.</span>
    <span class=k>if</span> <span class=n>product_filter</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>product_filter</span> <span class=o>=</span> <span class=n>product_type</span>

    <span class=c1># If wildcard is used in product types or base types,</span>
    <span class=c1># then we will consider the loader compatible with any product type.</span>
    <span class=k>if</span> <span class=s2>&quot;*&quot;</span> <span class=ow>in</span> <span class=n>plugin_product_filter</span><span class=p>:</span>
        <span class=k>return</span> <span class=kc>True</span>

    <span class=c1># compatibility with legacy loader</span>
    <span class=k>if</span> <span class=bp>cls</span><span class=o>.</span><span class=n>product_base_types</span> <span class=ow>is</span> <span class=kc>None</span> <span class=ow>and</span> <span class=n>product_base_type</span><span class=p>:</span>
        <span class=bp>cls</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>error</span><span class=p>(</span>
            <span class=sa>f</span><span class=s2>&quot;Loader </span><span class=si>{</span><span class=bp>cls</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2> is doesn&#39;t specify &quot;</span>
            <span class=s2>&quot;`product_base_types` but product entity has &quot;</span>
            <span class=sa>f</span><span class=s2>&quot;`productBaseType` defined as `</span><span class=si>{</span><span class=n>product_base_type</span><span class=si>}</span><span class=s2>`. &quot;</span>
        <span class=p>)</span>

    <span class=k>return</span> <span class=n>product_filter</span> <span class=ow>in</span> <span class=n>plugin_product_filter</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.LoaderPlugin.load class="doc doc-heading"> <code class="highlight language-python"><span class=n>load</span><span class=p>(</span><span class=n>context</span><span class=p>,</span> <span class=n>name</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>namespace</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>options</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Load asset via database</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>context</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>Full parenthood of representation to load</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Use pre-defined name</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>namespace</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Use pre-defined namespace</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>options</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>Additional settings dictionary</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/load/plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>load</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>context</span><span class=p>,</span> <span class=n>name</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>namespace</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>options</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Load asset via database</span>

<span class=sd>    Arguments:</span>
<span class=sd>        context (dict): Full parenthood of representation to load</span>
<span class=sd>        name (str, optional): Use pre-defined name</span>
<span class=sd>        namespace (str, optional): Use pre-defined namespace</span>
<span class=sd>        options (dict, optional): Additional settings dictionary</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>raise</span> <span class=ne>NotImplementedError</span><span class=p>(</span><span class=s2>&quot;Loader.load() must be &quot;</span>
                              <span class=s2>&quot;implemented by subclass&quot;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.LoaderPlugin.remove class="doc doc-heading"> <code class="highlight language-python"><span class=n>remove</span><span class=p>(</span><span class=n>container</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Remove a container</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>container (avalon-core</code> </td> <td> </td> <td> <div class=doc-md-description> <p>container-1.0): Container to remove, from <code>host.ls()</code>.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>bool</code></td> <td> </td> <td> <div class=doc-md-description> <p>Whether the container was deleted</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/load/plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>remove</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>container</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Remove a container</span>

<span class=sd>    Arguments:</span>
<span class=sd>        container (avalon-core:container-1.0): Container to remove,</span>
<span class=sd>            from `host.ls()`.</span>

<span class=sd>    Returns:</span>
<span class=sd>        bool: Whether the container was deleted</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>raise</span> <span class=ne>NotImplementedError</span><span class=p>(</span><span class=s2>&quot;Loader.remove() must be &quot;</span>
                              <span class=s2>&quot;implemented by subclass&quot;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.LoaderPlugin.update class="doc doc-heading"> <code class="highlight language-python"><span class=n>update</span><span class=p>(</span><span class=n>container</span><span class=p>,</span> <span class=n>context</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Update <code>container</code> to <code>representation</code></p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>container (avalon-core</code> </td> <td> </td> <td> <div class=doc-md-description> <p>container-1.0): Container to update, from <code>host.ls()</code>.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>context</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>Update the container to this representation.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/load/plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>update</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>container</span><span class=p>,</span> <span class=n>context</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Update `container` to `representation`</span>

<span class=sd>    Args:</span>
<span class=sd>        container (avalon-core:container-1.0): Container to update,</span>
<span class=sd>            from `host.ls()`.</span>
<span class=sd>        context (dict): Update the container to this representation.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>raise</span> <span class=ne>NotImplementedError</span><span class=p>(</span><span class=s2>&quot;Loader.update() must be &quot;</span>
                              <span class=s2>&quot;implemented by subclass&quot;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.OptionalPyblishPluginMixin class="doc doc-heading"> <code>OptionalPyblishPluginMixin</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="AYONPyblishPluginMixin (client.ayon_core.pipeline.publish.publish_plugins.AYONPyblishPluginMixin)" href=publish/publish_plugins.html#client.ayon_core.pipeline.publish.publish_plugins.AYONPyblishPluginMixin>AYONPyblishPluginMixin</a></code></p> <p>Prepare mixin for optional plugins.</p> <p>Defined active attribute definition prepared for published and prepares method which will check if is active or not.</p> <pre><code>class ValidateScene(
    pyblish.api.InstancePlugin, OptionalPyblishPluginMixin
):
    def process(self, instance):
        # Skip the instance if is not active by data on the instance
        if not self.is_active(instance.data):
            return
</code></pre> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/publish_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>278</span>
<span class=normal>279</span>
<span class=normal>280</span>
<span class=normal>281</span>
<span class=normal>282</span>
<span class=normal>283</span>
<span class=normal>284</span>
<span class=normal>285</span>
<span class=normal>286</span>
<span class=normal>287</span>
<span class=normal>288</span>
<span class=normal>289</span>
<span class=normal>290</span>
<span class=normal>291</span>
<span class=normal>292</span>
<span class=normal>293</span>
<span class=normal>294</span>
<span class=normal>295</span>
<span class=normal>296</span>
<span class=normal>297</span>
<span class=normal>298</span>
<span class=normal>299</span>
<span class=normal>300</span>
<span class=normal>301</span>
<span class=normal>302</span>
<span class=normal>303</span>
<span class=normal>304</span>
<span class=normal>305</span>
<span class=normal>306</span>
<span class=normal>307</span>
<span class=normal>308</span>
<span class=normal>309</span>
<span class=normal>310</span>
<span class=normal>311</span>
<span class=normal>312</span>
<span class=normal>313</span>
<span class=normal>314</span>
<span class=normal>315</span>
<span class=normal>316</span>
<span class=normal>317</span>
<span class=normal>318</span>
<span class=normal>319</span>
<span class=normal>320</span>
<span class=normal>321</span>
<span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span>
<span class=normal>325</span>
<span class=normal>326</span>
<span class=normal>327</span>
<span class=normal>328</span>
<span class=normal>329</span>
<span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>OptionalPyblishPluginMixin</span><span class=p>(</span><span class=n>AYONPyblishPluginMixin</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Prepare mixin for optional plugins.</span>

<span class=sd>    Defined active attribute definition prepared for published and</span>
<span class=sd>    prepares method which will check if is active or not.</span>

<span class=sd>    ```</span>
<span class=sd>    class ValidateScene(</span>
<span class=sd>        pyblish.api.InstancePlugin, OptionalPyblishPluginMixin</span>
<span class=sd>    ):</span>
<span class=sd>        def process(self, instance):</span>
<span class=sd>            # Skip the instance if is not active by data on the instance</span>
<span class=sd>            if not self.is_active(instance.data):</span>
<span class=sd>                return</span>
<span class=sd>    ```</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=c1># Allow exposing tooltip from class with `optional_tooltip` attribute</span>
    <span class=n>optional_tooltip</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>get_attribute_defs</span><span class=p>(</span><span class=bp>cls</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Attribute definitions based on plugin&#39;s optional attribute.&quot;&quot;&quot;</span>

        <span class=c1># Empty list if plugin is not optional</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=nb>getattr</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=s2>&quot;optional&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>):</span>
            <span class=k>return</span> <span class=p>[]</span>

        <span class=c1># Get active value from class as default value</span>
        <span class=n>active</span> <span class=o>=</span> <span class=nb>getattr</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=s2>&quot;active&quot;</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>
        <span class=c1># Return boolean stored under &#39;active&#39; key with label of the class name</span>
        <span class=n>label</span> <span class=o>=</span> <span class=bp>cls</span><span class=o>.</span><span class=n>label</span> <span class=ow>or</span> <span class=bp>cls</span><span class=o>.</span><span class=vm>__name__</span>

        <span class=k>return</span> <span class=p>[</span>
            <span class=n>BoolDef</span><span class=p>(</span>
                <span class=s2>&quot;active&quot;</span><span class=p>,</span>
                <span class=n>default</span><span class=o>=</span><span class=n>active</span><span class=p>,</span>
                <span class=n>label</span><span class=o>=</span><span class=n>label</span><span class=p>,</span>
                <span class=n>tooltip</span><span class=o>=</span><span class=bp>cls</span><span class=o>.</span><span class=n>optional_tooltip</span><span class=p>,</span>
            <span class=p>)</span>
        <span class=p>]</span>

    <span class=k>def</span><span class=w> </span><span class=nf>is_active</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>data</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Check if plugins is active for instance/context based on their data.</span>

<span class=sd>        Args:</span>
<span class=sd>            data(dict): Data from instance or context.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=c1># Skip if is not optional and return True</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=nb>getattr</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=s2>&quot;optional&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>):</span>
            <span class=k>return</span> <span class=kc>True</span>
        <span class=n>attr_values</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_attr_values_from_data</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
        <span class=n>active</span> <span class=o>=</span> <span class=n>attr_values</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;active&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>active</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>active</span> <span class=o>=</span> <span class=nb>getattr</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=s2>&quot;active&quot;</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>active</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.OptionalPyblishPluginMixin.get_attribute_defs class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_attribute_defs</span><span class=p>()</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Attribute definitions based on plugin's optional attribute.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/publish_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>298</span>
<span class=normal>299</span>
<span class=normal>300</span>
<span class=normal>301</span>
<span class=normal>302</span>
<span class=normal>303</span>
<span class=normal>304</span>
<span class=normal>305</span>
<span class=normal>306</span>
<span class=normal>307</span>
<span class=normal>308</span>
<span class=normal>309</span>
<span class=normal>310</span>
<span class=normal>311</span>
<span class=normal>312</span>
<span class=normal>313</span>
<span class=normal>314</span>
<span class=normal>315</span>
<span class=normal>316</span>
<span class=normal>317</span>
<span class=normal>318</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@classmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>get_attribute_defs</span><span class=p>(</span><span class=bp>cls</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Attribute definitions based on plugin&#39;s optional attribute.&quot;&quot;&quot;</span>

    <span class=c1># Empty list if plugin is not optional</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=nb>getattr</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=s2>&quot;optional&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>):</span>
        <span class=k>return</span> <span class=p>[]</span>

    <span class=c1># Get active value from class as default value</span>
    <span class=n>active</span> <span class=o>=</span> <span class=nb>getattr</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=s2>&quot;active&quot;</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>
    <span class=c1># Return boolean stored under &#39;active&#39; key with label of the class name</span>
    <span class=n>label</span> <span class=o>=</span> <span class=bp>cls</span><span class=o>.</span><span class=n>label</span> <span class=ow>or</span> <span class=bp>cls</span><span class=o>.</span><span class=vm>__name__</span>

    <span class=k>return</span> <span class=p>[</span>
        <span class=n>BoolDef</span><span class=p>(</span>
            <span class=s2>&quot;active&quot;</span><span class=p>,</span>
            <span class=n>default</span><span class=o>=</span><span class=n>active</span><span class=p>,</span>
            <span class=n>label</span><span class=o>=</span><span class=n>label</span><span class=p>,</span>
            <span class=n>tooltip</span><span class=o>=</span><span class=bp>cls</span><span class=o>.</span><span class=n>optional_tooltip</span><span class=p>,</span>
        <span class=p>)</span>
    <span class=p>]</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.OptionalPyblishPluginMixin.is_active class="doc doc-heading"> <code class="highlight language-python"><span class=n>is_active</span><span class=p>(</span><span class=n>data</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Check if plugins is active for instance/context based on their data.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>data</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>Data from instance or context.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/publish_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>320</span>
<span class=normal>321</span>
<span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span>
<span class=normal>325</span>
<span class=normal>326</span>
<span class=normal>327</span>
<span class=normal>328</span>
<span class=normal>329</span>
<span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>is_active</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>data</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Check if plugins is active for instance/context based on their data.</span>

<span class=sd>    Args:</span>
<span class=sd>        data(dict): Data from instance or context.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=c1># Skip if is not optional and return True</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=nb>getattr</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=s2>&quot;optional&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>):</span>
        <span class=k>return</span> <span class=kc>True</span>
    <span class=n>attr_values</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_attr_values_from_data</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
    <span class=n>active</span> <span class=o>=</span> <span class=n>attr_values</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;active&quot;</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>active</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>active</span> <span class=o>=</span> <span class=nb>getattr</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=s2>&quot;active&quot;</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>active</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.ProductLoaderPlugin class="doc doc-heading"> <code>ProductLoaderPlugin</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="LoaderPlugin (client.ayon_core.pipeline.load.plugins.LoaderPlugin)" href=load/plugins.html#client.ayon_core.pipeline.load.plugins.LoaderPlugin>LoaderPlugin</a></code></p> <p>Load product into host application Arguments: context (dict): avalon-core:context-1.0 name (str, optional): Use pre-defined name namespace (str, optional): Use pre-defined namespace</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/load/plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>282</span>
<span class=normal>283</span>
<span class=normal>284</span>
<span class=normal>285</span>
<span class=normal>286</span>
<span class=normal>287</span>
<span class=normal>288</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>ProductLoaderPlugin</span><span class=p>(</span><span class=n>LoaderPlugin</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Load product into host application</span>
<span class=sd>    Arguments:</span>
<span class=sd>        context (dict): avalon-core:context-1.0</span>
<span class=sd>        name (str, optional): Use pre-defined name</span>
<span class=sd>        namespace (str, optional): Use pre-defined namespace</span>
<span class=sd>    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.PublishError class="doc doc-heading"> <code>PublishError</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=Exception>Exception</span></code></p> <p>Publishing crashed because of known error.</p> <p>Message will be shown in UI for artist.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>message</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Message of error. Short explanation an issue.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>title</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Title showed in UI.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>description</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Detailed description of an error. It is possible to use Markdown syntax.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/publish_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span>
<span class=normal>62</span>
<span class=normal>63</span>
<span class=normal>64</span>
<span class=normal>65</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>PublishError</span><span class=p>(</span><span class=ne>Exception</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Publishing crashed because of known error.</span>

<span class=sd>    Message will be shown in UI for artist.</span>

<span class=sd>    Args:</span>
<span class=sd>        message (str): Message of error. Short explanation an issue.</span>
<span class=sd>        title (Optional[str]): Title showed in UI.</span>
<span class=sd>        description (Optional[str]): Detailed description of an error.</span>
<span class=sd>            It is possible to use Markdown syntax.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>message</span><span class=p>,</span> <span class=n>title</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>description</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>detail</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>message</span> <span class=o>=</span> <span class=n>message</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>title</span> <span class=o>=</span> <span class=n>title</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>description</span> <span class=o>=</span> <span class=n>description</span> <span class=ow>or</span> <span class=n>message</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>detail</span> <span class=o>=</span> <span class=n>detail</span>
        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>message</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.PublishValidationError class="doc doc-heading"> <code>PublishValidationError</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="PublishError (client.ayon_core.pipeline.publish.publish_plugins.PublishError)" href=publish/publish_plugins.html#client.ayon_core.pipeline.publish.publish_plugins.PublishError>PublishError</a></code></p> <p>Validation error happened during publishing.</p> <p>This exception should be used when validation publishing failed.</p> <p>Publishing does not stop during validation order if this exception is raised.</p> <p>Has additional UI specific attributes that may be handy for artist.</p> <p>Argument 'title' is used to group errors.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/publish_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>68</span>
<span class=normal>69</span>
<span class=normal>70</span>
<span class=normal>71</span>
<span class=normal>72</span>
<span class=normal>73</span>
<span class=normal>74</span>
<span class=normal>75</span>
<span class=normal>76</span>
<span class=normal>77</span>
<span class=normal>78</span>
<span class=normal>79</span>
<span class=normal>80</span>
<span class=normal>81</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>PublishValidationError</span><span class=p>(</span><span class=n>PublishError</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Validation error happened during publishing.</span>

<span class=sd>    This exception should be used when validation publishing failed.</span>

<span class=sd>    Publishing does not stop during validation order if this</span>
<span class=sd>        exception is raised.</span>

<span class=sd>    Has additional UI specific attributes that may be handy for artist.</span>

<span class=sd>    Argument &#39;title&#39; is used to group errors.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.get_current_host_name class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_current_host_name</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>Current host name.</p> <p>Function is based on currently registered host integration or environment variable 'AYON_HOST_NAME'.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Union[str, None]: Name of host integration in current process or None.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/context_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>302</span>
<span class=normal>303</span>
<span class=normal>304</span>
<span class=normal>305</span>
<span class=normal>306</span>
<span class=normal>307</span>
<span class=normal>308</span>
<span class=normal>309</span>
<span class=normal>310</span>
<span class=normal>311</span>
<span class=normal>312</span>
<span class=normal>313</span>
<span class=normal>314</span>
<span class=normal>315</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_current_host_name</span><span class=p>():</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Current host name.</span>

<span class=sd>    Function is based on currently registered host integration or environment</span>
<span class=sd>    variable &#39;AYON_HOST_NAME&#39;.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Union[str, None]: Name of host integration in current process or None.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>host</span> <span class=o>=</span> <span class=n>registered_host</span><span class=p>()</span>
    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>host</span><span class=p>,</span> <span class=n>AbstractHost</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>host</span><span class=o>.</span><span class=n>name</span>
    <span class=k>return</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AYON_HOST_NAME&quot;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.get_global_context class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_global_context</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>Global context defined in environment variables.</p> <p>Values here may not reflect current context of host integration. The function can be used on startup before a host is registered.</p> <p>Use 'get_current_context' to make sure you'll get current host integration context info.</p> <p>Example::</p> <pre><code>{
    "project_name": "Commercial",
    "folder_path": "Bunny",
    "task_name": "Animation",
}
</code></pre> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>dict[str, Union[str, None]]: Context defined with environment variables.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/context_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>318</span>
<span class=normal>319</span>
<span class=normal>320</span>
<span class=normal>321</span>
<span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span>
<span class=normal>325</span>
<span class=normal>326</span>
<span class=normal>327</span>
<span class=normal>328</span>
<span class=normal>329</span>
<span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span>
<span class=normal>334</span>
<span class=normal>335</span>
<span class=normal>336</span>
<span class=normal>337</span>
<span class=normal>338</span>
<span class=normal>339</span>
<span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span>
<span class=normal>344</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_global_context</span><span class=p>():</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Global context defined in environment variables.</span>

<span class=sd>    Values here may not reflect current context of host integration. The</span>
<span class=sd>    function can be used on startup before a host is registered.</span>

<span class=sd>    Use &#39;get_current_context&#39; to make sure you&#39;ll get current host integration</span>
<span class=sd>    context info.</span>

<span class=sd>    Example::</span>

<span class=sd>        {</span>
<span class=sd>            &quot;project_name&quot;: &quot;Commercial&quot;,</span>
<span class=sd>            &quot;folder_path&quot;: &quot;Bunny&quot;,</span>
<span class=sd>            &quot;task_name&quot;: &quot;Animation&quot;,</span>
<span class=sd>        }</span>

<span class=sd>    Returns:</span>
<span class=sd>        dict[str, Union[str, None]]: Context defined with environment</span>
<span class=sd>            variables.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=p>{</span>
        <span class=s2>&quot;project_name&quot;</span><span class=p>:</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AYON_PROJECT_NAME&quot;</span><span class=p>),</span>
        <span class=s2>&quot;folder_path&quot;</span><span class=p>:</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AYON_FOLDER_PATH&quot;</span><span class=p>),</span>
        <span class=s2>&quot;task_name&quot;</span><span class=p>:</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AYON_TASK_NAME&quot;</span><span class=p>),</span>
    <span class=p>}</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.get_process_id class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_process_id</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>Fake process id created on demand using uuid.</p> <p>Can be used to create process specific folders in temp directory.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>Process id.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/context_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>592</span>
<span class=normal>593</span>
<span class=normal>594</span>
<span class=normal>595</span>
<span class=normal>596</span>
<span class=normal>597</span>
<span class=normal>598</span>
<span class=normal>599</span>
<span class=normal>600</span>
<span class=normal>601</span>
<span class=normal>602</span>
<span class=normal>603</span>
<span class=normal>604</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_process_id</span><span class=p>():</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Fake process id created on demand using uuid.</span>

<span class=sd>    Can be used to create process specific folders in temp directory.</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: Process id.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>global</span> <span class=n>_process_id</span>
    <span class=k>if</span> <span class=n>_process_id</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>_process_id</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>())</span>
    <span class=k>return</span> <span class=n>_process_id</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.get_repres_contexts class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_repres_contexts</span><span class=p>(</span><span class=n>representation_ids</span><span class=p>,</span> <span class=n>project_name</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Return parenthood context for representation.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>representation_ids</code> </td> <td> <code><span title=list>list</span></code> </td> <td> <div class=doc-md-description> <p>The representation ids.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>project_name</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Project name.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>dict</code></td> <td> </td> <td> <div class=doc-md-description> <p>The full representation context by representation id. keys are repre_id, value is dictionary with entities of folder, product, version and representation.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/load/utils.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 78</span>
<span class=normal> 79</span>
<span class=normal> 80</span>
<span class=normal> 81</span>
<span class=normal> 82</span>
<span class=normal> 83</span>
<span class=normal> 84</span>
<span class=normal> 85</span>
<span class=normal> 86</span>
<span class=normal> 87</span>
<span class=normal> 88</span>
<span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_repres_contexts</span><span class=p>(</span><span class=n>representation_ids</span><span class=p>,</span> <span class=n>project_name</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Return parenthood context for representation.</span>

<span class=sd>    Args:</span>
<span class=sd>        representation_ids (list): The representation ids.</span>
<span class=sd>        project_name (Optional[str]): Project name.</span>

<span class=sd>    Returns:</span>
<span class=sd>        dict: The full representation context by representation id.</span>
<span class=sd>            keys are repre_id, value is dictionary with entities of</span>
<span class=sd>            folder, product, version and representation.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=kn>from</span><span class=w> </span><span class=nn>ayon_core.pipeline</span><span class=w> </span><span class=kn>import</span> <span class=n>get_current_project_name</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>representation_ids</span><span class=p>:</span>
        <span class=k>return</span> <span class=p>{}</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>project_name</span><span class=p>:</span>
        <span class=n>project_name</span> <span class=o>=</span> <span class=n>get_current_project_name</span><span class=p>()</span>

    <span class=n>repre_entities</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_representations</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span> <span class=n>representation_ids</span>
    <span class=p>)</span>

    <span class=k>return</span> <span class=n>get_representation_contexts</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=n>repre_entities</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.get_representation_context class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_representation_context</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=n>representation</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Return parenthood context for representation.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>project_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Project name.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>representation</code> </td> <td> <code><span title=typing.Union>Union</span>[<span title=dict>dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>], <span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Representation entity or representation id.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>dict[str, dict[str, Any]]: The full representation context.</p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=ValueError>ValueError</span></code> </td> <td> <div class=doc-md-description> <p>When representation is invalid or parents were not found.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/load/utils.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span>
<span class=normal>277</span>
<span class=normal>278</span>
<span class=normal>279</span>
<span class=normal>280</span>
<span class=normal>281</span>
<span class=normal>282</span>
<span class=normal>283</span>
<span class=normal>284</span>
<span class=normal>285</span>
<span class=normal>286</span>
<span class=normal>287</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_representation_context</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=n>representation</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Return parenthood context for representation.</span>

<span class=sd>    Args:</span>
<span class=sd>        project_name (str): Project name.</span>
<span class=sd>        representation (Union[dict[str, Any], str]): Representation entity</span>
<span class=sd>            or representation id.</span>

<span class=sd>    Returns:</span>
<span class=sd>        dict[str, dict[str, Any]]: The full representation context.</span>

<span class=sd>    Raises:</span>
<span class=sd>        ValueError: When representation is invalid or parents were not found.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>representation</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
            <span class=s2>&quot;Invalid argument value </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>representation</span><span class=p>))</span>
        <span class=p>)</span>

    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>representation</span><span class=p>,</span> <span class=nb>dict</span><span class=p>):</span>
        <span class=n>repre_entity</span> <span class=o>=</span> <span class=n>representation</span>
        <span class=n>repre_id</span> <span class=o>=</span> <span class=n>repre_entity</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]</span>
        <span class=n>context</span> <span class=o>=</span> <span class=n>get_representation_contexts</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span> <span class=p>[</span><span class=n>repre_entity</span><span class=p>]</span>
        <span class=p>)[</span><span class=n>repre_id</span><span class=p>]</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=n>repre_id</span> <span class=o>=</span> <span class=n>representation</span>
        <span class=n>context</span> <span class=o>=</span> <span class=n>get_representation_contexts_by_ids</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span> <span class=p>{</span><span class=n>repre_id</span><span class=p>}</span>
        <span class=p>)[</span><span class=n>repre_id</span><span class=p>]</span>

    <span class=n>missing_entities</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>context</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
        <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>missing_entities</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>missing_entities</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
            <span class=s2>&quot;Not able to receive representation parent types: </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                <span class=s2>&quot;, &quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>missing_entities</span><span class=p>)</span>
            <span class=p>)</span>
        <span class=p>)</span>

    <span class=k>return</span> <span class=n>context</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.get_representation_path class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_representation_path</span><span class=p>(</span><span class=n>representation</span><span class=p>,</span> <span class=n>root</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Get filename from representation document</p> <p>There are three ways of getting the path from representation which are tried in following sequence until successful. 1. Get template from representation['data']['template'] and data from representation['context']. Then format template with the data. 2. Get template from project['config'] and format it with default data set 3. Get representation['data']['path'] and use it directly</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>representation</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>representation document from the database</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>fullpath of the representation</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/load/utils.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>706</span>
<span class=normal>707</span>
<span class=normal>708</span>
<span class=normal>709</span>
<span class=normal>710</span>
<span class=normal>711</span>
<span class=normal>712</span>
<span class=normal>713</span>
<span class=normal>714</span>
<span class=normal>715</span>
<span class=normal>716</span>
<span class=normal>717</span>
<span class=normal>718</span>
<span class=normal>719</span>
<span class=normal>720</span>
<span class=normal>721</span>
<span class=normal>722</span>
<span class=normal>723</span>
<span class=normal>724</span>
<span class=normal>725</span>
<span class=normal>726</span>
<span class=normal>727</span>
<span class=normal>728</span>
<span class=normal>729</span>
<span class=normal>730</span>
<span class=normal>731</span>
<span class=normal>732</span>
<span class=normal>733</span>
<span class=normal>734</span>
<span class=normal>735</span>
<span class=normal>736</span>
<span class=normal>737</span>
<span class=normal>738</span>
<span class=normal>739</span>
<span class=normal>740</span>
<span class=normal>741</span>
<span class=normal>742</span>
<span class=normal>743</span>
<span class=normal>744</span>
<span class=normal>745</span>
<span class=normal>746</span>
<span class=normal>747</span>
<span class=normal>748</span>
<span class=normal>749</span>
<span class=normal>750</span>
<span class=normal>751</span>
<span class=normal>752</span>
<span class=normal>753</span>
<span class=normal>754</span>
<span class=normal>755</span>
<span class=normal>756</span>
<span class=normal>757</span>
<span class=normal>758</span>
<span class=normal>759</span>
<span class=normal>760</span>
<span class=normal>761</span>
<span class=normal>762</span>
<span class=normal>763</span>
<span class=normal>764</span>
<span class=normal>765</span>
<span class=normal>766</span>
<span class=normal>767</span>
<span class=normal>768</span>
<span class=normal>769</span>
<span class=normal>770</span>
<span class=normal>771</span>
<span class=normal>772</span>
<span class=normal>773</span>
<span class=normal>774</span>
<span class=normal>775</span>
<span class=normal>776</span>
<span class=normal>777</span>
<span class=normal>778</span>
<span class=normal>779</span>
<span class=normal>780</span>
<span class=normal>781</span>
<span class=normal>782</span>
<span class=normal>783</span>
<span class=normal>784</span>
<span class=normal>785</span>
<span class=normal>786</span>
<span class=normal>787</span>
<span class=normal>788</span>
<span class=normal>789</span>
<span class=normal>790</span>
<span class=normal>791</span>
<span class=normal>792</span>
<span class=normal>793</span>
<span class=normal>794</span>
<span class=normal>795</span>
<span class=normal>796</span>
<span class=normal>797</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_representation_path</span><span class=p>(</span><span class=n>representation</span><span class=p>,</span> <span class=n>root</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get filename from representation document</span>

<span class=sd>    There are three ways of getting the path from representation which are</span>
<span class=sd>    tried in following sequence until successful.</span>
<span class=sd>    1. Get template from representation[&#39;data&#39;][&#39;template&#39;] and data from</span>
<span class=sd>       representation[&#39;context&#39;]. Then format template with the data.</span>
<span class=sd>    2. Get template from project[&#39;config&#39;] and format it with default data set</span>
<span class=sd>    3. Get representation[&#39;data&#39;][&#39;path&#39;] and use it directly</span>

<span class=sd>    Args:</span>
<span class=sd>        representation(dict): representation document from the database</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: fullpath of the representation</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=n>root</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=kn>from</span><span class=w> </span><span class=nn>ayon_core.pipeline</span><span class=w> </span><span class=kn>import</span> <span class=n>get_current_project_name</span><span class=p>,</span> <span class=n>Anatomy</span>

        <span class=n>anatomy</span> <span class=o>=</span> <span class=n>Anatomy</span><span class=p>(</span><span class=n>get_current_project_name</span><span class=p>())</span>
        <span class=k>return</span> <span class=n>get_representation_path_with_anatomy</span><span class=p>(</span>
            <span class=n>representation</span><span class=p>,</span> <span class=n>anatomy</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>path_from_representation</span><span class=p>():</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=n>template</span> <span class=o>=</span> <span class=n>representation</span><span class=p>[</span><span class=s2>&quot;attrib&quot;</span><span class=p>][</span><span class=s2>&quot;template&quot;</span><span class=p>]</span>
        <span class=k>except</span> <span class=ne>KeyError</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>None</span>

        <span class=k>try</span><span class=p>:</span>
            <span class=n>context</span> <span class=o>=</span> <span class=n>representation</span><span class=p>[</span><span class=s2>&quot;context&quot;</span><span class=p>]</span>

            <span class=n>_fix_representation_context_compatibility</span><span class=p>(</span><span class=n>context</span><span class=p>)</span>

            <span class=n>context</span><span class=p>[</span><span class=s2>&quot;root&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>root</span>
            <span class=n>path</span> <span class=o>=</span> <span class=n>StringTemplate</span><span class=o>.</span><span class=n>format_strict_template</span><span class=p>(</span>
                <span class=n>template</span><span class=p>,</span> <span class=n>context</span>
            <span class=p>)</span>
            <span class=c1># Force replacing backslashes with forward slashed if not on</span>
            <span class=c1>#   windows</span>
            <span class=k>if</span> <span class=n>platform</span><span class=o>.</span><span class=n>system</span><span class=p>()</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span> <span class=o>!=</span> <span class=s2>&quot;windows&quot;</span><span class=p>:</span>
                <span class=n>path</span> <span class=o>=</span> <span class=n>path</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s2>&quot;</span><span class=se>\\</span><span class=s2>&quot;</span><span class=p>,</span> <span class=s2>&quot;/&quot;</span><span class=p>)</span>
        <span class=k>except</span> <span class=p>(</span><span class=n>TemplateUnsolved</span><span class=p>,</span> <span class=ne>KeyError</span><span class=p>):</span>
            <span class=c1># Template references unavailable data</span>
            <span class=k>return</span> <span class=kc>None</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>path</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>path</span>

        <span class=n>normalized_path</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>normpath</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>normalized_path</span><span class=p>):</span>
            <span class=k>return</span> <span class=n>normalized_path</span>
        <span class=k>return</span> <span class=n>path</span>

    <span class=k>def</span><span class=w> </span><span class=nf>path_from_data</span><span class=p>():</span>
        <span class=k>if</span> <span class=s2>&quot;path&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>representation</span><span class=p>[</span><span class=s2>&quot;attrib&quot;</span><span class=p>]:</span>
            <span class=k>return</span> <span class=kc>None</span>

        <span class=n>path</span> <span class=o>=</span> <span class=n>representation</span><span class=p>[</span><span class=s2>&quot;attrib&quot;</span><span class=p>][</span><span class=s2>&quot;path&quot;</span><span class=p>]</span>
        <span class=c1># Force replacing backslashes with forward slashed if not on</span>
        <span class=c1>#   windows</span>
        <span class=k>if</span> <span class=n>platform</span><span class=o>.</span><span class=n>system</span><span class=p>()</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span> <span class=o>!=</span> <span class=s2>&quot;windows&quot;</span><span class=p>:</span>
            <span class=n>path</span> <span class=o>=</span> <span class=n>path</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s2>&quot;</span><span class=se>\\</span><span class=s2>&quot;</span><span class=p>,</span> <span class=s2>&quot;/&quot;</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>path</span><span class=p>):</span>
            <span class=k>return</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>normpath</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>

        <span class=n>dir_path</span><span class=p>,</span> <span class=n>file_name</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>dir_path</span><span class=p>):</span>
            <span class=k>return</span> <span class=kc>None</span>

        <span class=n>base_name</span><span class=p>,</span> <span class=n>ext</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>splitext</span><span class=p>(</span><span class=n>file_name</span><span class=p>)</span>
        <span class=n>file_name_items</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=k>if</span> <span class=s2>&quot;#&quot;</span> <span class=ow>in</span> <span class=n>base_name</span><span class=p>:</span>
            <span class=n>file_name_items</span> <span class=o>=</span> <span class=p>[</span><span class=n>part</span> <span class=k>for</span> <span class=n>part</span> <span class=ow>in</span> <span class=n>base_name</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s2>&quot;#&quot;</span><span class=p>)</span> <span class=k>if</span> <span class=n>part</span><span class=p>]</span>
        <span class=k>elif</span> <span class=s2>&quot;%&quot;</span> <span class=ow>in</span> <span class=n>base_name</span><span class=p>:</span>
            <span class=n>file_name_items</span> <span class=o>=</span> <span class=n>base_name</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s2>&quot;%&quot;</span><span class=p>)</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>file_name_items</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>None</span>

        <span class=n>filename_start</span> <span class=o>=</span> <span class=n>file_name_items</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>

        <span class=k>for</span> <span class=n>_file</span> <span class=ow>in</span> <span class=n>os</span><span class=o>.</span><span class=n>listdir</span><span class=p>(</span><span class=n>dir_path</span><span class=p>):</span>
            <span class=k>if</span> <span class=n>_file</span><span class=o>.</span><span class=n>startswith</span><span class=p>(</span><span class=n>filename_start</span><span class=p>)</span> <span class=ow>and</span> <span class=n>_file</span><span class=o>.</span><span class=n>endswith</span><span class=p>(</span><span class=n>ext</span><span class=p>):</span>
                <span class=k>return</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>normpath</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>

    <span class=k>return</span> <span class=p>(</span>
        <span class=n>path_from_representation</span><span class=p>()</span> <span class=ow>or</span> <span class=n>path_from_data</span><span class=p>()</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.get_staging_dir_info class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_staging_dir_info</span><span class=p>(</span><span class=n>project_entity</span><span class=p>,</span> <span class=n>folder_entity</span><span class=p>,</span> <span class=n>task_entity</span><span class=p>,</span> <span class=n>product_type</span><span class=p>,</span> <span class=n>product_name</span><span class=p>,</span> <span class=n>host_name</span><span class=p>,</span> <span class=n>anatomy</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>project_settings</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>template_data</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>always_return_path</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>force_tmp_dir</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>logger</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>prefix</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>suffix</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>username</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Get staging dir info data.</p> <p>If <code>force_temp</code> is set, staging dir will be created as tempdir. If <code>always_get_some_dir</code> is set, staging dir will be created as tempdir if no staging dir profile is found. If <code>prefix</code> or <code>suffix</code> is not set, default values will be used.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>project_entity</code> </td> <td> <code><span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Project entity.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>folder_entity</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]]</code> </td> <td> <div class=doc-md-description> <p>Folder entity.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>task_entity</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]]</code> </td> <td> <div class=doc-md-description> <p>Task entity.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>product_type</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Type of product.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>product_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Name of product.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>host_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Name of host.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>anatomy</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<a class="autorefs autorefs-internal" title="Anatomy (client.ayon_core.pipeline.anatomy.Anatomy)" href=anatomy/index.html#client.ayon_core.pipeline.anatomy.Anatomy>Anatomy</a>]</code> </td> <td> <div class=doc-md-description> <p>Anatomy object.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>project_settings</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]]</code> </td> <td> <div class=doc-md-description> <p>Prepared project settings.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>template_data</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]]</code> </td> <td> <div class=doc-md-description> <p>Additional data for formatting staging dir template.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>always_return_path</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=bool>bool</span>]</code> </td> <td> <div class=doc-md-description> <p>If True, staging dir will be created as tempdir if no staging dir profile is found. Input value False will return None if no staging dir profile is found.</p> </div> </td> <td> <code>True</code> </td> </tr> <tr class=doc-section-item> <td> <code>force_tmp_dir</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=bool>bool</span>]</code> </td> <td> <div class=doc-md-description> <p>If True, staging dir will be created as tempdir.</p> </div> </td> <td> <code>False</code> </td> </tr> <tr class=doc-section-item> <td> <code>logger</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=logging.Logger>Logger</span>]</code> </td> <td> <div class=doc-md-description> <p>Logger instance.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>suffix</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Optional suffix for staging dir name.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>username</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>AYON Username.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=typing.Optional>Optional</span>[<span title=client.ayon_core.pipeline.staging_dir.StagingDir>StagingDir</span>]</code> </td> <td> <div class=doc-md-description> <p>Optional[StagingDir]: Staging dir info data</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/staging_dir.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_staging_dir_info</span><span class=p>(</span>
    <span class=n>project_entity</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>],</span>
    <span class=n>folder_entity</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]],</span>
    <span class=n>task_entity</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]],</span>
    <span class=n>product_type</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
    <span class=n>product_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
    <span class=n>host_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
    <span class=n>anatomy</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Anatomy</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
    <span class=n>project_settings</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
    <span class=n>template_data</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
    <span class=n>always_return_path</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>True</span><span class=p>,</span>
    <span class=n>force_tmp_dir</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>False</span><span class=p>,</span>
    <span class=n>logger</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>logging</span><span class=o>.</span><span class=n>Logger</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
    <span class=n>prefix</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
    <span class=n>suffix</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
    <span class=n>username</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>StagingDir</span><span class=p>]:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get staging dir info data.</span>

<span class=sd>    If `force_temp` is set, staging dir will be created as tempdir.</span>
<span class=sd>    If `always_get_some_dir` is set, staging dir will be created as tempdir if</span>
<span class=sd>    no staging dir profile is found.</span>
<span class=sd>    If `prefix` or `suffix` is not set, default values will be used.</span>

<span class=sd>    Arguments:</span>
<span class=sd>        project_entity (Dict[str, Any]): Project entity.</span>
<span class=sd>        folder_entity (Optional[Dict[str, Any]]): Folder entity.</span>
<span class=sd>        task_entity (Optional[Dict[str, Any]]): Task entity.</span>
<span class=sd>        product_type (str): Type of product.</span>
<span class=sd>        product_name (str): Name of product.</span>
<span class=sd>        host_name (str): Name of host.</span>
<span class=sd>        anatomy (Optional[Anatomy]): Anatomy object.</span>
<span class=sd>        project_settings (Optional[Dict[str, Any]]): Prepared project settings.</span>
<span class=sd>        template_data (Optional[Dict[str, Any]]): Additional data for</span>
<span class=sd>            formatting staging dir template.</span>
<span class=sd>        always_return_path (Optional[bool]): If True, staging dir will be</span>
<span class=sd>            created as tempdir if no staging dir profile is found. Input value</span>
<span class=sd>            False will return None if no staging dir profile is found.</span>
<span class=sd>        force_tmp_dir (Optional[bool]): If True, staging dir will be created as</span>
<span class=sd>            tempdir.</span>
<span class=sd>        logger (Optional[logging.Logger]): Logger instance.</span>
<span class=sd>        prefix (Optional[str]) Optional prefix for staging dir name.</span>
<span class=sd>        suffix (Optional[str]): Optional suffix for staging dir name.</span>
<span class=sd>        username (Optional[str]): AYON Username.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Optional[StagingDir]: Staging dir info data</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>log</span> <span class=o>=</span> <span class=n>logger</span> <span class=ow>or</span> <span class=n>Logger</span><span class=o>.</span><span class=n>get_logger</span><span class=p>(</span><span class=s2>&quot;get_staging_dir_info&quot;</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>anatomy</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>anatomy</span> <span class=o>=</span> <span class=n>Anatomy</span><span class=p>(</span>
            <span class=n>project_entity</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>],</span> <span class=n>project_entity</span><span class=o>=</span><span class=n>project_entity</span>
        <span class=p>)</span>

    <span class=k>if</span> <span class=n>force_tmp_dir</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>StagingDir</span><span class=p>(</span>
            <span class=n>get_temp_dir</span><span class=p>(</span>
                <span class=n>project_name</span><span class=o>=</span><span class=n>project_entity</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>],</span>
                <span class=n>anatomy</span><span class=o>=</span><span class=n>anatomy</span><span class=p>,</span>
                <span class=n>prefix</span><span class=o>=</span><span class=n>prefix</span><span class=p>,</span>
                <span class=n>suffix</span><span class=o>=</span><span class=n>suffix</span><span class=p>,</span>
            <span class=p>),</span>
            <span class=n>is_persistent</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
            <span class=n>is_custom</span><span class=o>=</span><span class=kc>False</span>
        <span class=p>)</span>

    <span class=c1># making few queries to database</span>
    <span class=n>ctx_data</span> <span class=o>=</span> <span class=n>get_template_data</span><span class=p>(</span>
        <span class=n>project_entity</span><span class=p>,</span> <span class=n>folder_entity</span><span class=p>,</span> <span class=n>task_entity</span><span class=p>,</span> <span class=n>host_name</span><span class=p>,</span>
        <span class=n>settings</span><span class=o>=</span><span class=n>project_settings</span><span class=p>,</span>
        <span class=n>username</span><span class=o>=</span><span class=n>username</span>
    <span class=p>)</span>

    <span class=c1># add additional data</span>
    <span class=n>ctx_data</span><span class=p>[</span><span class=s2>&quot;product&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span>
        <span class=s2>&quot;type&quot;</span><span class=p>:</span> <span class=n>product_type</span><span class=p>,</span>
        <span class=s2>&quot;name&quot;</span><span class=p>:</span> <span class=n>product_name</span>
    <span class=p>}</span>

    <span class=c1># add additional template formatting data</span>
    <span class=k>if</span> <span class=n>template_data</span><span class=p>:</span>
        <span class=n>ctx_data</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>template_data</span><span class=p>)</span>

    <span class=n>task_name</span> <span class=o>=</span> <span class=n>task_type</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=k>if</span> <span class=n>task_entity</span><span class=p>:</span>
        <span class=n>task_name</span> <span class=o>=</span> <span class=n>task_entity</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span>
        <span class=n>task_type</span> <span class=o>=</span> <span class=n>task_entity</span><span class=p>[</span><span class=s2>&quot;taskType&quot;</span><span class=p>]</span>

    <span class=c1># get staging dir config</span>
    <span class=n>staging_dir_config</span> <span class=o>=</span> <span class=n>get_staging_dir_config</span><span class=p>(</span>
        <span class=n>project_entity</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>],</span>
        <span class=n>task_type</span><span class=p>,</span>
        <span class=n>task_name</span><span class=p>,</span>
        <span class=n>product_type</span><span class=p>,</span>
        <span class=n>product_name</span><span class=p>,</span>
        <span class=n>host_name</span><span class=p>,</span>
        <span class=n>project_settings</span><span class=o>=</span><span class=n>project_settings</span><span class=p>,</span>
        <span class=n>anatomy</span><span class=o>=</span><span class=n>anatomy</span><span class=p>,</span>
        <span class=n>log</span><span class=o>=</span><span class=n>log</span><span class=p>,</span>
    <span class=p>)</span>

    <span class=k>if</span> <span class=n>staging_dir_config</span><span class=p>:</span>
        <span class=n>dir_template</span> <span class=o>=</span> <span class=n>staging_dir_config</span><span class=p>[</span><span class=s2>&quot;template&quot;</span><span class=p>][</span><span class=s2>&quot;directory&quot;</span><span class=p>]</span>
        <span class=k>return</span> <span class=n>StagingDir</span><span class=p>(</span>
            <span class=n>dir_template</span><span class=o>.</span><span class=n>format_strict</span><span class=p>(</span><span class=n>ctx_data</span><span class=p>),</span>
            <span class=n>is_persistent</span><span class=o>=</span><span class=n>staging_dir_config</span><span class=p>[</span><span class=s2>&quot;persistence&quot;</span><span class=p>],</span>
            <span class=n>is_custom</span><span class=o>=</span><span class=kc>True</span>
        <span class=p>)</span>

    <span class=c1># no config found but force an output</span>
    <span class=k>if</span> <span class=n>always_return_path</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>StagingDir</span><span class=p>(</span>
            <span class=n>get_temp_dir</span><span class=p>(</span>
                <span class=n>project_name</span><span class=o>=</span><span class=n>project_entity</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>],</span>
                <span class=n>anatomy</span><span class=o>=</span><span class=n>anatomy</span><span class=p>,</span>
                <span class=n>prefix</span><span class=o>=</span><span class=n>prefix</span><span class=p>,</span>
                <span class=n>suffix</span><span class=o>=</span><span class=n>suffix</span><span class=p>,</span>
            <span class=p>),</span>
            <span class=n>is_persistent</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
            <span class=n>is_custom</span><span class=o>=</span><span class=kc>False</span>
        <span class=p>)</span>

    <span class=k>return</span> <span class=kc>None</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.get_temp_dir class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_temp_dir</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=n>anatomy</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>prefix</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>suffix</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>use_local_temp</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Get temporary dir path.</p> <p>If <code>use_local_temp</code> is set, tempdir will be created in local tempdir. If <code>anatomy</code> is not set, default anatomy will be used. If <code>prefix</code> or <code>suffix</code> is not set, default values will be used.</p> <p>It also supports <code>AYON_TMPDIR</code>, so studio can define own temp shared repository per project or even per more granular context. Template formatting is supported also with optional keys. Folder is created in case it doesn't exists.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>project_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Name of project.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>anatomy</code> </td> <td> <code><span title=Optional>Optional</span>[<span title=ayon_core.pipeline.Anatomy>Anatomy</span>]</code> </td> <td> <div class=doc-md-description> <p>Project Anatomy object.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>suffix</code> </td> <td> <code><span title=Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Suffix for tempdir.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>prefix</code> </td> <td> <code><span title=Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Prefix for tempdir.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>use_local_temp</code> </td> <td> <code><span title=Optional>Optional</span>[<span title=bool>bool</span>]</code> </td> <td> <div class=doc-md-description> <p>If True, temp dir will be created in local tempdir.</p> </div> </td> <td> <code>False</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>Path to staging dir of instance.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/tempdir.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_temp_dir</span><span class=p>(</span>
    <span class=n>project_name</span><span class=p>,</span> <span class=n>anatomy</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>prefix</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>suffix</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>use_local_temp</span><span class=o>=</span><span class=kc>False</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get temporary dir path.</span>

<span class=sd>    If `use_local_temp` is set, tempdir will be created in local tempdir.</span>
<span class=sd>    If `anatomy` is not set, default anatomy will be used.</span>
<span class=sd>    If `prefix` or `suffix` is not set, default values will be used.</span>

<span class=sd>    It also supports `AYON_TMPDIR`, so studio can define own temp</span>
<span class=sd>    shared repository per project or even per more granular context.</span>
<span class=sd>    Template formatting is supported also with optional keys. Folder is</span>
<span class=sd>    created in case it doesn&#39;t exists.</span>

<span class=sd>    Args:</span>
<span class=sd>        project_name (str): Name of project.</span>
<span class=sd>        anatomy (Optional[Anatomy]): Project Anatomy object.</span>
<span class=sd>        suffix (Optional[str]): Suffix for tempdir.</span>
<span class=sd>        prefix (Optional[str]): Prefix for tempdir.</span>
<span class=sd>        use_local_temp (Optional[bool]): If True, temp dir will be created in</span>
<span class=sd>            local tempdir.</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: Path to staging dir of instance.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=n>prefix</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>prefix</span> <span class=o>=</span> <span class=s2>&quot;ay_tmp_&quot;</span>
    <span class=n>suffix</span> <span class=o>=</span> <span class=n>suffix</span> <span class=ow>or</span> <span class=s2>&quot;&quot;</span>

    <span class=k>if</span> <span class=n>use_local_temp</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>_create_local_staging_dir</span><span class=p>(</span><span class=n>prefix</span><span class=p>,</span> <span class=n>suffix</span><span class=p>)</span>

    <span class=c1># make sure anatomy is set</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>anatomy</span><span class=p>:</span>
        <span class=n>anatomy</span> <span class=o>=</span> <span class=n>Anatomy</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>

    <span class=c1># get customized tempdir path from `OPENPYPE_TMPDIR` env var</span>
    <span class=n>custom_temp_dir</span> <span class=o>=</span> <span class=n>_create_custom_tempdir</span><span class=p>(</span><span class=n>anatomy</span><span class=o>.</span><span class=n>project_name</span><span class=p>,</span> <span class=n>anatomy</span><span class=p>)</span>

    <span class=k>return</span> <span class=n>_create_local_staging_dir</span><span class=p>(</span><span class=n>prefix</span><span class=p>,</span> <span class=n>suffix</span><span class=p>,</span> <span class=n>dirpath</span><span class=o>=</span><span class=n>custom_temp_dir</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.install_ayon_plugins class="doc doc-heading"> <code class="highlight language-python"><span class=n>install_ayon_plugins</span><span class=p>(</span><span class=n>project_name</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>host_name</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Install AYON core plugins and make sure the core is initialized.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>project_name</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Name of project to install plugins for.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>host_name</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Name of host to install plugins for.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/context_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>install_ayon_plugins</span><span class=p>(</span><span class=n>project_name</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>host_name</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Install AYON core plugins and make sure the core is initialized.</span>

<span class=sd>    Args:</span>
<span class=sd>        project_name (Optional[str]): Name of project to install plugins for.</span>
<span class=sd>        host_name (Optional[str]): Name of host to install plugins for.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=c1># Make sure global AYON connection has set site id and version</span>
    <span class=c1># - this is necessary if &#39;install_host&#39; is not called</span>
    <span class=n>initialize_ayon_connection</span><span class=p>()</span>
    <span class=c1># Make sure addons are loaded</span>
    <span class=n>load_addons</span><span class=p>()</span>

    <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Registering global plug-ins..&quot;</span><span class=p>)</span>
    <span class=n>pyblish</span><span class=o>.</span><span class=n>api</span><span class=o>.</span><span class=n>register_plugin_path</span><span class=p>(</span><span class=n>PUBLISH_PATH</span><span class=p>)</span>
    <span class=n>pyblish</span><span class=o>.</span><span class=n>api</span><span class=o>.</span><span class=n>register_discovery_filter</span><span class=p>(</span><span class=n>filter_pyblish_plugins</span><span class=p>)</span>
    <span class=n>register_loader_plugin_path</span><span class=p>(</span><span class=n>LOAD_PATH</span><span class=p>)</span>
    <span class=n>register_inventory_action_path</span><span class=p>(</span><span class=n>INVENTORY_PATH</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>host_name</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>host_name</span> <span class=o>=</span> <span class=n>get_current_host_name</span><span class=p>()</span>

    <span class=n>addons_manager</span> <span class=o>=</span> <span class=n>_get_addons_manager</span><span class=p>()</span>
    <span class=n>publish_plugin_dirs</span> <span class=o>=</span> <span class=n>addons_manager</span><span class=o>.</span><span class=n>collect_publish_plugin_paths</span><span class=p>(</span>
        <span class=n>host_name</span><span class=p>)</span>
    <span class=k>for</span> <span class=n>path</span> <span class=ow>in</span> <span class=n>publish_plugin_dirs</span><span class=p>:</span>
        <span class=n>pyblish</span><span class=o>.</span><span class=n>api</span><span class=o>.</span><span class=n>register_plugin_path</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>

    <span class=n>create_plugin_paths</span> <span class=o>=</span> <span class=n>addons_manager</span><span class=o>.</span><span class=n>collect_create_plugin_paths</span><span class=p>(</span>
        <span class=n>host_name</span><span class=p>)</span>
    <span class=k>for</span> <span class=n>path</span> <span class=ow>in</span> <span class=n>create_plugin_paths</span><span class=p>:</span>
        <span class=n>register_creator_plugin_path</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>

    <span class=n>load_plugin_paths</span> <span class=o>=</span> <span class=n>addons_manager</span><span class=o>.</span><span class=n>collect_load_plugin_paths</span><span class=p>(</span>
        <span class=n>host_name</span><span class=p>)</span>
    <span class=k>for</span> <span class=n>path</span> <span class=ow>in</span> <span class=n>load_plugin_paths</span><span class=p>:</span>
        <span class=n>register_loader_plugin_path</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>

    <span class=n>inventory_action_paths</span> <span class=o>=</span> <span class=n>addons_manager</span><span class=o>.</span><span class=n>collect_inventory_action_paths</span><span class=p>(</span>
        <span class=n>host_name</span><span class=p>)</span>
    <span class=k>for</span> <span class=n>path</span> <span class=ow>in</span> <span class=n>inventory_action_paths</span><span class=p>:</span>
        <span class=n>register_inventory_action_path</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>project_name</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>project_name</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AYON_PROJECT_NAME&quot;</span><span class=p>)</span>

    <span class=c1># Register studio specific plugins</span>
    <span class=k>if</span> <span class=n>project_name</span><span class=p>:</span>
        <span class=n>anatomy</span> <span class=o>=</span> <span class=n>Anatomy</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>
        <span class=n>anatomy</span><span class=o>.</span><span class=n>set_root_environments</span><span class=p>()</span>
        <span class=n>register_root</span><span class=p>(</span><span class=n>anatomy</span><span class=o>.</span><span class=n>roots</span><span class=p>)</span>

        <span class=n>project_settings</span> <span class=o>=</span> <span class=n>get_project_settings</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>
        <span class=n>platform_name</span> <span class=o>=</span> <span class=n>platform</span><span class=o>.</span><span class=n>system</span><span class=p>()</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span>
        <span class=n>project_plugins</span> <span class=o>=</span> <span class=p>(</span>
            <span class=n>project_settings</span>
            <span class=p>[</span><span class=s2>&quot;core&quot;</span><span class=p>]</span>
            <span class=p>[</span><span class=s2>&quot;project_plugins&quot;</span><span class=p>]</span>
            <span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>platform_name</span><span class=p>)</span>
        <span class=p>)</span> <span class=ow>or</span> <span class=p>[]</span>
        <span class=k>for</span> <span class=n>path</span> <span class=ow>in</span> <span class=n>project_plugins</span><span class=p>:</span>
            <span class=k>try</span><span class=p>:</span>
                <span class=n>path</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>path</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=o>**</span><span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=p>))</span>
            <span class=k>except</span> <span class=ne>KeyError</span><span class=p>:</span>
                <span class=k>pass</span>

            <span class=k>if</span> <span class=ow>not</span> <span class=n>path</span> <span class=ow>or</span> <span class=ow>not</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>path</span><span class=p>):</span>
                <span class=k>continue</span>

            <span class=n>pyblish</span><span class=o>.</span><span class=n>api</span><span class=o>.</span><span class=n>register_plugin_path</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>
            <span class=n>register_loader_plugin_path</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>
            <span class=n>register_creator_plugin_path</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>
            <span class=n>register_inventory_action_path</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.install_host class="doc doc-heading"> <code class="highlight language-python"><span class=n>install_host</span><span class=p>(</span><span class=n>host</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Install <code>host</code> into the running Python session.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>host</code> </td> <td> <code><span title=ayon_core.host.AbstractHost>AbstractHost</span></code> </td> <td> <div class=doc-md-description> <p>A host interface object.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/context_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>install_host</span><span class=p>(</span><span class=n>host</span><span class=p>:</span> <span class=n>AbstractHost</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Install `host` into the running Python session.</span>

<span class=sd>    Args:</span>
<span class=sd>        host (AbstractHost): A host interface object.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>host</span><span class=p>,</span> <span class=n>AbstractHost</span><span class=p>):</span>
        <span class=n>log</span><span class=o>.</span><span class=n>error</span><span class=p>(</span>
            <span class=sa>f</span><span class=s2>&quot;Host must be a subclass of &#39;AbstractHost&#39;, got &#39;</span><span class=si>{</span><span class=nb>type</span><span class=p>(</span><span class=n>host</span><span class=p>)</span><span class=si>}</span><span class=s2>&#39;.&quot;</span>
        <span class=p>)</span>

    <span class=k>global</span> <span class=n>_is_installed</span>

    <span class=n>_is_installed</span> <span class=o>=</span> <span class=kc>True</span>

    <span class=c1># Make sure global AYON connection has set site id and version</span>
    <span class=n>initialize_ayon_connection</span><span class=p>()</span>

    <span class=n>addons_manager</span> <span class=o>=</span> <span class=n>_get_addons_manager</span><span class=p>()</span>

    <span class=n>project_name</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>getenv</span><span class=p>(</span><span class=s2>&quot;AYON_PROJECT_NAME&quot;</span><span class=p>)</span>
    <span class=c1># WARNING: This might be an issue</span>
    <span class=c1>#   - commented out because &#39;traypublisher&#39; does not have set project</span>
    <span class=c1># if not project_name:</span>
    <span class=c1>#     raise ValueError(</span>
    <span class=c1>#         &quot;AYON_PROJECT_NAME is missing in environment variables.&quot;</span>
    <span class=c1>#     )</span>

    <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Activating </span><span class=si>{}</span><span class=s2>..&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>project_name</span><span class=p>))</span>

    <span class=c1># Optional host install function</span>
    <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>host</span><span class=p>,</span> <span class=s2>&quot;install&quot;</span><span class=p>):</span>
        <span class=n>host</span><span class=o>.</span><span class=n>install</span><span class=p>()</span>

    <span class=n>register_host</span><span class=p>(</span><span class=n>host</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>modified_emit</span><span class=p>(</span><span class=n>obj</span><span class=p>,</span> <span class=n>record</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Method replacing `emit` in Pyblish&#39;s MessageHandler.&quot;&quot;&quot;</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=n>record</span><span class=o>.</span><span class=n>msg</span> <span class=o>=</span> <span class=n>record</span><span class=o>.</span><span class=n>getMessage</span><span class=p>()</span>
        <span class=k>except</span> <span class=ne>Exception</span><span class=p>:</span>
            <span class=n>record</span><span class=o>.</span><span class=n>msg</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>record</span><span class=o>.</span><span class=n>msg</span><span class=p>)</span>
        <span class=n>obj</span><span class=o>.</span><span class=n>records</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>record</span><span class=p>)</span>

    <span class=n>MessageHandler</span><span class=o>.</span><span class=n>emit</span> <span class=o>=</span> <span class=n>modified_emit</span>

    <span class=k>if</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AYON_REMOTE_PUBLISH&quot;</span><span class=p>):</span>
        <span class=c1># target &quot;farm&quot; == rendering on farm, expects AYON_PUBLISH_DATA</span>
        <span class=c1># target &quot;remote&quot; == remote execution, installs host</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Registering pyblish target: remote&quot;</span><span class=p>)</span>
        <span class=n>pyblish</span><span class=o>.</span><span class=n>api</span><span class=o>.</span><span class=n>register_target</span><span class=p>(</span><span class=s2>&quot;remote&quot;</span><span class=p>)</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=n>pyblish</span><span class=o>.</span><span class=n>api</span><span class=o>.</span><span class=n>register_target</span><span class=p>(</span><span class=s2>&quot;local&quot;</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>is_in_tests</span><span class=p>():</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Registering pyblish target: automated&quot;</span><span class=p>)</span>
        <span class=n>pyblish</span><span class=o>.</span><span class=n>api</span><span class=o>.</span><span class=n>register_target</span><span class=p>(</span><span class=s2>&quot;automated&quot;</span><span class=p>)</span>

    <span class=n>host_name</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AYON_HOST_NAME&quot;</span><span class=p>)</span>

    <span class=c1># Give option to handle host installation</span>
    <span class=k>for</span> <span class=n>addon</span> <span class=ow>in</span> <span class=n>addons_manager</span><span class=o>.</span><span class=n>get_enabled_addons</span><span class=p>():</span>
        <span class=n>addon</span><span class=o>.</span><span class=n>on_host_install</span><span class=p>(</span><span class=n>host</span><span class=p>,</span> <span class=n>host_name</span><span class=p>,</span> <span class=n>project_name</span><span class=p>)</span>

    <span class=n>install_ayon_plugins</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=n>host_name</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.is_installed class="doc doc-heading"> <code class="highlight language-python"><span class=n>is_installed</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>Return state of installation</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>True if installed, False otherwise</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/context_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>is_installed</span><span class=p>():</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Return state of installation</span>

<span class=sd>    Returns:</span>
<span class=sd>        True if installed, False otherwise</span>

<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=n>_is_installed</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.is_product_base_type_supported class="doc doc-heading"> <code class="highlight language-python"><span class=n>is_product_base_type_supported</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>Check support for product base types.</p> <p>This function checks if the current pipeline supports product base types. Once this feature is implemented, it will return True. This should be used in places where some kind of backward compatibility is needed to avoid breaking existing functionality that relies on the current behavior.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>bool</code></td> <td> <code><span title=bool>bool</span></code> </td> <td> <div class=doc-md-description> <p>True if product base types are supported, False otherwise.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/compatibility.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>is_product_base_type_supported</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Check support for product base types.</span>

<span class=sd>    This function checks if the current pipeline supports product base types.</span>
<span class=sd>    Once this feature is implemented, it will return True. This should be used</span>
<span class=sd>    in places where some kind of backward compatibility is needed to avoid</span>
<span class=sd>    breaking existing functionality that relies on the current behavior.</span>

<span class=sd>    Returns:</span>
<span class=sd>        bool: True if product base types are supported, False otherwise.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>return</span> <span class=kc>False</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.load_container class="doc doc-heading"> <code class="highlight language-python"><span class=n>load_container</span><span class=p>(</span><span class=n>Loader</span><span class=p>,</span> <span class=n>representation</span><span class=p>,</span> <span class=n>namespace</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>name</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>options</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Use Loader to load a representation.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>Loader</code> </td> <td> <code><span title=Loader>Loader</span></code> </td> <td> <div class=doc-md-description> <p>The loader class to trigger.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>representation</code> </td> <td> <code><span title=str>str</span> or <span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>The representation id or full representation as returned by the database.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>namespace</code> </td> <td> <code>(<span title=str>str</span>, <span title=typing.Optional>Optional</span>)</code> </td> <td> <div class=doc-md-description> <p>The namespace to assign. Defaults to None.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>name</code> </td> <td> <code>(<span title=str>str</span>, <span title=typing.Optional>Optional</span>)</code> </td> <td> <div class=doc-md-description> <p>The name to assign. Defaults to product name.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>options</code> </td> <td> <code>(<span title=dict>dict</span>, <span title=typing.Optional>Optional</span>)</code> </td> <td> <div class=doc-md-description> <p>Additional options to pass on to the loader.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>The return of the <code>loader.load()</code> method.</p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="IncompatibleLoaderError (client.ayon_core.pipeline.load.utils.IncompatibleLoaderError)" href=load/utils.html#client.ayon_core.pipeline.load.utils.IncompatibleLoaderError>IncompatibleLoaderError</a></code> </td> <td> <div class=doc-md-description> <p>When the loader is not compatible with the representation.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/load/utils.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>387</span>
<span class=normal>388</span>
<span class=normal>389</span>
<span class=normal>390</span>
<span class=normal>391</span>
<span class=normal>392</span>
<span class=normal>393</span>
<span class=normal>394</span>
<span class=normal>395</span>
<span class=normal>396</span>
<span class=normal>397</span>
<span class=normal>398</span>
<span class=normal>399</span>
<span class=normal>400</span>
<span class=normal>401</span>
<span class=normal>402</span>
<span class=normal>403</span>
<span class=normal>404</span>
<span class=normal>405</span>
<span class=normal>406</span>
<span class=normal>407</span>
<span class=normal>408</span>
<span class=normal>409</span>
<span class=normal>410</span>
<span class=normal>411</span>
<span class=normal>412</span>
<span class=normal>413</span>
<span class=normal>414</span>
<span class=normal>415</span>
<span class=normal>416</span>
<span class=normal>417</span>
<span class=normal>418</span>
<span class=normal>419</span>
<span class=normal>420</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>load_container</span><span class=p>(</span>
    <span class=n>Loader</span><span class=p>,</span> <span class=n>representation</span><span class=p>,</span> <span class=n>namespace</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>name</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>options</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Use Loader to load a representation.</span>

<span class=sd>    Args:</span>
<span class=sd>        Loader (Loader): The loader class to trigger.</span>
<span class=sd>        representation (str or dict): The representation id</span>
<span class=sd>            or full representation as returned by the database.</span>
<span class=sd>        namespace (str, Optional): The namespace to assign. Defaults to None.</span>
<span class=sd>        name (str, Optional): The name to assign. Defaults to product name.</span>
<span class=sd>        options (dict, Optional): Additional options to pass on to the loader.</span>

<span class=sd>    Returns:</span>
<span class=sd>        The return of the `loader.load()` method.</span>

<span class=sd>    Raises:</span>
<span class=sd>        IncompatibleLoaderError: When the loader is not compatible with</span>
<span class=sd>            the representation.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=kn>from</span><span class=w> </span><span class=nn>ayon_core.pipeline</span><span class=w> </span><span class=kn>import</span> <span class=n>get_current_project_name</span>

    <span class=n>context</span> <span class=o>=</span> <span class=n>get_representation_context</span><span class=p>(</span>
        <span class=n>get_current_project_name</span><span class=p>(),</span> <span class=n>representation</span>
    <span class=p>)</span>
    <span class=k>return</span> <span class=n>load_with_repre_context</span><span class=p>(</span>
        <span class=n>Loader</span><span class=p>,</span>
        <span class=n>context</span><span class=p>,</span>
        <span class=n>namespace</span><span class=o>=</span><span class=n>namespace</span><span class=p>,</span>
        <span class=n>name</span><span class=o>=</span><span class=n>name</span><span class=p>,</span>
        <span class=n>options</span><span class=o>=</span><span class=n>options</span><span class=p>,</span>
        <span class=o>**</span><span class=n>kwargs</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.loaders_from_representation class="doc doc-heading"> <code class="highlight language-python"><span class=n>loaders_from_representation</span><span class=p>(</span><span class=n>loaders</span><span class=p>,</span> <span class=n>representation</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Return all compatible loaders for a representation.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/load/utils.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>926</span>
<span class=normal>927</span>
<span class=normal>928</span>
<span class=normal>929</span>
<span class=normal>930</span>
<span class=normal>931</span>
<span class=normal>932</span>
<span class=normal>933</span>
<span class=normal>934</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>loaders_from_representation</span><span class=p>(</span><span class=n>loaders</span><span class=p>,</span> <span class=n>representation</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Return all compatible loaders for a representation.&quot;&quot;&quot;</span>
    <span class=kn>from</span><span class=w> </span><span class=nn>ayon_core.pipeline</span><span class=w> </span><span class=kn>import</span> <span class=n>get_current_project_name</span>

    <span class=n>project_name</span> <span class=o>=</span> <span class=n>get_current_project_name</span><span class=p>()</span>
    <span class=n>context</span> <span class=o>=</span> <span class=n>get_representation_context</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span> <span class=n>representation</span>
    <span class=p>)</span>
    <span class=k>return</span> <span class=n>loaders_from_repre_context</span><span class=p>(</span><span class=n>loaders</span><span class=p>,</span> <span class=n>context</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.register_host class="doc doc-heading"> <code class="highlight language-python"><span class=n>register_host</span><span class=p>(</span><span class=n>host</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Register a new host for the current process</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>host</code> </td> <td> <code><span title=ModuleType>ModuleType</span></code> </td> <td> <div class=doc-md-description> <p>A module implementing the Host API interface. See the Host API documentation for details on what is required, or browse the source code.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/context_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>279</span>
<span class=normal>280</span>
<span class=normal>281</span>
<span class=normal>282</span>
<span class=normal>283</span>
<span class=normal>284</span>
<span class=normal>285</span>
<span class=normal>286</span>
<span class=normal>287</span>
<span class=normal>288</span>
<span class=normal>289</span>
<span class=normal>290</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>register_host</span><span class=p>(</span><span class=n>host</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Register a new host for the current process</span>

<span class=sd>    Arguments:</span>
<span class=sd>        host (ModuleType): A module implementing the</span>
<span class=sd>            Host API interface. See the Host API</span>
<span class=sd>            documentation for details on what is</span>
<span class=sd>            required, or browse the source code.</span>

<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>_registered_host</span><span class=p>[</span><span class=s2>&quot;_&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>host</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.register_root class="doc doc-heading"> <code class="highlight language-python"><span class=n>register_root</span><span class=p>(</span><span class=n>path</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>DEPRECATED Register currently active root.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/context_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>72</span>
<span class=normal>73</span>
<span class=normal>74</span>
<span class=normal>75</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>register_root</span><span class=p>(</span><span class=n>path</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;DEPRECATED Register currently active root.&quot;&quot;&quot;</span>
    <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Registering root: </span><span class=si>%s</span><span class=s2>&quot;</span> <span class=o>%</span> <span class=n>path</span><span class=p>)</span>
    <span class=n>_registered_root</span><span class=p>[</span><span class=s2>&quot;_&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>path</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.registered_host class="doc doc-heading"> <code class="highlight language-python"><span class=n>registered_host</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>Return currently registered host</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/context_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>293</span>
<span class=normal>294</span>
<span class=normal>295</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>registered_host</span><span class=p>():</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Return currently registered host&quot;&quot;&quot;</span>
    <span class=k>return</span> <span class=n>_registered_host</span><span class=p>[</span><span class=s2>&quot;_&quot;</span><span class=p>]</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.registered_root class="doc doc-heading"> <code class="highlight language-python"><span class=n>registered_root</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>Return registered roots from current project anatomy.</p> <p>Consider this does return roots only for current project and current platforms, only if host was installer using 'install_host'.</p> <details class=deprecated open> <summary>Deprecated</summary> <p>Please use project 'Anatomy' to get roots. This function is still used at current core functions of load logic, but that will change in future and this function will be removed eventually. Using this function at new places can cause problems in the future.</p> </details> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>dict[str, str]: Root paths.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/context_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 78</span>
<span class=normal> 79</span>
<span class=normal> 80</span>
<span class=normal> 81</span>
<span class=normal> 82</span>
<span class=normal> 83</span>
<span class=normal> 84</span>
<span class=normal> 85</span>
<span class=normal> 86</span>
<span class=normal> 87</span>
<span class=normal> 88</span>
<span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>registered_root</span><span class=p>():</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Return registered roots from current project anatomy.</span>

<span class=sd>    Consider this does return roots only for current project and current</span>
<span class=sd>        platforms, only if host was installer using &#39;install_host&#39;.</span>

<span class=sd>    Deprecated:</span>
<span class=sd>        Please use project &#39;Anatomy&#39; to get roots. This function is still used</span>
<span class=sd>            at current core functions of load logic, but that will change</span>
<span class=sd>            in future and this function will be removed eventually. Using this</span>
<span class=sd>            function at new places can cause problems in the future.</span>

<span class=sd>    Returns:</span>
<span class=sd>        dict[str, str]: Root paths.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>warnings</span><span class=o>.</span><span class=n>warn</span><span class=p>(</span>
        <span class=s2>&quot;Used deprecated function &#39;registered_root&#39;. Please use &#39;Anatomy&#39;&quot;</span>
        <span class=s2>&quot; to get roots.&quot;</span><span class=p>,</span>
        <span class=ne>DeprecationWarning</span><span class=p>,</span>
        <span class=n>stacklevel</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span>
    <span class=p>)</span>
    <span class=k>return</span> <span class=n>_registered_root</span><span class=p>[</span><span class=s2>&quot;_&quot;</span><span class=p>]</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.remove_container class="doc doc-heading"> <code class="highlight language-python"><span class=n>remove_container</span><span class=p>(</span><span class=n>container</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Remove a container</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/load/utils.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>459</span>
<span class=normal>460</span>
<span class=normal>461</span>
<span class=normal>462</span>
<span class=normal>463</span>
<span class=normal>464</span>
<span class=normal>465</span>
<span class=normal>466</span>
<span class=normal>467</span>
<span class=normal>468</span>
<span class=normal>469</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>remove_container</span><span class=p>(</span><span class=n>container</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Remove a container&quot;&quot;&quot;</span>

    <span class=n>Loader</span> <span class=o>=</span> <span class=n>_get_container_loader</span><span class=p>(</span><span class=n>container</span><span class=p>)</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>Loader</span><span class=p>:</span>
        <span class=k>raise</span> <span class=n>LoaderNotFoundError</span><span class=p>(</span>
            <span class=s2>&quot;Can&#39;t remove container because loader &#39;</span><span class=si>{}</span><span class=s2>&#39; was not found.&quot;</span>
            <span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>container</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;loader&quot;</span><span class=p>))</span>
        <span class=p>)</span>

    <span class=k>return</span> <span class=n>Loader</span><span class=p>()</span><span class=o>.</span><span class=n>remove</span><span class=p>(</span><span class=n>container</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.switch_container class="doc doc-heading"> <code class="highlight language-python"><span class=n>switch_container</span><span class=p>(</span><span class=n>container</span><span class=p>,</span> <span class=n>representation</span><span class=p>,</span> <span class=n>loader_plugin</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Switch a container to representation</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>container</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>container information</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>representation</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>representation entity</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>return from function call</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/load/utils.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>571</span>
<span class=normal>572</span>
<span class=normal>573</span>
<span class=normal>574</span>
<span class=normal>575</span>
<span class=normal>576</span>
<span class=normal>577</span>
<span class=normal>578</span>
<span class=normal>579</span>
<span class=normal>580</span>
<span class=normal>581</span>
<span class=normal>582</span>
<span class=normal>583</span>
<span class=normal>584</span>
<span class=normal>585</span>
<span class=normal>586</span>
<span class=normal>587</span>
<span class=normal>588</span>
<span class=normal>589</span>
<span class=normal>590</span>
<span class=normal>591</span>
<span class=normal>592</span>
<span class=normal>593</span>
<span class=normal>594</span>
<span class=normal>595</span>
<span class=normal>596</span>
<span class=normal>597</span>
<span class=normal>598</span>
<span class=normal>599</span>
<span class=normal>600</span>
<span class=normal>601</span>
<span class=normal>602</span>
<span class=normal>603</span>
<span class=normal>604</span>
<span class=normal>605</span>
<span class=normal>606</span>
<span class=normal>607</span>
<span class=normal>608</span>
<span class=normal>609</span>
<span class=normal>610</span>
<span class=normal>611</span>
<span class=normal>612</span>
<span class=normal>613</span>
<span class=normal>614</span>
<span class=normal>615</span>
<span class=normal>616</span>
<span class=normal>617</span>
<span class=normal>618</span>
<span class=normal>619</span>
<span class=normal>620</span>
<span class=normal>621</span>
<span class=normal>622</span>
<span class=normal>623</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>switch_container</span><span class=p>(</span>
    <span class=n>container</span><span class=p>,</span>
    <span class=n>representation</span><span class=p>,</span>
    <span class=n>loader_plugin</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Switch a container to representation</span>

<span class=sd>    Args:</span>
<span class=sd>        container (dict): container information</span>
<span class=sd>        representation (dict): representation entity</span>
<span class=sd>        loader_plugin (LoaderPlugin)</span>

<span class=sd>    Returns:</span>
<span class=sd>        return from function call</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=kn>from</span><span class=w> </span><span class=nn>ayon_core.pipeline</span><span class=w> </span><span class=kn>import</span> <span class=n>get_current_project_name</span>

    <span class=c1># Get the Loader for this container</span>
    <span class=k>if</span> <span class=n>loader_plugin</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>loader_plugin</span> <span class=o>=</span> <span class=n>_get_container_loader</span><span class=p>(</span><span class=n>container</span><span class=p>)</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>loader_plugin</span><span class=p>:</span>
        <span class=k>raise</span> <span class=n>LoaderNotFoundError</span><span class=p>(</span>
            <span class=s2>&quot;Can&#39;t switch container because loader &#39;</span><span class=si>{}</span><span class=s2>&#39; was not found.&quot;</span>
            <span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>container</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;loader&quot;</span><span class=p>))</span>
        <span class=p>)</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>loader_plugin</span><span class=p>,</span> <span class=s2>&quot;switch&quot;</span><span class=p>):</span>
        <span class=c1># Backwards compatibility (classes without switch support</span>
        <span class=c1># might be better to just have &quot;switch&quot; raise NotImplementedError</span>
        <span class=c1># on the base class of Loader\</span>
        <span class=k>raise</span> <span class=n>LoaderSwitchNotImplementedError</span><span class=p>(</span>
            <span class=s2>&quot;Loader </span><span class=si>{}</span><span class=s2> does not support &#39;switch&#39;&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>loader_plugin</span><span class=o>.</span><span class=n>label</span><span class=p>)</span>
        <span class=p>)</span>

    <span class=c1># Get the new representation to switch to</span>
    <span class=n>project_name</span> <span class=o>=</span> <span class=n>container</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;project_name&quot;</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>project_name</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>project_name</span> <span class=o>=</span> <span class=n>get_current_project_name</span><span class=p>()</span>

    <span class=n>context</span> <span class=o>=</span> <span class=n>get_representation_context</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span> <span class=n>representation</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]</span>
    <span class=p>)</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>is_compatible_loader</span><span class=p>(</span><span class=n>loader_plugin</span><span class=p>,</span> <span class=n>context</span><span class=p>):</span>
        <span class=k>raise</span> <span class=n>IncompatibleLoaderError</span><span class=p>(</span>
            <span class=s2>&quot;Loader </span><span class=si>{}</span><span class=s2> is incompatible with </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                <span class=n>loader_plugin</span><span class=o>.</span><span class=vm>__name__</span><span class=p>,</span> <span class=n>context</span><span class=p>[</span><span class=s2>&quot;product&quot;</span><span class=p>][</span><span class=s2>&quot;name&quot;</span><span class=p>]</span>
            <span class=p>)</span>
        <span class=p>)</span>

    <span class=n>loader</span> <span class=o>=</span> <span class=n>loader_plugin</span><span class=p>(</span><span class=n>context</span><span class=p>)</span>

    <span class=k>return</span> <span class=n>loader</span><span class=o>.</span><span class=n>switch</span><span class=p>(</span><span class=n>container</span><span class=p>,</span> <span class=n>context</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.uninstall_host class="doc doc-heading"> <code class="highlight language-python"><span class=n>uninstall_host</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>Undo all of what <code>install()</code> did</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/context_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>uninstall_host</span><span class=p>():</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Undo all of what `install()` did&quot;&quot;&quot;</span>
    <span class=n>host</span> <span class=o>=</span> <span class=n>registered_host</span><span class=p>()</span>

    <span class=k>try</span><span class=p>:</span>
        <span class=n>host</span><span class=o>.</span><span class=n>uninstall</span><span class=p>()</span>
    <span class=k>except</span> <span class=ne>AttributeError</span><span class=p>:</span>
        <span class=k>pass</span>

    <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Deregistering global plug-ins..&quot;</span><span class=p>)</span>
    <span class=n>pyblish</span><span class=o>.</span><span class=n>api</span><span class=o>.</span><span class=n>deregister_plugin_path</span><span class=p>(</span><span class=n>PUBLISH_PATH</span><span class=p>)</span>
    <span class=n>pyblish</span><span class=o>.</span><span class=n>api</span><span class=o>.</span><span class=n>deregister_discovery_filter</span><span class=p>(</span><span class=n>filter_pyblish_plugins</span><span class=p>)</span>
    <span class=n>deregister_loader_plugin_path</span><span class=p>(</span><span class=n>LOAD_PATH</span><span class=p>)</span>
    <span class=n>deregister_inventory_action_path</span><span class=p>(</span><span class=n>INVENTORY_PATH</span><span class=p>)</span>
    <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Global plug-ins unregistered&quot;</span><span class=p>)</span>

    <span class=n>deregister_host</span><span class=p>()</span>

    <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Successfully uninstalled Avalon!&quot;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.update_container class="doc doc-heading"> <code class="highlight language-python"><span class=n>update_container</span><span class=p>(</span><span class=n>container</span><span class=p>,</span> <span class=n>version</span><span class=o>=-</span><span class=mi>1</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Update a container</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/load/utils.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>472</span>
<span class=normal>473</span>
<span class=normal>474</span>
<span class=normal>475</span>
<span class=normal>476</span>
<span class=normal>477</span>
<span class=normal>478</span>
<span class=normal>479</span>
<span class=normal>480</span>
<span class=normal>481</span>
<span class=normal>482</span>
<span class=normal>483</span>
<span class=normal>484</span>
<span class=normal>485</span>
<span class=normal>486</span>
<span class=normal>487</span>
<span class=normal>488</span>
<span class=normal>489</span>
<span class=normal>490</span>
<span class=normal>491</span>
<span class=normal>492</span>
<span class=normal>493</span>
<span class=normal>494</span>
<span class=normal>495</span>
<span class=normal>496</span>
<span class=normal>497</span>
<span class=normal>498</span>
<span class=normal>499</span>
<span class=normal>500</span>
<span class=normal>501</span>
<span class=normal>502</span>
<span class=normal>503</span>
<span class=normal>504</span>
<span class=normal>505</span>
<span class=normal>506</span>
<span class=normal>507</span>
<span class=normal>508</span>
<span class=normal>509</span>
<span class=normal>510</span>
<span class=normal>511</span>
<span class=normal>512</span>
<span class=normal>513</span>
<span class=normal>514</span>
<span class=normal>515</span>
<span class=normal>516</span>
<span class=normal>517</span>
<span class=normal>518</span>
<span class=normal>519</span>
<span class=normal>520</span>
<span class=normal>521</span>
<span class=normal>522</span>
<span class=normal>523</span>
<span class=normal>524</span>
<span class=normal>525</span>
<span class=normal>526</span>
<span class=normal>527</span>
<span class=normal>528</span>
<span class=normal>529</span>
<span class=normal>530</span>
<span class=normal>531</span>
<span class=normal>532</span>
<span class=normal>533</span>
<span class=normal>534</span>
<span class=normal>535</span>
<span class=normal>536</span>
<span class=normal>537</span>
<span class=normal>538</span>
<span class=normal>539</span>
<span class=normal>540</span>
<span class=normal>541</span>
<span class=normal>542</span>
<span class=normal>543</span>
<span class=normal>544</span>
<span class=normal>545</span>
<span class=normal>546</span>
<span class=normal>547</span>
<span class=normal>548</span>
<span class=normal>549</span>
<span class=normal>550</span>
<span class=normal>551</span>
<span class=normal>552</span>
<span class=normal>553</span>
<span class=normal>554</span>
<span class=normal>555</span>
<span class=normal>556</span>
<span class=normal>557</span>
<span class=normal>558</span>
<span class=normal>559</span>
<span class=normal>560</span>
<span class=normal>561</span>
<span class=normal>562</span>
<span class=normal>563</span>
<span class=normal>564</span>
<span class=normal>565</span>
<span class=normal>566</span>
<span class=normal>567</span>
<span class=normal>568</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>update_container</span><span class=p>(</span><span class=n>container</span><span class=p>,</span> <span class=n>version</span><span class=o>=-</span><span class=mi>1</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Update a container&quot;&quot;&quot;</span>
    <span class=kn>from</span><span class=w> </span><span class=nn>ayon_core.pipeline</span><span class=w> </span><span class=kn>import</span> <span class=n>get_current_project_name</span>

    <span class=c1># Compute the different version from &#39;representation&#39;</span>
    <span class=n>project_name</span> <span class=o>=</span> <span class=n>container</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;project_name&quot;</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>project_name</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>project_name</span> <span class=o>=</span> <span class=n>get_current_project_name</span><span class=p>()</span>
    <span class=n>repre_id</span> <span class=o>=</span> <span class=n>container</span><span class=p>[</span><span class=s2>&quot;representation&quot;</span><span class=p>]</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>_is_valid_representation_id</span><span class=p>(</span><span class=n>repre_id</span><span class=p>):</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
            <span class=sa>f</span><span class=s2>&quot;Got container with invalid representation id &#39;</span><span class=si>{</span><span class=n>repre_id</span><span class=si>}</span><span class=s2>&#39;&quot;</span>
        <span class=p>)</span>
    <span class=n>current_representation</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_representation_by_id</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span> <span class=n>repre_id</span>
    <span class=p>)</span>

    <span class=k>assert</span> <span class=n>current_representation</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>,</span> <span class=s2>&quot;This is a bug&quot;</span>

    <span class=n>current_version_id</span> <span class=o>=</span> <span class=n>current_representation</span><span class=p>[</span><span class=s2>&quot;versionId&quot;</span><span class=p>]</span>
    <span class=n>current_version</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_version_by_id</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span> <span class=n>current_version_id</span><span class=p>,</span> <span class=n>fields</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;productId&quot;</span><span class=p>}</span>
    <span class=p>)</span>
    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>version</span><span class=p>,</span> <span class=n>HeroVersionType</span><span class=p>):</span>
        <span class=n>new_version</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_hero_version_by_product_id</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span> <span class=n>current_version</span><span class=p>[</span><span class=s2>&quot;productId&quot;</span><span class=p>]</span>
        <span class=p>)</span>
    <span class=k>elif</span> <span class=n>version</span> <span class=o>==</span> <span class=o>-</span><span class=mi>1</span><span class=p>:</span>
        <span class=n>new_version</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_last_version_by_product_id</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span> <span class=n>current_version</span><span class=p>[</span><span class=s2>&quot;productId&quot;</span><span class=p>]</span>
        <span class=p>)</span>

    <span class=k>else</span><span class=p>:</span>
        <span class=n>new_version</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_version_by_name</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span> <span class=n>version</span><span class=p>,</span> <span class=n>current_version</span><span class=p>[</span><span class=s2>&quot;productId&quot;</span><span class=p>]</span>
        <span class=p>)</span>

    <span class=k>if</span> <span class=n>new_version</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;Failed to find matching version&quot;</span><span class=p>)</span>

    <span class=n>product_entity</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_product_by_id</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span> <span class=n>current_version</span><span class=p>[</span><span class=s2>&quot;productId&quot;</span><span class=p>]</span>
    <span class=p>)</span>
    <span class=n>folder_entity</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_folder_by_id</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span> <span class=n>product_entity</span><span class=p>[</span><span class=s2>&quot;folderId&quot;</span><span class=p>]</span>
    <span class=p>)</span>

    <span class=c1># Run update on the Loader for this container</span>
    <span class=n>Loader</span> <span class=o>=</span> <span class=n>_get_container_loader</span><span class=p>(</span><span class=n>container</span><span class=p>)</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>Loader</span><span class=p>:</span>
        <span class=k>raise</span> <span class=n>LoaderNotFoundError</span><span class=p>(</span>
            <span class=s2>&quot;Can&#39;t update container because loader &#39;</span><span class=si>{}</span><span class=s2>&#39; was not found.&quot;</span>
            <span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>container</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;loader&quot;</span><span class=p>))</span>
        <span class=p>)</span>

    <span class=n>repre_name</span> <span class=o>=</span> <span class=n>current_representation</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span>
    <span class=n>new_representation</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_representation_by_name</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span> <span class=n>repre_name</span><span class=p>,</span> <span class=n>new_version</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]</span>
    <span class=p>)</span>
    <span class=k>if</span> <span class=n>new_representation</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=c1># The representation name is not found in the new version.</span>
        <span class=c1># Allow updating to a &#39;matching&#39; representation if the loader</span>
        <span class=c1># has defined compatible update conversions</span>
        <span class=n>repre_name_aliases</span> <span class=o>=</span> <span class=n>Loader</span><span class=o>.</span><span class=n>get_representation_name_aliases</span><span class=p>(</span><span class=n>repre_name</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>repre_name_aliases</span><span class=p>:</span>
            <span class=n>representations</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_representations</span><span class=p>(</span>
                <span class=n>project_name</span><span class=p>,</span>
                <span class=n>representation_names</span><span class=o>=</span><span class=n>repre_name_aliases</span><span class=p>,</span>
                <span class=n>version_ids</span><span class=o>=</span><span class=p>[</span><span class=n>new_version</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]])</span>
            <span class=n>representations_by_name</span> <span class=o>=</span> <span class=p>{</span>
                <span class=n>repre</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]:</span> <span class=n>repre</span> <span class=k>for</span> <span class=n>repre</span> <span class=ow>in</span> <span class=n>representations</span>
            <span class=p>}</span>
            <span class=k>for</span> <span class=n>name</span> <span class=ow>in</span> <span class=n>repre_name_aliases</span><span class=p>:</span>
                <span class=k>if</span> <span class=n>name</span> <span class=ow>in</span> <span class=n>representations_by_name</span><span class=p>:</span>
                    <span class=n>new_representation</span> <span class=o>=</span> <span class=n>representations_by_name</span><span class=p>[</span><span class=n>name</span><span class=p>]</span>
                    <span class=k>break</span>

        <span class=k>if</span> <span class=n>new_representation</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
                <span class=s2>&quot;Representation &#39;</span><span class=si>{}</span><span class=s2>&#39; wasn&#39;t found on requested version&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                    <span class=n>repre_name</span>
                <span class=p>)</span>
            <span class=p>)</span>

    <span class=n>project_entity</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_project</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>
    <span class=n>context</span> <span class=o>=</span> <span class=p>{</span>
        <span class=s2>&quot;project&quot;</span><span class=p>:</span> <span class=n>project_entity</span><span class=p>,</span>
        <span class=s2>&quot;folder&quot;</span><span class=p>:</span> <span class=n>folder_entity</span><span class=p>,</span>
        <span class=s2>&quot;product&quot;</span><span class=p>:</span> <span class=n>product_entity</span><span class=p>,</span>
        <span class=s2>&quot;version&quot;</span><span class=p>:</span> <span class=n>new_version</span><span class=p>,</span>
        <span class=s2>&quot;representation&quot;</span><span class=p>:</span> <span class=n>new_representation</span><span class=p>,</span>
    <span class=p>}</span>
    <span class=n>path</span> <span class=o>=</span> <span class=n>get_representation_path_from_context</span><span class=p>(</span><span class=n>context</span><span class=p>)</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>path</span> <span class=ow>or</span> <span class=ow>not</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>path</span><span class=p>):</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;Path </span><span class=si>{}</span><span class=s2> doesn&#39;t exist&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>path</span><span class=p>))</span>

    <span class=k>return</span> <span class=n>Loader</span><span class=p>()</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>container</span><span class=p>,</span> <span class=n>context</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../..", "features": ["navigation.sections", "navigation.path", "navigation.prune"], "search": "../../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../../../assets/javascripts/bundle.f55a23d4.min.js></script> </body> </html>