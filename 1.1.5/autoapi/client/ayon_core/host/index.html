<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=prev href=../hooks/pre_ocio_hook.html><link rel=next href=dirmap.html><link rel=icon href=../../../../img/favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.8"><title>host - ayon-core</title><link rel=stylesheet href=../../../../assets/stylesheets/main.8608ea7d.min.css><link rel=stylesheet href=../../../../assets/stylesheets/palette.06af60db.min.css><script src=https://unpkg.com/iframe-worker/shim></script><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../../assets/_mkdocstrings.css><link rel=stylesheet href=../../../../css/custom.css><script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#client.ayon_core.host class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../../index.html title=ayon-core class="md-header__button md-logo" aria-label=ayon-core data-md-component=logo> <img src=../../../../img/ay-symbol-blackw-full.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> ayon-core </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> host </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../../index.html title=ayon-core class="md-nav__button md-logo" aria-label=ayon-core data-md-component=logo> <img src=../../../../img/ay-symbol-blackw-full.png alt=logo> </a> ayon-core </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../index.html class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../../../../license.html class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1 checked> <div class="md-nav__link md-nav__container"> <a href=../../index.html class="md-nav__link "> <span class=md-ellipsis> client </span> </a> <label class="md-nav__link " for=__nav_3_1 id=__nav_3_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> client </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1 checked> <div class="md-nav__link md-nav__container"> <a href=../index.html class="md-nav__link "> <span class=md-ellipsis> ayon_core </span> </a> <label class="md-nav__link " for=__nav_3_1_1 id=__nav_3_1_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_1_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1> <span class="md-nav__icon md-icon"></span> ayon_core </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../__main__.html class=md-nav__link> <span class=md-ellipsis> __main__ </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../addon/base.html class=md-nav__link> <span class=md-ellipsis> addon </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../cli.html class=md-nav__link> <span class=md-ellipsis> cli </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../hooks/pre_add_last_workfile_arg.html class=md-nav__link> <span class=md-ellipsis> hooks </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1_5 checked> <div class="md-nav__link md-nav__container"> <a href=index.html class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> host </span> </a> <label class="md-nav__link md-nav__link--active" for=__nav_3_1_1_5 id=__nav_3_1_1_5_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_1_1_5_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1_5> <span class="md-nav__icon md-icon"></span> host </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=dirmap.html class=md-nav__link> <span class=md-ellipsis> dirmap </span> </a> </li> <li class=md-nav__item> <a href=host.html class=md-nav__link> <span class=md-ellipsis> host </span> </a> </li> <li class=md-nav__item> <a href=interfaces.html class=md-nav__link> <span class=md-ellipsis> interfaces </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../lib/attribute_definitions.html class=md-nav__link> <span class=md-ellipsis> lib </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../pipeline/actions.html class=md-nav__link> <span class=md-ellipsis> pipeline </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../plugins/actions/open_file_explorer.html class=md-nav__link> <span class=md-ellipsis> plugins </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../resources/app_icons/index.html class=md-nav__link> <span class=md-ellipsis> resources </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../scripts/ocio_wrapper.html class=md-nav__link> <span class=md-ellipsis> scripts </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../settings/lib.html class=md-nav__link> <span class=md-ellipsis> settings </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../style/color_defs.html class=md-nav__link> <span class=md-ellipsis> style </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../tests/conftest.html class=md-nav__link> <span class=md-ellipsis> tests </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../tools/attribute_defs/_constants.html class=md-nav__link> <span class=md-ellipsis> tools </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../vendor/python/qargparse.html class=md-nav__link> <span class=md-ellipsis> vendor </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../version.html class=md-nav__link> <span class=md-ellipsis> version </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../server/settings/conversion.html class=md-nav__link> <span class=md-ellipsis> server </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#client.ayon_core.host class=md-nav__link> <span class=md-ellipsis> host </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.HostBase class=md-nav__link> <span class=md-ellipsis> HostBase </span> </a> <nav class=md-nav aria-label=HostBase> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.host.HostBase--installation-of-host-before-avalon-concept class=md-nav__link> <span class=md-ellipsis> Installation of host before (avalon concept): </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.HostBase--installation-of-host-now class=md-nav__link> <span class=md-ellipsis> Installation of host now: </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.HostBase.__init__ class=md-nav__link> <span class=md-ellipsis> __init__ </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.HostBase.get_context_title class=md-nav__link> <span class=md-ellipsis> get_context_title </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.HostBase.get_current_context class=md-nav__link> <span class=md-ellipsis> get_current_context </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.HostBase.get_current_folder_path class=md-nav__link> <span class=md-ellipsis> get_current_folder_path </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.HostBase.get_current_project_name class=md-nav__link> <span class=md-ellipsis> get_current_project_name </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.HostBase.get_current_task_name class=md-nav__link> <span class=md-ellipsis> get_current_task_name </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.HostBase.install class=md-nav__link> <span class=md-ellipsis> install </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.HostBase.maintained_selection class=md-nav__link> <span class=md-ellipsis> maintained_selection </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.HostBase.name class=md-nav__link> <span class=md-ellipsis> name </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.HostDirmap class=md-nav__link> <span class=md-ellipsis> HostDirmap </span> </a> <nav class=md-nav aria-label=HostDirmap> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.host.HostDirmap._get_local_sync_dirmap class=md-nav__link> <span class=md-ellipsis> _get_local_sync_dirmap </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.HostDirmap._get_site_root_overrides class=md-nav__link> <span class=md-ellipsis> _get_site_root_overrides </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.HostDirmap.dirmap_routine class=md-nav__link> <span class=md-ellipsis> dirmap_routine </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.HostDirmap.get_mappings class=md-nav__link> <span class=md-ellipsis> get_mappings </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.HostDirmap.on_enable_dirmap class=md-nav__link> <span class=md-ellipsis> on_enable_dirmap </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.HostDirmap.process_dirmap class=md-nav__link> <span class=md-ellipsis> process_dirmap </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.ILoadHost class=md-nav__link> <span class=md-ellipsis> ILoadHost </span> </a> <nav class=md-nav aria-label=ILoadHost> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.host.ILoadHost.get_containers class=md-nav__link> <span class=md-ellipsis> get_containers </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.ILoadHost.get_missing_load_methods class=md-nav__link> <span class=md-ellipsis> get_missing_load_methods </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.ILoadHost.ls class=md-nav__link> <span class=md-ellipsis> ls </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.ILoadHost.validate_load_methods class=md-nav__link> <span class=md-ellipsis> validate_load_methods </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.INewPublisher class=md-nav__link> <span class=md-ellipsis> INewPublisher </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.IPublishHost class=md-nav__link> <span class=md-ellipsis> IPublishHost </span> </a> <nav class=md-nav aria-label=IPublishHost> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.host.IPublishHost.get_context_data class=md-nav__link> <span class=md-ellipsis> get_context_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.IPublishHost.get_missing_publish_methods class=md-nav__link> <span class=md-ellipsis> get_missing_publish_methods </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.IPublishHost.update_context_data class=md-nav__link> <span class=md-ellipsis> update_context_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.IPublishHost.validate_publish_methods class=md-nav__link> <span class=md-ellipsis> validate_publish_methods </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.IWorkfileHost class=md-nav__link> <span class=md-ellipsis> IWorkfileHost </span> </a> <nav class=md-nav aria-label=IWorkfileHost> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.host.IWorkfileHost.current_file class=md-nav__link> <span class=md-ellipsis> current_file </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.IWorkfileHost.file_extensions class=md-nav__link> <span class=md-ellipsis> file_extensions </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.IWorkfileHost.get_current_workfile class=md-nav__link> <span class=md-ellipsis> get_current_workfile </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.IWorkfileHost.get_missing_workfile_methods class=md-nav__link> <span class=md-ellipsis> get_missing_workfile_methods </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.IWorkfileHost.get_workfile_extensions class=md-nav__link> <span class=md-ellipsis> get_workfile_extensions </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.IWorkfileHost.has_unsaved_changes class=md-nav__link> <span class=md-ellipsis> has_unsaved_changes </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.IWorkfileHost.open_file class=md-nav__link> <span class=md-ellipsis> open_file </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.IWorkfileHost.open_workfile class=md-nav__link> <span class=md-ellipsis> open_workfile </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.IWorkfileHost.save_file class=md-nav__link> <span class=md-ellipsis> save_file </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.IWorkfileHost.save_workfile class=md-nav__link> <span class=md-ellipsis> save_workfile </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.IWorkfileHost.validate_workfile_methods class=md-nav__link> <span class=md-ellipsis> validate_workfile_methods </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.IWorkfileHost.work_root class=md-nav__link> <span class=md-ellipsis> work_root </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.IWorkfileHost.workfile_has_unsaved_changes class=md-nav__link> <span class=md-ellipsis> workfile_has_unsaved_changes </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>host</h1> <div class="doc doc-object doc-module"> <a id=client.ayon_core.host></a> <div class="doc doc-contents first"> <div class="doc doc-children"> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.host.HostBase class="doc doc-heading"> <code>HostBase</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=abc.ABC>ABC</span></code></p> <p>Base of host implementation class.</p> <p>Host is pipeline implementation of DCC application. This class should help to identify what must/should/can be implemented for specific functionality.</p> <p>Compared to 'avalon' concept: What was before considered as functions in host implementation folder. The host implementation should primarily care about adding ability of creation (mark products to be published) and optionally about referencing published representations as containers.</p> <p>Host may need extend some functionality like working with workfiles or loading. Not all host implementations may allow that for those purposes can be logic extended with implementing functions for the purpose. There are prepared interfaces to be able identify what must be implemented to be able use that functionality. - current statement is that it is not required to inherit from interfaces but all of the methods are validated (only their existence!)</p> <h3 id=client.ayon_core.host.HostBase--installation-of-host-before-avalon-concept>Installation of host before (avalon concept):</h3> <pre><code class=language-python>from ayon_core.pipeline import install_host
import ayon_core.hosts.maya.api as host

install_host(host)
</code></pre> <h3 id=client.ayon_core.host.HostBase--installation-of-host-now>Installation of host now:</h3> <pre><code class=language-python>from ayon_core.pipeline import install_host
from ayon_core.hosts.maya.api import MayaHost

host = MayaHost()
install_host(host)
</code></pre> <details class=todo open> <summary>Todo</summary> <ul> <li>move content of 'install_host' as method of this class<ul> <li>register host object</li> <li>install global plugin paths</li> </ul> </li> <li>store registered plugin paths to this object</li> <li>handle current context (project, asset, task)<ul> <li>this must be done in many separated steps</li> </ul> </li> <li>have it's object of host tools instead of using globals</li> </ul> </details> <p>This implementation will probably change over time when more functionality and responsibility will be added.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/host/host.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 10</span>
<span class=normal> 11</span>
<span class=normal> 12</span>
<span class=normal> 13</span>
<span class=normal> 14</span>
<span class=normal> 15</span>
<span class=normal> 16</span>
<span class=normal> 17</span>
<span class=normal> 18</span>
<span class=normal> 19</span>
<span class=normal> 20</span>
<span class=normal> 21</span>
<span class=normal> 22</span>
<span class=normal> 23</span>
<span class=normal> 24</span>
<span class=normal> 25</span>
<span class=normal> 26</span>
<span class=normal> 27</span>
<span class=normal> 28</span>
<span class=normal> 29</span>
<span class=normal> 30</span>
<span class=normal> 31</span>
<span class=normal> 32</span>
<span class=normal> 33</span>
<span class=normal> 34</span>
<span class=normal> 35</span>
<span class=normal> 36</span>
<span class=normal> 37</span>
<span class=normal> 38</span>
<span class=normal> 39</span>
<span class=normal> 40</span>
<span class=normal> 41</span>
<span class=normal> 42</span>
<span class=normal> 43</span>
<span class=normal> 44</span>
<span class=normal> 45</span>
<span class=normal> 46</span>
<span class=normal> 47</span>
<span class=normal> 48</span>
<span class=normal> 49</span>
<span class=normal> 50</span>
<span class=normal> 51</span>
<span class=normal> 52</span>
<span class=normal> 53</span>
<span class=normal> 54</span>
<span class=normal> 55</span>
<span class=normal> 56</span>
<span class=normal> 57</span>
<span class=normal> 58</span>
<span class=normal> 59</span>
<span class=normal> 60</span>
<span class=normal> 61</span>
<span class=normal> 62</span>
<span class=normal> 63</span>
<span class=normal> 64</span>
<span class=normal> 65</span>
<span class=normal> 66</span>
<span class=normal> 67</span>
<span class=normal> 68</span>
<span class=normal> 69</span>
<span class=normal> 70</span>
<span class=normal> 71</span>
<span class=normal> 72</span>
<span class=normal> 73</span>
<span class=normal> 74</span>
<span class=normal> 75</span>
<span class=normal> 76</span>
<span class=normal> 77</span>
<span class=normal> 78</span>
<span class=normal> 79</span>
<span class=normal> 80</span>
<span class=normal> 81</span>
<span class=normal> 82</span>
<span class=normal> 83</span>
<span class=normal> 84</span>
<span class=normal> 85</span>
<span class=normal> 86</span>
<span class=normal> 87</span>
<span class=normal> 88</span>
<span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>HostBase</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Base of host implementation class.</span>

<span class=sd>    Host is pipeline implementation of DCC application. This class should help</span>
<span class=sd>    to identify what must/should/can be implemented for specific functionality.</span>

<span class=sd>    Compared to &#39;avalon&#39; concept:</span>
<span class=sd>    What was before considered as functions in host implementation folder. The</span>
<span class=sd>    host implementation should primarily care about adding ability of creation</span>
<span class=sd>    (mark products to be published) and optionally about referencing published</span>
<span class=sd>    representations as containers.</span>

<span class=sd>    Host may need extend some functionality like working with workfiles</span>
<span class=sd>    or loading. Not all host implementations may allow that for those purposes</span>
<span class=sd>    can be logic extended with implementing functions for the purpose. There</span>
<span class=sd>    are prepared interfaces to be able identify what must be implemented to</span>
<span class=sd>    be able use that functionality.</span>
<span class=sd>    - current statement is that it is not required to inherit from interfaces</span>
<span class=sd>        but all of the methods are validated (only their existence!)</span>

<span class=sd>    # Installation of host before (avalon concept):</span>
<span class=sd>    ```python</span>
<span class=sd>    from ayon_core.pipeline import install_host</span>
<span class=sd>    import ayon_core.hosts.maya.api as host</span>

<span class=sd>    install_host(host)</span>
<span class=sd>    ```</span>

<span class=sd>    # Installation of host now:</span>
<span class=sd>    ```python</span>
<span class=sd>    from ayon_core.pipeline import install_host</span>
<span class=sd>    from ayon_core.hosts.maya.api import MayaHost</span>

<span class=sd>    host = MayaHost()</span>
<span class=sd>    install_host(host)</span>
<span class=sd>    ```</span>

<span class=sd>    Todo:</span>
<span class=sd>        - move content of &#39;install_host&#39; as method of this class</span>
<span class=sd>            - register host object</span>
<span class=sd>            - install global plugin paths</span>
<span class=sd>        - store registered plugin paths to this object</span>
<span class=sd>        - handle current context (project, asset, task)</span>
<span class=sd>            - this must be done in many separated steps</span>
<span class=sd>        - have it&#39;s object of host tools instead of using globals</span>

<span class=sd>    This implementation will probably change over time when more</span>
<span class=sd>        functionality and responsibility will be added.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>_log</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Initialization of host.</span>

<span class=sd>        Register DCC callbacks, host specific plugin paths, targets etc.</span>
<span class=sd>        (Part of what &#39;install&#39; did in &#39;avalon&#39; concept.)</span>

<span class=sd>        Note:</span>
<span class=sd>            At this moment global &quot;installation&quot; must happen before host</span>
<span class=sd>            installation. Because of this current limitation it is recommended</span>
<span class=sd>            to implement &#39;install&#39; method which is triggered after global</span>
<span class=sd>            &#39;install&#39;.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>pass</span>

    <span class=k>def</span><span class=w> </span><span class=nf>install</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Install host specific functionality.</span>

<span class=sd>        This is where should be added menu with tools, registered callbacks</span>
<span class=sd>        and other host integration initialization.</span>

<span class=sd>        It is called automatically when &#39;ayon_core.pipeline.install_host&#39; is</span>
<span class=sd>        triggered.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>pass</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>log</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_log</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_log</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>getLogger</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=p>)</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_log</span>

    <span class=nd>@abstractproperty</span>
    <span class=k>def</span><span class=w> </span><span class=nf>name</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Host name.&quot;&quot;&quot;</span>

        <span class=k>pass</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_current_project_name</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Returns:</span>
<span class=sd>            Union[str, None]: Current project name.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AYON_PROJECT_NAME&quot;</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_current_folder_path</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Returns:</span>
<span class=sd>            Union[str, None]: Current asset name.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AYON_FOLDER_PATH&quot;</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_current_task_name</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Returns:</span>
<span class=sd>            Union[str, None]: Current task name.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AYON_TASK_NAME&quot;</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_current_context</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get current context information.</span>

<span class=sd>        This method should be used to get current context of host. Usage of</span>
<span class=sd>        this method can be crucial for host implementations in DCCs where</span>
<span class=sd>        can be opened multiple workfiles at one moment and change of context</span>
<span class=sd>        can&#39;t be caught properly.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Dict[str, Union[str, None]]: Context with 3 keys &#39;project_name&#39;,</span>
<span class=sd>                &#39;folder_path&#39; and &#39;task_name&#39;. All of them can be &#39;None&#39;.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=p>{</span>
            <span class=s2>&quot;project_name&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_project_name</span><span class=p>(),</span>
            <span class=s2>&quot;folder_path&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_folder_path</span><span class=p>(),</span>
            <span class=s2>&quot;task_name&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_task_name</span><span class=p>()</span>
        <span class=p>}</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_context_title</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Context title shown for UI purposes.</span>

<span class=sd>        Should return current context title if possible.</span>

<span class=sd>        Note:</span>
<span class=sd>            This method is used only for UI purposes so it is possible to</span>
<span class=sd>                return some logical title for contextless cases.</span>
<span class=sd>            Is not meant for &quot;Context menu&quot; label.</span>

<span class=sd>        Returns:</span>
<span class=sd>            str: Context title.</span>
<span class=sd>            None: Default title is used based on UI implementation.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=c1># Use current context to fill the context title</span>
        <span class=n>current_context</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_context</span><span class=p>()</span>
        <span class=n>project_name</span> <span class=o>=</span> <span class=n>current_context</span><span class=p>[</span><span class=s2>&quot;project_name&quot;</span><span class=p>]</span>
        <span class=n>folder_path</span> <span class=o>=</span> <span class=n>current_context</span><span class=p>[</span><span class=s2>&quot;folder_path&quot;</span><span class=p>]</span>
        <span class=n>task_name</span> <span class=o>=</span> <span class=n>current_context</span><span class=p>[</span><span class=s2>&quot;task_name&quot;</span><span class=p>]</span>
        <span class=n>items</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>if</span> <span class=n>project_name</span><span class=p>:</span>
            <span class=n>items</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>folder_path</span><span class=p>:</span>
                <span class=n>items</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>folder_path</span><span class=o>.</span><span class=n>lstrip</span><span class=p>(</span><span class=s2>&quot;/&quot;</span><span class=p>))</span>
                <span class=k>if</span> <span class=n>task_name</span><span class=p>:</span>
                    <span class=n>items</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>task_name</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>items</span><span class=p>:</span>
            <span class=k>return</span> <span class=s2>&quot;/&quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>items</span><span class=p>)</span>
        <span class=k>return</span> <span class=kc>None</span>

    <span class=nd>@contextlib</span><span class=o>.</span><span class=n>contextmanager</span>
    <span class=k>def</span><span class=w> </span><span class=nf>maintained_selection</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Some functionlity will happen but selection should stay same.</span>

<span class=sd>        This is DCC specific. Some may not allow to implement this ability</span>
<span class=sd>        that is reason why default implementation is empty context manager.</span>

<span class=sd>        Yields:</span>
<span class=sd>            None: Yield when is ready to restore selected at the end.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>try</span><span class=p>:</span>
            <span class=k>yield</span>
        <span class=k>finally</span><span class=p>:</span>
            <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.HostBase.__init__ class="doc doc-heading"> <code class="highlight language-python"><span class=fm>__init__</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Initialization of host.</p> <p>Register DCC callbacks, host specific plugin paths, targets etc. (Part of what 'install' did in 'avalon' concept.)</p> <details class=note open> <summary>Note</summary> <p>At this moment global "installation" must happen before host installation. Because of this current limitation it is recommended to implement 'install' method which is triggered after global 'install'.</p> </details> <details class=quote> <summary>Source code in <code>client/ayon_core/host/host.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>62</span>
<span class=normal>63</span>
<span class=normal>64</span>
<span class=normal>65</span>
<span class=normal>66</span>
<span class=normal>67</span>
<span class=normal>68</span>
<span class=normal>69</span>
<span class=normal>70</span>
<span class=normal>71</span>
<span class=normal>72</span>
<span class=normal>73</span>
<span class=normal>74</span>
<span class=normal>75</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Initialization of host.</span>

<span class=sd>    Register DCC callbacks, host specific plugin paths, targets etc.</span>
<span class=sd>    (Part of what &#39;install&#39; did in &#39;avalon&#39; concept.)</span>

<span class=sd>    Note:</span>
<span class=sd>        At this moment global &quot;installation&quot; must happen before host</span>
<span class=sd>        installation. Because of this current limitation it is recommended</span>
<span class=sd>        to implement &#39;install&#39; method which is triggered after global</span>
<span class=sd>        &#39;install&#39;.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.HostBase.get_context_title class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_context_title</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Context title shown for UI purposes.</p> <p>Should return current context title if possible.</p> <details class=note open> <summary>Note</summary> <p>This method is used only for UI purposes so it is possible to return some logical title for contextless cases. Is not meant for "Context menu" label.</p> </details> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>Context title.</p> </div> </td> </tr> <tr class=doc-section-item> <td><code>None</code></td> <td> </td> <td> <div class=doc-md-description> <p>Default title is used based on UI implementation.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/host/host.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_context_title</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Context title shown for UI purposes.</span>

<span class=sd>    Should return current context title if possible.</span>

<span class=sd>    Note:</span>
<span class=sd>        This method is used only for UI purposes so it is possible to</span>
<span class=sd>            return some logical title for contextless cases.</span>
<span class=sd>        Is not meant for &quot;Context menu&quot; label.</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: Context title.</span>
<span class=sd>        None: Default title is used based on UI implementation.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=c1># Use current context to fill the context title</span>
    <span class=n>current_context</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_context</span><span class=p>()</span>
    <span class=n>project_name</span> <span class=o>=</span> <span class=n>current_context</span><span class=p>[</span><span class=s2>&quot;project_name&quot;</span><span class=p>]</span>
    <span class=n>folder_path</span> <span class=o>=</span> <span class=n>current_context</span><span class=p>[</span><span class=s2>&quot;folder_path&quot;</span><span class=p>]</span>
    <span class=n>task_name</span> <span class=o>=</span> <span class=n>current_context</span><span class=p>[</span><span class=s2>&quot;task_name&quot;</span><span class=p>]</span>
    <span class=n>items</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>if</span> <span class=n>project_name</span><span class=p>:</span>
        <span class=n>items</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>folder_path</span><span class=p>:</span>
            <span class=n>items</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>folder_path</span><span class=o>.</span><span class=n>lstrip</span><span class=p>(</span><span class=s2>&quot;/&quot;</span><span class=p>))</span>
            <span class=k>if</span> <span class=n>task_name</span><span class=p>:</span>
                <span class=n>items</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>task_name</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>items</span><span class=p>:</span>
        <span class=k>return</span> <span class=s2>&quot;/&quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>items</span><span class=p>)</span>
    <span class=k>return</span> <span class=kc>None</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.HostBase.get_current_context class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_current_context</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Get current context information.</p> <p>This method should be used to get current context of host. Usage of this method can be crucial for host implementations in DCCs where can be opened multiple workfiles at one moment and change of context can't be caught properly.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Dict[str, Union[str, None]]: Context with 3 keys 'project_name', 'folder_path' and 'task_name'. All of them can be 'None'.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/host/host.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_current_context</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get current context information.</span>

<span class=sd>    This method should be used to get current context of host. Usage of</span>
<span class=sd>    this method can be crucial for host implementations in DCCs where</span>
<span class=sd>    can be opened multiple workfiles at one moment and change of context</span>
<span class=sd>    can&#39;t be caught properly.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Dict[str, Union[str, None]]: Context with 3 keys &#39;project_name&#39;,</span>
<span class=sd>            &#39;folder_path&#39; and &#39;task_name&#39;. All of them can be &#39;None&#39;.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=p>{</span>
        <span class=s2>&quot;project_name&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_project_name</span><span class=p>(),</span>
        <span class=s2>&quot;folder_path&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_folder_path</span><span class=p>(),</span>
        <span class=s2>&quot;task_name&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_task_name</span><span class=p>()</span>
    <span class=p>}</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.HostBase.get_current_folder_path class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_current_folder_path</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Union[str, None]: Current asset name.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/host/host.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_current_folder_path</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Returns:</span>
<span class=sd>        Union[str, None]: Current asset name.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AYON_FOLDER_PATH&quot;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.HostBase.get_current_project_name class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_current_project_name</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Union[str, None]: Current project name.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/host/host.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_current_project_name</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Returns:</span>
<span class=sd>        Union[str, None]: Current project name.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AYON_PROJECT_NAME&quot;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.HostBase.get_current_task_name class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_current_task_name</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Union[str, None]: Current task name.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/host/host.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_current_task_name</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Returns:</span>
<span class=sd>        Union[str, None]: Current task name.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AYON_TASK_NAME&quot;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.HostBase.install class="doc doc-heading"> <code class="highlight language-python"><span class=n>install</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Install host specific functionality.</p> <p>This is where should be added menu with tools, registered callbacks and other host integration initialization.</p> <p>It is called automatically when 'ayon_core.pipeline.install_host' is triggered.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/host/host.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>77</span>
<span class=normal>78</span>
<span class=normal>79</span>
<span class=normal>80</span>
<span class=normal>81</span>
<span class=normal>82</span>
<span class=normal>83</span>
<span class=normal>84</span>
<span class=normal>85</span>
<span class=normal>86</span>
<span class=normal>87</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>install</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Install host specific functionality.</span>

<span class=sd>    This is where should be added menu with tools, registered callbacks</span>
<span class=sd>    and other host integration initialization.</span>

<span class=sd>    It is called automatically when &#39;ayon_core.pipeline.install_host&#39; is</span>
<span class=sd>    triggered.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.HostBase.maintained_selection class="doc doc-heading"> <code class="highlight language-python"><span class=n>maintained_selection</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Some functionlity will happen but selection should stay same.</p> <p>This is DCC specific. Some may not allow to implement this ability that is reason why default implementation is empty context manager.</p> <p><span class=doc-section-title>Yields:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>None</code></td> <td> </td> <td> <div class=doc-md-description> <p>Yield when is ready to restore selected at the end.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/host/host.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@contextlib</span><span class=o>.</span><span class=n>contextmanager</span>
<span class=k>def</span><span class=w> </span><span class=nf>maintained_selection</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Some functionlity will happen but selection should stay same.</span>

<span class=sd>    This is DCC specific. Some may not allow to implement this ability</span>
<span class=sd>    that is reason why default implementation is empty context manager.</span>

<span class=sd>    Yields:</span>
<span class=sd>        None: Yield when is ready to restore selected at the end.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>try</span><span class=p>:</span>
        <span class=k>yield</span>
    <span class=k>finally</span><span class=p>:</span>
        <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.HostBase.name class="doc doc-heading"> <code class="highlight language-python"><span class=n>name</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Host name.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/host/host.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>95</span>
<span class=normal>96</span>
<span class=normal>97</span>
<span class=normal>98</span>
<span class=normal>99</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@abstractproperty</span>
<span class=k>def</span><span class=w> </span><span class=nf>name</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Host name.&quot;&quot;&quot;</span>

    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.host.HostDirmap class="doc doc-heading"> <code>HostDirmap</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=abc.ABC>ABC</span></code></p> <p>Abstract class for running dirmap on a workfile in a host.</p> <p>Dirmap is used to translate paths inside of host workfile from one OS to another. (Eg. arstist created workfile on Win, different artists opens same file on Linux.)</p> <details class=expects-methods-to-be-implemented-inside-of-host open> <summary>Expects methods to be implemented inside of host</summary> <p>on_dirmap_enabled: run host code for enabling dirmap do_dirmap: run host code to do actual remapping</p> </details> <details class=quote> <summary>Source code in <code>client/ayon_core/host/dirmap.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 18</span>
<span class=normal> 19</span>
<span class=normal> 20</span>
<span class=normal> 21</span>
<span class=normal> 22</span>
<span class=normal> 23</span>
<span class=normal> 24</span>
<span class=normal> 25</span>
<span class=normal> 26</span>
<span class=normal> 27</span>
<span class=normal> 28</span>
<span class=normal> 29</span>
<span class=normal> 30</span>
<span class=normal> 31</span>
<span class=normal> 32</span>
<span class=normal> 33</span>
<span class=normal> 34</span>
<span class=normal> 35</span>
<span class=normal> 36</span>
<span class=normal> 37</span>
<span class=normal> 38</span>
<span class=normal> 39</span>
<span class=normal> 40</span>
<span class=normal> 41</span>
<span class=normal> 42</span>
<span class=normal> 43</span>
<span class=normal> 44</span>
<span class=normal> 45</span>
<span class=normal> 46</span>
<span class=normal> 47</span>
<span class=normal> 48</span>
<span class=normal> 49</span>
<span class=normal> 50</span>
<span class=normal> 51</span>
<span class=normal> 52</span>
<span class=normal> 53</span>
<span class=normal> 54</span>
<span class=normal> 55</span>
<span class=normal> 56</span>
<span class=normal> 57</span>
<span class=normal> 58</span>
<span class=normal> 59</span>
<span class=normal> 60</span>
<span class=normal> 61</span>
<span class=normal> 62</span>
<span class=normal> 63</span>
<span class=normal> 64</span>
<span class=normal> 65</span>
<span class=normal> 66</span>
<span class=normal> 67</span>
<span class=normal> 68</span>
<span class=normal> 69</span>
<span class=normal> 70</span>
<span class=normal> 71</span>
<span class=normal> 72</span>
<span class=normal> 73</span>
<span class=normal> 74</span>
<span class=normal> 75</span>
<span class=normal> 76</span>
<span class=normal> 77</span>
<span class=normal> 78</span>
<span class=normal> 79</span>
<span class=normal> 80</span>
<span class=normal> 81</span>
<span class=normal> 82</span>
<span class=normal> 83</span>
<span class=normal> 84</span>
<span class=normal> 85</span>
<span class=normal> 86</span>
<span class=normal> 87</span>
<span class=normal> 88</span>
<span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>HostDirmap</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Abstract class for running dirmap on a workfile in a host.</span>

<span class=sd>    Dirmap is used to translate paths inside of host workfile from one</span>
<span class=sd>    OS to another. (Eg. arstist created workfile on Win, different artists</span>
<span class=sd>    opens same file on Linux.)</span>

<span class=sd>    Expects methods to be implemented inside of host:</span>
<span class=sd>        on_dirmap_enabled: run host code for enabling dirmap</span>
<span class=sd>        do_dirmap: run host code to do actual remapping</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>host_name</span><span class=p>,</span>
        <span class=n>project_name</span><span class=p>,</span>
        <span class=n>project_settings</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>sitesync_addon</span><span class=o>=</span><span class=kc>None</span>
    <span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>host_name</span> <span class=o>=</span> <span class=n>host_name</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>project_name</span> <span class=o>=</span> <span class=n>project_name</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_project_settings</span> <span class=o>=</span> <span class=n>project_settings</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_sitesync_addon</span> <span class=o>=</span> <span class=n>sitesync_addon</span>
        <span class=c1># to limit reinit of Modules</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_sitesync_addon_discovered</span> <span class=o>=</span> <span class=n>sitesync_addon</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_log</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>sitesync_addon</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_sitesync_addon_discovered</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_sitesync_addon_discovered</span> <span class=o>=</span> <span class=kc>True</span>
            <span class=n>manager</span> <span class=o>=</span> <span class=n>AddonsManager</span><span class=p>()</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_sitesync_addon</span> <span class=o>=</span> <span class=n>manager</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;sitesync&quot;</span><span class=p>)</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_sitesync_addon</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>project_settings</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_project_settings</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_project_settings</span> <span class=o>=</span> <span class=n>get_project_settings</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>project_name</span><span class=p>)</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_project_settings</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>log</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_log</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_log</span> <span class=o>=</span> <span class=n>Logger</span><span class=o>.</span><span class=n>get_logger</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=p>)</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_log</span>

    <span class=nd>@abstractmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>on_enable_dirmap</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Run host dependent operation for enabling dirmap if necessary.&quot;&quot;&quot;</span>
        <span class=k>pass</span>

    <span class=nd>@abstractmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>dirmap_routine</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>source_path</span><span class=p>,</span> <span class=n>destination_path</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Run host dependent remapping from source_path to destination_path&quot;&quot;&quot;</span>
        <span class=k>pass</span>

    <span class=k>def</span><span class=w> </span><span class=nf>process_dirmap</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>mapping</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=c1># type: (dict) -&gt; None</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Go through all paths in Settings and set them using `dirmap`.</span>

<span class=sd>            If artists has Site Sync enabled, take dirmap mapping directly from</span>
<span class=sd>            Local Settings when artist is syncing workfile locally.</span>

<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>mapping</span><span class=p>:</span>
            <span class=n>mapping</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_mappings</span><span class=p>()</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>mapping</span><span class=p>:</span>
            <span class=k>return</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>on_enable_dirmap</span><span class=p>()</span>

        <span class=k>for</span> <span class=n>k</span><span class=p>,</span> <span class=n>sp</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>mapping</span><span class=p>[</span><span class=s2>&quot;source_path&quot;</span><span class=p>]):</span>
            <span class=n>dst</span> <span class=o>=</span> <span class=n>mapping</span><span class=p>[</span><span class=s2>&quot;destination_path&quot;</span><span class=p>][</span><span class=n>k</span><span class=p>]</span>
            <span class=k>try</span><span class=p>:</span>
                <span class=c1># add trailing slash if missing</span>
                <span class=n>sp</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>sp</span><span class=p>,</span> <span class=s1>&#39;&#39;</span><span class=p>)</span>
                <span class=n>dst</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>dst</span><span class=p>,</span> <span class=s1>&#39;&#39;</span><span class=p>)</span>
                <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;</span><span class=si>{}</span><span class=s2> -&gt; </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>sp</span><span class=p>,</span> <span class=n>dst</span><span class=p>))</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>dirmap_routine</span><span class=p>(</span><span class=n>sp</span><span class=p>,</span> <span class=n>dst</span><span class=p>)</span>
            <span class=k>except</span> <span class=ne>IndexError</span><span class=p>:</span>
                <span class=c1># missing corresponding destination path</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>error</span><span class=p>((</span>
                    <span class=s2>&quot;invalid dirmap mapping, missing corresponding&quot;</span>
                    <span class=s2>&quot; destination directory.&quot;</span>
                <span class=p>))</span>
                <span class=k>break</span>
            <span class=k>except</span> <span class=ne>RuntimeError</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>error</span><span class=p>(</span>
                    <span class=s2>&quot;invalid path </span><span class=si>{}</span><span class=s2> -&gt; </span><span class=si>{}</span><span class=s2>, mapping not registered&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                        <span class=n>sp</span><span class=p>,</span> <span class=n>dst</span>
                    <span class=p>)</span>
                <span class=p>)</span>
                <span class=k>continue</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_mappings</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get translation from source_path to destination_path.</span>

<span class=sd>            It checks if Site Sync is enabled and user chose to use local</span>
<span class=sd>            site, in that case configuration in Local Settings takes precedence</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>mapping_sett</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>project_settings</span><span class=p>[</span><span class=bp>self</span><span class=o>.</span><span class=n>host_name</span><span class=p>]</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;dirmap&quot;</span><span class=p>,</span> <span class=p>{})</span>
        <span class=n>local_mapping</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_local_sync_dirmap</span><span class=p>()</span>
        <span class=n>mapping_enabled</span> <span class=o>=</span> <span class=n>mapping_sett</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;enabled&quot;</span><span class=p>)</span> <span class=ow>or</span> <span class=nb>bool</span><span class=p>(</span><span class=n>local_mapping</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>mapping_enabled</span><span class=p>:</span>
            <span class=k>return</span> <span class=p>{}</span>

        <span class=n>mapping</span> <span class=o>=</span> <span class=p>(</span>
            <span class=n>local_mapping</span>
            <span class=ow>or</span> <span class=n>mapping_sett</span><span class=p>[</span><span class=s2>&quot;paths&quot;</span><span class=p>]</span>
            <span class=ow>or</span> <span class=p>{}</span>
        <span class=p>)</span>

        <span class=k>if</span> <span class=p>(</span>
            <span class=ow>not</span> <span class=n>mapping</span>
            <span class=ow>or</span> <span class=ow>not</span> <span class=n>mapping</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;destination_path&quot;</span><span class=p>)</span>
            <span class=ow>or</span> <span class=ow>not</span> <span class=n>mapping</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;source_path&quot;</span><span class=p>)</span>
        <span class=p>):</span>
            <span class=k>return</span> <span class=p>{}</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Processing directory mapping ...&quot;</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;mapping:: </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>mapping</span><span class=p>))</span>
        <span class=k>return</span> <span class=n>mapping</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_get_local_sync_dirmap</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>            Returns dirmap if synch to local project is enabled.</span>

<span class=sd>            Only valid mapping is from roots of remote site to local site set</span>
<span class=sd>            in Local Settings.</span>

<span class=sd>            Returns:</span>
<span class=sd>                dict : { &quot;source_path&quot;: [XXX], &quot;destination_path&quot;: [YYYY]}</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>project_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>project_name</span>

        <span class=n>sitesync_addon</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>sitesync_addon</span>
        <span class=n>mapping</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=k>if</span> <span class=p>(</span>
            <span class=n>sitesync_addon</span> <span class=ow>is</span> <span class=kc>None</span>
            <span class=ow>or</span> <span class=ow>not</span> <span class=n>sitesync_addon</span><span class=o>.</span><span class=n>enabled</span>
            <span class=ow>or</span> <span class=ow>not</span> <span class=n>sitesync_addon</span><span class=o>.</span><span class=n>is_project_enabled</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>
        <span class=p>):</span>
            <span class=k>return</span> <span class=n>mapping</span>

        <span class=n>active_site</span> <span class=o>=</span> <span class=n>sitesync_addon</span><span class=o>.</span><span class=n>get_local_normalized_site</span><span class=p>(</span>
            <span class=n>sitesync_addon</span><span class=o>.</span><span class=n>get_active_site</span><span class=p>(</span><span class=n>project_name</span><span class=p>))</span>
        <span class=n>remote_site</span> <span class=o>=</span> <span class=n>sitesync_addon</span><span class=o>.</span><span class=n>get_local_normalized_site</span><span class=p>(</span>
            <span class=n>sitesync_addon</span><span class=o>.</span><span class=n>get_remote_site</span><span class=p>(</span><span class=n>project_name</span><span class=p>))</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
            <span class=s2>&quot;active </span><span class=si>{}</span><span class=s2> - remote </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>active_site</span><span class=p>,</span> <span class=n>remote_site</span><span class=p>)</span>
        <span class=p>)</span>

        <span class=k>if</span> <span class=n>active_site</span> <span class=o>==</span> <span class=s2>&quot;local&quot;</span> <span class=ow>and</span> <span class=n>active_site</span> <span class=o>!=</span> <span class=n>remote_site</span><span class=p>:</span>
            <span class=n>sync_settings</span> <span class=o>=</span> <span class=n>sitesync_addon</span><span class=o>.</span><span class=n>get_sync_project_setting</span><span class=p>(</span>
                <span class=n>project_name</span><span class=p>,</span>
                <span class=n>exclude_locals</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
                <span class=n>cached</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>

            <span class=c1># overrides for roots set in `Site Settings`</span>
            <span class=n>active_roots_overrides</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_site_root_overrides</span><span class=p>(</span>
                <span class=n>sitesync_addon</span><span class=p>,</span> <span class=n>project_name</span><span class=p>,</span> <span class=n>active_site</span><span class=p>)</span>

            <span class=n>remote_roots_overrides</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_site_root_overrides</span><span class=p>(</span>
                <span class=n>sitesync_addon</span><span class=p>,</span> <span class=n>project_name</span><span class=p>,</span> <span class=n>remote_site</span><span class=p>)</span>

            <span class=n>current_platform</span> <span class=o>=</span> <span class=n>platform</span><span class=o>.</span><span class=n>system</span><span class=p>()</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span>
            <span class=n>remote_provider</span> <span class=o>=</span> <span class=n>sitesync_addon</span><span class=o>.</span><span class=n>get_provider_for_site</span><span class=p>(</span>
                <span class=n>project_name</span><span class=p>,</span> <span class=n>remote_site</span>
            <span class=p>)</span>
            <span class=c1># dirmap has sense only with regular disk provider, in the workfile</span>
            <span class=c1># won&#39;t be root on cloud or sftp provider so fallback to studio</span>
            <span class=k>if</span> <span class=n>remote_provider</span> <span class=o>!=</span> <span class=s2>&quot;local_drive&quot;</span><span class=p>:</span>
                <span class=n>remote_site</span> <span class=o>=</span> <span class=s2>&quot;studio&quot;</span>
            <span class=k>for</span> <span class=n>root_name</span><span class=p>,</span> <span class=n>active_site_dir</span> <span class=ow>in</span> <span class=n>active_roots_overrides</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
                <span class=n>remote_site_dir</span> <span class=o>=</span> <span class=p>(</span>
                    <span class=n>remote_roots_overrides</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>root_name</span><span class=p>)</span>
                    <span class=ow>or</span> <span class=n>sync_settings</span><span class=p>[</span><span class=s2>&quot;sites&quot;</span><span class=p>][</span><span class=n>remote_site</span><span class=p>][</span><span class=s2>&quot;root&quot;</span><span class=p>][</span><span class=n>root_name</span><span class=p>]</span>
                <span class=p>)</span>

                <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>remote_site_dir</span><span class=p>,</span> <span class=nb>dict</span><span class=p>):</span>
                    <span class=n>remote_site_dir</span> <span class=o>=</span> <span class=n>remote_site_dir</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>current_platform</span><span class=p>)</span>

                <span class=k>if</span> <span class=ow>not</span> <span class=n>remote_site_dir</span><span class=p>:</span>
                    <span class=k>continue</span>

                <span class=k>if</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>isdir</span><span class=p>(</span><span class=n>active_site_dir</span><span class=p>):</span>
                    <span class=k>if</span> <span class=s2>&quot;destination_path&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>mapping</span><span class=p>:</span>
                        <span class=n>mapping</span><span class=p>[</span><span class=s2>&quot;destination_path&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=p>[]</span>
                    <span class=n>mapping</span><span class=p>[</span><span class=s2>&quot;destination_path&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>active_site_dir</span><span class=p>)</span>

                    <span class=k>if</span> <span class=s2>&quot;source_path&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>mapping</span><span class=p>:</span>
                        <span class=n>mapping</span><span class=p>[</span><span class=s2>&quot;source_path&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=p>[]</span>
                    <span class=n>mapping</span><span class=p>[</span><span class=s2>&quot;source_path&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>remote_site_dir</span><span class=p>)</span>

            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;local sync mapping:: </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>mapping</span><span class=p>))</span>
        <span class=k>return</span> <span class=n>mapping</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_get_site_root_overrides</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span> <span class=n>sitesync_addon</span><span class=p>,</span> <span class=n>project_name</span><span class=p>,</span> <span class=n>site_name</span>
    <span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Safely handle root overrides.</span>

<span class=sd>        SiteSync raises ValueError for non local or studio sites.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=c1># TODO: could be removed when `get_site_root_overrides` is not raising</span>
        <span class=c1>#     an Error but just returns {}</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=n>site_roots_overrides</span> <span class=o>=</span> <span class=n>sitesync_addon</span><span class=o>.</span><span class=n>get_site_root_overrides</span><span class=p>(</span>
                <span class=n>project_name</span><span class=p>,</span> <span class=n>site_name</span><span class=p>)</span>
        <span class=k>except</span> <span class=ne>ValueError</span><span class=p>:</span>
            <span class=n>site_roots_overrides</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;</span><span class=si>{}</span><span class=s2> roots overrides </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
            <span class=n>site_name</span><span class=p>,</span> <span class=n>site_roots_overrides</span><span class=p>))</span>

        <span class=k>return</span> <span class=n>site_roots_overrides</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.HostDirmap._get_local_sync_dirmap class="doc doc-heading"> <code class="highlight language-python"><span class=n>_get_local_sync_dirmap</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Returns dirmap if synch to local project is enabled.</p> <p>Only valid mapping is from roots of remote site to local site set in Local Settings.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>dict</code></td> <td> </td> <td> <div class=doc-md-description> <p>{ "source_path": [XXX], "destination_path": [YYYY]}</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/host/dirmap.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>_get_local_sync_dirmap</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Returns dirmap if synch to local project is enabled.</span>

<span class=sd>        Only valid mapping is from roots of remote site to local site set</span>
<span class=sd>        in Local Settings.</span>

<span class=sd>        Returns:</span>
<span class=sd>            dict : { &quot;source_path&quot;: [XXX], &quot;destination_path&quot;: [YYYY]}</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>project_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>project_name</span>

    <span class=n>sitesync_addon</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>sitesync_addon</span>
    <span class=n>mapping</span> <span class=o>=</span> <span class=p>{}</span>
    <span class=k>if</span> <span class=p>(</span>
        <span class=n>sitesync_addon</span> <span class=ow>is</span> <span class=kc>None</span>
        <span class=ow>or</span> <span class=ow>not</span> <span class=n>sitesync_addon</span><span class=o>.</span><span class=n>enabled</span>
        <span class=ow>or</span> <span class=ow>not</span> <span class=n>sitesync_addon</span><span class=o>.</span><span class=n>is_project_enabled</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>
    <span class=p>):</span>
        <span class=k>return</span> <span class=n>mapping</span>

    <span class=n>active_site</span> <span class=o>=</span> <span class=n>sitesync_addon</span><span class=o>.</span><span class=n>get_local_normalized_site</span><span class=p>(</span>
        <span class=n>sitesync_addon</span><span class=o>.</span><span class=n>get_active_site</span><span class=p>(</span><span class=n>project_name</span><span class=p>))</span>
    <span class=n>remote_site</span> <span class=o>=</span> <span class=n>sitesync_addon</span><span class=o>.</span><span class=n>get_local_normalized_site</span><span class=p>(</span>
        <span class=n>sitesync_addon</span><span class=o>.</span><span class=n>get_remote_site</span><span class=p>(</span><span class=n>project_name</span><span class=p>))</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
        <span class=s2>&quot;active </span><span class=si>{}</span><span class=s2> - remote </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>active_site</span><span class=p>,</span> <span class=n>remote_site</span><span class=p>)</span>
    <span class=p>)</span>

    <span class=k>if</span> <span class=n>active_site</span> <span class=o>==</span> <span class=s2>&quot;local&quot;</span> <span class=ow>and</span> <span class=n>active_site</span> <span class=o>!=</span> <span class=n>remote_site</span><span class=p>:</span>
        <span class=n>sync_settings</span> <span class=o>=</span> <span class=n>sitesync_addon</span><span class=o>.</span><span class=n>get_sync_project_setting</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span>
            <span class=n>exclude_locals</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
            <span class=n>cached</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>

        <span class=c1># overrides for roots set in `Site Settings`</span>
        <span class=n>active_roots_overrides</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_site_root_overrides</span><span class=p>(</span>
            <span class=n>sitesync_addon</span><span class=p>,</span> <span class=n>project_name</span><span class=p>,</span> <span class=n>active_site</span><span class=p>)</span>

        <span class=n>remote_roots_overrides</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_site_root_overrides</span><span class=p>(</span>
            <span class=n>sitesync_addon</span><span class=p>,</span> <span class=n>project_name</span><span class=p>,</span> <span class=n>remote_site</span><span class=p>)</span>

        <span class=n>current_platform</span> <span class=o>=</span> <span class=n>platform</span><span class=o>.</span><span class=n>system</span><span class=p>()</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span>
        <span class=n>remote_provider</span> <span class=o>=</span> <span class=n>sitesync_addon</span><span class=o>.</span><span class=n>get_provider_for_site</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span> <span class=n>remote_site</span>
        <span class=p>)</span>
        <span class=c1># dirmap has sense only with regular disk provider, in the workfile</span>
        <span class=c1># won&#39;t be root on cloud or sftp provider so fallback to studio</span>
        <span class=k>if</span> <span class=n>remote_provider</span> <span class=o>!=</span> <span class=s2>&quot;local_drive&quot;</span><span class=p>:</span>
            <span class=n>remote_site</span> <span class=o>=</span> <span class=s2>&quot;studio&quot;</span>
        <span class=k>for</span> <span class=n>root_name</span><span class=p>,</span> <span class=n>active_site_dir</span> <span class=ow>in</span> <span class=n>active_roots_overrides</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=n>remote_site_dir</span> <span class=o>=</span> <span class=p>(</span>
                <span class=n>remote_roots_overrides</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>root_name</span><span class=p>)</span>
                <span class=ow>or</span> <span class=n>sync_settings</span><span class=p>[</span><span class=s2>&quot;sites&quot;</span><span class=p>][</span><span class=n>remote_site</span><span class=p>][</span><span class=s2>&quot;root&quot;</span><span class=p>][</span><span class=n>root_name</span><span class=p>]</span>
            <span class=p>)</span>

            <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>remote_site_dir</span><span class=p>,</span> <span class=nb>dict</span><span class=p>):</span>
                <span class=n>remote_site_dir</span> <span class=o>=</span> <span class=n>remote_site_dir</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>current_platform</span><span class=p>)</span>

            <span class=k>if</span> <span class=ow>not</span> <span class=n>remote_site_dir</span><span class=p>:</span>
                <span class=k>continue</span>

            <span class=k>if</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>isdir</span><span class=p>(</span><span class=n>active_site_dir</span><span class=p>):</span>
                <span class=k>if</span> <span class=s2>&quot;destination_path&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>mapping</span><span class=p>:</span>
                    <span class=n>mapping</span><span class=p>[</span><span class=s2>&quot;destination_path&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=p>[]</span>
                <span class=n>mapping</span><span class=p>[</span><span class=s2>&quot;destination_path&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>active_site_dir</span><span class=p>)</span>

                <span class=k>if</span> <span class=s2>&quot;source_path&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>mapping</span><span class=p>:</span>
                    <span class=n>mapping</span><span class=p>[</span><span class=s2>&quot;source_path&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=p>[]</span>
                <span class=n>mapping</span><span class=p>[</span><span class=s2>&quot;source_path&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>remote_site_dir</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;local sync mapping:: </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>mapping</span><span class=p>))</span>
    <span class=k>return</span> <span class=n>mapping</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.HostDirmap._get_site_root_overrides class="doc doc-heading"> <code class="highlight language-python"><span class=n>_get_site_root_overrides</span><span class=p>(</span><span class=n>sitesync_addon</span><span class=p>,</span> <span class=n>project_name</span><span class=p>,</span> <span class=n>site_name</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Safely handle root overrides.</p> <p>SiteSync raises ValueError for non local or studio sites.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/host/dirmap.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>_get_site_root_overrides</span><span class=p>(</span>
    <span class=bp>self</span><span class=p>,</span> <span class=n>sitesync_addon</span><span class=p>,</span> <span class=n>project_name</span><span class=p>,</span> <span class=n>site_name</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Safely handle root overrides.</span>

<span class=sd>    SiteSync raises ValueError for non local or studio sites.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=c1># TODO: could be removed when `get_site_root_overrides` is not raising</span>
    <span class=c1>#     an Error but just returns {}</span>
    <span class=k>try</span><span class=p>:</span>
        <span class=n>site_roots_overrides</span> <span class=o>=</span> <span class=n>sitesync_addon</span><span class=o>.</span><span class=n>get_site_root_overrides</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span> <span class=n>site_name</span><span class=p>)</span>
    <span class=k>except</span> <span class=ne>ValueError</span><span class=p>:</span>
        <span class=n>site_roots_overrides</span> <span class=o>=</span> <span class=p>{}</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;</span><span class=si>{}</span><span class=s2> roots overrides </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
        <span class=n>site_name</span><span class=p>,</span> <span class=n>site_roots_overrides</span><span class=p>))</span>

    <span class=k>return</span> <span class=n>site_roots_overrides</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.HostDirmap.dirmap_routine class="doc doc-heading"> <code class="highlight language-python"><span class=n>dirmap_routine</span><span class=p>(</span><span class=n>source_path</span><span class=p>,</span> <span class=n>destination_path</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Run host dependent remapping from source_path to destination_path</p> <details class=quote> <summary>Source code in <code>client/ayon_core/host/dirmap.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>70</span>
<span class=normal>71</span>
<span class=normal>72</span>
<span class=normal>73</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@abstractmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>dirmap_routine</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>source_path</span><span class=p>,</span> <span class=n>destination_path</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Run host dependent remapping from source_path to destination_path&quot;&quot;&quot;</span>
    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.HostDirmap.get_mappings class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_mappings</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Get translation from source_path to destination_path.</p> <p>It checks if Site Sync is enabled and user chose to use local site, in that case configuration in Local Settings takes precedence</p> <details class=quote> <summary>Source code in <code>client/ayon_core/host/dirmap.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_mappings</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get translation from source_path to destination_path.</span>

<span class=sd>        It checks if Site Sync is enabled and user chose to use local</span>
<span class=sd>        site, in that case configuration in Local Settings takes precedence</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>mapping_sett</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>project_settings</span><span class=p>[</span><span class=bp>self</span><span class=o>.</span><span class=n>host_name</span><span class=p>]</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;dirmap&quot;</span><span class=p>,</span> <span class=p>{})</span>
    <span class=n>local_mapping</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_local_sync_dirmap</span><span class=p>()</span>
    <span class=n>mapping_enabled</span> <span class=o>=</span> <span class=n>mapping_sett</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;enabled&quot;</span><span class=p>)</span> <span class=ow>or</span> <span class=nb>bool</span><span class=p>(</span><span class=n>local_mapping</span><span class=p>)</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>mapping_enabled</span><span class=p>:</span>
        <span class=k>return</span> <span class=p>{}</span>

    <span class=n>mapping</span> <span class=o>=</span> <span class=p>(</span>
        <span class=n>local_mapping</span>
        <span class=ow>or</span> <span class=n>mapping_sett</span><span class=p>[</span><span class=s2>&quot;paths&quot;</span><span class=p>]</span>
        <span class=ow>or</span> <span class=p>{}</span>
    <span class=p>)</span>

    <span class=k>if</span> <span class=p>(</span>
        <span class=ow>not</span> <span class=n>mapping</span>
        <span class=ow>or</span> <span class=ow>not</span> <span class=n>mapping</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;destination_path&quot;</span><span class=p>)</span>
        <span class=ow>or</span> <span class=ow>not</span> <span class=n>mapping</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;source_path&quot;</span><span class=p>)</span>
    <span class=p>):</span>
        <span class=k>return</span> <span class=p>{}</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Processing directory mapping ...&quot;</span><span class=p>)</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;mapping:: </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>mapping</span><span class=p>))</span>
    <span class=k>return</span> <span class=n>mapping</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.HostDirmap.on_enable_dirmap class="doc doc-heading"> <code class="highlight language-python"><span class=n>on_enable_dirmap</span><span class=p>()</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Run host dependent operation for enabling dirmap if necessary.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/host/dirmap.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>65</span>
<span class=normal>66</span>
<span class=normal>67</span>
<span class=normal>68</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@abstractmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>on_enable_dirmap</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Run host dependent operation for enabling dirmap if necessary.&quot;&quot;&quot;</span>
    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.HostDirmap.process_dirmap class="doc doc-heading"> <code class="highlight language-python"><span class=n>process_dirmap</span><span class=p>(</span><span class=n>mapping</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Go through all paths in Settings and set them using <code>dirmap</code>.</p> <p>If artists has Site Sync enabled, take dirmap mapping directly from Local Settings when artist is syncing workfile locally.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/host/dirmap.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 75</span>
<span class=normal> 76</span>
<span class=normal> 77</span>
<span class=normal> 78</span>
<span class=normal> 79</span>
<span class=normal> 80</span>
<span class=normal> 81</span>
<span class=normal> 82</span>
<span class=normal> 83</span>
<span class=normal> 84</span>
<span class=normal> 85</span>
<span class=normal> 86</span>
<span class=normal> 87</span>
<span class=normal> 88</span>
<span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>process_dirmap</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>mapping</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
    <span class=c1># type: (dict) -&gt; None</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Go through all paths in Settings and set them using `dirmap`.</span>

<span class=sd>        If artists has Site Sync enabled, take dirmap mapping directly from</span>
<span class=sd>        Local Settings when artist is syncing workfile locally.</span>

<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>mapping</span><span class=p>:</span>
        <span class=n>mapping</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_mappings</span><span class=p>()</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>mapping</span><span class=p>:</span>
        <span class=k>return</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>on_enable_dirmap</span><span class=p>()</span>

    <span class=k>for</span> <span class=n>k</span><span class=p>,</span> <span class=n>sp</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>mapping</span><span class=p>[</span><span class=s2>&quot;source_path&quot;</span><span class=p>]):</span>
        <span class=n>dst</span> <span class=o>=</span> <span class=n>mapping</span><span class=p>[</span><span class=s2>&quot;destination_path&quot;</span><span class=p>][</span><span class=n>k</span><span class=p>]</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=c1># add trailing slash if missing</span>
            <span class=n>sp</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>sp</span><span class=p>,</span> <span class=s1>&#39;&#39;</span><span class=p>)</span>
            <span class=n>dst</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>dst</span><span class=p>,</span> <span class=s1>&#39;&#39;</span><span class=p>)</span>
            <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;</span><span class=si>{}</span><span class=s2> -&gt; </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>sp</span><span class=p>,</span> <span class=n>dst</span><span class=p>))</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>dirmap_routine</span><span class=p>(</span><span class=n>sp</span><span class=p>,</span> <span class=n>dst</span><span class=p>)</span>
        <span class=k>except</span> <span class=ne>IndexError</span><span class=p>:</span>
            <span class=c1># missing corresponding destination path</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>error</span><span class=p>((</span>
                <span class=s2>&quot;invalid dirmap mapping, missing corresponding&quot;</span>
                <span class=s2>&quot; destination directory.&quot;</span>
            <span class=p>))</span>
            <span class=k>break</span>
        <span class=k>except</span> <span class=ne>RuntimeError</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>error</span><span class=p>(</span>
                <span class=s2>&quot;invalid path </span><span class=si>{}</span><span class=s2> -&gt; </span><span class=si>{}</span><span class=s2>, mapping not registered&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                    <span class=n>sp</span><span class=p>,</span> <span class=n>dst</span>
                <span class=p>)</span>
            <span class=p>)</span>
            <span class=k>continue</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.host.ILoadHost class="doc doc-heading"> <code>ILoadHost</code> </h2> <div class="doc doc-contents "> <p>Implementation requirements to be able use reference of representations.</p> <p>The load plugins can do referencing even without implementation of methods here, but switch and removement of containers would not be possible.</p> <details class=questions open> <summary>Questions</summary> <ul> <li>Is list container dependency of host or load plugins?</li> <li>Should this be directly in HostBase?<ul> <li>how to find out if referencing is available?</li> <li>do we need to know that?</li> </ul> </li> </ul> </details> <details class=quote> <summary>Source code in <code>client/ayon_core/host/interfaces.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 28</span>
<span class=normal> 29</span>
<span class=normal> 30</span>
<span class=normal> 31</span>
<span class=normal> 32</span>
<span class=normal> 33</span>
<span class=normal> 34</span>
<span class=normal> 35</span>
<span class=normal> 36</span>
<span class=normal> 37</span>
<span class=normal> 38</span>
<span class=normal> 39</span>
<span class=normal> 40</span>
<span class=normal> 41</span>
<span class=normal> 42</span>
<span class=normal> 43</span>
<span class=normal> 44</span>
<span class=normal> 45</span>
<span class=normal> 46</span>
<span class=normal> 47</span>
<span class=normal> 48</span>
<span class=normal> 49</span>
<span class=normal> 50</span>
<span class=normal> 51</span>
<span class=normal> 52</span>
<span class=normal> 53</span>
<span class=normal> 54</span>
<span class=normal> 55</span>
<span class=normal> 56</span>
<span class=normal> 57</span>
<span class=normal> 58</span>
<span class=normal> 59</span>
<span class=normal> 60</span>
<span class=normal> 61</span>
<span class=normal> 62</span>
<span class=normal> 63</span>
<span class=normal> 64</span>
<span class=normal> 65</span>
<span class=normal> 66</span>
<span class=normal> 67</span>
<span class=normal> 68</span>
<span class=normal> 69</span>
<span class=normal> 70</span>
<span class=normal> 71</span>
<span class=normal> 72</span>
<span class=normal> 73</span>
<span class=normal> 74</span>
<span class=normal> 75</span>
<span class=normal> 76</span>
<span class=normal> 77</span>
<span class=normal> 78</span>
<span class=normal> 79</span>
<span class=normal> 80</span>
<span class=normal> 81</span>
<span class=normal> 82</span>
<span class=normal> 83</span>
<span class=normal> 84</span>
<span class=normal> 85</span>
<span class=normal> 86</span>
<span class=normal> 87</span>
<span class=normal> 88</span>
<span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>ILoadHost</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Implementation requirements to be able use reference of representations.</span>

<span class=sd>    The load plugins can do referencing even without implementation of methods</span>
<span class=sd>    here, but switch and removement of containers would not be possible.</span>

<span class=sd>    Questions:</span>
<span class=sd>        - Is list container dependency of host or load plugins?</span>
<span class=sd>        - Should this be directly in HostBase?</span>
<span class=sd>            - how to find out if referencing is available?</span>
<span class=sd>            - do we need to know that?</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=nd>@staticmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>get_missing_load_methods</span><span class=p>(</span><span class=n>host</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Look for missing methods on &quot;old type&quot; host implementation.</span>

<span class=sd>        Method is used for validation of implemented functions related to</span>
<span class=sd>        loading. Checks only existence of methods.</span>

<span class=sd>        Args:</span>
<span class=sd>            Union[ModuleType, HostBase]: Object of host where to look for</span>
<span class=sd>                required methods.</span>

<span class=sd>        Returns:</span>
<span class=sd>            list[str]: Missing method implementations for loading workflow.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>host</span><span class=p>,</span> <span class=n>ILoadHost</span><span class=p>):</span>
            <span class=k>return</span> <span class=p>[]</span>

        <span class=n>required</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&quot;ls&quot;</span><span class=p>]</span>
        <span class=n>missing</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>for</span> <span class=n>name</span> <span class=ow>in</span> <span class=n>required</span><span class=p>:</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>host</span><span class=p>,</span> <span class=n>name</span><span class=p>):</span>
                <span class=n>missing</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>name</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>missing</span>

    <span class=nd>@staticmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>validate_load_methods</span><span class=p>(</span><span class=n>host</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Validate implemented methods of &quot;old type&quot; host for load workflow.</span>

<span class=sd>        Args:</span>
<span class=sd>            Union[ModuleType, HostBase]: Object of host to validate.</span>

<span class=sd>        Raises:</span>
<span class=sd>            MissingMethodsError: If there are missing methods on host</span>
<span class=sd>                implementation.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>missing</span> <span class=o>=</span> <span class=n>ILoadHost</span><span class=o>.</span><span class=n>get_missing_load_methods</span><span class=p>(</span><span class=n>host</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>missing</span><span class=p>:</span>
            <span class=k>raise</span> <span class=n>MissingMethodsError</span><span class=p>(</span><span class=n>host</span><span class=p>,</span> <span class=n>missing</span><span class=p>)</span>

    <span class=nd>@abstractmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>get_containers</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Retrieve referenced containers from scene.</span>

<span class=sd>        This can be implemented in hosts where referencing can be used.</span>

<span class=sd>        Todo:</span>
<span class=sd>            Rename function to something more self explanatory.</span>
<span class=sd>                Suggestion: &#39;get_containers&#39;</span>

<span class=sd>        Returns:</span>
<span class=sd>            list[dict]: Information about loaded containers.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>pass</span>

    <span class=c1># --- Deprecated method names ---</span>
    <span class=k>def</span><span class=w> </span><span class=nf>ls</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Deprecated variant of &#39;get_containers&#39;.</span>

<span class=sd>        Todo:</span>
<span class=sd>            Remove when all usages are replaced.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_containers</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.ILoadHost.get_containers class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_containers</span><span class=p>()</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Retrieve referenced containers from scene.</p> <p>This can be implemented in hosts where referencing can be used.</p> <details class=todo open> <summary>Todo</summary> <p>Rename function to something more self explanatory. Suggestion: 'get_containers'</p> </details> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>list[dict]: Information about loaded containers.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/host/interfaces.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>81</span>
<span class=normal>82</span>
<span class=normal>83</span>
<span class=normal>84</span>
<span class=normal>85</span>
<span class=normal>86</span>
<span class=normal>87</span>
<span class=normal>88</span>
<span class=normal>89</span>
<span class=normal>90</span>
<span class=normal>91</span>
<span class=normal>92</span>
<span class=normal>93</span>
<span class=normal>94</span>
<span class=normal>95</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@abstractmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>get_containers</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Retrieve referenced containers from scene.</span>

<span class=sd>    This can be implemented in hosts where referencing can be used.</span>

<span class=sd>    Todo:</span>
<span class=sd>        Rename function to something more self explanatory.</span>
<span class=sd>            Suggestion: &#39;get_containers&#39;</span>

<span class=sd>    Returns:</span>
<span class=sd>        list[dict]: Information about loaded containers.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.ILoadHost.get_missing_load_methods class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_missing_load_methods</span><span class=p>(</span><span class=n>host</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Look for missing methods on "old type" host implementation.</p> <p>Method is used for validation of implemented functions related to loading. Checks only existence of methods.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>Union[ModuleType,</code> </td> <td> <code>HostBase]</code> </td> <td> <div class=doc-md-description> <p>Object of host where to look for required methods.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>list[str]: Missing method implementations for loading workflow.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/host/interfaces.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span>
<span class=normal>62</span>
<span class=normal>63</span>
<span class=normal>64</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@staticmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>get_missing_load_methods</span><span class=p>(</span><span class=n>host</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Look for missing methods on &quot;old type&quot; host implementation.</span>

<span class=sd>    Method is used for validation of implemented functions related to</span>
<span class=sd>    loading. Checks only existence of methods.</span>

<span class=sd>    Args:</span>
<span class=sd>        Union[ModuleType, HostBase]: Object of host where to look for</span>
<span class=sd>            required methods.</span>

<span class=sd>    Returns:</span>
<span class=sd>        list[str]: Missing method implementations for loading workflow.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>host</span><span class=p>,</span> <span class=n>ILoadHost</span><span class=p>):</span>
        <span class=k>return</span> <span class=p>[]</span>

    <span class=n>required</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&quot;ls&quot;</span><span class=p>]</span>
    <span class=n>missing</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>for</span> <span class=n>name</span> <span class=ow>in</span> <span class=n>required</span><span class=p>:</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>host</span><span class=p>,</span> <span class=n>name</span><span class=p>):</span>
            <span class=n>missing</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>name</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>missing</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.ILoadHost.ls class="doc doc-heading"> <code class="highlight language-python"><span class=n>ls</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Deprecated variant of 'get_containers'.</p> <details class=todo open> <summary>Todo</summary> <p>Remove when all usages are replaced.</p> </details> <details class=quote> <summary>Source code in <code>client/ayon_core/host/interfaces.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>ls</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Deprecated variant of &#39;get_containers&#39;.</span>

<span class=sd>    Todo:</span>
<span class=sd>        Remove when all usages are replaced.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_containers</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.ILoadHost.validate_load_methods class="doc doc-heading"> <code class="highlight language-python"><span class=n>validate_load_methods</span><span class=p>(</span><span class=n>host</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Validate implemented methods of "old type" host for load workflow.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>Union[ModuleType,</code> </td> <td> <code>HostBase]</code> </td> <td> <div class=doc-md-description> <p>Object of host to validate.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="MissingMethodsError (client.ayon_core.host.interfaces.MissingMethodsError)" href=interfaces.html#client.ayon_core.host.interfaces.MissingMethodsError>MissingMethodsError</a></code> </td> <td> <div class=doc-md-description> <p>If there are missing methods on host implementation.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/host/interfaces.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>66</span>
<span class=normal>67</span>
<span class=normal>68</span>
<span class=normal>69</span>
<span class=normal>70</span>
<span class=normal>71</span>
<span class=normal>72</span>
<span class=normal>73</span>
<span class=normal>74</span>
<span class=normal>75</span>
<span class=normal>76</span>
<span class=normal>77</span>
<span class=normal>78</span>
<span class=normal>79</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@staticmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>validate_load_methods</span><span class=p>(</span><span class=n>host</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Validate implemented methods of &quot;old type&quot; host for load workflow.</span>

<span class=sd>    Args:</span>
<span class=sd>        Union[ModuleType, HostBase]: Object of host to validate.</span>

<span class=sd>    Raises:</span>
<span class=sd>        MissingMethodsError: If there are missing methods on host</span>
<span class=sd>            implementation.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>missing</span> <span class=o>=</span> <span class=n>ILoadHost</span><span class=o>.</span><span class=n>get_missing_load_methods</span><span class=p>(</span><span class=n>host</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>missing</span><span class=p>:</span>
        <span class=k>raise</span> <span class=n>MissingMethodsError</span><span class=p>(</span><span class=n>host</span><span class=p>,</span> <span class=n>missing</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.host.INewPublisher class="doc doc-heading"> <code>INewPublisher</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="IPublishHost (client.ayon_core.host.interfaces.IPublishHost)" href=interfaces.html#client.ayon_core.host.interfaces.IPublishHost>IPublishHost</a></code></p> <p>Legacy interface replaced by 'IPublishHost'.</p> <details class=deprecated open> <summary>Deprecated</summary> <p>'INewPublisher' is replaced by 'IPublishHost' please change your imports. There is no "reasonable" way hot mark these classes as deprecated to show warning of wrong import. Deprecated since 3.14.<em> will be removed in 3.15.</em></p> </details> <details class=quote> <summary>Source code in <code>client/ayon_core/host/interfaces.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>373</span>
<span class=normal>374</span>
<span class=normal>375</span>
<span class=normal>376</span>
<span class=normal>377</span>
<span class=normal>378</span>
<span class=normal>379</span>
<span class=normal>380</span>
<span class=normal>381</span>
<span class=normal>382</span>
<span class=normal>383</span>
<span class=normal>384</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>INewPublisher</span><span class=p>(</span><span class=n>IPublishHost</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Legacy interface replaced by &#39;IPublishHost&#39;.</span>

<span class=sd>    Deprecated:</span>
<span class=sd>        &#39;INewPublisher&#39; is replaced by &#39;IPublishHost&#39; please change your</span>
<span class=sd>        imports.</span>
<span class=sd>        There is no &quot;reasonable&quot; way hot mark these classes as deprecated</span>
<span class=sd>        to show warning of wrong import. Deprecated since 3.14.* will be</span>
<span class=sd>        removed in 3.15.*</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.host.IPublishHost class="doc doc-heading"> <code>IPublishHost</code> </h2> <div class="doc doc-contents "> <p>Functions related to new creation system in new publisher.</p> <p>New publisher is not storing information only about each created instance but also some global data. At this moment are data related only to context publish plugins but that can extend in future.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/host/interfaces.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>283</span>
<span class=normal>284</span>
<span class=normal>285</span>
<span class=normal>286</span>
<span class=normal>287</span>
<span class=normal>288</span>
<span class=normal>289</span>
<span class=normal>290</span>
<span class=normal>291</span>
<span class=normal>292</span>
<span class=normal>293</span>
<span class=normal>294</span>
<span class=normal>295</span>
<span class=normal>296</span>
<span class=normal>297</span>
<span class=normal>298</span>
<span class=normal>299</span>
<span class=normal>300</span>
<span class=normal>301</span>
<span class=normal>302</span>
<span class=normal>303</span>
<span class=normal>304</span>
<span class=normal>305</span>
<span class=normal>306</span>
<span class=normal>307</span>
<span class=normal>308</span>
<span class=normal>309</span>
<span class=normal>310</span>
<span class=normal>311</span>
<span class=normal>312</span>
<span class=normal>313</span>
<span class=normal>314</span>
<span class=normal>315</span>
<span class=normal>316</span>
<span class=normal>317</span>
<span class=normal>318</span>
<span class=normal>319</span>
<span class=normal>320</span>
<span class=normal>321</span>
<span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span>
<span class=normal>325</span>
<span class=normal>326</span>
<span class=normal>327</span>
<span class=normal>328</span>
<span class=normal>329</span>
<span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span>
<span class=normal>334</span>
<span class=normal>335</span>
<span class=normal>336</span>
<span class=normal>337</span>
<span class=normal>338</span>
<span class=normal>339</span>
<span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span>
<span class=normal>344</span>
<span class=normal>345</span>
<span class=normal>346</span>
<span class=normal>347</span>
<span class=normal>348</span>
<span class=normal>349</span>
<span class=normal>350</span>
<span class=normal>351</span>
<span class=normal>352</span>
<span class=normal>353</span>
<span class=normal>354</span>
<span class=normal>355</span>
<span class=normal>356</span>
<span class=normal>357</span>
<span class=normal>358</span>
<span class=normal>359</span>
<span class=normal>360</span>
<span class=normal>361</span>
<span class=normal>362</span>
<span class=normal>363</span>
<span class=normal>364</span>
<span class=normal>365</span>
<span class=normal>366</span>
<span class=normal>367</span>
<span class=normal>368</span>
<span class=normal>369</span>
<span class=normal>370</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>IPublishHost</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Functions related to new creation system in new publisher.</span>

<span class=sd>    New publisher is not storing information only about each created instance</span>
<span class=sd>    but also some global data. At this moment are data related only to context</span>
<span class=sd>    publish plugins but that can extend in future.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=nd>@staticmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>get_missing_publish_methods</span><span class=p>(</span><span class=n>host</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Look for missing methods on &quot;old type&quot; host implementation.</span>

<span class=sd>        Method is used for validation of implemented functions related to</span>
<span class=sd>        new publish creation. Checks only existence of methods.</span>

<span class=sd>        Args:</span>
<span class=sd>            Union[ModuleType, HostBase]: Host module where to look for</span>
<span class=sd>                required methods.</span>

<span class=sd>        Returns:</span>
<span class=sd>            list[str]: Missing method implementations for new publisher</span>
<span class=sd>                workflow.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>host</span><span class=p>,</span> <span class=n>IPublishHost</span><span class=p>):</span>
            <span class=k>return</span> <span class=p>[]</span>

        <span class=n>required</span> <span class=o>=</span> <span class=p>[</span>
            <span class=s2>&quot;get_context_data&quot;</span><span class=p>,</span>
            <span class=s2>&quot;update_context_data&quot;</span><span class=p>,</span>
            <span class=s2>&quot;get_context_title&quot;</span><span class=p>,</span>
            <span class=s2>&quot;get_current_context&quot;</span><span class=p>,</span>
        <span class=p>]</span>
        <span class=n>missing</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>for</span> <span class=n>name</span> <span class=ow>in</span> <span class=n>required</span><span class=p>:</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>host</span><span class=p>,</span> <span class=n>name</span><span class=p>):</span>
                <span class=n>missing</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>name</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>missing</span>

    <span class=nd>@staticmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>validate_publish_methods</span><span class=p>(</span><span class=n>host</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Validate implemented methods of &quot;old type&quot; host.</span>

<span class=sd>        Args:</span>
<span class=sd>            Union[ModuleType, HostBase]: Host module to validate.</span>

<span class=sd>        Raises:</span>
<span class=sd>            MissingMethodsError: If there are missing methods on host</span>
<span class=sd>                implementation.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>missing</span> <span class=o>=</span> <span class=n>IPublishHost</span><span class=o>.</span><span class=n>get_missing_publish_methods</span><span class=p>(</span><span class=n>host</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>missing</span><span class=p>:</span>
            <span class=k>raise</span> <span class=n>MissingMethodsError</span><span class=p>(</span><span class=n>host</span><span class=p>,</span> <span class=n>missing</span><span class=p>)</span>

    <span class=nd>@abstractmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>get_context_data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get global data related to creation-publishing from workfile.</span>

<span class=sd>        These data are not related to any created instance but to whole</span>
<span class=sd>        publishing context. Not saving/returning them will cause that each</span>
<span class=sd>        reset of publishing resets all values to default ones.</span>

<span class=sd>        Context data can contain information about enabled/disabled publish</span>
<span class=sd>        plugins or other values that can be filled by artist.</span>

<span class=sd>        Returns:</span>
<span class=sd>            dict: Context data stored using &#39;update_context_data&#39;.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>pass</span>

    <span class=nd>@abstractmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>update_context_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>data</span><span class=p>,</span> <span class=n>changes</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Store global context data to workfile.</span>

<span class=sd>        Called when some values in context data has changed.</span>

<span class=sd>        Without storing the values in a way that &#39;get_context_data&#39; would</span>
<span class=sd>        return them will each reset of publishing cause loose of filled values</span>
<span class=sd>        by artist. Best practice is to store values into workfile, if possible.</span>

<span class=sd>        Args:</span>
<span class=sd>            data (dict): New data as are.</span>
<span class=sd>            changes (dict): Only data that has been changed. Each value has</span>
<span class=sd>                tuple with &#39;(&lt;old&gt;, &lt;new&gt;)&#39; value.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.IPublishHost.get_context_data class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_context_data</span><span class=p>()</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Get global data related to creation-publishing from workfile.</p> <p>These data are not related to any created instance but to whole publishing context. Not saving/returning them will cause that each reset of publishing resets all values to default ones.</p> <p>Context data can contain information about enabled/disabled publish plugins or other values that can be filled by artist.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>dict</code></td> <td> </td> <td> <div class=doc-md-description> <p>Context data stored using 'update_context_data'.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/host/interfaces.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>337</span>
<span class=normal>338</span>
<span class=normal>339</span>
<span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span>
<span class=normal>344</span>
<span class=normal>345</span>
<span class=normal>346</span>
<span class=normal>347</span>
<span class=normal>348</span>
<span class=normal>349</span>
<span class=normal>350</span>
<span class=normal>351</span>
<span class=normal>352</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@abstractmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>get_context_data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get global data related to creation-publishing from workfile.</span>

<span class=sd>    These data are not related to any created instance but to whole</span>
<span class=sd>    publishing context. Not saving/returning them will cause that each</span>
<span class=sd>    reset of publishing resets all values to default ones.</span>

<span class=sd>    Context data can contain information about enabled/disabled publish</span>
<span class=sd>    plugins or other values that can be filled by artist.</span>

<span class=sd>    Returns:</span>
<span class=sd>        dict: Context data stored using &#39;update_context_data&#39;.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.IPublishHost.get_missing_publish_methods class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_missing_publish_methods</span><span class=p>(</span><span class=n>host</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Look for missing methods on "old type" host implementation.</p> <p>Method is used for validation of implemented functions related to new publish creation. Checks only existence of methods.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>Union[ModuleType,</code> </td> <td> <code>HostBase]</code> </td> <td> <div class=doc-md-description> <p>Host module where to look for required methods.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>list[str]: Missing method implementations for new publisher workflow.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/host/interfaces.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>291</span>
<span class=normal>292</span>
<span class=normal>293</span>
<span class=normal>294</span>
<span class=normal>295</span>
<span class=normal>296</span>
<span class=normal>297</span>
<span class=normal>298</span>
<span class=normal>299</span>
<span class=normal>300</span>
<span class=normal>301</span>
<span class=normal>302</span>
<span class=normal>303</span>
<span class=normal>304</span>
<span class=normal>305</span>
<span class=normal>306</span>
<span class=normal>307</span>
<span class=normal>308</span>
<span class=normal>309</span>
<span class=normal>310</span>
<span class=normal>311</span>
<span class=normal>312</span>
<span class=normal>313</span>
<span class=normal>314</span>
<span class=normal>315</span>
<span class=normal>316</span>
<span class=normal>317</span>
<span class=normal>318</span>
<span class=normal>319</span>
<span class=normal>320</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@staticmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>get_missing_publish_methods</span><span class=p>(</span><span class=n>host</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Look for missing methods on &quot;old type&quot; host implementation.</span>

<span class=sd>    Method is used for validation of implemented functions related to</span>
<span class=sd>    new publish creation. Checks only existence of methods.</span>

<span class=sd>    Args:</span>
<span class=sd>        Union[ModuleType, HostBase]: Host module where to look for</span>
<span class=sd>            required methods.</span>

<span class=sd>    Returns:</span>
<span class=sd>        list[str]: Missing method implementations for new publisher</span>
<span class=sd>            workflow.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>host</span><span class=p>,</span> <span class=n>IPublishHost</span><span class=p>):</span>
        <span class=k>return</span> <span class=p>[]</span>

    <span class=n>required</span> <span class=o>=</span> <span class=p>[</span>
        <span class=s2>&quot;get_context_data&quot;</span><span class=p>,</span>
        <span class=s2>&quot;update_context_data&quot;</span><span class=p>,</span>
        <span class=s2>&quot;get_context_title&quot;</span><span class=p>,</span>
        <span class=s2>&quot;get_current_context&quot;</span><span class=p>,</span>
    <span class=p>]</span>
    <span class=n>missing</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>for</span> <span class=n>name</span> <span class=ow>in</span> <span class=n>required</span><span class=p>:</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>host</span><span class=p>,</span> <span class=n>name</span><span class=p>):</span>
            <span class=n>missing</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>name</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>missing</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.IPublishHost.update_context_data class="doc doc-heading"> <code class="highlight language-python"><span class=n>update_context_data</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>changes</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Store global context data to workfile.</p> <p>Called when some values in context data has changed.</p> <p>Without storing the values in a way that 'get_context_data' would return them will each reset of publishing cause loose of filled values by artist. Best practice is to store values into workfile, if possible.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>data</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>New data as are.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>changes</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>Only data that has been changed. Each value has tuple with '(<old>, <new>)' value.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/host/interfaces.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>354</span>
<span class=normal>355</span>
<span class=normal>356</span>
<span class=normal>357</span>
<span class=normal>358</span>
<span class=normal>359</span>
<span class=normal>360</span>
<span class=normal>361</span>
<span class=normal>362</span>
<span class=normal>363</span>
<span class=normal>364</span>
<span class=normal>365</span>
<span class=normal>366</span>
<span class=normal>367</span>
<span class=normal>368</span>
<span class=normal>369</span>
<span class=normal>370</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@abstractmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>update_context_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>data</span><span class=p>,</span> <span class=n>changes</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Store global context data to workfile.</span>

<span class=sd>    Called when some values in context data has changed.</span>

<span class=sd>    Without storing the values in a way that &#39;get_context_data&#39; would</span>
<span class=sd>    return them will each reset of publishing cause loose of filled values</span>
<span class=sd>    by artist. Best practice is to store values into workfile, if possible.</span>

<span class=sd>    Args:</span>
<span class=sd>        data (dict): New data as are.</span>
<span class=sd>        changes (dict): Only data that has been changed. Each value has</span>
<span class=sd>            tuple with &#39;(&lt;old&gt;, &lt;new&gt;)&#39; value.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.IPublishHost.validate_publish_methods class="doc doc-heading"> <code class="highlight language-python"><span class=n>validate_publish_methods</span><span class=p>(</span><span class=n>host</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Validate implemented methods of "old type" host.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>Union[ModuleType,</code> </td> <td> <code>HostBase]</code> </td> <td> <div class=doc-md-description> <p>Host module to validate.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="MissingMethodsError (client.ayon_core.host.interfaces.MissingMethodsError)" href=interfaces.html#client.ayon_core.host.interfaces.MissingMethodsError>MissingMethodsError</a></code> </td> <td> <div class=doc-md-description> <p>If there are missing methods on host implementation.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/host/interfaces.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span>
<span class=normal>325</span>
<span class=normal>326</span>
<span class=normal>327</span>
<span class=normal>328</span>
<span class=normal>329</span>
<span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span>
<span class=normal>334</span>
<span class=normal>335</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@staticmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>validate_publish_methods</span><span class=p>(</span><span class=n>host</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Validate implemented methods of &quot;old type&quot; host.</span>

<span class=sd>    Args:</span>
<span class=sd>        Union[ModuleType, HostBase]: Host module to validate.</span>

<span class=sd>    Raises:</span>
<span class=sd>        MissingMethodsError: If there are missing methods on host</span>
<span class=sd>            implementation.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>missing</span> <span class=o>=</span> <span class=n>IPublishHost</span><span class=o>.</span><span class=n>get_missing_publish_methods</span><span class=p>(</span><span class=n>host</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>missing</span><span class=p>:</span>
        <span class=k>raise</span> <span class=n>MissingMethodsError</span><span class=p>(</span><span class=n>host</span><span class=p>,</span> <span class=n>missing</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.host.IWorkfileHost class="doc doc-heading"> <code>IWorkfileHost</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=abc.ABC>ABC</span></code></p> <p>Implementation requirements to be able use workfile utils and tool.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/host/interfaces.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span>
<span class=normal>277</span>
<span class=normal>278</span>
<span class=normal>279</span>
<span class=normal>280</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>IWorkfileHost</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Implementation requirements to be able use workfile utils and tool.&quot;&quot;&quot;</span>

    <span class=nd>@staticmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>get_missing_workfile_methods</span><span class=p>(</span><span class=n>host</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Look for missing methods on &quot;old type&quot; host implementation.</span>

<span class=sd>        Method is used for validation of implemented functions related to</span>
<span class=sd>        workfiles. Checks only existence of methods.</span>

<span class=sd>        Args:</span>
<span class=sd>            Union[ModuleType, HostBase]: Object of host where to look for</span>
<span class=sd>                required methods.</span>

<span class=sd>        Returns:</span>
<span class=sd>            list[str]: Missing method implementations for workfiles workflow.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>host</span><span class=p>,</span> <span class=n>IWorkfileHost</span><span class=p>):</span>
            <span class=k>return</span> <span class=p>[]</span>

        <span class=n>required</span> <span class=o>=</span> <span class=p>[</span>
            <span class=s2>&quot;open_file&quot;</span><span class=p>,</span>
            <span class=s2>&quot;save_file&quot;</span><span class=p>,</span>
            <span class=s2>&quot;current_file&quot;</span><span class=p>,</span>
            <span class=s2>&quot;has_unsaved_changes&quot;</span><span class=p>,</span>
            <span class=s2>&quot;file_extensions&quot;</span><span class=p>,</span>
            <span class=s2>&quot;work_root&quot;</span><span class=p>,</span>
        <span class=p>]</span>
        <span class=n>missing</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>for</span> <span class=n>name</span> <span class=ow>in</span> <span class=n>required</span><span class=p>:</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>host</span><span class=p>,</span> <span class=n>name</span><span class=p>):</span>
                <span class=n>missing</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>name</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>missing</span>

    <span class=nd>@staticmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>validate_workfile_methods</span><span class=p>(</span><span class=n>host</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Validate methods of &quot;old type&quot; host for workfiles workflow.</span>

<span class=sd>        Args:</span>
<span class=sd>            Union[ModuleType, HostBase]: Object of host to validate.</span>

<span class=sd>        Raises:</span>
<span class=sd>            MissingMethodsError: If there are missing methods on host</span>
<span class=sd>                implementation.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>missing</span> <span class=o>=</span> <span class=n>IWorkfileHost</span><span class=o>.</span><span class=n>get_missing_workfile_methods</span><span class=p>(</span><span class=n>host</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>missing</span><span class=p>:</span>
            <span class=k>raise</span> <span class=n>MissingMethodsError</span><span class=p>(</span><span class=n>host</span><span class=p>,</span> <span class=n>missing</span><span class=p>)</span>

    <span class=nd>@abstractmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>get_workfile_extensions</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Extensions that can be used as save.</span>

<span class=sd>        Questions:</span>
<span class=sd>            This could potentially use &#39;HostDefinition&#39;.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=p>[]</span>

    <span class=nd>@abstractmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>save_workfile</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>dst_path</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Save currently opened scene.</span>

<span class=sd>        Args:</span>
<span class=sd>            dst_path (str): Where the current scene should be saved. Or use</span>
<span class=sd>                current path if &#39;None&#39; is passed.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>pass</span>

    <span class=nd>@abstractmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>open_workfile</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>filepath</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Open passed filepath in the host.</span>

<span class=sd>        Args:</span>
<span class=sd>            filepath (str): Path to workfile.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>pass</span>

    <span class=nd>@abstractmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>get_current_workfile</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Retrieve path to current opened file.</span>

<span class=sd>        Returns:</span>
<span class=sd>            str: Path to file which is currently opened.</span>
<span class=sd>            None: If nothing is opened.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=kc>None</span>

    <span class=k>def</span><span class=w> </span><span class=nf>workfile_has_unsaved_changes</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Currently opened scene is saved.</span>

<span class=sd>        Not all hosts can know if current scene is saved because the API of</span>
<span class=sd>        DCC does not support it.</span>

<span class=sd>        Returns:</span>
<span class=sd>            bool: True if scene is saved and False if has unsaved</span>
<span class=sd>                modifications.</span>
<span class=sd>            None: Can&#39;t tell if workfiles has modifications.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=kc>None</span>

    <span class=k>def</span><span class=w> </span><span class=nf>work_root</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>session</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Modify workdir per host.</span>

<span class=sd>        Default implementation keeps workdir untouched.</span>

<span class=sd>        Warnings:</span>
<span class=sd>            We must handle this modification with more sophisticated way</span>
<span class=sd>            because this can&#39;t be called out of DCC so opening of last workfile</span>
<span class=sd>            (calculated before DCC is launched) is complicated. Also breaking</span>
<span class=sd>            defined work template is not a good idea.</span>
<span class=sd>            Only place where it&#39;s really used and can make sense is Maya. There</span>
<span class=sd>            workspace.mel can modify subfolders where to look for maya files.</span>

<span class=sd>        Args:</span>
<span class=sd>            session (dict): Session context data.</span>

<span class=sd>        Returns:</span>
<span class=sd>            str: Path to new workdir.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=n>session</span><span class=p>[</span><span class=s2>&quot;AYON_WORKDIR&quot;</span><span class=p>]</span>

    <span class=c1># --- Deprecated method names ---</span>
    <span class=k>def</span><span class=w> </span><span class=nf>file_extensions</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Deprecated variant of &#39;get_workfile_extensions&#39;.</span>

<span class=sd>        Todo:</span>
<span class=sd>            Remove when all usages are replaced.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_workfile_extensions</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>save_file</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>dst_path</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Deprecated variant of &#39;save_workfile&#39;.</span>

<span class=sd>        Todo:</span>
<span class=sd>            Remove when all usages are replaced.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>save_workfile</span><span class=p>(</span><span class=n>dst_path</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>open_file</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>filepath</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Deprecated variant of &#39;open_workfile&#39;.</span>

<span class=sd>        Todo:</span>
<span class=sd>            Remove when all usages are replaced.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>open_workfile</span><span class=p>(</span><span class=n>filepath</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>current_file</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Deprecated variant of &#39;get_current_workfile&#39;.</span>

<span class=sd>        Todo:</span>
<span class=sd>            Remove when all usages are replaced.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_workfile</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>has_unsaved_changes</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Deprecated variant of &#39;workfile_has_unsaved_changes&#39;.</span>

<span class=sd>        Todo:</span>
<span class=sd>            Remove when all usages are replaced.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>workfile_has_unsaved_changes</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.IWorkfileHost.current_file class="doc doc-heading"> <code class="highlight language-python"><span class=n>current_file</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Deprecated variant of 'get_current_workfile'.</p> <details class=todo open> <summary>Todo</summary> <p>Remove when all usages are replaced.</p> </details> <details class=quote> <summary>Source code in <code>client/ayon_core/host/interfaces.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>current_file</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Deprecated variant of &#39;get_current_workfile&#39;.</span>

<span class=sd>    Todo:</span>
<span class=sd>        Remove when all usages are replaced.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_workfile</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.IWorkfileHost.file_extensions class="doc doc-heading"> <code class="highlight language-python"><span class=n>file_extensions</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Deprecated variant of 'get_workfile_extensions'.</p> <details class=todo open> <summary>Todo</summary> <p>Remove when all usages are replaced.</p> </details> <details class=quote> <summary>Source code in <code>client/ayon_core/host/interfaces.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>file_extensions</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Deprecated variant of &#39;get_workfile_extensions&#39;.</span>

<span class=sd>    Todo:</span>
<span class=sd>        Remove when all usages are replaced.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_workfile_extensions</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.IWorkfileHost.get_current_workfile class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_current_workfile</span><span class=p>()</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Retrieve path to current opened file.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>Path to file which is currently opened.</p> </div> </td> </tr> <tr class=doc-section-item> <td><code>None</code></td> <td> </td> <td> <div class=doc-md-description> <p>If nothing is opened.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/host/interfaces.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@abstractmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>get_current_workfile</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Retrieve path to current opened file.</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: Path to file which is currently opened.</span>
<span class=sd>        None: If nothing is opened.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=kc>None</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.IWorkfileHost.get_missing_workfile_methods class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_missing_workfile_methods</span><span class=p>(</span><span class=n>host</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Look for missing methods on "old type" host implementation.</p> <p>Method is used for validation of implemented functions related to workfiles. Checks only existence of methods.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>Union[ModuleType,</code> </td> <td> <code>HostBase]</code> </td> <td> <div class=doc-md-description> <p>Object of host where to look for required methods.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>list[str]: Missing method implementations for workfiles workflow.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/host/interfaces.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@staticmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>get_missing_workfile_methods</span><span class=p>(</span><span class=n>host</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Look for missing methods on &quot;old type&quot; host implementation.</span>

<span class=sd>    Method is used for validation of implemented functions related to</span>
<span class=sd>    workfiles. Checks only existence of methods.</span>

<span class=sd>    Args:</span>
<span class=sd>        Union[ModuleType, HostBase]: Object of host where to look for</span>
<span class=sd>            required methods.</span>

<span class=sd>    Returns:</span>
<span class=sd>        list[str]: Missing method implementations for workfiles workflow.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>host</span><span class=p>,</span> <span class=n>IWorkfileHost</span><span class=p>):</span>
        <span class=k>return</span> <span class=p>[]</span>

    <span class=n>required</span> <span class=o>=</span> <span class=p>[</span>
        <span class=s2>&quot;open_file&quot;</span><span class=p>,</span>
        <span class=s2>&quot;save_file&quot;</span><span class=p>,</span>
        <span class=s2>&quot;current_file&quot;</span><span class=p>,</span>
        <span class=s2>&quot;has_unsaved_changes&quot;</span><span class=p>,</span>
        <span class=s2>&quot;file_extensions&quot;</span><span class=p>,</span>
        <span class=s2>&quot;work_root&quot;</span><span class=p>,</span>
    <span class=p>]</span>
    <span class=n>missing</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>for</span> <span class=n>name</span> <span class=ow>in</span> <span class=n>required</span><span class=p>:</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>host</span><span class=p>,</span> <span class=n>name</span><span class=p>):</span>
            <span class=n>missing</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>name</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>missing</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.IWorkfileHost.get_workfile_extensions class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_workfile_extensions</span><span class=p>()</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Extensions that can be used as save.</p> <details class=questions open> <summary>Questions</summary> <p>This could potentially use 'HostDefinition'.</p> </details> <details class=quote> <summary>Source code in <code>client/ayon_core/host/interfaces.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@abstractmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>get_workfile_extensions</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Extensions that can be used as save.</span>

<span class=sd>    Questions:</span>
<span class=sd>        This could potentially use &#39;HostDefinition&#39;.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=p>[]</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.IWorkfileHost.has_unsaved_changes class="doc doc-heading"> <code class="highlight language-python"><span class=n>has_unsaved_changes</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Deprecated variant of 'workfile_has_unsaved_changes'.</p> <details class=todo open> <summary>Todo</summary> <p>Remove when all usages are replaced.</p> </details> <details class=quote> <summary>Source code in <code>client/ayon_core/host/interfaces.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span>
<span class=normal>277</span>
<span class=normal>278</span>
<span class=normal>279</span>
<span class=normal>280</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>has_unsaved_changes</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Deprecated variant of &#39;workfile_has_unsaved_changes&#39;.</span>

<span class=sd>    Todo:</span>
<span class=sd>        Remove when all usages are replaced.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>workfile_has_unsaved_changes</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.IWorkfileHost.open_file class="doc doc-heading"> <code class="highlight language-python"><span class=n>open_file</span><span class=p>(</span><span class=n>filepath</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Deprecated variant of 'open_workfile'.</p> <details class=todo open> <summary>Todo</summary> <p>Remove when all usages are replaced.</p> </details> <details class=quote> <summary>Source code in <code>client/ayon_core/host/interfaces.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>open_file</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>filepath</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Deprecated variant of &#39;open_workfile&#39;.</span>

<span class=sd>    Todo:</span>
<span class=sd>        Remove when all usages are replaced.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>open_workfile</span><span class=p>(</span><span class=n>filepath</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.IWorkfileHost.open_workfile class="doc doc-heading"> <code class="highlight language-python"><span class=n>open_workfile</span><span class=p>(</span><span class=n>filepath</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Open passed filepath in the host.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>filepath</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Path to workfile.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/host/interfaces.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@abstractmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>open_workfile</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>filepath</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Open passed filepath in the host.</span>

<span class=sd>    Args:</span>
<span class=sd>        filepath (str): Path to workfile.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.IWorkfileHost.save_file class="doc doc-heading"> <code class="highlight language-python"><span class=n>save_file</span><span class=p>(</span><span class=n>dst_path</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Deprecated variant of 'save_workfile'.</p> <details class=todo open> <summary>Todo</summary> <p>Remove when all usages are replaced.</p> </details> <details class=quote> <summary>Source code in <code>client/ayon_core/host/interfaces.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>save_file</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>dst_path</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Deprecated variant of &#39;save_workfile&#39;.</span>

<span class=sd>    Todo:</span>
<span class=sd>        Remove when all usages are replaced.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>save_workfile</span><span class=p>(</span><span class=n>dst_path</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.IWorkfileHost.save_workfile class="doc doc-heading"> <code class="highlight language-python"><span class=n>save_workfile</span><span class=p>(</span><span class=n>dst_path</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Save currently opened scene.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>dst_path</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Where the current scene should be saved. Or use current path if 'None' is passed.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/host/interfaces.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@abstractmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>save_workfile</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>dst_path</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Save currently opened scene.</span>

<span class=sd>    Args:</span>
<span class=sd>        dst_path (str): Where the current scene should be saved. Or use</span>
<span class=sd>            current path if &#39;None&#39; is passed.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.IWorkfileHost.validate_workfile_methods class="doc doc-heading"> <code class="highlight language-python"><span class=n>validate_workfile_methods</span><span class=p>(</span><span class=n>host</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Validate methods of "old type" host for workfiles workflow.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>Union[ModuleType,</code> </td> <td> <code>HostBase]</code> </td> <td> <div class=doc-md-description> <p>Object of host to validate.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="MissingMethodsError (client.ayon_core.host.interfaces.MissingMethodsError)" href=interfaces.html#client.ayon_core.host.interfaces.MissingMethodsError>MissingMethodsError</a></code> </td> <td> <div class=doc-md-description> <p>If there are missing methods on host implementation.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/host/interfaces.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@staticmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>validate_workfile_methods</span><span class=p>(</span><span class=n>host</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Validate methods of &quot;old type&quot; host for workfiles workflow.</span>

<span class=sd>    Args:</span>
<span class=sd>        Union[ModuleType, HostBase]: Object of host to validate.</span>

<span class=sd>    Raises:</span>
<span class=sd>        MissingMethodsError: If there are missing methods on host</span>
<span class=sd>            implementation.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>missing</span> <span class=o>=</span> <span class=n>IWorkfileHost</span><span class=o>.</span><span class=n>get_missing_workfile_methods</span><span class=p>(</span><span class=n>host</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>missing</span><span class=p>:</span>
        <span class=k>raise</span> <span class=n>MissingMethodsError</span><span class=p>(</span><span class=n>host</span><span class=p>,</span> <span class=n>missing</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.IWorkfileHost.work_root class="doc doc-heading"> <code class="highlight language-python"><span class=n>work_root</span><span class=p>(</span><span class=n>session</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Modify workdir per host.</p> <p>Default implementation keeps workdir untouched.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>session</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>Session context data.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>Path to new workdir.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/host/interfaces.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>work_root</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>session</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Modify workdir per host.</span>

<span class=sd>    Default implementation keeps workdir untouched.</span>

<span class=sd>    Warnings:</span>
<span class=sd>        We must handle this modification with more sophisticated way</span>
<span class=sd>        because this can&#39;t be called out of DCC so opening of last workfile</span>
<span class=sd>        (calculated before DCC is launched) is complicated. Also breaking</span>
<span class=sd>        defined work template is not a good idea.</span>
<span class=sd>        Only place where it&#39;s really used and can make sense is Maya. There</span>
<span class=sd>        workspace.mel can modify subfolders where to look for maya files.</span>

<span class=sd>    Args:</span>
<span class=sd>        session (dict): Session context data.</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: Path to new workdir.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=n>session</span><span class=p>[</span><span class=s2>&quot;AYON_WORKDIR&quot;</span><span class=p>]</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.IWorkfileHost.workfile_has_unsaved_changes class="doc doc-heading"> <code class="highlight language-python"><span class=n>workfile_has_unsaved_changes</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Currently opened scene is saved.</p> <p>Not all hosts can know if current scene is saved because the API of DCC does not support it.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>bool</code></td> <td> </td> <td> <div class=doc-md-description> <p>True if scene is saved and False if has unsaved modifications.</p> </div> </td> </tr> <tr class=doc-section-item> <td><code>None</code></td> <td> </td> <td> <div class=doc-md-description> <p>Can't tell if workfiles has modifications.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/host/interfaces.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>workfile_has_unsaved_changes</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Currently opened scene is saved.</span>

<span class=sd>    Not all hosts can know if current scene is saved because the API of</span>
<span class=sd>    DCC does not support it.</span>

<span class=sd>    Returns:</span>
<span class=sd>        bool: True if scene is saved and False if has unsaved</span>
<span class=sd>            modifications.</span>
<span class=sd>        None: Can&#39;t tell if workfiles has modifications.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=kc>None</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> </div> </div> </div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../..", "features": ["navigation.sections", "navigation.path", "navigation.prune"], "search": "../../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../../../assets/javascripts/bundle.c8b220af.min.js></script> </body> </html>