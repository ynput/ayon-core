<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=prev href=utils.html><link rel=next href=../../plugins/index.html><link rel=icon href=../../../../../img/favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.8"><title>workfile_template_builder - ayon-core</title><link rel=stylesheet href=../../../../../assets/stylesheets/main.8608ea7d.min.css><link rel=stylesheet href=../../../../../assets/stylesheets/palette.06af60db.min.css><script src=https://unpkg.com/iframe-worker/shim></script><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../../../assets/_mkdocstrings.css><link rel=stylesheet href=../../../../../css/custom.css><script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../../../index.html title=ayon-core class="md-header__button md-logo" aria-label=ayon-core data-md-component=logo> <img src=../../../../../img/ay-symbol-blackw-full.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> ayon-core </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> workfile_template_builder </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../../../index.html title=ayon-core class="md-nav__button md-logo" aria-label=ayon-core data-md-component=logo> <img src=../../../../../img/ay-symbol-blackw-full.png alt=logo> </a> ayon-core </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../index.html class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../../../../../license.html class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1 checked> <div class="md-nav__link md-nav__container"> <a href=../../../index.html class="md-nav__link "> <span class=md-ellipsis> client </span> </a> <label class="md-nav__link " for=__nav_3_1 id=__nav_3_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> client </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1 checked> <div class="md-nav__link md-nav__container"> <a href=../../index.html class="md-nav__link "> <span class=md-ellipsis> ayon_core </span> </a> <label class="md-nav__link " for=__nav_3_1_1 id=__nav_3_1_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_1_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1> <span class="md-nav__icon md-icon"></span> ayon_core </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../__main__.html class=md-nav__link> <span class=md-ellipsis> __main__ </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../addon/base.html class=md-nav__link> <span class=md-ellipsis> addon </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../../cli.html class=md-nav__link> <span class=md-ellipsis> cli </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../hooks/pre_add_last_workfile_arg.html class=md-nav__link> <span class=md-ellipsis> hooks </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../host/dirmap.html class=md-nav__link> <span class=md-ellipsis> host </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../lib/attribute_definitions.html class=md-nav__link> <span class=md-ellipsis> lib </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1_7 checked> <div class="md-nav__link md-nav__container"> <a href=../index.html class="md-nav__link "> <span class=md-ellipsis> pipeline </span> </a> <label class="md-nav__link " for=__nav_3_1_1_7 id=__nav_3_1_1_7_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_1_1_7_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1_7> <span class="md-nav__icon md-icon"></span> pipeline </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../actions.html class=md-nav__link> <span class=md-ellipsis> actions </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../anatomy/anatomy.html class=md-nav__link> <span class=md-ellipsis> anatomy </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../colorspace.html class=md-nav__link> <span class=md-ellipsis> colorspace </span> </a> </li> <li class=md-nav__item> <a href=../constants.html class=md-nav__link> <span class=md-ellipsis> constants </span> </a> </li> <li class=md-nav__item> <a href=../context_tools.html class=md-nav__link> <span class=md-ellipsis> context_tools </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../create/changes.html class=md-nav__link> <span class=md-ellipsis> create </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../delivery.html class=md-nav__link> <span class=md-ellipsis> delivery </span> </a> </li> <li class=md-nav__item> <a href=../editorial.html class=md-nav__link> <span class=md-ellipsis> editorial </span> </a> </li> <li class=md-nav__item> <a href=../entity_uri.html class=md-nav__link> <span class=md-ellipsis> entity_uri </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../farm/patterning.html class=md-nav__link> <span class=md-ellipsis> farm </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../load/plugins.html class=md-nav__link> <span class=md-ellipsis> load </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../plugin_discover.html class=md-nav__link> <span class=md-ellipsis> plugin_discover </span> </a> </li> <li class=md-nav__item> <a href=../project_folders.html class=md-nav__link> <span class=md-ellipsis> project_folders </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../publish/abstract_collect_render.html class=md-nav__link> <span class=md-ellipsis> publish </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../schema/index.html class=md-nav__link> <span class=md-ellipsis> schema </span> </a> </li> <li class=md-nav__item> <a href=../staging_dir.html class=md-nav__link> <span class=md-ellipsis> staging_dir </span> </a> </li> <li class=md-nav__item> <a href=../tempdir.html class=md-nav__link> <span class=md-ellipsis> tempdir </span> </a> </li> <li class=md-nav__item> <a href=../template_data.html class=md-nav__link> <span class=md-ellipsis> template_data </span> </a> </li> <li class=md-nav__item> <a href=../thumbnails.html class=md-nav__link> <span class=md-ellipsis> thumbnails </span> </a> </li> <li class=md-nav__item> <a href=../usdlib.html class=md-nav__link> <span class=md-ellipsis> usdlib </span> </a> </li> <li class=md-nav__item> <a href=../version_start.html class=md-nav__link> <span class=md-ellipsis> version_start </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1_7_22 checked> <div class="md-nav__link md-nav__container"> <a href=index.html class="md-nav__link "> <span class=md-ellipsis> workfile </span> </a> <label class="md-nav__link " for=__nav_3_1_1_7_22 id=__nav_3_1_1_7_22_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=5 aria-labelledby=__nav_3_1_1_7_22_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1_7_22> <span class="md-nav__icon md-icon"></span> workfile </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=build_workfile.html class=md-nav__link> <span class=md-ellipsis> build_workfile </span> </a> </li> <li class=md-nav__item> <a href=lock_workfile.html class=md-nav__link> <span class=md-ellipsis> lock_workfile </span> </a> </li> <li class=md-nav__item> <a href=path_resolving.html class=md-nav__link> <span class=md-ellipsis> path_resolving </span> </a> </li> <li class=md-nav__item> <a href=utils.html class=md-nav__link> <span class=md-ellipsis> utils </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> workfile_template_builder </span> <span class="md-nav__icon md-icon"></span> </label> <a href=workfile_template_builder.html class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> workfile_template_builder </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder class=md-nav__link> <span class=md-ellipsis> workfile_template_builder </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder class=md-nav__link> <span class=md-ellipsis> AbstractTemplateBuilder </span> </a> <nav class=md-nav aria-label=AbstractTemplateBuilder> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.host class=md-nav__link> <span class=md-ellipsis> host </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.host_name class=md-nav__link> <span class=md-ellipsis> host_name </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.log class=md-nav__link> <span class=md-ellipsis> log </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.placeholder_plugins class=md-nav__link> <span class=md-ellipsis> placeholder_plugins </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder._get_build_profiles class=md-nav__link> <span class=md-ellipsis> _get_build_profiles </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder._prepare_placeholders class=md-nav__link> <span class=md-ellipsis> _prepare_placeholders </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.build_template class=md-nav__link> <span class=md-ellipsis> build_template </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.clear_shared_data class=md-nav__link> <span class=md-ellipsis> clear_shared_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.clear_shared_populate_data class=md-nav__link> <span class=md-ellipsis> clear_shared_populate_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.create_placeholder class=md-nav__link> <span class=md-ellipsis> create_placeholder </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.get_placeholder_plugin_classes class=md-nav__link> <span class=md-ellipsis> get_placeholder_plugin_classes </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.get_placeholders class=md-nav__link> <span class=md-ellipsis> get_placeholders </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.get_shared_data class=md-nav__link> <span class=md-ellipsis> get_shared_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.get_shared_populate_data class=md-nav__link> <span class=md-ellipsis> get_shared_populate_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.get_template_preset class=md-nav__link> <span class=md-ellipsis> get_template_preset </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.get_workfile_path class=md-nav__link> <span class=md-ellipsis> get_workfile_path </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.import_template class=md-nav__link> <span class=md-ellipsis> import_template </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.open_template class=md-nav__link> <span class=md-ellipsis> open_template </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.populate_scene_placeholders class=md-nav__link> <span class=md-ellipsis> populate_scene_placeholders </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.rebuild_template class=md-nav__link> <span class=md-ellipsis> rebuild_template </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.refresh class=md-nav__link> <span class=md-ellipsis> refresh </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.resolve_template_path class=md-nav__link> <span class=md-ellipsis> resolve_template_path </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.save_workfile class=md-nav__link> <span class=md-ellipsis> save_workfile </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.set_shared_data class=md-nav__link> <span class=md-ellipsis> set_shared_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.set_shared_populate_data class=md-nav__link> <span class=md-ellipsis> set_shared_populate_data </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.CreatePlaceholderItem class=md-nav__link> <span class=md-ellipsis> CreatePlaceholderItem </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.LoadPlaceholderItem class=md-nav__link> <span class=md-ellipsis> LoadPlaceholderItem </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderCreateMixin class=md-nav__link> <span class=md-ellipsis> PlaceholderCreateMixin </span> </a> <nav class=md-nav aria-label=PlaceholderCreateMixin> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderCreateMixin._before_instance_create class=md-nav__link> <span class=md-ellipsis> _before_instance_create </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderCreateMixin.delete_placeholder class=md-nav__link> <span class=md-ellipsis> delete_placeholder </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderCreateMixin.get_create_plugin_options class=md-nav__link> <span class=md-ellipsis> get_create_plugin_options </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderCreateMixin.populate_create_placeholder class=md-nav__link> <span class=md-ellipsis> populate_create_placeholder </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderCreateMixin.post_placeholder_process class=md-nav__link> <span class=md-ellipsis> post_placeholder_process </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem class=md-nav__link> <span class=md-ellipsis> PlaceholderItem </span> </a> <nav class=md-nav aria-label=PlaceholderItem> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem.builder class=md-nav__link> <span class=md-ellipsis> builder </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem.data class=md-nav__link> <span class=md-ellipsis> data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem.finished class=md-nav__link> <span class=md-ellipsis> finished </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem.in_progress class=md-nav__link> <span class=md-ellipsis> in_progress </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem.order class=md-nav__link> <span class=md-ellipsis> order </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem.plugin class=md-nav__link> <span class=md-ellipsis> plugin </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem.add_error class=md-nav__link> <span class=md-ellipsis> add_error </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem.get_errors class=md-nav__link> <span class=md-ellipsis> get_errors </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem.set_finished class=md-nav__link> <span class=md-ellipsis> set_finished </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem.set_in_progress class=md-nav__link> <span class=md-ellipsis> set_in_progress </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem.to_dict class=md-nav__link> <span class=md-ellipsis> to_dict </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderLoadMixin class=md-nav__link> <span class=md-ellipsis> PlaceholderLoadMixin </span> </a> <nav class=md-nav aria-label=PlaceholderLoadMixin> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderLoadMixin._before_placeholder_load class=md-nav__link> <span class=md-ellipsis> _before_placeholder_load </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderLoadMixin._before_repre_load class=md-nav__link> <span class=md-ellipsis> _before_repre_load </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderLoadMixin._get_representations class=md-nav__link> <span class=md-ellipsis> _get_representations </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderLoadMixin._reduce_last_version_repre_entities class=md-nav__link> <span class=md-ellipsis> _reduce_last_version_repre_entities </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderLoadMixin.delete_placeholder class=md-nav__link> <span class=md-ellipsis> delete_placeholder </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderLoadMixin.get_load_plugin_options class=md-nav__link> <span class=md-ellipsis> get_load_plugin_options </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderLoadMixin.parse_loader_args class=md-nav__link> <span class=md-ellipsis> parse_loader_args </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderLoadMixin.populate_load_placeholder class=md-nav__link> <span class=md-ellipsis> populate_load_placeholder </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderLoadMixin.post_placeholder_process class=md-nav__link> <span class=md-ellipsis> post_placeholder_process </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin class=md-nav__link> <span class=md-ellipsis> PlaceholderPlugin </span> </a> <nav class=md-nav aria-label=PlaceholderPlugin> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.builder class=md-nav__link> <span class=md-ellipsis> builder </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.identifier class=md-nav__link> <span class=md-ellipsis> identifier </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.log class=md-nav__link> <span class=md-ellipsis> log </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.collect_placeholders class=md-nav__link> <span class=md-ellipsis> collect_placeholders </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.create_placeholder class=md-nav__link> <span class=md-ellipsis> create_placeholder </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.get_placeholder_keys class=md-nav__link> <span class=md-ellipsis> get_placeholder_keys </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.get_placeholder_options class=md-nav__link> <span class=md-ellipsis> get_placeholder_options </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.get_plugin_shared_data class=md-nav__link> <span class=md-ellipsis> get_plugin_shared_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.get_plugin_shared_populate_data class=md-nav__link> <span class=md-ellipsis> get_plugin_shared_populate_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.populate_placeholder class=md-nav__link> <span class=md-ellipsis> populate_placeholder </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.prepare_placeholders class=md-nav__link> <span class=md-ellipsis> prepare_placeholders </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.repopulate_placeholder class=md-nav__link> <span class=md-ellipsis> repopulate_placeholder </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.set_plugin_shared_data class=md-nav__link> <span class=md-ellipsis> set_plugin_shared_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.set_plugin_shared_populate_data class=md-nav__link> <span class=md-ellipsis> set_plugin_shared_populate_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.update_placeholder class=md-nav__link> <span class=md-ellipsis> update_placeholder </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.TemplateAlreadyImported class=md-nav__link> <span class=md-ellipsis> TemplateAlreadyImported </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.TemplateLoadFailed class=md-nav__link> <span class=md-ellipsis> TemplateLoadFailed </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.TemplateNotFound class=md-nav__link> <span class=md-ellipsis> TemplateNotFound </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.TemplateProfileNotFound class=md-nav__link> <span class=md-ellipsis> TemplateProfileNotFound </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../plugins/actions/open_file_explorer.html class=md-nav__link> <span class=md-ellipsis> plugins </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../resources/app_icons/index.html class=md-nav__link> <span class=md-ellipsis> resources </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../scripts/ocio_wrapper.html class=md-nav__link> <span class=md-ellipsis> scripts </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../settings/lib.html class=md-nav__link> <span class=md-ellipsis> settings </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../style/color_defs.html class=md-nav__link> <span class=md-ellipsis> style </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../tests/conftest.html class=md-nav__link> <span class=md-ellipsis> tests </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../tools/attribute_defs/_constants.html class=md-nav__link> <span class=md-ellipsis> tools </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../vendor/python/qargparse.html class=md-nav__link> <span class=md-ellipsis> vendor </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../../version.html class=md-nav__link> <span class=md-ellipsis> version </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../server/settings/conversion.html class=md-nav__link> <span class=md-ellipsis> server </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder class=md-nav__link> <span class=md-ellipsis> workfile_template_builder </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder class=md-nav__link> <span class=md-ellipsis> AbstractTemplateBuilder </span> </a> <nav class=md-nav aria-label=AbstractTemplateBuilder> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.host class=md-nav__link> <span class=md-ellipsis> host </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.host_name class=md-nav__link> <span class=md-ellipsis> host_name </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.log class=md-nav__link> <span class=md-ellipsis> log </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.placeholder_plugins class=md-nav__link> <span class=md-ellipsis> placeholder_plugins </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder._get_build_profiles class=md-nav__link> <span class=md-ellipsis> _get_build_profiles </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder._prepare_placeholders class=md-nav__link> <span class=md-ellipsis> _prepare_placeholders </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.build_template class=md-nav__link> <span class=md-ellipsis> build_template </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.clear_shared_data class=md-nav__link> <span class=md-ellipsis> clear_shared_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.clear_shared_populate_data class=md-nav__link> <span class=md-ellipsis> clear_shared_populate_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.create_placeholder class=md-nav__link> <span class=md-ellipsis> create_placeholder </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.get_placeholder_plugin_classes class=md-nav__link> <span class=md-ellipsis> get_placeholder_plugin_classes </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.get_placeholders class=md-nav__link> <span class=md-ellipsis> get_placeholders </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.get_shared_data class=md-nav__link> <span class=md-ellipsis> get_shared_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.get_shared_populate_data class=md-nav__link> <span class=md-ellipsis> get_shared_populate_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.get_template_preset class=md-nav__link> <span class=md-ellipsis> get_template_preset </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.get_workfile_path class=md-nav__link> <span class=md-ellipsis> get_workfile_path </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.import_template class=md-nav__link> <span class=md-ellipsis> import_template </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.open_template class=md-nav__link> <span class=md-ellipsis> open_template </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.populate_scene_placeholders class=md-nav__link> <span class=md-ellipsis> populate_scene_placeholders </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.rebuild_template class=md-nav__link> <span class=md-ellipsis> rebuild_template </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.refresh class=md-nav__link> <span class=md-ellipsis> refresh </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.resolve_template_path class=md-nav__link> <span class=md-ellipsis> resolve_template_path </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.save_workfile class=md-nav__link> <span class=md-ellipsis> save_workfile </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.set_shared_data class=md-nav__link> <span class=md-ellipsis> set_shared_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.set_shared_populate_data class=md-nav__link> <span class=md-ellipsis> set_shared_populate_data </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.CreatePlaceholderItem class=md-nav__link> <span class=md-ellipsis> CreatePlaceholderItem </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.LoadPlaceholderItem class=md-nav__link> <span class=md-ellipsis> LoadPlaceholderItem </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderCreateMixin class=md-nav__link> <span class=md-ellipsis> PlaceholderCreateMixin </span> </a> <nav class=md-nav aria-label=PlaceholderCreateMixin> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderCreateMixin._before_instance_create class=md-nav__link> <span class=md-ellipsis> _before_instance_create </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderCreateMixin.delete_placeholder class=md-nav__link> <span class=md-ellipsis> delete_placeholder </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderCreateMixin.get_create_plugin_options class=md-nav__link> <span class=md-ellipsis> get_create_plugin_options </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderCreateMixin.populate_create_placeholder class=md-nav__link> <span class=md-ellipsis> populate_create_placeholder </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderCreateMixin.post_placeholder_process class=md-nav__link> <span class=md-ellipsis> post_placeholder_process </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem class=md-nav__link> <span class=md-ellipsis> PlaceholderItem </span> </a> <nav class=md-nav aria-label=PlaceholderItem> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem.builder class=md-nav__link> <span class=md-ellipsis> builder </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem.data class=md-nav__link> <span class=md-ellipsis> data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem.finished class=md-nav__link> <span class=md-ellipsis> finished </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem.in_progress class=md-nav__link> <span class=md-ellipsis> in_progress </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem.order class=md-nav__link> <span class=md-ellipsis> order </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem.plugin class=md-nav__link> <span class=md-ellipsis> plugin </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem.add_error class=md-nav__link> <span class=md-ellipsis> add_error </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem.get_errors class=md-nav__link> <span class=md-ellipsis> get_errors </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem.set_finished class=md-nav__link> <span class=md-ellipsis> set_finished </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem.set_in_progress class=md-nav__link> <span class=md-ellipsis> set_in_progress </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem.to_dict class=md-nav__link> <span class=md-ellipsis> to_dict </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderLoadMixin class=md-nav__link> <span class=md-ellipsis> PlaceholderLoadMixin </span> </a> <nav class=md-nav aria-label=PlaceholderLoadMixin> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderLoadMixin._before_placeholder_load class=md-nav__link> <span class=md-ellipsis> _before_placeholder_load </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderLoadMixin._before_repre_load class=md-nav__link> <span class=md-ellipsis> _before_repre_load </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderLoadMixin._get_representations class=md-nav__link> <span class=md-ellipsis> _get_representations </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderLoadMixin._reduce_last_version_repre_entities class=md-nav__link> <span class=md-ellipsis> _reduce_last_version_repre_entities </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderLoadMixin.delete_placeholder class=md-nav__link> <span class=md-ellipsis> delete_placeholder </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderLoadMixin.get_load_plugin_options class=md-nav__link> <span class=md-ellipsis> get_load_plugin_options </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderLoadMixin.parse_loader_args class=md-nav__link> <span class=md-ellipsis> parse_loader_args </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderLoadMixin.populate_load_placeholder class=md-nav__link> <span class=md-ellipsis> populate_load_placeholder </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderLoadMixin.post_placeholder_process class=md-nav__link> <span class=md-ellipsis> post_placeholder_process </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin class=md-nav__link> <span class=md-ellipsis> PlaceholderPlugin </span> </a> <nav class=md-nav aria-label=PlaceholderPlugin> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.builder class=md-nav__link> <span class=md-ellipsis> builder </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.identifier class=md-nav__link> <span class=md-ellipsis> identifier </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.log class=md-nav__link> <span class=md-ellipsis> log </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.collect_placeholders class=md-nav__link> <span class=md-ellipsis> collect_placeholders </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.create_placeholder class=md-nav__link> <span class=md-ellipsis> create_placeholder </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.get_placeholder_keys class=md-nav__link> <span class=md-ellipsis> get_placeholder_keys </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.get_placeholder_options class=md-nav__link> <span class=md-ellipsis> get_placeholder_options </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.get_plugin_shared_data class=md-nav__link> <span class=md-ellipsis> get_plugin_shared_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.get_plugin_shared_populate_data class=md-nav__link> <span class=md-ellipsis> get_plugin_shared_populate_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.populate_placeholder class=md-nav__link> <span class=md-ellipsis> populate_placeholder </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.prepare_placeholders class=md-nav__link> <span class=md-ellipsis> prepare_placeholders </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.repopulate_placeholder class=md-nav__link> <span class=md-ellipsis> repopulate_placeholder </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.set_plugin_shared_data class=md-nav__link> <span class=md-ellipsis> set_plugin_shared_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.set_plugin_shared_populate_data class=md-nav__link> <span class=md-ellipsis> set_plugin_shared_populate_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.update_placeholder class=md-nav__link> <span class=md-ellipsis> update_placeholder </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.TemplateAlreadyImported class=md-nav__link> <span class=md-ellipsis> TemplateAlreadyImported </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.TemplateLoadFailed class=md-nav__link> <span class=md-ellipsis> TemplateLoadFailed </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.TemplateNotFound class=md-nav__link> <span class=md-ellipsis> TemplateNotFound </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.workfile.workfile_template_builder.TemplateProfileNotFound class=md-nav__link> <span class=md-ellipsis> TemplateProfileNotFound </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>workfile_template_builder</h1> <div class="doc doc-object doc-module"> <a id=client.ayon_core.pipeline.workfile.workfile_template_builder></a> <div class="doc doc-contents first"> <p>Workfile build mechanism using workfile templates.</p> <p>Build templates are manually prepared using plugin definitions which create placeholders inside the template which are populated on import.</p> <p>This approach is very explicit to achieve very specific build logic that can be targeted by task types and names.</p> <p>Placeholders are created using placeholder plugins which should care about logic and data of placeholder items. 'PlaceholderItem' is used to keep track about it's progress.</p> <div class="doc doc-children"> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder class="doc doc-heading"> <code>AbstractTemplateBuilder</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=abc.ABC>ABC</span></code></p> <p>Abstraction of Template Builder.</p> <p>Builder cares about context, shared data, cache, discovery of plugins and trigger logic. Provides public api for host workfile build system.</p> <p>Rest of logic is based on plugins that care about collection and creation of placeholder items.</p> <p>Population of placeholders happens in loops. Each loop will collect all available placeholders, skip already populated, and populate the rest.</p> <p>Builder item has 2 types of shared data. Refresh lifetime which are cleared on refresh and populate lifetime which are cleared after loop of placeholder population.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>host</code> </td> <td> <code><span title=Union>Union</span>[<span title=ayon_core.host.HostBase>HostBase</span>, <span title=ModuleType>ModuleType</span>]</code> </td> <td> <div class=doc-md-description> <p>Implementation of host.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 85</span>
<span class=normal> 86</span>
<span class=normal> 87</span>
<span class=normal> 88</span>
<span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span>
<span class=normal>277</span>
<span class=normal>278</span>
<span class=normal>279</span>
<span class=normal>280</span>
<span class=normal>281</span>
<span class=normal>282</span>
<span class=normal>283</span>
<span class=normal>284</span>
<span class=normal>285</span>
<span class=normal>286</span>
<span class=normal>287</span>
<span class=normal>288</span>
<span class=normal>289</span>
<span class=normal>290</span>
<span class=normal>291</span>
<span class=normal>292</span>
<span class=normal>293</span>
<span class=normal>294</span>
<span class=normal>295</span>
<span class=normal>296</span>
<span class=normal>297</span>
<span class=normal>298</span>
<span class=normal>299</span>
<span class=normal>300</span>
<span class=normal>301</span>
<span class=normal>302</span>
<span class=normal>303</span>
<span class=normal>304</span>
<span class=normal>305</span>
<span class=normal>306</span>
<span class=normal>307</span>
<span class=normal>308</span>
<span class=normal>309</span>
<span class=normal>310</span>
<span class=normal>311</span>
<span class=normal>312</span>
<span class=normal>313</span>
<span class=normal>314</span>
<span class=normal>315</span>
<span class=normal>316</span>
<span class=normal>317</span>
<span class=normal>318</span>
<span class=normal>319</span>
<span class=normal>320</span>
<span class=normal>321</span>
<span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span>
<span class=normal>325</span>
<span class=normal>326</span>
<span class=normal>327</span>
<span class=normal>328</span>
<span class=normal>329</span>
<span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span>
<span class=normal>334</span>
<span class=normal>335</span>
<span class=normal>336</span>
<span class=normal>337</span>
<span class=normal>338</span>
<span class=normal>339</span>
<span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span>
<span class=normal>344</span>
<span class=normal>345</span>
<span class=normal>346</span>
<span class=normal>347</span>
<span class=normal>348</span>
<span class=normal>349</span>
<span class=normal>350</span>
<span class=normal>351</span>
<span class=normal>352</span>
<span class=normal>353</span>
<span class=normal>354</span>
<span class=normal>355</span>
<span class=normal>356</span>
<span class=normal>357</span>
<span class=normal>358</span>
<span class=normal>359</span>
<span class=normal>360</span>
<span class=normal>361</span>
<span class=normal>362</span>
<span class=normal>363</span>
<span class=normal>364</span>
<span class=normal>365</span>
<span class=normal>366</span>
<span class=normal>367</span>
<span class=normal>368</span>
<span class=normal>369</span>
<span class=normal>370</span>
<span class=normal>371</span>
<span class=normal>372</span>
<span class=normal>373</span>
<span class=normal>374</span>
<span class=normal>375</span>
<span class=normal>376</span>
<span class=normal>377</span>
<span class=normal>378</span>
<span class=normal>379</span>
<span class=normal>380</span>
<span class=normal>381</span>
<span class=normal>382</span>
<span class=normal>383</span>
<span class=normal>384</span>
<span class=normal>385</span>
<span class=normal>386</span>
<span class=normal>387</span>
<span class=normal>388</span>
<span class=normal>389</span>
<span class=normal>390</span>
<span class=normal>391</span>
<span class=normal>392</span>
<span class=normal>393</span>
<span class=normal>394</span>
<span class=normal>395</span>
<span class=normal>396</span>
<span class=normal>397</span>
<span class=normal>398</span>
<span class=normal>399</span>
<span class=normal>400</span>
<span class=normal>401</span>
<span class=normal>402</span>
<span class=normal>403</span>
<span class=normal>404</span>
<span class=normal>405</span>
<span class=normal>406</span>
<span class=normal>407</span>
<span class=normal>408</span>
<span class=normal>409</span>
<span class=normal>410</span>
<span class=normal>411</span>
<span class=normal>412</span>
<span class=normal>413</span>
<span class=normal>414</span>
<span class=normal>415</span>
<span class=normal>416</span>
<span class=normal>417</span>
<span class=normal>418</span>
<span class=normal>419</span>
<span class=normal>420</span>
<span class=normal>421</span>
<span class=normal>422</span>
<span class=normal>423</span>
<span class=normal>424</span>
<span class=normal>425</span>
<span class=normal>426</span>
<span class=normal>427</span>
<span class=normal>428</span>
<span class=normal>429</span>
<span class=normal>430</span>
<span class=normal>431</span>
<span class=normal>432</span>
<span class=normal>433</span>
<span class=normal>434</span>
<span class=normal>435</span>
<span class=normal>436</span>
<span class=normal>437</span>
<span class=normal>438</span>
<span class=normal>439</span>
<span class=normal>440</span>
<span class=normal>441</span>
<span class=normal>442</span>
<span class=normal>443</span>
<span class=normal>444</span>
<span class=normal>445</span>
<span class=normal>446</span>
<span class=normal>447</span>
<span class=normal>448</span>
<span class=normal>449</span>
<span class=normal>450</span>
<span class=normal>451</span>
<span class=normal>452</span>
<span class=normal>453</span>
<span class=normal>454</span>
<span class=normal>455</span>
<span class=normal>456</span>
<span class=normal>457</span>
<span class=normal>458</span>
<span class=normal>459</span>
<span class=normal>460</span>
<span class=normal>461</span>
<span class=normal>462</span>
<span class=normal>463</span>
<span class=normal>464</span>
<span class=normal>465</span>
<span class=normal>466</span>
<span class=normal>467</span>
<span class=normal>468</span>
<span class=normal>469</span>
<span class=normal>470</span>
<span class=normal>471</span>
<span class=normal>472</span>
<span class=normal>473</span>
<span class=normal>474</span>
<span class=normal>475</span>
<span class=normal>476</span>
<span class=normal>477</span>
<span class=normal>478</span>
<span class=normal>479</span>
<span class=normal>480</span>
<span class=normal>481</span>
<span class=normal>482</span>
<span class=normal>483</span>
<span class=normal>484</span>
<span class=normal>485</span>
<span class=normal>486</span>
<span class=normal>487</span>
<span class=normal>488</span>
<span class=normal>489</span>
<span class=normal>490</span>
<span class=normal>491</span>
<span class=normal>492</span>
<span class=normal>493</span>
<span class=normal>494</span>
<span class=normal>495</span>
<span class=normal>496</span>
<span class=normal>497</span>
<span class=normal>498</span>
<span class=normal>499</span>
<span class=normal>500</span>
<span class=normal>501</span>
<span class=normal>502</span>
<span class=normal>503</span>
<span class=normal>504</span>
<span class=normal>505</span>
<span class=normal>506</span>
<span class=normal>507</span>
<span class=normal>508</span>
<span class=normal>509</span>
<span class=normal>510</span>
<span class=normal>511</span>
<span class=normal>512</span>
<span class=normal>513</span>
<span class=normal>514</span>
<span class=normal>515</span>
<span class=normal>516</span>
<span class=normal>517</span>
<span class=normal>518</span>
<span class=normal>519</span>
<span class=normal>520</span>
<span class=normal>521</span>
<span class=normal>522</span>
<span class=normal>523</span>
<span class=normal>524</span>
<span class=normal>525</span>
<span class=normal>526</span>
<span class=normal>527</span>
<span class=normal>528</span>
<span class=normal>529</span>
<span class=normal>530</span>
<span class=normal>531</span>
<span class=normal>532</span>
<span class=normal>533</span>
<span class=normal>534</span>
<span class=normal>535</span>
<span class=normal>536</span>
<span class=normal>537</span>
<span class=normal>538</span>
<span class=normal>539</span>
<span class=normal>540</span>
<span class=normal>541</span>
<span class=normal>542</span>
<span class=normal>543</span>
<span class=normal>544</span>
<span class=normal>545</span>
<span class=normal>546</span>
<span class=normal>547</span>
<span class=normal>548</span>
<span class=normal>549</span>
<span class=normal>550</span>
<span class=normal>551</span>
<span class=normal>552</span>
<span class=normal>553</span>
<span class=normal>554</span>
<span class=normal>555</span>
<span class=normal>556</span>
<span class=normal>557</span>
<span class=normal>558</span>
<span class=normal>559</span>
<span class=normal>560</span>
<span class=normal>561</span>
<span class=normal>562</span>
<span class=normal>563</span>
<span class=normal>564</span>
<span class=normal>565</span>
<span class=normal>566</span>
<span class=normal>567</span>
<span class=normal>568</span>
<span class=normal>569</span>
<span class=normal>570</span>
<span class=normal>571</span>
<span class=normal>572</span>
<span class=normal>573</span>
<span class=normal>574</span>
<span class=normal>575</span>
<span class=normal>576</span>
<span class=normal>577</span>
<span class=normal>578</span>
<span class=normal>579</span>
<span class=normal>580</span>
<span class=normal>581</span>
<span class=normal>582</span>
<span class=normal>583</span>
<span class=normal>584</span>
<span class=normal>585</span>
<span class=normal>586</span>
<span class=normal>587</span>
<span class=normal>588</span>
<span class=normal>589</span>
<span class=normal>590</span>
<span class=normal>591</span>
<span class=normal>592</span>
<span class=normal>593</span>
<span class=normal>594</span>
<span class=normal>595</span>
<span class=normal>596</span>
<span class=normal>597</span>
<span class=normal>598</span>
<span class=normal>599</span>
<span class=normal>600</span>
<span class=normal>601</span>
<span class=normal>602</span>
<span class=normal>603</span>
<span class=normal>604</span>
<span class=normal>605</span>
<span class=normal>606</span>
<span class=normal>607</span>
<span class=normal>608</span>
<span class=normal>609</span>
<span class=normal>610</span>
<span class=normal>611</span>
<span class=normal>612</span>
<span class=normal>613</span>
<span class=normal>614</span>
<span class=normal>615</span>
<span class=normal>616</span>
<span class=normal>617</span>
<span class=normal>618</span>
<span class=normal>619</span>
<span class=normal>620</span>
<span class=normal>621</span>
<span class=normal>622</span>
<span class=normal>623</span>
<span class=normal>624</span>
<span class=normal>625</span>
<span class=normal>626</span>
<span class=normal>627</span>
<span class=normal>628</span>
<span class=normal>629</span>
<span class=normal>630</span>
<span class=normal>631</span>
<span class=normal>632</span>
<span class=normal>633</span>
<span class=normal>634</span>
<span class=normal>635</span>
<span class=normal>636</span>
<span class=normal>637</span>
<span class=normal>638</span>
<span class=normal>639</span>
<span class=normal>640</span>
<span class=normal>641</span>
<span class=normal>642</span>
<span class=normal>643</span>
<span class=normal>644</span>
<span class=normal>645</span>
<span class=normal>646</span>
<span class=normal>647</span>
<span class=normal>648</span>
<span class=normal>649</span>
<span class=normal>650</span>
<span class=normal>651</span>
<span class=normal>652</span>
<span class=normal>653</span>
<span class=normal>654</span>
<span class=normal>655</span>
<span class=normal>656</span>
<span class=normal>657</span>
<span class=normal>658</span>
<span class=normal>659</span>
<span class=normal>660</span>
<span class=normal>661</span>
<span class=normal>662</span>
<span class=normal>663</span>
<span class=normal>664</span>
<span class=normal>665</span>
<span class=normal>666</span>
<span class=normal>667</span>
<span class=normal>668</span>
<span class=normal>669</span>
<span class=normal>670</span>
<span class=normal>671</span>
<span class=normal>672</span>
<span class=normal>673</span>
<span class=normal>674</span>
<span class=normal>675</span>
<span class=normal>676</span>
<span class=normal>677</span>
<span class=normal>678</span>
<span class=normal>679</span>
<span class=normal>680</span>
<span class=normal>681</span>
<span class=normal>682</span>
<span class=normal>683</span>
<span class=normal>684</span>
<span class=normal>685</span>
<span class=normal>686</span>
<span class=normal>687</span>
<span class=normal>688</span>
<span class=normal>689</span>
<span class=normal>690</span>
<span class=normal>691</span>
<span class=normal>692</span>
<span class=normal>693</span>
<span class=normal>694</span>
<span class=normal>695</span>
<span class=normal>696</span>
<span class=normal>697</span>
<span class=normal>698</span>
<span class=normal>699</span>
<span class=normal>700</span>
<span class=normal>701</span>
<span class=normal>702</span>
<span class=normal>703</span>
<span class=normal>704</span>
<span class=normal>705</span>
<span class=normal>706</span>
<span class=normal>707</span>
<span class=normal>708</span>
<span class=normal>709</span>
<span class=normal>710</span>
<span class=normal>711</span>
<span class=normal>712</span>
<span class=normal>713</span>
<span class=normal>714</span>
<span class=normal>715</span>
<span class=normal>716</span>
<span class=normal>717</span>
<span class=normal>718</span>
<span class=normal>719</span>
<span class=normal>720</span>
<span class=normal>721</span>
<span class=normal>722</span>
<span class=normal>723</span>
<span class=normal>724</span>
<span class=normal>725</span>
<span class=normal>726</span>
<span class=normal>727</span>
<span class=normal>728</span>
<span class=normal>729</span>
<span class=normal>730</span>
<span class=normal>731</span>
<span class=normal>732</span>
<span class=normal>733</span>
<span class=normal>734</span>
<span class=normal>735</span>
<span class=normal>736</span>
<span class=normal>737</span>
<span class=normal>738</span>
<span class=normal>739</span>
<span class=normal>740</span>
<span class=normal>741</span>
<span class=normal>742</span>
<span class=normal>743</span>
<span class=normal>744</span>
<span class=normal>745</span>
<span class=normal>746</span>
<span class=normal>747</span>
<span class=normal>748</span>
<span class=normal>749</span>
<span class=normal>750</span>
<span class=normal>751</span>
<span class=normal>752</span>
<span class=normal>753</span>
<span class=normal>754</span>
<span class=normal>755</span>
<span class=normal>756</span>
<span class=normal>757</span>
<span class=normal>758</span>
<span class=normal>759</span>
<span class=normal>760</span>
<span class=normal>761</span>
<span class=normal>762</span>
<span class=normal>763</span>
<span class=normal>764</span>
<span class=normal>765</span>
<span class=normal>766</span>
<span class=normal>767</span>
<span class=normal>768</span>
<span class=normal>769</span>
<span class=normal>770</span>
<span class=normal>771</span>
<span class=normal>772</span>
<span class=normal>773</span>
<span class=normal>774</span>
<span class=normal>775</span>
<span class=normal>776</span>
<span class=normal>777</span>
<span class=normal>778</span>
<span class=normal>779</span>
<span class=normal>780</span>
<span class=normal>781</span>
<span class=normal>782</span>
<span class=normal>783</span>
<span class=normal>784</span>
<span class=normal>785</span>
<span class=normal>786</span>
<span class=normal>787</span>
<span class=normal>788</span>
<span class=normal>789</span>
<span class=normal>790</span>
<span class=normal>791</span>
<span class=normal>792</span>
<span class=normal>793</span>
<span class=normal>794</span>
<span class=normal>795</span>
<span class=normal>796</span>
<span class=normal>797</span>
<span class=normal>798</span>
<span class=normal>799</span>
<span class=normal>800</span>
<span class=normal>801</span>
<span class=normal>802</span>
<span class=normal>803</span>
<span class=normal>804</span>
<span class=normal>805</span>
<span class=normal>806</span>
<span class=normal>807</span>
<span class=normal>808</span>
<span class=normal>809</span>
<span class=normal>810</span>
<span class=normal>811</span>
<span class=normal>812</span>
<span class=normal>813</span>
<span class=normal>814</span>
<span class=normal>815</span>
<span class=normal>816</span>
<span class=normal>817</span>
<span class=normal>818</span>
<span class=normal>819</span>
<span class=normal>820</span>
<span class=normal>821</span>
<span class=normal>822</span>
<span class=normal>823</span>
<span class=normal>824</span>
<span class=normal>825</span>
<span class=normal>826</span>
<span class=normal>827</span>
<span class=normal>828</span>
<span class=normal>829</span>
<span class=normal>830</span>
<span class=normal>831</span>
<span class=normal>832</span>
<span class=normal>833</span>
<span class=normal>834</span>
<span class=normal>835</span>
<span class=normal>836</span>
<span class=normal>837</span>
<span class=normal>838</span>
<span class=normal>839</span>
<span class=normal>840</span>
<span class=normal>841</span>
<span class=normal>842</span>
<span class=normal>843</span>
<span class=normal>844</span>
<span class=normal>845</span>
<span class=normal>846</span>
<span class=normal>847</span>
<span class=normal>848</span>
<span class=normal>849</span>
<span class=normal>850</span>
<span class=normal>851</span>
<span class=normal>852</span>
<span class=normal>853</span>
<span class=normal>854</span>
<span class=normal>855</span>
<span class=normal>856</span>
<span class=normal>857</span>
<span class=normal>858</span>
<span class=normal>859</span>
<span class=normal>860</span>
<span class=normal>861</span>
<span class=normal>862</span>
<span class=normal>863</span>
<span class=normal>864</span>
<span class=normal>865</span>
<span class=normal>866</span>
<span class=normal>867</span>
<span class=normal>868</span>
<span class=normal>869</span>
<span class=normal>870</span>
<span class=normal>871</span>
<span class=normal>872</span>
<span class=normal>873</span>
<span class=normal>874</span>
<span class=normal>875</span>
<span class=normal>876</span>
<span class=normal>877</span>
<span class=normal>878</span>
<span class=normal>879</span>
<span class=normal>880</span>
<span class=normal>881</span>
<span class=normal>882</span>
<span class=normal>883</span>
<span class=normal>884</span>
<span class=normal>885</span>
<span class=normal>886</span>
<span class=normal>887</span>
<span class=normal>888</span>
<span class=normal>889</span>
<span class=normal>890</span>
<span class=normal>891</span>
<span class=normal>892</span>
<span class=normal>893</span>
<span class=normal>894</span>
<span class=normal>895</span>
<span class=normal>896</span>
<span class=normal>897</span>
<span class=normal>898</span>
<span class=normal>899</span>
<span class=normal>900</span>
<span class=normal>901</span>
<span class=normal>902</span>
<span class=normal>903</span>
<span class=normal>904</span>
<span class=normal>905</span>
<span class=normal>906</span>
<span class=normal>907</span>
<span class=normal>908</span>
<span class=normal>909</span>
<span class=normal>910</span>
<span class=normal>911</span>
<span class=normal>912</span>
<span class=normal>913</span>
<span class=normal>914</span>
<span class=normal>915</span>
<span class=normal>916</span>
<span class=normal>917</span>
<span class=normal>918</span>
<span class=normal>919</span>
<span class=normal>920</span>
<span class=normal>921</span>
<span class=normal>922</span>
<span class=normal>923</span>
<span class=normal>924</span>
<span class=normal>925</span>
<span class=normal>926</span>
<span class=normal>927</span>
<span class=normal>928</span>
<span class=normal>929</span>
<span class=normal>930</span>
<span class=normal>931</span>
<span class=normal>932</span>
<span class=normal>933</span>
<span class=normal>934</span>
<span class=normal>935</span>
<span class=normal>936</span>
<span class=normal>937</span>
<span class=normal>938</span>
<span class=normal>939</span>
<span class=normal>940</span>
<span class=normal>941</span>
<span class=normal>942</span>
<span class=normal>943</span>
<span class=normal>944</span>
<span class=normal>945</span>
<span class=normal>946</span>
<span class=normal>947</span>
<span class=normal>948</span>
<span class=normal>949</span>
<span class=normal>950</span>
<span class=normal>951</span>
<span class=normal>952</span>
<span class=normal>953</span>
<span class=normal>954</span>
<span class=normal>955</span>
<span class=normal>956</span>
<span class=normal>957</span>
<span class=normal>958</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>AbstractTemplateBuilder</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Abstraction of Template Builder.</span>

<span class=sd>    Builder cares about context, shared data, cache, discovery of plugins</span>
<span class=sd>    and trigger logic. Provides public api for host workfile build system.</span>

<span class=sd>    Rest of logic is based on plugins that care about collection and creation</span>
<span class=sd>    of placeholder items.</span>

<span class=sd>    Population of placeholders happens in loops. Each loop will collect all</span>
<span class=sd>    available placeholders, skip already populated, and populate the rest.</span>

<span class=sd>    Builder item has 2 types of shared data. Refresh lifetime which are cleared</span>
<span class=sd>    on refresh and populate lifetime which are cleared after loop of</span>
<span class=sd>    placeholder population.</span>

<span class=sd>    Args:</span>
<span class=sd>        host (Union[HostBase, ModuleType]): Implementation of host.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>_log</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=n>use_legacy_creators</span> <span class=o>=</span> <span class=kc>False</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>host</span><span class=p>):</span>
        <span class=c1># Get host name</span>
        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>host</span><span class=p>,</span> <span class=n>HostBase</span><span class=p>):</span>
            <span class=n>host_name</span> <span class=o>=</span> <span class=n>host</span><span class=o>.</span><span class=n>name</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>host_name</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AYON_HOST_NAME&quot;</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_host</span> <span class=o>=</span> <span class=n>host</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_host_name</span> <span class=o>=</span> <span class=n>host_name</span>

        <span class=c1># Shared data across placeholder plugins</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_shared_data</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_shared_populate_data</span> <span class=o>=</span> <span class=p>{}</span>

        <span class=c1># Where created objects of placeholder plugins will be stored</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_placeholder_plugins</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_loaders_by_name</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_creators_by_name</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_create_context</span> <span class=o>=</span> <span class=kc>None</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_project_settings</span> <span class=o>=</span> <span class=kc>None</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_current_folder_entity</span> <span class=o>=</span> <span class=n>_NOT_SET</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_current_task_entity</span> <span class=o>=</span> <span class=n>_NOT_SET</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_linked_folder_entities</span> <span class=o>=</span> <span class=n>_NOT_SET</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_event_system</span> <span class=o>=</span> <span class=n>EventSystem</span><span class=p>()</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>project_name</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_host</span><span class=p>,</span> <span class=n>HostBase</span><span class=p>):</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_host</span><span class=o>.</span><span class=n>get_current_project_name</span><span class=p>()</span>
        <span class=k>return</span> <span class=n>os</span><span class=o>.</span><span class=n>getenv</span><span class=p>(</span><span class=s2>&quot;AYON_PROJECT_NAME&quot;</span><span class=p>)</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>current_folder_path</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_host</span><span class=p>,</span> <span class=n>HostBase</span><span class=p>):</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_host</span><span class=o>.</span><span class=n>get_current_folder_path</span><span class=p>()</span>
        <span class=k>return</span> <span class=n>os</span><span class=o>.</span><span class=n>getenv</span><span class=p>(</span><span class=s2>&quot;AYON_FOLDER_PATH&quot;</span><span class=p>)</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>current_task_name</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_host</span><span class=p>,</span> <span class=n>HostBase</span><span class=p>):</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_host</span><span class=o>.</span><span class=n>get_current_task_name</span><span class=p>()</span>
        <span class=k>return</span> <span class=n>os</span><span class=o>.</span><span class=n>getenv</span><span class=p>(</span><span class=s2>&quot;AYON_TASK_NAME&quot;</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_current_context</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_host</span><span class=p>,</span> <span class=n>HostBase</span><span class=p>):</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_host</span><span class=o>.</span><span class=n>get_current_context</span><span class=p>()</span>
        <span class=k>return</span> <span class=p>{</span>
            <span class=s2>&quot;project_name&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>project_name</span><span class=p>,</span>
            <span class=s2>&quot;folder_path&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>current_folder_path</span><span class=p>,</span>
            <span class=s2>&quot;task_name&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>current_task_name</span>
        <span class=p>}</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>project_settings</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_project_settings</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_project_settings</span> <span class=o>=</span> <span class=n>get_project_settings</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>project_name</span><span class=p>)</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_project_settings</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>current_folder_entity</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_folder_entity</span> <span class=ow>is</span> <span class=n>_NOT_SET</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_current_folder_entity</span> <span class=o>=</span> <span class=n>get_folder_by_path</span><span class=p>(</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>project_name</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>current_folder_path</span>
            <span class=p>)</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_folder_entity</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>linked_folder_entities</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_linked_folder_entities</span> <span class=ow>is</span> <span class=n>_NOT_SET</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_linked_folder_entities</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_linked_folder_entities</span><span class=p>()</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_linked_folder_entities</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>current_task_entity</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_task_entity</span> <span class=ow>is</span> <span class=n>_NOT_SET</span><span class=p>:</span>
            <span class=n>task_entity</span> <span class=o>=</span> <span class=kc>None</span>
            <span class=n>folder_entity</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>current_folder_entity</span>
            <span class=k>if</span> <span class=n>folder_entity</span><span class=p>:</span>
                <span class=n>task_entity</span> <span class=o>=</span> <span class=n>get_task_by_name</span><span class=p>(</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>project_name</span><span class=p>,</span>
                    <span class=n>folder_entity</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>],</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>current_task_name</span>
                <span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_current_task_entity</span> <span class=o>=</span> <span class=n>task_entity</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_task_entity</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>current_task_type</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=n>task_entity</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>current_task_entity</span>
        <span class=k>if</span> <span class=n>task_entity</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>task_entity</span><span class=p>[</span><span class=s2>&quot;taskType&quot;</span><span class=p>]</span>
        <span class=k>return</span> <span class=kc>None</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>create_context</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_create_context</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_create_context</span> <span class=o>=</span> <span class=n>CreateContext</span><span class=p>(</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=p>,</span>
                <span class=n>discover_publish_plugins</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
                <span class=n>headless</span><span class=o>=</span><span class=kc>True</span>
            <span class=p>)</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_create_context</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_placeholder_plugin_classes</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get placeholder plugin classes that can be used to build template.</span>

<span class=sd>        Default implementation looks for method</span>
<span class=sd>            &#39;get_workfile_build_placeholder_plugins&#39; on host.</span>

<span class=sd>        Returns:</span>
<span class=sd>            List[PlaceholderPlugin]: Plugin classes available for host.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>plugins</span> <span class=o>=</span> <span class=p>[]</span>

        <span class=c1># Backwards compatibility</span>
        <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_host</span><span class=p>,</span> <span class=s2>&quot;get_workfile_build_placeholder_plugins&quot;</span><span class=p>):</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_host</span><span class=o>.</span><span class=n>get_workfile_build_placeholder_plugins</span><span class=p>()</span>

        <span class=n>plugins</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>discover</span><span class=p>(</span><span class=n>PlaceholderPlugin</span><span class=p>))</span>
        <span class=k>return</span> <span class=n>plugins</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>host</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Access to host implementation.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Union[HostBase, ModuleType]: Implementation of host.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_host</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>host_name</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Name of &#39;host&#39; implementation.</span>

<span class=sd>        Returns:</span>
<span class=sd>            str: Host&#39;s name.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_host_name</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>log</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Dynamically created logger for the plugin.&quot;&quot;&quot;</span>

        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_log</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_log</span> <span class=o>=</span> <span class=n>Logger</span><span class=o>.</span><span class=n>get_logger</span><span class=p>(</span><span class=nb>repr</span><span class=p>(</span><span class=bp>self</span><span class=p>))</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_log</span>

    <span class=k>def</span><span class=w> </span><span class=nf>refresh</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Reset cached data.&quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_placeholder_plugins</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_loaders_by_name</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_creators_by_name</span> <span class=o>=</span> <span class=kc>None</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_current_folder_entity</span> <span class=o>=</span> <span class=n>_NOT_SET</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_current_task_entity</span> <span class=o>=</span> <span class=n>_NOT_SET</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_linked_folder_entities</span> <span class=o>=</span> <span class=n>_NOT_SET</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_project_settings</span> <span class=o>=</span> <span class=kc>None</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_event_system</span> <span class=o>=</span> <span class=n>EventSystem</span><span class=p>()</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>clear_shared_data</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>clear_shared_populate_data</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_loaders_by_name</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_loaders_by_name</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_loaders_by_name</span> <span class=o>=</span> <span class=n>get_loaders_by_name</span><span class=p>()</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_loaders_by_name</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_get_linked_folder_entities</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=n>project_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>project_name</span>
        <span class=n>folder_entity</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>current_folder_entity</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>folder_entity</span><span class=p>:</span>
            <span class=k>return</span> <span class=p>[]</span>
        <span class=n>links</span> <span class=o>=</span> <span class=n>get_folder_links</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span> <span class=n>folder_entity</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>],</span> <span class=n>link_direction</span><span class=o>=</span><span class=s2>&quot;in&quot;</span>
        <span class=p>)</span>
        <span class=n>linked_folder_ids</span> <span class=o>=</span> <span class=p>{</span>
            <span class=n>link</span><span class=p>[</span><span class=s2>&quot;entityId&quot;</span><span class=p>]</span>
            <span class=k>for</span> <span class=n>link</span> <span class=ow>in</span> <span class=n>links</span>
            <span class=k>if</span> <span class=n>link</span><span class=p>[</span><span class=s2>&quot;entityType&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&quot;folder&quot;</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=nb>list</span><span class=p>(</span><span class=n>get_folders</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=n>folder_ids</span><span class=o>=</span><span class=n>linked_folder_ids</span><span class=p>))</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_collect_legacy_creators</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=n>creators_by_name</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=k>for</span> <span class=n>creator</span> <span class=ow>in</span> <span class=n>discover_legacy_creator_plugins</span><span class=p>():</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=n>creator</span><span class=o>.</span><span class=n>enabled</span><span class=p>:</span>
                <span class=k>continue</span>
            <span class=n>creator_name</span> <span class=o>=</span> <span class=n>creator</span><span class=o>.</span><span class=vm>__name__</span>
            <span class=k>if</span> <span class=n>creator_name</span> <span class=ow>in</span> <span class=n>creators_by_name</span><span class=p>:</span>
                <span class=k>raise</span> <span class=ne>KeyError</span><span class=p>(</span>
                    <span class=s2>&quot;Duplicated creator name </span><span class=si>{}</span><span class=s2> !&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>creator_name</span><span class=p>)</span>
                <span class=p>)</span>
            <span class=n>creators_by_name</span><span class=p>[</span><span class=n>creator_name</span><span class=p>]</span> <span class=o>=</span> <span class=n>creator</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_creators_by_name</span> <span class=o>=</span> <span class=n>creators_by_name</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_collect_creators</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_creators_by_name</span> <span class=o>=</span> <span class=p>{</span>
            <span class=n>identifier</span><span class=p>:</span> <span class=n>creator</span>
            <span class=k>for</span> <span class=n>identifier</span><span class=p>,</span> <span class=n>creator</span>
            <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>create_context</span><span class=o>.</span><span class=n>manual_creators</span><span class=o>.</span><span class=n>items</span><span class=p>()</span>
            <span class=c1># Do not list HiddenCreator even though it is a &#39;manual creator&#39;</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>creator</span><span class=p>,</span> <span class=n>HiddenCreator</span><span class=p>)</span>
        <span class=p>}</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_creators_by_name</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_creators_by_name</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>use_legacy_creators</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_collect_legacy_creators</span><span class=p>()</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_collect_creators</span><span class=p>()</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_creators_by_name</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_shared_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Receive shared data across plugins and placeholders.</span>

<span class=sd>        This can be used to scroll scene only once to look for placeholder</span>
<span class=sd>        items if the storing is unified but each placeholder plugin would have</span>
<span class=sd>        to call it again.</span>

<span class=sd>        Args:</span>
<span class=sd>            key (str): Key under which are shared data stored.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Union[None, Any]: None if key was not set.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_shared_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_shared_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Store share data across plugins and placeholders.</span>

<span class=sd>        Store data that can be afterwards accessed from any future call. It</span>
<span class=sd>        is good practice to check if the same value is not already stored under</span>
<span class=sd>        different key or if the key is not already used for something else.</span>

<span class=sd>        Key should be self-explanatory to content.</span>
<span class=sd>        - wrong: &#39;folder&#39;</span>
<span class=sd>        - good: &#39;folder_name&#39;</span>

<span class=sd>        Args:</span>
<span class=sd>            key (str): Key under which is key stored.</span>
<span class=sd>            value (Any): Value that should be stored under the key.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_shared_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>

    <span class=k>def</span><span class=w> </span><span class=nf>clear_shared_data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Clear shared data.</span>

<span class=sd>        Method only clear shared data to default state.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_shared_data</span> <span class=o>=</span> <span class=p>{}</span>

    <span class=k>def</span><span class=w> </span><span class=nf>clear_shared_populate_data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Receive shared data across plugins and placeholders.</span>

<span class=sd>        These data are cleared after each loop of populating of template.</span>

<span class=sd>        This can be used to scroll scene only once to look for placeholder</span>
<span class=sd>        items if the storing is unified but each placeholder plugin would have</span>
<span class=sd>        to call it again.</span>

<span class=sd>        Args:</span>
<span class=sd>            key (str): Key under which are shared data stored.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Union[None, Any]: None if key was not set.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_shared_populate_data</span> <span class=o>=</span> <span class=p>{}</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_shared_populate_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Store share populate data across plugins and placeholders.</span>

<span class=sd>        These data are cleared after each loop of populating of template.</span>

<span class=sd>        Store data that can be afterwards accessed from any future call. It</span>
<span class=sd>        is good practice to check if the same value is not already stored under</span>
<span class=sd>        different key or if the key is not already used for something else.</span>

<span class=sd>        Key should be self-explanatory to content.</span>
<span class=sd>        - wrong: &#39;folder&#39;</span>
<span class=sd>        - good: &#39;folder_path&#39;</span>

<span class=sd>        Args:</span>
<span class=sd>            key (str): Key under which is key stored.</span>
<span class=sd>            value (Any): Value that should be stored under the key.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_shared_populate_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_shared_populate_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Store share populate data across plugins and placeholders.</span>

<span class=sd>        These data are cleared after each loop of populating of template.</span>

<span class=sd>        Store data that can be afterwards accessed from any future call. It</span>
<span class=sd>        is good practice to check if the same value is not already stored under</span>
<span class=sd>        different key or if the key is not already used for something else.</span>

<span class=sd>        Key should be self-explanatory to content.</span>
<span class=sd>        - wrong: &#39;folder&#39;</span>
<span class=sd>        - good: &#39;folder_path&#39;</span>

<span class=sd>        Args:</span>
<span class=sd>            key (str): Key under which is key stored.</span>
<span class=sd>            value (Any): Value that should be stored under the key.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_shared_populate_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>placeholder_plugins</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Access to initialized placeholder plugins.</span>

<span class=sd>        Returns:</span>
<span class=sd>            List[PlaceholderPlugin]: Initialized plugins available for host.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_placeholder_plugins</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>placeholder_plugins</span> <span class=o>=</span> <span class=p>{}</span>
            <span class=k>for</span> <span class=bp>cls</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_placeholder_plugin_classes</span><span class=p>():</span>
                <span class=k>try</span><span class=p>:</span>
                    <span class=n>plugin</span> <span class=o>=</span> <span class=bp>cls</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
                    <span class=n>placeholder_plugins</span><span class=p>[</span><span class=n>plugin</span><span class=o>.</span><span class=n>identifier</span><span class=p>]</span> <span class=o>=</span> <span class=n>plugin</span>

                <span class=k>except</span> <span class=ne>Exception</span><span class=p>:</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
                        <span class=s2>&quot;Failed to initialize placeholder plugin </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                            <span class=bp>cls</span><span class=o>.</span><span class=vm>__name__</span>
                        <span class=p>),</span>
                        <span class=n>exc_info</span><span class=o>=</span><span class=kc>True</span>
                    <span class=p>)</span>

            <span class=bp>self</span><span class=o>.</span><span class=n>_placeholder_plugins</span> <span class=o>=</span> <span class=n>placeholder_plugins</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_placeholder_plugins</span>

    <span class=k>def</span><span class=w> </span><span class=nf>create_placeholder</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>plugin_identifier</span><span class=p>,</span> <span class=n>placeholder_data</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Create new placeholder using plugin identifier and data.</span>

<span class=sd>        Args:</span>
<span class=sd>            plugin_identifier (str): Identifier of plugin. That&#39;s how builder</span>
<span class=sd>                know which plugin should be used.</span>
<span class=sd>            placeholder_data (Dict[str, Any]): Placeholder item data. They</span>
<span class=sd>                should match options required by the plugin.</span>

<span class=sd>        Returns:</span>
<span class=sd>            PlaceholderItem: Created placeholder item.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>plugin</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>placeholder_plugins</span><span class=p>[</span><span class=n>plugin_identifier</span><span class=p>]</span>
        <span class=k>return</span> <span class=n>plugin</span><span class=o>.</span><span class=n>create_placeholder</span><span class=p>(</span><span class=n>placeholder_data</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_placeholders</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Collect placeholder items from scene.</span>

<span class=sd>        Each placeholder plugin can collect it&#39;s placeholders and return them.</span>
<span class=sd>        This method does not use cached values but always go through the scene.</span>

<span class=sd>        Returns:</span>
<span class=sd>            List[PlaceholderItem]: Sorted placeholder items.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>placeholders</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>for</span> <span class=n>placeholder_plugin</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>placeholder_plugins</span><span class=o>.</span><span class=n>values</span><span class=p>():</span>
            <span class=n>result</span> <span class=o>=</span> <span class=n>placeholder_plugin</span><span class=o>.</span><span class=n>collect_placeholders</span><span class=p>()</span>
            <span class=k>if</span> <span class=n>result</span><span class=p>:</span>
                <span class=n>placeholders</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>result</span><span class=p>)</span>

        <span class=k>return</span> <span class=nb>list</span><span class=p>(</span><span class=nb>sorted</span><span class=p>(</span>
            <span class=n>placeholders</span><span class=p>,</span>
            <span class=n>key</span><span class=o>=</span><span class=k>lambda</span> <span class=n>placeholder</span><span class=p>:</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>order</span>
        <span class=p>))</span>

    <span class=k>def</span><span class=w> </span><span class=nf>build_template</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>template_path</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>level_limit</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>keep_placeholders</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>create_first_version</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>workfile_creation_enabled</span><span class=o>=</span><span class=kc>False</span>
    <span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Main callback for building workfile from template path.</span>

<span class=sd>        Todo:</span>
<span class=sd>            Handle report of populated placeholders from</span>
<span class=sd>                &#39;populate_scene_placeholders&#39; to be shown to a user.</span>

<span class=sd>        Args:</span>
<span class=sd>            template_path (str): Path to a template file with placeholders.</span>
<span class=sd>                Template from settings &#39;get_template_preset&#39; used when not</span>
<span class=sd>                passed.</span>
<span class=sd>            level_limit (int): Limit of populate loops. Related to</span>
<span class=sd>                &#39;populate_scene_placeholders&#39; method.</span>
<span class=sd>            keep_placeholders (bool): Add flag to placeholder data for</span>
<span class=sd>                hosts to decide if they want to remove</span>
<span class=sd>                placeholder after it is used.</span>
<span class=sd>            create_first_version (bool): Create first version of a workfile.</span>
<span class=sd>                 When set to True, this option initiates the saving of the</span>
<span class=sd>                 workfile for an initial version. It will skip saving if</span>
<span class=sd>                 a version already exists.</span>
<span class=sd>            workfile_creation_enabled (bool): Whether the call is part of</span>
<span class=sd>                creating a new workfile.</span>
<span class=sd>                When True, we only build if the current file is not</span>
<span class=sd>                an existing saved workfile but a &quot;new&quot; file. Basically when</span>
<span class=sd>                enabled we assume the user tries to load it only into a</span>
<span class=sd>                &quot;New File&quot; (unsaved empty workfile).</span>
<span class=sd>                When False, the default value, we assume we explicitly want to</span>
<span class=sd>                build the template in our current scene regardless of current</span>
<span class=sd>                scene state.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=c1># More accurate variable name</span>
        <span class=c1># - logic related to workfile creation should be moved out in future</span>
        <span class=n>explicit_build_requested</span> <span class=o>=</span> <span class=ow>not</span> <span class=n>workfile_creation_enabled</span>

        <span class=c1># Get default values if not provided</span>
        <span class=k>if</span> <span class=p>(</span>
            <span class=n>template_path</span> <span class=ow>is</span> <span class=kc>None</span>
            <span class=ow>or</span> <span class=n>keep_placeholders</span> <span class=ow>is</span> <span class=kc>None</span>
            <span class=ow>or</span> <span class=n>create_first_version</span> <span class=ow>is</span> <span class=kc>None</span>
        <span class=p>):</span>
            <span class=n>preset</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_template_preset</span><span class=p>()</span>
            <span class=n>template_path</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=n>template_path</span> <span class=ow>or</span> <span class=n>preset</span><span class=p>[</span><span class=s2>&quot;path&quot;</span><span class=p>]</span>
            <span class=k>if</span> <span class=n>keep_placeholders</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
                <span class=n>keep_placeholders</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=n>preset</span><span class=p>[</span><span class=s2>&quot;keep_placeholder&quot;</span><span class=p>]</span>
            <span class=k>if</span> <span class=n>create_first_version</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
                <span class=n>create_first_version</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=n>preset</span><span class=p>[</span><span class=s2>&quot;create_first_version&quot;</span><span class=p>]</span>

        <span class=c1># Build the template if we are explicitly requesting it or if it&#39;s</span>
        <span class=c1># an unsaved &quot;new file&quot;.</span>
        <span class=n>is_new_file</span> <span class=o>=</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=o>.</span><span class=n>get_current_workfile</span><span class=p>()</span>
        <span class=k>if</span> <span class=n>is_new_file</span> <span class=ow>or</span> <span class=n>explicit_build_requested</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Building the workfile template: </span><span class=si>{</span><span class=n>template_path</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>import_template</span><span class=p>(</span><span class=n>template_path</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>populate_scene_placeholders</span><span class=p>(</span>
                <span class=n>level_limit</span><span class=p>,</span> <span class=n>keep_placeholders</span><span class=p>)</span>

        <span class=c1># Do not consider saving a first workfile version, if this is not set</span>
        <span class=c1># to be a &quot;workfile creation&quot; or `create_first_version` is disabled.</span>
        <span class=k>if</span> <span class=n>explicit_build_requested</span> <span class=ow>or</span> <span class=ow>not</span> <span class=n>create_first_version</span><span class=p>:</span>
            <span class=k>return</span>

        <span class=c1># If there is no existing workfile, save the first version</span>
        <span class=n>workfile_path</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_workfile_path</span><span class=p>()</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>workfile_path</span><span class=p>):</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Saving first workfile: </span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span> <span class=n>workfile_path</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>save_workfile</span><span class=p>(</span><span class=n>workfile_path</span><span class=p>)</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span>
                <span class=s2>&quot;A workfile already exists. Skipping save of workfile as &quot;</span>
                <span class=s2>&quot;initial version.&quot;</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>rebuild_template</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Go through existing placeholders in scene and update them.</span>

<span class=sd>        This could not make sense for all plugin types so this is optional</span>
<span class=sd>        logic for plugins.</span>

<span class=sd>        Note:</span>
<span class=sd>            Logic is not importing the template again but using placeholders</span>
<span class=sd>                that were already available. We should maybe change the method</span>
<span class=sd>                name.</span>

<span class=sd>        Question:</span>
<span class=sd>            Should this also handle subloops as it is possible that another</span>
<span class=sd>                template is loaded during processing?</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>placeholder_plugins</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;There are no placeholder plugins available.&quot;</span><span class=p>)</span>
            <span class=k>return</span>

        <span class=n>placeholders</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_placeholders</span><span class=p>()</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>placeholders</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;No placeholders were found.&quot;</span><span class=p>)</span>
            <span class=k>return</span>

        <span class=k>for</span> <span class=n>placeholder</span> <span class=ow>in</span> <span class=n>placeholders</span><span class=p>:</span>
            <span class=n>plugin</span> <span class=o>=</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>plugin</span>
            <span class=n>plugin</span><span class=o>.</span><span class=n>repopulate_placeholder</span><span class=p>(</span><span class=n>placeholder</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>clear_shared_populate_data</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>open_template</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Open template file with registered host.&quot;&quot;&quot;</span>
        <span class=n>template_preset</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_template_preset</span><span class=p>()</span>
        <span class=n>template_path</span> <span class=o>=</span> <span class=n>template_preset</span><span class=p>[</span><span class=s2>&quot;path&quot;</span><span class=p>]</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=o>.</span><span class=n>open_file</span><span class=p>(</span><span class=n>template_path</span><span class=p>)</span>

    <span class=nd>@abstractmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>import_template</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>template_path</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Import template in current host.</span>

<span class=sd>        Should load the content of template into scene so</span>
<span class=sd>        &#39;populate_scene_placeholders&#39; can be started.</span>

<span class=sd>        Args:</span>
<span class=sd>            template_path (str): Fullpath for current task and</span>
<span class=sd>                host&#39;s template file.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>pass</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_workfile_path</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Return last known workfile path or the first workfile path create.</span>

<span class=sd>        Return:</span>
<span class=sd>            str: Last workfile path, or first version to create if none exist.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=c1># AYON_LAST_WORKFILE will be set to the last existing workfile OR</span>
        <span class=c1># if none exist it will be set to the first version.</span>
        <span class=n>last_workfile_path</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AYON_LAST_WORKFILE&quot;</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;__ last_workfile_path: </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>last_workfile_path</span><span class=p>))</span>
        <span class=k>return</span> <span class=n>last_workfile_path</span>

    <span class=k>def</span><span class=w> </span><span class=nf>save_workfile</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>workfile_path</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Save workfile in current host.&quot;&quot;&quot;</span>
        <span class=c1># Save current scene, continue to open file</span>
        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=p>,</span> <span class=n>IWorkfileHost</span><span class=p>):</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=o>.</span><span class=n>save_workfile</span><span class=p>(</span><span class=n>workfile_path</span><span class=p>)</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=o>.</span><span class=n>save_file</span><span class=p>(</span><span class=n>workfile_path</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_prepare_placeholders</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>placeholders</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Run preparation part for placeholders on plugins.</span>

<span class=sd>        Args:</span>
<span class=sd>            placeholders (List[PlaceholderItem]): Placeholder items that will</span>
<span class=sd>                be processed.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=c1># Prepare placeholder items by plugin</span>
        <span class=n>plugins_by_identifier</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=n>placeholders_by_plugin_id</span> <span class=o>=</span> <span class=n>collections</span><span class=o>.</span><span class=n>defaultdict</span><span class=p>(</span><span class=nb>list</span><span class=p>)</span>
        <span class=k>for</span> <span class=n>placeholder</span> <span class=ow>in</span> <span class=n>placeholders</span><span class=p>:</span>
            <span class=n>plugin</span> <span class=o>=</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>plugin</span>
            <span class=n>identifier</span> <span class=o>=</span> <span class=n>plugin</span><span class=o>.</span><span class=n>identifier</span>
            <span class=n>plugins_by_identifier</span><span class=p>[</span><span class=n>identifier</span><span class=p>]</span> <span class=o>=</span> <span class=n>plugin</span>
            <span class=n>placeholders_by_plugin_id</span><span class=p>[</span><span class=n>identifier</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>placeholder</span><span class=p>)</span>

        <span class=c1># Plugin should prepare data for passed placeholders</span>
        <span class=k>for</span> <span class=n>identifier</span><span class=p>,</span> <span class=n>placeholders</span> <span class=ow>in</span> <span class=n>placeholders_by_plugin_id</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=n>plugin</span> <span class=o>=</span> <span class=n>plugins_by_identifier</span><span class=p>[</span><span class=n>identifier</span><span class=p>]</span>
            <span class=n>plugin</span><span class=o>.</span><span class=n>prepare_placeholders</span><span class=p>(</span><span class=n>placeholders</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>populate_scene_placeholders</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span> <span class=n>level_limit</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>keep_placeholders</span><span class=o>=</span><span class=kc>None</span>
    <span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Find placeholders in scene using plugins and process them.</span>

<span class=sd>        This should happen after &#39;import_template&#39;.</span>

<span class=sd>        Collect available placeholders from scene. All of them are processed</span>
<span class=sd>        after that shared data are cleared. Placeholder items are collected</span>
<span class=sd>        again and if there are any new the loop happens again. This is possible</span>
<span class=sd>        to change with defying &#39;level_limit&#39;.</span>

<span class=sd>        Placeholders are marked as processed so they&#39;re not re-processed. To</span>
<span class=sd>        identify which placeholders were already processed is used</span>
<span class=sd>        placeholder&#39;s &#39;scene_identifier&#39;.</span>

<span class=sd>        Args:</span>
<span class=sd>            level_limit (int): Level of loops that can happen. Default is 1000.</span>
<span class=sd>            keep_placeholders (bool): Add flag to placeholder data for</span>
<span class=sd>                hosts to decide if they want to remove</span>
<span class=sd>                placeholder after it is used.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>placeholder_plugins</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s2>&quot;There are no placeholder plugins available.&quot;</span><span class=p>)</span>
            <span class=k>return</span>

        <span class=n>placeholders</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_placeholders</span><span class=p>()</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>placeholders</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s2>&quot;No placeholders were found.&quot;</span><span class=p>)</span>
            <span class=k>return</span>

        <span class=c1># Avoid infinite loop</span>
        <span class=c1># - 1000 iterations of placeholders processing must be enough</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>level_limit</span><span class=p>:</span>
            <span class=n>level_limit</span> <span class=o>=</span> <span class=mi>1000</span>

        <span class=n>placeholder_by_scene_id</span> <span class=o>=</span> <span class=p>{</span>
            <span class=n>placeholder</span><span class=o>.</span><span class=n>scene_identifier</span><span class=p>:</span> <span class=n>placeholder</span>
            <span class=k>for</span> <span class=n>placeholder</span> <span class=ow>in</span> <span class=n>placeholders</span>
        <span class=p>}</span>
        <span class=n>all_processed</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>placeholders</span><span class=p>)</span> <span class=o>==</span> <span class=mi>0</span>
        <span class=c1># Counter is checked at the end of a loop so the loop happens at least</span>
        <span class=c1>#   once.</span>
        <span class=n>iter_counter</span> <span class=o>=</span> <span class=mi>0</span>
        <span class=k>while</span> <span class=ow>not</span> <span class=n>all_processed</span><span class=p>:</span>
            <span class=n>filtered_placeholders</span> <span class=o>=</span> <span class=p>[]</span>
            <span class=k>for</span> <span class=n>placeholder</span> <span class=ow>in</span> <span class=n>placeholders</span><span class=p>:</span>
                <span class=k>if</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>finished</span><span class=p>:</span>
                    <span class=k>continue</span>

                <span class=k>if</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>in_progress</span><span class=p>:</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>((</span>
                        <span class=s2>&quot;Placeholder that should be processed&quot;</span>
                        <span class=s2>&quot; is already in progress.&quot;</span>
                    <span class=p>))</span>
                    <span class=k>continue</span>

                <span class=c1># add flag for keeping placeholders in scene</span>
                <span class=c1># after they are processed</span>
                <span class=n>placeholder</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;keep_placeholder&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>keep_placeholders</span>

                <span class=n>filtered_placeholders</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>placeholder</span><span class=p>)</span>

            <span class=bp>self</span><span class=o>.</span><span class=n>_prepare_placeholders</span><span class=p>(</span><span class=n>filtered_placeholders</span><span class=p>)</span>

            <span class=k>for</span> <span class=n>placeholder</span> <span class=ow>in</span> <span class=n>filtered_placeholders</span><span class=p>:</span>
                <span class=n>placeholder</span><span class=o>.</span><span class=n>set_in_progress</span><span class=p>()</span>
                <span class=n>placeholder_plugin</span> <span class=o>=</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>plugin</span>
                <span class=k>try</span><span class=p>:</span>
                    <span class=n>placeholder_plugin</span><span class=o>.</span><span class=n>populate_placeholder</span><span class=p>(</span><span class=n>placeholder</span><span class=p>)</span>

                <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>exc</span><span class=p>:</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
                        <span class=p>(</span>
                            <span class=s2>&quot;Failed to process placeholder </span><span class=si>{}</span><span class=s2> with plugin </span><span class=si>{}</span><span class=s2>&quot;</span>
                        <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                            <span class=n>placeholder</span><span class=o>.</span><span class=n>scene_identifier</span><span class=p>,</span>
                            <span class=n>placeholder_plugin</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span>
                        <span class=p>),</span>
                        <span class=n>exc_info</span><span class=o>=</span><span class=kc>True</span>
                    <span class=p>)</span>
                    <span class=n>placeholder</span><span class=o>.</span><span class=n>set_failed</span><span class=p>(</span><span class=n>exc</span><span class=p>)</span>

                <span class=n>placeholder</span><span class=o>.</span><span class=n>set_finished</span><span class=p>()</span>

            <span class=c1># Trigger on_depth_processed event</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>emit_event</span><span class=p>(</span>
                <span class=n>topic</span><span class=o>=</span><span class=s2>&quot;template.depth_processed&quot;</span><span class=p>,</span>
                <span class=n>data</span><span class=o>=</span><span class=p>{</span>
                    <span class=s2>&quot;depth&quot;</span><span class=p>:</span> <span class=n>iter_counter</span><span class=p>,</span>
                    <span class=s2>&quot;placeholders_by_scene_id&quot;</span><span class=p>:</span> <span class=n>placeholder_by_scene_id</span>
                <span class=p>},</span>
                <span class=n>source</span><span class=o>=</span><span class=s2>&quot;builder&quot;</span>
            <span class=p>)</span>

            <span class=c1># Clear shared data before getting new placeholders</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>clear_shared_populate_data</span><span class=p>()</span>

            <span class=n>iter_counter</span> <span class=o>+=</span> <span class=mi>1</span>
            <span class=k>if</span> <span class=n>iter_counter</span> <span class=o>&gt;=</span> <span class=n>level_limit</span><span class=p>:</span>
                <span class=k>break</span>

            <span class=n>all_processed</span> <span class=o>=</span> <span class=kc>True</span>
            <span class=n>collected_placeholders</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_placeholders</span><span class=p>()</span>
            <span class=k>for</span> <span class=n>placeholder</span> <span class=ow>in</span> <span class=n>collected_placeholders</span><span class=p>:</span>
                <span class=n>identifier</span> <span class=o>=</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>scene_identifier</span>
                <span class=k>if</span> <span class=n>identifier</span> <span class=ow>in</span> <span class=n>placeholder_by_scene_id</span><span class=p>:</span>
                    <span class=k>continue</span>

                <span class=n>all_processed</span> <span class=o>=</span> <span class=kc>False</span>
                <span class=n>placeholder_by_scene_id</span><span class=p>[</span><span class=n>identifier</span><span class=p>]</span> <span class=o>=</span> <span class=n>placeholder</span>
                <span class=n>placeholders</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>placeholder</span><span class=p>)</span>

        <span class=c1># Trigger on_finished event</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>emit_event</span><span class=p>(</span>
            <span class=n>topic</span><span class=o>=</span><span class=s2>&quot;template.finished&quot;</span><span class=p>,</span>
            <span class=n>data</span><span class=o>=</span><span class=p>{</span>
                <span class=s2>&quot;depth&quot;</span><span class=p>:</span> <span class=n>iter_counter</span><span class=p>,</span>
                <span class=s2>&quot;placeholders_by_scene_id&quot;</span><span class=p>:</span> <span class=n>placeholder_by_scene_id</span><span class=p>,</span>
            <span class=p>},</span>
            <span class=n>source</span><span class=o>=</span><span class=s2>&quot;builder&quot;</span>
        <span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>refresh</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_get_build_profiles</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get build profiles for workfile build template path.</span>

<span class=sd>        Returns:</span>
<span class=sd>            List[Dict[str, Any]]: Profiles for template path resolving.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>project_settings</span>
            <span class=p>[</span><span class=bp>self</span><span class=o>.</span><span class=n>host_name</span><span class=p>]</span>
            <span class=p>[</span><span class=s2>&quot;templated_workfile_build&quot;</span><span class=p>]</span>
            <span class=p>[</span><span class=s2>&quot;profiles&quot;</span><span class=p>]</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_template_preset</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Unified way how template preset is received using settings.</span>

<span class=sd>        Method is dependent on &#39;_get_build_profiles&#39; which should return filter</span>
<span class=sd>        profiles to resolve path to a template. Default implementation looks</span>
<span class=sd>        into host settings:</span>
<span class=sd>        - &#39;project_settings/{host name}/templated_workfile_build/profiles&#39;</span>

<span class=sd>        Returns:</span>
<span class=sd>            dict: Dictionary with `path`, `keep_placeholder` and</span>
<span class=sd>                `create_first_version` settings from the template preset</span>
<span class=sd>                for current context.</span>

<span class=sd>        Raises:</span>
<span class=sd>            TemplateProfileNotFound: When profiles are not filled.</span>
<span class=sd>            TemplateLoadFailed: Profile was found but path is not set.</span>
<span class=sd>            TemplateNotFound: Path was set but file does not exist.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>host_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>host_name</span>
        <span class=n>project_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>project_name</span>
        <span class=n>task_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>current_task_name</span>
        <span class=n>task_type</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>current_task_type</span>

        <span class=n>build_profiles</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_build_profiles</span><span class=p>()</span>
        <span class=n>profile</span> <span class=o>=</span> <span class=n>filter_profiles</span><span class=p>(</span>
            <span class=n>build_profiles</span><span class=p>,</span>
            <span class=p>{</span>
                <span class=s2>&quot;task_types&quot;</span><span class=p>:</span> <span class=n>task_type</span><span class=p>,</span>
                <span class=s2>&quot;task_names&quot;</span><span class=p>:</span> <span class=n>task_name</span>
            <span class=p>}</span>
        <span class=p>)</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>profile</span><span class=p>:</span>
            <span class=k>raise</span> <span class=n>TemplateProfileNotFound</span><span class=p>((</span>
                <span class=s2>&quot;No matching profile found for task &#39;</span><span class=si>{}</span><span class=s2>&#39; of type &#39;</span><span class=si>{}</span><span class=s2>&#39; &quot;</span>
                <span class=s2>&quot;with host &#39;</span><span class=si>{}</span><span class=s2>&#39;&quot;</span>
            <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>task_name</span><span class=p>,</span> <span class=n>task_type</span><span class=p>,</span> <span class=n>host_name</span><span class=p>))</span>

        <span class=n>path</span> <span class=o>=</span> <span class=n>profile</span><span class=p>[</span><span class=s2>&quot;path&quot;</span><span class=p>]</span>

        <span class=c1># switch to remove placeholders after they are used</span>
        <span class=n>keep_placeholder</span> <span class=o>=</span> <span class=n>profile</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;keep_placeholder&quot;</span><span class=p>)</span>
        <span class=n>create_first_version</span> <span class=o>=</span> <span class=n>profile</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;create_first_version&quot;</span><span class=p>)</span>

        <span class=c1># backward compatibility, since default is True</span>
        <span class=k>if</span> <span class=n>keep_placeholder</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>keep_placeholder</span> <span class=o>=</span> <span class=kc>True</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>path</span><span class=p>:</span>
            <span class=k>raise</span> <span class=n>TemplateLoadFailed</span><span class=p>((</span>
                <span class=s2>&quot;Template path is not set.</span><span class=se>\n</span><span class=s2>&quot;</span>
                <span class=s2>&quot;Path need to be set in </span><span class=si>{}</span><span class=se>\\</span><span class=s2>Template Workfile Build &quot;</span>
                <span class=s2>&quot;Settings</span><span class=se>\\</span><span class=s2>Profiles&quot;</span>
            <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>host_name</span><span class=o>.</span><span class=n>title</span><span class=p>()))</span>

        <span class=c1># Try to fill path with environments and anatomy roots</span>
        <span class=n>anatomy</span> <span class=o>=</span> <span class=n>Anatomy</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>
        <span class=n>fill_data</span> <span class=o>=</span> <span class=p>{</span>
            <span class=n>key</span><span class=p>:</span> <span class=n>value</span>
            <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>items</span><span class=p>()</span>
        <span class=p>}</span>

        <span class=n>fill_data</span><span class=p>[</span><span class=s2>&quot;root&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>anatomy</span><span class=o>.</span><span class=n>roots</span>
        <span class=n>fill_data</span><span class=p>[</span><span class=s2>&quot;project&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span>
            <span class=s2>&quot;name&quot;</span><span class=p>:</span> <span class=n>project_name</span><span class=p>,</span>
            <span class=s2>&quot;code&quot;</span><span class=p>:</span> <span class=n>anatomy</span><span class=o>.</span><span class=n>project_code</span><span class=p>,</span>
        <span class=p>}</span>

        <span class=n>path</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>resolve_template_path</span><span class=p>(</span><span class=n>path</span><span class=p>,</span> <span class=n>fill_data</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>path</span> <span class=ow>and</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>path</span><span class=p>):</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Found template at: &#39;</span><span class=si>{}</span><span class=s2>&#39;&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>path</span><span class=p>))</span>
            <span class=k>return</span> <span class=p>{</span>
                <span class=s2>&quot;path&quot;</span><span class=p>:</span> <span class=n>path</span><span class=p>,</span>
                <span class=s2>&quot;keep_placeholder&quot;</span><span class=p>:</span> <span class=n>keep_placeholder</span><span class=p>,</span>
                <span class=s2>&quot;create_first_version&quot;</span><span class=p>:</span> <span class=n>create_first_version</span>
            <span class=p>}</span>

        <span class=n>solved_path</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
            <span class=k>try</span><span class=p>:</span>
                <span class=n>solved_path</span> <span class=o>=</span> <span class=n>anatomy</span><span class=o>.</span><span class=n>path_remapper</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>
            <span class=k>except</span> <span class=ne>KeyError</span> <span class=k>as</span> <span class=n>missing_key</span><span class=p>:</span>
                <span class=k>raise</span> <span class=ne>KeyError</span><span class=p>(</span>
                    <span class=s2>&quot;Could not solve key &#39;</span><span class=si>{}</span><span class=s2>&#39; in template path &#39;</span><span class=si>{}</span><span class=s2>&#39;&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                        <span class=n>missing_key</span><span class=p>,</span> <span class=n>path</span><span class=p>))</span>

            <span class=k>if</span> <span class=n>solved_path</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
                <span class=n>solved_path</span> <span class=o>=</span> <span class=n>path</span>
            <span class=k>if</span> <span class=n>solved_path</span> <span class=o>==</span> <span class=n>path</span><span class=p>:</span>
                <span class=k>break</span>
            <span class=n>path</span> <span class=o>=</span> <span class=n>solved_path</span>

        <span class=n>solved_path</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>normpath</span><span class=p>(</span><span class=n>solved_path</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>solved_path</span><span class=p>):</span>
            <span class=k>raise</span> <span class=n>TemplateNotFound</span><span class=p>(</span>
                <span class=s2>&quot;Template found in AYON settings for task &#39;</span><span class=si>{}</span><span class=s2>&#39; with host &quot;</span>
                <span class=s2>&quot;&#39;</span><span class=si>{}</span><span class=s2>&#39; does not exists. (Not found : </span><span class=si>{}</span><span class=s2>)&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                    <span class=n>task_name</span><span class=p>,</span> <span class=n>host_name</span><span class=p>,</span> <span class=n>solved_path</span><span class=p>))</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Found template at: &#39;</span><span class=si>{}</span><span class=s2>&#39;&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>solved_path</span><span class=p>))</span>

        <span class=k>return</span> <span class=p>{</span>
            <span class=s2>&quot;path&quot;</span><span class=p>:</span> <span class=n>solved_path</span><span class=p>,</span>
            <span class=s2>&quot;keep_placeholder&quot;</span><span class=p>:</span> <span class=n>keep_placeholder</span><span class=p>,</span>
            <span class=s2>&quot;create_first_version&quot;</span><span class=p>:</span> <span class=n>create_first_version</span>
        <span class=p>}</span>

    <span class=k>def</span><span class=w> </span><span class=nf>resolve_template_path</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>path</span><span class=p>,</span> <span class=n>fill_data</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Resolve the template path.</span>

<span class=sd>        By default, this does nothing except returning the path directly.</span>

<span class=sd>        This can be overridden in host integrations to perform additional</span>
<span class=sd>        resolving over the template. Like, `hou.text.expandString` in Houdini.</span>

<span class=sd>        Arguments:</span>
<span class=sd>            path (str): The input path.</span>
<span class=sd>            fill_data (dict[str, str]): Data to use for template formatting.</span>

<span class=sd>        Returns:</span>
<span class=sd>            str: The resolved path.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>result</span> <span class=o>=</span> <span class=n>StringTemplate</span><span class=o>.</span><span class=n>format_template</span><span class=p>(</span><span class=n>path</span><span class=p>,</span> <span class=n>fill_data</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>result</span><span class=o>.</span><span class=n>solved</span><span class=p>:</span>
            <span class=n>path</span> <span class=o>=</span> <span class=n>result</span><span class=o>.</span><span class=n>normalized</span><span class=p>()</span>
        <span class=k>return</span> <span class=n>path</span>

    <span class=k>def</span><span class=w> </span><span class=nf>emit_event</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>topic</span><span class=p>,</span> <span class=n>data</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>source</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Event</span><span class=p>:</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_event_system</span><span class=o>.</span><span class=n>emit</span><span class=p>(</span><span class=n>topic</span><span class=p>,</span> <span class=n>data</span><span class=p>,</span> <span class=n>source</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>add_event_callback</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>topic</span><span class=p>,</span> <span class=n>callback</span><span class=p>,</span> <span class=n>order</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_event_system</span><span class=o>.</span><span class=n>add_callback</span><span class=p>(</span><span class=n>topic</span><span class=p>,</span> <span class=n>callback</span><span class=p>,</span> <span class=n>order</span><span class=o>=</span><span class=n>order</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>add_on_finished_callback</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span> <span class=n>callback</span><span class=p>,</span> <span class=n>order</span><span class=o>=</span><span class=kc>None</span>
    <span class=p>)</span> <span class=o>-&gt;</span> <span class=n>EventCallback</span><span class=p>:</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>add_event_callback</span><span class=p>(</span>
            <span class=n>topic</span><span class=o>=</span><span class=s2>&quot;template.finished&quot;</span><span class=p>,</span>
            <span class=n>callback</span><span class=o>=</span><span class=n>callback</span><span class=p>,</span>
            <span class=n>order</span><span class=o>=</span><span class=n>order</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>add_on_depth_processed_callback</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span> <span class=n>callback</span><span class=p>,</span> <span class=n>order</span><span class=o>=</span><span class=kc>None</span>
    <span class=p>)</span> <span class=o>-&gt;</span> <span class=n>EventCallback</span><span class=p>:</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>add_event_callback</span><span class=p>(</span>
            <span class=n>topic</span><span class=o>=</span><span class=s2>&quot;template.depth_processed&quot;</span><span class=p>,</span>
            <span class=n>callback</span><span class=o>=</span><span class=n>callback</span><span class=p>,</span>
            <span class=n>order</span><span class=o>=</span><span class=n>order</span>
        <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.host class="doc doc-heading"> <code class="highlight language-python"><span class=n>host</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Access to host implementation.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Union[HostBase, ModuleType]: Implementation of host.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.host_name class="doc doc-heading"> <code class="highlight language-python"><span class=n>host_name</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Name of 'host' implementation.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>Host's name.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.log class="doc doc-heading"> <code class="highlight language-python"><span class=n>log</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Dynamically created logger for the plugin.</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.placeholder_plugins class="doc doc-heading"> <code class="highlight language-python"><span class=n>placeholder_plugins</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Access to initialized placeholder plugins.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>List[PlaceholderPlugin]: Initialized plugins available for host.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder._get_build_profiles class="doc doc-heading"> <code class="highlight language-python"><span class=n>_get_build_profiles</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Get build profiles for workfile build template path.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>List[Dict[str, Any]]: Profiles for template path resolving.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>792</span>
<span class=normal>793</span>
<span class=normal>794</span>
<span class=normal>795</span>
<span class=normal>796</span>
<span class=normal>797</span>
<span class=normal>798</span>
<span class=normal>799</span>
<span class=normal>800</span>
<span class=normal>801</span>
<span class=normal>802</span>
<span class=normal>803</span>
<span class=normal>804</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>_get_build_profiles</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get build profiles for workfile build template path.</span>

<span class=sd>    Returns:</span>
<span class=sd>        List[Dict[str, Any]]: Profiles for template path resolving.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=p>(</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>project_settings</span>
        <span class=p>[</span><span class=bp>self</span><span class=o>.</span><span class=n>host_name</span><span class=p>]</span>
        <span class=p>[</span><span class=s2>&quot;templated_workfile_build&quot;</span><span class=p>]</span>
        <span class=p>[</span><span class=s2>&quot;profiles&quot;</span><span class=p>]</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder._prepare_placeholders class="doc doc-heading"> <code class="highlight language-python"><span class=n>_prepare_placeholders</span><span class=p>(</span><span class=n>placeholders</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Run preparation part for placeholders on plugins.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>placeholders</code> </td> <td> <code><span title=List>List</span>[<a class="autorefs autorefs-internal" title="PlaceholderItem (client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem)" href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem>PlaceholderItem</a>]</code> </td> <td> <div class=doc-md-description> <p>Placeholder items that will be processed.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>644</span>
<span class=normal>645</span>
<span class=normal>646</span>
<span class=normal>647</span>
<span class=normal>648</span>
<span class=normal>649</span>
<span class=normal>650</span>
<span class=normal>651</span>
<span class=normal>652</span>
<span class=normal>653</span>
<span class=normal>654</span>
<span class=normal>655</span>
<span class=normal>656</span>
<span class=normal>657</span>
<span class=normal>658</span>
<span class=normal>659</span>
<span class=normal>660</span>
<span class=normal>661</span>
<span class=normal>662</span>
<span class=normal>663</span>
<span class=normal>664</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>_prepare_placeholders</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>placeholders</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Run preparation part for placeholders on plugins.</span>

<span class=sd>    Args:</span>
<span class=sd>        placeholders (List[PlaceholderItem]): Placeholder items that will</span>
<span class=sd>            be processed.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=c1># Prepare placeholder items by plugin</span>
    <span class=n>plugins_by_identifier</span> <span class=o>=</span> <span class=p>{}</span>
    <span class=n>placeholders_by_plugin_id</span> <span class=o>=</span> <span class=n>collections</span><span class=o>.</span><span class=n>defaultdict</span><span class=p>(</span><span class=nb>list</span><span class=p>)</span>
    <span class=k>for</span> <span class=n>placeholder</span> <span class=ow>in</span> <span class=n>placeholders</span><span class=p>:</span>
        <span class=n>plugin</span> <span class=o>=</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>plugin</span>
        <span class=n>identifier</span> <span class=o>=</span> <span class=n>plugin</span><span class=o>.</span><span class=n>identifier</span>
        <span class=n>plugins_by_identifier</span><span class=p>[</span><span class=n>identifier</span><span class=p>]</span> <span class=o>=</span> <span class=n>plugin</span>
        <span class=n>placeholders_by_plugin_id</span><span class=p>[</span><span class=n>identifier</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>placeholder</span><span class=p>)</span>

    <span class=c1># Plugin should prepare data for passed placeholders</span>
    <span class=k>for</span> <span class=n>identifier</span><span class=p>,</span> <span class=n>placeholders</span> <span class=ow>in</span> <span class=n>placeholders_by_plugin_id</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
        <span class=n>plugin</span> <span class=o>=</span> <span class=n>plugins_by_identifier</span><span class=p>[</span><span class=n>identifier</span><span class=p>]</span>
        <span class=n>plugin</span><span class=o>.</span><span class=n>prepare_placeholders</span><span class=p>(</span><span class=n>placeholders</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.build_template class="doc doc-heading"> <code class="highlight language-python"><span class=n>build_template</span><span class=p>(</span><span class=n>template_path</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>level_limit</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>keep_placeholders</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>create_first_version</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>workfile_creation_enabled</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Main callback for building workfile from template path.</p> <details class=todo open> <summary>Todo</summary> <p>Handle report of populated placeholders from 'populate_scene_placeholders' to be shown to a user.</p> </details> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>template_path</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Path to a template file with placeholders. Template from settings 'get_template_preset' used when not passed.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>level_limit</code> </td> <td> <code><span title=int>int</span></code> </td> <td> <div class=doc-md-description> <p>Limit of populate loops. Related to 'populate_scene_placeholders' method.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>keep_placeholders</code> </td> <td> <code><span title=bool>bool</span></code> </td> <td> <div class=doc-md-description> <p>Add flag to placeholder data for hosts to decide if they want to remove placeholder after it is used.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>create_first_version</code> </td> <td> <code><span title=bool>bool</span></code> </td> <td> <div class=doc-md-description> <p>Create first version of a workfile. When set to True, this option initiates the saving of the workfile for an initial version. It will skip saving if a version already exists.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>workfile_creation_enabled</code> </td> <td> <code><span title=bool>bool</span></code> </td> <td> <div class=doc-md-description> <p>Whether the call is part of creating a new workfile. When True, we only build if the current file is not an existing saved workfile but a "new" file. Basically when enabled we assume the user tries to load it only into a "New File" (unsaved empty workfile). When False, the default value, we assume we explicitly want to build the template in our current scene regardless of current scene state.</p> </div> </td> <td> <code>False</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>493</span>
<span class=normal>494</span>
<span class=normal>495</span>
<span class=normal>496</span>
<span class=normal>497</span>
<span class=normal>498</span>
<span class=normal>499</span>
<span class=normal>500</span>
<span class=normal>501</span>
<span class=normal>502</span>
<span class=normal>503</span>
<span class=normal>504</span>
<span class=normal>505</span>
<span class=normal>506</span>
<span class=normal>507</span>
<span class=normal>508</span>
<span class=normal>509</span>
<span class=normal>510</span>
<span class=normal>511</span>
<span class=normal>512</span>
<span class=normal>513</span>
<span class=normal>514</span>
<span class=normal>515</span>
<span class=normal>516</span>
<span class=normal>517</span>
<span class=normal>518</span>
<span class=normal>519</span>
<span class=normal>520</span>
<span class=normal>521</span>
<span class=normal>522</span>
<span class=normal>523</span>
<span class=normal>524</span>
<span class=normal>525</span>
<span class=normal>526</span>
<span class=normal>527</span>
<span class=normal>528</span>
<span class=normal>529</span>
<span class=normal>530</span>
<span class=normal>531</span>
<span class=normal>532</span>
<span class=normal>533</span>
<span class=normal>534</span>
<span class=normal>535</span>
<span class=normal>536</span>
<span class=normal>537</span>
<span class=normal>538</span>
<span class=normal>539</span>
<span class=normal>540</span>
<span class=normal>541</span>
<span class=normal>542</span>
<span class=normal>543</span>
<span class=normal>544</span>
<span class=normal>545</span>
<span class=normal>546</span>
<span class=normal>547</span>
<span class=normal>548</span>
<span class=normal>549</span>
<span class=normal>550</span>
<span class=normal>551</span>
<span class=normal>552</span>
<span class=normal>553</span>
<span class=normal>554</span>
<span class=normal>555</span>
<span class=normal>556</span>
<span class=normal>557</span>
<span class=normal>558</span>
<span class=normal>559</span>
<span class=normal>560</span>
<span class=normal>561</span>
<span class=normal>562</span>
<span class=normal>563</span>
<span class=normal>564</span>
<span class=normal>565</span>
<span class=normal>566</span>
<span class=normal>567</span>
<span class=normal>568</span>
<span class=normal>569</span>
<span class=normal>570</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>build_template</span><span class=p>(</span>
    <span class=bp>self</span><span class=p>,</span>
    <span class=n>template_path</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>level_limit</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>keep_placeholders</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>create_first_version</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>workfile_creation_enabled</span><span class=o>=</span><span class=kc>False</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Main callback for building workfile from template path.</span>

<span class=sd>    Todo:</span>
<span class=sd>        Handle report of populated placeholders from</span>
<span class=sd>            &#39;populate_scene_placeholders&#39; to be shown to a user.</span>

<span class=sd>    Args:</span>
<span class=sd>        template_path (str): Path to a template file with placeholders.</span>
<span class=sd>            Template from settings &#39;get_template_preset&#39; used when not</span>
<span class=sd>            passed.</span>
<span class=sd>        level_limit (int): Limit of populate loops. Related to</span>
<span class=sd>            &#39;populate_scene_placeholders&#39; method.</span>
<span class=sd>        keep_placeholders (bool): Add flag to placeholder data for</span>
<span class=sd>            hosts to decide if they want to remove</span>
<span class=sd>            placeholder after it is used.</span>
<span class=sd>        create_first_version (bool): Create first version of a workfile.</span>
<span class=sd>             When set to True, this option initiates the saving of the</span>
<span class=sd>             workfile for an initial version. It will skip saving if</span>
<span class=sd>             a version already exists.</span>
<span class=sd>        workfile_creation_enabled (bool): Whether the call is part of</span>
<span class=sd>            creating a new workfile.</span>
<span class=sd>            When True, we only build if the current file is not</span>
<span class=sd>            an existing saved workfile but a &quot;new&quot; file. Basically when</span>
<span class=sd>            enabled we assume the user tries to load it only into a</span>
<span class=sd>            &quot;New File&quot; (unsaved empty workfile).</span>
<span class=sd>            When False, the default value, we assume we explicitly want to</span>
<span class=sd>            build the template in our current scene regardless of current</span>
<span class=sd>            scene state.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=c1># More accurate variable name</span>
    <span class=c1># - logic related to workfile creation should be moved out in future</span>
    <span class=n>explicit_build_requested</span> <span class=o>=</span> <span class=ow>not</span> <span class=n>workfile_creation_enabled</span>

    <span class=c1># Get default values if not provided</span>
    <span class=k>if</span> <span class=p>(</span>
        <span class=n>template_path</span> <span class=ow>is</span> <span class=kc>None</span>
        <span class=ow>or</span> <span class=n>keep_placeholders</span> <span class=ow>is</span> <span class=kc>None</span>
        <span class=ow>or</span> <span class=n>create_first_version</span> <span class=ow>is</span> <span class=kc>None</span>
    <span class=p>):</span>
        <span class=n>preset</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_template_preset</span><span class=p>()</span>
        <span class=n>template_path</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=n>template_path</span> <span class=ow>or</span> <span class=n>preset</span><span class=p>[</span><span class=s2>&quot;path&quot;</span><span class=p>]</span>
        <span class=k>if</span> <span class=n>keep_placeholders</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>keep_placeholders</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=n>preset</span><span class=p>[</span><span class=s2>&quot;keep_placeholder&quot;</span><span class=p>]</span>
        <span class=k>if</span> <span class=n>create_first_version</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>create_first_version</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=n>preset</span><span class=p>[</span><span class=s2>&quot;create_first_version&quot;</span><span class=p>]</span>

    <span class=c1># Build the template if we are explicitly requesting it or if it&#39;s</span>
    <span class=c1># an unsaved &quot;new file&quot;.</span>
    <span class=n>is_new_file</span> <span class=o>=</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=o>.</span><span class=n>get_current_workfile</span><span class=p>()</span>
    <span class=k>if</span> <span class=n>is_new_file</span> <span class=ow>or</span> <span class=n>explicit_build_requested</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Building the workfile template: </span><span class=si>{</span><span class=n>template_path</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>import_template</span><span class=p>(</span><span class=n>template_path</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>populate_scene_placeholders</span><span class=p>(</span>
            <span class=n>level_limit</span><span class=p>,</span> <span class=n>keep_placeholders</span><span class=p>)</span>

    <span class=c1># Do not consider saving a first workfile version, if this is not set</span>
    <span class=c1># to be a &quot;workfile creation&quot; or `create_first_version` is disabled.</span>
    <span class=k>if</span> <span class=n>explicit_build_requested</span> <span class=ow>or</span> <span class=ow>not</span> <span class=n>create_first_version</span><span class=p>:</span>
        <span class=k>return</span>

    <span class=c1># If there is no existing workfile, save the first version</span>
    <span class=n>workfile_path</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_workfile_path</span><span class=p>()</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>workfile_path</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Saving first workfile: </span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span> <span class=n>workfile_path</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>save_workfile</span><span class=p>(</span><span class=n>workfile_path</span><span class=p>)</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span>
            <span class=s2>&quot;A workfile already exists. Skipping save of workfile as &quot;</span>
            <span class=s2>&quot;initial version.&quot;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.clear_shared_data class="doc doc-heading"> <code class="highlight language-python"><span class=n>clear_shared_data</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Clear shared data.</p> <p>Method only clear shared data to default state.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>364</span>
<span class=normal>365</span>
<span class=normal>366</span>
<span class=normal>367</span>
<span class=normal>368</span>
<span class=normal>369</span>
<span class=normal>370</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>clear_shared_data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Clear shared data.</span>

<span class=sd>    Method only clear shared data to default state.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_shared_data</span> <span class=o>=</span> <span class=p>{}</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.clear_shared_populate_data class="doc doc-heading"> <code class="highlight language-python"><span class=n>clear_shared_populate_data</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Receive shared data across plugins and placeholders.</p> <p>These data are cleared after each loop of populating of template.</p> <p>This can be used to scroll scene only once to look for placeholder items if the storing is unified but each placeholder plugin would have to call it again.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>key</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Key under which are shared data stored.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Union[None, Any]: None if key was not set.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>372</span>
<span class=normal>373</span>
<span class=normal>374</span>
<span class=normal>375</span>
<span class=normal>376</span>
<span class=normal>377</span>
<span class=normal>378</span>
<span class=normal>379</span>
<span class=normal>380</span>
<span class=normal>381</span>
<span class=normal>382</span>
<span class=normal>383</span>
<span class=normal>384</span>
<span class=normal>385</span>
<span class=normal>386</span>
<span class=normal>387</span>
<span class=normal>388</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>clear_shared_populate_data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Receive shared data across plugins and placeholders.</span>

<span class=sd>    These data are cleared after each loop of populating of template.</span>

<span class=sd>    This can be used to scroll scene only once to look for placeholder</span>
<span class=sd>    items if the storing is unified but each placeholder plugin would have</span>
<span class=sd>    to call it again.</span>

<span class=sd>    Args:</span>
<span class=sd>        key (str): Key under which are shared data stored.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Union[None, Any]: None if key was not set.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_shared_populate_data</span> <span class=o>=</span> <span class=p>{}</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.create_placeholder class="doc doc-heading"> <code class="highlight language-python"><span class=n>create_placeholder</span><span class=p>(</span><span class=n>plugin_identifier</span><span class=p>,</span> <span class=n>placeholder_data</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Create new placeholder using plugin identifier and data.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>plugin_identifier</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Identifier of plugin. That's how builder know which plugin should be used.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>placeholder_data</code> </td> <td> <code><span title=Dict>Dict</span>[<span title=str>str</span>, <span title=Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Placeholder item data. They should match options required by the plugin.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>PlaceholderItem</code></td> <td> </td> <td> <div class=doc-md-description> <p>Created placeholder item.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>456</span>
<span class=normal>457</span>
<span class=normal>458</span>
<span class=normal>459</span>
<span class=normal>460</span>
<span class=normal>461</span>
<span class=normal>462</span>
<span class=normal>463</span>
<span class=normal>464</span>
<span class=normal>465</span>
<span class=normal>466</span>
<span class=normal>467</span>
<span class=normal>468</span>
<span class=normal>469</span>
<span class=normal>470</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>create_placeholder</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>plugin_identifier</span><span class=p>,</span> <span class=n>placeholder_data</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Create new placeholder using plugin identifier and data.</span>

<span class=sd>    Args:</span>
<span class=sd>        plugin_identifier (str): Identifier of plugin. That&#39;s how builder</span>
<span class=sd>            know which plugin should be used.</span>
<span class=sd>        placeholder_data (Dict[str, Any]): Placeholder item data. They</span>
<span class=sd>            should match options required by the plugin.</span>

<span class=sd>    Returns:</span>
<span class=sd>        PlaceholderItem: Created placeholder item.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>plugin</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>placeholder_plugins</span><span class=p>[</span><span class=n>plugin_identifier</span><span class=p>]</span>
    <span class=k>return</span> <span class=n>plugin</span><span class=o>.</span><span class=n>create_placeholder</span><span class=p>(</span><span class=n>placeholder_data</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.get_placeholder_plugin_classes class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_placeholder_plugin_classes</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Get placeholder plugin classes that can be used to build template.</p> <p>Default implementation looks for method 'get_workfile_build_placeholder_plugins' on host.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>List[PlaceholderPlugin]: Plugin classes available for host.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_placeholder_plugin_classes</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get placeholder plugin classes that can be used to build template.</span>

<span class=sd>    Default implementation looks for method</span>
<span class=sd>        &#39;get_workfile_build_placeholder_plugins&#39; on host.</span>

<span class=sd>    Returns:</span>
<span class=sd>        List[PlaceholderPlugin]: Plugin classes available for host.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>plugins</span> <span class=o>=</span> <span class=p>[]</span>

    <span class=c1># Backwards compatibility</span>
    <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_host</span><span class=p>,</span> <span class=s2>&quot;get_workfile_build_placeholder_plugins&quot;</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_host</span><span class=o>.</span><span class=n>get_workfile_build_placeholder_plugins</span><span class=p>()</span>

    <span class=n>plugins</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>discover</span><span class=p>(</span><span class=n>PlaceholderPlugin</span><span class=p>))</span>
    <span class=k>return</span> <span class=n>plugins</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.get_placeholders class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_placeholders</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Collect placeholder items from scene.</p> <p>Each placeholder plugin can collect it's placeholders and return them. This method does not use cached values but always go through the scene.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>List[PlaceholderItem]: Sorted placeholder items.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>472</span>
<span class=normal>473</span>
<span class=normal>474</span>
<span class=normal>475</span>
<span class=normal>476</span>
<span class=normal>477</span>
<span class=normal>478</span>
<span class=normal>479</span>
<span class=normal>480</span>
<span class=normal>481</span>
<span class=normal>482</span>
<span class=normal>483</span>
<span class=normal>484</span>
<span class=normal>485</span>
<span class=normal>486</span>
<span class=normal>487</span>
<span class=normal>488</span>
<span class=normal>489</span>
<span class=normal>490</span>
<span class=normal>491</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_placeholders</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Collect placeholder items from scene.</span>

<span class=sd>    Each placeholder plugin can collect it&#39;s placeholders and return them.</span>
<span class=sd>    This method does not use cached values but always go through the scene.</span>

<span class=sd>    Returns:</span>
<span class=sd>        List[PlaceholderItem]: Sorted placeholder items.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>placeholders</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>for</span> <span class=n>placeholder_plugin</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>placeholder_plugins</span><span class=o>.</span><span class=n>values</span><span class=p>():</span>
        <span class=n>result</span> <span class=o>=</span> <span class=n>placeholder_plugin</span><span class=o>.</span><span class=n>collect_placeholders</span><span class=p>()</span>
        <span class=k>if</span> <span class=n>result</span><span class=p>:</span>
            <span class=n>placeholders</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>result</span><span class=p>)</span>

    <span class=k>return</span> <span class=nb>list</span><span class=p>(</span><span class=nb>sorted</span><span class=p>(</span>
        <span class=n>placeholders</span><span class=p>,</span>
        <span class=n>key</span><span class=o>=</span><span class=k>lambda</span> <span class=n>placeholder</span><span class=p>:</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>order</span>
    <span class=p>))</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.get_shared_data class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_shared_data</span><span class=p>(</span><span class=n>key</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Receive shared data across plugins and placeholders.</p> <p>This can be used to scroll scene only once to look for placeholder items if the storing is unified but each placeholder plugin would have to call it again.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>key</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Key under which are shared data stored.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Union[None, Any]: None if key was not set.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span>
<span class=normal>334</span>
<span class=normal>335</span>
<span class=normal>336</span>
<span class=normal>337</span>
<span class=normal>338</span>
<span class=normal>339</span>
<span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span>
<span class=normal>344</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_shared_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Receive shared data across plugins and placeholders.</span>

<span class=sd>    This can be used to scroll scene only once to look for placeholder</span>
<span class=sd>    items if the storing is unified but each placeholder plugin would have</span>
<span class=sd>    to call it again.</span>

<span class=sd>    Args:</span>
<span class=sd>        key (str): Key under which are shared data stored.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Union[None, Any]: None if key was not set.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_shared_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.get_shared_populate_data class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_shared_populate_data</span><span class=p>(</span><span class=n>key</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Store share populate data across plugins and placeholders.</p> <p>These data are cleared after each loop of populating of template.</p> <p>Store data that can be afterwards accessed from any future call. It is good practice to check if the same value is not already stored under different key or if the key is not already used for something else.</p> <p>Key should be self-explanatory to content. - wrong: 'folder' - good: 'folder_path'</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>key</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Key under which is key stored.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>value</code> </td> <td> <code><span title=Any>Any</span></code> </td> <td> <div class=doc-md-description> <p>Value that should be stored under the key.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>390</span>
<span class=normal>391</span>
<span class=normal>392</span>
<span class=normal>393</span>
<span class=normal>394</span>
<span class=normal>395</span>
<span class=normal>396</span>
<span class=normal>397</span>
<span class=normal>398</span>
<span class=normal>399</span>
<span class=normal>400</span>
<span class=normal>401</span>
<span class=normal>402</span>
<span class=normal>403</span>
<span class=normal>404</span>
<span class=normal>405</span>
<span class=normal>406</span>
<span class=normal>407</span>
<span class=normal>408</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_shared_populate_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Store share populate data across plugins and placeholders.</span>

<span class=sd>    These data are cleared after each loop of populating of template.</span>

<span class=sd>    Store data that can be afterwards accessed from any future call. It</span>
<span class=sd>    is good practice to check if the same value is not already stored under</span>
<span class=sd>    different key or if the key is not already used for something else.</span>

<span class=sd>    Key should be self-explanatory to content.</span>
<span class=sd>    - wrong: &#39;folder&#39;</span>
<span class=sd>    - good: &#39;folder_path&#39;</span>

<span class=sd>    Args:</span>
<span class=sd>        key (str): Key under which is key stored.</span>
<span class=sd>        value (Any): Value that should be stored under the key.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_shared_populate_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.get_template_preset class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_template_preset</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Unified way how template preset is received using settings.</p> <p>Method is dependent on '_get_build_profiles' which should return filter profiles to resolve path to a template. Default implementation looks into host settings: - 'project_settings/{host name}/templated_workfile_build/profiles'</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>dict</code></td> <td> </td> <td> <div class=doc-md-description> <p>Dictionary with <code>path</code>, <code>keep_placeholder</code> and <code>create_first_version</code> settings from the template preset for current context.</p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="TemplateProfileNotFound (client.ayon_core.pipeline.workfile.workfile_template_builder.TemplateProfileNotFound)" href=#client.ayon_core.pipeline.workfile.workfile_template_builder.TemplateProfileNotFound>TemplateProfileNotFound</a></code> </td> <td> <div class=doc-md-description> <p>When profiles are not filled.</p> </div> </td> </tr> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="TemplateLoadFailed (client.ayon_core.pipeline.workfile.workfile_template_builder.TemplateLoadFailed)" href=#client.ayon_core.pipeline.workfile.workfile_template_builder.TemplateLoadFailed>TemplateLoadFailed</a></code> </td> <td> <div class=doc-md-description> <p>Profile was found but path is not set.</p> </div> </td> </tr> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="TemplateNotFound (client.ayon_core.pipeline.workfile.workfile_template_builder.TemplateNotFound)" href=#client.ayon_core.pipeline.workfile.workfile_template_builder.TemplateNotFound>TemplateNotFound</a></code> </td> <td> <div class=doc-md-description> <p>Path was set but file does not exist.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>806</span>
<span class=normal>807</span>
<span class=normal>808</span>
<span class=normal>809</span>
<span class=normal>810</span>
<span class=normal>811</span>
<span class=normal>812</span>
<span class=normal>813</span>
<span class=normal>814</span>
<span class=normal>815</span>
<span class=normal>816</span>
<span class=normal>817</span>
<span class=normal>818</span>
<span class=normal>819</span>
<span class=normal>820</span>
<span class=normal>821</span>
<span class=normal>822</span>
<span class=normal>823</span>
<span class=normal>824</span>
<span class=normal>825</span>
<span class=normal>826</span>
<span class=normal>827</span>
<span class=normal>828</span>
<span class=normal>829</span>
<span class=normal>830</span>
<span class=normal>831</span>
<span class=normal>832</span>
<span class=normal>833</span>
<span class=normal>834</span>
<span class=normal>835</span>
<span class=normal>836</span>
<span class=normal>837</span>
<span class=normal>838</span>
<span class=normal>839</span>
<span class=normal>840</span>
<span class=normal>841</span>
<span class=normal>842</span>
<span class=normal>843</span>
<span class=normal>844</span>
<span class=normal>845</span>
<span class=normal>846</span>
<span class=normal>847</span>
<span class=normal>848</span>
<span class=normal>849</span>
<span class=normal>850</span>
<span class=normal>851</span>
<span class=normal>852</span>
<span class=normal>853</span>
<span class=normal>854</span>
<span class=normal>855</span>
<span class=normal>856</span>
<span class=normal>857</span>
<span class=normal>858</span>
<span class=normal>859</span>
<span class=normal>860</span>
<span class=normal>861</span>
<span class=normal>862</span>
<span class=normal>863</span>
<span class=normal>864</span>
<span class=normal>865</span>
<span class=normal>866</span>
<span class=normal>867</span>
<span class=normal>868</span>
<span class=normal>869</span>
<span class=normal>870</span>
<span class=normal>871</span>
<span class=normal>872</span>
<span class=normal>873</span>
<span class=normal>874</span>
<span class=normal>875</span>
<span class=normal>876</span>
<span class=normal>877</span>
<span class=normal>878</span>
<span class=normal>879</span>
<span class=normal>880</span>
<span class=normal>881</span>
<span class=normal>882</span>
<span class=normal>883</span>
<span class=normal>884</span>
<span class=normal>885</span>
<span class=normal>886</span>
<span class=normal>887</span>
<span class=normal>888</span>
<span class=normal>889</span>
<span class=normal>890</span>
<span class=normal>891</span>
<span class=normal>892</span>
<span class=normal>893</span>
<span class=normal>894</span>
<span class=normal>895</span>
<span class=normal>896</span>
<span class=normal>897</span>
<span class=normal>898</span>
<span class=normal>899</span>
<span class=normal>900</span>
<span class=normal>901</span>
<span class=normal>902</span>
<span class=normal>903</span>
<span class=normal>904</span>
<span class=normal>905</span>
<span class=normal>906</span>
<span class=normal>907</span>
<span class=normal>908</span>
<span class=normal>909</span>
<span class=normal>910</span>
<span class=normal>911</span>
<span class=normal>912</span>
<span class=normal>913</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_template_preset</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Unified way how template preset is received using settings.</span>

<span class=sd>    Method is dependent on &#39;_get_build_profiles&#39; which should return filter</span>
<span class=sd>    profiles to resolve path to a template. Default implementation looks</span>
<span class=sd>    into host settings:</span>
<span class=sd>    - &#39;project_settings/{host name}/templated_workfile_build/profiles&#39;</span>

<span class=sd>    Returns:</span>
<span class=sd>        dict: Dictionary with `path`, `keep_placeholder` and</span>
<span class=sd>            `create_first_version` settings from the template preset</span>
<span class=sd>            for current context.</span>

<span class=sd>    Raises:</span>
<span class=sd>        TemplateProfileNotFound: When profiles are not filled.</span>
<span class=sd>        TemplateLoadFailed: Profile was found but path is not set.</span>
<span class=sd>        TemplateNotFound: Path was set but file does not exist.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>host_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>host_name</span>
    <span class=n>project_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>project_name</span>
    <span class=n>task_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>current_task_name</span>
    <span class=n>task_type</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>current_task_type</span>

    <span class=n>build_profiles</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_build_profiles</span><span class=p>()</span>
    <span class=n>profile</span> <span class=o>=</span> <span class=n>filter_profiles</span><span class=p>(</span>
        <span class=n>build_profiles</span><span class=p>,</span>
        <span class=p>{</span>
            <span class=s2>&quot;task_types&quot;</span><span class=p>:</span> <span class=n>task_type</span><span class=p>,</span>
            <span class=s2>&quot;task_names&quot;</span><span class=p>:</span> <span class=n>task_name</span>
        <span class=p>}</span>
    <span class=p>)</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>profile</span><span class=p>:</span>
        <span class=k>raise</span> <span class=n>TemplateProfileNotFound</span><span class=p>((</span>
            <span class=s2>&quot;No matching profile found for task &#39;</span><span class=si>{}</span><span class=s2>&#39; of type &#39;</span><span class=si>{}</span><span class=s2>&#39; &quot;</span>
            <span class=s2>&quot;with host &#39;</span><span class=si>{}</span><span class=s2>&#39;&quot;</span>
        <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>task_name</span><span class=p>,</span> <span class=n>task_type</span><span class=p>,</span> <span class=n>host_name</span><span class=p>))</span>

    <span class=n>path</span> <span class=o>=</span> <span class=n>profile</span><span class=p>[</span><span class=s2>&quot;path&quot;</span><span class=p>]</span>

    <span class=c1># switch to remove placeholders after they are used</span>
    <span class=n>keep_placeholder</span> <span class=o>=</span> <span class=n>profile</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;keep_placeholder&quot;</span><span class=p>)</span>
    <span class=n>create_first_version</span> <span class=o>=</span> <span class=n>profile</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;create_first_version&quot;</span><span class=p>)</span>

    <span class=c1># backward compatibility, since default is True</span>
    <span class=k>if</span> <span class=n>keep_placeholder</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>keep_placeholder</span> <span class=o>=</span> <span class=kc>True</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>path</span><span class=p>:</span>
        <span class=k>raise</span> <span class=n>TemplateLoadFailed</span><span class=p>((</span>
            <span class=s2>&quot;Template path is not set.</span><span class=se>\n</span><span class=s2>&quot;</span>
            <span class=s2>&quot;Path need to be set in </span><span class=si>{}</span><span class=se>\\</span><span class=s2>Template Workfile Build &quot;</span>
            <span class=s2>&quot;Settings</span><span class=se>\\</span><span class=s2>Profiles&quot;</span>
        <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>host_name</span><span class=o>.</span><span class=n>title</span><span class=p>()))</span>

    <span class=c1># Try to fill path with environments and anatomy roots</span>
    <span class=n>anatomy</span> <span class=o>=</span> <span class=n>Anatomy</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>
    <span class=n>fill_data</span> <span class=o>=</span> <span class=p>{</span>
        <span class=n>key</span><span class=p>:</span> <span class=n>value</span>
        <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>items</span><span class=p>()</span>
    <span class=p>}</span>

    <span class=n>fill_data</span><span class=p>[</span><span class=s2>&quot;root&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>anatomy</span><span class=o>.</span><span class=n>roots</span>
    <span class=n>fill_data</span><span class=p>[</span><span class=s2>&quot;project&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span>
        <span class=s2>&quot;name&quot;</span><span class=p>:</span> <span class=n>project_name</span><span class=p>,</span>
        <span class=s2>&quot;code&quot;</span><span class=p>:</span> <span class=n>anatomy</span><span class=o>.</span><span class=n>project_code</span><span class=p>,</span>
    <span class=p>}</span>

    <span class=n>path</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>resolve_template_path</span><span class=p>(</span><span class=n>path</span><span class=p>,</span> <span class=n>fill_data</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>path</span> <span class=ow>and</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>path</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Found template at: &#39;</span><span class=si>{}</span><span class=s2>&#39;&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>path</span><span class=p>))</span>
        <span class=k>return</span> <span class=p>{</span>
            <span class=s2>&quot;path&quot;</span><span class=p>:</span> <span class=n>path</span><span class=p>,</span>
            <span class=s2>&quot;keep_placeholder&quot;</span><span class=p>:</span> <span class=n>keep_placeholder</span><span class=p>,</span>
            <span class=s2>&quot;create_first_version&quot;</span><span class=p>:</span> <span class=n>create_first_version</span>
        <span class=p>}</span>

    <span class=n>solved_path</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=n>solved_path</span> <span class=o>=</span> <span class=n>anatomy</span><span class=o>.</span><span class=n>path_remapper</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>
        <span class=k>except</span> <span class=ne>KeyError</span> <span class=k>as</span> <span class=n>missing_key</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>KeyError</span><span class=p>(</span>
                <span class=s2>&quot;Could not solve key &#39;</span><span class=si>{}</span><span class=s2>&#39; in template path &#39;</span><span class=si>{}</span><span class=s2>&#39;&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                    <span class=n>missing_key</span><span class=p>,</span> <span class=n>path</span><span class=p>))</span>

        <span class=k>if</span> <span class=n>solved_path</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>solved_path</span> <span class=o>=</span> <span class=n>path</span>
        <span class=k>if</span> <span class=n>solved_path</span> <span class=o>==</span> <span class=n>path</span><span class=p>:</span>
            <span class=k>break</span>
        <span class=n>path</span> <span class=o>=</span> <span class=n>solved_path</span>

    <span class=n>solved_path</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>normpath</span><span class=p>(</span><span class=n>solved_path</span><span class=p>)</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>solved_path</span><span class=p>):</span>
        <span class=k>raise</span> <span class=n>TemplateNotFound</span><span class=p>(</span>
            <span class=s2>&quot;Template found in AYON settings for task &#39;</span><span class=si>{}</span><span class=s2>&#39; with host &quot;</span>
            <span class=s2>&quot;&#39;</span><span class=si>{}</span><span class=s2>&#39; does not exists. (Not found : </span><span class=si>{}</span><span class=s2>)&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                <span class=n>task_name</span><span class=p>,</span> <span class=n>host_name</span><span class=p>,</span> <span class=n>solved_path</span><span class=p>))</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Found template at: &#39;</span><span class=si>{}</span><span class=s2>&#39;&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>solved_path</span><span class=p>))</span>

    <span class=k>return</span> <span class=p>{</span>
        <span class=s2>&quot;path&quot;</span><span class=p>:</span> <span class=n>solved_path</span><span class=p>,</span>
        <span class=s2>&quot;keep_placeholder&quot;</span><span class=p>:</span> <span class=n>keep_placeholder</span><span class=p>,</span>
        <span class=s2>&quot;create_first_version&quot;</span><span class=p>:</span> <span class=n>create_first_version</span>
    <span class=p>}</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.get_workfile_path class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_workfile_path</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Return last known workfile path or the first workfile path create.</p> <details class=return open> <summary>Return</summary> <p>str: Last workfile path, or first version to create if none exist.</p> </details> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>624</span>
<span class=normal>625</span>
<span class=normal>626</span>
<span class=normal>627</span>
<span class=normal>628</span>
<span class=normal>629</span>
<span class=normal>630</span>
<span class=normal>631</span>
<span class=normal>632</span>
<span class=normal>633</span>
<span class=normal>634</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_workfile_path</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Return last known workfile path or the first workfile path create.</span>

<span class=sd>    Return:</span>
<span class=sd>        str: Last workfile path, or first version to create if none exist.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=c1># AYON_LAST_WORKFILE will be set to the last existing workfile OR</span>
    <span class=c1># if none exist it will be set to the first version.</span>
    <span class=n>last_workfile_path</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AYON_LAST_WORKFILE&quot;</span><span class=p>)</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;__ last_workfile_path: </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>last_workfile_path</span><span class=p>))</span>
    <span class=k>return</span> <span class=n>last_workfile_path</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.import_template class="doc doc-heading"> <code class="highlight language-python"><span class=n>import_template</span><span class=p>(</span><span class=n>template_path</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Import template in current host.</p> <p>Should load the content of template into scene so 'populate_scene_placeholders' can be started.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>template_path</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Fullpath for current task and host's template file.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>609</span>
<span class=normal>610</span>
<span class=normal>611</span>
<span class=normal>612</span>
<span class=normal>613</span>
<span class=normal>614</span>
<span class=normal>615</span>
<span class=normal>616</span>
<span class=normal>617</span>
<span class=normal>618</span>
<span class=normal>619</span>
<span class=normal>620</span>
<span class=normal>621</span>
<span class=normal>622</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@abstractmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>import_template</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>template_path</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Import template in current host.</span>

<span class=sd>    Should load the content of template into scene so</span>
<span class=sd>    &#39;populate_scene_placeholders&#39; can be started.</span>

<span class=sd>    Args:</span>
<span class=sd>        template_path (str): Fullpath for current task and</span>
<span class=sd>            host&#39;s template file.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.open_template class="doc doc-heading"> <code class="highlight language-python"><span class=n>open_template</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Open template file with registered host.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>603</span>
<span class=normal>604</span>
<span class=normal>605</span>
<span class=normal>606</span>
<span class=normal>607</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>open_template</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Open template file with registered host.&quot;&quot;&quot;</span>
    <span class=n>template_preset</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_template_preset</span><span class=p>()</span>
    <span class=n>template_path</span> <span class=o>=</span> <span class=n>template_preset</span><span class=p>[</span><span class=s2>&quot;path&quot;</span><span class=p>]</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=o>.</span><span class=n>open_file</span><span class=p>(</span><span class=n>template_path</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.populate_scene_placeholders class="doc doc-heading"> <code class="highlight language-python"><span class=n>populate_scene_placeholders</span><span class=p>(</span><span class=n>level_limit</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>keep_placeholders</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Find placeholders in scene using plugins and process them.</p> <p>This should happen after 'import_template'.</p> <p>Collect available placeholders from scene. All of them are processed after that shared data are cleared. Placeholder items are collected again and if there are any new the loop happens again. This is possible to change with defying 'level_limit'.</p> <p>Placeholders are marked as processed so they're not re-processed. To identify which placeholders were already processed is used placeholder's 'scene_identifier'.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>level_limit</code> </td> <td> <code><span title=int>int</span></code> </td> <td> <div class=doc-md-description> <p>Level of loops that can happen. Default is 1000.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>keep_placeholders</code> </td> <td> <code><span title=bool>bool</span></code> </td> <td> <div class=doc-md-description> <p>Add flag to placeholder data for hosts to decide if they want to remove placeholder after it is used.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>666</span>
<span class=normal>667</span>
<span class=normal>668</span>
<span class=normal>669</span>
<span class=normal>670</span>
<span class=normal>671</span>
<span class=normal>672</span>
<span class=normal>673</span>
<span class=normal>674</span>
<span class=normal>675</span>
<span class=normal>676</span>
<span class=normal>677</span>
<span class=normal>678</span>
<span class=normal>679</span>
<span class=normal>680</span>
<span class=normal>681</span>
<span class=normal>682</span>
<span class=normal>683</span>
<span class=normal>684</span>
<span class=normal>685</span>
<span class=normal>686</span>
<span class=normal>687</span>
<span class=normal>688</span>
<span class=normal>689</span>
<span class=normal>690</span>
<span class=normal>691</span>
<span class=normal>692</span>
<span class=normal>693</span>
<span class=normal>694</span>
<span class=normal>695</span>
<span class=normal>696</span>
<span class=normal>697</span>
<span class=normal>698</span>
<span class=normal>699</span>
<span class=normal>700</span>
<span class=normal>701</span>
<span class=normal>702</span>
<span class=normal>703</span>
<span class=normal>704</span>
<span class=normal>705</span>
<span class=normal>706</span>
<span class=normal>707</span>
<span class=normal>708</span>
<span class=normal>709</span>
<span class=normal>710</span>
<span class=normal>711</span>
<span class=normal>712</span>
<span class=normal>713</span>
<span class=normal>714</span>
<span class=normal>715</span>
<span class=normal>716</span>
<span class=normal>717</span>
<span class=normal>718</span>
<span class=normal>719</span>
<span class=normal>720</span>
<span class=normal>721</span>
<span class=normal>722</span>
<span class=normal>723</span>
<span class=normal>724</span>
<span class=normal>725</span>
<span class=normal>726</span>
<span class=normal>727</span>
<span class=normal>728</span>
<span class=normal>729</span>
<span class=normal>730</span>
<span class=normal>731</span>
<span class=normal>732</span>
<span class=normal>733</span>
<span class=normal>734</span>
<span class=normal>735</span>
<span class=normal>736</span>
<span class=normal>737</span>
<span class=normal>738</span>
<span class=normal>739</span>
<span class=normal>740</span>
<span class=normal>741</span>
<span class=normal>742</span>
<span class=normal>743</span>
<span class=normal>744</span>
<span class=normal>745</span>
<span class=normal>746</span>
<span class=normal>747</span>
<span class=normal>748</span>
<span class=normal>749</span>
<span class=normal>750</span>
<span class=normal>751</span>
<span class=normal>752</span>
<span class=normal>753</span>
<span class=normal>754</span>
<span class=normal>755</span>
<span class=normal>756</span>
<span class=normal>757</span>
<span class=normal>758</span>
<span class=normal>759</span>
<span class=normal>760</span>
<span class=normal>761</span>
<span class=normal>762</span>
<span class=normal>763</span>
<span class=normal>764</span>
<span class=normal>765</span>
<span class=normal>766</span>
<span class=normal>767</span>
<span class=normal>768</span>
<span class=normal>769</span>
<span class=normal>770</span>
<span class=normal>771</span>
<span class=normal>772</span>
<span class=normal>773</span>
<span class=normal>774</span>
<span class=normal>775</span>
<span class=normal>776</span>
<span class=normal>777</span>
<span class=normal>778</span>
<span class=normal>779</span>
<span class=normal>780</span>
<span class=normal>781</span>
<span class=normal>782</span>
<span class=normal>783</span>
<span class=normal>784</span>
<span class=normal>785</span>
<span class=normal>786</span>
<span class=normal>787</span>
<span class=normal>788</span>
<span class=normal>789</span>
<span class=normal>790</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>populate_scene_placeholders</span><span class=p>(</span>
    <span class=bp>self</span><span class=p>,</span> <span class=n>level_limit</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>keep_placeholders</span><span class=o>=</span><span class=kc>None</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Find placeholders in scene using plugins and process them.</span>

<span class=sd>    This should happen after &#39;import_template&#39;.</span>

<span class=sd>    Collect available placeholders from scene. All of them are processed</span>
<span class=sd>    after that shared data are cleared. Placeholder items are collected</span>
<span class=sd>    again and if there are any new the loop happens again. This is possible</span>
<span class=sd>    to change with defying &#39;level_limit&#39;.</span>

<span class=sd>    Placeholders are marked as processed so they&#39;re not re-processed. To</span>
<span class=sd>    identify which placeholders were already processed is used</span>
<span class=sd>    placeholder&#39;s &#39;scene_identifier&#39;.</span>

<span class=sd>    Args:</span>
<span class=sd>        level_limit (int): Level of loops that can happen. Default is 1000.</span>
<span class=sd>        keep_placeholders (bool): Add flag to placeholder data for</span>
<span class=sd>            hosts to decide if they want to remove</span>
<span class=sd>            placeholder after it is used.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>placeholder_plugins</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s2>&quot;There are no placeholder plugins available.&quot;</span><span class=p>)</span>
        <span class=k>return</span>

    <span class=n>placeholders</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_placeholders</span><span class=p>()</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>placeholders</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s2>&quot;No placeholders were found.&quot;</span><span class=p>)</span>
        <span class=k>return</span>

    <span class=c1># Avoid infinite loop</span>
    <span class=c1># - 1000 iterations of placeholders processing must be enough</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>level_limit</span><span class=p>:</span>
        <span class=n>level_limit</span> <span class=o>=</span> <span class=mi>1000</span>

    <span class=n>placeholder_by_scene_id</span> <span class=o>=</span> <span class=p>{</span>
        <span class=n>placeholder</span><span class=o>.</span><span class=n>scene_identifier</span><span class=p>:</span> <span class=n>placeholder</span>
        <span class=k>for</span> <span class=n>placeholder</span> <span class=ow>in</span> <span class=n>placeholders</span>
    <span class=p>}</span>
    <span class=n>all_processed</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>placeholders</span><span class=p>)</span> <span class=o>==</span> <span class=mi>0</span>
    <span class=c1># Counter is checked at the end of a loop so the loop happens at least</span>
    <span class=c1>#   once.</span>
    <span class=n>iter_counter</span> <span class=o>=</span> <span class=mi>0</span>
    <span class=k>while</span> <span class=ow>not</span> <span class=n>all_processed</span><span class=p>:</span>
        <span class=n>filtered_placeholders</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>for</span> <span class=n>placeholder</span> <span class=ow>in</span> <span class=n>placeholders</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>finished</span><span class=p>:</span>
                <span class=k>continue</span>

            <span class=k>if</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>in_progress</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>((</span>
                    <span class=s2>&quot;Placeholder that should be processed&quot;</span>
                    <span class=s2>&quot; is already in progress.&quot;</span>
                <span class=p>))</span>
                <span class=k>continue</span>

            <span class=c1># add flag for keeping placeholders in scene</span>
            <span class=c1># after they are processed</span>
            <span class=n>placeholder</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;keep_placeholder&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>keep_placeholders</span>

            <span class=n>filtered_placeholders</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>placeholder</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_prepare_placeholders</span><span class=p>(</span><span class=n>filtered_placeholders</span><span class=p>)</span>

        <span class=k>for</span> <span class=n>placeholder</span> <span class=ow>in</span> <span class=n>filtered_placeholders</span><span class=p>:</span>
            <span class=n>placeholder</span><span class=o>.</span><span class=n>set_in_progress</span><span class=p>()</span>
            <span class=n>placeholder_plugin</span> <span class=o>=</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>plugin</span>
            <span class=k>try</span><span class=p>:</span>
                <span class=n>placeholder_plugin</span><span class=o>.</span><span class=n>populate_placeholder</span><span class=p>(</span><span class=n>placeholder</span><span class=p>)</span>

            <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>exc</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
                    <span class=p>(</span>
                        <span class=s2>&quot;Failed to process placeholder </span><span class=si>{}</span><span class=s2> with plugin </span><span class=si>{}</span><span class=s2>&quot;</span>
                    <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                        <span class=n>placeholder</span><span class=o>.</span><span class=n>scene_identifier</span><span class=p>,</span>
                        <span class=n>placeholder_plugin</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span>
                    <span class=p>),</span>
                    <span class=n>exc_info</span><span class=o>=</span><span class=kc>True</span>
                <span class=p>)</span>
                <span class=n>placeholder</span><span class=o>.</span><span class=n>set_failed</span><span class=p>(</span><span class=n>exc</span><span class=p>)</span>

            <span class=n>placeholder</span><span class=o>.</span><span class=n>set_finished</span><span class=p>()</span>

        <span class=c1># Trigger on_depth_processed event</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>emit_event</span><span class=p>(</span>
            <span class=n>topic</span><span class=o>=</span><span class=s2>&quot;template.depth_processed&quot;</span><span class=p>,</span>
            <span class=n>data</span><span class=o>=</span><span class=p>{</span>
                <span class=s2>&quot;depth&quot;</span><span class=p>:</span> <span class=n>iter_counter</span><span class=p>,</span>
                <span class=s2>&quot;placeholders_by_scene_id&quot;</span><span class=p>:</span> <span class=n>placeholder_by_scene_id</span>
            <span class=p>},</span>
            <span class=n>source</span><span class=o>=</span><span class=s2>&quot;builder&quot;</span>
        <span class=p>)</span>

        <span class=c1># Clear shared data before getting new placeholders</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>clear_shared_populate_data</span><span class=p>()</span>

        <span class=n>iter_counter</span> <span class=o>+=</span> <span class=mi>1</span>
        <span class=k>if</span> <span class=n>iter_counter</span> <span class=o>&gt;=</span> <span class=n>level_limit</span><span class=p>:</span>
            <span class=k>break</span>

        <span class=n>all_processed</span> <span class=o>=</span> <span class=kc>True</span>
        <span class=n>collected_placeholders</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_placeholders</span><span class=p>()</span>
        <span class=k>for</span> <span class=n>placeholder</span> <span class=ow>in</span> <span class=n>collected_placeholders</span><span class=p>:</span>
            <span class=n>identifier</span> <span class=o>=</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>scene_identifier</span>
            <span class=k>if</span> <span class=n>identifier</span> <span class=ow>in</span> <span class=n>placeholder_by_scene_id</span><span class=p>:</span>
                <span class=k>continue</span>

            <span class=n>all_processed</span> <span class=o>=</span> <span class=kc>False</span>
            <span class=n>placeholder_by_scene_id</span><span class=p>[</span><span class=n>identifier</span><span class=p>]</span> <span class=o>=</span> <span class=n>placeholder</span>
            <span class=n>placeholders</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>placeholder</span><span class=p>)</span>

    <span class=c1># Trigger on_finished event</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>emit_event</span><span class=p>(</span>
        <span class=n>topic</span><span class=o>=</span><span class=s2>&quot;template.finished&quot;</span><span class=p>,</span>
        <span class=n>data</span><span class=o>=</span><span class=p>{</span>
            <span class=s2>&quot;depth&quot;</span><span class=p>:</span> <span class=n>iter_counter</span><span class=p>,</span>
            <span class=s2>&quot;placeholders_by_scene_id&quot;</span><span class=p>:</span> <span class=n>placeholder_by_scene_id</span><span class=p>,</span>
        <span class=p>},</span>
        <span class=n>source</span><span class=o>=</span><span class=s2>&quot;builder&quot;</span>
    <span class=p>)</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>refresh</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.rebuild_template class="doc doc-heading"> <code class="highlight language-python"><span class=n>rebuild_template</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Go through existing placeholders in scene and update them.</p> <p>This could not make sense for all plugin types so this is optional logic for plugins.</p> <details class=note open> <summary>Note</summary> <p>Logic is not importing the template again but using placeholders that were already available. We should maybe change the method name.</p> </details> <details class=question open> <summary>Question</summary> <p>Should this also handle subloops as it is possible that another template is loaded during processing?</p> </details> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>572</span>
<span class=normal>573</span>
<span class=normal>574</span>
<span class=normal>575</span>
<span class=normal>576</span>
<span class=normal>577</span>
<span class=normal>578</span>
<span class=normal>579</span>
<span class=normal>580</span>
<span class=normal>581</span>
<span class=normal>582</span>
<span class=normal>583</span>
<span class=normal>584</span>
<span class=normal>585</span>
<span class=normal>586</span>
<span class=normal>587</span>
<span class=normal>588</span>
<span class=normal>589</span>
<span class=normal>590</span>
<span class=normal>591</span>
<span class=normal>592</span>
<span class=normal>593</span>
<span class=normal>594</span>
<span class=normal>595</span>
<span class=normal>596</span>
<span class=normal>597</span>
<span class=normal>598</span>
<span class=normal>599</span>
<span class=normal>600</span>
<span class=normal>601</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>rebuild_template</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Go through existing placeholders in scene and update them.</span>

<span class=sd>    This could not make sense for all plugin types so this is optional</span>
<span class=sd>    logic for plugins.</span>

<span class=sd>    Note:</span>
<span class=sd>        Logic is not importing the template again but using placeholders</span>
<span class=sd>            that were already available. We should maybe change the method</span>
<span class=sd>            name.</span>

<span class=sd>    Question:</span>
<span class=sd>        Should this also handle subloops as it is possible that another</span>
<span class=sd>            template is loaded during processing?</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>placeholder_plugins</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;There are no placeholder plugins available.&quot;</span><span class=p>)</span>
        <span class=k>return</span>

    <span class=n>placeholders</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_placeholders</span><span class=p>()</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>placeholders</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;No placeholders were found.&quot;</span><span class=p>)</span>
        <span class=k>return</span>

    <span class=k>for</span> <span class=n>placeholder</span> <span class=ow>in</span> <span class=n>placeholders</span><span class=p>:</span>
        <span class=n>plugin</span> <span class=o>=</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>plugin</span>
        <span class=n>plugin</span><span class=o>.</span><span class=n>repopulate_placeholder</span><span class=p>(</span><span class=n>placeholder</span><span class=p>)</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>clear_shared_populate_data</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.refresh class="doc doc-heading"> <code class="highlight language-python"><span class=n>refresh</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Reset cached data.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>refresh</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Reset cached data.&quot;&quot;&quot;</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_placeholder_plugins</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_loaders_by_name</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_creators_by_name</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_current_folder_entity</span> <span class=o>=</span> <span class=n>_NOT_SET</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_current_task_entity</span> <span class=o>=</span> <span class=n>_NOT_SET</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_linked_folder_entities</span> <span class=o>=</span> <span class=n>_NOT_SET</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_project_settings</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_event_system</span> <span class=o>=</span> <span class=n>EventSystem</span><span class=p>()</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>clear_shared_data</span><span class=p>()</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>clear_shared_populate_data</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.resolve_template_path class="doc doc-heading"> <code class="highlight language-python"><span class=n>resolve_template_path</span><span class=p>(</span><span class=n>path</span><span class=p>,</span> <span class=n>fill_data</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Resolve the template path.</p> <p>By default, this does nothing except returning the path directly.</p> <p>This can be overridden in host integrations to perform additional resolving over the template. Like, <code>hou.text.expandString</code> in Houdini.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>path</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>The input path.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>fill_data</code> </td> <td> <code><span title=dict>dict</span>[<span title=str>str</span>, <span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Data to use for template formatting.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>The resolved path.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>915</span>
<span class=normal>916</span>
<span class=normal>917</span>
<span class=normal>918</span>
<span class=normal>919</span>
<span class=normal>920</span>
<span class=normal>921</span>
<span class=normal>922</span>
<span class=normal>923</span>
<span class=normal>924</span>
<span class=normal>925</span>
<span class=normal>926</span>
<span class=normal>927</span>
<span class=normal>928</span>
<span class=normal>929</span>
<span class=normal>930</span>
<span class=normal>931</span>
<span class=normal>932</span>
<span class=normal>933</span>
<span class=normal>934</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>resolve_template_path</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>path</span><span class=p>,</span> <span class=n>fill_data</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Resolve the template path.</span>

<span class=sd>    By default, this does nothing except returning the path directly.</span>

<span class=sd>    This can be overridden in host integrations to perform additional</span>
<span class=sd>    resolving over the template. Like, `hou.text.expandString` in Houdini.</span>

<span class=sd>    Arguments:</span>
<span class=sd>        path (str): The input path.</span>
<span class=sd>        fill_data (dict[str, str]): Data to use for template formatting.</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: The resolved path.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>result</span> <span class=o>=</span> <span class=n>StringTemplate</span><span class=o>.</span><span class=n>format_template</span><span class=p>(</span><span class=n>path</span><span class=p>,</span> <span class=n>fill_data</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>result</span><span class=o>.</span><span class=n>solved</span><span class=p>:</span>
        <span class=n>path</span> <span class=o>=</span> <span class=n>result</span><span class=o>.</span><span class=n>normalized</span><span class=p>()</span>
    <span class=k>return</span> <span class=n>path</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.save_workfile class="doc doc-heading"> <code class="highlight language-python"><span class=n>save_workfile</span><span class=p>(</span><span class=n>workfile_path</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Save workfile in current host.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>636</span>
<span class=normal>637</span>
<span class=normal>638</span>
<span class=normal>639</span>
<span class=normal>640</span>
<span class=normal>641</span>
<span class=normal>642</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>save_workfile</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>workfile_path</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Save workfile in current host.&quot;&quot;&quot;</span>
    <span class=c1># Save current scene, continue to open file</span>
    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=p>,</span> <span class=n>IWorkfileHost</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=o>.</span><span class=n>save_workfile</span><span class=p>(</span><span class=n>workfile_path</span><span class=p>)</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=o>.</span><span class=n>save_file</span><span class=p>(</span><span class=n>workfile_path</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.set_shared_data class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_shared_data</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Store share data across plugins and placeholders.</p> <p>Store data that can be afterwards accessed from any future call. It is good practice to check if the same value is not already stored under different key or if the key is not already used for something else.</p> <p>Key should be self-explanatory to content. - wrong: 'folder' - good: 'folder_name'</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>key</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Key under which is key stored.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>value</code> </td> <td> <code><span title=Any>Any</span></code> </td> <td> <div class=doc-md-description> <p>Value that should be stored under the key.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>346</span>
<span class=normal>347</span>
<span class=normal>348</span>
<span class=normal>349</span>
<span class=normal>350</span>
<span class=normal>351</span>
<span class=normal>352</span>
<span class=normal>353</span>
<span class=normal>354</span>
<span class=normal>355</span>
<span class=normal>356</span>
<span class=normal>357</span>
<span class=normal>358</span>
<span class=normal>359</span>
<span class=normal>360</span>
<span class=normal>361</span>
<span class=normal>362</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_shared_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Store share data across plugins and placeholders.</span>

<span class=sd>    Store data that can be afterwards accessed from any future call. It</span>
<span class=sd>    is good practice to check if the same value is not already stored under</span>
<span class=sd>    different key or if the key is not already used for something else.</span>

<span class=sd>    Key should be self-explanatory to content.</span>
<span class=sd>    - wrong: &#39;folder&#39;</span>
<span class=sd>    - good: &#39;folder_name&#39;</span>

<span class=sd>    Args:</span>
<span class=sd>        key (str): Key under which is key stored.</span>
<span class=sd>        value (Any): Value that should be stored under the key.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_shared_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.AbstractTemplateBuilder.set_shared_populate_data class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_shared_populate_data</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Store share populate data across plugins and placeholders.</p> <p>These data are cleared after each loop of populating of template.</p> <p>Store data that can be afterwards accessed from any future call. It is good practice to check if the same value is not already stored under different key or if the key is not already used for something else.</p> <p>Key should be self-explanatory to content. - wrong: 'folder' - good: 'folder_path'</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>key</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Key under which is key stored.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>value</code> </td> <td> <code><span title=Any>Any</span></code> </td> <td> <div class=doc-md-description> <p>Value that should be stored under the key.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>410</span>
<span class=normal>411</span>
<span class=normal>412</span>
<span class=normal>413</span>
<span class=normal>414</span>
<span class=normal>415</span>
<span class=normal>416</span>
<span class=normal>417</span>
<span class=normal>418</span>
<span class=normal>419</span>
<span class=normal>420</span>
<span class=normal>421</span>
<span class=normal>422</span>
<span class=normal>423</span>
<span class=normal>424</span>
<span class=normal>425</span>
<span class=normal>426</span>
<span class=normal>427</span>
<span class=normal>428</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_shared_populate_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Store share populate data across plugins and placeholders.</span>

<span class=sd>    These data are cleared after each loop of populating of template.</span>

<span class=sd>    Store data that can be afterwards accessed from any future call. It</span>
<span class=sd>    is good practice to check if the same value is not already stored under</span>
<span class=sd>    different key or if the key is not already used for something else.</span>

<span class=sd>    Key should be self-explanatory to content.</span>
<span class=sd>    - wrong: &#39;folder&#39;</span>
<span class=sd>    - good: &#39;folder_path&#39;</span>

<span class=sd>    Args:</span>
<span class=sd>        key (str): Key under which is key stored.</span>
<span class=sd>        value (Any): Value that should be stored under the key.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_shared_populate_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.workfile.workfile_template_builder.CreatePlaceholderItem class="doc doc-heading"> <code>CreatePlaceholderItem</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="PlaceholderItem (client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem)" href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem>PlaceholderItem</a></code></p> <p>PlaceholderItem for plugin which is creating publish instance.</p> <p>Connected to 'PlaceholderCreateMixin'.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1981</span>
<span class=normal>1982</span>
<span class=normal>1983</span>
<span class=normal>1984</span>
<span class=normal>1985</span>
<span class=normal>1986</span>
<span class=normal>1987</span>
<span class=normal>1988</span>
<span class=normal>1989</span>
<span class=normal>1990</span>
<span class=normal>1991</span>
<span class=normal>1992</span>
<span class=normal>1993</span>
<span class=normal>1994</span>
<span class=normal>1995</span>
<span class=normal>1996</span>
<span class=normal>1997</span>
<span class=normal>1998</span>
<span class=normal>1999</span>
<span class=normal>2000</span>
<span class=normal>2001</span>
<span class=normal>2002</span>
<span class=normal>2003</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>CreatePlaceholderItem</span><span class=p>(</span><span class=n>PlaceholderItem</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;PlaceholderItem for plugin which is creating publish instance.</span>

<span class=sd>    Connected to &#39;PlaceholderCreateMixin&#39;.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>CreatePlaceholderItem</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_failed_created_publish_instances</span> <span class=o>=</span> <span class=p>[]</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_errors</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_failed_created_publish_instances</span><span class=p>:</span>
            <span class=k>return</span> <span class=p>[]</span>
        <span class=n>message</span> <span class=o>=</span> <span class=p>(</span>
            <span class=s2>&quot;Failed to create </span><span class=si>{}</span><span class=s2> instance using Creator </span><span class=si>{}</span><span class=s2>&quot;</span>
        <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
            <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_failed_created_publish_instances</span><span class=p>),</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;creator&quot;</span><span class=p>]</span>
        <span class=p>)</span>
        <span class=k>return</span> <span class=p>[</span><span class=n>message</span><span class=p>]</span>

    <span class=k>def</span><span class=w> </span><span class=nf>create_failed</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>creator_data</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_failed_created_publish_instances</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>creator_data</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.workfile.workfile_template_builder.LoadPlaceholderItem class="doc doc-heading"> <code>LoadPlaceholderItem</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="PlaceholderItem (client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem)" href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem>PlaceholderItem</a></code></p> <p>PlaceholderItem for plugin which is loading representations.</p> <p>Connected to 'PlaceholderLoadMixin'.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1956</span>
<span class=normal>1957</span>
<span class=normal>1958</span>
<span class=normal>1959</span>
<span class=normal>1960</span>
<span class=normal>1961</span>
<span class=normal>1962</span>
<span class=normal>1963</span>
<span class=normal>1964</span>
<span class=normal>1965</span>
<span class=normal>1966</span>
<span class=normal>1967</span>
<span class=normal>1968</span>
<span class=normal>1969</span>
<span class=normal>1970</span>
<span class=normal>1971</span>
<span class=normal>1972</span>
<span class=normal>1973</span>
<span class=normal>1974</span>
<span class=normal>1975</span>
<span class=normal>1976</span>
<span class=normal>1977</span>
<span class=normal>1978</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>LoadPlaceholderItem</span><span class=p>(</span><span class=n>PlaceholderItem</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;PlaceholderItem for plugin which is loading representations.</span>

<span class=sd>    Connected to &#39;PlaceholderLoadMixin&#39;.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>LoadPlaceholderItem</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_failed_representations</span> <span class=o>=</span> <span class=p>[]</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_errors</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_failed_representations</span><span class=p>:</span>
            <span class=k>return</span> <span class=p>[]</span>
        <span class=n>message</span> <span class=o>=</span> <span class=p>(</span>
            <span class=s2>&quot;Failed to load </span><span class=si>{}</span><span class=s2> representations using Loader </span><span class=si>{}</span><span class=s2>&quot;</span>
        <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
            <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_failed_representations</span><span class=p>),</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;loader&quot;</span><span class=p>]</span>
        <span class=p>)</span>
        <span class=k>return</span> <span class=p>[</span><span class=n>message</span><span class=p>]</span>

    <span class=k>def</span><span class=w> </span><span class=nf>load_failed</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>representation</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_failed_representations</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>representation</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderCreateMixin class="doc doc-heading"> <code>PlaceholderCreateMixin</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=object>object</span></code></p> <p>Mixin prepared for creating placeholder plugins.</p> <p>Implementation prepares options for placeholders with 'get_create_plugin_options'.</p> <p>For placeholder population is implemented 'populate_create_placeholder'.</p> <p>PlaceholderItem can have implemented methods: - 'create_failed' - called when creating of an instance failed - 'create_succeed' - called when creating of an instance succeeded</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1751</span>
<span class=normal>1752</span>
<span class=normal>1753</span>
<span class=normal>1754</span>
<span class=normal>1755</span>
<span class=normal>1756</span>
<span class=normal>1757</span>
<span class=normal>1758</span>
<span class=normal>1759</span>
<span class=normal>1760</span>
<span class=normal>1761</span>
<span class=normal>1762</span>
<span class=normal>1763</span>
<span class=normal>1764</span>
<span class=normal>1765</span>
<span class=normal>1766</span>
<span class=normal>1767</span>
<span class=normal>1768</span>
<span class=normal>1769</span>
<span class=normal>1770</span>
<span class=normal>1771</span>
<span class=normal>1772</span>
<span class=normal>1773</span>
<span class=normal>1774</span>
<span class=normal>1775</span>
<span class=normal>1776</span>
<span class=normal>1777</span>
<span class=normal>1778</span>
<span class=normal>1779</span>
<span class=normal>1780</span>
<span class=normal>1781</span>
<span class=normal>1782</span>
<span class=normal>1783</span>
<span class=normal>1784</span>
<span class=normal>1785</span>
<span class=normal>1786</span>
<span class=normal>1787</span>
<span class=normal>1788</span>
<span class=normal>1789</span>
<span class=normal>1790</span>
<span class=normal>1791</span>
<span class=normal>1792</span>
<span class=normal>1793</span>
<span class=normal>1794</span>
<span class=normal>1795</span>
<span class=normal>1796</span>
<span class=normal>1797</span>
<span class=normal>1798</span>
<span class=normal>1799</span>
<span class=normal>1800</span>
<span class=normal>1801</span>
<span class=normal>1802</span>
<span class=normal>1803</span>
<span class=normal>1804</span>
<span class=normal>1805</span>
<span class=normal>1806</span>
<span class=normal>1807</span>
<span class=normal>1808</span>
<span class=normal>1809</span>
<span class=normal>1810</span>
<span class=normal>1811</span>
<span class=normal>1812</span>
<span class=normal>1813</span>
<span class=normal>1814</span>
<span class=normal>1815</span>
<span class=normal>1816</span>
<span class=normal>1817</span>
<span class=normal>1818</span>
<span class=normal>1819</span>
<span class=normal>1820</span>
<span class=normal>1821</span>
<span class=normal>1822</span>
<span class=normal>1823</span>
<span class=normal>1824</span>
<span class=normal>1825</span>
<span class=normal>1826</span>
<span class=normal>1827</span>
<span class=normal>1828</span>
<span class=normal>1829</span>
<span class=normal>1830</span>
<span class=normal>1831</span>
<span class=normal>1832</span>
<span class=normal>1833</span>
<span class=normal>1834</span>
<span class=normal>1835</span>
<span class=normal>1836</span>
<span class=normal>1837</span>
<span class=normal>1838</span>
<span class=normal>1839</span>
<span class=normal>1840</span>
<span class=normal>1841</span>
<span class=normal>1842</span>
<span class=normal>1843</span>
<span class=normal>1844</span>
<span class=normal>1845</span>
<span class=normal>1846</span>
<span class=normal>1847</span>
<span class=normal>1848</span>
<span class=normal>1849</span>
<span class=normal>1850</span>
<span class=normal>1851</span>
<span class=normal>1852</span>
<span class=normal>1853</span>
<span class=normal>1854</span>
<span class=normal>1855</span>
<span class=normal>1856</span>
<span class=normal>1857</span>
<span class=normal>1858</span>
<span class=normal>1859</span>
<span class=normal>1860</span>
<span class=normal>1861</span>
<span class=normal>1862</span>
<span class=normal>1863</span>
<span class=normal>1864</span>
<span class=normal>1865</span>
<span class=normal>1866</span>
<span class=normal>1867</span>
<span class=normal>1868</span>
<span class=normal>1869</span>
<span class=normal>1870</span>
<span class=normal>1871</span>
<span class=normal>1872</span>
<span class=normal>1873</span>
<span class=normal>1874</span>
<span class=normal>1875</span>
<span class=normal>1876</span>
<span class=normal>1877</span>
<span class=normal>1878</span>
<span class=normal>1879</span>
<span class=normal>1880</span>
<span class=normal>1881</span>
<span class=normal>1882</span>
<span class=normal>1883</span>
<span class=normal>1884</span>
<span class=normal>1885</span>
<span class=normal>1886</span>
<span class=normal>1887</span>
<span class=normal>1888</span>
<span class=normal>1889</span>
<span class=normal>1890</span>
<span class=normal>1891</span>
<span class=normal>1892</span>
<span class=normal>1893</span>
<span class=normal>1894</span>
<span class=normal>1895</span>
<span class=normal>1896</span>
<span class=normal>1897</span>
<span class=normal>1898</span>
<span class=normal>1899</span>
<span class=normal>1900</span>
<span class=normal>1901</span>
<span class=normal>1902</span>
<span class=normal>1903</span>
<span class=normal>1904</span>
<span class=normal>1905</span>
<span class=normal>1906</span>
<span class=normal>1907</span>
<span class=normal>1908</span>
<span class=normal>1909</span>
<span class=normal>1910</span>
<span class=normal>1911</span>
<span class=normal>1912</span>
<span class=normal>1913</span>
<span class=normal>1914</span>
<span class=normal>1915</span>
<span class=normal>1916</span>
<span class=normal>1917</span>
<span class=normal>1918</span>
<span class=normal>1919</span>
<span class=normal>1920</span>
<span class=normal>1921</span>
<span class=normal>1922</span>
<span class=normal>1923</span>
<span class=normal>1924</span>
<span class=normal>1925</span>
<span class=normal>1926</span>
<span class=normal>1927</span>
<span class=normal>1928</span>
<span class=normal>1929</span>
<span class=normal>1930</span>
<span class=normal>1931</span>
<span class=normal>1932</span>
<span class=normal>1933</span>
<span class=normal>1934</span>
<span class=normal>1935</span>
<span class=normal>1936</span>
<span class=normal>1937</span>
<span class=normal>1938</span>
<span class=normal>1939</span>
<span class=normal>1940</span>
<span class=normal>1941</span>
<span class=normal>1942</span>
<span class=normal>1943</span>
<span class=normal>1944</span>
<span class=normal>1945</span>
<span class=normal>1946</span>
<span class=normal>1947</span>
<span class=normal>1948</span>
<span class=normal>1949</span>
<span class=normal>1950</span>
<span class=normal>1951</span>
<span class=normal>1952</span>
<span class=normal>1953</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>PlaceholderCreateMixin</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Mixin prepared for creating placeholder plugins.</span>

<span class=sd>    Implementation prepares options for placeholders with</span>
<span class=sd>    &#39;get_create_plugin_options&#39;.</span>

<span class=sd>    For placeholder population is implemented &#39;populate_create_placeholder&#39;.</span>

<span class=sd>    PlaceholderItem can have implemented methods:</span>
<span class=sd>    - &#39;create_failed&#39; - called when creating of an instance failed</span>
<span class=sd>    - &#39;create_succeed&#39; - called when creating of an instance succeeded</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_create_plugin_options</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>options</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Unified attribute definitions for create placeholder.</span>

<span class=sd>        Common function for placeholder plugins used for creating of</span>
<span class=sd>        publishable instances. Use it with &#39;get_placeholder_options&#39;.</span>

<span class=sd>        Args:</span>
<span class=sd>            options (Dict[str, Any]): Already available options which are used</span>
<span class=sd>                as defaults for attributes.</span>

<span class=sd>        Returns:</span>
<span class=sd>            List[AbstractAttrDef]: Attribute definitions common for create</span>
<span class=sd>                plugins.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>creators_by_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>get_creators_by_name</span><span class=p>()</span>

        <span class=n>creator_items</span> <span class=o>=</span> <span class=p>[</span>
            <span class=p>(</span><span class=n>creator_name</span><span class=p>,</span> <span class=n>creator</span><span class=o>.</span><span class=n>label</span> <span class=ow>or</span> <span class=n>creator_name</span><span class=p>)</span>
            <span class=k>for</span> <span class=n>creator_name</span><span class=p>,</span> <span class=n>creator</span> <span class=ow>in</span> <span class=n>creators_by_name</span><span class=o>.</span><span class=n>items</span><span class=p>()</span>
        <span class=p>]</span>

        <span class=n>creator_items</span><span class=o>.</span><span class=n>sort</span><span class=p>(</span><span class=n>key</span><span class=o>=</span><span class=k>lambda</span> <span class=n>i</span><span class=p>:</span> <span class=n>i</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span>
        <span class=n>options</span> <span class=o>=</span> <span class=n>options</span> <span class=ow>or</span> <span class=p>{}</span>
        <span class=k>return</span> <span class=p>[</span>
            <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>UISeparatorDef</span><span class=p>(),</span>
            <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>UILabelDef</span><span class=p>(</span><span class=s2>&quot;Main attributes&quot;</span><span class=p>),</span>
            <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>UISeparatorDef</span><span class=p>(),</span>

            <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>EnumDef</span><span class=p>(</span>
                <span class=s2>&quot;creator&quot;</span><span class=p>,</span>
                <span class=n>label</span><span class=o>=</span><span class=s2>&quot;Creator&quot;</span><span class=p>,</span>
                <span class=n>default</span><span class=o>=</span><span class=n>options</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;creator&quot;</span><span class=p>),</span>
                <span class=n>items</span><span class=o>=</span><span class=n>creator_items</span><span class=p>,</span>
                <span class=n>tooltip</span><span class=o>=</span><span class=p>(</span>
                    <span class=s2>&quot;Creator&quot;</span>
                    <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Defines what AYON creator will be used to&quot;</span>
                    <span class=s2>&quot; create publishable instance.&quot;</span>
                    <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Useable creator depends on current host&#39;s creator list.&quot;</span>
                    <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Field is case sensitive.&quot;</span>
                <span class=p>)</span>
            <span class=p>),</span>
            <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>TextDef</span><span class=p>(</span>
                <span class=s2>&quot;create_variant&quot;</span><span class=p>,</span>
                <span class=n>label</span><span class=o>=</span><span class=s2>&quot;Variant&quot;</span><span class=p>,</span>
                <span class=n>default</span><span class=o>=</span><span class=n>options</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;create_variant&quot;</span><span class=p>),</span>
                <span class=n>placeholder</span><span class=o>=</span><span class=s1>&#39;Main&#39;</span><span class=p>,</span>
                <span class=n>tooltip</span><span class=o>=</span><span class=p>(</span>
                    <span class=s2>&quot;Creator&quot;</span>
                    <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Defines variant name which will be use for &quot;</span>
                    <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>compiling of product name.&quot;</span>
                <span class=p>)</span>
            <span class=p>),</span>
            <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>BoolDef</span><span class=p>(</span>
                <span class=s2>&quot;active&quot;</span><span class=p>,</span>
                <span class=n>label</span><span class=o>=</span><span class=s2>&quot;Active&quot;</span><span class=p>,</span>
                <span class=n>default</span><span class=o>=</span><span class=n>options</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;active&quot;</span><span class=p>,</span> <span class=kc>True</span><span class=p>),</span>
                <span class=n>tooltip</span><span class=o>=</span><span class=p>(</span>
                    <span class=s2>&quot;Active&quot;</span>
                    <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Defines whether the created instance will default to &quot;</span>
                    <span class=s2>&quot;active or not.&quot;</span>
                <span class=p>)</span>
            <span class=p>),</span>
            <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>UISeparatorDef</span><span class=p>(),</span>
            <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>NumberDef</span><span class=p>(</span>
                <span class=s2>&quot;order&quot;</span><span class=p>,</span>
                <span class=n>label</span><span class=o>=</span><span class=s2>&quot;Order&quot;</span><span class=p>,</span>
                <span class=n>default</span><span class=o>=</span><span class=n>options</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;order&quot;</span><span class=p>)</span> <span class=ow>or</span> <span class=mi>0</span><span class=p>,</span>
                <span class=n>decimals</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span>
                <span class=n>minimum</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span>
                <span class=n>maximum</span><span class=o>=</span><span class=mi>999</span><span class=p>,</span>
                <span class=n>tooltip</span><span class=o>=</span><span class=p>(</span>
                    <span class=s2>&quot;Order&quot;</span>
                    <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Order defines creating instance priority (0 to 999)&quot;</span>
                    <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Priority rule is : </span><span class=se>\&quot;</span><span class=s2>lowest is first to load</span><span class=se>\&quot;</span><span class=s2>.&quot;</span>
                <span class=p>)</span>
            <span class=p>)</span>
        <span class=p>]</span>

    <span class=k>def</span><span class=w> </span><span class=nf>populate_create_placeholder</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>placeholder</span><span class=p>,</span> <span class=n>pre_create_data</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Create placeholder is going to create matching publishabe instance.</span>

<span class=sd>        Args:</span>
<span class=sd>            placeholder (PlaceholderItem): Placeholder item with information</span>
<span class=sd>                about requested publishable instance.</span>
<span class=sd>            pre_create_data (dict): dictionary of configuration from Creator</span>
<span class=sd>                configuration in UI</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>legacy_create</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>use_legacy_creators</span>
        <span class=n>creator_name</span> <span class=o>=</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;creator&quot;</span><span class=p>]</span>
        <span class=n>create_variant</span> <span class=o>=</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;create_variant&quot;</span><span class=p>]</span>
        <span class=n>active</span> <span class=o>=</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;active&quot;</span><span class=p>)</span>

        <span class=n>creator_plugin</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>get_creators_by_name</span><span class=p>()[</span><span class=n>creator_name</span><span class=p>]</span>

        <span class=c1># create product name</span>
        <span class=n>context</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_builder</span><span class=o>.</span><span class=n>get_current_context</span><span class=p>()</span>
        <span class=n>project_name</span> <span class=o>=</span> <span class=n>context</span><span class=p>[</span><span class=s2>&quot;project_name&quot;</span><span class=p>]</span>
        <span class=n>folder_path</span> <span class=o>=</span> <span class=n>context</span><span class=p>[</span><span class=s2>&quot;folder_path&quot;</span><span class=p>]</span>
        <span class=n>task_name</span> <span class=o>=</span> <span class=n>context</span><span class=p>[</span><span class=s2>&quot;task_name&quot;</span><span class=p>]</span>
        <span class=n>host_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>host_name</span>

        <span class=n>folder_entity</span> <span class=o>=</span> <span class=n>get_folder_by_path</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=n>folder_path</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>folder_entity</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;Current context does not have set folder&quot;</span><span class=p>)</span>
        <span class=n>task_entity</span> <span class=o>=</span> <span class=n>get_task_by_name</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span> <span class=n>folder_entity</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>],</span> <span class=n>task_name</span>
        <span class=p>)</span>

        <span class=n>product_name</span> <span class=o>=</span> <span class=n>creator_plugin</span><span class=o>.</span><span class=n>get_product_name</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span>
            <span class=n>folder_entity</span><span class=p>,</span>
            <span class=n>task_entity</span><span class=p>,</span>
            <span class=n>create_variant</span><span class=p>,</span>
            <span class=n>host_name</span>
        <span class=p>)</span>

        <span class=n>creator_data</span> <span class=o>=</span> <span class=p>{</span>
            <span class=s2>&quot;creator_name&quot;</span><span class=p>:</span> <span class=n>creator_name</span><span class=p>,</span>
            <span class=s2>&quot;create_variant&quot;</span><span class=p>:</span> <span class=n>create_variant</span><span class=p>,</span>
            <span class=s2>&quot;product_name&quot;</span><span class=p>:</span> <span class=n>product_name</span><span class=p>,</span>
            <span class=s2>&quot;creator_plugin&quot;</span><span class=p>:</span> <span class=n>creator_plugin</span>
        <span class=p>}</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_before_instance_create</span><span class=p>(</span><span class=n>placeholder</span><span class=p>)</span>

        <span class=c1># compile product name from variant</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>legacy_create</span><span class=p>:</span>
                <span class=n>creator_instance</span> <span class=o>=</span> <span class=n>creator_plugin</span><span class=p>(</span>
                    <span class=n>product_name</span><span class=p>,</span>
                    <span class=n>folder_path</span>
                <span class=p>)</span><span class=o>.</span><span class=n>process</span><span class=p>()</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=n>creator_instance</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>create_context</span><span class=o>.</span><span class=n>create</span><span class=p>(</span>
                    <span class=n>creator_plugin</span><span class=o>.</span><span class=n>identifier</span><span class=p>,</span>
                    <span class=n>create_variant</span><span class=p>,</span>
                    <span class=n>folder_entity</span><span class=p>,</span>
                    <span class=n>task_entity</span><span class=p>,</span>
                    <span class=n>pre_create_data</span><span class=o>=</span><span class=n>pre_create_data</span><span class=p>,</span>
                    <span class=n>active</span><span class=o>=</span><span class=n>active</span>
                <span class=p>)</span>

        <span class=k>except</span><span class=p>:</span>  <span class=c1># noqa: E722</span>
            <span class=n>failed</span> <span class=o>=</span> <span class=kc>True</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>create_failed</span><span class=p>(</span><span class=n>placeholder</span><span class=p>,</span> <span class=n>creator_data</span><span class=p>)</span>

        <span class=k>else</span><span class=p>:</span>
            <span class=n>failed</span> <span class=o>=</span> <span class=kc>False</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>create_succeed</span><span class=p>(</span><span class=n>placeholder</span><span class=p>,</span> <span class=n>creator_instance</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>post_placeholder_process</span><span class=p>(</span><span class=n>placeholder</span><span class=p>,</span> <span class=n>failed</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>failed</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
                <span class=s2>&quot;Placeholder cleanup skipped due to failed placeholder &quot;</span>
                <span class=s2>&quot;population.&quot;</span>
            <span class=p>)</span>
            <span class=k>return</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;keep_placeholder&quot;</span><span class=p>,</span> <span class=kc>True</span><span class=p>):</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>delete_placeholder</span><span class=p>(</span><span class=n>placeholder</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>create_failed</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>placeholder</span><span class=p>,</span> <span class=n>creator_data</span><span class=p>):</span>
        <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>placeholder</span><span class=p>,</span> <span class=s2>&quot;create_failed&quot;</span><span class=p>):</span>
            <span class=n>placeholder</span><span class=o>.</span><span class=n>create_failed</span><span class=p>(</span><span class=n>creator_data</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>create_succeed</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>placeholder</span><span class=p>,</span> <span class=n>creator_instance</span><span class=p>):</span>
        <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>placeholder</span><span class=p>,</span> <span class=s2>&quot;create_succeed&quot;</span><span class=p>):</span>
            <span class=n>placeholder</span><span class=o>.</span><span class=n>create_succeed</span><span class=p>(</span><span class=n>creator_instance</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>post_placeholder_process</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>placeholder</span><span class=p>,</span> <span class=n>failed</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Cleanup placeholder after load of its corresponding representations.</span>

<span class=sd>        Args:</span>
<span class=sd>            placeholder (PlaceholderItem): Item which was just used to load</span>
<span class=sd>                representation.</span>
<span class=sd>            failed (bool): Loading of representation failed.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>pass</span>

    <span class=k>def</span><span class=w> </span><span class=nf>delete_placeholder</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>placeholder</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Called when all item population is done.&quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Clean up of placeholder is not implemented.&quot;</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_before_instance_create</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>placeholder</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Can be overridden. Is called before instance is created.&quot;&quot;&quot;</span>

        <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderCreateMixin._before_instance_create class="doc doc-heading"> <code class="highlight language-python"><span class=n>_before_instance_create</span><span class=p>(</span><span class=n>placeholder</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Can be overridden. Is called before instance is created.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1950</span>
<span class=normal>1951</span>
<span class=normal>1952</span>
<span class=normal>1953</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>_before_instance_create</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>placeholder</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Can be overridden. Is called before instance is created.&quot;&quot;&quot;</span>

    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderCreateMixin.delete_placeholder class="doc doc-heading"> <code class="highlight language-python"><span class=n>delete_placeholder</span><span class=p>(</span><span class=n>placeholder</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Called when all item population is done.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1946</span>
<span class=normal>1947</span>
<span class=normal>1948</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>delete_placeholder</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>placeholder</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Called when all item population is done.&quot;&quot;&quot;</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Clean up of placeholder is not implemented.&quot;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderCreateMixin.get_create_plugin_options class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_create_plugin_options</span><span class=p>(</span><span class=n>options</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Unified attribute definitions for create placeholder.</p> <p>Common function for placeholder plugins used for creating of publishable instances. Use it with 'get_placeholder_options'.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>options</code> </td> <td> <code><span title=Dict>Dict</span>[<span title=str>str</span>, <span title=Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Already available options which are used as defaults for attributes.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>List[AbstractAttrDef]: Attribute definitions common for create plugins.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1764</span>
<span class=normal>1765</span>
<span class=normal>1766</span>
<span class=normal>1767</span>
<span class=normal>1768</span>
<span class=normal>1769</span>
<span class=normal>1770</span>
<span class=normal>1771</span>
<span class=normal>1772</span>
<span class=normal>1773</span>
<span class=normal>1774</span>
<span class=normal>1775</span>
<span class=normal>1776</span>
<span class=normal>1777</span>
<span class=normal>1778</span>
<span class=normal>1779</span>
<span class=normal>1780</span>
<span class=normal>1781</span>
<span class=normal>1782</span>
<span class=normal>1783</span>
<span class=normal>1784</span>
<span class=normal>1785</span>
<span class=normal>1786</span>
<span class=normal>1787</span>
<span class=normal>1788</span>
<span class=normal>1789</span>
<span class=normal>1790</span>
<span class=normal>1791</span>
<span class=normal>1792</span>
<span class=normal>1793</span>
<span class=normal>1794</span>
<span class=normal>1795</span>
<span class=normal>1796</span>
<span class=normal>1797</span>
<span class=normal>1798</span>
<span class=normal>1799</span>
<span class=normal>1800</span>
<span class=normal>1801</span>
<span class=normal>1802</span>
<span class=normal>1803</span>
<span class=normal>1804</span>
<span class=normal>1805</span>
<span class=normal>1806</span>
<span class=normal>1807</span>
<span class=normal>1808</span>
<span class=normal>1809</span>
<span class=normal>1810</span>
<span class=normal>1811</span>
<span class=normal>1812</span>
<span class=normal>1813</span>
<span class=normal>1814</span>
<span class=normal>1815</span>
<span class=normal>1816</span>
<span class=normal>1817</span>
<span class=normal>1818</span>
<span class=normal>1819</span>
<span class=normal>1820</span>
<span class=normal>1821</span>
<span class=normal>1822</span>
<span class=normal>1823</span>
<span class=normal>1824</span>
<span class=normal>1825</span>
<span class=normal>1826</span>
<span class=normal>1827</span>
<span class=normal>1828</span>
<span class=normal>1829</span>
<span class=normal>1830</span>
<span class=normal>1831</span>
<span class=normal>1832</span>
<span class=normal>1833</span>
<span class=normal>1834</span>
<span class=normal>1835</span>
<span class=normal>1836</span>
<span class=normal>1837</span>
<span class=normal>1838</span>
<span class=normal>1839</span>
<span class=normal>1840</span>
<span class=normal>1841</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_create_plugin_options</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>options</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Unified attribute definitions for create placeholder.</span>

<span class=sd>    Common function for placeholder plugins used for creating of</span>
<span class=sd>    publishable instances. Use it with &#39;get_placeholder_options&#39;.</span>

<span class=sd>    Args:</span>
<span class=sd>        options (Dict[str, Any]): Already available options which are used</span>
<span class=sd>            as defaults for attributes.</span>

<span class=sd>    Returns:</span>
<span class=sd>        List[AbstractAttrDef]: Attribute definitions common for create</span>
<span class=sd>            plugins.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>creators_by_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>get_creators_by_name</span><span class=p>()</span>

    <span class=n>creator_items</span> <span class=o>=</span> <span class=p>[</span>
        <span class=p>(</span><span class=n>creator_name</span><span class=p>,</span> <span class=n>creator</span><span class=o>.</span><span class=n>label</span> <span class=ow>or</span> <span class=n>creator_name</span><span class=p>)</span>
        <span class=k>for</span> <span class=n>creator_name</span><span class=p>,</span> <span class=n>creator</span> <span class=ow>in</span> <span class=n>creators_by_name</span><span class=o>.</span><span class=n>items</span><span class=p>()</span>
    <span class=p>]</span>

    <span class=n>creator_items</span><span class=o>.</span><span class=n>sort</span><span class=p>(</span><span class=n>key</span><span class=o>=</span><span class=k>lambda</span> <span class=n>i</span><span class=p>:</span> <span class=n>i</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span>
    <span class=n>options</span> <span class=o>=</span> <span class=n>options</span> <span class=ow>or</span> <span class=p>{}</span>
    <span class=k>return</span> <span class=p>[</span>
        <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>UISeparatorDef</span><span class=p>(),</span>
        <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>UILabelDef</span><span class=p>(</span><span class=s2>&quot;Main attributes&quot;</span><span class=p>),</span>
        <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>UISeparatorDef</span><span class=p>(),</span>

        <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>EnumDef</span><span class=p>(</span>
            <span class=s2>&quot;creator&quot;</span><span class=p>,</span>
            <span class=n>label</span><span class=o>=</span><span class=s2>&quot;Creator&quot;</span><span class=p>,</span>
            <span class=n>default</span><span class=o>=</span><span class=n>options</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;creator&quot;</span><span class=p>),</span>
            <span class=n>items</span><span class=o>=</span><span class=n>creator_items</span><span class=p>,</span>
            <span class=n>tooltip</span><span class=o>=</span><span class=p>(</span>
                <span class=s2>&quot;Creator&quot;</span>
                <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Defines what AYON creator will be used to&quot;</span>
                <span class=s2>&quot; create publishable instance.&quot;</span>
                <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Useable creator depends on current host&#39;s creator list.&quot;</span>
                <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Field is case sensitive.&quot;</span>
            <span class=p>)</span>
        <span class=p>),</span>
        <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>TextDef</span><span class=p>(</span>
            <span class=s2>&quot;create_variant&quot;</span><span class=p>,</span>
            <span class=n>label</span><span class=o>=</span><span class=s2>&quot;Variant&quot;</span><span class=p>,</span>
            <span class=n>default</span><span class=o>=</span><span class=n>options</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;create_variant&quot;</span><span class=p>),</span>
            <span class=n>placeholder</span><span class=o>=</span><span class=s1>&#39;Main&#39;</span><span class=p>,</span>
            <span class=n>tooltip</span><span class=o>=</span><span class=p>(</span>
                <span class=s2>&quot;Creator&quot;</span>
                <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Defines variant name which will be use for &quot;</span>
                <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>compiling of product name.&quot;</span>
            <span class=p>)</span>
        <span class=p>),</span>
        <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>BoolDef</span><span class=p>(</span>
            <span class=s2>&quot;active&quot;</span><span class=p>,</span>
            <span class=n>label</span><span class=o>=</span><span class=s2>&quot;Active&quot;</span><span class=p>,</span>
            <span class=n>default</span><span class=o>=</span><span class=n>options</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;active&quot;</span><span class=p>,</span> <span class=kc>True</span><span class=p>),</span>
            <span class=n>tooltip</span><span class=o>=</span><span class=p>(</span>
                <span class=s2>&quot;Active&quot;</span>
                <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Defines whether the created instance will default to &quot;</span>
                <span class=s2>&quot;active or not.&quot;</span>
            <span class=p>)</span>
        <span class=p>),</span>
        <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>UISeparatorDef</span><span class=p>(),</span>
        <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>NumberDef</span><span class=p>(</span>
            <span class=s2>&quot;order&quot;</span><span class=p>,</span>
            <span class=n>label</span><span class=o>=</span><span class=s2>&quot;Order&quot;</span><span class=p>,</span>
            <span class=n>default</span><span class=o>=</span><span class=n>options</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;order&quot;</span><span class=p>)</span> <span class=ow>or</span> <span class=mi>0</span><span class=p>,</span>
            <span class=n>decimals</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span>
            <span class=n>minimum</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span>
            <span class=n>maximum</span><span class=o>=</span><span class=mi>999</span><span class=p>,</span>
            <span class=n>tooltip</span><span class=o>=</span><span class=p>(</span>
                <span class=s2>&quot;Order&quot;</span>
                <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Order defines creating instance priority (0 to 999)&quot;</span>
                <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Priority rule is : </span><span class=se>\&quot;</span><span class=s2>lowest is first to load</span><span class=se>\&quot;</span><span class=s2>.&quot;</span>
            <span class=p>)</span>
        <span class=p>)</span>
    <span class=p>]</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderCreateMixin.populate_create_placeholder class="doc doc-heading"> <code class="highlight language-python"><span class=n>populate_create_placeholder</span><span class=p>(</span><span class=n>placeholder</span><span class=p>,</span> <span class=n>pre_create_data</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Create placeholder is going to create matching publishabe instance.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>placeholder</code> </td> <td> <code><a class="autorefs autorefs-internal" title="PlaceholderItem (client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem)" href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem>PlaceholderItem</a></code> </td> <td> <div class=doc-md-description> <p>Placeholder item with information about requested publishable instance.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>pre_create_data</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>dictionary of configuration from Creator configuration in UI</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1843</span>
<span class=normal>1844</span>
<span class=normal>1845</span>
<span class=normal>1846</span>
<span class=normal>1847</span>
<span class=normal>1848</span>
<span class=normal>1849</span>
<span class=normal>1850</span>
<span class=normal>1851</span>
<span class=normal>1852</span>
<span class=normal>1853</span>
<span class=normal>1854</span>
<span class=normal>1855</span>
<span class=normal>1856</span>
<span class=normal>1857</span>
<span class=normal>1858</span>
<span class=normal>1859</span>
<span class=normal>1860</span>
<span class=normal>1861</span>
<span class=normal>1862</span>
<span class=normal>1863</span>
<span class=normal>1864</span>
<span class=normal>1865</span>
<span class=normal>1866</span>
<span class=normal>1867</span>
<span class=normal>1868</span>
<span class=normal>1869</span>
<span class=normal>1870</span>
<span class=normal>1871</span>
<span class=normal>1872</span>
<span class=normal>1873</span>
<span class=normal>1874</span>
<span class=normal>1875</span>
<span class=normal>1876</span>
<span class=normal>1877</span>
<span class=normal>1878</span>
<span class=normal>1879</span>
<span class=normal>1880</span>
<span class=normal>1881</span>
<span class=normal>1882</span>
<span class=normal>1883</span>
<span class=normal>1884</span>
<span class=normal>1885</span>
<span class=normal>1886</span>
<span class=normal>1887</span>
<span class=normal>1888</span>
<span class=normal>1889</span>
<span class=normal>1890</span>
<span class=normal>1891</span>
<span class=normal>1892</span>
<span class=normal>1893</span>
<span class=normal>1894</span>
<span class=normal>1895</span>
<span class=normal>1896</span>
<span class=normal>1897</span>
<span class=normal>1898</span>
<span class=normal>1899</span>
<span class=normal>1900</span>
<span class=normal>1901</span>
<span class=normal>1902</span>
<span class=normal>1903</span>
<span class=normal>1904</span>
<span class=normal>1905</span>
<span class=normal>1906</span>
<span class=normal>1907</span>
<span class=normal>1908</span>
<span class=normal>1909</span>
<span class=normal>1910</span>
<span class=normal>1911</span>
<span class=normal>1912</span>
<span class=normal>1913</span>
<span class=normal>1914</span>
<span class=normal>1915</span>
<span class=normal>1916</span>
<span class=normal>1917</span>
<span class=normal>1918</span>
<span class=normal>1919</span>
<span class=normal>1920</span>
<span class=normal>1921</span>
<span class=normal>1922</span>
<span class=normal>1923</span>
<span class=normal>1924</span>
<span class=normal>1925</span>
<span class=normal>1926</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>populate_create_placeholder</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>placeholder</span><span class=p>,</span> <span class=n>pre_create_data</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Create placeholder is going to create matching publishabe instance.</span>

<span class=sd>    Args:</span>
<span class=sd>        placeholder (PlaceholderItem): Placeholder item with information</span>
<span class=sd>            about requested publishable instance.</span>
<span class=sd>        pre_create_data (dict): dictionary of configuration from Creator</span>
<span class=sd>            configuration in UI</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>legacy_create</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>use_legacy_creators</span>
    <span class=n>creator_name</span> <span class=o>=</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;creator&quot;</span><span class=p>]</span>
    <span class=n>create_variant</span> <span class=o>=</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;create_variant&quot;</span><span class=p>]</span>
    <span class=n>active</span> <span class=o>=</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;active&quot;</span><span class=p>)</span>

    <span class=n>creator_plugin</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>get_creators_by_name</span><span class=p>()[</span><span class=n>creator_name</span><span class=p>]</span>

    <span class=c1># create product name</span>
    <span class=n>context</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_builder</span><span class=o>.</span><span class=n>get_current_context</span><span class=p>()</span>
    <span class=n>project_name</span> <span class=o>=</span> <span class=n>context</span><span class=p>[</span><span class=s2>&quot;project_name&quot;</span><span class=p>]</span>
    <span class=n>folder_path</span> <span class=o>=</span> <span class=n>context</span><span class=p>[</span><span class=s2>&quot;folder_path&quot;</span><span class=p>]</span>
    <span class=n>task_name</span> <span class=o>=</span> <span class=n>context</span><span class=p>[</span><span class=s2>&quot;task_name&quot;</span><span class=p>]</span>
    <span class=n>host_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>host_name</span>

    <span class=n>folder_entity</span> <span class=o>=</span> <span class=n>get_folder_by_path</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=n>folder_path</span><span class=p>)</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>folder_entity</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;Current context does not have set folder&quot;</span><span class=p>)</span>
    <span class=n>task_entity</span> <span class=o>=</span> <span class=n>get_task_by_name</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span> <span class=n>folder_entity</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>],</span> <span class=n>task_name</span>
    <span class=p>)</span>

    <span class=n>product_name</span> <span class=o>=</span> <span class=n>creator_plugin</span><span class=o>.</span><span class=n>get_product_name</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span>
        <span class=n>folder_entity</span><span class=p>,</span>
        <span class=n>task_entity</span><span class=p>,</span>
        <span class=n>create_variant</span><span class=p>,</span>
        <span class=n>host_name</span>
    <span class=p>)</span>

    <span class=n>creator_data</span> <span class=o>=</span> <span class=p>{</span>
        <span class=s2>&quot;creator_name&quot;</span><span class=p>:</span> <span class=n>creator_name</span><span class=p>,</span>
        <span class=s2>&quot;create_variant&quot;</span><span class=p>:</span> <span class=n>create_variant</span><span class=p>,</span>
        <span class=s2>&quot;product_name&quot;</span><span class=p>:</span> <span class=n>product_name</span><span class=p>,</span>
        <span class=s2>&quot;creator_plugin&quot;</span><span class=p>:</span> <span class=n>creator_plugin</span>
    <span class=p>}</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_before_instance_create</span><span class=p>(</span><span class=n>placeholder</span><span class=p>)</span>

    <span class=c1># compile product name from variant</span>
    <span class=k>try</span><span class=p>:</span>
        <span class=k>if</span> <span class=n>legacy_create</span><span class=p>:</span>
            <span class=n>creator_instance</span> <span class=o>=</span> <span class=n>creator_plugin</span><span class=p>(</span>
                <span class=n>product_name</span><span class=p>,</span>
                <span class=n>folder_path</span>
            <span class=p>)</span><span class=o>.</span><span class=n>process</span><span class=p>()</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>creator_instance</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>create_context</span><span class=o>.</span><span class=n>create</span><span class=p>(</span>
                <span class=n>creator_plugin</span><span class=o>.</span><span class=n>identifier</span><span class=p>,</span>
                <span class=n>create_variant</span><span class=p>,</span>
                <span class=n>folder_entity</span><span class=p>,</span>
                <span class=n>task_entity</span><span class=p>,</span>
                <span class=n>pre_create_data</span><span class=o>=</span><span class=n>pre_create_data</span><span class=p>,</span>
                <span class=n>active</span><span class=o>=</span><span class=n>active</span>
            <span class=p>)</span>

    <span class=k>except</span><span class=p>:</span>  <span class=c1># noqa: E722</span>
        <span class=n>failed</span> <span class=o>=</span> <span class=kc>True</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>create_failed</span><span class=p>(</span><span class=n>placeholder</span><span class=p>,</span> <span class=n>creator_data</span><span class=p>)</span>

    <span class=k>else</span><span class=p>:</span>
        <span class=n>failed</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>create_succeed</span><span class=p>(</span><span class=n>placeholder</span><span class=p>,</span> <span class=n>creator_instance</span><span class=p>)</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>post_placeholder_process</span><span class=p>(</span><span class=n>placeholder</span><span class=p>,</span> <span class=n>failed</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>failed</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
            <span class=s2>&quot;Placeholder cleanup skipped due to failed placeholder &quot;</span>
            <span class=s2>&quot;population.&quot;</span>
        <span class=p>)</span>
        <span class=k>return</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;keep_placeholder&quot;</span><span class=p>,</span> <span class=kc>True</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>delete_placeholder</span><span class=p>(</span><span class=n>placeholder</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderCreateMixin.post_placeholder_process class="doc doc-heading"> <code class="highlight language-python"><span class=n>post_placeholder_process</span><span class=p>(</span><span class=n>placeholder</span><span class=p>,</span> <span class=n>failed</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Cleanup placeholder after load of its corresponding representations.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>placeholder</code> </td> <td> <code><a class="autorefs autorefs-internal" title="PlaceholderItem (client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem)" href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem>PlaceholderItem</a></code> </td> <td> <div class=doc-md-description> <p>Item which was just used to load representation.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>failed</code> </td> <td> <code><span title=bool>bool</span></code> </td> <td> <div class=doc-md-description> <p>Loading of representation failed.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1936</span>
<span class=normal>1937</span>
<span class=normal>1938</span>
<span class=normal>1939</span>
<span class=normal>1940</span>
<span class=normal>1941</span>
<span class=normal>1942</span>
<span class=normal>1943</span>
<span class=normal>1944</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>post_placeholder_process</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>placeholder</span><span class=p>,</span> <span class=n>failed</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Cleanup placeholder after load of its corresponding representations.</span>

<span class=sd>    Args:</span>
<span class=sd>        placeholder (PlaceholderItem): Item which was just used to load</span>
<span class=sd>            representation.</span>
<span class=sd>        failed (bool): Loading of representation failed.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem class="doc doc-heading"> <code>PlaceholderItem</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=object>object</span></code></p> <p>Item representing single item in scene that is a placeholder to process.</p> <p>Items are always created and updated by their plugins. Each plugin can use modified class of 'PlaceholderItem' but only to add more options instead of new other.</p> <p>Scene identifier is used to avoid processing of the placeholder item multiple times so must be unique across whole workfile builder.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>scene_identifier</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Unique scene identifier. If placeholder is created from the same "node" it must have same identifier.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>data</code> </td> <td> <code><span title=Dict>Dict</span>[<span title=str>str</span>, <span title=Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Data related to placeholder. They're defined by plugin.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>plugin</code> </td> <td> <code><a class="autorefs autorefs-internal" title="PlaceholderPlugin (client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin)" href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin>PlaceholderPlugin</a></code> </td> <td> <div class=doc-md-description> <p>Plugin which created the placeholder item.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1190</span>
<span class=normal>1191</span>
<span class=normal>1192</span>
<span class=normal>1193</span>
<span class=normal>1194</span>
<span class=normal>1195</span>
<span class=normal>1196</span>
<span class=normal>1197</span>
<span class=normal>1198</span>
<span class=normal>1199</span>
<span class=normal>1200</span>
<span class=normal>1201</span>
<span class=normal>1202</span>
<span class=normal>1203</span>
<span class=normal>1204</span>
<span class=normal>1205</span>
<span class=normal>1206</span>
<span class=normal>1207</span>
<span class=normal>1208</span>
<span class=normal>1209</span>
<span class=normal>1210</span>
<span class=normal>1211</span>
<span class=normal>1212</span>
<span class=normal>1213</span>
<span class=normal>1214</span>
<span class=normal>1215</span>
<span class=normal>1216</span>
<span class=normal>1217</span>
<span class=normal>1218</span>
<span class=normal>1219</span>
<span class=normal>1220</span>
<span class=normal>1221</span>
<span class=normal>1222</span>
<span class=normal>1223</span>
<span class=normal>1224</span>
<span class=normal>1225</span>
<span class=normal>1226</span>
<span class=normal>1227</span>
<span class=normal>1228</span>
<span class=normal>1229</span>
<span class=normal>1230</span>
<span class=normal>1231</span>
<span class=normal>1232</span>
<span class=normal>1233</span>
<span class=normal>1234</span>
<span class=normal>1235</span>
<span class=normal>1236</span>
<span class=normal>1237</span>
<span class=normal>1238</span>
<span class=normal>1239</span>
<span class=normal>1240</span>
<span class=normal>1241</span>
<span class=normal>1242</span>
<span class=normal>1243</span>
<span class=normal>1244</span>
<span class=normal>1245</span>
<span class=normal>1246</span>
<span class=normal>1247</span>
<span class=normal>1248</span>
<span class=normal>1249</span>
<span class=normal>1250</span>
<span class=normal>1251</span>
<span class=normal>1252</span>
<span class=normal>1253</span>
<span class=normal>1254</span>
<span class=normal>1255</span>
<span class=normal>1256</span>
<span class=normal>1257</span>
<span class=normal>1258</span>
<span class=normal>1259</span>
<span class=normal>1260</span>
<span class=normal>1261</span>
<span class=normal>1262</span>
<span class=normal>1263</span>
<span class=normal>1264</span>
<span class=normal>1265</span>
<span class=normal>1266</span>
<span class=normal>1267</span>
<span class=normal>1268</span>
<span class=normal>1269</span>
<span class=normal>1270</span>
<span class=normal>1271</span>
<span class=normal>1272</span>
<span class=normal>1273</span>
<span class=normal>1274</span>
<span class=normal>1275</span>
<span class=normal>1276</span>
<span class=normal>1277</span>
<span class=normal>1278</span>
<span class=normal>1279</span>
<span class=normal>1280</span>
<span class=normal>1281</span>
<span class=normal>1282</span>
<span class=normal>1283</span>
<span class=normal>1284</span>
<span class=normal>1285</span>
<span class=normal>1286</span>
<span class=normal>1287</span>
<span class=normal>1288</span>
<span class=normal>1289</span>
<span class=normal>1290</span>
<span class=normal>1291</span>
<span class=normal>1292</span>
<span class=normal>1293</span>
<span class=normal>1294</span>
<span class=normal>1295</span>
<span class=normal>1296</span>
<span class=normal>1297</span>
<span class=normal>1298</span>
<span class=normal>1299</span>
<span class=normal>1300</span>
<span class=normal>1301</span>
<span class=normal>1302</span>
<span class=normal>1303</span>
<span class=normal>1304</span>
<span class=normal>1305</span>
<span class=normal>1306</span>
<span class=normal>1307</span>
<span class=normal>1308</span>
<span class=normal>1309</span>
<span class=normal>1310</span>
<span class=normal>1311</span>
<span class=normal>1312</span>
<span class=normal>1313</span>
<span class=normal>1314</span>
<span class=normal>1315</span>
<span class=normal>1316</span>
<span class=normal>1317</span>
<span class=normal>1318</span>
<span class=normal>1319</span>
<span class=normal>1320</span>
<span class=normal>1321</span>
<span class=normal>1322</span>
<span class=normal>1323</span>
<span class=normal>1324</span>
<span class=normal>1325</span>
<span class=normal>1326</span>
<span class=normal>1327</span>
<span class=normal>1328</span>
<span class=normal>1329</span>
<span class=normal>1330</span>
<span class=normal>1331</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>PlaceholderItem</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Item representing single item in scene that is a placeholder to process.</span>

<span class=sd>    Items are always created and updated by their plugins. Each plugin can use</span>
<span class=sd>    modified class of &#39;PlaceholderItem&#39; but only to add more options instead of</span>
<span class=sd>    new other.</span>

<span class=sd>    Scene identifier is used to avoid processing of the placeholder item</span>
<span class=sd>    multiple times so must be unique across whole workfile builder.</span>

<span class=sd>    Args:</span>
<span class=sd>        scene_identifier (str): Unique scene identifier. If placeholder is</span>
<span class=sd>            created from the same &quot;node&quot; it must have same identifier.</span>
<span class=sd>        data (Dict[str, Any]): Data related to placeholder. They&#39;re defined</span>
<span class=sd>            by plugin.</span>
<span class=sd>        plugin (PlaceholderPlugin): Plugin which created the placeholder item.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>default_order</span> <span class=o>=</span> <span class=mi>100</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>scene_identifier</span><span class=p>,</span> <span class=n>data</span><span class=p>,</span> <span class=n>plugin</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_log</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_scene_identifier</span> <span class=o>=</span> <span class=n>scene_identifier</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span> <span class=o>=</span> <span class=n>data</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_plugin</span> <span class=o>=</span> <span class=n>plugin</span>

        <span class=c1># Keep track about state of Placeholder process</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_state</span> <span class=o>=</span> <span class=mi>0</span>

        <span class=c1># Error messages to be shown in UI</span>
        <span class=c1># - all other messages should be logged</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_errors</span> <span class=o>=</span> <span class=p>[]</span>  <span class=c1># -&gt; List[str]</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>plugin</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Access to plugin which created placeholder.</span>

<span class=sd>        Returns:</span>
<span class=sd>            PlaceholderPlugin: Plugin object.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_plugin</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>builder</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Access to builder.</span>

<span class=sd>        Returns:</span>
<span class=sd>            AbstractTemplateBuilder: Builder which is the top part of</span>
<span class=sd>                placeholder.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>plugin</span><span class=o>.</span><span class=n>builder</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Placeholder data which can modify how placeholder is processed.</span>

<span class=sd>        Possible general keys</span>
<span class=sd>        - order: Can define the order in which is placeholder processed.</span>
<span class=sd>                    Lower == earlier.</span>

<span class=sd>        Other keys are defined by placeholder and should validate them on item</span>
<span class=sd>        creation.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Dict[str, Any]: Placeholder item data.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span>

    <span class=k>def</span><span class=w> </span><span class=nf>to_dict</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Create copy of item&#39;s data.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Dict[str, Any]: Placeholder data.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>log</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_log</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_log</span> <span class=o>=</span> <span class=n>Logger</span><span class=o>.</span><span class=n>get_logger</span><span class=p>(</span><span class=nb>repr</span><span class=p>(</span><span class=bp>self</span><span class=p>))</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_log</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__repr__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=s2>&quot;&lt; </span><span class=si>{}</span><span class=s2> </span><span class=si>{}</span><span class=s2> &gt;&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_scene_identifier</span>
        <span class=p>)</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>order</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Order of item processing.&quot;&quot;&quot;</span>

        <span class=n>order</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;order&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>order</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>default_order</span>
        <span class=k>return</span> <span class=n>order</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>scene_identifier</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_scene_identifier</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>finished</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Item was already processed.&quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_state</span> <span class=o>==</span> <span class=mi>2</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>in_progress</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Processing is in progress.&quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_state</span> <span class=o>==</span> <span class=mi>1</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_in_progress</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Change to in progress state.&quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_state</span> <span class=o>=</span> <span class=mi>1</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_finished</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Change to finished state.&quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_state</span> <span class=o>=</span> <span class=mi>2</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_failed</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>exception</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>add_error</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>exception</span><span class=p>))</span>

    <span class=k>def</span><span class=w> </span><span class=nf>add_error</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>error</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Set placeholder item as failed and mark it as finished.&quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_errors</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>error</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_errors</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Exception with which the placeholder process failed.</span>

<span class=sd>        Gives ability to access the exception.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_errors</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem.builder class="doc doc-heading"> <code class="highlight language-python"><span class=n>builder</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Access to builder.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>AbstractTemplateBuilder</code></td> <td> </td> <td> <div class=doc-md-description> <p>Builder which is the top part of placeholder.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem.data class="doc doc-heading"> <code class="highlight language-python"><span class=n>data</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Placeholder data which can modify how placeholder is processed.</p> <p>Possible general keys - order: Can define the order in which is placeholder processed. Lower == earlier.</p> <p>Other keys are defined by placeholder and should validate them on item creation.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Dict[str, Any]: Placeholder item data.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem.finished class="doc doc-heading"> <code class="highlight language-python"><span class=n>finished</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Item was already processed.</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem.in_progress class="doc doc-heading"> <code class="highlight language-python"><span class=n>in_progress</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Processing is in progress.</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem.order class="doc doc-heading"> <code class="highlight language-python"><span class=n>order</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Order of item processing.</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem.plugin class="doc doc-heading"> <code class="highlight language-python"><span class=n>plugin</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Access to plugin which created placeholder.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>PlaceholderPlugin</code></td> <td> </td> <td> <div class=doc-md-description> <p>Plugin object.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem.add_error class="doc doc-heading"> <code class="highlight language-python"><span class=n>add_error</span><span class=p>(</span><span class=n>error</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Set placeholder item as failed and mark it as finished.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1320</span>
<span class=normal>1321</span>
<span class=normal>1322</span>
<span class=normal>1323</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>add_error</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>error</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Set placeholder item as failed and mark it as finished.&quot;&quot;&quot;</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_errors</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>error</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem.get_errors class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_errors</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Exception with which the placeholder process failed.</p> <p>Gives ability to access the exception.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1325</span>
<span class=normal>1326</span>
<span class=normal>1327</span>
<span class=normal>1328</span>
<span class=normal>1329</span>
<span class=normal>1330</span>
<span class=normal>1331</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_errors</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Exception with which the placeholder process failed.</span>

<span class=sd>    Gives ability to access the exception.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_errors</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem.set_finished class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_finished</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Change to finished state.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1312</span>
<span class=normal>1313</span>
<span class=normal>1314</span>
<span class=normal>1315</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_finished</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Change to finished state.&quot;&quot;&quot;</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_state</span> <span class=o>=</span> <span class=mi>2</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem.set_in_progress class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_in_progress</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Change to in progress state.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1307</span>
<span class=normal>1308</span>
<span class=normal>1309</span>
<span class=normal>1310</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_in_progress</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Change to in progress state.&quot;&quot;&quot;</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_state</span> <span class=o>=</span> <span class=mi>1</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem.to_dict class="doc doc-heading"> <code class="highlight language-python"><span class=n>to_dict</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Create copy of item's data.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Dict[str, Any]: Placeholder data.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1261</span>
<span class=normal>1262</span>
<span class=normal>1263</span>
<span class=normal>1264</span>
<span class=normal>1265</span>
<span class=normal>1266</span>
<span class=normal>1267</span>
<span class=normal>1268</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>to_dict</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Create copy of item&#39;s data.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Dict[str, Any]: Placeholder data.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderLoadMixin class="doc doc-heading"> <code>PlaceholderLoadMixin</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=object>object</span></code></p> <p>Mixin prepared for loading placeholder plugins.</p> <p>Implementation prepares options for placeholders with 'get_load_plugin_options'.</p> <p>For placeholder population is implemented 'populate_load_placeholder'.</p> <p>PlaceholderItem can have implemented methods: - 'load_failed' - called when loading of one representation failed - 'load_succeed' - called when loading of one representation succeeded</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1334</span>
<span class=normal>1335</span>
<span class=normal>1336</span>
<span class=normal>1337</span>
<span class=normal>1338</span>
<span class=normal>1339</span>
<span class=normal>1340</span>
<span class=normal>1341</span>
<span class=normal>1342</span>
<span class=normal>1343</span>
<span class=normal>1344</span>
<span class=normal>1345</span>
<span class=normal>1346</span>
<span class=normal>1347</span>
<span class=normal>1348</span>
<span class=normal>1349</span>
<span class=normal>1350</span>
<span class=normal>1351</span>
<span class=normal>1352</span>
<span class=normal>1353</span>
<span class=normal>1354</span>
<span class=normal>1355</span>
<span class=normal>1356</span>
<span class=normal>1357</span>
<span class=normal>1358</span>
<span class=normal>1359</span>
<span class=normal>1360</span>
<span class=normal>1361</span>
<span class=normal>1362</span>
<span class=normal>1363</span>
<span class=normal>1364</span>
<span class=normal>1365</span>
<span class=normal>1366</span>
<span class=normal>1367</span>
<span class=normal>1368</span>
<span class=normal>1369</span>
<span class=normal>1370</span>
<span class=normal>1371</span>
<span class=normal>1372</span>
<span class=normal>1373</span>
<span class=normal>1374</span>
<span class=normal>1375</span>
<span class=normal>1376</span>
<span class=normal>1377</span>
<span class=normal>1378</span>
<span class=normal>1379</span>
<span class=normal>1380</span>
<span class=normal>1381</span>
<span class=normal>1382</span>
<span class=normal>1383</span>
<span class=normal>1384</span>
<span class=normal>1385</span>
<span class=normal>1386</span>
<span class=normal>1387</span>
<span class=normal>1388</span>
<span class=normal>1389</span>
<span class=normal>1390</span>
<span class=normal>1391</span>
<span class=normal>1392</span>
<span class=normal>1393</span>
<span class=normal>1394</span>
<span class=normal>1395</span>
<span class=normal>1396</span>
<span class=normal>1397</span>
<span class=normal>1398</span>
<span class=normal>1399</span>
<span class=normal>1400</span>
<span class=normal>1401</span>
<span class=normal>1402</span>
<span class=normal>1403</span>
<span class=normal>1404</span>
<span class=normal>1405</span>
<span class=normal>1406</span>
<span class=normal>1407</span>
<span class=normal>1408</span>
<span class=normal>1409</span>
<span class=normal>1410</span>
<span class=normal>1411</span>
<span class=normal>1412</span>
<span class=normal>1413</span>
<span class=normal>1414</span>
<span class=normal>1415</span>
<span class=normal>1416</span>
<span class=normal>1417</span>
<span class=normal>1418</span>
<span class=normal>1419</span>
<span class=normal>1420</span>
<span class=normal>1421</span>
<span class=normal>1422</span>
<span class=normal>1423</span>
<span class=normal>1424</span>
<span class=normal>1425</span>
<span class=normal>1426</span>
<span class=normal>1427</span>
<span class=normal>1428</span>
<span class=normal>1429</span>
<span class=normal>1430</span>
<span class=normal>1431</span>
<span class=normal>1432</span>
<span class=normal>1433</span>
<span class=normal>1434</span>
<span class=normal>1435</span>
<span class=normal>1436</span>
<span class=normal>1437</span>
<span class=normal>1438</span>
<span class=normal>1439</span>
<span class=normal>1440</span>
<span class=normal>1441</span>
<span class=normal>1442</span>
<span class=normal>1443</span>
<span class=normal>1444</span>
<span class=normal>1445</span>
<span class=normal>1446</span>
<span class=normal>1447</span>
<span class=normal>1448</span>
<span class=normal>1449</span>
<span class=normal>1450</span>
<span class=normal>1451</span>
<span class=normal>1452</span>
<span class=normal>1453</span>
<span class=normal>1454</span>
<span class=normal>1455</span>
<span class=normal>1456</span>
<span class=normal>1457</span>
<span class=normal>1458</span>
<span class=normal>1459</span>
<span class=normal>1460</span>
<span class=normal>1461</span>
<span class=normal>1462</span>
<span class=normal>1463</span>
<span class=normal>1464</span>
<span class=normal>1465</span>
<span class=normal>1466</span>
<span class=normal>1467</span>
<span class=normal>1468</span>
<span class=normal>1469</span>
<span class=normal>1470</span>
<span class=normal>1471</span>
<span class=normal>1472</span>
<span class=normal>1473</span>
<span class=normal>1474</span>
<span class=normal>1475</span>
<span class=normal>1476</span>
<span class=normal>1477</span>
<span class=normal>1478</span>
<span class=normal>1479</span>
<span class=normal>1480</span>
<span class=normal>1481</span>
<span class=normal>1482</span>
<span class=normal>1483</span>
<span class=normal>1484</span>
<span class=normal>1485</span>
<span class=normal>1486</span>
<span class=normal>1487</span>
<span class=normal>1488</span>
<span class=normal>1489</span>
<span class=normal>1490</span>
<span class=normal>1491</span>
<span class=normal>1492</span>
<span class=normal>1493</span>
<span class=normal>1494</span>
<span class=normal>1495</span>
<span class=normal>1496</span>
<span class=normal>1497</span>
<span class=normal>1498</span>
<span class=normal>1499</span>
<span class=normal>1500</span>
<span class=normal>1501</span>
<span class=normal>1502</span>
<span class=normal>1503</span>
<span class=normal>1504</span>
<span class=normal>1505</span>
<span class=normal>1506</span>
<span class=normal>1507</span>
<span class=normal>1508</span>
<span class=normal>1509</span>
<span class=normal>1510</span>
<span class=normal>1511</span>
<span class=normal>1512</span>
<span class=normal>1513</span>
<span class=normal>1514</span>
<span class=normal>1515</span>
<span class=normal>1516</span>
<span class=normal>1517</span>
<span class=normal>1518</span>
<span class=normal>1519</span>
<span class=normal>1520</span>
<span class=normal>1521</span>
<span class=normal>1522</span>
<span class=normal>1523</span>
<span class=normal>1524</span>
<span class=normal>1525</span>
<span class=normal>1526</span>
<span class=normal>1527</span>
<span class=normal>1528</span>
<span class=normal>1529</span>
<span class=normal>1530</span>
<span class=normal>1531</span>
<span class=normal>1532</span>
<span class=normal>1533</span>
<span class=normal>1534</span>
<span class=normal>1535</span>
<span class=normal>1536</span>
<span class=normal>1537</span>
<span class=normal>1538</span>
<span class=normal>1539</span>
<span class=normal>1540</span>
<span class=normal>1541</span>
<span class=normal>1542</span>
<span class=normal>1543</span>
<span class=normal>1544</span>
<span class=normal>1545</span>
<span class=normal>1546</span>
<span class=normal>1547</span>
<span class=normal>1548</span>
<span class=normal>1549</span>
<span class=normal>1550</span>
<span class=normal>1551</span>
<span class=normal>1552</span>
<span class=normal>1553</span>
<span class=normal>1554</span>
<span class=normal>1555</span>
<span class=normal>1556</span>
<span class=normal>1557</span>
<span class=normal>1558</span>
<span class=normal>1559</span>
<span class=normal>1560</span>
<span class=normal>1561</span>
<span class=normal>1562</span>
<span class=normal>1563</span>
<span class=normal>1564</span>
<span class=normal>1565</span>
<span class=normal>1566</span>
<span class=normal>1567</span>
<span class=normal>1568</span>
<span class=normal>1569</span>
<span class=normal>1570</span>
<span class=normal>1571</span>
<span class=normal>1572</span>
<span class=normal>1573</span>
<span class=normal>1574</span>
<span class=normal>1575</span>
<span class=normal>1576</span>
<span class=normal>1577</span>
<span class=normal>1578</span>
<span class=normal>1579</span>
<span class=normal>1580</span>
<span class=normal>1581</span>
<span class=normal>1582</span>
<span class=normal>1583</span>
<span class=normal>1584</span>
<span class=normal>1585</span>
<span class=normal>1586</span>
<span class=normal>1587</span>
<span class=normal>1588</span>
<span class=normal>1589</span>
<span class=normal>1590</span>
<span class=normal>1591</span>
<span class=normal>1592</span>
<span class=normal>1593</span>
<span class=normal>1594</span>
<span class=normal>1595</span>
<span class=normal>1596</span>
<span class=normal>1597</span>
<span class=normal>1598</span>
<span class=normal>1599</span>
<span class=normal>1600</span>
<span class=normal>1601</span>
<span class=normal>1602</span>
<span class=normal>1603</span>
<span class=normal>1604</span>
<span class=normal>1605</span>
<span class=normal>1606</span>
<span class=normal>1607</span>
<span class=normal>1608</span>
<span class=normal>1609</span>
<span class=normal>1610</span>
<span class=normal>1611</span>
<span class=normal>1612</span>
<span class=normal>1613</span>
<span class=normal>1614</span>
<span class=normal>1615</span>
<span class=normal>1616</span>
<span class=normal>1617</span>
<span class=normal>1618</span>
<span class=normal>1619</span>
<span class=normal>1620</span>
<span class=normal>1621</span>
<span class=normal>1622</span>
<span class=normal>1623</span>
<span class=normal>1624</span>
<span class=normal>1625</span>
<span class=normal>1626</span>
<span class=normal>1627</span>
<span class=normal>1628</span>
<span class=normal>1629</span>
<span class=normal>1630</span>
<span class=normal>1631</span>
<span class=normal>1632</span>
<span class=normal>1633</span>
<span class=normal>1634</span>
<span class=normal>1635</span>
<span class=normal>1636</span>
<span class=normal>1637</span>
<span class=normal>1638</span>
<span class=normal>1639</span>
<span class=normal>1640</span>
<span class=normal>1641</span>
<span class=normal>1642</span>
<span class=normal>1643</span>
<span class=normal>1644</span>
<span class=normal>1645</span>
<span class=normal>1646</span>
<span class=normal>1647</span>
<span class=normal>1648</span>
<span class=normal>1649</span>
<span class=normal>1650</span>
<span class=normal>1651</span>
<span class=normal>1652</span>
<span class=normal>1653</span>
<span class=normal>1654</span>
<span class=normal>1655</span>
<span class=normal>1656</span>
<span class=normal>1657</span>
<span class=normal>1658</span>
<span class=normal>1659</span>
<span class=normal>1660</span>
<span class=normal>1661</span>
<span class=normal>1662</span>
<span class=normal>1663</span>
<span class=normal>1664</span>
<span class=normal>1665</span>
<span class=normal>1666</span>
<span class=normal>1667</span>
<span class=normal>1668</span>
<span class=normal>1669</span>
<span class=normal>1670</span>
<span class=normal>1671</span>
<span class=normal>1672</span>
<span class=normal>1673</span>
<span class=normal>1674</span>
<span class=normal>1675</span>
<span class=normal>1676</span>
<span class=normal>1677</span>
<span class=normal>1678</span>
<span class=normal>1679</span>
<span class=normal>1680</span>
<span class=normal>1681</span>
<span class=normal>1682</span>
<span class=normal>1683</span>
<span class=normal>1684</span>
<span class=normal>1685</span>
<span class=normal>1686</span>
<span class=normal>1687</span>
<span class=normal>1688</span>
<span class=normal>1689</span>
<span class=normal>1690</span>
<span class=normal>1691</span>
<span class=normal>1692</span>
<span class=normal>1693</span>
<span class=normal>1694</span>
<span class=normal>1695</span>
<span class=normal>1696</span>
<span class=normal>1697</span>
<span class=normal>1698</span>
<span class=normal>1699</span>
<span class=normal>1700</span>
<span class=normal>1701</span>
<span class=normal>1702</span>
<span class=normal>1703</span>
<span class=normal>1704</span>
<span class=normal>1705</span>
<span class=normal>1706</span>
<span class=normal>1707</span>
<span class=normal>1708</span>
<span class=normal>1709</span>
<span class=normal>1710</span>
<span class=normal>1711</span>
<span class=normal>1712</span>
<span class=normal>1713</span>
<span class=normal>1714</span>
<span class=normal>1715</span>
<span class=normal>1716</span>
<span class=normal>1717</span>
<span class=normal>1718</span>
<span class=normal>1719</span>
<span class=normal>1720</span>
<span class=normal>1721</span>
<span class=normal>1722</span>
<span class=normal>1723</span>
<span class=normal>1724</span>
<span class=normal>1725</span>
<span class=normal>1726</span>
<span class=normal>1727</span>
<span class=normal>1728</span>
<span class=normal>1729</span>
<span class=normal>1730</span>
<span class=normal>1731</span>
<span class=normal>1732</span>
<span class=normal>1733</span>
<span class=normal>1734</span>
<span class=normal>1735</span>
<span class=normal>1736</span>
<span class=normal>1737</span>
<span class=normal>1738</span>
<span class=normal>1739</span>
<span class=normal>1740</span>
<span class=normal>1741</span>
<span class=normal>1742</span>
<span class=normal>1743</span>
<span class=normal>1744</span>
<span class=normal>1745</span>
<span class=normal>1746</span>
<span class=normal>1747</span>
<span class=normal>1748</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>PlaceholderLoadMixin</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Mixin prepared for loading placeholder plugins.</span>

<span class=sd>    Implementation prepares options for placeholders with</span>
<span class=sd>    &#39;get_load_plugin_options&#39;.</span>

<span class=sd>    For placeholder population is implemented &#39;populate_load_placeholder&#39;.</span>

<span class=sd>    PlaceholderItem can have implemented methods:</span>
<span class=sd>    - &#39;load_failed&#39; - called when loading of one representation failed</span>
<span class=sd>    - &#39;load_succeed&#39; - called when loading of one representation succeeded</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_load_plugin_options</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>options</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Unified attribute definitions for load placeholder.</span>

<span class=sd>        Common function for placeholder plugins used for loading of</span>
<span class=sd>        representations. Use it in &#39;get_placeholder_options&#39;.</span>

<span class=sd>        Args:</span>
<span class=sd>            options (Dict[str, Any]): Already available options which are used</span>
<span class=sd>                as defaults for attributes.</span>

<span class=sd>        Returns:</span>
<span class=sd>            List[AbstractAttrDef]: Attribute definitions common for load</span>
<span class=sd>                plugins.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>loaders_by_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>get_loaders_by_name</span><span class=p>()</span>
        <span class=n>loader_items</span> <span class=o>=</span> <span class=p>[</span>
            <span class=p>{</span><span class=s2>&quot;value&quot;</span><span class=p>:</span> <span class=n>loader_name</span><span class=p>,</span> <span class=s2>&quot;label&quot;</span><span class=p>:</span> <span class=n>loader</span><span class=o>.</span><span class=n>label</span> <span class=ow>or</span> <span class=n>loader_name</span><span class=p>}</span>
            <span class=k>for</span> <span class=n>loader_name</span><span class=p>,</span> <span class=n>loader</span> <span class=ow>in</span> <span class=n>loaders_by_name</span><span class=o>.</span><span class=n>items</span><span class=p>()</span>
        <span class=p>]</span>

        <span class=n>loader_items</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=nb>sorted</span><span class=p>(</span><span class=n>loader_items</span><span class=p>,</span> <span class=n>key</span><span class=o>=</span><span class=k>lambda</span> <span class=n>i</span><span class=p>:</span> <span class=n>i</span><span class=p>[</span><span class=s2>&quot;label&quot;</span><span class=p>]))</span>
        <span class=n>options</span> <span class=o>=</span> <span class=n>options</span> <span class=ow>or</span> <span class=p>{}</span>

        <span class=c1># Get product types from all loaders excluding &quot;*&quot;</span>
        <span class=n>product_types</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
        <span class=k>for</span> <span class=n>loader</span> <span class=ow>in</span> <span class=n>loaders_by_name</span><span class=o>.</span><span class=n>values</span><span class=p>():</span>
            <span class=n>product_types</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>loader</span><span class=o>.</span><span class=n>product_types</span><span class=p>)</span>
        <span class=n>product_types</span><span class=o>.</span><span class=n>discard</span><span class=p>(</span><span class=s2>&quot;*&quot;</span><span class=p>)</span>

        <span class=c1># Sort for readability</span>
        <span class=n>product_types</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=nb>sorted</span><span class=p>(</span><span class=n>product_types</span><span class=p>))</span>

        <span class=n>builder_type_enum_items</span> <span class=o>=</span> <span class=p>[</span>
            <span class=p>{</span><span class=s2>&quot;label&quot;</span><span class=p>:</span> <span class=s2>&quot;Current folder&quot;</span><span class=p>,</span> <span class=s2>&quot;value&quot;</span><span class=p>:</span> <span class=s2>&quot;context_folder&quot;</span><span class=p>},</span>
            <span class=c1># TODO implement linked folders</span>
            <span class=c1># {&quot;label&quot;: &quot;Linked folders&quot;, &quot;value&quot;: &quot;linked_folders&quot;},</span>
            <span class=p>{</span><span class=s2>&quot;label&quot;</span><span class=p>:</span> <span class=s2>&quot;All folders&quot;</span><span class=p>,</span> <span class=s2>&quot;value&quot;</span><span class=p>:</span> <span class=s2>&quot;all_folders&quot;</span><span class=p>},</span>
        <span class=p>]</span>
        <span class=n>build_type_label</span> <span class=o>=</span> <span class=s2>&quot;Folder Builder Type&quot;</span>
        <span class=n>build_type_help</span> <span class=o>=</span> <span class=p>(</span>
            <span class=s2>&quot;Folder Builder Type</span><span class=se>\n</span><span class=s2>&quot;</span>
            <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Builder type describe what template loader will look&quot;</span>
            <span class=s2>&quot; for.&quot;</span>
            <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Current Folder: Template loader will look for products&quot;</span>
            <span class=s2>&quot; of current context folder (Folder /assets/bob will&quot;</span>
            <span class=s2>&quot; find asset)&quot;</span>
            <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>All folders: All folders matching the regex will be&quot;</span>
            <span class=s2>&quot; used.&quot;</span>
        <span class=p>)</span>

        <span class=n>product_type</span> <span class=o>=</span> <span class=n>options</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;product_type&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>product_type</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>product_type</span> <span class=o>=</span> <span class=n>options</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;family&quot;</span><span class=p>)</span>

        <span class=k>return</span> <span class=p>[</span>
            <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>UISeparatorDef</span><span class=p>(),</span>
            <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>UILabelDef</span><span class=p>(</span><span class=s2>&quot;Main attributes&quot;</span><span class=p>),</span>
            <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>UISeparatorDef</span><span class=p>(),</span>

            <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>EnumDef</span><span class=p>(</span>
                <span class=s2>&quot;builder_type&quot;</span><span class=p>,</span>
                <span class=n>label</span><span class=o>=</span><span class=n>build_type_label</span><span class=p>,</span>
                <span class=n>default</span><span class=o>=</span><span class=n>options</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;builder_type&quot;</span><span class=p>),</span>
                <span class=n>items</span><span class=o>=</span><span class=n>builder_type_enum_items</span><span class=p>,</span>
                <span class=n>tooltip</span><span class=o>=</span><span class=n>build_type_help</span>
            <span class=p>),</span>
            <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>EnumDef</span><span class=p>(</span>
                <span class=s2>&quot;product_type&quot;</span><span class=p>,</span>
                <span class=n>label</span><span class=o>=</span><span class=s2>&quot;Product type&quot;</span><span class=p>,</span>
                <span class=n>default</span><span class=o>=</span><span class=n>product_type</span><span class=p>,</span>
                <span class=n>items</span><span class=o>=</span><span class=n>product_types</span>
            <span class=p>),</span>
            <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>TextDef</span><span class=p>(</span>
                <span class=s2>&quot;representation&quot;</span><span class=p>,</span>
                <span class=n>label</span><span class=o>=</span><span class=s2>&quot;Representation name&quot;</span><span class=p>,</span>
                <span class=n>default</span><span class=o>=</span><span class=n>options</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;representation&quot;</span><span class=p>),</span>
                <span class=n>placeholder</span><span class=o>=</span><span class=s2>&quot;ma, abc, ...&quot;</span>
            <span class=p>),</span>
            <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>EnumDef</span><span class=p>(</span>
                <span class=s2>&quot;loader&quot;</span><span class=p>,</span>
                <span class=n>label</span><span class=o>=</span><span class=s2>&quot;Loader&quot;</span><span class=p>,</span>
                <span class=n>default</span><span class=o>=</span><span class=n>options</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;loader&quot;</span><span class=p>),</span>
                <span class=n>items</span><span class=o>=</span><span class=n>loader_items</span><span class=p>,</span>
                <span class=n>tooltip</span><span class=o>=</span><span class=p>(</span>
                    <span class=s2>&quot;Loader&quot;</span>
                    <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Defines what AYON loader will be used to&quot;</span>
                    <span class=s2>&quot; load assets.&quot;</span>
                    <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Useable loader depends on current host&#39;s loader list.&quot;</span>
                    <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Field is case sensitive.&quot;</span>
                <span class=p>)</span>
            <span class=p>),</span>
            <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>TextDef</span><span class=p>(</span>
                <span class=s2>&quot;loader_args&quot;</span><span class=p>,</span>
                <span class=n>label</span><span class=o>=</span><span class=s2>&quot;Loader Arguments&quot;</span><span class=p>,</span>
                <span class=n>default</span><span class=o>=</span><span class=n>options</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;loader_args&quot;</span><span class=p>),</span>
                <span class=n>placeholder</span><span class=o>=</span><span class=s1>&#39;{&quot;camera&quot;:&quot;persp&quot;, &quot;lights&quot;:True}&#39;</span><span class=p>,</span>
                <span class=n>tooltip</span><span class=o>=</span><span class=p>(</span>
                    <span class=s2>&quot;Loader&quot;</span>
                    <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Defines a dictionary of arguments used to load assets.&quot;</span>
                    <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Useable arguments depend on current placeholder Loader.&quot;</span>
                    <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Field should be a valid python dict.&quot;</span>
                    <span class=s2>&quot; Anything else will be ignored.&quot;</span>
                <span class=p>)</span>
            <span class=p>),</span>
            <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>NumberDef</span><span class=p>(</span>
                <span class=s2>&quot;order&quot;</span><span class=p>,</span>
                <span class=n>label</span><span class=o>=</span><span class=s2>&quot;Order&quot;</span><span class=p>,</span>
                <span class=n>default</span><span class=o>=</span><span class=n>options</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;order&quot;</span><span class=p>)</span> <span class=ow>or</span> <span class=mi>0</span><span class=p>,</span>
                <span class=n>decimals</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span>
                <span class=n>minimum</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span>
                <span class=n>maximum</span><span class=o>=</span><span class=mi>999</span><span class=p>,</span>
                <span class=n>tooltip</span><span class=o>=</span><span class=p>(</span>
                    <span class=s2>&quot;Order&quot;</span>
                    <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Order defines asset loading priority (0 to 999)&quot;</span>
                    <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Priority rule is : </span><span class=se>\&quot;</span><span class=s2>lowest is first to load</span><span class=se>\&quot;</span><span class=s2>.&quot;</span>
                <span class=p>)</span>
            <span class=p>),</span>
            <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>UISeparatorDef</span><span class=p>(),</span>
            <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>UILabelDef</span><span class=p>(</span><span class=s2>&quot;Optional attributes&quot;</span><span class=p>),</span>
            <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>UISeparatorDef</span><span class=p>(),</span>
            <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>TextDef</span><span class=p>(</span>
                <span class=s2>&quot;folder_path&quot;</span><span class=p>,</span>
                <span class=n>label</span><span class=o>=</span><span class=s2>&quot;Folder filter&quot;</span><span class=p>,</span>
                <span class=n>default</span><span class=o>=</span><span class=n>options</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;folder_path&quot;</span><span class=p>),</span>
                <span class=n>placeholder</span><span class=o>=</span><span class=s2>&quot;regex filtering by folder path&quot;</span><span class=p>,</span>
                <span class=n>tooltip</span><span class=o>=</span><span class=p>(</span>
                    <span class=s2>&quot;Filtering assets by matching&quot;</span>
                    <span class=s2>&quot; field regex to folder path&quot;</span>
                <span class=p>)</span>
            <span class=p>),</span>
            <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>TextDef</span><span class=p>(</span>
                <span class=s2>&quot;product_name&quot;</span><span class=p>,</span>
                <span class=n>label</span><span class=o>=</span><span class=s2>&quot;Product filter&quot;</span><span class=p>,</span>
                <span class=n>default</span><span class=o>=</span><span class=n>options</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;product_name&quot;</span><span class=p>),</span>
                <span class=n>placeholder</span><span class=o>=</span><span class=s2>&quot;regex filtering by product name&quot;</span><span class=p>,</span>
                <span class=n>tooltip</span><span class=o>=</span><span class=p>(</span>
                    <span class=s2>&quot;Filtering assets by matching&quot;</span>
                    <span class=s2>&quot; field regex to product name&quot;</span>
                <span class=p>)</span>
            <span class=p>),</span>
        <span class=p>]</span>

    <span class=k>def</span><span class=w> </span><span class=nf>parse_loader_args</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>loader_args</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Helper function to parse string of loader arguments.</span>

<span class=sd>        Empty dictionary is returned if conversion fails.</span>

<span class=sd>        Args:</span>
<span class=sd>            loader_args (str): Loader args filled by user.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Dict[str, Any]: Parsed arguments used as dictionary.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>loader_args</span><span class=p>:</span>
            <span class=k>return</span> <span class=p>{}</span>

        <span class=k>try</span><span class=p>:</span>
            <span class=n>parsed_args</span> <span class=o>=</span> <span class=nb>eval</span><span class=p>(</span><span class=n>loader_args</span><span class=p>)</span>
            <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>parsed_args</span><span class=p>,</span> <span class=nb>dict</span><span class=p>):</span>
                <span class=k>return</span> <span class=n>parsed_args</span>

        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>err</span><span class=p>:</span>
            <span class=nb>print</span><span class=p>(</span>
                <span class=s2>&quot;Error while parsing loader arguments &#39;</span><span class=si>{}</span><span class=s2>&#39;.</span><span class=se>\n</span><span class=si>{}</span><span class=s2>: </span><span class=si>{}</span><span class=se>\n\n</span><span class=s2>&quot;</span>
                <span class=s2>&quot;Continuing with default arguments. . .&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                    <span class=n>loader_args</span><span class=p>,</span> <span class=n>err</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=p>,</span> <span class=n>err</span><span class=p>))</span>

        <span class=k>return</span> <span class=p>{}</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_get_representations</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>placeholder</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Prepared query of representations based on load options.</span>

<span class=sd>        This function is directly connected to options defined in</span>
<span class=sd>        &#39;get_load_plugin_options&#39;.</span>

<span class=sd>        Note:</span>
<span class=sd>            This returns all representation documents from all versions of</span>
<span class=sd>                matching product. To filter for last version use</span>
<span class=sd>                &#39;_reduce_last_version_repre_entities&#39;.</span>

<span class=sd>        Args:</span>
<span class=sd>            placeholder (PlaceholderItem): Item which should be populated.</span>

<span class=sd>        Returns:</span>
<span class=sd>            List[Dict[str, Any]]: Representation documents matching filters</span>
<span class=sd>                from placeholder data.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=c1># An OpenPype placeholder loaded in AYON</span>
        <span class=k>if</span> <span class=s2>&quot;asset&quot;</span> <span class=ow>in</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>data</span><span class=p>:</span>
            <span class=k>return</span> <span class=p>[]</span>

        <span class=n>representation_names</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=n>representation_name</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;representation&quot;</span><span class=p>]</span>
        <span class=k>if</span> <span class=n>representation_name</span><span class=p>:</span>
            <span class=n>representation_names</span> <span class=o>=</span> <span class=p>[</span><span class=n>representation_name</span><span class=p>]</span>

        <span class=n>project_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>project_name</span>
        <span class=n>current_folder_entity</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>current_folder_entity</span>

        <span class=n>folder_path_regex</span> <span class=o>=</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;folder_path&quot;</span><span class=p>]</span>
        <span class=n>product_name_regex_value</span> <span class=o>=</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;product_name&quot;</span><span class=p>]</span>
        <span class=n>product_name_regex</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=k>if</span> <span class=n>product_name_regex_value</span><span class=p>:</span>
            <span class=n>product_name_regex</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>compile</span><span class=p>(</span><span class=n>product_name_regex_value</span><span class=p>)</span>
        <span class=n>product_type</span> <span class=o>=</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;product_type&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>product_type</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>product_type</span> <span class=o>=</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;family&quot;</span><span class=p>]</span>

        <span class=n>builder_type</span> <span class=o>=</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;builder_type&quot;</span><span class=p>]</span>
        <span class=n>folder_ids</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>if</span> <span class=n>builder_type</span> <span class=o>==</span> <span class=s2>&quot;context_folder&quot;</span><span class=p>:</span>
            <span class=n>folder_ids</span> <span class=o>=</span> <span class=p>[</span><span class=n>current_folder_entity</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]]</span>

        <span class=k>elif</span> <span class=n>builder_type</span> <span class=o>==</span> <span class=s2>&quot;all_folders&quot;</span><span class=p>:</span>
            <span class=n>folder_ids</span> <span class=o>=</span> <span class=p>{</span>
                <span class=n>folder_entity</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]</span>
                <span class=k>for</span> <span class=n>folder_entity</span> <span class=ow>in</span> <span class=n>get_folders</span><span class=p>(</span>
                    <span class=n>project_name</span><span class=p>,</span>
                    <span class=n>folder_path_regex</span><span class=o>=</span><span class=n>folder_path_regex</span><span class=p>,</span>
                    <span class=n>fields</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;id&quot;</span><span class=p>}</span>
                <span class=p>)</span>
            <span class=p>}</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>folder_ids</span><span class=p>:</span>
            <span class=k>return</span> <span class=p>[]</span>

        <span class=n>products</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>get_products</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span>
            <span class=n>folder_ids</span><span class=o>=</span><span class=n>folder_ids</span><span class=p>,</span>
            <span class=n>product_types</span><span class=o>=</span><span class=p>[</span><span class=n>product_type</span><span class=p>],</span>
            <span class=n>fields</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;id&quot;</span><span class=p>,</span> <span class=s2>&quot;name&quot;</span><span class=p>}</span>
        <span class=p>))</span>
        <span class=n>filtered_product_ids</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
        <span class=k>for</span> <span class=n>product</span> <span class=ow>in</span> <span class=n>products</span><span class=p>:</span>
            <span class=k>if</span> <span class=p>(</span>
                <span class=n>product_name_regex</span> <span class=ow>is</span> <span class=kc>None</span>
                <span class=ow>or</span> <span class=n>product_name_regex</span><span class=o>.</span><span class=n>match</span><span class=p>(</span><span class=n>product</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>])</span>
            <span class=p>):</span>
                <span class=n>filtered_product_ids</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>product</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>])</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>filtered_product_ids</span><span class=p>:</span>
            <span class=k>return</span> <span class=p>[]</span>

        <span class=n>version_ids</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span>
            <span class=n>version</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]</span>
            <span class=k>for</span> <span class=n>version</span> <span class=ow>in</span> <span class=n>get_last_versions</span><span class=p>(</span>
                <span class=n>project_name</span><span class=p>,</span> <span class=n>filtered_product_ids</span><span class=p>,</span> <span class=n>fields</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;id&quot;</span><span class=p>}</span>
            <span class=p>)</span><span class=o>.</span><span class=n>values</span><span class=p>()</span>
        <span class=p>)</span>
        <span class=k>return</span> <span class=nb>list</span><span class=p>(</span><span class=n>get_representations</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span>
            <span class=n>representation_names</span><span class=o>=</span><span class=n>representation_names</span><span class=p>,</span>
            <span class=n>version_ids</span><span class=o>=</span><span class=n>version_ids</span>
        <span class=p>))</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_before_placeholder_load</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>placeholder</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Can be overridden. It&#39;s called before placeholder representations</span>
<span class=sd>        are loaded.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>pass</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_before_repre_load</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>placeholder</span><span class=p>,</span> <span class=n>representation</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Can be overridden. It&#39;s called before representation is loaded.&quot;&quot;&quot;</span>

        <span class=k>pass</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_reduce_last_version_repre_entities</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>repre_contexts</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Reduce representations to last version.&quot;&quot;&quot;</span>

        <span class=n>version_mapping_by_product_id</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=k>for</span> <span class=n>repre_context</span> <span class=ow>in</span> <span class=n>repre_contexts</span><span class=p>:</span>
            <span class=n>product_id</span> <span class=o>=</span> <span class=n>repre_context</span><span class=p>[</span><span class=s2>&quot;product&quot;</span><span class=p>][</span><span class=s2>&quot;id&quot;</span><span class=p>]</span>
            <span class=n>version</span> <span class=o>=</span> <span class=n>repre_context</span><span class=p>[</span><span class=s2>&quot;version&quot;</span><span class=p>][</span><span class=s2>&quot;version&quot;</span><span class=p>]</span>
            <span class=n>version_mapping</span> <span class=o>=</span> <span class=n>version_mapping_by_product_id</span><span class=o>.</span><span class=n>setdefault</span><span class=p>(</span>
                <span class=n>product_id</span><span class=p>,</span> <span class=p>{}</span>
            <span class=p>)</span>
            <span class=n>version_mapping</span><span class=o>.</span><span class=n>setdefault</span><span class=p>(</span><span class=n>version</span><span class=p>,</span> <span class=p>[])</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>repre_context</span><span class=p>)</span>

        <span class=n>output</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>for</span> <span class=n>version_mapping</span> <span class=ow>in</span> <span class=n>version_mapping_by_product_id</span><span class=o>.</span><span class=n>values</span><span class=p>():</span>
            <span class=n>last_version</span> <span class=o>=</span> <span class=nb>max</span><span class=p>(</span><span class=n>version_mapping</span><span class=o>.</span><span class=n>keys</span><span class=p>())</span>
            <span class=n>output</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>version_mapping</span><span class=p>[</span><span class=n>last_version</span><span class=p>])</span>
        <span class=k>return</span> <span class=n>output</span>

    <span class=k>def</span><span class=w> </span><span class=nf>populate_load_placeholder</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>placeholder</span><span class=p>,</span> <span class=n>ignore_repre_ids</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Load placeholder is going to load matching representations.</span>

<span class=sd>        Note:</span>
<span class=sd>            Ignore repre ids is to avoid loading the same representation again</span>
<span class=sd>            on load. But the representation can be loaded with different loader</span>
<span class=sd>            and there could be published new version of matching product for</span>
<span class=sd>            the representation. We should maybe expect containers.</span>

<span class=sd>            Also import loaders don&#39;t have containers at all...</span>

<span class=sd>        Args:</span>
<span class=sd>            placeholder (PlaceholderItem): Placeholder item with information</span>
<span class=sd>                about requested representations.</span>
<span class=sd>            ignore_repre_ids (Iterable[Union[str, ObjectId]]): Representation</span>
<span class=sd>                ids that should be skipped.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>if</span> <span class=n>ignore_repre_ids</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>ignore_repre_ids</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>

        <span class=c1># TODO check loader existence</span>
        <span class=n>loader_name</span> <span class=o>=</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;loader&quot;</span><span class=p>]</span>
        <span class=n>loader_args</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>parse_loader_args</span><span class=p>(</span><span class=n>placeholder</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;loader_args&quot;</span><span class=p>])</span>

        <span class=n>placeholder_representations</span> <span class=o>=</span> <span class=p>[</span>
            <span class=n>repre_entity</span>
            <span class=k>for</span> <span class=n>repre_entity</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_representations</span><span class=p>(</span><span class=n>placeholder</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>repre_entity</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>ignore_repre_ids</span>
        <span class=p>]</span>

        <span class=n>repre_load_contexts</span> <span class=o>=</span> <span class=n>get_representation_contexts</span><span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>project_name</span><span class=p>,</span> <span class=n>placeholder_representations</span>
        <span class=p>)</span>
        <span class=n>filtered_repre_contexts</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_reduce_last_version_repre_entities</span><span class=p>(</span>
            <span class=n>repre_load_contexts</span><span class=o>.</span><span class=n>values</span><span class=p>()</span>
        <span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>filtered_repre_contexts</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>((</span>
                <span class=s2>&quot;There&#39;s no representation for this placeholder: </span><span class=si>{}</span><span class=s2>&quot;</span>
            <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>placeholder</span><span class=o>.</span><span class=n>scene_identifier</span><span class=p>))</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;keep_placeholder&quot;</span><span class=p>,</span> <span class=kc>True</span><span class=p>):</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>delete_placeholder</span><span class=p>(</span><span class=n>placeholder</span><span class=p>)</span>
            <span class=k>return</span>

        <span class=n>loaders_by_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>get_loaders_by_name</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_before_placeholder_load</span><span class=p>(</span>
            <span class=n>placeholder</span>
        <span class=p>)</span>

        <span class=n>failed</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=k>for</span> <span class=n>repre_load_context</span> <span class=ow>in</span> <span class=n>filtered_repre_contexts</span><span class=p>:</span>
            <span class=n>folder_path</span> <span class=o>=</span> <span class=n>repre_load_context</span><span class=p>[</span><span class=s2>&quot;folder&quot;</span><span class=p>][</span><span class=s2>&quot;path&quot;</span><span class=p>]</span>
            <span class=n>product_name</span> <span class=o>=</span> <span class=n>repre_load_context</span><span class=p>[</span><span class=s2>&quot;product&quot;</span><span class=p>][</span><span class=s2>&quot;name&quot;</span><span class=p>]</span>
            <span class=n>representation</span> <span class=o>=</span> <span class=n>repre_load_context</span><span class=p>[</span><span class=s2>&quot;representation&quot;</span><span class=p>]</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_before_repre_load</span><span class=p>(</span>
                <span class=n>placeholder</span><span class=p>,</span> <span class=n>representation</span>
            <span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span>
                <span class=s2>&quot;Loading </span><span class=si>{}</span><span class=s2> from </span><span class=si>{}</span><span class=s2> with loader </span><span class=si>{}</span><span class=se>\n</span><span class=s2>&quot;</span>
                <span class=s2>&quot;Loader arguments used : </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                    <span class=n>product_name</span><span class=p>,</span>
                    <span class=n>folder_path</span><span class=p>,</span>
                    <span class=n>loader_name</span><span class=p>,</span>
                    <span class=n>placeholder</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;loader_args&quot;</span><span class=p>],</span>
                <span class=p>)</span>
            <span class=p>)</span>
            <span class=k>try</span><span class=p>:</span>
                <span class=n>container</span> <span class=o>=</span> <span class=n>load_with_repre_context</span><span class=p>(</span>
                    <span class=n>loaders_by_name</span><span class=p>[</span><span class=n>loader_name</span><span class=p>],</span>
                    <span class=n>repre_load_context</span><span class=p>,</span>
                    <span class=n>options</span><span class=o>=</span><span class=n>loader_args</span>
                <span class=p>)</span>

            <span class=k>except</span> <span class=ne>Exception</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>load_failed</span><span class=p>(</span><span class=n>placeholder</span><span class=p>,</span> <span class=n>representation</span><span class=p>)</span>
                <span class=n>failed</span> <span class=o>=</span> <span class=kc>True</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>load_succeed</span><span class=p>(</span><span class=n>placeholder</span><span class=p>,</span> <span class=n>container</span><span class=p>)</span>

        <span class=c1># Run post placeholder process after load of all representations</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>post_placeholder_process</span><span class=p>(</span><span class=n>placeholder</span><span class=p>,</span> <span class=n>failed</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>failed</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
                <span class=s2>&quot;Placeholder cleanup skipped due to failed placeholder &quot;</span>
                <span class=s2>&quot;population.&quot;</span>
            <span class=p>)</span>
            <span class=k>return</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;keep_placeholder&quot;</span><span class=p>,</span> <span class=kc>True</span><span class=p>):</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>delete_placeholder</span><span class=p>(</span><span class=n>placeholder</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>load_failed</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>placeholder</span><span class=p>,</span> <span class=n>representation</span><span class=p>):</span>
        <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>placeholder</span><span class=p>,</span> <span class=s2>&quot;load_failed&quot;</span><span class=p>):</span>
            <span class=n>placeholder</span><span class=o>.</span><span class=n>load_failed</span><span class=p>(</span><span class=n>representation</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>load_succeed</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>placeholder</span><span class=p>,</span> <span class=n>container</span><span class=p>):</span>
        <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>placeholder</span><span class=p>,</span> <span class=s2>&quot;load_succeed&quot;</span><span class=p>):</span>
            <span class=n>placeholder</span><span class=o>.</span><span class=n>load_succeed</span><span class=p>(</span><span class=n>container</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>post_placeholder_process</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>placeholder</span><span class=p>,</span> <span class=n>failed</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Cleanup placeholder after load of its corresponding representations.</span>

<span class=sd>        Args:</span>
<span class=sd>            placeholder (PlaceholderItem): Item which was just used to load</span>
<span class=sd>                representation.</span>
<span class=sd>            failed (bool): Loading of representation failed.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>pass</span>

    <span class=k>def</span><span class=w> </span><span class=nf>delete_placeholder</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>placeholder</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Called when all item population is done.&quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Clean up of placeholder is not implemented.&quot;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderLoadMixin._before_placeholder_load class="doc doc-heading"> <code class="highlight language-python"><span class=n>_before_placeholder_load</span><span class=p>(</span><span class=n>placeholder</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Can be overridden. It's called before placeholder representations are loaded.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1605</span>
<span class=normal>1606</span>
<span class=normal>1607</span>
<span class=normal>1608</span>
<span class=normal>1609</span>
<span class=normal>1610</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>_before_placeholder_load</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>placeholder</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Can be overridden. It&#39;s called before placeholder representations</span>
<span class=sd>    are loaded.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderLoadMixin._before_repre_load class="doc doc-heading"> <code class="highlight language-python"><span class=n>_before_repre_load</span><span class=p>(</span><span class=n>placeholder</span><span class=p>,</span> <span class=n>representation</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Can be overridden. It's called before representation is loaded.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1612</span>
<span class=normal>1613</span>
<span class=normal>1614</span>
<span class=normal>1615</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>_before_repre_load</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>placeholder</span><span class=p>,</span> <span class=n>representation</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Can be overridden. It&#39;s called before representation is loaded.&quot;&quot;&quot;</span>

    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderLoadMixin._get_representations class="doc doc-heading"> <code class="highlight language-python"><span class=n>_get_representations</span><span class=p>(</span><span class=n>placeholder</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Prepared query of representations based on load options.</p> <p>This function is directly connected to options defined in 'get_load_plugin_options'.</p> <details class=note open> <summary>Note</summary> <p>This returns all representation documents from all versions of matching product. To filter for last version use '_reduce_last_version_repre_entities'.</p> </details> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>placeholder</code> </td> <td> <code><a class="autorefs autorefs-internal" title="PlaceholderItem (client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem)" href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem>PlaceholderItem</a></code> </td> <td> <div class=doc-md-description> <p>Item which should be populated.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>List[Dict[str, Any]]: Representation documents matching filters from placeholder data.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1518</span>
<span class=normal>1519</span>
<span class=normal>1520</span>
<span class=normal>1521</span>
<span class=normal>1522</span>
<span class=normal>1523</span>
<span class=normal>1524</span>
<span class=normal>1525</span>
<span class=normal>1526</span>
<span class=normal>1527</span>
<span class=normal>1528</span>
<span class=normal>1529</span>
<span class=normal>1530</span>
<span class=normal>1531</span>
<span class=normal>1532</span>
<span class=normal>1533</span>
<span class=normal>1534</span>
<span class=normal>1535</span>
<span class=normal>1536</span>
<span class=normal>1537</span>
<span class=normal>1538</span>
<span class=normal>1539</span>
<span class=normal>1540</span>
<span class=normal>1541</span>
<span class=normal>1542</span>
<span class=normal>1543</span>
<span class=normal>1544</span>
<span class=normal>1545</span>
<span class=normal>1546</span>
<span class=normal>1547</span>
<span class=normal>1548</span>
<span class=normal>1549</span>
<span class=normal>1550</span>
<span class=normal>1551</span>
<span class=normal>1552</span>
<span class=normal>1553</span>
<span class=normal>1554</span>
<span class=normal>1555</span>
<span class=normal>1556</span>
<span class=normal>1557</span>
<span class=normal>1558</span>
<span class=normal>1559</span>
<span class=normal>1560</span>
<span class=normal>1561</span>
<span class=normal>1562</span>
<span class=normal>1563</span>
<span class=normal>1564</span>
<span class=normal>1565</span>
<span class=normal>1566</span>
<span class=normal>1567</span>
<span class=normal>1568</span>
<span class=normal>1569</span>
<span class=normal>1570</span>
<span class=normal>1571</span>
<span class=normal>1572</span>
<span class=normal>1573</span>
<span class=normal>1574</span>
<span class=normal>1575</span>
<span class=normal>1576</span>
<span class=normal>1577</span>
<span class=normal>1578</span>
<span class=normal>1579</span>
<span class=normal>1580</span>
<span class=normal>1581</span>
<span class=normal>1582</span>
<span class=normal>1583</span>
<span class=normal>1584</span>
<span class=normal>1585</span>
<span class=normal>1586</span>
<span class=normal>1587</span>
<span class=normal>1588</span>
<span class=normal>1589</span>
<span class=normal>1590</span>
<span class=normal>1591</span>
<span class=normal>1592</span>
<span class=normal>1593</span>
<span class=normal>1594</span>
<span class=normal>1595</span>
<span class=normal>1596</span>
<span class=normal>1597</span>
<span class=normal>1598</span>
<span class=normal>1599</span>
<span class=normal>1600</span>
<span class=normal>1601</span>
<span class=normal>1602</span>
<span class=normal>1603</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>_get_representations</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>placeholder</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Prepared query of representations based on load options.</span>

<span class=sd>    This function is directly connected to options defined in</span>
<span class=sd>    &#39;get_load_plugin_options&#39;.</span>

<span class=sd>    Note:</span>
<span class=sd>        This returns all representation documents from all versions of</span>
<span class=sd>            matching product. To filter for last version use</span>
<span class=sd>            &#39;_reduce_last_version_repre_entities&#39;.</span>

<span class=sd>    Args:</span>
<span class=sd>        placeholder (PlaceholderItem): Item which should be populated.</span>

<span class=sd>    Returns:</span>
<span class=sd>        List[Dict[str, Any]]: Representation documents matching filters</span>
<span class=sd>            from placeholder data.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=c1># An OpenPype placeholder loaded in AYON</span>
    <span class=k>if</span> <span class=s2>&quot;asset&quot;</span> <span class=ow>in</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>data</span><span class=p>:</span>
        <span class=k>return</span> <span class=p>[]</span>

    <span class=n>representation_names</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=n>representation_name</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;representation&quot;</span><span class=p>]</span>
    <span class=k>if</span> <span class=n>representation_name</span><span class=p>:</span>
        <span class=n>representation_names</span> <span class=o>=</span> <span class=p>[</span><span class=n>representation_name</span><span class=p>]</span>

    <span class=n>project_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>project_name</span>
    <span class=n>current_folder_entity</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>current_folder_entity</span>

    <span class=n>folder_path_regex</span> <span class=o>=</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;folder_path&quot;</span><span class=p>]</span>
    <span class=n>product_name_regex_value</span> <span class=o>=</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;product_name&quot;</span><span class=p>]</span>
    <span class=n>product_name_regex</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=k>if</span> <span class=n>product_name_regex_value</span><span class=p>:</span>
        <span class=n>product_name_regex</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>compile</span><span class=p>(</span><span class=n>product_name_regex_value</span><span class=p>)</span>
    <span class=n>product_type</span> <span class=o>=</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;product_type&quot;</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>product_type</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>product_type</span> <span class=o>=</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;family&quot;</span><span class=p>]</span>

    <span class=n>builder_type</span> <span class=o>=</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;builder_type&quot;</span><span class=p>]</span>
    <span class=n>folder_ids</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>if</span> <span class=n>builder_type</span> <span class=o>==</span> <span class=s2>&quot;context_folder&quot;</span><span class=p>:</span>
        <span class=n>folder_ids</span> <span class=o>=</span> <span class=p>[</span><span class=n>current_folder_entity</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]]</span>

    <span class=k>elif</span> <span class=n>builder_type</span> <span class=o>==</span> <span class=s2>&quot;all_folders&quot;</span><span class=p>:</span>
        <span class=n>folder_ids</span> <span class=o>=</span> <span class=p>{</span>
            <span class=n>folder_entity</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]</span>
            <span class=k>for</span> <span class=n>folder_entity</span> <span class=ow>in</span> <span class=n>get_folders</span><span class=p>(</span>
                <span class=n>project_name</span><span class=p>,</span>
                <span class=n>folder_path_regex</span><span class=o>=</span><span class=n>folder_path_regex</span><span class=p>,</span>
                <span class=n>fields</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;id&quot;</span><span class=p>}</span>
            <span class=p>)</span>
        <span class=p>}</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>folder_ids</span><span class=p>:</span>
        <span class=k>return</span> <span class=p>[]</span>

    <span class=n>products</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>get_products</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span>
        <span class=n>folder_ids</span><span class=o>=</span><span class=n>folder_ids</span><span class=p>,</span>
        <span class=n>product_types</span><span class=o>=</span><span class=p>[</span><span class=n>product_type</span><span class=p>],</span>
        <span class=n>fields</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;id&quot;</span><span class=p>,</span> <span class=s2>&quot;name&quot;</span><span class=p>}</span>
    <span class=p>))</span>
    <span class=n>filtered_product_ids</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
    <span class=k>for</span> <span class=n>product</span> <span class=ow>in</span> <span class=n>products</span><span class=p>:</span>
        <span class=k>if</span> <span class=p>(</span>
            <span class=n>product_name_regex</span> <span class=ow>is</span> <span class=kc>None</span>
            <span class=ow>or</span> <span class=n>product_name_regex</span><span class=o>.</span><span class=n>match</span><span class=p>(</span><span class=n>product</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>])</span>
        <span class=p>):</span>
            <span class=n>filtered_product_ids</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>product</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>])</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>filtered_product_ids</span><span class=p>:</span>
        <span class=k>return</span> <span class=p>[]</span>

    <span class=n>version_ids</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span>
        <span class=n>version</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]</span>
        <span class=k>for</span> <span class=n>version</span> <span class=ow>in</span> <span class=n>get_last_versions</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span> <span class=n>filtered_product_ids</span><span class=p>,</span> <span class=n>fields</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;id&quot;</span><span class=p>}</span>
        <span class=p>)</span><span class=o>.</span><span class=n>values</span><span class=p>()</span>
    <span class=p>)</span>
    <span class=k>return</span> <span class=nb>list</span><span class=p>(</span><span class=n>get_representations</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span>
        <span class=n>representation_names</span><span class=o>=</span><span class=n>representation_names</span><span class=p>,</span>
        <span class=n>version_ids</span><span class=o>=</span><span class=n>version_ids</span>
    <span class=p>))</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderLoadMixin._reduce_last_version_repre_entities class="doc doc-heading"> <code class="highlight language-python"><span class=n>_reduce_last_version_repre_entities</span><span class=p>(</span><span class=n>repre_contexts</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Reduce representations to last version.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1617</span>
<span class=normal>1618</span>
<span class=normal>1619</span>
<span class=normal>1620</span>
<span class=normal>1621</span>
<span class=normal>1622</span>
<span class=normal>1623</span>
<span class=normal>1624</span>
<span class=normal>1625</span>
<span class=normal>1626</span>
<span class=normal>1627</span>
<span class=normal>1628</span>
<span class=normal>1629</span>
<span class=normal>1630</span>
<span class=normal>1631</span>
<span class=normal>1632</span>
<span class=normal>1633</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>_reduce_last_version_repre_entities</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>repre_contexts</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Reduce representations to last version.&quot;&quot;&quot;</span>

    <span class=n>version_mapping_by_product_id</span> <span class=o>=</span> <span class=p>{}</span>
    <span class=k>for</span> <span class=n>repre_context</span> <span class=ow>in</span> <span class=n>repre_contexts</span><span class=p>:</span>
        <span class=n>product_id</span> <span class=o>=</span> <span class=n>repre_context</span><span class=p>[</span><span class=s2>&quot;product&quot;</span><span class=p>][</span><span class=s2>&quot;id&quot;</span><span class=p>]</span>
        <span class=n>version</span> <span class=o>=</span> <span class=n>repre_context</span><span class=p>[</span><span class=s2>&quot;version&quot;</span><span class=p>][</span><span class=s2>&quot;version&quot;</span><span class=p>]</span>
        <span class=n>version_mapping</span> <span class=o>=</span> <span class=n>version_mapping_by_product_id</span><span class=o>.</span><span class=n>setdefault</span><span class=p>(</span>
            <span class=n>product_id</span><span class=p>,</span> <span class=p>{}</span>
        <span class=p>)</span>
        <span class=n>version_mapping</span><span class=o>.</span><span class=n>setdefault</span><span class=p>(</span><span class=n>version</span><span class=p>,</span> <span class=p>[])</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>repre_context</span><span class=p>)</span>

    <span class=n>output</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>for</span> <span class=n>version_mapping</span> <span class=ow>in</span> <span class=n>version_mapping_by_product_id</span><span class=o>.</span><span class=n>values</span><span class=p>():</span>
        <span class=n>last_version</span> <span class=o>=</span> <span class=nb>max</span><span class=p>(</span><span class=n>version_mapping</span><span class=o>.</span><span class=n>keys</span><span class=p>())</span>
        <span class=n>output</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>version_mapping</span><span class=p>[</span><span class=n>last_version</span><span class=p>])</span>
    <span class=k>return</span> <span class=n>output</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderLoadMixin.delete_placeholder class="doc doc-heading"> <code class="highlight language-python"><span class=n>delete_placeholder</span><span class=p>(</span><span class=n>placeholder</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Called when all item population is done.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1746</span>
<span class=normal>1747</span>
<span class=normal>1748</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>delete_placeholder</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>placeholder</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Called when all item population is done.&quot;&quot;&quot;</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Clean up of placeholder is not implemented.&quot;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderLoadMixin.get_load_plugin_options class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_load_plugin_options</span><span class=p>(</span><span class=n>options</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Unified attribute definitions for load placeholder.</p> <p>Common function for placeholder plugins used for loading of representations. Use it in 'get_placeholder_options'.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>options</code> </td> <td> <code><span title=Dict>Dict</span>[<span title=str>str</span>, <span title=Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Already available options which are used as defaults for attributes.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>List[AbstractAttrDef]: Attribute definitions common for load plugins.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1347</span>
<span class=normal>1348</span>
<span class=normal>1349</span>
<span class=normal>1350</span>
<span class=normal>1351</span>
<span class=normal>1352</span>
<span class=normal>1353</span>
<span class=normal>1354</span>
<span class=normal>1355</span>
<span class=normal>1356</span>
<span class=normal>1357</span>
<span class=normal>1358</span>
<span class=normal>1359</span>
<span class=normal>1360</span>
<span class=normal>1361</span>
<span class=normal>1362</span>
<span class=normal>1363</span>
<span class=normal>1364</span>
<span class=normal>1365</span>
<span class=normal>1366</span>
<span class=normal>1367</span>
<span class=normal>1368</span>
<span class=normal>1369</span>
<span class=normal>1370</span>
<span class=normal>1371</span>
<span class=normal>1372</span>
<span class=normal>1373</span>
<span class=normal>1374</span>
<span class=normal>1375</span>
<span class=normal>1376</span>
<span class=normal>1377</span>
<span class=normal>1378</span>
<span class=normal>1379</span>
<span class=normal>1380</span>
<span class=normal>1381</span>
<span class=normal>1382</span>
<span class=normal>1383</span>
<span class=normal>1384</span>
<span class=normal>1385</span>
<span class=normal>1386</span>
<span class=normal>1387</span>
<span class=normal>1388</span>
<span class=normal>1389</span>
<span class=normal>1390</span>
<span class=normal>1391</span>
<span class=normal>1392</span>
<span class=normal>1393</span>
<span class=normal>1394</span>
<span class=normal>1395</span>
<span class=normal>1396</span>
<span class=normal>1397</span>
<span class=normal>1398</span>
<span class=normal>1399</span>
<span class=normal>1400</span>
<span class=normal>1401</span>
<span class=normal>1402</span>
<span class=normal>1403</span>
<span class=normal>1404</span>
<span class=normal>1405</span>
<span class=normal>1406</span>
<span class=normal>1407</span>
<span class=normal>1408</span>
<span class=normal>1409</span>
<span class=normal>1410</span>
<span class=normal>1411</span>
<span class=normal>1412</span>
<span class=normal>1413</span>
<span class=normal>1414</span>
<span class=normal>1415</span>
<span class=normal>1416</span>
<span class=normal>1417</span>
<span class=normal>1418</span>
<span class=normal>1419</span>
<span class=normal>1420</span>
<span class=normal>1421</span>
<span class=normal>1422</span>
<span class=normal>1423</span>
<span class=normal>1424</span>
<span class=normal>1425</span>
<span class=normal>1426</span>
<span class=normal>1427</span>
<span class=normal>1428</span>
<span class=normal>1429</span>
<span class=normal>1430</span>
<span class=normal>1431</span>
<span class=normal>1432</span>
<span class=normal>1433</span>
<span class=normal>1434</span>
<span class=normal>1435</span>
<span class=normal>1436</span>
<span class=normal>1437</span>
<span class=normal>1438</span>
<span class=normal>1439</span>
<span class=normal>1440</span>
<span class=normal>1441</span>
<span class=normal>1442</span>
<span class=normal>1443</span>
<span class=normal>1444</span>
<span class=normal>1445</span>
<span class=normal>1446</span>
<span class=normal>1447</span>
<span class=normal>1448</span>
<span class=normal>1449</span>
<span class=normal>1450</span>
<span class=normal>1451</span>
<span class=normal>1452</span>
<span class=normal>1453</span>
<span class=normal>1454</span>
<span class=normal>1455</span>
<span class=normal>1456</span>
<span class=normal>1457</span>
<span class=normal>1458</span>
<span class=normal>1459</span>
<span class=normal>1460</span>
<span class=normal>1461</span>
<span class=normal>1462</span>
<span class=normal>1463</span>
<span class=normal>1464</span>
<span class=normal>1465</span>
<span class=normal>1466</span>
<span class=normal>1467</span>
<span class=normal>1468</span>
<span class=normal>1469</span>
<span class=normal>1470</span>
<span class=normal>1471</span>
<span class=normal>1472</span>
<span class=normal>1473</span>
<span class=normal>1474</span>
<span class=normal>1475</span>
<span class=normal>1476</span>
<span class=normal>1477</span>
<span class=normal>1478</span>
<span class=normal>1479</span>
<span class=normal>1480</span>
<span class=normal>1481</span>
<span class=normal>1482</span>
<span class=normal>1483</span>
<span class=normal>1484</span>
<span class=normal>1485</span>
<span class=normal>1486</span>
<span class=normal>1487</span>
<span class=normal>1488</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_load_plugin_options</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>options</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Unified attribute definitions for load placeholder.</span>

<span class=sd>    Common function for placeholder plugins used for loading of</span>
<span class=sd>    representations. Use it in &#39;get_placeholder_options&#39;.</span>

<span class=sd>    Args:</span>
<span class=sd>        options (Dict[str, Any]): Already available options which are used</span>
<span class=sd>            as defaults for attributes.</span>

<span class=sd>    Returns:</span>
<span class=sd>        List[AbstractAttrDef]: Attribute definitions common for load</span>
<span class=sd>            plugins.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>loaders_by_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>get_loaders_by_name</span><span class=p>()</span>
    <span class=n>loader_items</span> <span class=o>=</span> <span class=p>[</span>
        <span class=p>{</span><span class=s2>&quot;value&quot;</span><span class=p>:</span> <span class=n>loader_name</span><span class=p>,</span> <span class=s2>&quot;label&quot;</span><span class=p>:</span> <span class=n>loader</span><span class=o>.</span><span class=n>label</span> <span class=ow>or</span> <span class=n>loader_name</span><span class=p>}</span>
        <span class=k>for</span> <span class=n>loader_name</span><span class=p>,</span> <span class=n>loader</span> <span class=ow>in</span> <span class=n>loaders_by_name</span><span class=o>.</span><span class=n>items</span><span class=p>()</span>
    <span class=p>]</span>

    <span class=n>loader_items</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=nb>sorted</span><span class=p>(</span><span class=n>loader_items</span><span class=p>,</span> <span class=n>key</span><span class=o>=</span><span class=k>lambda</span> <span class=n>i</span><span class=p>:</span> <span class=n>i</span><span class=p>[</span><span class=s2>&quot;label&quot;</span><span class=p>]))</span>
    <span class=n>options</span> <span class=o>=</span> <span class=n>options</span> <span class=ow>or</span> <span class=p>{}</span>

    <span class=c1># Get product types from all loaders excluding &quot;*&quot;</span>
    <span class=n>product_types</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
    <span class=k>for</span> <span class=n>loader</span> <span class=ow>in</span> <span class=n>loaders_by_name</span><span class=o>.</span><span class=n>values</span><span class=p>():</span>
        <span class=n>product_types</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>loader</span><span class=o>.</span><span class=n>product_types</span><span class=p>)</span>
    <span class=n>product_types</span><span class=o>.</span><span class=n>discard</span><span class=p>(</span><span class=s2>&quot;*&quot;</span><span class=p>)</span>

    <span class=c1># Sort for readability</span>
    <span class=n>product_types</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=nb>sorted</span><span class=p>(</span><span class=n>product_types</span><span class=p>))</span>

    <span class=n>builder_type_enum_items</span> <span class=o>=</span> <span class=p>[</span>
        <span class=p>{</span><span class=s2>&quot;label&quot;</span><span class=p>:</span> <span class=s2>&quot;Current folder&quot;</span><span class=p>,</span> <span class=s2>&quot;value&quot;</span><span class=p>:</span> <span class=s2>&quot;context_folder&quot;</span><span class=p>},</span>
        <span class=c1># TODO implement linked folders</span>
        <span class=c1># {&quot;label&quot;: &quot;Linked folders&quot;, &quot;value&quot;: &quot;linked_folders&quot;},</span>
        <span class=p>{</span><span class=s2>&quot;label&quot;</span><span class=p>:</span> <span class=s2>&quot;All folders&quot;</span><span class=p>,</span> <span class=s2>&quot;value&quot;</span><span class=p>:</span> <span class=s2>&quot;all_folders&quot;</span><span class=p>},</span>
    <span class=p>]</span>
    <span class=n>build_type_label</span> <span class=o>=</span> <span class=s2>&quot;Folder Builder Type&quot;</span>
    <span class=n>build_type_help</span> <span class=o>=</span> <span class=p>(</span>
        <span class=s2>&quot;Folder Builder Type</span><span class=se>\n</span><span class=s2>&quot;</span>
        <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Builder type describe what template loader will look&quot;</span>
        <span class=s2>&quot; for.&quot;</span>
        <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Current Folder: Template loader will look for products&quot;</span>
        <span class=s2>&quot; of current context folder (Folder /assets/bob will&quot;</span>
        <span class=s2>&quot; find asset)&quot;</span>
        <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>All folders: All folders matching the regex will be&quot;</span>
        <span class=s2>&quot; used.&quot;</span>
    <span class=p>)</span>

    <span class=n>product_type</span> <span class=o>=</span> <span class=n>options</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;product_type&quot;</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>product_type</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>product_type</span> <span class=o>=</span> <span class=n>options</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;family&quot;</span><span class=p>)</span>

    <span class=k>return</span> <span class=p>[</span>
        <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>UISeparatorDef</span><span class=p>(),</span>
        <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>UILabelDef</span><span class=p>(</span><span class=s2>&quot;Main attributes&quot;</span><span class=p>),</span>
        <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>UISeparatorDef</span><span class=p>(),</span>

        <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>EnumDef</span><span class=p>(</span>
            <span class=s2>&quot;builder_type&quot;</span><span class=p>,</span>
            <span class=n>label</span><span class=o>=</span><span class=n>build_type_label</span><span class=p>,</span>
            <span class=n>default</span><span class=o>=</span><span class=n>options</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;builder_type&quot;</span><span class=p>),</span>
            <span class=n>items</span><span class=o>=</span><span class=n>builder_type_enum_items</span><span class=p>,</span>
            <span class=n>tooltip</span><span class=o>=</span><span class=n>build_type_help</span>
        <span class=p>),</span>
        <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>EnumDef</span><span class=p>(</span>
            <span class=s2>&quot;product_type&quot;</span><span class=p>,</span>
            <span class=n>label</span><span class=o>=</span><span class=s2>&quot;Product type&quot;</span><span class=p>,</span>
            <span class=n>default</span><span class=o>=</span><span class=n>product_type</span><span class=p>,</span>
            <span class=n>items</span><span class=o>=</span><span class=n>product_types</span>
        <span class=p>),</span>
        <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>TextDef</span><span class=p>(</span>
            <span class=s2>&quot;representation&quot;</span><span class=p>,</span>
            <span class=n>label</span><span class=o>=</span><span class=s2>&quot;Representation name&quot;</span><span class=p>,</span>
            <span class=n>default</span><span class=o>=</span><span class=n>options</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;representation&quot;</span><span class=p>),</span>
            <span class=n>placeholder</span><span class=o>=</span><span class=s2>&quot;ma, abc, ...&quot;</span>
        <span class=p>),</span>
        <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>EnumDef</span><span class=p>(</span>
            <span class=s2>&quot;loader&quot;</span><span class=p>,</span>
            <span class=n>label</span><span class=o>=</span><span class=s2>&quot;Loader&quot;</span><span class=p>,</span>
            <span class=n>default</span><span class=o>=</span><span class=n>options</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;loader&quot;</span><span class=p>),</span>
            <span class=n>items</span><span class=o>=</span><span class=n>loader_items</span><span class=p>,</span>
            <span class=n>tooltip</span><span class=o>=</span><span class=p>(</span>
                <span class=s2>&quot;Loader&quot;</span>
                <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Defines what AYON loader will be used to&quot;</span>
                <span class=s2>&quot; load assets.&quot;</span>
                <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Useable loader depends on current host&#39;s loader list.&quot;</span>
                <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Field is case sensitive.&quot;</span>
            <span class=p>)</span>
        <span class=p>),</span>
        <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>TextDef</span><span class=p>(</span>
            <span class=s2>&quot;loader_args&quot;</span><span class=p>,</span>
            <span class=n>label</span><span class=o>=</span><span class=s2>&quot;Loader Arguments&quot;</span><span class=p>,</span>
            <span class=n>default</span><span class=o>=</span><span class=n>options</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;loader_args&quot;</span><span class=p>),</span>
            <span class=n>placeholder</span><span class=o>=</span><span class=s1>&#39;{&quot;camera&quot;:&quot;persp&quot;, &quot;lights&quot;:True}&#39;</span><span class=p>,</span>
            <span class=n>tooltip</span><span class=o>=</span><span class=p>(</span>
                <span class=s2>&quot;Loader&quot;</span>
                <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Defines a dictionary of arguments used to load assets.&quot;</span>
                <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Useable arguments depend on current placeholder Loader.&quot;</span>
                <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Field should be a valid python dict.&quot;</span>
                <span class=s2>&quot; Anything else will be ignored.&quot;</span>
            <span class=p>)</span>
        <span class=p>),</span>
        <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>NumberDef</span><span class=p>(</span>
            <span class=s2>&quot;order&quot;</span><span class=p>,</span>
            <span class=n>label</span><span class=o>=</span><span class=s2>&quot;Order&quot;</span><span class=p>,</span>
            <span class=n>default</span><span class=o>=</span><span class=n>options</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;order&quot;</span><span class=p>)</span> <span class=ow>or</span> <span class=mi>0</span><span class=p>,</span>
            <span class=n>decimals</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span>
            <span class=n>minimum</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span>
            <span class=n>maximum</span><span class=o>=</span><span class=mi>999</span><span class=p>,</span>
            <span class=n>tooltip</span><span class=o>=</span><span class=p>(</span>
                <span class=s2>&quot;Order&quot;</span>
                <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Order defines asset loading priority (0 to 999)&quot;</span>
                <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>Priority rule is : </span><span class=se>\&quot;</span><span class=s2>lowest is first to load</span><span class=se>\&quot;</span><span class=s2>.&quot;</span>
            <span class=p>)</span>
        <span class=p>),</span>
        <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>UISeparatorDef</span><span class=p>(),</span>
        <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>UILabelDef</span><span class=p>(</span><span class=s2>&quot;Optional attributes&quot;</span><span class=p>),</span>
        <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>UISeparatorDef</span><span class=p>(),</span>
        <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>TextDef</span><span class=p>(</span>
            <span class=s2>&quot;folder_path&quot;</span><span class=p>,</span>
            <span class=n>label</span><span class=o>=</span><span class=s2>&quot;Folder filter&quot;</span><span class=p>,</span>
            <span class=n>default</span><span class=o>=</span><span class=n>options</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;folder_path&quot;</span><span class=p>),</span>
            <span class=n>placeholder</span><span class=o>=</span><span class=s2>&quot;regex filtering by folder path&quot;</span><span class=p>,</span>
            <span class=n>tooltip</span><span class=o>=</span><span class=p>(</span>
                <span class=s2>&quot;Filtering assets by matching&quot;</span>
                <span class=s2>&quot; field regex to folder path&quot;</span>
            <span class=p>)</span>
        <span class=p>),</span>
        <span class=n>attribute_definitions</span><span class=o>.</span><span class=n>TextDef</span><span class=p>(</span>
            <span class=s2>&quot;product_name&quot;</span><span class=p>,</span>
            <span class=n>label</span><span class=o>=</span><span class=s2>&quot;Product filter&quot;</span><span class=p>,</span>
            <span class=n>default</span><span class=o>=</span><span class=n>options</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;product_name&quot;</span><span class=p>),</span>
            <span class=n>placeholder</span><span class=o>=</span><span class=s2>&quot;regex filtering by product name&quot;</span><span class=p>,</span>
            <span class=n>tooltip</span><span class=o>=</span><span class=p>(</span>
                <span class=s2>&quot;Filtering assets by matching&quot;</span>
                <span class=s2>&quot; field regex to product name&quot;</span>
            <span class=p>)</span>
        <span class=p>),</span>
    <span class=p>]</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderLoadMixin.parse_loader_args class="doc doc-heading"> <code class="highlight language-python"><span class=n>parse_loader_args</span><span class=p>(</span><span class=n>loader_args</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Helper function to parse string of loader arguments.</p> <p>Empty dictionary is returned if conversion fails.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>loader_args</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Loader args filled by user.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Dict[str, Any]: Parsed arguments used as dictionary.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1490</span>
<span class=normal>1491</span>
<span class=normal>1492</span>
<span class=normal>1493</span>
<span class=normal>1494</span>
<span class=normal>1495</span>
<span class=normal>1496</span>
<span class=normal>1497</span>
<span class=normal>1498</span>
<span class=normal>1499</span>
<span class=normal>1500</span>
<span class=normal>1501</span>
<span class=normal>1502</span>
<span class=normal>1503</span>
<span class=normal>1504</span>
<span class=normal>1505</span>
<span class=normal>1506</span>
<span class=normal>1507</span>
<span class=normal>1508</span>
<span class=normal>1509</span>
<span class=normal>1510</span>
<span class=normal>1511</span>
<span class=normal>1512</span>
<span class=normal>1513</span>
<span class=normal>1514</span>
<span class=normal>1515</span>
<span class=normal>1516</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>parse_loader_args</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>loader_args</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Helper function to parse string of loader arguments.</span>

<span class=sd>    Empty dictionary is returned if conversion fails.</span>

<span class=sd>    Args:</span>
<span class=sd>        loader_args (str): Loader args filled by user.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Dict[str, Any]: Parsed arguments used as dictionary.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>loader_args</span><span class=p>:</span>
        <span class=k>return</span> <span class=p>{}</span>

    <span class=k>try</span><span class=p>:</span>
        <span class=n>parsed_args</span> <span class=o>=</span> <span class=nb>eval</span><span class=p>(</span><span class=n>loader_args</span><span class=p>)</span>
        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>parsed_args</span><span class=p>,</span> <span class=nb>dict</span><span class=p>):</span>
            <span class=k>return</span> <span class=n>parsed_args</span>

    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>err</span><span class=p>:</span>
        <span class=nb>print</span><span class=p>(</span>
            <span class=s2>&quot;Error while parsing loader arguments &#39;</span><span class=si>{}</span><span class=s2>&#39;.</span><span class=se>\n</span><span class=si>{}</span><span class=s2>: </span><span class=si>{}</span><span class=se>\n\n</span><span class=s2>&quot;</span>
            <span class=s2>&quot;Continuing with default arguments. . .&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                <span class=n>loader_args</span><span class=p>,</span> <span class=n>err</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=p>,</span> <span class=n>err</span><span class=p>))</span>

    <span class=k>return</span> <span class=p>{}</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderLoadMixin.populate_load_placeholder class="doc doc-heading"> <code class="highlight language-python"><span class=n>populate_load_placeholder</span><span class=p>(</span><span class=n>placeholder</span><span class=p>,</span> <span class=n>ignore_repre_ids</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Load placeholder is going to load matching representations.</p> <details class=note open> <summary>Note</summary> <p>Ignore repre ids is to avoid loading the same representation again on load. But the representation can be loaded with different loader and there could be published new version of matching product for the representation. We should maybe expect containers.</p> <p>Also import loaders don't have containers at all...</p> </details> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>placeholder</code> </td> <td> <code><a class="autorefs autorefs-internal" title="PlaceholderItem (client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem)" href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem>PlaceholderItem</a></code> </td> <td> <div class=doc-md-description> <p>Placeholder item with information about requested representations.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>ignore_repre_ids</code> </td> <td> <code><span title=Iterable>Iterable</span>[<span title=Union>Union</span>[<span title=str>str</span>, <span title=ObjectId>ObjectId</span>]]</code> </td> <td> <div class=doc-md-description> <p>Representation ids that should be skipped.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1635</span>
<span class=normal>1636</span>
<span class=normal>1637</span>
<span class=normal>1638</span>
<span class=normal>1639</span>
<span class=normal>1640</span>
<span class=normal>1641</span>
<span class=normal>1642</span>
<span class=normal>1643</span>
<span class=normal>1644</span>
<span class=normal>1645</span>
<span class=normal>1646</span>
<span class=normal>1647</span>
<span class=normal>1648</span>
<span class=normal>1649</span>
<span class=normal>1650</span>
<span class=normal>1651</span>
<span class=normal>1652</span>
<span class=normal>1653</span>
<span class=normal>1654</span>
<span class=normal>1655</span>
<span class=normal>1656</span>
<span class=normal>1657</span>
<span class=normal>1658</span>
<span class=normal>1659</span>
<span class=normal>1660</span>
<span class=normal>1661</span>
<span class=normal>1662</span>
<span class=normal>1663</span>
<span class=normal>1664</span>
<span class=normal>1665</span>
<span class=normal>1666</span>
<span class=normal>1667</span>
<span class=normal>1668</span>
<span class=normal>1669</span>
<span class=normal>1670</span>
<span class=normal>1671</span>
<span class=normal>1672</span>
<span class=normal>1673</span>
<span class=normal>1674</span>
<span class=normal>1675</span>
<span class=normal>1676</span>
<span class=normal>1677</span>
<span class=normal>1678</span>
<span class=normal>1679</span>
<span class=normal>1680</span>
<span class=normal>1681</span>
<span class=normal>1682</span>
<span class=normal>1683</span>
<span class=normal>1684</span>
<span class=normal>1685</span>
<span class=normal>1686</span>
<span class=normal>1687</span>
<span class=normal>1688</span>
<span class=normal>1689</span>
<span class=normal>1690</span>
<span class=normal>1691</span>
<span class=normal>1692</span>
<span class=normal>1693</span>
<span class=normal>1694</span>
<span class=normal>1695</span>
<span class=normal>1696</span>
<span class=normal>1697</span>
<span class=normal>1698</span>
<span class=normal>1699</span>
<span class=normal>1700</span>
<span class=normal>1701</span>
<span class=normal>1702</span>
<span class=normal>1703</span>
<span class=normal>1704</span>
<span class=normal>1705</span>
<span class=normal>1706</span>
<span class=normal>1707</span>
<span class=normal>1708</span>
<span class=normal>1709</span>
<span class=normal>1710</span>
<span class=normal>1711</span>
<span class=normal>1712</span>
<span class=normal>1713</span>
<span class=normal>1714</span>
<span class=normal>1715</span>
<span class=normal>1716</span>
<span class=normal>1717</span>
<span class=normal>1718</span>
<span class=normal>1719</span>
<span class=normal>1720</span>
<span class=normal>1721</span>
<span class=normal>1722</span>
<span class=normal>1723</span>
<span class=normal>1724</span>
<span class=normal>1725</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>populate_load_placeholder</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>placeholder</span><span class=p>,</span> <span class=n>ignore_repre_ids</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Load placeholder is going to load matching representations.</span>

<span class=sd>    Note:</span>
<span class=sd>        Ignore repre ids is to avoid loading the same representation again</span>
<span class=sd>        on load. But the representation can be loaded with different loader</span>
<span class=sd>        and there could be published new version of matching product for</span>
<span class=sd>        the representation. We should maybe expect containers.</span>

<span class=sd>        Also import loaders don&#39;t have containers at all...</span>

<span class=sd>    Args:</span>
<span class=sd>        placeholder (PlaceholderItem): Placeholder item with information</span>
<span class=sd>            about requested representations.</span>
<span class=sd>        ignore_repre_ids (Iterable[Union[str, ObjectId]]): Representation</span>
<span class=sd>            ids that should be skipped.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>if</span> <span class=n>ignore_repre_ids</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>ignore_repre_ids</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>

    <span class=c1># TODO check loader existence</span>
    <span class=n>loader_name</span> <span class=o>=</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;loader&quot;</span><span class=p>]</span>
    <span class=n>loader_args</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>parse_loader_args</span><span class=p>(</span><span class=n>placeholder</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;loader_args&quot;</span><span class=p>])</span>

    <span class=n>placeholder_representations</span> <span class=o>=</span> <span class=p>[</span>
        <span class=n>repre_entity</span>
        <span class=k>for</span> <span class=n>repre_entity</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_representations</span><span class=p>(</span><span class=n>placeholder</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>repre_entity</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>ignore_repre_ids</span>
    <span class=p>]</span>

    <span class=n>repre_load_contexts</span> <span class=o>=</span> <span class=n>get_representation_contexts</span><span class=p>(</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>project_name</span><span class=p>,</span> <span class=n>placeholder_representations</span>
    <span class=p>)</span>
    <span class=n>filtered_repre_contexts</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_reduce_last_version_repre_entities</span><span class=p>(</span>
        <span class=n>repre_load_contexts</span><span class=o>.</span><span class=n>values</span><span class=p>()</span>
    <span class=p>)</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>filtered_repre_contexts</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>((</span>
            <span class=s2>&quot;There&#39;s no representation for this placeholder: </span><span class=si>{}</span><span class=s2>&quot;</span>
        <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>placeholder</span><span class=o>.</span><span class=n>scene_identifier</span><span class=p>))</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;keep_placeholder&quot;</span><span class=p>,</span> <span class=kc>True</span><span class=p>):</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>delete_placeholder</span><span class=p>(</span><span class=n>placeholder</span><span class=p>)</span>
        <span class=k>return</span>

    <span class=n>loaders_by_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>get_loaders_by_name</span><span class=p>()</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_before_placeholder_load</span><span class=p>(</span>
        <span class=n>placeholder</span>
    <span class=p>)</span>

    <span class=n>failed</span> <span class=o>=</span> <span class=kc>False</span>
    <span class=k>for</span> <span class=n>repre_load_context</span> <span class=ow>in</span> <span class=n>filtered_repre_contexts</span><span class=p>:</span>
        <span class=n>folder_path</span> <span class=o>=</span> <span class=n>repre_load_context</span><span class=p>[</span><span class=s2>&quot;folder&quot;</span><span class=p>][</span><span class=s2>&quot;path&quot;</span><span class=p>]</span>
        <span class=n>product_name</span> <span class=o>=</span> <span class=n>repre_load_context</span><span class=p>[</span><span class=s2>&quot;product&quot;</span><span class=p>][</span><span class=s2>&quot;name&quot;</span><span class=p>]</span>
        <span class=n>representation</span> <span class=o>=</span> <span class=n>repre_load_context</span><span class=p>[</span><span class=s2>&quot;representation&quot;</span><span class=p>]</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_before_repre_load</span><span class=p>(</span>
            <span class=n>placeholder</span><span class=p>,</span> <span class=n>representation</span>
        <span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span>
            <span class=s2>&quot;Loading </span><span class=si>{}</span><span class=s2> from </span><span class=si>{}</span><span class=s2> with loader </span><span class=si>{}</span><span class=se>\n</span><span class=s2>&quot;</span>
            <span class=s2>&quot;Loader arguments used : </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                <span class=n>product_name</span><span class=p>,</span>
                <span class=n>folder_path</span><span class=p>,</span>
                <span class=n>loader_name</span><span class=p>,</span>
                <span class=n>placeholder</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;loader_args&quot;</span><span class=p>],</span>
            <span class=p>)</span>
        <span class=p>)</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=n>container</span> <span class=o>=</span> <span class=n>load_with_repre_context</span><span class=p>(</span>
                <span class=n>loaders_by_name</span><span class=p>[</span><span class=n>loader_name</span><span class=p>],</span>
                <span class=n>repre_load_context</span><span class=p>,</span>
                <span class=n>options</span><span class=o>=</span><span class=n>loader_args</span>
            <span class=p>)</span>

        <span class=k>except</span> <span class=ne>Exception</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>load_failed</span><span class=p>(</span><span class=n>placeholder</span><span class=p>,</span> <span class=n>representation</span><span class=p>)</span>
            <span class=n>failed</span> <span class=o>=</span> <span class=kc>True</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>load_succeed</span><span class=p>(</span><span class=n>placeholder</span><span class=p>,</span> <span class=n>container</span><span class=p>)</span>

    <span class=c1># Run post placeholder process after load of all representations</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>post_placeholder_process</span><span class=p>(</span><span class=n>placeholder</span><span class=p>,</span> <span class=n>failed</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>failed</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
            <span class=s2>&quot;Placeholder cleanup skipped due to failed placeholder &quot;</span>
            <span class=s2>&quot;population.&quot;</span>
        <span class=p>)</span>
        <span class=k>return</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>placeholder</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;keep_placeholder&quot;</span><span class=p>,</span> <span class=kc>True</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>delete_placeholder</span><span class=p>(</span><span class=n>placeholder</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderLoadMixin.post_placeholder_process class="doc doc-heading"> <code class="highlight language-python"><span class=n>post_placeholder_process</span><span class=p>(</span><span class=n>placeholder</span><span class=p>,</span> <span class=n>failed</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Cleanup placeholder after load of its corresponding representations.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>placeholder</code> </td> <td> <code><a class="autorefs autorefs-internal" title="PlaceholderItem (client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem)" href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem>PlaceholderItem</a></code> </td> <td> <div class=doc-md-description> <p>Item which was just used to load representation.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>failed</code> </td> <td> <code><span title=bool>bool</span></code> </td> <td> <div class=doc-md-description> <p>Loading of representation failed.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1735</span>
<span class=normal>1736</span>
<span class=normal>1737</span>
<span class=normal>1738</span>
<span class=normal>1739</span>
<span class=normal>1740</span>
<span class=normal>1741</span>
<span class=normal>1742</span>
<span class=normal>1743</span>
<span class=normal>1744</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>post_placeholder_process</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>placeholder</span><span class=p>,</span> <span class=n>failed</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Cleanup placeholder after load of its corresponding representations.</span>

<span class=sd>    Args:</span>
<span class=sd>        placeholder (PlaceholderItem): Item which was just used to load</span>
<span class=sd>            representation.</span>
<span class=sd>        failed (bool): Loading of representation failed.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin class="doc doc-heading"> <code>PlaceholderPlugin</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=abc.ABC>ABC</span></code></p> <p>Plugin which care about handling of placeholder items logic.</p> <p>Plugin create and update placeholders in scene and populate them on template import. Populating means that based on placeholder data happens a logic in the scene. Most common logic is to load representation using loaders or to create instances in scene.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 961</span>
<span class=normal> 962</span>
<span class=normal> 963</span>
<span class=normal> 964</span>
<span class=normal> 965</span>
<span class=normal> 966</span>
<span class=normal> 967</span>
<span class=normal> 968</span>
<span class=normal> 969</span>
<span class=normal> 970</span>
<span class=normal> 971</span>
<span class=normal> 972</span>
<span class=normal> 973</span>
<span class=normal> 974</span>
<span class=normal> 975</span>
<span class=normal> 976</span>
<span class=normal> 977</span>
<span class=normal> 978</span>
<span class=normal> 979</span>
<span class=normal> 980</span>
<span class=normal> 981</span>
<span class=normal> 982</span>
<span class=normal> 983</span>
<span class=normal> 984</span>
<span class=normal> 985</span>
<span class=normal> 986</span>
<span class=normal> 987</span>
<span class=normal> 988</span>
<span class=normal> 989</span>
<span class=normal> 990</span>
<span class=normal> 991</span>
<span class=normal> 992</span>
<span class=normal> 993</span>
<span class=normal> 994</span>
<span class=normal> 995</span>
<span class=normal> 996</span>
<span class=normal> 997</span>
<span class=normal> 998</span>
<span class=normal> 999</span>
<span class=normal>1000</span>
<span class=normal>1001</span>
<span class=normal>1002</span>
<span class=normal>1003</span>
<span class=normal>1004</span>
<span class=normal>1005</span>
<span class=normal>1006</span>
<span class=normal>1007</span>
<span class=normal>1008</span>
<span class=normal>1009</span>
<span class=normal>1010</span>
<span class=normal>1011</span>
<span class=normal>1012</span>
<span class=normal>1013</span>
<span class=normal>1014</span>
<span class=normal>1015</span>
<span class=normal>1016</span>
<span class=normal>1017</span>
<span class=normal>1018</span>
<span class=normal>1019</span>
<span class=normal>1020</span>
<span class=normal>1021</span>
<span class=normal>1022</span>
<span class=normal>1023</span>
<span class=normal>1024</span>
<span class=normal>1025</span>
<span class=normal>1026</span>
<span class=normal>1027</span>
<span class=normal>1028</span>
<span class=normal>1029</span>
<span class=normal>1030</span>
<span class=normal>1031</span>
<span class=normal>1032</span>
<span class=normal>1033</span>
<span class=normal>1034</span>
<span class=normal>1035</span>
<span class=normal>1036</span>
<span class=normal>1037</span>
<span class=normal>1038</span>
<span class=normal>1039</span>
<span class=normal>1040</span>
<span class=normal>1041</span>
<span class=normal>1042</span>
<span class=normal>1043</span>
<span class=normal>1044</span>
<span class=normal>1045</span>
<span class=normal>1046</span>
<span class=normal>1047</span>
<span class=normal>1048</span>
<span class=normal>1049</span>
<span class=normal>1050</span>
<span class=normal>1051</span>
<span class=normal>1052</span>
<span class=normal>1053</span>
<span class=normal>1054</span>
<span class=normal>1055</span>
<span class=normal>1056</span>
<span class=normal>1057</span>
<span class=normal>1058</span>
<span class=normal>1059</span>
<span class=normal>1060</span>
<span class=normal>1061</span>
<span class=normal>1062</span>
<span class=normal>1063</span>
<span class=normal>1064</span>
<span class=normal>1065</span>
<span class=normal>1066</span>
<span class=normal>1067</span>
<span class=normal>1068</span>
<span class=normal>1069</span>
<span class=normal>1070</span>
<span class=normal>1071</span>
<span class=normal>1072</span>
<span class=normal>1073</span>
<span class=normal>1074</span>
<span class=normal>1075</span>
<span class=normal>1076</span>
<span class=normal>1077</span>
<span class=normal>1078</span>
<span class=normal>1079</span>
<span class=normal>1080</span>
<span class=normal>1081</span>
<span class=normal>1082</span>
<span class=normal>1083</span>
<span class=normal>1084</span>
<span class=normal>1085</span>
<span class=normal>1086</span>
<span class=normal>1087</span>
<span class=normal>1088</span>
<span class=normal>1089</span>
<span class=normal>1090</span>
<span class=normal>1091</span>
<span class=normal>1092</span>
<span class=normal>1093</span>
<span class=normal>1094</span>
<span class=normal>1095</span>
<span class=normal>1096</span>
<span class=normal>1097</span>
<span class=normal>1098</span>
<span class=normal>1099</span>
<span class=normal>1100</span>
<span class=normal>1101</span>
<span class=normal>1102</span>
<span class=normal>1103</span>
<span class=normal>1104</span>
<span class=normal>1105</span>
<span class=normal>1106</span>
<span class=normal>1107</span>
<span class=normal>1108</span>
<span class=normal>1109</span>
<span class=normal>1110</span>
<span class=normal>1111</span>
<span class=normal>1112</span>
<span class=normal>1113</span>
<span class=normal>1114</span>
<span class=normal>1115</span>
<span class=normal>1116</span>
<span class=normal>1117</span>
<span class=normal>1118</span>
<span class=normal>1119</span>
<span class=normal>1120</span>
<span class=normal>1121</span>
<span class=normal>1122</span>
<span class=normal>1123</span>
<span class=normal>1124</span>
<span class=normal>1125</span>
<span class=normal>1126</span>
<span class=normal>1127</span>
<span class=normal>1128</span>
<span class=normal>1129</span>
<span class=normal>1130</span>
<span class=normal>1131</span>
<span class=normal>1132</span>
<span class=normal>1133</span>
<span class=normal>1134</span>
<span class=normal>1135</span>
<span class=normal>1136</span>
<span class=normal>1137</span>
<span class=normal>1138</span>
<span class=normal>1139</span>
<span class=normal>1140</span>
<span class=normal>1141</span>
<span class=normal>1142</span>
<span class=normal>1143</span>
<span class=normal>1144</span>
<span class=normal>1145</span>
<span class=normal>1146</span>
<span class=normal>1147</span>
<span class=normal>1148</span>
<span class=normal>1149</span>
<span class=normal>1150</span>
<span class=normal>1151</span>
<span class=normal>1152</span>
<span class=normal>1153</span>
<span class=normal>1154</span>
<span class=normal>1155</span>
<span class=normal>1156</span>
<span class=normal>1157</span>
<span class=normal>1158</span>
<span class=normal>1159</span>
<span class=normal>1160</span>
<span class=normal>1161</span>
<span class=normal>1162</span>
<span class=normal>1163</span>
<span class=normal>1164</span>
<span class=normal>1165</span>
<span class=normal>1166</span>
<span class=normal>1167</span>
<span class=normal>1168</span>
<span class=normal>1169</span>
<span class=normal>1170</span>
<span class=normal>1171</span>
<span class=normal>1172</span>
<span class=normal>1173</span>
<span class=normal>1174</span>
<span class=normal>1175</span>
<span class=normal>1176</span>
<span class=normal>1177</span>
<span class=normal>1178</span>
<span class=normal>1179</span>
<span class=normal>1180</span>
<span class=normal>1181</span>
<span class=normal>1182</span>
<span class=normal>1183</span>
<span class=normal>1184</span>
<span class=normal>1185</span>
<span class=normal>1186</span>
<span class=normal>1187</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>PlaceholderPlugin</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Plugin which care about handling of placeholder items logic.</span>

<span class=sd>    Plugin create and update placeholders in scene and populate them on</span>
<span class=sd>    template import. Populating means that based on placeholder data happens</span>
<span class=sd>    a logic in the scene. Most common logic is to load representation using</span>
<span class=sd>    loaders or to create instances in scene.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>label</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=n>_log</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>builder</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_builder</span> <span class=o>=</span> <span class=n>builder</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>builder</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Access to builder which initialized the plugin.</span>

<span class=sd>        Returns:</span>
<span class=sd>            AbstractTemplateBuilder: Loader of template build.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_builder</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>project_name</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_builder</span><span class=o>.</span><span class=n>project_name</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>log</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Dynamically created logger for the plugin.&quot;&quot;&quot;</span>

        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_log</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_log</span> <span class=o>=</span> <span class=n>Logger</span><span class=o>.</span><span class=n>get_logger</span><span class=p>(</span><span class=nb>repr</span><span class=p>(</span><span class=bp>self</span><span class=p>))</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_log</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>identifier</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Identifier which will be stored to placeholder.</span>

<span class=sd>        Default implementation uses class name.</span>

<span class=sd>        Returns:</span>
<span class=sd>            str: Unique identifier of placeholder plugin.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span>

    <span class=nd>@abstractmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>create_placeholder</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>placeholder_data</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Create new placeholder in scene and get it&#39;s item.</span>

<span class=sd>        It matters on the plugin implementation if placeholder will use</span>
<span class=sd>        selection in scene or create new node.</span>

<span class=sd>        Args:</span>
<span class=sd>            placeholder_data (Dict[str, Any]): Data that were created</span>
<span class=sd>                based on attribute definitions from &#39;get_placeholder_options&#39;.</span>

<span class=sd>        Returns:</span>
<span class=sd>            PlaceholderItem: Created placeholder item.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>pass</span>

    <span class=nd>@abstractmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>update_placeholder</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>placeholder_item</span><span class=p>,</span> <span class=n>placeholder_data</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Update placeholder item with new data.</span>

<span class=sd>        New data should be propagated to object of placeholder item itself</span>
<span class=sd>        and also into the scene.</span>

<span class=sd>        Reason:</span>
<span class=sd>            Some placeholder plugins may require some special way how the</span>
<span class=sd>            updates should be propagated to object.</span>

<span class=sd>        Args:</span>
<span class=sd>            placeholder_item (PlaceholderItem): Object of placeholder that</span>
<span class=sd>                should be updated.</span>
<span class=sd>            placeholder_data (Dict[str, Any]): Data related to placeholder.</span>
<span class=sd>                Should match plugin options.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>pass</span>

    <span class=nd>@abstractmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>collect_placeholders</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Collect placeholders from scene.</span>

<span class=sd>        Returns:</span>
<span class=sd>            List[PlaceholderItem]: Placeholder objects.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>pass</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_placeholder_options</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>options</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Placeholder options for data showed.</span>

<span class=sd>        Returns:</span>
<span class=sd>            List[AbstractAttrDef]: Attribute definitions of</span>
<span class=sd>                placeholder options.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=p>[]</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_placeholder_keys</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get placeholder keys that are stored in scene.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Set[str]: Key of placeholder keys that are stored in scene.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>option_keys</span> <span class=o>=</span> <span class=n>get_attributes_keys</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>get_placeholder_options</span><span class=p>())</span>
        <span class=n>option_keys</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=s2>&quot;plugin_identifier&quot;</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>option_keys</span>

    <span class=k>def</span><span class=w> </span><span class=nf>prepare_placeholders</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>placeholders</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Preparation part of placeholders.</span>

<span class=sd>        Args:</span>
<span class=sd>            placeholders (List[PlaceholderItem]): List of placeholders that</span>
<span class=sd>                will be processed.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>pass</span>

    <span class=nd>@abstractmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>populate_placeholder</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>placeholder</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Process single placeholder item.</span>

<span class=sd>        Processing of placeholders is defined by their order thus can&#39;t be</span>
<span class=sd>        processed in batch.</span>

<span class=sd>        Args:</span>
<span class=sd>            placeholder (PlaceholderItem): Placeholder that should be</span>
<span class=sd>                processed.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>pass</span>

    <span class=k>def</span><span class=w> </span><span class=nf>repopulate_placeholder</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>placeholder</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Update scene with current context for passed placeholder.</span>

<span class=sd>        Can be used to re-run placeholder logic (if it make sense).</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>pass</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_plugin_shared_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Receive shared data across plugin and placeholders.</span>

<span class=sd>        Using shared data from builder but stored under plugin identifier.</span>

<span class=sd>        Args:</span>
<span class=sd>            key (str): Key under which are shared data stored.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Union[None, Any]: None if key was not set.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>plugin_data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>get_shared_data</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>identifier</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>plugin_data</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>None</span>
        <span class=k>return</span> <span class=n>plugin_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_plugin_shared_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Store share data across plugin and placeholders.</span>

<span class=sd>        Using shared data from builder but stored under plugin identifier.</span>

<span class=sd>        Key should be self-explanatory to content.</span>
<span class=sd>        - wrong: &#39;folder&#39;</span>
<span class=sd>        - good: &#39;folder_path&#39;</span>

<span class=sd>        Args:</span>
<span class=sd>            key (str): Key under which is key stored.</span>
<span class=sd>            value (Any): Value that should be stored under the key.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>plugin_data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>get_shared_data</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>identifier</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>plugin_data</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>plugin_data</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=n>plugin_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>set_shared_data</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>identifier</span><span class=p>,</span> <span class=n>plugin_data</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_plugin_shared_populate_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Receive shared data across plugin and placeholders.</span>

<span class=sd>        Using shared populate data from builder but stored under plugin</span>
<span class=sd>        identifier.</span>

<span class=sd>        Shared populate data are cleaned up during populate while loop.</span>

<span class=sd>        Args:</span>
<span class=sd>            key (str): Key under which are shared data stored.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Union[None, Any]: None if key was not set.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>plugin_data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>get_shared_populate_data</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>identifier</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>plugin_data</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>None</span>
        <span class=k>return</span> <span class=n>plugin_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_plugin_shared_populate_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Store share data across plugin and placeholders.</span>

<span class=sd>        Using shared data from builder but stored under plugin identifier.</span>

<span class=sd>        Key should be self-explanatory to content.</span>
<span class=sd>        - wrong: &#39;folder&#39;</span>
<span class=sd>        - good: &#39;folder_path&#39;</span>

<span class=sd>        Shared populate data are cleaned up during populate while loop.</span>

<span class=sd>        Args:</span>
<span class=sd>            key (str): Key under which is key stored.</span>
<span class=sd>            value (Any): Value that should be stored under the key.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>plugin_data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>get_shared_populate_data</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>identifier</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>plugin_data</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>plugin_data</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=n>plugin_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>set_shared_populate_data</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>identifier</span><span class=p>,</span> <span class=n>plugin_data</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.builder class="doc doc-heading"> <code class="highlight language-python"><span class=n>builder</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Access to builder which initialized the plugin.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>AbstractTemplateBuilder</code></td> <td> </td> <td> <div class=doc-md-description> <p>Loader of template build.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.identifier class="doc doc-heading"> <code class="highlight language-python"><span class=n>identifier</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Identifier which will be stored to placeholder.</p> <p>Default implementation uses class name.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>Unique identifier of placeholder plugin.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.log class="doc doc-heading"> <code class="highlight language-python"><span class=n>log</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Dynamically created logger for the plugin.</p> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.collect_placeholders class="doc doc-heading"> <code class="highlight language-python"><span class=n>collect_placeholders</span><span class=p>()</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Collect placeholders from scene.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>List[PlaceholderItem]: Placeholder objects.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1047</span>
<span class=normal>1048</span>
<span class=normal>1049</span>
<span class=normal>1050</span>
<span class=normal>1051</span>
<span class=normal>1052</span>
<span class=normal>1053</span>
<span class=normal>1054</span>
<span class=normal>1055</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@abstractmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>collect_placeholders</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Collect placeholders from scene.</span>

<span class=sd>    Returns:</span>
<span class=sd>        List[PlaceholderItem]: Placeholder objects.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.create_placeholder class="doc doc-heading"> <code class="highlight language-python"><span class=n>create_placeholder</span><span class=p>(</span><span class=n>placeholder_data</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Create new placeholder in scene and get it's item.</p> <p>It matters on the plugin implementation if placeholder will use selection in scene or create new node.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>placeholder_data</code> </td> <td> <code><span title=Dict>Dict</span>[<span title=str>str</span>, <span title=Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Data that were created based on attribute definitions from 'get_placeholder_options'.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>PlaceholderItem</code></td> <td> </td> <td> <div class=doc-md-description> <p>Created placeholder item.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1010</span>
<span class=normal>1011</span>
<span class=normal>1012</span>
<span class=normal>1013</span>
<span class=normal>1014</span>
<span class=normal>1015</span>
<span class=normal>1016</span>
<span class=normal>1017</span>
<span class=normal>1018</span>
<span class=normal>1019</span>
<span class=normal>1020</span>
<span class=normal>1021</span>
<span class=normal>1022</span>
<span class=normal>1023</span>
<span class=normal>1024</span>
<span class=normal>1025</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@abstractmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>create_placeholder</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>placeholder_data</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Create new placeholder in scene and get it&#39;s item.</span>

<span class=sd>    It matters on the plugin implementation if placeholder will use</span>
<span class=sd>    selection in scene or create new node.</span>

<span class=sd>    Args:</span>
<span class=sd>        placeholder_data (Dict[str, Any]): Data that were created</span>
<span class=sd>            based on attribute definitions from &#39;get_placeholder_options&#39;.</span>

<span class=sd>    Returns:</span>
<span class=sd>        PlaceholderItem: Created placeholder item.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.get_placeholder_keys class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_placeholder_keys</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Get placeholder keys that are stored in scene.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Set[str]: Key of placeholder keys that are stored in scene.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1067</span>
<span class=normal>1068</span>
<span class=normal>1069</span>
<span class=normal>1070</span>
<span class=normal>1071</span>
<span class=normal>1072</span>
<span class=normal>1073</span>
<span class=normal>1074</span>
<span class=normal>1075</span>
<span class=normal>1076</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_placeholder_keys</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get placeholder keys that are stored in scene.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Set[str]: Key of placeholder keys that are stored in scene.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>option_keys</span> <span class=o>=</span> <span class=n>get_attributes_keys</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>get_placeholder_options</span><span class=p>())</span>
    <span class=n>option_keys</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=s2>&quot;plugin_identifier&quot;</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>option_keys</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.get_placeholder_options class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_placeholder_options</span><span class=p>(</span><span class=n>options</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Placeholder options for data showed.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>List[AbstractAttrDef]: Attribute definitions of placeholder options.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1057</span>
<span class=normal>1058</span>
<span class=normal>1059</span>
<span class=normal>1060</span>
<span class=normal>1061</span>
<span class=normal>1062</span>
<span class=normal>1063</span>
<span class=normal>1064</span>
<span class=normal>1065</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_placeholder_options</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>options</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Placeholder options for data showed.</span>

<span class=sd>    Returns:</span>
<span class=sd>        List[AbstractAttrDef]: Attribute definitions of</span>
<span class=sd>            placeholder options.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=p>[]</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.get_plugin_shared_data class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_plugin_shared_data</span><span class=p>(</span><span class=n>key</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Receive shared data across plugin and placeholders.</p> <p>Using shared data from builder but stored under plugin identifier.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>key</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Key under which are shared data stored.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Union[None, Any]: None if key was not set.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1110</span>
<span class=normal>1111</span>
<span class=normal>1112</span>
<span class=normal>1113</span>
<span class=normal>1114</span>
<span class=normal>1115</span>
<span class=normal>1116</span>
<span class=normal>1117</span>
<span class=normal>1118</span>
<span class=normal>1119</span>
<span class=normal>1120</span>
<span class=normal>1121</span>
<span class=normal>1122</span>
<span class=normal>1123</span>
<span class=normal>1124</span>
<span class=normal>1125</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_plugin_shared_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Receive shared data across plugin and placeholders.</span>

<span class=sd>    Using shared data from builder but stored under plugin identifier.</span>

<span class=sd>    Args:</span>
<span class=sd>        key (str): Key under which are shared data stored.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Union[None, Any]: None if key was not set.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>plugin_data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>get_shared_data</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>identifier</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>plugin_data</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>return</span> <span class=kc>None</span>
    <span class=k>return</span> <span class=n>plugin_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.get_plugin_shared_populate_data class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_plugin_shared_populate_data</span><span class=p>(</span><span class=n>key</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Receive shared data across plugin and placeholders.</p> <p>Using shared populate data from builder but stored under plugin identifier.</p> <p>Shared populate data are cleaned up during populate while loop.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>key</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Key under which are shared data stored.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Union[None, Any]: None if key was not set.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1147</span>
<span class=normal>1148</span>
<span class=normal>1149</span>
<span class=normal>1150</span>
<span class=normal>1151</span>
<span class=normal>1152</span>
<span class=normal>1153</span>
<span class=normal>1154</span>
<span class=normal>1155</span>
<span class=normal>1156</span>
<span class=normal>1157</span>
<span class=normal>1158</span>
<span class=normal>1159</span>
<span class=normal>1160</span>
<span class=normal>1161</span>
<span class=normal>1162</span>
<span class=normal>1163</span>
<span class=normal>1164</span>
<span class=normal>1165</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_plugin_shared_populate_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Receive shared data across plugin and placeholders.</span>

<span class=sd>    Using shared populate data from builder but stored under plugin</span>
<span class=sd>    identifier.</span>

<span class=sd>    Shared populate data are cleaned up during populate while loop.</span>

<span class=sd>    Args:</span>
<span class=sd>        key (str): Key under which are shared data stored.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Union[None, Any]: None if key was not set.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>plugin_data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>get_shared_populate_data</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>identifier</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>plugin_data</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>return</span> <span class=kc>None</span>
    <span class=k>return</span> <span class=n>plugin_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.populate_placeholder class="doc doc-heading"> <code class="highlight language-python"><span class=n>populate_placeholder</span><span class=p>(</span><span class=n>placeholder</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Process single placeholder item.</p> <p>Processing of placeholders is defined by their order thus can't be processed in batch.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>placeholder</code> </td> <td> <code><a class="autorefs autorefs-internal" title="PlaceholderItem (client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem)" href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem>PlaceholderItem</a></code> </td> <td> <div class=doc-md-description> <p>Placeholder that should be processed.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1088</span>
<span class=normal>1089</span>
<span class=normal>1090</span>
<span class=normal>1091</span>
<span class=normal>1092</span>
<span class=normal>1093</span>
<span class=normal>1094</span>
<span class=normal>1095</span>
<span class=normal>1096</span>
<span class=normal>1097</span>
<span class=normal>1098</span>
<span class=normal>1099</span>
<span class=normal>1100</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@abstractmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>populate_placeholder</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>placeholder</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Process single placeholder item.</span>

<span class=sd>    Processing of placeholders is defined by their order thus can&#39;t be</span>
<span class=sd>    processed in batch.</span>

<span class=sd>    Args:</span>
<span class=sd>        placeholder (PlaceholderItem): Placeholder that should be</span>
<span class=sd>            processed.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.prepare_placeholders class="doc doc-heading"> <code class="highlight language-python"><span class=n>prepare_placeholders</span><span class=p>(</span><span class=n>placeholders</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Preparation part of placeholders.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>placeholders</code> </td> <td> <code><span title=List>List</span>[<a class="autorefs autorefs-internal" title="PlaceholderItem (client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem)" href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem>PlaceholderItem</a>]</code> </td> <td> <div class=doc-md-description> <p>List of placeholders that will be processed.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1078</span>
<span class=normal>1079</span>
<span class=normal>1080</span>
<span class=normal>1081</span>
<span class=normal>1082</span>
<span class=normal>1083</span>
<span class=normal>1084</span>
<span class=normal>1085</span>
<span class=normal>1086</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>prepare_placeholders</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>placeholders</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Preparation part of placeholders.</span>

<span class=sd>    Args:</span>
<span class=sd>        placeholders (List[PlaceholderItem]): List of placeholders that</span>
<span class=sd>            will be processed.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.repopulate_placeholder class="doc doc-heading"> <code class="highlight language-python"><span class=n>repopulate_placeholder</span><span class=p>(</span><span class=n>placeholder</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Update scene with current context for passed placeholder.</p> <p>Can be used to re-run placeholder logic (if it make sense).</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1102</span>
<span class=normal>1103</span>
<span class=normal>1104</span>
<span class=normal>1105</span>
<span class=normal>1106</span>
<span class=normal>1107</span>
<span class=normal>1108</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>repopulate_placeholder</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>placeholder</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Update scene with current context for passed placeholder.</span>

<span class=sd>    Can be used to re-run placeholder logic (if it make sense).</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.set_plugin_shared_data class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_plugin_shared_data</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Store share data across plugin and placeholders.</p> <p>Using shared data from builder but stored under plugin identifier.</p> <p>Key should be self-explanatory to content. - wrong: 'folder' - good: 'folder_path'</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>key</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Key under which is key stored.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>value</code> </td> <td> <code><span title=Any>Any</span></code> </td> <td> <div class=doc-md-description> <p>Value that should be stored under the key.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1127</span>
<span class=normal>1128</span>
<span class=normal>1129</span>
<span class=normal>1130</span>
<span class=normal>1131</span>
<span class=normal>1132</span>
<span class=normal>1133</span>
<span class=normal>1134</span>
<span class=normal>1135</span>
<span class=normal>1136</span>
<span class=normal>1137</span>
<span class=normal>1138</span>
<span class=normal>1139</span>
<span class=normal>1140</span>
<span class=normal>1141</span>
<span class=normal>1142</span>
<span class=normal>1143</span>
<span class=normal>1144</span>
<span class=normal>1145</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_plugin_shared_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Store share data across plugin and placeholders.</span>

<span class=sd>    Using shared data from builder but stored under plugin identifier.</span>

<span class=sd>    Key should be self-explanatory to content.</span>
<span class=sd>    - wrong: &#39;folder&#39;</span>
<span class=sd>    - good: &#39;folder_path&#39;</span>

<span class=sd>    Args:</span>
<span class=sd>        key (str): Key under which is key stored.</span>
<span class=sd>        value (Any): Value that should be stored under the key.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>plugin_data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>get_shared_data</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>identifier</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>plugin_data</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>plugin_data</span> <span class=o>=</span> <span class=p>{}</span>
    <span class=n>plugin_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>set_shared_data</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>identifier</span><span class=p>,</span> <span class=n>plugin_data</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.set_plugin_shared_populate_data class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_plugin_shared_populate_data</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Store share data across plugin and placeholders.</p> <p>Using shared data from builder but stored under plugin identifier.</p> <p>Key should be self-explanatory to content. - wrong: 'folder' - good: 'folder_path'</p> <p>Shared populate data are cleaned up during populate while loop.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>key</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Key under which is key stored.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>value</code> </td> <td> <code><span title=Any>Any</span></code> </td> <td> <div class=doc-md-description> <p>Value that should be stored under the key.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1167</span>
<span class=normal>1168</span>
<span class=normal>1169</span>
<span class=normal>1170</span>
<span class=normal>1171</span>
<span class=normal>1172</span>
<span class=normal>1173</span>
<span class=normal>1174</span>
<span class=normal>1175</span>
<span class=normal>1176</span>
<span class=normal>1177</span>
<span class=normal>1178</span>
<span class=normal>1179</span>
<span class=normal>1180</span>
<span class=normal>1181</span>
<span class=normal>1182</span>
<span class=normal>1183</span>
<span class=normal>1184</span>
<span class=normal>1185</span>
<span class=normal>1186</span>
<span class=normal>1187</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_plugin_shared_populate_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Store share data across plugin and placeholders.</span>

<span class=sd>    Using shared data from builder but stored under plugin identifier.</span>

<span class=sd>    Key should be self-explanatory to content.</span>
<span class=sd>    - wrong: &#39;folder&#39;</span>
<span class=sd>    - good: &#39;folder_path&#39;</span>

<span class=sd>    Shared populate data are cleaned up during populate while loop.</span>

<span class=sd>    Args:</span>
<span class=sd>        key (str): Key under which is key stored.</span>
<span class=sd>        value (Any): Value that should be stored under the key.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>plugin_data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>get_shared_populate_data</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>identifier</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>plugin_data</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>plugin_data</span> <span class=o>=</span> <span class=p>{}</span>
    <span class=n>plugin_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>builder</span><span class=o>.</span><span class=n>set_shared_populate_data</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>identifier</span><span class=p>,</span> <span class=n>plugin_data</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderPlugin.update_placeholder class="doc doc-heading"> <code class="highlight language-python"><span class=n>update_placeholder</span><span class=p>(</span><span class=n>placeholder_item</span><span class=p>,</span> <span class=n>placeholder_data</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Update placeholder item with new data.</p> <p>New data should be propagated to object of placeholder item itself and also into the scene.</p> <details class=reason open> <summary>Reason</summary> <p>Some placeholder plugins may require some special way how the updates should be propagated to object.</p> </details> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>placeholder_item</code> </td> <td> <code><a class="autorefs autorefs-internal" title="PlaceholderItem (client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem)" href=#client.ayon_core.pipeline.workfile.workfile_template_builder.PlaceholderItem>PlaceholderItem</a></code> </td> <td> <div class=doc-md-description> <p>Object of placeholder that should be updated.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>placeholder_data</code> </td> <td> <code><span title=Dict>Dict</span>[<span title=str>str</span>, <span title=Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Data related to placeholder. Should match plugin options.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1027</span>
<span class=normal>1028</span>
<span class=normal>1029</span>
<span class=normal>1030</span>
<span class=normal>1031</span>
<span class=normal>1032</span>
<span class=normal>1033</span>
<span class=normal>1034</span>
<span class=normal>1035</span>
<span class=normal>1036</span>
<span class=normal>1037</span>
<span class=normal>1038</span>
<span class=normal>1039</span>
<span class=normal>1040</span>
<span class=normal>1041</span>
<span class=normal>1042</span>
<span class=normal>1043</span>
<span class=normal>1044</span>
<span class=normal>1045</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@abstractmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>update_placeholder</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>placeholder_item</span><span class=p>,</span> <span class=n>placeholder_data</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Update placeholder item with new data.</span>

<span class=sd>    New data should be propagated to object of placeholder item itself</span>
<span class=sd>    and also into the scene.</span>

<span class=sd>    Reason:</span>
<span class=sd>        Some placeholder plugins may require some special way how the</span>
<span class=sd>        updates should be propagated to object.</span>

<span class=sd>    Args:</span>
<span class=sd>        placeholder_item (PlaceholderItem): Object of placeholder that</span>
<span class=sd>            should be updated.</span>
<span class=sd>        placeholder_data (Dict[str, Any]): Data related to placeholder.</span>
<span class=sd>            Should match plugin options.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.workfile.workfile_template_builder.TemplateAlreadyImported class="doc doc-heading"> <code>TemplateAlreadyImported</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=Exception>Exception</span></code></p> <p>Error raised when Template was already imported by host for this session</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>74</span>
<span class=normal>75</span>
<span class=normal>76</span>
<span class=normal>77</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>TemplateAlreadyImported</span><span class=p>(</span><span class=ne>Exception</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Error raised when Template was already imported by host for</span>
<span class=sd>    this session&quot;&quot;&quot;</span>
    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.workfile.workfile_template_builder.TemplateLoadFailed class="doc doc-heading"> <code>TemplateLoadFailed</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=Exception>Exception</span></code></p> <p>Error raised whend Template loader was unable to load the template</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>80</span>
<span class=normal>81</span>
<span class=normal>82</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>TemplateLoadFailed</span><span class=p>(</span><span class=ne>Exception</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Error raised whend Template loader was unable to load the template&quot;&quot;&quot;</span>
    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.workfile.workfile_template_builder.TemplateNotFound class="doc doc-heading"> <code>TemplateNotFound</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=Exception>Exception</span></code></p> <p>Exception raised when template does not exist.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>63</span>
<span class=normal>64</span>
<span class=normal>65</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>TemplateNotFound</span><span class=p>(</span><span class=ne>Exception</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Exception raised when template does not exist.&quot;&quot;&quot;</span>
    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.workfile.workfile_template_builder.TemplateProfileNotFound class="doc doc-heading"> <code>TemplateProfileNotFound</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=Exception>Exception</span></code></p> <p>Exception raised when current profile doesn't match any template profile</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/workfile/workfile_template_builder.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>68</span>
<span class=normal>69</span>
<span class=normal>70</span>
<span class=normal>71</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>TemplateProfileNotFound</span><span class=p>(</span><span class=ne>Exception</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Exception raised when current profile</span>
<span class=sd>    doesn&#39;t match any template profile&quot;&quot;&quot;</span>
    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../../..", "features": ["navigation.sections", "navigation.path", "navigation.prune"], "search": "../../../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../../../../assets/javascripts/bundle.c8b220af.min.js></script> </body> </html>