<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=prev href=../host/typing.html><link rel=next href=attribute_definitions.html><link rel=icon href=../../../../img/favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.22"><title>lib - ayon-core</title><link rel=stylesheet href=../../../../assets/stylesheets/main.84d31ad4.min.css><link rel=stylesheet href=../../../../assets/stylesheets/palette.06af60db.min.css><script src=https://unpkg.com/iframe-worker/shim></script><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../../assets/_mkdocstrings.css><link rel=stylesheet href=../../../../css/custom.css><script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#client.ayon_core.lib class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../../index.html title=ayon-core class="md-header__button md-logo" aria-label=ayon-core data-md-component=logo> <img src=../../../../img/ay-symbol-blackw-full.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> ayon-core </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> lib </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/ynput/ayon-core title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../../index.html title=ayon-core class="md-nav__button md-logo" aria-label=ayon-core data-md-component=logo> <img src=../../../../img/ay-symbol-blackw-full.png alt=logo> </a> ayon-core </label> <div class=md-nav__source> <a href=https://github.com/ynput/ayon-core title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../index.html class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../../../../license.html class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1 checked> <label class=md-nav__link for=__nav_3_1 id=__nav_3_1_label tabindex=0> <span class=md-ellipsis> client </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> client </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1 checked> <label class=md-nav__link for=__nav_3_1_1 id=__nav_3_1_1_label tabindex=0> <span class=md-ellipsis> ayon_core </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_1_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1> <span class="md-nav__icon md-icon"></span> ayon_core </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../__main__.html class=md-nav__link> <span class=md-ellipsis> __main__ </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../addon/base.html class=md-nav__link> <span class=md-ellipsis> addon </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../cli.html class=md-nav__link> <span class=md-ellipsis> cli </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../hooks/pre_add_last_workfile_arg.html class=md-nav__link> <span class=md-ellipsis> hooks </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../host/abstract.html class=md-nav__link> <span class=md-ellipsis> host </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1_6 checked> <label class=md-nav__link for=__nav_3_1_1_6 id=__nav_3_1_1_6_label tabindex=0> <span class=md-ellipsis> lib </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_1_1_6_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1_6> <span class="md-nav__icon md-icon"></span> lib </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=attribute_definitions.html class=md-nav__link> <span class=md-ellipsis> attribute_definitions </span> </a> </li> <li class=md-nav__item> <a href=ayon_connection.html class=md-nav__link> <span class=md-ellipsis> ayon_connection </span> </a> </li> <li class=md-nav__item> <a href=ayon_info.html class=md-nav__link> <span class=md-ellipsis> ayon_info </span> </a> </li> <li class=md-nav__item> <a href=cache.html class=md-nav__link> <span class=md-ellipsis> cache </span> </a> </li> <li class=md-nav__item> <a href=dateutils.html class=md-nav__link> <span class=md-ellipsis> dateutils </span> </a> </li> <li class=md-nav__item> <a href=env_tools.html class=md-nav__link> <span class=md-ellipsis> env_tools </span> </a> </li> <li class=md-nav__item> <a href=events.html class=md-nav__link> <span class=md-ellipsis> events </span> </a> </li> <li class=md-nav__item> <a href=execute.html class=md-nav__link> <span class=md-ellipsis> execute </span> </a> </li> <li class=md-nav__item> <a href=file_transaction.html class=md-nav__link> <span class=md-ellipsis> file_transaction </span> </a> </li> <li class=md-nav__item> <a href=local_settings.html class=md-nav__link> <span class=md-ellipsis> local_settings </span> </a> </li> <li class=md-nav__item> <a href=log.html class=md-nav__link> <span class=md-ellipsis> log </span> </a> </li> <li class=md-nav__item> <a href=path_templates.html class=md-nav__link> <span class=md-ellipsis> path_templates </span> </a> </li> <li class=md-nav__item> <a href=path_tools.html class=md-nav__link> <span class=md-ellipsis> path_tools </span> </a> </li> <li class=md-nav__item> <a href=plugin_tools.html class=md-nav__link> <span class=md-ellipsis> plugin_tools </span> </a> </li> <li class=md-nav__item> <a href=profiles_filtering.html class=md-nav__link> <span class=md-ellipsis> profiles_filtering </span> </a> </li> <li class=md-nav__item> <a href=profiling.html class=md-nav__link> <span class=md-ellipsis> profiling </span> </a> </li> <li class=md-nav__item> <a href=python_module_tools.html class=md-nav__link> <span class=md-ellipsis> python_module_tools </span> </a> </li> <li class=md-nav__item> <a href=terminal.html class=md-nav__link> <span class=md-ellipsis> terminal </span> </a> </li> <li class=md-nav__item> <a href=transcoding.html class=md-nav__link> <span class=md-ellipsis> transcoding </span> </a> </li> <li class=md-nav__item> <a href=vendor_bin_utils.html class=md-nav__link> <span class=md-ellipsis> vendor_bin_utils </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../pipeline/actions.html class=md-nav__link> <span class=md-ellipsis> pipeline </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../plugins/actions/open_file_explorer.html class=md-nav__link> <span class=md-ellipsis> plugins </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../resources/index.html class=md-nav__link> <span class=md-ellipsis> resources </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../scripts/ocio_wrapper.html class=md-nav__link> <span class=md-ellipsis> scripts </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../settings/lib.html class=md-nav__link> <span class=md-ellipsis> settings </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../style/color_defs.html class=md-nav__link> <span class=md-ellipsis> style </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../tests/conftest.html class=md-nav__link> <span class=md-ellipsis> tests </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../tools/attribute_defs/_constants.html class=md-nav__link> <span class=md-ellipsis> tools </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../vendor/python/qargparse.html class=md-nav__link> <span class=md-ellipsis> vendor </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../version.html class=md-nav__link> <span class=md-ellipsis> version </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../server/settings/conversion.html class=md-nav__link> <span class=md-ellipsis> server </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#client.ayon_core.lib class=md-nav__link> <span class=md-ellipsis> lib </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.AYONSecureRegistry class=md-nav__link> <span class=md-ellipsis> AYONSecureRegistry </span> </a> <nav class=md-nav aria-label=AYONSecureRegistry> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.lib.AYONSecureRegistry.delete_item class=md-nav__link> <span class=md-ellipsis> delete_item </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.AYONSecureRegistry.get_item class=md-nav__link> <span class=md-ellipsis> get_item </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.AYONSecureRegistry.set_item class=md-nav__link> <span class=md-ellipsis> set_item </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.AYONSettingsRegistry class=md-nav__link> <span class=md-ellipsis> AYONSettingsRegistry </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.AbstractAttrDef class=md-nav__link> <span class=md-ellipsis> AbstractAttrDef </span> </a> <nav class=md-nav aria-label=AbstractAttrDef> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.lib.AbstractAttrDef.type class=md-nav__link> <span class=md-ellipsis> type </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.AbstractAttrDef.convert_value class=md-nav__link> <span class=md-ellipsis> convert_value </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.AbstractAttrDef.deserialize class=md-nav__link> <span class=md-ellipsis> deserialize </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.AbstractAttrDef.is_value_valid class=md-nav__link> <span class=md-ellipsis> is_value_valid </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.AbstractAttrDef.serialize class=md-nav__link> <span class=md-ellipsis> serialize </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.BoolDef class=md-nav__link> <span class=md-ellipsis> BoolDef </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.CacheItem class=md-nav__link> <span class=md-ellipsis> CacheItem </span> </a> <nav class=md-nav aria-label=CacheItem> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.lib.CacheItem.is_valid class=md-nav__link> <span class=md-ellipsis> is_valid </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.CacheItem.get_data class=md-nav__link> <span class=md-ellipsis> get_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.CacheItem.reset class=md-nav__link> <span class=md-ellipsis> reset </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.CacheItem.set_invalid class=md-nav__link> <span class=md-ellipsis> set_invalid </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.CacheItem.set_lifetime class=md-nav__link> <span class=md-ellipsis> set_lifetime </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.CacheItem.update_data class=md-nav__link> <span class=md-ellipsis> update_data </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.DefaultKeysDict class=md-nav__link> <span class=md-ellipsis> DefaultKeysDict </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.EnumDef class=md-nav__link> <span class=md-ellipsis> EnumDef </span> </a> <nav class=md-nav aria-label=EnumDef> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.lib.EnumDef.is_value_valid class=md-nav__link> <span class=md-ellipsis> is_value_valid </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.EnumDef.prepare_enum_items class=md-nav__link> <span class=md-ellipsis> prepare_enum_items </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.FileDef class=md-nav__link> <span class=md-ellipsis> FileDef </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.FileDefItem class=md-nav__link> <span class=md-ellipsis> FileDefItem </span> </a> <nav class=md-nav aria-label=FileDefItem> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.lib.FileDefItem.from_value class=md-nav__link> <span class=md-ellipsis> from_value </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.FormatObject class=md-nav__link> <span class=md-ellipsis> FormatObject </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.IniSettingRegistry class=md-nav__link> <span class=md-ellipsis> IniSettingRegistry </span> </a> <nav class=md-nav aria-label=IniSettingRegistry> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.lib.IniSettingRegistry.delete_item_from_section class=md-nav__link> <span class=md-ellipsis> delete_item_from_section </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.IniSettingRegistry.get_item class=md-nav__link> <span class=md-ellipsis> get_item </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.IniSettingRegistry.get_item_from_section class=md-nav__link> <span class=md-ellipsis> get_item_from_section </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.IniSettingRegistry.set_item class=md-nav__link> <span class=md-ellipsis> set_item </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.IniSettingRegistry.set_item_section class=md-nav__link> <span class=md-ellipsis> set_item_section </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.JSONSettingRegistry class=md-nav__link> <span class=md-ellipsis> JSONSettingRegistry </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.Logger class=md-nav__link> <span class=md-ellipsis> Logger </span> </a> <nav class=md-nav aria-label=Logger> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.lib.Logger.get_process_data class=md-nav__link> <span class=md-ellipsis> get_process_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.Logger.get_process_name class=md-nav__link> <span class=md-ellipsis> get_process_name </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.Logger.set_process_name class=md-nav__link> <span class=md-ellipsis> set_process_name </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.NestedCacheItem class=md-nav__link> <span class=md-ellipsis> NestedCacheItem </span> </a> <nav class=md-nav aria-label=NestedCacheItem> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.lib.NestedCacheItem.is_valid class=md-nav__link> <span class=md-ellipsis> is_valid </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.NestedCacheItem.__getitem__ class=md-nav__link> <span class=md-ellipsis> __getitem__ </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.NestedCacheItem.__setitem__ class=md-nav__link> <span class=md-ellipsis> __setitem__ </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.NestedCacheItem.cached_count class=md-nav__link> <span class=md-ellipsis> cached_count </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.NestedCacheItem.clear_invalid class=md-nav__link> <span class=md-ellipsis> clear_invalid </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.NestedCacheItem.clear_key class=md-nav__link> <span class=md-ellipsis> clear_key </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.NestedCacheItem.get class=md-nav__link> <span class=md-ellipsis> get </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.NestedCacheItem.reset class=md-nav__link> <span class=md-ellipsis> reset </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.NestedCacheItem.set_lifetime class=md-nav__link> <span class=md-ellipsis> set_lifetime </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.NumberDef class=md-nav__link> <span class=md-ellipsis> NumberDef </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.StringTemplate class=md-nav__link> <span class=md-ellipsis> StringTemplate </span> </a> <nav class=md-nav aria-label=StringTemplate> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.lib.StringTemplate.format class=md-nav__link> <span class=md-ellipsis> format </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.TemplateUnsolved class=md-nav__link> <span class=md-ellipsis> TemplateUnsolved </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.TextDef class=md-nav__link> <span class=md-ellipsis> TextDef </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.ToolNotFoundError class=md-nav__link> <span class=md-ellipsis> ToolNotFoundError </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.UnknownDef class=md-nav__link> <span class=md-ellipsis> UnknownDef </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.classes_from_module class=md-nav__link> <span class=md-ellipsis> classes_from_module </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.collect_frames class=md-nav__link> <span class=md-ellipsis> collect_frames </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.compile_list_of_regexes class=md-nav__link> <span class=md-ellipsis> compile_list_of_regexes </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.compute_env_variables_structure class=md-nav__link> <span class=md-ellipsis> compute_env_variables_structure </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.convert_ffprobe_fps_to_float class=md-nav__link> <span class=md-ellipsis> convert_ffprobe_fps_to_float </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.convert_ffprobe_fps_value class=md-nav__link> <span class=md-ellipsis> convert_ffprobe_fps_value </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.convert_input_paths_for_ffmpeg class=md-nav__link> <span class=md-ellipsis> convert_input_paths_for_ffmpeg </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.create_hard_link class=md-nav__link> <span class=md-ellipsis> create_hard_link </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.emit_event class=md-nav__link> <span class=md-ellipsis> emit_event </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.env_value_to_bool class=md-nav__link> <span class=md-ellipsis> env_value_to_bool </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.filter_profiles class=md-nav__link> <span class=md-ellipsis> filter_profiles </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.find_executable class=md-nav__link> <span class=md-ellipsis> find_executable </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.format_file_size class=md-nav__link> <span class=md-ellipsis> format_file_size </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.get_addons_resources_dir class=md-nav__link> <span class=md-ellipsis> get_addons_resources_dir </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.get_ayon_launcher_args class=md-nav__link> <span class=md-ellipsis> get_ayon_launcher_args </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.get_ayon_user_entity class=md-nav__link> <span class=md-ellipsis> get_ayon_user_entity </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.get_ayon_username class=md-nav__link> <span class=md-ellipsis> get_ayon_username </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.get_datetime_data class=md-nav__link> <span class=md-ellipsis> get_datetime_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.get_ffmpeg_codec_args class=md-nav__link> <span class=md-ellipsis> get_ffmpeg_codec_args </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.get_ffmpeg_format_args class=md-nav__link> <span class=md-ellipsis> get_ffmpeg_format_args </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.get_ffmpeg_tool_args class=md-nav__link> <span class=md-ellipsis> get_ffmpeg_tool_args </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.get_ffmpeg_tool_path class=md-nav__link> <span class=md-ellipsis> get_ffmpeg_tool_path </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.get_ffprobe_data class=md-nav__link> <span class=md-ellipsis> get_ffprobe_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.get_ffprobe_streams class=md-nav__link> <span class=md-ellipsis> get_ffprobe_streams </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.get_last_version_from_path class=md-nav__link> <span class=md-ellipsis> get_last_version_from_path </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.get_launcher_local_dir class=md-nav__link> <span class=md-ellipsis> get_launcher_local_dir </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.get_launcher_storage_dir class=md-nav__link> <span class=md-ellipsis> get_launcher_storage_dir </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.get_linux_launcher_args class=md-nav__link> <span class=md-ellipsis> get_linux_launcher_args </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.get_local_site_id class=md-nav__link> <span class=md-ellipsis> get_local_site_id </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.get_media_mime_type class=md-nav__link> <span class=md-ellipsis> get_media_mime_type </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.get_oiio_tool_args class=md-nav__link> <span class=md-ellipsis> get_oiio_tool_args </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.get_oiio_tools_path class=md-nav__link> <span class=md-ellipsis> get_oiio_tools_path </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.get_paths_from_environ class=md-nav__link> <span class=md-ellipsis> get_paths_from_environ </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.get_rescaled_command_arguments class=md-nav__link> <span class=md-ellipsis> get_rescaled_command_arguments </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.get_settings_variant class=md-nav__link> <span class=md-ellipsis> get_settings_variant </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.get_timestamp class=md-nav__link> <span class=md-ellipsis> get_timestamp </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.get_transcode_temp_directory class=md-nav__link> <span class=md-ellipsis> get_transcode_temp_directory </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.get_version_from_path class=md-nav__link> <span class=md-ellipsis> get_version_from_path </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.import_filepath class=md-nav__link> <span class=md-ellipsis> import_filepath </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.import_module_from_dirpath class=md-nav__link> <span class=md-ellipsis> import_module_from_dirpath </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.initialize_ayon_connection class=md-nav__link> <span class=md-ellipsis> initialize_ayon_connection </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.is_dev_mode_enabled class=md-nav__link> <span class=md-ellipsis> is_dev_mode_enabled </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.is_func_signature_supported class=md-nav__link> <span class=md-ellipsis> is_func_signature_supported </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.is_in_ayon_launcher_process class=md-nav__link> <span class=md-ellipsis> is_in_ayon_launcher_process </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.is_in_tests class=md-nav__link> <span class=md-ellipsis> is_in_tests </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.is_oiio_supported class=md-nav__link> <span class=md-ellipsis> is_oiio_supported </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.is_running_from_build class=md-nav__link> <span class=md-ellipsis> is_running_from_build </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.is_using_ayon_console class=md-nav__link> <span class=md-ellipsis> is_using_ayon_console </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.merge_env_variables class=md-nav__link> <span class=md-ellipsis> merge_env_variables </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.modules_from_path class=md-nav__link> <span class=md-ellipsis> modules_from_path </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.path_to_subprocess_arg class=md-nav__link> <span class=md-ellipsis> path_to_subprocess_arg </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.prepare_template_data class=md-nav__link> <span class=md-ellipsis> prepare_template_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.recursive_bases_from_class class=md-nav__link> <span class=md-ellipsis> recursive_bases_from_class </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.register_event_callback class=md-nav__link> <span class=md-ellipsis> register_event_callback </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.run_ayon_launcher_process class=md-nav__link> <span class=md-ellipsis> run_ayon_launcher_process </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.run_detached_ayon_launcher_process class=md-nav__link> <span class=md-ellipsis> run_detached_ayon_launcher_process </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.run_detached_process class=md-nav__link> <span class=md-ellipsis> run_detached_process </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.run_subprocess class=md-nav__link> <span class=md-ellipsis> run_subprocess </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.should_convert_for_ffmpeg class=md-nav__link> <span class=md-ellipsis> should_convert_for_ffmpeg </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.source_hash class=md-nav__link> <span class=md-ellipsis> source_hash </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.lib.version_up class=md-nav__link> <span class=md-ellipsis> version_up </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>lib</h1> <div class="doc doc-object doc-module"> <a id=client.ayon_core.lib></a> <div class="doc doc-contents first"> <p>AYON lib functions.</p> <div class="doc doc-children"> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.lib.AYONSecureRegistry class="doc doc-heading"> <code>AYONSecureRegistry</code> </h2> <div class="doc doc-contents "> <p>Store information using keyring.</p> <p>Registry should be used for private data that should be available only for user.</p> <p>All passed registry names will have added prefix <code>AYON/</code> to easier identify which data were created by AYON.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Name of registry used as the identifier for data.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/local_settings.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>AYONSecureRegistry</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Store information using keyring.</span>

<span class=sd>    Registry should be used for private data that should be available only for</span>
<span class=sd>    user.</span>

<span class=sd>    All passed registry names will have added prefix `AYON/` to easier</span>
<span class=sd>    identify which data were created by AYON.</span>

<span class=sd>    Args:</span>
<span class=sd>        name(str): Name of registry used as the identifier for data.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=kn>import</span><span class=w> </span><span class=nn>keyring</span>

        <span class=k>except</span> <span class=ne>Exception</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>NotImplementedError</span><span class=p>(</span>
                <span class=s2>&quot;Python module `keyring` is not available.&quot;</span>
            <span class=p>)</span>

        <span class=c1># hack for cx_freeze and Windows keyring backend</span>
        <span class=k>if</span> <span class=n>platform</span><span class=o>.</span><span class=n>system</span><span class=p>()</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span> <span class=o>==</span> <span class=s2>&quot;windows&quot;</span><span class=p>:</span>
            <span class=kn>from</span><span class=w> </span><span class=nn>keyring.backends</span><span class=w> </span><span class=kn>import</span> <span class=n>Windows</span>

            <span class=n>keyring</span><span class=o>.</span><span class=n>set_keyring</span><span class=p>(</span><span class=n>Windows</span><span class=o>.</span><span class=n>WinVaultKeyring</span><span class=p>())</span>

        <span class=c1># Force &quot;AYON&quot; prefix</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_name</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&quot;AYON/</span><span class=si>{</span><span class=n>name</span><span class=si>}</span><span class=s2>&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_item</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Set sensitive item into the system&#39;s keyring.</span>

<span class=sd>        This uses `Keyring module`_ to save sensitive stuff into the system&#39;s</span>
<span class=sd>        keyring.</span>

<span class=sd>        Args:</span>
<span class=sd>            name (str): Name of the item.</span>
<span class=sd>            value (str): Value of the item.</span>

<span class=sd>        .. _Keyring module:</span>
<span class=sd>            https://github.com/jaraco/keyring</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=kn>import</span><span class=w> </span><span class=nn>keyring</span>

        <span class=n>keyring</span><span class=o>.</span><span class=n>set_password</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_name</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>get_item</span><span class=o>.</span><span class=n>cache_clear</span><span class=p>()</span>

    <span class=nd>@lru_cache</span><span class=p>(</span><span class=n>maxsize</span><span class=o>=</span><span class=mi>32</span><span class=p>)</span>
    <span class=k>def</span><span class=w> </span><span class=nf>get_item</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>default</span><span class=p>:</span> <span class=n>Any</span> <span class=o>=</span> <span class=n>_PLACEHOLDER</span>
    <span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get value of sensitive item from the system&#39;s keyring.</span>

<span class=sd>        See also `Keyring module`_</span>

<span class=sd>        Args:</span>
<span class=sd>            name (str): Name of the item.</span>
<span class=sd>            default (Any): Default value if the item is not available.</span>

<span class=sd>        Returns:</span>
<span class=sd>            value (str): Value of the item.</span>

<span class=sd>        Raises:</span>
<span class=sd>            RegistryItemNotFound: If the item doesn&#39;t exist and default</span>
<span class=sd>                is not defined.</span>

<span class=sd>        .. _Keyring module:</span>
<span class=sd>            https://github.com/jaraco/keyring</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=kn>import</span><span class=w> </span><span class=nn>keyring</span>

        <span class=c1># Capture &#39;ItemNotFoundException&#39; exception (on linux)</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=kn>from</span><span class=w> </span><span class=nn>secretstorage.exceptions</span><span class=w> </span><span class=kn>import</span> <span class=n>ItemNotFoundException</span>
        <span class=k>except</span> <span class=ne>ImportError</span><span class=p>:</span>
            <span class=n>ItemNotFoundException</span> <span class=o>=</span> <span class=n>_FakeException</span>

        <span class=k>try</span><span class=p>:</span>
            <span class=n>value</span> <span class=o>=</span> <span class=n>keyring</span><span class=o>.</span><span class=n>get_password</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_name</span><span class=p>,</span> <span class=n>name</span><span class=p>)</span>
        <span class=k>except</span> <span class=n>ItemNotFoundException</span><span class=p>:</span>
            <span class=n>value</span> <span class=o>=</span> <span class=kc>None</span>

        <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>value</span>

        <span class=k>if</span> <span class=n>default</span> <span class=ow>is</span> <span class=ow>not</span> <span class=n>_PLACEHOLDER</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>default</span>

        <span class=k>raise</span> <span class=n>RegistryItemNotFound</span><span class=p>(</span>
            <span class=sa>f</span><span class=s2>&quot;Item </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>_name</span><span class=si>}</span><span class=s2>:</span><span class=si>{</span><span class=n>name</span><span class=si>}</span><span class=s2> not found in keyring.&quot;</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>delete_item</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Delete value stored in the system&#39;s keyring.</span>

<span class=sd>        See also `Keyring module`_</span>

<span class=sd>        Args:</span>
<span class=sd>            name (str): Name of the item to be deleted.</span>

<span class=sd>        .. _Keyring module:</span>
<span class=sd>            https://github.com/jaraco/keyring</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=kn>import</span><span class=w> </span><span class=nn>keyring</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>get_item</span><span class=o>.</span><span class=n>cache_clear</span><span class=p>()</span>
        <span class=n>keyring</span><span class=o>.</span><span class=n>delete_password</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_name</span><span class=p>,</span> <span class=n>name</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.lib.AYONSecureRegistry.delete_item class="doc doc-heading"> <code class="highlight language-python"><span class=n>delete_item</span><span class=p>(</span><span class=n>name</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Delete value stored in the system's keyring.</p> <p>See also <code>Keyring module</code>_</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Name of the item to be deleted.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p>.. _Keyring module: https://github.com/jaraco/keyring</p> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/local_settings.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>delete_item</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Delete value stored in the system&#39;s keyring.</span>

<span class=sd>    See also `Keyring module`_</span>

<span class=sd>    Args:</span>
<span class=sd>        name (str): Name of the item to be deleted.</span>

<span class=sd>    .. _Keyring module:</span>
<span class=sd>        https://github.com/jaraco/keyring</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=kn>import</span><span class=w> </span><span class=nn>keyring</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>get_item</span><span class=o>.</span><span class=n>cache_clear</span><span class=p>()</span>
    <span class=n>keyring</span><span class=o>.</span><span class=n>delete_password</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_name</span><span class=p>,</span> <span class=n>name</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.lib.AYONSecureRegistry.get_item class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_item</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=n>_PLACEHOLDER</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-cached"><code>cached</code></small> </span> </h3> <div class="doc doc-contents "> <p>Get value of sensitive item from the system's keyring.</p> <p>See also <code>Keyring module</code>_</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Name of the item.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>default</code> </td> <td> <code><span title=typing.Any>Any</span></code> </td> <td> <div class=doc-md-description> <p>Default value if the item is not available.</p> </div> </td> <td> <code><span title=client.ayon_core.lib.local_settings._PLACEHOLDER>_PLACEHOLDER</span></code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>value</code></td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Value of the item.</p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="RegistryItemNotFound (client.ayon_core.lib.local_settings.RegistryItemNotFound)" href=local_settings.html#client.ayon_core.lib.local_settings.RegistryItemNotFound>RegistryItemNotFound</a></code> </td> <td> <div class=doc-md-description> <p>If the item doesn't exist and default is not defined.</p> </div> </td> </tr> </tbody> </table> <p>.. _Keyring module: https://github.com/jaraco/keyring</p> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/local_settings.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@lru_cache</span><span class=p>(</span><span class=n>maxsize</span><span class=o>=</span><span class=mi>32</span><span class=p>)</span>
<span class=k>def</span><span class=w> </span><span class=nf>get_item</span><span class=p>(</span>
    <span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>default</span><span class=p>:</span> <span class=n>Any</span> <span class=o>=</span> <span class=n>_PLACEHOLDER</span>
<span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get value of sensitive item from the system&#39;s keyring.</span>

<span class=sd>    See also `Keyring module`_</span>

<span class=sd>    Args:</span>
<span class=sd>        name (str): Name of the item.</span>
<span class=sd>        default (Any): Default value if the item is not available.</span>

<span class=sd>    Returns:</span>
<span class=sd>        value (str): Value of the item.</span>

<span class=sd>    Raises:</span>
<span class=sd>        RegistryItemNotFound: If the item doesn&#39;t exist and default</span>
<span class=sd>            is not defined.</span>

<span class=sd>    .. _Keyring module:</span>
<span class=sd>        https://github.com/jaraco/keyring</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=kn>import</span><span class=w> </span><span class=nn>keyring</span>

    <span class=c1># Capture &#39;ItemNotFoundException&#39; exception (on linux)</span>
    <span class=k>try</span><span class=p>:</span>
        <span class=kn>from</span><span class=w> </span><span class=nn>secretstorage.exceptions</span><span class=w> </span><span class=kn>import</span> <span class=n>ItemNotFoundException</span>
    <span class=k>except</span> <span class=ne>ImportError</span><span class=p>:</span>
        <span class=n>ItemNotFoundException</span> <span class=o>=</span> <span class=n>_FakeException</span>

    <span class=k>try</span><span class=p>:</span>
        <span class=n>value</span> <span class=o>=</span> <span class=n>keyring</span><span class=o>.</span><span class=n>get_password</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_name</span><span class=p>,</span> <span class=n>name</span><span class=p>)</span>
    <span class=k>except</span> <span class=n>ItemNotFoundException</span><span class=p>:</span>
        <span class=n>value</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>value</span>

    <span class=k>if</span> <span class=n>default</span> <span class=ow>is</span> <span class=ow>not</span> <span class=n>_PLACEHOLDER</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>default</span>

    <span class=k>raise</span> <span class=n>RegistryItemNotFound</span><span class=p>(</span>
        <span class=sa>f</span><span class=s2>&quot;Item </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>_name</span><span class=si>}</span><span class=s2>:</span><span class=si>{</span><span class=n>name</span><span class=si>}</span><span class=s2> not found in keyring.&quot;</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.lib.AYONSecureRegistry.set_item class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_item</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Set sensitive item into the system's keyring.</p> <p>This uses <code>Keyring module</code>_ to save sensitive stuff into the system's keyring.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Name of the item.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>value</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Value of the item.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p>.. _Keyring module: https://github.com/jaraco/keyring</p> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/local_settings.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_item</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Set sensitive item into the system&#39;s keyring.</span>

<span class=sd>    This uses `Keyring module`_ to save sensitive stuff into the system&#39;s</span>
<span class=sd>    keyring.</span>

<span class=sd>    Args:</span>
<span class=sd>        name (str): Name of the item.</span>
<span class=sd>        value (str): Value of the item.</span>

<span class=sd>    .. _Keyring module:</span>
<span class=sd>        https://github.com/jaraco/keyring</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=kn>import</span><span class=w> </span><span class=nn>keyring</span>

    <span class=n>keyring</span><span class=o>.</span><span class=n>set_password</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_name</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>get_item</span><span class=o>.</span><span class=n>cache_clear</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.lib.AYONSettingsRegistry class="doc doc-heading"> <code>AYONSettingsRegistry</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="JSONSettingRegistry (client.ayon_core.lib.local_settings.JSONSettingRegistry)" href=local_settings.html#client.ayon_core.lib.local_settings.JSONSettingRegistry>JSONSettingRegistry</a></code></p> <p>Class handling AYON general settings registry.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>name</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Name of the registry. Using 'None' or not passing name is deprecated.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/local_settings.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>526</span>
<span class=normal>527</span>
<span class=normal>528</span>
<span class=normal>529</span>
<span class=normal>530</span>
<span class=normal>531</span>
<span class=normal>532</span>
<span class=normal>533</span>
<span class=normal>534</span>
<span class=normal>535</span>
<span class=normal>536</span>
<span class=normal>537</span>
<span class=normal>538</span>
<span class=normal>539</span>
<span class=normal>540</span>
<span class=normal>541</span>
<span class=normal>542</span>
<span class=normal>543</span>
<span class=normal>544</span>
<span class=normal>545</span>
<span class=normal>546</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>AYONSettingsRegistry</span><span class=p>(</span><span class=n>JSONSettingRegistry</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Class handling AYON general settings registry.</span>

<span class=sd>    Args:</span>
<span class=sd>        name (Optional[str]): Name of the registry. Using &#39;None&#39; or not</span>
<span class=sd>            passing name is deprecated.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>name</span><span class=p>:</span>
            <span class=n>name</span> <span class=o>=</span> <span class=s2>&quot;AYON_settings&quot;</span>
            <span class=n>warnings</span><span class=o>.</span><span class=n>warn</span><span class=p>(</span>
                <span class=p>(</span>
                    <span class=s2>&quot;Used &#39;AYONSettingsRegistry&#39; without &#39;name&#39; argument.&quot;</span>
                    <span class=s2>&quot; The argument will be required in future versions.&quot;</span>
                <span class=p>),</span>
                <span class=ne>DeprecationWarning</span><span class=p>,</span>
                <span class=n>stacklevel</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span>
            <span class=p>)</span>
        <span class=n>path</span> <span class=o>=</span> <span class=n>get_launcher_storage_dir</span><span class=p>()</span>
        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>path</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.lib.AbstractAttrDef class="doc doc-heading"> <code>AbstractAttrDef</code> </h2> <div class="doc doc-contents "> <p>Abstraction of attribute definition.</p> <p>Each attribute definition must have implemented validation and conversion method.</p> <p>Attribute definition should have ability to return "default" value. That can be based on passed data into <code>__init__</code> so is not abstracted to attribute.</p> <p>QUESTION: How to force to set <code>key</code> attribute?</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>key</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Under which key will be attribute value stored.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>default</code> </td> <td> <code><span title=typing.Any>Any</span></code> </td> <td> <div class=doc-md-description> <p>Default value of an attribute.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>label</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Attribute label.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>tooltip</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Attribute tooltip.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>is_label_horizontal</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=bool>bool</span>]</code> </td> <td> <div class=doc-md-description> <p>UI specific argument. Specify if label is next to value input or ahead.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>visible</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=bool>bool</span>]</code> </td> <td> <div class=doc-md-description> <p>Item is shown to user (for UI purposes).</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>enabled</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=bool>bool</span>]</code> </td> <td> <div class=doc-md-description> <p>Item is enabled (for UI purposes).</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>hidden</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=bool>bool</span>]</code> </td> <td> <div class=doc-md-description> <p>DEPRECATED: Use 'visible' instead.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>disabled</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=bool>bool</span>]</code> </td> <td> <div class=doc-md-description> <p>DEPRECATED: Use 'enabled' instead.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/attribute_definitions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span>
<span class=normal>277</span>
<span class=normal>278</span>
<span class=normal>279</span>
<span class=normal>280</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>AbstractAttrDef</span><span class=p>(</span><span class=n>metaclass</span><span class=o>=</span><span class=n>AbstractAttrDefMeta</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Abstraction of attribute definition.</span>

<span class=sd>    Each attribute definition must have implemented validation and</span>
<span class=sd>    conversion method.</span>

<span class=sd>    Attribute definition should have ability to return &quot;default&quot; value. That</span>
<span class=sd>    can be based on passed data into `__init__` so is not abstracted to</span>
<span class=sd>    attribute.</span>

<span class=sd>    QUESTION:</span>
<span class=sd>    How to force to set `key` attribute?</span>

<span class=sd>    Args:</span>
<span class=sd>        key (str): Under which key will be attribute value stored.</span>
<span class=sd>        default (Any): Default value of an attribute.</span>
<span class=sd>        label (Optional[str]): Attribute label.</span>
<span class=sd>        tooltip (Optional[str]): Attribute tooltip.</span>
<span class=sd>        is_label_horizontal (Optional[bool]): UI specific argument. Specify</span>
<span class=sd>            if label is next to value input or ahead.</span>
<span class=sd>        visible (Optional[bool]): Item is shown to user (for UI purposes).</span>
<span class=sd>        enabled (Optional[bool]): Item is enabled (for UI purposes).</span>
<span class=sd>        hidden (Optional[bool]): DEPRECATED: Use &#39;visible&#39; instead.</span>
<span class=sd>        disabled (Optional[bool]): DEPRECATED: Use &#39;enabled&#39; instead.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>type_attributes</span> <span class=o>=</span> <span class=p>[]</span>

    <span class=n>is_value_def</span> <span class=o>=</span> <span class=kc>True</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
        <span class=n>default</span><span class=p>:</span> <span class=n>Any</span><span class=p>,</span>
        <span class=n>label</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
        <span class=n>tooltip</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
        <span class=n>is_label_horizontal</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>bool</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
        <span class=n>visible</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>bool</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
        <span class=n>enabled</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>bool</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
        <span class=n>hidden</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>bool</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
        <span class=n>disabled</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>bool</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
    <span class=p>):</span>
        <span class=k>if</span> <span class=n>is_label_horizontal</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>is_label_horizontal</span> <span class=o>=</span> <span class=kc>True</span>

        <span class=n>enabled</span> <span class=o>=</span> <span class=n>_convert_reversed_attr</span><span class=p>(</span>
            <span class=n>enabled</span><span class=p>,</span> <span class=n>disabled</span><span class=p>,</span> <span class=s2>&quot;enabled&quot;</span><span class=p>,</span> <span class=s2>&quot;disabled&quot;</span><span class=p>,</span> <span class=kc>True</span>
        <span class=p>)</span>
        <span class=n>visible</span> <span class=o>=</span> <span class=n>_convert_reversed_attr</span><span class=p>(</span>
            <span class=n>visible</span><span class=p>,</span> <span class=n>hidden</span><span class=p>,</span> <span class=s2>&quot;visible&quot;</span><span class=p>,</span> <span class=s2>&quot;hidden&quot;</span><span class=p>,</span> <span class=kc>True</span>
        <span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>key</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=n>key</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>label</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=n>label</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>tooltip</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=n>tooltip</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>default</span><span class=p>:</span> <span class=n>Any</span> <span class=o>=</span> <span class=n>default</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>is_label_horizontal</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=n>is_label_horizontal</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>visible</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=n>visible</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>enabled</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=n>enabled</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_id</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>()</span><span class=o>.</span><span class=n>hex</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>__init__class__</span> <span class=o>=</span> <span class=n>AbstractAttrDef</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>id</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_id</span>

    <span class=k>def</span><span class=w> </span><span class=nf>clone</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=s2>&quot;Self&quot;</span><span class=p>:</span>
        <span class=n>data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>serialize</span><span class=p>()</span>
        <span class=n>data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s2>&quot;type&quot;</span><span class=p>)</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>deserialize</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>hidden</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
        <span class=k>return</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>visible</span>

    <span class=nd>@hidden</span><span class=o>.</span><span class=n>setter</span>
    <span class=k>def</span><span class=w> </span><span class=nf>hidden</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=nb>bool</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>visible</span> <span class=o>=</span> <span class=ow>not</span> <span class=n>value</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>disabled</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
        <span class=k>return</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>enabled</span>

    <span class=nd>@disabled</span><span class=o>.</span><span class=n>setter</span>
    <span class=k>def</span><span class=w> </span><span class=nf>disabled</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=nb>bool</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>enabled</span> <span class=o>=</span> <span class=ow>not</span> <span class=n>value</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__eq__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>other</span><span class=p>:</span> <span class=n>Any</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>compare_to_def</span><span class=p>(</span><span class=n>other</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__ne__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>other</span><span class=p>:</span> <span class=n>Any</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
        <span class=k>return</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>compare_to_def</span><span class=p>(</span><span class=n>other</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>compare_to_def</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>other</span><span class=p>:</span> <span class=n>Any</span><span class=p>,</span>
        <span class=n>ignore_default</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>bool</span><span class=p>]</span> <span class=o>=</span> <span class=kc>False</span><span class=p>,</span>
        <span class=n>ignore_enabled</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>bool</span><span class=p>]</span> <span class=o>=</span> <span class=kc>False</span><span class=p>,</span>
        <span class=n>ignore_visible</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>bool</span><span class=p>]</span> <span class=o>=</span> <span class=kc>False</span><span class=p>,</span>
        <span class=n>ignore_def_type_compare</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>bool</span><span class=p>]</span> <span class=o>=</span> <span class=kc>False</span><span class=p>,</span>
    <span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>other</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=p>)</span> <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>key</span> <span class=o>!=</span> <span class=n>other</span><span class=o>.</span><span class=n>key</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>False</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>ignore_def_type_compare</span> <span class=ow>and</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_def_type_compare</span><span class=p>(</span><span class=n>other</span><span class=p>):</span>
            <span class=k>return</span> <span class=kc>False</span>
        <span class=k>return</span> <span class=p>(</span>
            <span class=p>(</span><span class=n>ignore_default</span> <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>default</span> <span class=o>==</span> <span class=n>other</span><span class=o>.</span><span class=n>default</span><span class=p>)</span>
            <span class=ow>and</span> <span class=p>(</span><span class=n>ignore_visible</span> <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>visible</span> <span class=o>==</span> <span class=n>other</span><span class=o>.</span><span class=n>visible</span><span class=p>)</span>
            <span class=ow>and</span> <span class=p>(</span><span class=n>ignore_enabled</span> <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>enabled</span> <span class=o>==</span> <span class=n>other</span><span class=o>.</span><span class=n>enabled</span><span class=p>)</span>
        <span class=p>)</span>

    <span class=nd>@abstractmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>is_value_valid</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=n>Any</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Check if value is valid.</span>

<span class=sd>        This should return False if value is not valid based</span>
<span class=sd>            on definition type.</span>

<span class=sd>        Args:</span>
<span class=sd>            value (Any): Value to validate based on definition type.</span>

<span class=sd>        Returns:</span>
<span class=sd>            bool: True if value is valid.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>pass</span>

    <span class=nd>@property</span>
    <span class=nd>@abstractmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>type</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Attribute definition type also used as identifier of class.</span>

<span class=sd>        Returns:</span>
<span class=sd>            str: Type of attribute definition.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>pass</span>

    <span class=nd>@abstractmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>convert_value</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=n>Any</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Any</span><span class=p>:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Convert value to a valid one.</span>

<span class=sd>        Convert passed value to a valid type. Use default if value can&#39;t be</span>
<span class=sd>        converted.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>pass</span>

    <span class=k>def</span><span class=w> </span><span class=nf>serialize</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Serialize object to data so it&#39;s possible to recreate it.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Dict[str, Any]: Serialized object that can be passed to</span>
<span class=sd>                &#39;deserialize&#39; method.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>data</span> <span class=o>=</span> <span class=p>{</span>
            <span class=s2>&quot;type&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>type</span><span class=p>,</span>
            <span class=s2>&quot;key&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>key</span><span class=p>,</span>
            <span class=s2>&quot;label&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>label</span><span class=p>,</span>
            <span class=s2>&quot;tooltip&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>tooltip</span><span class=p>,</span>
            <span class=s2>&quot;default&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>default</span><span class=p>,</span>
            <span class=s2>&quot;is_label_horizontal&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>is_label_horizontal</span><span class=p>,</span>
            <span class=s2>&quot;visible&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>visible</span><span class=p>,</span>
            <span class=s2>&quot;enabled&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>enabled</span>
        <span class=p>}</span>
        <span class=k>for</span> <span class=n>attr</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>type_attributes</span><span class=p>:</span>
            <span class=n>data</span><span class=p>[</span><span class=n>attr</span><span class=p>]</span> <span class=o>=</span> <span class=nb>getattr</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>attr</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>data</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>deserialize</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>data</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=s2>&quot;Self&quot;</span><span class=p>:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Recreate object from data.</span>

<span class=sd>        Data can be received using &#39;serialize&#39; method.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=s2>&quot;type&quot;</span> <span class=ow>in</span> <span class=n>data</span><span class=p>:</span>
            <span class=n>data</span> <span class=o>=</span> <span class=nb>dict</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
            <span class=n>data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s2>&quot;type&quot;</span><span class=p>)</span>

        <span class=k>return</span> <span class=bp>cls</span><span class=p>(</span><span class=o>**</span><span class=n>data</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_def_type_compare</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>other</span><span class=p>:</span> <span class=s2>&quot;Self&quot;</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
        <span class=k>return</span> <span class=kc>True</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.lib.AbstractAttrDef.type class="doc doc-heading"> <code class="highlight language-python"><span class=nb>type</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Attribute definition type also used as identifier of class.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Type of attribute definition.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.lib.AbstractAttrDef.convert_value class="doc doc-heading"> <code class="highlight language-python"><span class=n>convert_value</span><span class=p>(</span><span class=n>value</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Convert value to a valid one.</p> <p>Convert passed value to a valid type. Use default if value can't be converted.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/attribute_definitions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@abstractmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>convert_value</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=n>Any</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Any</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Convert value to a valid one.</span>

<span class=sd>    Convert passed value to a valid type. Use default if value can&#39;t be</span>
<span class=sd>    converted.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.lib.AbstractAttrDef.deserialize class="doc doc-heading"> <code class="highlight language-python"><span class=n>deserialize</span><span class=p>(</span><span class=n>data</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Recreate object from data.</p> <p>Data can be received using 'serialize' method.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/attribute_definitions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span>
<span class=normal>277</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@classmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>deserialize</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>data</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=s2>&quot;Self&quot;</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Recreate object from data.</span>

<span class=sd>    Data can be received using &#39;serialize&#39; method.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=s2>&quot;type&quot;</span> <span class=ow>in</span> <span class=n>data</span><span class=p>:</span>
        <span class=n>data</span> <span class=o>=</span> <span class=nb>dict</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
        <span class=n>data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s2>&quot;type&quot;</span><span class=p>)</span>

    <span class=k>return</span> <span class=bp>cls</span><span class=p>(</span><span class=o>**</span><span class=n>data</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.lib.AbstractAttrDef.is_value_valid class="doc doc-heading"> <code class="highlight language-python"><span class=n>is_value_valid</span><span class=p>(</span><span class=n>value</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Check if value is valid.</p> <p>This should return False if value is not valid based on definition type.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>value</code> </td> <td> <code><span title=typing.Any>Any</span></code> </td> <td> <div class=doc-md-description> <p>Value to validate based on definition type.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>bool</code></td> <td> <code><span title=bool>bool</span></code> </td> <td> <div class=doc-md-description> <p>True if value is valid.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/attribute_definitions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@abstractmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>is_value_valid</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=n>Any</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Check if value is valid.</span>

<span class=sd>    This should return False if value is not valid based</span>
<span class=sd>        on definition type.</span>

<span class=sd>    Args:</span>
<span class=sd>        value (Any): Value to validate based on definition type.</span>

<span class=sd>    Returns:</span>
<span class=sd>        bool: True if value is valid.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.lib.AbstractAttrDef.serialize class="doc doc-heading"> <code class="highlight language-python"><span class=n>serialize</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Serialize object to data so it's possible to recreate it.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=typing.Dict>Dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Dict[str, Any]: Serialized object that can be passed to 'deserialize' method.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/attribute_definitions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>serialize</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Serialize object to data so it&#39;s possible to recreate it.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Dict[str, Any]: Serialized object that can be passed to</span>
<span class=sd>            &#39;deserialize&#39; method.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>data</span> <span class=o>=</span> <span class=p>{</span>
        <span class=s2>&quot;type&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>type</span><span class=p>,</span>
        <span class=s2>&quot;key&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>key</span><span class=p>,</span>
        <span class=s2>&quot;label&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>label</span><span class=p>,</span>
        <span class=s2>&quot;tooltip&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>tooltip</span><span class=p>,</span>
        <span class=s2>&quot;default&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>default</span><span class=p>,</span>
        <span class=s2>&quot;is_label_horizontal&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>is_label_horizontal</span><span class=p>,</span>
        <span class=s2>&quot;visible&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>visible</span><span class=p>,</span>
        <span class=s2>&quot;enabled&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>enabled</span>
    <span class=p>}</span>
    <span class=k>for</span> <span class=n>attr</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>type_attributes</span><span class=p>:</span>
        <span class=n>data</span><span class=p>[</span><span class=n>attr</span><span class=p>]</span> <span class=o>=</span> <span class=nb>getattr</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>attr</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>data</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.lib.BoolDef class="doc doc-heading"> <code>BoolDef</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="AbstractAttrDef (client.ayon_core.lib.attribute_definitions.AbstractAttrDef)" href=attribute_definitions.html#client.ayon_core.lib.attribute_definitions.AbstractAttrDef>AbstractAttrDef</a></code></p> <p>Boolean representation.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>default</code> </td> <td> <code><span title=bool>bool</span></code> </td> <td> <div class=doc-md-description> <p>Default value. Set to <code>False</code> if not defined.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/attribute_definitions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>695</span>
<span class=normal>696</span>
<span class=normal>697</span>
<span class=normal>698</span>
<span class=normal>699</span>
<span class=normal>700</span>
<span class=normal>701</span>
<span class=normal>702</span>
<span class=normal>703</span>
<span class=normal>704</span>
<span class=normal>705</span>
<span class=normal>706</span>
<span class=normal>707</span>
<span class=normal>708</span>
<span class=normal>709</span>
<span class=normal>710</span>
<span class=normal>711</span>
<span class=normal>712</span>
<span class=normal>713</span>
<span class=normal>714</span>
<span class=normal>715</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>BoolDef</span><span class=p>(</span><span class=n>AbstractAttrDef</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Boolean representation.</span>

<span class=sd>    Args:</span>
<span class=sd>        default(bool): Default value. Set to `False` if not defined.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;bool&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>default</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>bool</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
        <span class=k>if</span> <span class=n>default</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>default</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=n>default</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>is_value_valid</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=n>Any</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
        <span class=k>return</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>bool</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>convert_value</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=n>Any</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>bool</span><span class=p>):</span>
            <span class=k>return</span> <span class=n>value</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>default</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.lib.CacheItem class="doc doc-heading"> <code>CacheItem</code> </h2> <div class="doc doc-contents "> <p>Simple cache item with lifetime and default factory for default value.</p> <p>Default factory should return default value that is used on init and on reset.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>default_factory</code> </td> <td> <code><span title=Optional>Optional</span>[<span title=callable>callable</span>]</code> </td> <td> <div class=doc-md-description> <p>Function that returns default value used on init and on reset.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>lifetime</code> </td> <td> <code><span title=Optional>Optional</span>[<span title=int>int</span>]</code> </td> <td> <div class=doc-md-description> <p>Lifetime of the cache data in seconds. Default lifetime is 120 seconds.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/cache.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span>
<span class=normal>62</span>
<span class=normal>63</span>
<span class=normal>64</span>
<span class=normal>65</span>
<span class=normal>66</span>
<span class=normal>67</span>
<span class=normal>68</span>
<span class=normal>69</span>
<span class=normal>70</span>
<span class=normal>71</span>
<span class=normal>72</span>
<span class=normal>73</span>
<span class=normal>74</span>
<span class=normal>75</span>
<span class=normal>76</span>
<span class=normal>77</span>
<span class=normal>78</span>
<span class=normal>79</span>
<span class=normal>80</span>
<span class=normal>81</span>
<span class=normal>82</span>
<span class=normal>83</span>
<span class=normal>84</span>
<span class=normal>85</span>
<span class=normal>86</span>
<span class=normal>87</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>CacheItem</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Simple cache item with lifetime and default factory for default value.</span>

<span class=sd>    Default factory should return default value that is used on init</span>
<span class=sd>        and on reset.</span>

<span class=sd>    Args:</span>
<span class=sd>        default_factory (Optional[callable]): Function that returns default</span>
<span class=sd>            value used on init and on reset.</span>
<span class=sd>        lifetime (Optional[int]): Lifetime of the cache data in seconds.</span>
<span class=sd>            Default lifetime is 120 seconds.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>default_factory</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>lifetime</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=k>if</span> <span class=n>lifetime</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>lifetime</span> <span class=o>=</span> <span class=mi>120</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_lifetime</span> <span class=o>=</span> <span class=n>lifetime</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_last_update</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=k>if</span> <span class=n>default_factory</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>default_factory</span> <span class=o>=</span> <span class=n>_default_factory_func</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_default_factory</span> <span class=o>=</span> <span class=n>default_factory</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span> <span class=o>=</span> <span class=n>default_factory</span><span class=p>()</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>is_valid</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Is cache valid to use.</span>

<span class=sd>        Return:</span>
<span class=sd>            bool: True if cache is valid, False otherwise.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_last_update</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>False</span>

        <span class=k>return</span> <span class=p>(</span><span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>-</span> <span class=bp>self</span><span class=o>.</span><span class=n>_last_update</span><span class=p>)</span> <span class=o>&lt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>_lifetime</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_lifetime</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>lifetime</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Change lifetime of cache item.</span>

<span class=sd>        Args:</span>
<span class=sd>            lifetime (int): Lifetime of the cache data in seconds.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_lifetime</span> <span class=o>=</span> <span class=n>lifetime</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_invalid</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Set cache as invalid.&quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_last_update</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=k>def</span><span class=w> </span><span class=nf>reset</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Set cache as invalid and reset data.&quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_last_update</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_default_factory</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Receive cached data.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Any: Any data that are cached.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span>

    <span class=k>def</span><span class=w> </span><span class=nf>update_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>data</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Update cache data.</span>

<span class=sd>        Args:</span>
<span class=sd>            data (Any): Any data that are cached.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_data</span> <span class=o>=</span> <span class=n>data</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_last_update</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.lib.CacheItem.is_valid class="doc doc-heading"> <code class="highlight language-python"><span class=n>is_valid</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Is cache valid to use.</p> <details class=return open> <summary>Return</summary> <p>bool: True if cache is valid, False otherwise.</p> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.lib.CacheItem.get_data class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_data</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Receive cached data.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>Any</code></td> <td> </td> <td> <div class=doc-md-description> <p>Any data that are cached.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/cache.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>70</span>
<span class=normal>71</span>
<span class=normal>72</span>
<span class=normal>73</span>
<span class=normal>74</span>
<span class=normal>75</span>
<span class=normal>76</span>
<span class=normal>77</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Receive cached data.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Any: Any data that are cached.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.lib.CacheItem.reset class="doc doc-heading"> <code class="highlight language-python"><span class=n>reset</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Set cache as invalid and reset data.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/cache.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>64</span>
<span class=normal>65</span>
<span class=normal>66</span>
<span class=normal>67</span>
<span class=normal>68</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>reset</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Set cache as invalid and reset data.&quot;&quot;&quot;</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_last_update</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_default_factory</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.lib.CacheItem.set_invalid class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_invalid</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Set cache as invalid.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/cache.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span>
<span class=normal>62</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_invalid</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Set cache as invalid.&quot;&quot;&quot;</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_last_update</span> <span class=o>=</span> <span class=kc>None</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.lib.CacheItem.set_lifetime class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_lifetime</span><span class=p>(</span><span class=n>lifetime</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Change lifetime of cache item.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>lifetime</code> </td> <td> <code><span title=int>int</span></code> </td> <td> <div class=doc-md-description> <p>Lifetime of the cache data in seconds.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/cache.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_lifetime</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>lifetime</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Change lifetime of cache item.</span>

<span class=sd>    Args:</span>
<span class=sd>        lifetime (int): Lifetime of the cache data in seconds.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_lifetime</span> <span class=o>=</span> <span class=n>lifetime</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.lib.CacheItem.update_data class="doc doc-heading"> <code class="highlight language-python"><span class=n>update_data</span><span class=p>(</span><span class=n>data</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Update cache data.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>data</code> </td> <td> <code><span title=Any>Any</span></code> </td> <td> <div class=doc-md-description> <p>Any data that are cached.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/cache.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>79</span>
<span class=normal>80</span>
<span class=normal>81</span>
<span class=normal>82</span>
<span class=normal>83</span>
<span class=normal>84</span>
<span class=normal>85</span>
<span class=normal>86</span>
<span class=normal>87</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>update_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>data</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Update cache data.</span>

<span class=sd>    Args:</span>
<span class=sd>        data (Any): Any data that are cached.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_data</span> <span class=o>=</span> <span class=n>data</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_last_update</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.lib.DefaultKeysDict class="doc doc-heading"> <code>DefaultKeysDict</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=dict>dict</span></code></p> <p>Dictionary that supports the default key to use for str conversion.</p> <p>Is helpful for changes of a key in a template from string to dictionary for example '{folder}' -&gt; '{folder[name]}'. &gt;&gt;&gt; data = DefaultKeysDict( &gt;&gt;&gt; "name", &gt;&gt;&gt; {"folder": {"name": "FolderName"}} &gt;&gt;&gt; ) &gt;&gt;&gt; print("{folder[name]}".format_map(data)) FolderName &gt;&gt;&gt; print("{folder}".format_map(data)) FolderName</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>default_key</code> </td> <td> <code><span title=typing.Union>Union</span>[<span title=str>str</span>, <span title=typing.Iterable>Iterable</span>[<span title=str>str</span>]]</code> </td> <td> <div class=doc-md-description> <p>Default key to use for str conversion. Can also expect multiple keys for more nested dictionary.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/path_templates.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span>
<span class=normal>62</span>
<span class=normal>63</span>
<span class=normal>64</span>
<span class=normal>65</span>
<span class=normal>66</span>
<span class=normal>67</span>
<span class=normal>68</span>
<span class=normal>69</span>
<span class=normal>70</span>
<span class=normal>71</span>
<span class=normal>72</span>
<span class=normal>73</span>
<span class=normal>74</span>
<span class=normal>75</span>
<span class=normal>76</span>
<span class=normal>77</span>
<span class=normal>78</span>
<span class=normal>79</span>
<span class=normal>80</span>
<span class=normal>81</span>
<span class=normal>82</span>
<span class=normal>83</span>
<span class=normal>84</span>
<span class=normal>85</span>
<span class=normal>86</span>
<span class=normal>87</span>
<span class=normal>88</span>
<span class=normal>89</span>
<span class=normal>90</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>DefaultKeysDict</span><span class=p>(</span><span class=nb>dict</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Dictionary that supports the default key to use for str conversion.</span>

<span class=sd>    Is helpful for changes of a key in a template from string to dictionary</span>
<span class=sd>        for example &#39;{folder}&#39; -&gt; &#39;{folder[name]}&#39;.</span>
<span class=sd>        &gt;&gt;&gt; data = DefaultKeysDict(</span>
<span class=sd>        &gt;&gt;&gt;     &quot;name&quot;,</span>
<span class=sd>        &gt;&gt;&gt;     {&quot;folder&quot;: {&quot;name&quot;: &quot;FolderName&quot;}}</span>
<span class=sd>        &gt;&gt;&gt; )</span>
<span class=sd>        &gt;&gt;&gt; print(&quot;{folder[name]}&quot;.format_map(data))</span>
<span class=sd>        FolderName</span>
<span class=sd>        &gt;&gt;&gt; print(&quot;{folder}&quot;.format_map(data))</span>
<span class=sd>        FolderName</span>

<span class=sd>    Args:</span>
<span class=sd>        default_key (Union[str, Iterable[str]]): Default key to use for str</span>
<span class=sd>            conversion. Can also expect multiple keys for more nested</span>
<span class=sd>            dictionary.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span> <span class=n>default_keys</span><span class=p>:</span> <span class=n>Union</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Iterable</span><span class=p>[</span><span class=nb>str</span><span class=p>]],</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span>
    <span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>default_keys</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
            <span class=n>default_keys</span> <span class=o>=</span> <span class=p>[</span><span class=n>default_keys</span><span class=p>]</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>default_keys</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>default_keys</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>default_keys</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
                <span class=s2>&quot;Default key must be set. Got empty default keys.&quot;</span>
            <span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_default_keys</span> <span class=o>=</span> <span class=n>default_keys</span>
        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__str__</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
        <span class=k>return</span> <span class=nb>str</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>get_default_value</span><span class=p>())</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_default_keys</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
        <span class=k>return</span> <span class=nb>list</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_default_keys</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_default_value</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Any</span><span class=p>:</span>
        <span class=n>value</span> <span class=o>=</span> <span class=bp>self</span>
        <span class=k>for</span> <span class=n>key</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_default_keys</span><span class=p>:</span>
            <span class=n>value</span> <span class=o>=</span> <span class=n>value</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
        <span class=k>return</span> <span class=n>value</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.lib.EnumDef class="doc doc-heading"> <code>EnumDef</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="AbstractAttrDef (client.ayon_core.lib.attribute_definitions.AbstractAttrDef)" href=attribute_definitions.html#client.ayon_core.lib.attribute_definitions.AbstractAttrDef>AbstractAttrDef</a></code></p> <p>Enumeration of items.</p> <p>Enumeration of single item from items. Or list of items if multiselection is enabled.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>key</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Key under which value is stored.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>items</code> </td> <td> <code><span title=client.ayon_core.lib.attribute_definitions.EnumItemsInputType>EnumItemsInputType</span></code> </td> <td> <div class=doc-md-description> <p>Items definition that can be converted using 'prepare_enum_items'.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>default</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=typing.Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Default value. Must be one key(value) from passed items or list of values for multiselection.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>multiselection</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=bool>bool</span>]</code> </td> <td> <div class=doc-md-description> <p>If True, multiselection is allowed. Output is list of selected items.</p> </div> </td> <td> <code>False</code> </td> </tr> <tr class=doc-section-item> <td> <code>placeholder</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Placeholder for UI purposes, only for multiselection enumeration.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/attribute_definitions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>537</span>
<span class=normal>538</span>
<span class=normal>539</span>
<span class=normal>540</span>
<span class=normal>541</span>
<span class=normal>542</span>
<span class=normal>543</span>
<span class=normal>544</span>
<span class=normal>545</span>
<span class=normal>546</span>
<span class=normal>547</span>
<span class=normal>548</span>
<span class=normal>549</span>
<span class=normal>550</span>
<span class=normal>551</span>
<span class=normal>552</span>
<span class=normal>553</span>
<span class=normal>554</span>
<span class=normal>555</span>
<span class=normal>556</span>
<span class=normal>557</span>
<span class=normal>558</span>
<span class=normal>559</span>
<span class=normal>560</span>
<span class=normal>561</span>
<span class=normal>562</span>
<span class=normal>563</span>
<span class=normal>564</span>
<span class=normal>565</span>
<span class=normal>566</span>
<span class=normal>567</span>
<span class=normal>568</span>
<span class=normal>569</span>
<span class=normal>570</span>
<span class=normal>571</span>
<span class=normal>572</span>
<span class=normal>573</span>
<span class=normal>574</span>
<span class=normal>575</span>
<span class=normal>576</span>
<span class=normal>577</span>
<span class=normal>578</span>
<span class=normal>579</span>
<span class=normal>580</span>
<span class=normal>581</span>
<span class=normal>582</span>
<span class=normal>583</span>
<span class=normal>584</span>
<span class=normal>585</span>
<span class=normal>586</span>
<span class=normal>587</span>
<span class=normal>588</span>
<span class=normal>589</span>
<span class=normal>590</span>
<span class=normal>591</span>
<span class=normal>592</span>
<span class=normal>593</span>
<span class=normal>594</span>
<span class=normal>595</span>
<span class=normal>596</span>
<span class=normal>597</span>
<span class=normal>598</span>
<span class=normal>599</span>
<span class=normal>600</span>
<span class=normal>601</span>
<span class=normal>602</span>
<span class=normal>603</span>
<span class=normal>604</span>
<span class=normal>605</span>
<span class=normal>606</span>
<span class=normal>607</span>
<span class=normal>608</span>
<span class=normal>609</span>
<span class=normal>610</span>
<span class=normal>611</span>
<span class=normal>612</span>
<span class=normal>613</span>
<span class=normal>614</span>
<span class=normal>615</span>
<span class=normal>616</span>
<span class=normal>617</span>
<span class=normal>618</span>
<span class=normal>619</span>
<span class=normal>620</span>
<span class=normal>621</span>
<span class=normal>622</span>
<span class=normal>623</span>
<span class=normal>624</span>
<span class=normal>625</span>
<span class=normal>626</span>
<span class=normal>627</span>
<span class=normal>628</span>
<span class=normal>629</span>
<span class=normal>630</span>
<span class=normal>631</span>
<span class=normal>632</span>
<span class=normal>633</span>
<span class=normal>634</span>
<span class=normal>635</span>
<span class=normal>636</span>
<span class=normal>637</span>
<span class=normal>638</span>
<span class=normal>639</span>
<span class=normal>640</span>
<span class=normal>641</span>
<span class=normal>642</span>
<span class=normal>643</span>
<span class=normal>644</span>
<span class=normal>645</span>
<span class=normal>646</span>
<span class=normal>647</span>
<span class=normal>648</span>
<span class=normal>649</span>
<span class=normal>650</span>
<span class=normal>651</span>
<span class=normal>652</span>
<span class=normal>653</span>
<span class=normal>654</span>
<span class=normal>655</span>
<span class=normal>656</span>
<span class=normal>657</span>
<span class=normal>658</span>
<span class=normal>659</span>
<span class=normal>660</span>
<span class=normal>661</span>
<span class=normal>662</span>
<span class=normal>663</span>
<span class=normal>664</span>
<span class=normal>665</span>
<span class=normal>666</span>
<span class=normal>667</span>
<span class=normal>668</span>
<span class=normal>669</span>
<span class=normal>670</span>
<span class=normal>671</span>
<span class=normal>672</span>
<span class=normal>673</span>
<span class=normal>674</span>
<span class=normal>675</span>
<span class=normal>676</span>
<span class=normal>677</span>
<span class=normal>678</span>
<span class=normal>679</span>
<span class=normal>680</span>
<span class=normal>681</span>
<span class=normal>682</span>
<span class=normal>683</span>
<span class=normal>684</span>
<span class=normal>685</span>
<span class=normal>686</span>
<span class=normal>687</span>
<span class=normal>688</span>
<span class=normal>689</span>
<span class=normal>690</span>
<span class=normal>691</span>
<span class=normal>692</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>EnumDef</span><span class=p>(</span><span class=n>AbstractAttrDef</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Enumeration of items.</span>

<span class=sd>    Enumeration of single item from items. Or list of items if multiselection</span>
<span class=sd>    is enabled.</span>

<span class=sd>    Args:</span>
<span class=sd>        key (str): Key under which value is stored.</span>
<span class=sd>        items (EnumItemsInputType): Items definition that can be converted</span>
<span class=sd>            using &#39;prepare_enum_items&#39;.</span>
<span class=sd>        default (Optional[Any]): Default value. Must be one key(value) from</span>
<span class=sd>            passed items or list of values for multiselection.</span>
<span class=sd>        multiselection (Optional[bool]): If True, multiselection is allowed.</span>
<span class=sd>            Output is list of selected items.</span>
<span class=sd>        placeholder (Optional[str]): Placeholder for UI purposes, only for</span>
<span class=sd>            multiselection enumeration.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;enum&quot;</span>

    <span class=n>type_attributes</span> <span class=o>=</span> <span class=p>[</span>
        <span class=s2>&quot;multiselection&quot;</span><span class=p>,</span>
        <span class=s2>&quot;placeholder&quot;</span><span class=p>,</span>
    <span class=p>]</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
        <span class=n>items</span><span class=p>:</span> <span class=s2>&quot;EnumItemsInputType&quot;</span><span class=p>,</span>
        <span class=n>default</span><span class=p>:</span> <span class=s2>&quot;Union[str, List[Any]]&quot;</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
        <span class=n>multiselection</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>bool</span><span class=p>]</span> <span class=o>=</span> <span class=kc>False</span><span class=p>,</span>
        <span class=n>placeholder</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
        <span class=o>**</span><span class=n>kwargs</span>
    <span class=p>):</span>
        <span class=k>if</span> <span class=n>multiselection</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>multiselection</span> <span class=o>=</span> <span class=kc>False</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>items</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>multiselection</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
                <span class=sa>f</span><span class=s2>&quot;Empty &#39;items&#39; value. </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2> must have&quot;</span>
                <span class=s2>&quot; defined values on initialization.&quot;</span>
            <span class=p>)</span>

        <span class=n>items</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>prepare_enum_items</span><span class=p>(</span><span class=n>items</span><span class=p>)</span>
        <span class=n>item_values</span> <span class=o>=</span> <span class=p>[</span><span class=n>item</span><span class=p>[</span><span class=s2>&quot;value&quot;</span><span class=p>]</span> <span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=n>items</span><span class=p>]</span>
        <span class=n>item_values_set</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span><span class=n>item_values</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>multiselection</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>default</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
                <span class=n>default</span> <span class=o>=</span> <span class=p>[]</span>
            <span class=n>default</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>item_values_set</span><span class=o>.</span><span class=n>intersection</span><span class=p>(</span><span class=n>default</span><span class=p>))</span>

        <span class=k>elif</span> <span class=n>default</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>item_values</span><span class=p>:</span>
            <span class=n>default</span> <span class=o>=</span> <span class=nb>next</span><span class=p>(</span><span class=nb>iter</span><span class=p>(</span><span class=n>item_values</span><span class=p>),</span> <span class=kc>None</span><span class=p>)</span>

        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=n>default</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>items</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=s2>&quot;EnumItemDict&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>items</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_item_values</span><span class=p>:</span> <span class=n>Set</span><span class=p>[</span><span class=n>Any</span><span class=p>]</span> <span class=o>=</span> <span class=n>item_values_set</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>multiselection</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=n>multiselection</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>placeholder</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=n>placeholder</span>

    <span class=k>def</span><span class=w> </span><span class=nf>convert_value</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>multiselection</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>value</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_item_values</span><span class=p>:</span>
                <span class=k>return</span> <span class=n>value</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>default</span>

        <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>default</span><span class=p>)</span>
        <span class=k>return</span> <span class=nb>list</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_item_values</span><span class=o>.</span><span class=n>intersection</span><span class=p>(</span><span class=n>value</span><span class=p>))</span>

    <span class=k>def</span><span class=w> </span><span class=nf>is_value_valid</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=n>Any</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Check if item is available in possible values.&quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>list</span><span class=p>):</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>multiselection</span><span class=p>:</span>
                <span class=k>return</span> <span class=kc>False</span>
            <span class=k>return</span> <span class=nb>all</span><span class=p>(</span><span class=n>value</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_item_values</span> <span class=k>for</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>value</span><span class=p>)</span>

        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>multiselection</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>False</span>
        <span class=k>return</span> <span class=n>value</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_item_values</span>

    <span class=k>def</span><span class=w> </span><span class=nf>serialize</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=n>data</span> <span class=o>=</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>serialize</span><span class=p>()</span>
        <span class=n>data</span><span class=p>[</span><span class=s2>&quot;items&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>items</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>data</span>

    <span class=nd>@staticmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>prepare_enum_items</span><span class=p>(</span>
        <span class=n>items</span><span class=p>:</span> <span class=s2>&quot;EnumItemsInputType&quot;</span>
    <span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=s2>&quot;EnumItemDict&quot;</span><span class=p>]:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Convert items to unified structure.</span>

<span class=sd>        Output is a list where each item is dictionary with &#39;value&#39;</span>
<span class=sd>        and &#39;label&#39;.</span>

<span class=sd>        ```python</span>
<span class=sd>        # Example output</span>
<span class=sd>        [</span>
<span class=sd>            {&quot;label&quot;: &quot;Option 1&quot;, &quot;value&quot;: 1},</span>
<span class=sd>            {&quot;label&quot;: &quot;Option 2&quot;, &quot;value&quot;: 2},</span>
<span class=sd>            {&quot;label&quot;: &quot;Option 3&quot;, &quot;value&quot;: 3}</span>
<span class=sd>        ]</span>
<span class=sd>        ```</span>

<span class=sd>        Args:</span>
<span class=sd>            items (EnumItemsInputType): The items to convert.</span>

<span class=sd>        Returns:</span>
<span class=sd>            List[EnumItemDict]: Unified structure of items.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>output</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>items</span><span class=p>,</span> <span class=nb>dict</span><span class=p>):</span>
            <span class=k>for</span> <span class=n>value</span><span class=p>,</span> <span class=n>label</span> <span class=ow>in</span> <span class=n>items</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
                <span class=n>output</span><span class=o>.</span><span class=n>append</span><span class=p>({</span><span class=s2>&quot;label&quot;</span><span class=p>:</span> <span class=n>label</span><span class=p>,</span> <span class=s2>&quot;value&quot;</span><span class=p>:</span> <span class=n>value</span><span class=p>})</span>

        <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>items</span><span class=p>,</span> <span class=p>(</span><span class=nb>tuple</span><span class=p>,</span> <span class=nb>list</span><span class=p>,</span> <span class=nb>set</span><span class=p>)):</span>
            <span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=n>items</span><span class=p>:</span>
                <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>item</span><span class=p>,</span> <span class=nb>dict</span><span class=p>):</span>
                    <span class=c1># Validate if &#39;value&#39; is available</span>
                    <span class=k>if</span> <span class=s2>&quot;value&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>item</span><span class=p>:</span>
                        <span class=k>raise</span> <span class=ne>KeyError</span><span class=p>(</span><span class=s2>&quot;Item does not contain &#39;value&#39; key.&quot;</span><span class=p>)</span>

                    <span class=k>if</span> <span class=s2>&quot;label&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>item</span><span class=p>:</span>
                        <span class=n>item</span><span class=p>[</span><span class=s2>&quot;label&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>item</span><span class=p>[</span><span class=s2>&quot;value&quot;</span><span class=p>])</span>
                <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>item</span><span class=p>,</span> <span class=p>(</span><span class=nb>list</span><span class=p>,</span> <span class=nb>tuple</span><span class=p>)):</span>
                    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>item</span><span class=p>)</span> <span class=o>==</span> <span class=mi>2</span><span class=p>:</span>
                        <span class=n>value</span><span class=p>,</span> <span class=n>label</span> <span class=o>=</span> <span class=n>item</span>
                    <span class=k>elif</span> <span class=nb>len</span><span class=p>(</span><span class=n>item</span><span class=p>)</span> <span class=o>==</span> <span class=mi>1</span><span class=p>:</span>
                        <span class=n>value</span> <span class=o>=</span> <span class=n>item</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
                        <span class=n>label</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
                    <span class=k>else</span><span class=p>:</span>
                        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>((</span>
                            <span class=s2>&quot;Invalid items count </span><span class=si>{}</span><span class=s2>.&quot;</span>
                            <span class=s2>&quot; Expected 1 or 2. Value: </span><span class=si>{}</span><span class=s2>&quot;</span>
                        <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>item</span><span class=p>),</span> <span class=nb>str</span><span class=p>(</span><span class=n>item</span><span class=p>)))</span>

                    <span class=n>item</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;label&quot;</span><span class=p>:</span> <span class=n>label</span><span class=p>,</span> <span class=s2>&quot;value&quot;</span><span class=p>:</span> <span class=n>value</span><span class=p>}</span>
                <span class=k>else</span><span class=p>:</span>
                    <span class=n>item</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;label&quot;</span><span class=p>:</span> <span class=nb>str</span><span class=p>(</span><span class=n>item</span><span class=p>),</span> <span class=s2>&quot;value&quot;</span><span class=p>:</span> <span class=n>item</span><span class=p>}</span>
                <span class=n>output</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>

        <span class=k>else</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>TypeError</span><span class=p>(</span>
                <span class=s2>&quot;Unknown type for enum items &#39;</span><span class=si>{}</span><span class=s2>&#39;&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=n>items</span><span class=p>))</span>
            <span class=p>)</span>

        <span class=k>return</span> <span class=n>output</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_def_type_compare</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>other</span><span class=p>:</span> <span class=s2>&quot;EnumDef&quot;</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
        <span class=k>return</span> <span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>items</span> <span class=o>==</span> <span class=n>other</span><span class=o>.</span><span class=n>items</span>
            <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>multiselection</span> <span class=o>==</span> <span class=n>other</span><span class=o>.</span><span class=n>multiselection</span>
        <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.lib.EnumDef.is_value_valid class="doc doc-heading"> <code class="highlight language-python"><span class=n>is_value_valid</span><span class=p>(</span><span class=n>value</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Check if item is available in possible values.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/attribute_definitions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>609</span>
<span class=normal>610</span>
<span class=normal>611</span>
<span class=normal>612</span>
<span class=normal>613</span>
<span class=normal>614</span>
<span class=normal>615</span>
<span class=normal>616</span>
<span class=normal>617</span>
<span class=normal>618</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>is_value_valid</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=n>Any</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Check if item is available in possible values.&quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>list</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>multiselection</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>False</span>
        <span class=k>return</span> <span class=nb>all</span><span class=p>(</span><span class=n>value</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_item_values</span> <span class=k>for</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>value</span><span class=p>)</span>

    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>multiselection</span><span class=p>:</span>
        <span class=k>return</span> <span class=kc>False</span>
    <span class=k>return</span> <span class=n>value</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_item_values</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.lib.EnumDef.prepare_enum_items class="doc doc-heading"> <code class="highlight language-python"><span class=n>prepare_enum_items</span><span class=p>(</span><span class=n>items</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Convert items to unified structure.</p> <p>Output is a list where each item is dictionary with 'value' and 'label'.</p> <pre><code class=language-python># Example output
[
    {&quot;label&quot;: &quot;Option 1&quot;, &quot;value&quot;: 1},
    {&quot;label&quot;: &quot;Option 2&quot;, &quot;value&quot;: 2},
    {&quot;label&quot;: &quot;Option 3&quot;, &quot;value&quot;: 3}
]
</code></pre> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>items</code> </td> <td> <code><span title=client.ayon_core.lib.attribute_definitions.EnumItemsInputType>EnumItemsInputType</span></code> </td> <td> <div class=doc-md-description> <p>The items to convert.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=typing.List>List</span>[<span title=client.ayon_core.lib.attribute_definitions.EnumItemDict>EnumItemDict</span>]</code> </td> <td> <div class=doc-md-description> <p>List[EnumItemDict]: Unified structure of items.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/attribute_definitions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>625</span>
<span class=normal>626</span>
<span class=normal>627</span>
<span class=normal>628</span>
<span class=normal>629</span>
<span class=normal>630</span>
<span class=normal>631</span>
<span class=normal>632</span>
<span class=normal>633</span>
<span class=normal>634</span>
<span class=normal>635</span>
<span class=normal>636</span>
<span class=normal>637</span>
<span class=normal>638</span>
<span class=normal>639</span>
<span class=normal>640</span>
<span class=normal>641</span>
<span class=normal>642</span>
<span class=normal>643</span>
<span class=normal>644</span>
<span class=normal>645</span>
<span class=normal>646</span>
<span class=normal>647</span>
<span class=normal>648</span>
<span class=normal>649</span>
<span class=normal>650</span>
<span class=normal>651</span>
<span class=normal>652</span>
<span class=normal>653</span>
<span class=normal>654</span>
<span class=normal>655</span>
<span class=normal>656</span>
<span class=normal>657</span>
<span class=normal>658</span>
<span class=normal>659</span>
<span class=normal>660</span>
<span class=normal>661</span>
<span class=normal>662</span>
<span class=normal>663</span>
<span class=normal>664</span>
<span class=normal>665</span>
<span class=normal>666</span>
<span class=normal>667</span>
<span class=normal>668</span>
<span class=normal>669</span>
<span class=normal>670</span>
<span class=normal>671</span>
<span class=normal>672</span>
<span class=normal>673</span>
<span class=normal>674</span>
<span class=normal>675</span>
<span class=normal>676</span>
<span class=normal>677</span>
<span class=normal>678</span>
<span class=normal>679</span>
<span class=normal>680</span>
<span class=normal>681</span>
<span class=normal>682</span>
<span class=normal>683</span>
<span class=normal>684</span>
<span class=normal>685</span>
<span class=normal>686</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@staticmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>prepare_enum_items</span><span class=p>(</span>
    <span class=n>items</span><span class=p>:</span> <span class=s2>&quot;EnumItemsInputType&quot;</span>
<span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=s2>&quot;EnumItemDict&quot;</span><span class=p>]:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Convert items to unified structure.</span>

<span class=sd>    Output is a list where each item is dictionary with &#39;value&#39;</span>
<span class=sd>    and &#39;label&#39;.</span>

<span class=sd>    ```python</span>
<span class=sd>    # Example output</span>
<span class=sd>    [</span>
<span class=sd>        {&quot;label&quot;: &quot;Option 1&quot;, &quot;value&quot;: 1},</span>
<span class=sd>        {&quot;label&quot;: &quot;Option 2&quot;, &quot;value&quot;: 2},</span>
<span class=sd>        {&quot;label&quot;: &quot;Option 3&quot;, &quot;value&quot;: 3}</span>
<span class=sd>    ]</span>
<span class=sd>    ```</span>

<span class=sd>    Args:</span>
<span class=sd>        items (EnumItemsInputType): The items to convert.</span>

<span class=sd>    Returns:</span>
<span class=sd>        List[EnumItemDict]: Unified structure of items.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>output</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>items</span><span class=p>,</span> <span class=nb>dict</span><span class=p>):</span>
        <span class=k>for</span> <span class=n>value</span><span class=p>,</span> <span class=n>label</span> <span class=ow>in</span> <span class=n>items</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=n>output</span><span class=o>.</span><span class=n>append</span><span class=p>({</span><span class=s2>&quot;label&quot;</span><span class=p>:</span> <span class=n>label</span><span class=p>,</span> <span class=s2>&quot;value&quot;</span><span class=p>:</span> <span class=n>value</span><span class=p>})</span>

    <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>items</span><span class=p>,</span> <span class=p>(</span><span class=nb>tuple</span><span class=p>,</span> <span class=nb>list</span><span class=p>,</span> <span class=nb>set</span><span class=p>)):</span>
        <span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=n>items</span><span class=p>:</span>
            <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>item</span><span class=p>,</span> <span class=nb>dict</span><span class=p>):</span>
                <span class=c1># Validate if &#39;value&#39; is available</span>
                <span class=k>if</span> <span class=s2>&quot;value&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>item</span><span class=p>:</span>
                    <span class=k>raise</span> <span class=ne>KeyError</span><span class=p>(</span><span class=s2>&quot;Item does not contain &#39;value&#39; key.&quot;</span><span class=p>)</span>

                <span class=k>if</span> <span class=s2>&quot;label&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>item</span><span class=p>:</span>
                    <span class=n>item</span><span class=p>[</span><span class=s2>&quot;label&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>item</span><span class=p>[</span><span class=s2>&quot;value&quot;</span><span class=p>])</span>
            <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>item</span><span class=p>,</span> <span class=p>(</span><span class=nb>list</span><span class=p>,</span> <span class=nb>tuple</span><span class=p>)):</span>
                <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>item</span><span class=p>)</span> <span class=o>==</span> <span class=mi>2</span><span class=p>:</span>
                    <span class=n>value</span><span class=p>,</span> <span class=n>label</span> <span class=o>=</span> <span class=n>item</span>
                <span class=k>elif</span> <span class=nb>len</span><span class=p>(</span><span class=n>item</span><span class=p>)</span> <span class=o>==</span> <span class=mi>1</span><span class=p>:</span>
                    <span class=n>value</span> <span class=o>=</span> <span class=n>item</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
                    <span class=n>label</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
                <span class=k>else</span><span class=p>:</span>
                    <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>((</span>
                        <span class=s2>&quot;Invalid items count </span><span class=si>{}</span><span class=s2>.&quot;</span>
                        <span class=s2>&quot; Expected 1 or 2. Value: </span><span class=si>{}</span><span class=s2>&quot;</span>
                    <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>item</span><span class=p>),</span> <span class=nb>str</span><span class=p>(</span><span class=n>item</span><span class=p>)))</span>

                <span class=n>item</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;label&quot;</span><span class=p>:</span> <span class=n>label</span><span class=p>,</span> <span class=s2>&quot;value&quot;</span><span class=p>:</span> <span class=n>value</span><span class=p>}</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=n>item</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;label&quot;</span><span class=p>:</span> <span class=nb>str</span><span class=p>(</span><span class=n>item</span><span class=p>),</span> <span class=s2>&quot;value&quot;</span><span class=p>:</span> <span class=n>item</span><span class=p>}</span>
            <span class=n>output</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>

    <span class=k>else</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>TypeError</span><span class=p>(</span>
            <span class=s2>&quot;Unknown type for enum items &#39;</span><span class=si>{}</span><span class=s2>&#39;&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=n>items</span><span class=p>))</span>
        <span class=p>)</span>

    <span class=k>return</span> <span class=n>output</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.lib.FileDef class="doc doc-heading"> <code>FileDef</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="AbstractAttrDef (client.ayon_core.lib.attribute_definitions.AbstractAttrDef)" href=attribute_definitions.html#client.ayon_core.lib.attribute_definitions.AbstractAttrDef>AbstractAttrDef</a></code></p> <p>File definition. It is possible to define filters of allowed file extensions and if supports folders. Args: single_item(bool): Allow only single path item. folders(bool): Allow folder paths. extensions(List[str]): Allow files with extensions. Empty list will allow all extensions and None will disable files completely. extensions_label(str): Custom label shown instead of extensions in UI. default(str, List[str]): Default value.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/attribute_definitions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 960</span>
<span class=normal> 961</span>
<span class=normal> 962</span>
<span class=normal> 963</span>
<span class=normal> 964</span>
<span class=normal> 965</span>
<span class=normal> 966</span>
<span class=normal> 967</span>
<span class=normal> 968</span>
<span class=normal> 969</span>
<span class=normal> 970</span>
<span class=normal> 971</span>
<span class=normal> 972</span>
<span class=normal> 973</span>
<span class=normal> 974</span>
<span class=normal> 975</span>
<span class=normal> 976</span>
<span class=normal> 977</span>
<span class=normal> 978</span>
<span class=normal> 979</span>
<span class=normal> 980</span>
<span class=normal> 981</span>
<span class=normal> 982</span>
<span class=normal> 983</span>
<span class=normal> 984</span>
<span class=normal> 985</span>
<span class=normal> 986</span>
<span class=normal> 987</span>
<span class=normal> 988</span>
<span class=normal> 989</span>
<span class=normal> 990</span>
<span class=normal> 991</span>
<span class=normal> 992</span>
<span class=normal> 993</span>
<span class=normal> 994</span>
<span class=normal> 995</span>
<span class=normal> 996</span>
<span class=normal> 997</span>
<span class=normal> 998</span>
<span class=normal> 999</span>
<span class=normal>1000</span>
<span class=normal>1001</span>
<span class=normal>1002</span>
<span class=normal>1003</span>
<span class=normal>1004</span>
<span class=normal>1005</span>
<span class=normal>1006</span>
<span class=normal>1007</span>
<span class=normal>1008</span>
<span class=normal>1009</span>
<span class=normal>1010</span>
<span class=normal>1011</span>
<span class=normal>1012</span>
<span class=normal>1013</span>
<span class=normal>1014</span>
<span class=normal>1015</span>
<span class=normal>1016</span>
<span class=normal>1017</span>
<span class=normal>1018</span>
<span class=normal>1019</span>
<span class=normal>1020</span>
<span class=normal>1021</span>
<span class=normal>1022</span>
<span class=normal>1023</span>
<span class=normal>1024</span>
<span class=normal>1025</span>
<span class=normal>1026</span>
<span class=normal>1027</span>
<span class=normal>1028</span>
<span class=normal>1029</span>
<span class=normal>1030</span>
<span class=normal>1031</span>
<span class=normal>1032</span>
<span class=normal>1033</span>
<span class=normal>1034</span>
<span class=normal>1035</span>
<span class=normal>1036</span>
<span class=normal>1037</span>
<span class=normal>1038</span>
<span class=normal>1039</span>
<span class=normal>1040</span>
<span class=normal>1041</span>
<span class=normal>1042</span>
<span class=normal>1043</span>
<span class=normal>1044</span>
<span class=normal>1045</span>
<span class=normal>1046</span>
<span class=normal>1047</span>
<span class=normal>1048</span>
<span class=normal>1049</span>
<span class=normal>1050</span>
<span class=normal>1051</span>
<span class=normal>1052</span>
<span class=normal>1053</span>
<span class=normal>1054</span>
<span class=normal>1055</span>
<span class=normal>1056</span>
<span class=normal>1057</span>
<span class=normal>1058</span>
<span class=normal>1059</span>
<span class=normal>1060</span>
<span class=normal>1061</span>
<span class=normal>1062</span>
<span class=normal>1063</span>
<span class=normal>1064</span>
<span class=normal>1065</span>
<span class=normal>1066</span>
<span class=normal>1067</span>
<span class=normal>1068</span>
<span class=normal>1069</span>
<span class=normal>1070</span>
<span class=normal>1071</span>
<span class=normal>1072</span>
<span class=normal>1073</span>
<span class=normal>1074</span>
<span class=normal>1075</span>
<span class=normal>1076</span>
<span class=normal>1077</span>
<span class=normal>1078</span>
<span class=normal>1079</span>
<span class=normal>1080</span>
<span class=normal>1081</span>
<span class=normal>1082</span>
<span class=normal>1083</span>
<span class=normal>1084</span>
<span class=normal>1085</span>
<span class=normal>1086</span>
<span class=normal>1087</span>
<span class=normal>1088</span>
<span class=normal>1089</span>
<span class=normal>1090</span>
<span class=normal>1091</span>
<span class=normal>1092</span>
<span class=normal>1093</span>
<span class=normal>1094</span>
<span class=normal>1095</span>
<span class=normal>1096</span>
<span class=normal>1097</span>
<span class=normal>1098</span>
<span class=normal>1099</span>
<span class=normal>1100</span>
<span class=normal>1101</span>
<span class=normal>1102</span>
<span class=normal>1103</span>
<span class=normal>1104</span>
<span class=normal>1105</span>
<span class=normal>1106</span>
<span class=normal>1107</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>FileDef</span><span class=p>(</span><span class=n>AbstractAttrDef</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;File definition.</span>
<span class=sd>    It is possible to define filters of allowed file extensions and if supports</span>
<span class=sd>    folders.</span>
<span class=sd>    Args:</span>
<span class=sd>        single_item(bool): Allow only single path item.</span>
<span class=sd>        folders(bool): Allow folder paths.</span>
<span class=sd>        extensions(List[str]): Allow files with extensions. Empty list will</span>
<span class=sd>            allow all extensions and None will disable files completely.</span>
<span class=sd>        extensions_label(str): Custom label shown instead of extensions in UI.</span>
<span class=sd>        default(str, List[str]): Default value.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;path&quot;</span>
    <span class=n>type_attributes</span> <span class=o>=</span> <span class=p>[</span>
        <span class=s2>&quot;single_item&quot;</span><span class=p>,</span>
        <span class=s2>&quot;folders&quot;</span><span class=p>,</span>
        <span class=s2>&quot;extensions&quot;</span><span class=p>,</span>
        <span class=s2>&quot;allow_sequences&quot;</span><span class=p>,</span>
        <span class=s2>&quot;extensions_label&quot;</span><span class=p>,</span>
    <span class=p>]</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
        <span class=n>single_item</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>bool</span><span class=p>]</span> <span class=o>=</span> <span class=kc>True</span><span class=p>,</span>
        <span class=n>folders</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>bool</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
        <span class=n>extensions</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Iterable</span><span class=p>[</span><span class=nb>str</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
        <span class=n>allow_sequences</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>bool</span><span class=p>]</span> <span class=o>=</span> <span class=kc>True</span><span class=p>,</span>
        <span class=n>extensions_label</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
        <span class=n>default</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=s2>&quot;Union[FileDefItemDict, List[str]]&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
        <span class=o>**</span><span class=n>kwargs</span>
    <span class=p>):</span>
        <span class=k>if</span> <span class=n>folders</span> <span class=ow>is</span> <span class=kc>None</span> <span class=ow>and</span> <span class=n>extensions</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>folders</span> <span class=o>=</span> <span class=kc>True</span>
            <span class=n>extensions</span> <span class=o>=</span> <span class=p>[]</span>

        <span class=k>if</span> <span class=n>default</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>single_item</span><span class=p>:</span>
                <span class=n>default</span> <span class=o>=</span> <span class=n>FileDefItem</span><span class=o>.</span><span class=n>create_empty_item</span><span class=p>()</span><span class=o>.</span><span class=n>to_dict</span><span class=p>()</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=n>default</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>single_item</span><span class=p>:</span>
                <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>default</span><span class=p>,</span> <span class=nb>dict</span><span class=p>):</span>
                    <span class=n>FileDefItem</span><span class=o>.</span><span class=n>from_dict</span><span class=p>(</span><span class=n>default</span><span class=p>)</span>

                <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>default</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
                    <span class=n>default</span> <span class=o>=</span> <span class=n>FileDefItem</span><span class=o>.</span><span class=n>from_paths</span><span class=p>(</span>
                        <span class=p>[</span><span class=n>default</span><span class=o>.</span><span class=n>strip</span><span class=p>()],</span> <span class=n>allow_sequences</span>
                    <span class=p>)[</span><span class=mi>0</span><span class=p>]</span>

                <span class=k>else</span><span class=p>:</span>
                    <span class=k>raise</span> <span class=ne>TypeError</span><span class=p>((</span>
                        <span class=s2>&quot;&#39;default&#39; argument must be &#39;str&#39; or &#39;dict&#39; not &#39;</span><span class=si>{}</span><span class=s2>&#39;&quot;</span>
                    <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=n>default</span><span class=p>)))</span>

            <span class=k>else</span><span class=p>:</span>
                <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>default</span><span class=p>,</span> <span class=p>(</span><span class=nb>tuple</span><span class=p>,</span> <span class=nb>list</span><span class=p>,</span> <span class=nb>set</span><span class=p>)):</span>
                    <span class=k>raise</span> <span class=ne>TypeError</span><span class=p>((</span>
                        <span class=s2>&quot;&#39;default&#39; argument must be &#39;list&#39;, &#39;tuple&#39; or &#39;set&#39;&quot;</span>
                        <span class=s2>&quot;, not &#39;</span><span class=si>{}</span><span class=s2>&#39;&quot;</span>
                    <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=n>default</span><span class=p>)))</span>

        <span class=c1># Change horizontal label</span>
        <span class=n>is_label_horizontal</span> <span class=o>=</span> <span class=n>kwargs</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;is_label_horizontal&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>is_label_horizontal</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>kwargs</span><span class=p>[</span><span class=s2>&quot;is_label_horizontal&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>False</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>single_item</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=n>single_item</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>folders</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=n>folders</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>extensions</span><span class=p>:</span> <span class=n>Set</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span><span class=n>extensions</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>allow_sequences</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=n>allow_sequences</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>extensions_label</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=n>extensions_label</span>
        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=n>default</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__eq__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>other</span><span class=p>:</span> <span class=n>Any</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__eq__</span><span class=p>(</span><span class=n>other</span><span class=p>):</span>
            <span class=k>return</span> <span class=kc>False</span>

        <span class=k>return</span> <span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>single_item</span> <span class=o>==</span> <span class=n>other</span><span class=o>.</span><span class=n>single_item</span>
            <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>folders</span> <span class=o>==</span> <span class=n>other</span><span class=o>.</span><span class=n>folders</span>
            <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>extensions</span> <span class=o>==</span> <span class=n>other</span><span class=o>.</span><span class=n>extensions</span>
            <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>allow_sequences</span> <span class=o>==</span> <span class=n>other</span><span class=o>.</span><span class=n>allow_sequences</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>is_value_valid</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=n>Any</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>single_item</span><span class=p>:</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>dict</span><span class=p>):</span>
                <span class=k>return</span> <span class=kc>False</span>
            <span class=k>try</span><span class=p>:</span>
                <span class=n>FileDefItem</span><span class=o>.</span><span class=n>from_dict</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
                <span class=k>return</span> <span class=kc>True</span>
            <span class=k>except</span> <span class=p>(</span><span class=ne>ValueError</span><span class=p>,</span> <span class=ne>KeyError</span><span class=p>):</span>
                <span class=k>return</span> <span class=kc>False</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>list</span><span class=p>):</span>
            <span class=k>return</span> <span class=kc>False</span>

        <span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=n>value</span><span class=p>:</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>item</span><span class=p>,</span> <span class=nb>dict</span><span class=p>):</span>
                <span class=k>return</span> <span class=kc>False</span>

            <span class=k>try</span><span class=p>:</span>
                <span class=n>FileDefItem</span><span class=o>.</span><span class=n>from_dict</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>
            <span class=k>except</span> <span class=p>(</span><span class=ne>ValueError</span><span class=p>,</span> <span class=ne>KeyError</span><span class=p>):</span>
                <span class=k>return</span> <span class=kc>False</span>
        <span class=k>return</span> <span class=kc>True</span>

    <span class=k>def</span><span class=w> </span><span class=nf>convert_value</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=n>Any</span>
    <span class=p>)</span> <span class=o>-&gt;</span> <span class=s2>&quot;Union[FileDefItemDict, List[FileDefItemDict]]&quot;</span><span class=p>:</span>
        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=p>(</span><span class=nb>str</span><span class=p>,</span> <span class=nb>dict</span><span class=p>)):</span>
            <span class=n>value</span> <span class=o>=</span> <span class=p>[</span><span class=n>value</span><span class=p>]</span>

        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=p>(</span><span class=nb>tuple</span><span class=p>,</span> <span class=nb>list</span><span class=p>,</span> <span class=nb>set</span><span class=p>)):</span>
            <span class=n>string_paths</span> <span class=o>=</span> <span class=p>[]</span>
            <span class=n>dict_items</span> <span class=o>=</span> <span class=p>[]</span>
            <span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=n>value</span><span class=p>:</span>
                <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>item</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
                    <span class=n>string_paths</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>item</span><span class=o>.</span><span class=n>strip</span><span class=p>())</span>
                <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>item</span><span class=p>,</span> <span class=nb>dict</span><span class=p>):</span>
                    <span class=k>try</span><span class=p>:</span>
                        <span class=n>FileDefItem</span><span class=o>.</span><span class=n>from_dict</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>
                        <span class=n>dict_items</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>
                    <span class=k>except</span> <span class=p>(</span><span class=ne>ValueError</span><span class=p>,</span> <span class=ne>KeyError</span><span class=p>):</span>
                        <span class=k>pass</span>

            <span class=k>if</span> <span class=n>string_paths</span><span class=p>:</span>
                <span class=n>file_items</span> <span class=o>=</span> <span class=n>FileDefItem</span><span class=o>.</span><span class=n>from_paths</span><span class=p>(</span>
                    <span class=n>string_paths</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>allow_sequences</span>
                <span class=p>)</span>
                <span class=n>dict_items</span><span class=o>.</span><span class=n>extend</span><span class=p>([</span>
                    <span class=n>file_item</span><span class=o>.</span><span class=n>to_dict</span><span class=p>()</span>
                    <span class=k>for</span> <span class=n>file_item</span> <span class=ow>in</span> <span class=n>file_items</span>
                <span class=p>])</span>

            <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>single_item</span><span class=p>:</span>
                <span class=k>return</span> <span class=n>dict_items</span>

            <span class=k>if</span> <span class=ow>not</span> <span class=n>dict_items</span><span class=p>:</span>
                <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>default</span>
            <span class=k>return</span> <span class=n>dict_items</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>

        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>single_item</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>FileDefItem</span><span class=o>.</span><span class=n>create_empty_item</span><span class=p>()</span><span class=o>.</span><span class=n>to_dict</span><span class=p>()</span>
        <span class=k>return</span> <span class=p>[]</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.lib.FileDefItem class="doc doc-heading"> <code>FileDefItem</code> </h2> <div class="doc doc-contents "> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/attribute_definitions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>718</span>
<span class=normal>719</span>
<span class=normal>720</span>
<span class=normal>721</span>
<span class=normal>722</span>
<span class=normal>723</span>
<span class=normal>724</span>
<span class=normal>725</span>
<span class=normal>726</span>
<span class=normal>727</span>
<span class=normal>728</span>
<span class=normal>729</span>
<span class=normal>730</span>
<span class=normal>731</span>
<span class=normal>732</span>
<span class=normal>733</span>
<span class=normal>734</span>
<span class=normal>735</span>
<span class=normal>736</span>
<span class=normal>737</span>
<span class=normal>738</span>
<span class=normal>739</span>
<span class=normal>740</span>
<span class=normal>741</span>
<span class=normal>742</span>
<span class=normal>743</span>
<span class=normal>744</span>
<span class=normal>745</span>
<span class=normal>746</span>
<span class=normal>747</span>
<span class=normal>748</span>
<span class=normal>749</span>
<span class=normal>750</span>
<span class=normal>751</span>
<span class=normal>752</span>
<span class=normal>753</span>
<span class=normal>754</span>
<span class=normal>755</span>
<span class=normal>756</span>
<span class=normal>757</span>
<span class=normal>758</span>
<span class=normal>759</span>
<span class=normal>760</span>
<span class=normal>761</span>
<span class=normal>762</span>
<span class=normal>763</span>
<span class=normal>764</span>
<span class=normal>765</span>
<span class=normal>766</span>
<span class=normal>767</span>
<span class=normal>768</span>
<span class=normal>769</span>
<span class=normal>770</span>
<span class=normal>771</span>
<span class=normal>772</span>
<span class=normal>773</span>
<span class=normal>774</span>
<span class=normal>775</span>
<span class=normal>776</span>
<span class=normal>777</span>
<span class=normal>778</span>
<span class=normal>779</span>
<span class=normal>780</span>
<span class=normal>781</span>
<span class=normal>782</span>
<span class=normal>783</span>
<span class=normal>784</span>
<span class=normal>785</span>
<span class=normal>786</span>
<span class=normal>787</span>
<span class=normal>788</span>
<span class=normal>789</span>
<span class=normal>790</span>
<span class=normal>791</span>
<span class=normal>792</span>
<span class=normal>793</span>
<span class=normal>794</span>
<span class=normal>795</span>
<span class=normal>796</span>
<span class=normal>797</span>
<span class=normal>798</span>
<span class=normal>799</span>
<span class=normal>800</span>
<span class=normal>801</span>
<span class=normal>802</span>
<span class=normal>803</span>
<span class=normal>804</span>
<span class=normal>805</span>
<span class=normal>806</span>
<span class=normal>807</span>
<span class=normal>808</span>
<span class=normal>809</span>
<span class=normal>810</span>
<span class=normal>811</span>
<span class=normal>812</span>
<span class=normal>813</span>
<span class=normal>814</span>
<span class=normal>815</span>
<span class=normal>816</span>
<span class=normal>817</span>
<span class=normal>818</span>
<span class=normal>819</span>
<span class=normal>820</span>
<span class=normal>821</span>
<span class=normal>822</span>
<span class=normal>823</span>
<span class=normal>824</span>
<span class=normal>825</span>
<span class=normal>826</span>
<span class=normal>827</span>
<span class=normal>828</span>
<span class=normal>829</span>
<span class=normal>830</span>
<span class=normal>831</span>
<span class=normal>832</span>
<span class=normal>833</span>
<span class=normal>834</span>
<span class=normal>835</span>
<span class=normal>836</span>
<span class=normal>837</span>
<span class=normal>838</span>
<span class=normal>839</span>
<span class=normal>840</span>
<span class=normal>841</span>
<span class=normal>842</span>
<span class=normal>843</span>
<span class=normal>844</span>
<span class=normal>845</span>
<span class=normal>846</span>
<span class=normal>847</span>
<span class=normal>848</span>
<span class=normal>849</span>
<span class=normal>850</span>
<span class=normal>851</span>
<span class=normal>852</span>
<span class=normal>853</span>
<span class=normal>854</span>
<span class=normal>855</span>
<span class=normal>856</span>
<span class=normal>857</span>
<span class=normal>858</span>
<span class=normal>859</span>
<span class=normal>860</span>
<span class=normal>861</span>
<span class=normal>862</span>
<span class=normal>863</span>
<span class=normal>864</span>
<span class=normal>865</span>
<span class=normal>866</span>
<span class=normal>867</span>
<span class=normal>868</span>
<span class=normal>869</span>
<span class=normal>870</span>
<span class=normal>871</span>
<span class=normal>872</span>
<span class=normal>873</span>
<span class=normal>874</span>
<span class=normal>875</span>
<span class=normal>876</span>
<span class=normal>877</span>
<span class=normal>878</span>
<span class=normal>879</span>
<span class=normal>880</span>
<span class=normal>881</span>
<span class=normal>882</span>
<span class=normal>883</span>
<span class=normal>884</span>
<span class=normal>885</span>
<span class=normal>886</span>
<span class=normal>887</span>
<span class=normal>888</span>
<span class=normal>889</span>
<span class=normal>890</span>
<span class=normal>891</span>
<span class=normal>892</span>
<span class=normal>893</span>
<span class=normal>894</span>
<span class=normal>895</span>
<span class=normal>896</span>
<span class=normal>897</span>
<span class=normal>898</span>
<span class=normal>899</span>
<span class=normal>900</span>
<span class=normal>901</span>
<span class=normal>902</span>
<span class=normal>903</span>
<span class=normal>904</span>
<span class=normal>905</span>
<span class=normal>906</span>
<span class=normal>907</span>
<span class=normal>908</span>
<span class=normal>909</span>
<span class=normal>910</span>
<span class=normal>911</span>
<span class=normal>912</span>
<span class=normal>913</span>
<span class=normal>914</span>
<span class=normal>915</span>
<span class=normal>916</span>
<span class=normal>917</span>
<span class=normal>918</span>
<span class=normal>919</span>
<span class=normal>920</span>
<span class=normal>921</span>
<span class=normal>922</span>
<span class=normal>923</span>
<span class=normal>924</span>
<span class=normal>925</span>
<span class=normal>926</span>
<span class=normal>927</span>
<span class=normal>928</span>
<span class=normal>929</span>
<span class=normal>930</span>
<span class=normal>931</span>
<span class=normal>932</span>
<span class=normal>933</span>
<span class=normal>934</span>
<span class=normal>935</span>
<span class=normal>936</span>
<span class=normal>937</span>
<span class=normal>938</span>
<span class=normal>939</span>
<span class=normal>940</span>
<span class=normal>941</span>
<span class=normal>942</span>
<span class=normal>943</span>
<span class=normal>944</span>
<span class=normal>945</span>
<span class=normal>946</span>
<span class=normal>947</span>
<span class=normal>948</span>
<span class=normal>949</span>
<span class=normal>950</span>
<span class=normal>951</span>
<span class=normal>952</span>
<span class=normal>953</span>
<span class=normal>954</span>
<span class=normal>955</span>
<span class=normal>956</span>
<span class=normal>957</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>FileDefItem</span><span class=p>:</span>
    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>directory</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
        <span class=n>filenames</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>],</span>
        <span class=n>frames</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>List</span><span class=p>[</span><span class=nb>int</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
        <span class=n>template</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
    <span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>directory</span> <span class=o>=</span> <span class=n>directory</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>filenames</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>is_sequence</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>template</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>frames</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>is_empty</span> <span class=o>=</span> <span class=kc>True</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>set_filenames</span><span class=p>(</span><span class=n>filenames</span><span class=p>,</span> <span class=n>frames</span><span class=p>,</span> <span class=n>template</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__str__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>to_dict</span><span class=p>())</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__repr__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>is_empty</span><span class=p>:</span>
            <span class=n>filename</span> <span class=o>=</span> <span class=s2>&quot;&lt; empty &gt;&quot;</span>
        <span class=k>elif</span> <span class=bp>self</span><span class=o>.</span><span class=n>is_sequence</span><span class=p>:</span>
            <span class=n>filename</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>template</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>filename</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>filenames</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>

        <span class=k>return</span> <span class=s2>&quot;&lt;</span><span class=si>{}</span><span class=s2>: </span><span class=se>\&quot;</span><span class=si>{}</span><span class=se>\&quot;</span><span class=s2>&gt;&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=p>,</span>
            <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>directory</span><span class=p>,</span> <span class=n>filename</span><span class=p>)</span>
        <span class=p>)</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>label</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>is_empty</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>None</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>is_sequence</span><span class=p>:</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>filenames</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>

        <span class=n>frame_start</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>frames</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
        <span class=n>filename_template</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>basename</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>template</span><span class=p>)</span>
        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>frames</span><span class=p>)</span> <span class=o>==</span> <span class=mi>1</span><span class=p>:</span>
            <span class=k>return</span> <span class=s2>&quot;</span><span class=si>{}</span><span class=s2> [</span><span class=si>{}</span><span class=s2>]&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>filename_template</span><span class=p>,</span> <span class=n>frame_start</span><span class=p>)</span>

        <span class=n>frame_end</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>frames</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span>
        <span class=n>expected_len</span> <span class=o>=</span> <span class=p>(</span><span class=n>frame_end</span> <span class=o>-</span> <span class=n>frame_start</span><span class=p>)</span> <span class=o>+</span> <span class=mi>1</span>
        <span class=k>if</span> <span class=n>expected_len</span> <span class=o>==</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>frames</span><span class=p>):</span>
            <span class=k>return</span> <span class=s2>&quot;</span><span class=si>{}</span><span class=s2> [</span><span class=si>{}</span><span class=s2>-</span><span class=si>{}</span><span class=s2>]&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                <span class=n>filename_template</span><span class=p>,</span> <span class=n>frame_start</span><span class=p>,</span> <span class=n>frame_end</span>
            <span class=p>)</span>

        <span class=n>ranges</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=n>_frame_start</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=n>_frame_end</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=k>for</span> <span class=n>frame</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>frame_start</span><span class=p>,</span> <span class=n>frame_end</span> <span class=o>+</span> <span class=mi>1</span><span class=p>):</span>
            <span class=k>if</span> <span class=n>frame</span> <span class=ow>not</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>frames</span><span class=p>:</span>
                <span class=n>add_to_ranges</span> <span class=o>=</span> <span class=n>_frame_start</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span>
            <span class=k>elif</span> <span class=n>_frame_start</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
                <span class=n>_frame_start</span> <span class=o>=</span> <span class=n>_frame_end</span> <span class=o>=</span> <span class=n>frame</span>
                <span class=n>add_to_ranges</span> <span class=o>=</span> <span class=n>frame</span> <span class=o>==</span> <span class=n>frame_end</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=n>_frame_end</span> <span class=o>=</span> <span class=n>frame</span>
                <span class=n>add_to_ranges</span> <span class=o>=</span> <span class=n>frame</span> <span class=o>==</span> <span class=n>frame_end</span>

            <span class=k>if</span> <span class=n>add_to_ranges</span><span class=p>:</span>
                <span class=k>if</span> <span class=n>_frame_start</span> <span class=o>!=</span> <span class=n>_frame_end</span><span class=p>:</span>
                    <span class=n>_range</span> <span class=o>=</span> <span class=s2>&quot;</span><span class=si>{}</span><span class=s2>-</span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>_frame_start</span><span class=p>,</span> <span class=n>_frame_end</span><span class=p>)</span>
                <span class=k>else</span><span class=p>:</span>
                    <span class=n>_range</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>_frame_start</span><span class=p>)</span>
                <span class=n>ranges</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>_range</span><span class=p>)</span>
                <span class=n>_frame_start</span> <span class=o>=</span> <span class=n>_frame_end</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=k>return</span> <span class=s2>&quot;</span><span class=si>{}</span><span class=s2> [</span><span class=si>{}</span><span class=s2>]&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
            <span class=n>filename_template</span><span class=p>,</span> <span class=s2>&quot;,&quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>ranges</span><span class=p>)</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>split_sequence</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=s2>&quot;Self&quot;</span><span class=p>]:</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>is_sequence</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;Cannot split single file item&quot;</span><span class=p>)</span>

        <span class=n>paths</span> <span class=o>=</span> <span class=p>[</span>
            <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>directory</span><span class=p>,</span> <span class=n>filename</span><span class=p>)</span>
            <span class=k>for</span> <span class=n>filename</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>filenames</span>
        <span class=p>]</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>from_paths</span><span class=p>(</span><span class=n>paths</span><span class=p>,</span> <span class=kc>False</span><span class=p>)</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>ext</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>is_empty</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>None</span>
        <span class=n>_</span><span class=p>,</span> <span class=n>ext</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>splitext</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>filenames</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span>
        <span class=k>if</span> <span class=n>ext</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>ext</span>
        <span class=k>return</span> <span class=kc>None</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>lower_ext</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
        <span class=n>ext</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>ext</span>
        <span class=k>if</span> <span class=n>ext</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>ext</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span>
        <span class=k>return</span> <span class=n>ext</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>is_dir</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>is_empty</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>False</span>

        <span class=c1># QUESTION a better way how to define folder (in init argument?)</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>ext</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>False</span>
        <span class=k>return</span> <span class=kc>True</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_directory</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>directory</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>directory</span> <span class=o>=</span> <span class=n>directory</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_filenames</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>filenames</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>],</span>
        <span class=n>frames</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>List</span><span class=p>[</span><span class=nb>int</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
        <span class=n>template</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
    <span class=p>):</span>
        <span class=k>if</span> <span class=n>frames</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>frames</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=n>is_sequence</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=k>if</span> <span class=n>frames</span><span class=p>:</span>
            <span class=n>is_sequence</span> <span class=o>=</span> <span class=kc>True</span>

        <span class=k>if</span> <span class=n>is_sequence</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>template</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;Missing template for sequence&quot;</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>is_empty</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>filenames</span><span class=p>)</span> <span class=o>==</span> <span class=mi>0</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>filenames</span> <span class=o>=</span> <span class=n>filenames</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>template</span> <span class=o>=</span> <span class=n>template</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>frames</span> <span class=o>=</span> <span class=n>frames</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>is_sequence</span> <span class=o>=</span> <span class=n>is_sequence</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>create_empty_item</span><span class=p>(</span><span class=bp>cls</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=s2>&quot;Self&quot;</span><span class=p>:</span>
        <span class=k>return</span> <span class=bp>cls</span><span class=p>(</span><span class=s2>&quot;&quot;</span><span class=p>,</span> <span class=s2>&quot;&quot;</span><span class=p>)</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>from_value</span><span class=p>(</span>
        <span class=bp>cls</span><span class=p>,</span>
        <span class=n>value</span><span class=p>:</span> <span class=s2>&quot;Union[List[FileDefItemDict], FileDefItemDict]&quot;</span><span class=p>,</span>
        <span class=n>allow_sequences</span><span class=p>:</span> <span class=nb>bool</span><span class=p>,</span>
    <span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=s2>&quot;Self&quot;</span><span class=p>]:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Convert passed value to FileDefItem objects.</span>

<span class=sd>        Returns:</span>
<span class=sd>            list: Created FileDefItem objects.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=c1># Convert single item to iterable</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=p>(</span><span class=nb>list</span><span class=p>,</span> <span class=nb>tuple</span><span class=p>,</span> <span class=nb>set</span><span class=p>)):</span>
            <span class=n>value</span> <span class=o>=</span> <span class=p>[</span><span class=n>value</span><span class=p>]</span>

        <span class=n>output</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=n>str_filepaths</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=n>value</span><span class=p>:</span>
            <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>item</span><span class=p>,</span> <span class=nb>dict</span><span class=p>):</span>
                <span class=n>item</span> <span class=o>=</span> <span class=bp>cls</span><span class=o>.</span><span class=n>from_dict</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>

            <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>item</span><span class=p>,</span> <span class=n>FileDefItem</span><span class=p>):</span>
                <span class=k>if</span> <span class=ow>not</span> <span class=n>allow_sequences</span> <span class=ow>and</span> <span class=n>item</span><span class=o>.</span><span class=n>is_sequence</span><span class=p>:</span>
                    <span class=n>output</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>item</span><span class=o>.</span><span class=n>split_sequence</span><span class=p>())</span>
                <span class=k>else</span><span class=p>:</span>
                    <span class=n>output</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>

            <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>item</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
                <span class=n>str_filepaths</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=k>raise</span> <span class=ne>TypeError</span><span class=p>(</span>
                    <span class=s2>&quot;Unknown type </span><span class=se>\&quot;</span><span class=si>{}</span><span class=se>\&quot;</span><span class=s2>. Can&#39;t convert to </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                        <span class=nb>str</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=n>item</span><span class=p>)),</span> <span class=bp>cls</span><span class=o>.</span><span class=vm>__name__</span>
                    <span class=p>)</span>
                <span class=p>)</span>

        <span class=k>if</span> <span class=n>str_filepaths</span><span class=p>:</span>
            <span class=n>output</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=bp>cls</span><span class=o>.</span><span class=n>from_paths</span><span class=p>(</span><span class=n>str_filepaths</span><span class=p>,</span> <span class=n>allow_sequences</span><span class=p>))</span>

        <span class=k>return</span> <span class=n>output</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>from_dict</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>data</span><span class=p>:</span> <span class=s2>&quot;FileDefItemDict&quot;</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=s2>&quot;Self&quot;</span><span class=p>:</span>
        <span class=k>return</span> <span class=bp>cls</span><span class=p>(</span>
            <span class=n>data</span><span class=p>[</span><span class=s2>&quot;directory&quot;</span><span class=p>],</span>
            <span class=n>data</span><span class=p>[</span><span class=s2>&quot;filenames&quot;</span><span class=p>],</span>
            <span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;frames&quot;</span><span class=p>),</span>
            <span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;template&quot;</span><span class=p>)</span>
        <span class=p>)</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>from_paths</span><span class=p>(</span>
        <span class=bp>cls</span><span class=p>,</span>
        <span class=n>paths</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>],</span>
        <span class=n>allow_sequences</span><span class=p>:</span> <span class=nb>bool</span><span class=p>,</span>
    <span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=s2>&quot;Self&quot;</span><span class=p>]:</span>
        <span class=n>filenames_by_dir</span> <span class=o>=</span> <span class=n>collections</span><span class=o>.</span><span class=n>defaultdict</span><span class=p>(</span><span class=nb>list</span><span class=p>)</span>
        <span class=k>for</span> <span class=n>path</span> <span class=ow>in</span> <span class=n>paths</span><span class=p>:</span>
            <span class=n>normalized</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>normpath</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>
            <span class=n>directory</span><span class=p>,</span> <span class=n>filename</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=n>normalized</span><span class=p>)</span>
            <span class=n>filenames_by_dir</span><span class=p>[</span><span class=n>directory</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>filename</span><span class=p>)</span>

        <span class=n>output</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>for</span> <span class=n>directory</span><span class=p>,</span> <span class=n>filenames</span> <span class=ow>in</span> <span class=n>filenames_by_dir</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=k>if</span> <span class=n>allow_sequences</span><span class=p>:</span>
                <span class=n>cols</span><span class=p>,</span> <span class=n>remainders</span> <span class=o>=</span> <span class=n>clique</span><span class=o>.</span><span class=n>assemble</span><span class=p>(</span><span class=n>filenames</span><span class=p>)</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=n>cols</span> <span class=o>=</span> <span class=p>[]</span>
                <span class=n>remainders</span> <span class=o>=</span> <span class=n>filenames</span>

            <span class=k>for</span> <span class=n>remainder</span> <span class=ow>in</span> <span class=n>remainders</span><span class=p>:</span>
                <span class=n>output</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=bp>cls</span><span class=p>(</span><span class=n>directory</span><span class=p>,</span> <span class=p>[</span><span class=n>remainder</span><span class=p>]))</span>

            <span class=k>for</span> <span class=n>col</span> <span class=ow>in</span> <span class=n>cols</span><span class=p>:</span>
                <span class=n>frames</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>col</span><span class=o>.</span><span class=n>indexes</span><span class=p>)</span>
                <span class=n>paths</span> <span class=o>=</span> <span class=p>[</span><span class=n>filename</span> <span class=k>for</span> <span class=n>filename</span> <span class=ow>in</span> <span class=n>col</span><span class=p>]</span>
                <span class=n>template</span> <span class=o>=</span> <span class=n>col</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=s2>&quot;</span><span class=si>{head}{padding}{tail}</span><span class=s2>&quot;</span><span class=p>)</span>

                <span class=n>output</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=bp>cls</span><span class=p>(</span>
                    <span class=n>directory</span><span class=p>,</span> <span class=n>paths</span><span class=p>,</span> <span class=n>frames</span><span class=p>,</span> <span class=n>template</span>
                <span class=p>))</span>

        <span class=k>return</span> <span class=n>output</span>

    <span class=k>def</span><span class=w> </span><span class=nf>to_dict</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=s2>&quot;FileDefItemDict&quot;</span><span class=p>:</span>
        <span class=n>output</span> <span class=o>=</span> <span class=p>{</span>
            <span class=s2>&quot;is_sequence&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>is_sequence</span><span class=p>,</span>
            <span class=s2>&quot;directory&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>directory</span><span class=p>,</span>
            <span class=s2>&quot;filenames&quot;</span><span class=p>:</span> <span class=nb>list</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>filenames</span><span class=p>),</span>
        <span class=p>}</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>is_sequence</span><span class=p>:</span>
            <span class=n>output</span><span class=o>.</span><span class=n>update</span><span class=p>({</span>
                <span class=s2>&quot;template&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>template</span><span class=p>,</span>
                <span class=s2>&quot;frames&quot;</span><span class=p>:</span> <span class=nb>list</span><span class=p>(</span><span class=nb>sorted</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>frames</span><span class=p>)),</span>
            <span class=p>})</span>

        <span class=k>return</span> <span class=n>output</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.lib.FileDefItem.from_value class="doc doc-heading"> <code class="highlight language-python"><span class=n>from_value</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=n>allow_sequences</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Convert passed value to FileDefItem objects.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>list</code></td> <td> <code><span title=typing.List>List</span>[<span title=typing.Self>Self</span>]</code> </td> <td> <div class=doc-md-description> <p>Created FileDefItem objects.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/attribute_definitions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>860</span>
<span class=normal>861</span>
<span class=normal>862</span>
<span class=normal>863</span>
<span class=normal>864</span>
<span class=normal>865</span>
<span class=normal>866</span>
<span class=normal>867</span>
<span class=normal>868</span>
<span class=normal>869</span>
<span class=normal>870</span>
<span class=normal>871</span>
<span class=normal>872</span>
<span class=normal>873</span>
<span class=normal>874</span>
<span class=normal>875</span>
<span class=normal>876</span>
<span class=normal>877</span>
<span class=normal>878</span>
<span class=normal>879</span>
<span class=normal>880</span>
<span class=normal>881</span>
<span class=normal>882</span>
<span class=normal>883</span>
<span class=normal>884</span>
<span class=normal>885</span>
<span class=normal>886</span>
<span class=normal>887</span>
<span class=normal>888</span>
<span class=normal>889</span>
<span class=normal>890</span>
<span class=normal>891</span>
<span class=normal>892</span>
<span class=normal>893</span>
<span class=normal>894</span>
<span class=normal>895</span>
<span class=normal>896</span>
<span class=normal>897</span>
<span class=normal>898</span>
<span class=normal>899</span>
<span class=normal>900</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@classmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>from_value</span><span class=p>(</span>
    <span class=bp>cls</span><span class=p>,</span>
    <span class=n>value</span><span class=p>:</span> <span class=s2>&quot;Union[List[FileDefItemDict], FileDefItemDict]&quot;</span><span class=p>,</span>
    <span class=n>allow_sequences</span><span class=p>:</span> <span class=nb>bool</span><span class=p>,</span>
<span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=s2>&quot;Self&quot;</span><span class=p>]:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Convert passed value to FileDefItem objects.</span>

<span class=sd>    Returns:</span>
<span class=sd>        list: Created FileDefItem objects.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=c1># Convert single item to iterable</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=p>(</span><span class=nb>list</span><span class=p>,</span> <span class=nb>tuple</span><span class=p>,</span> <span class=nb>set</span><span class=p>)):</span>
        <span class=n>value</span> <span class=o>=</span> <span class=p>[</span><span class=n>value</span><span class=p>]</span>

    <span class=n>output</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=n>str_filepaths</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=n>value</span><span class=p>:</span>
        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>item</span><span class=p>,</span> <span class=nb>dict</span><span class=p>):</span>
            <span class=n>item</span> <span class=o>=</span> <span class=bp>cls</span><span class=o>.</span><span class=n>from_dict</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>

        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>item</span><span class=p>,</span> <span class=n>FileDefItem</span><span class=p>):</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=n>allow_sequences</span> <span class=ow>and</span> <span class=n>item</span><span class=o>.</span><span class=n>is_sequence</span><span class=p>:</span>
                <span class=n>output</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>item</span><span class=o>.</span><span class=n>split_sequence</span><span class=p>())</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=n>output</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>

        <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>item</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
            <span class=n>str_filepaths</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>TypeError</span><span class=p>(</span>
                <span class=s2>&quot;Unknown type </span><span class=se>\&quot;</span><span class=si>{}</span><span class=se>\&quot;</span><span class=s2>. Can&#39;t convert to </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                    <span class=nb>str</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=n>item</span><span class=p>)),</span> <span class=bp>cls</span><span class=o>.</span><span class=vm>__name__</span>
                <span class=p>)</span>
            <span class=p>)</span>

    <span class=k>if</span> <span class=n>str_filepaths</span><span class=p>:</span>
        <span class=n>output</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=bp>cls</span><span class=o>.</span><span class=n>from_paths</span><span class=p>(</span><span class=n>str_filepaths</span><span class=p>,</span> <span class=n>allow_sequences</span><span class=p>))</span>

    <span class=k>return</span> <span class=n>output</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.lib.FormatObject class="doc doc-heading"> <code>FormatObject</code> </h2> <div class="doc doc-contents "> <p>Object that can be used for formatting.</p> <p>This is base that is valid for to be used in 'StringTemplate' value.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/path_templates.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>498</span>
<span class=normal>499</span>
<span class=normal>500</span>
<span class=normal>501</span>
<span class=normal>502</span>
<span class=normal>503</span>
<span class=normal>504</span>
<span class=normal>505</span>
<span class=normal>506</span>
<span class=normal>507</span>
<span class=normal>508</span>
<span class=normal>509</span>
<span class=normal>510</span>
<span class=normal>511</span>
<span class=normal>512</span>
<span class=normal>513</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>FormatObject</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Object that can be used for formatting.</span>

<span class=sd>    This is base that is valid for to be used in &#39;StringTemplate&#39; value.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>value</span> <span class=o>=</span> <span class=s2>&quot;&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__format__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>value</span><span class=o>.</span><span class=fm>__format__</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__str__</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
        <span class=k>return</span> <span class=nb>str</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>value</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__repr__</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=fm>__str__</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.lib.IniSettingRegistry class="doc doc-heading"> <code>IniSettingRegistry</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="ASettingRegistry (client.ayon_core.lib.local_settings.ASettingRegistry)" href=local_settings.html#client.ayon_core.lib.local_settings.ASettingRegistry>ASettingRegistry</a></code></p> <p>Class using :mod:<code>configparser</code>.</p> <p>This class is using :mod:<code>configparser</code> (ini) files to store items.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/local_settings.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span>
<span class=normal>325</span>
<span class=normal>326</span>
<span class=normal>327</span>
<span class=normal>328</span>
<span class=normal>329</span>
<span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span>
<span class=normal>334</span>
<span class=normal>335</span>
<span class=normal>336</span>
<span class=normal>337</span>
<span class=normal>338</span>
<span class=normal>339</span>
<span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span>
<span class=normal>344</span>
<span class=normal>345</span>
<span class=normal>346</span>
<span class=normal>347</span>
<span class=normal>348</span>
<span class=normal>349</span>
<span class=normal>350</span>
<span class=normal>351</span>
<span class=normal>352</span>
<span class=normal>353</span>
<span class=normal>354</span>
<span class=normal>355</span>
<span class=normal>356</span>
<span class=normal>357</span>
<span class=normal>358</span>
<span class=normal>359</span>
<span class=normal>360</span>
<span class=normal>361</span>
<span class=normal>362</span>
<span class=normal>363</span>
<span class=normal>364</span>
<span class=normal>365</span>
<span class=normal>366</span>
<span class=normal>367</span>
<span class=normal>368</span>
<span class=normal>369</span>
<span class=normal>370</span>
<span class=normal>371</span>
<span class=normal>372</span>
<span class=normal>373</span>
<span class=normal>374</span>
<span class=normal>375</span>
<span class=normal>376</span>
<span class=normal>377</span>
<span class=normal>378</span>
<span class=normal>379</span>
<span class=normal>380</span>
<span class=normal>381</span>
<span class=normal>382</span>
<span class=normal>383</span>
<span class=normal>384</span>
<span class=normal>385</span>
<span class=normal>386</span>
<span class=normal>387</span>
<span class=normal>388</span>
<span class=normal>389</span>
<span class=normal>390</span>
<span class=normal>391</span>
<span class=normal>392</span>
<span class=normal>393</span>
<span class=normal>394</span>
<span class=normal>395</span>
<span class=normal>396</span>
<span class=normal>397</span>
<span class=normal>398</span>
<span class=normal>399</span>
<span class=normal>400</span>
<span class=normal>401</span>
<span class=normal>402</span>
<span class=normal>403</span>
<span class=normal>404</span>
<span class=normal>405</span>
<span class=normal>406</span>
<span class=normal>407</span>
<span class=normal>408</span>
<span class=normal>409</span>
<span class=normal>410</span>
<span class=normal>411</span>
<span class=normal>412</span>
<span class=normal>413</span>
<span class=normal>414</span>
<span class=normal>415</span>
<span class=normal>416</span>
<span class=normal>417</span>
<span class=normal>418</span>
<span class=normal>419</span>
<span class=normal>420</span>
<span class=normal>421</span>
<span class=normal>422</span>
<span class=normal>423</span>
<span class=normal>424</span>
<span class=normal>425</span>
<span class=normal>426</span>
<span class=normal>427</span>
<span class=normal>428</span>
<span class=normal>429</span>
<span class=normal>430</span>
<span class=normal>431</span>
<span class=normal>432</span>
<span class=normal>433</span>
<span class=normal>434</span>
<span class=normal>435</span>
<span class=normal>436</span>
<span class=normal>437</span>
<span class=normal>438</span>
<span class=normal>439</span>
<span class=normal>440</span>
<span class=normal>441</span>
<span class=normal>442</span>
<span class=normal>443</span>
<span class=normal>444</span>
<span class=normal>445</span>
<span class=normal>446</span>
<span class=normal>447</span>
<span class=normal>448</span>
<span class=normal>449</span>
<span class=normal>450</span>
<span class=normal>451</span>
<span class=normal>452</span>
<span class=normal>453</span>
<span class=normal>454</span>
<span class=normal>455</span>
<span class=normal>456</span>
<span class=normal>457</span>
<span class=normal>458</span>
<span class=normal>459</span>
<span class=normal>460</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>IniSettingRegistry</span><span class=p>(</span><span class=n>ASettingRegistry</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Class using :mod:`configparser`.</span>

<span class=sd>    This class is using :mod:`configparser` (ini) files to store items.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>path</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>name</span><span class=p>)</span>
        <span class=c1># get registry file</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_registry_file</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>path</span><span class=p>,</span> <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>name</span><span class=si>}</span><span class=s2>.ini&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_registry_file</span><span class=p>):</span>
            <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_registry_file</span><span class=p>,</span> <span class=n>mode</span><span class=o>=</span><span class=s2>&quot;w&quot;</span><span class=p>)</span> <span class=k>as</span> <span class=n>cfg</span><span class=p>:</span>
                <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;# Settings registry&quot;</span><span class=p>,</span> <span class=n>cfg</span><span class=p>)</span>
                <span class=n>now</span> <span class=o>=</span> <span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>()</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s2>&quot;</span><span class=si>%d</span><span class=s2>/%m/%Y %H:%M:%S&quot;</span><span class=p>)</span>
                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;# </span><span class=si>{</span><span class=n>now</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>,</span> <span class=n>cfg</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_item_section</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>section</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Set item to specific section of ini registry.</span>

<span class=sd>        If section doesn&#39;t exists, it is created.</span>

<span class=sd>        Args:</span>
<span class=sd>            section (str): Name of section.</span>
<span class=sd>            name (str): Name of the item.</span>
<span class=sd>            value (str): Value of the item.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>value</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
        <span class=n>config</span> <span class=o>=</span> <span class=n>configparser</span><span class=o>.</span><span class=n>ConfigParser</span><span class=p>()</span>

        <span class=n>config</span><span class=o>.</span><span class=n>read</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_registry_file</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>config</span><span class=o>.</span><span class=n>has_section</span><span class=p>(</span><span class=n>section</span><span class=p>):</span>
            <span class=n>config</span><span class=o>.</span><span class=n>add_section</span><span class=p>(</span><span class=n>section</span><span class=p>)</span>
        <span class=n>current</span> <span class=o>=</span> <span class=n>config</span><span class=p>[</span><span class=n>section</span><span class=p>]</span>
        <span class=n>current</span><span class=p>[</span><span class=n>name</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>

        <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_registry_file</span><span class=p>,</span> <span class=n>mode</span><span class=o>=</span><span class=s2>&quot;w&quot;</span><span class=p>)</span> <span class=k>as</span> <span class=n>cfg</span><span class=p>:</span>
            <span class=n>config</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>cfg</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_set_item</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>set_item_section</span><span class=p>(</span><span class=s2>&quot;MAIN&quot;</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_item</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Set item to settings ini file.</span>

<span class=sd>        This saves item to ``DEFAULT`` section of ini as each item there</span>
<span class=sd>        must reside in some section.</span>

<span class=sd>        Args:</span>
<span class=sd>            name (str): Name of the item.</span>
<span class=sd>            value (str): Value of the item.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=c1># this does the some, overridden just for different docstring.</span>
        <span class=c1># we cast value to str as ini options values must be strings.</span>
        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>set_item</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=nb>str</span><span class=p>(</span><span class=n>value</span><span class=p>))</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_item</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Gets item from settings ini file.</span>

<span class=sd>        This gets settings from ``DEFAULT`` section of ini file as each item</span>
<span class=sd>        there must reside in some section.</span>

<span class=sd>        Args:</span>
<span class=sd>            name (str): Name of the item.</span>

<span class=sd>        Returns:</span>
<span class=sd>            str: Value of item.</span>

<span class=sd>        Raises:</span>
<span class=sd>            RegistryItemNotFound: If value doesn&#39;t exist.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>get_item</span><span class=p>(</span><span class=n>name</span><span class=p>)</span>

    <span class=nd>@lru_cache</span><span class=p>(</span><span class=n>maxsize</span><span class=o>=</span><span class=mi>32</span><span class=p>)</span>
    <span class=k>def</span><span class=w> </span><span class=nf>get_item_from_section</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>section</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get item from section of ini file.</span>

<span class=sd>        This will read ini file and try to get item value from specified</span>
<span class=sd>        section. If that section or item doesn&#39;t exist,</span>
<span class=sd>        :exc:`RegistryItemNotFound` is risen.</span>

<span class=sd>        Args:</span>
<span class=sd>            section (str): Name of ini section.</span>
<span class=sd>            name (str): Name of the item.</span>

<span class=sd>        Returns:</span>
<span class=sd>            str: Item value.</span>

<span class=sd>        Raises:</span>
<span class=sd>            RegistryItemNotFound: If value doesn&#39;t exist.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>config</span> <span class=o>=</span> <span class=n>configparser</span><span class=o>.</span><span class=n>ConfigParser</span><span class=p>()</span>
        <span class=n>config</span><span class=o>.</span><span class=n>read</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_registry_file</span><span class=p>)</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=n>value</span> <span class=o>=</span> <span class=n>config</span><span class=p>[</span><span class=n>section</span><span class=p>][</span><span class=n>name</span><span class=p>]</span>
        <span class=k>except</span> <span class=ne>KeyError</span><span class=p>:</span>
            <span class=k>raise</span> <span class=n>RegistryItemNotFound</span><span class=p>(</span>
                <span class=sa>f</span><span class=s2>&quot;Registry doesn&#39;t contain value </span><span class=si>{</span><span class=n>section</span><span class=si>}</span><span class=s2>:</span><span class=si>{</span><span class=n>name</span><span class=si>}</span><span class=s2>&quot;</span>
            <span class=p>)</span>
        <span class=k>return</span> <span class=n>value</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_get_item</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_item_from_section</span><span class=p>(</span><span class=s2>&quot;MAIN&quot;</span><span class=p>,</span> <span class=n>name</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>delete_item_from_section</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>section</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Delete item from section in ini file.</span>

<span class=sd>        Args:</span>
<span class=sd>            section (str): Section name.</span>
<span class=sd>            name (str): Name of the item.</span>

<span class=sd>        Raises:</span>
<span class=sd>            RegistryItemNotFound: If the item doesn&#39;t exist.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>get_item_from_section</span><span class=o>.</span><span class=n>cache_clear</span><span class=p>()</span>
        <span class=n>config</span> <span class=o>=</span> <span class=n>configparser</span><span class=o>.</span><span class=n>ConfigParser</span><span class=p>()</span>
        <span class=n>config</span><span class=o>.</span><span class=n>read</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_registry_file</span><span class=p>)</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=n>_</span> <span class=o>=</span> <span class=n>config</span><span class=p>[</span><span class=n>section</span><span class=p>][</span><span class=n>name</span><span class=p>]</span>
        <span class=k>except</span> <span class=ne>KeyError</span><span class=p>:</span>
            <span class=k>raise</span> <span class=n>RegistryItemNotFound</span><span class=p>(</span>
                <span class=sa>f</span><span class=s2>&quot;Registry doesn&#39;t contain value </span><span class=si>{</span><span class=n>section</span><span class=si>}</span><span class=s2>:</span><span class=si>{</span><span class=n>name</span><span class=si>}</span><span class=s2>&quot;</span>
            <span class=p>)</span>
        <span class=n>config</span><span class=o>.</span><span class=n>remove_option</span><span class=p>(</span><span class=n>section</span><span class=p>,</span> <span class=n>name</span><span class=p>)</span>

        <span class=c1># if section is empty, delete it</span>
        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>config</span><span class=p>[</span><span class=n>section</span><span class=p>]</span><span class=o>.</span><span class=n>keys</span><span class=p>())</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
            <span class=n>config</span><span class=o>.</span><span class=n>remove_section</span><span class=p>(</span><span class=n>section</span><span class=p>)</span>

        <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_registry_file</span><span class=p>,</span> <span class=n>mode</span><span class=o>=</span><span class=s2>&quot;w&quot;</span><span class=p>)</span> <span class=k>as</span> <span class=n>cfg</span><span class=p>:</span>
            <span class=n>config</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>cfg</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_delete_item</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Delete item from default section.&quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>delete_item_from_section</span><span class=p>(</span><span class=s2>&quot;MAIN&quot;</span><span class=p>,</span> <span class=n>name</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.lib.IniSettingRegistry.delete_item_from_section class="doc doc-heading"> <code class="highlight language-python"><span class=n>delete_item_from_section</span><span class=p>(</span><span class=n>section</span><span class=p>,</span> <span class=n>name</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Delete item from section in ini file.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>section</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Section name.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Name of the item.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="RegistryItemNotFound (client.ayon_core.lib.local_settings.RegistryItemNotFound)" href=local_settings.html#client.ayon_core.lib.local_settings.RegistryItemNotFound>RegistryItemNotFound</a></code> </td> <td> <div class=doc-md-description> <p>If the item doesn't exist.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/local_settings.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>429</span>
<span class=normal>430</span>
<span class=normal>431</span>
<span class=normal>432</span>
<span class=normal>433</span>
<span class=normal>434</span>
<span class=normal>435</span>
<span class=normal>436</span>
<span class=normal>437</span>
<span class=normal>438</span>
<span class=normal>439</span>
<span class=normal>440</span>
<span class=normal>441</span>
<span class=normal>442</span>
<span class=normal>443</span>
<span class=normal>444</span>
<span class=normal>445</span>
<span class=normal>446</span>
<span class=normal>447</span>
<span class=normal>448</span>
<span class=normal>449</span>
<span class=normal>450</span>
<span class=normal>451</span>
<span class=normal>452</span>
<span class=normal>453</span>
<span class=normal>454</span>
<span class=normal>455</span>
<span class=normal>456</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>delete_item_from_section</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>section</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Delete item from section in ini file.</span>

<span class=sd>    Args:</span>
<span class=sd>        section (str): Section name.</span>
<span class=sd>        name (str): Name of the item.</span>

<span class=sd>    Raises:</span>
<span class=sd>        RegistryItemNotFound: If the item doesn&#39;t exist.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>get_item_from_section</span><span class=o>.</span><span class=n>cache_clear</span><span class=p>()</span>
    <span class=n>config</span> <span class=o>=</span> <span class=n>configparser</span><span class=o>.</span><span class=n>ConfigParser</span><span class=p>()</span>
    <span class=n>config</span><span class=o>.</span><span class=n>read</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_registry_file</span><span class=p>)</span>
    <span class=k>try</span><span class=p>:</span>
        <span class=n>_</span> <span class=o>=</span> <span class=n>config</span><span class=p>[</span><span class=n>section</span><span class=p>][</span><span class=n>name</span><span class=p>]</span>
    <span class=k>except</span> <span class=ne>KeyError</span><span class=p>:</span>
        <span class=k>raise</span> <span class=n>RegistryItemNotFound</span><span class=p>(</span>
            <span class=sa>f</span><span class=s2>&quot;Registry doesn&#39;t contain value </span><span class=si>{</span><span class=n>section</span><span class=si>}</span><span class=s2>:</span><span class=si>{</span><span class=n>name</span><span class=si>}</span><span class=s2>&quot;</span>
        <span class=p>)</span>
    <span class=n>config</span><span class=o>.</span><span class=n>remove_option</span><span class=p>(</span><span class=n>section</span><span class=p>,</span> <span class=n>name</span><span class=p>)</span>

    <span class=c1># if section is empty, delete it</span>
    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>config</span><span class=p>[</span><span class=n>section</span><span class=p>]</span><span class=o>.</span><span class=n>keys</span><span class=p>())</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
        <span class=n>config</span><span class=o>.</span><span class=n>remove_section</span><span class=p>(</span><span class=n>section</span><span class=p>)</span>

    <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_registry_file</span><span class=p>,</span> <span class=n>mode</span><span class=o>=</span><span class=s2>&quot;w&quot;</span><span class=p>)</span> <span class=k>as</span> <span class=n>cfg</span><span class=p>:</span>
        <span class=n>config</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>cfg</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.lib.IniSettingRegistry.get_item class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_item</span><span class=p>(</span><span class=n>name</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Gets item from settings ini file.</p> <p>This gets settings from <code>DEFAULT</code> section of ini file as each item there must reside in some section.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Name of the item.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Value of item.</p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="RegistryItemNotFound (client.ayon_core.lib.local_settings.RegistryItemNotFound)" href=local_settings.html#client.ayon_core.lib.local_settings.RegistryItemNotFound>RegistryItemNotFound</a></code> </td> <td> <div class=doc-md-description> <p>If value doesn't exist.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/local_settings.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>379</span>
<span class=normal>380</span>
<span class=normal>381</span>
<span class=normal>382</span>
<span class=normal>383</span>
<span class=normal>384</span>
<span class=normal>385</span>
<span class=normal>386</span>
<span class=normal>387</span>
<span class=normal>388</span>
<span class=normal>389</span>
<span class=normal>390</span>
<span class=normal>391</span>
<span class=normal>392</span>
<span class=normal>393</span>
<span class=normal>394</span>
<span class=normal>395</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_item</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Gets item from settings ini file.</span>

<span class=sd>    This gets settings from ``DEFAULT`` section of ini file as each item</span>
<span class=sd>    there must reside in some section.</span>

<span class=sd>    Args:</span>
<span class=sd>        name (str): Name of the item.</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: Value of item.</span>

<span class=sd>    Raises:</span>
<span class=sd>        RegistryItemNotFound: If value doesn&#39;t exist.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>return</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>get_item</span><span class=p>(</span><span class=n>name</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.lib.IniSettingRegistry.get_item_from_section class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_item_from_section</span><span class=p>(</span><span class=n>section</span><span class=p>,</span> <span class=n>name</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-cached"><code>cached</code></small> </span> </h3> <div class="doc doc-contents "> <p>Get item from section of ini file.</p> <p>This will read ini file and try to get item value from specified section. If that section or item doesn't exist, :exc:<code>RegistryItemNotFound</code> is risen.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>section</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Name of ini section.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Name of the item.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Item value.</p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><a class="autorefs autorefs-internal" title="RegistryItemNotFound (client.ayon_core.lib.local_settings.RegistryItemNotFound)" href=local_settings.html#client.ayon_core.lib.local_settings.RegistryItemNotFound>RegistryItemNotFound</a></code> </td> <td> <div class=doc-md-description> <p>If value doesn't exist.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/local_settings.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>397</span>
<span class=normal>398</span>
<span class=normal>399</span>
<span class=normal>400</span>
<span class=normal>401</span>
<span class=normal>402</span>
<span class=normal>403</span>
<span class=normal>404</span>
<span class=normal>405</span>
<span class=normal>406</span>
<span class=normal>407</span>
<span class=normal>408</span>
<span class=normal>409</span>
<span class=normal>410</span>
<span class=normal>411</span>
<span class=normal>412</span>
<span class=normal>413</span>
<span class=normal>414</span>
<span class=normal>415</span>
<span class=normal>416</span>
<span class=normal>417</span>
<span class=normal>418</span>
<span class=normal>419</span>
<span class=normal>420</span>
<span class=normal>421</span>
<span class=normal>422</span>
<span class=normal>423</span>
<span class=normal>424</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@lru_cache</span><span class=p>(</span><span class=n>maxsize</span><span class=o>=</span><span class=mi>32</span><span class=p>)</span>
<span class=k>def</span><span class=w> </span><span class=nf>get_item_from_section</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>section</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get item from section of ini file.</span>

<span class=sd>    This will read ini file and try to get item value from specified</span>
<span class=sd>    section. If that section or item doesn&#39;t exist,</span>
<span class=sd>    :exc:`RegistryItemNotFound` is risen.</span>

<span class=sd>    Args:</span>
<span class=sd>        section (str): Name of ini section.</span>
<span class=sd>        name (str): Name of the item.</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: Item value.</span>

<span class=sd>    Raises:</span>
<span class=sd>        RegistryItemNotFound: If value doesn&#39;t exist.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>config</span> <span class=o>=</span> <span class=n>configparser</span><span class=o>.</span><span class=n>ConfigParser</span><span class=p>()</span>
    <span class=n>config</span><span class=o>.</span><span class=n>read</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_registry_file</span><span class=p>)</span>
    <span class=k>try</span><span class=p>:</span>
        <span class=n>value</span> <span class=o>=</span> <span class=n>config</span><span class=p>[</span><span class=n>section</span><span class=p>][</span><span class=n>name</span><span class=p>]</span>
    <span class=k>except</span> <span class=ne>KeyError</span><span class=p>:</span>
        <span class=k>raise</span> <span class=n>RegistryItemNotFound</span><span class=p>(</span>
            <span class=sa>f</span><span class=s2>&quot;Registry doesn&#39;t contain value </span><span class=si>{</span><span class=n>section</span><span class=si>}</span><span class=s2>:</span><span class=si>{</span><span class=n>name</span><span class=si>}</span><span class=s2>&quot;</span>
        <span class=p>)</span>
    <span class=k>return</span> <span class=n>value</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.lib.IniSettingRegistry.set_item class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_item</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Set item to settings ini file.</p> <p>This saves item to <code>DEFAULT</code> section of ini as each item there must reside in some section.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Name of the item.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>value</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Value of the item.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/local_settings.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>364</span>
<span class=normal>365</span>
<span class=normal>366</span>
<span class=normal>367</span>
<span class=normal>368</span>
<span class=normal>369</span>
<span class=normal>370</span>
<span class=normal>371</span>
<span class=normal>372</span>
<span class=normal>373</span>
<span class=normal>374</span>
<span class=normal>375</span>
<span class=normal>376</span>
<span class=normal>377</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_item</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Set item to settings ini file.</span>

<span class=sd>    This saves item to ``DEFAULT`` section of ini as each item there</span>
<span class=sd>    must reside in some section.</span>

<span class=sd>    Args:</span>
<span class=sd>        name (str): Name of the item.</span>
<span class=sd>        value (str): Value of the item.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=c1># this does the some, overridden just for different docstring.</span>
    <span class=c1># we cast value to str as ini options values must be strings.</span>
    <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>set_item</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=nb>str</span><span class=p>(</span><span class=n>value</span><span class=p>))</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.lib.IniSettingRegistry.set_item_section class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_item_section</span><span class=p>(</span><span class=n>section</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Set item to specific section of ini registry.</p> <p>If section doesn't exists, it is created.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>section</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Name of section.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Name of the item.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>value</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Value of the item.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/local_settings.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>338</span>
<span class=normal>339</span>
<span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span>
<span class=normal>344</span>
<span class=normal>345</span>
<span class=normal>346</span>
<span class=normal>347</span>
<span class=normal>348</span>
<span class=normal>349</span>
<span class=normal>350</span>
<span class=normal>351</span>
<span class=normal>352</span>
<span class=normal>353</span>
<span class=normal>354</span>
<span class=normal>355</span>
<span class=normal>356</span>
<span class=normal>357</span>
<span class=normal>358</span>
<span class=normal>359</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_item_section</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>section</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Set item to specific section of ini registry.</span>

<span class=sd>    If section doesn&#39;t exists, it is created.</span>

<span class=sd>    Args:</span>
<span class=sd>        section (str): Name of section.</span>
<span class=sd>        name (str): Name of the item.</span>
<span class=sd>        value (str): Value of the item.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>value</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
    <span class=n>config</span> <span class=o>=</span> <span class=n>configparser</span><span class=o>.</span><span class=n>ConfigParser</span><span class=p>()</span>

    <span class=n>config</span><span class=o>.</span><span class=n>read</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_registry_file</span><span class=p>)</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>config</span><span class=o>.</span><span class=n>has_section</span><span class=p>(</span><span class=n>section</span><span class=p>):</span>
        <span class=n>config</span><span class=o>.</span><span class=n>add_section</span><span class=p>(</span><span class=n>section</span><span class=p>)</span>
    <span class=n>current</span> <span class=o>=</span> <span class=n>config</span><span class=p>[</span><span class=n>section</span><span class=p>]</span>
    <span class=n>current</span><span class=p>[</span><span class=n>name</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>

    <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_registry_file</span><span class=p>,</span> <span class=n>mode</span><span class=o>=</span><span class=s2>&quot;w&quot;</span><span class=p>)</span> <span class=k>as</span> <span class=n>cfg</span><span class=p>:</span>
        <span class=n>config</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>cfg</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.lib.JSONSettingRegistry class="doc doc-heading"> <code>JSONSettingRegistry</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="ASettingRegistry (client.ayon_core.lib.local_settings.ASettingRegistry)" href=local_settings.html#client.ayon_core.lib.local_settings.ASettingRegistry>ASettingRegistry</a></code></p> <p>Class using a json file as storage.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/local_settings.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>463</span>
<span class=normal>464</span>
<span class=normal>465</span>
<span class=normal>466</span>
<span class=normal>467</span>
<span class=normal>468</span>
<span class=normal>469</span>
<span class=normal>470</span>
<span class=normal>471</span>
<span class=normal>472</span>
<span class=normal>473</span>
<span class=normal>474</span>
<span class=normal>475</span>
<span class=normal>476</span>
<span class=normal>477</span>
<span class=normal>478</span>
<span class=normal>479</span>
<span class=normal>480</span>
<span class=normal>481</span>
<span class=normal>482</span>
<span class=normal>483</span>
<span class=normal>484</span>
<span class=normal>485</span>
<span class=normal>486</span>
<span class=normal>487</span>
<span class=normal>488</span>
<span class=normal>489</span>
<span class=normal>490</span>
<span class=normal>491</span>
<span class=normal>492</span>
<span class=normal>493</span>
<span class=normal>494</span>
<span class=normal>495</span>
<span class=normal>496</span>
<span class=normal>497</span>
<span class=normal>498</span>
<span class=normal>499</span>
<span class=normal>500</span>
<span class=normal>501</span>
<span class=normal>502</span>
<span class=normal>503</span>
<span class=normal>504</span>
<span class=normal>505</span>
<span class=normal>506</span>
<span class=normal>507</span>
<span class=normal>508</span>
<span class=normal>509</span>
<span class=normal>510</span>
<span class=normal>511</span>
<span class=normal>512</span>
<span class=normal>513</span>
<span class=normal>514</span>
<span class=normal>515</span>
<span class=normal>516</span>
<span class=normal>517</span>
<span class=normal>518</span>
<span class=normal>519</span>
<span class=normal>520</span>
<span class=normal>521</span>
<span class=normal>522</span>
<span class=normal>523</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>JSONSettingRegistry</span><span class=p>(</span><span class=n>ASettingRegistry</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Class using a json file as storage.&quot;&quot;&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>path</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>name</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_registry_file</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>path</span><span class=p>,</span> <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>name</span><span class=si>}</span><span class=s2>.json&quot;</span><span class=p>)</span>
        <span class=n>now</span> <span class=o>=</span> <span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>()</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s2>&quot;</span><span class=si>%d</span><span class=s2>/%m/%Y %H:%M:%S&quot;</span><span class=p>)</span>
        <span class=n>header</span> <span class=o>=</span> <span class=p>{</span>
            <span class=s2>&quot;__metadata__&quot;</span><span class=p>:</span> <span class=p>{</span><span class=s2>&quot;generated&quot;</span><span class=p>:</span> <span class=n>now</span><span class=p>},</span>
            <span class=s2>&quot;registry&quot;</span><span class=p>:</span> <span class=p>{}</span>
        <span class=p>}</span>

        <span class=c1># Use &#39;os.path.dirname&#39; in case someone uses slashes in &#39;name&#39;</span>
        <span class=n>dirpath</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>dirname</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_registry_file</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>dirpath</span><span class=p>):</span>
            <span class=n>os</span><span class=o>.</span><span class=n>makedirs</span><span class=p>(</span><span class=n>dirpath</span><span class=p>,</span> <span class=n>exist_ok</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_registry_file</span><span class=p>):</span>
            <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_registry_file</span><span class=p>,</span> <span class=n>mode</span><span class=o>=</span><span class=s2>&quot;w&quot;</span><span class=p>)</span> <span class=k>as</span> <span class=n>cfg</span><span class=p>:</span>
                <span class=n>json</span><span class=o>.</span><span class=n>dump</span><span class=p>(</span><span class=n>header</span><span class=p>,</span> <span class=n>cfg</span><span class=p>,</span> <span class=n>indent</span><span class=o>=</span><span class=mi>4</span><span class=p>)</span>

    <span class=nd>@lru_cache</span><span class=p>(</span><span class=n>maxsize</span><span class=o>=</span><span class=mi>32</span><span class=p>)</span>
    <span class=k>def</span><span class=w> </span><span class=nf>_get_item</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get item value from the registry.</span>

<span class=sd>        Note:</span>
<span class=sd>            See :meth:`ayon_core.lib.JSONSettingRegistry.get_item`</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_registry_file</span><span class=p>,</span> <span class=n>mode</span><span class=o>=</span><span class=s2>&quot;r&quot;</span><span class=p>)</span> <span class=k>as</span> <span class=n>cfg</span><span class=p>:</span>
            <span class=n>data</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=n>cfg</span><span class=p>)</span>
            <span class=k>try</span><span class=p>:</span>
                <span class=n>value</span> <span class=o>=</span> <span class=n>data</span><span class=p>[</span><span class=s2>&quot;registry&quot;</span><span class=p>][</span><span class=n>name</span><span class=p>]</span>
            <span class=k>except</span> <span class=ne>KeyError</span><span class=p>:</span>
                <span class=k>raise</span> <span class=n>RegistryItemNotFound</span><span class=p>(</span>
                    <span class=sa>f</span><span class=s2>&quot;Registry doesn&#39;t contain value </span><span class=si>{</span><span class=n>name</span><span class=si>}</span><span class=s2>&quot;</span>
                <span class=p>)</span>
        <span class=k>return</span> <span class=n>value</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_set_item</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Set item value to the registry.</span>

<span class=sd>        Note:</span>
<span class=sd>            See :meth:`ayon_core.lib.JSONSettingRegistry.set_item`</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_registry_file</span><span class=p>,</span> <span class=s2>&quot;r+&quot;</span><span class=p>)</span> <span class=k>as</span> <span class=n>cfg</span><span class=p>:</span>
            <span class=n>data</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=n>cfg</span><span class=p>)</span>
            <span class=n>data</span><span class=p>[</span><span class=s2>&quot;registry&quot;</span><span class=p>][</span><span class=n>name</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>
            <span class=n>cfg</span><span class=o>.</span><span class=n>truncate</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
            <span class=n>cfg</span><span class=o>.</span><span class=n>seek</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
            <span class=n>json</span><span class=o>.</span><span class=n>dump</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>cfg</span><span class=p>,</span> <span class=n>indent</span><span class=o>=</span><span class=mi>4</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_get_item</span><span class=o>.</span><span class=n>cache_clear</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_delete_item</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_registry_file</span><span class=p>,</span> <span class=s2>&quot;r+&quot;</span><span class=p>)</span> <span class=k>as</span> <span class=n>cfg</span><span class=p>:</span>
            <span class=n>data</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=n>cfg</span><span class=p>)</span>
            <span class=k>del</span> <span class=n>data</span><span class=p>[</span><span class=s2>&quot;registry&quot;</span><span class=p>][</span><span class=n>name</span><span class=p>]</span>
            <span class=n>cfg</span><span class=o>.</span><span class=n>truncate</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
            <span class=n>cfg</span><span class=o>.</span><span class=n>seek</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
            <span class=n>json</span><span class=o>.</span><span class=n>dump</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>cfg</span><span class=p>,</span> <span class=n>indent</span><span class=o>=</span><span class=mi>4</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_get_item</span><span class=o>.</span><span class=n>cache_clear</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.lib.Logger class="doc doc-heading"> <code>Logger</code> </h2> <div class="doc doc-contents "> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/log.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>Logger</span><span class=p>:</span>
    <span class=n>DFT</span> <span class=o>=</span> <span class=s1>&#39;</span><span class=si>%(levelname)s</span><span class=s1> &gt;&gt;&gt; { </span><span class=si>%(name)s</span><span class=s1> }: [ </span><span class=si>%(message)s</span><span class=s1> ] &#39;</span>
    <span class=n>DBG</span> <span class=o>=</span> <span class=s2>&quot;  - { </span><span class=si>%(name)s</span><span class=s2> }: [ </span><span class=si>%(message)s</span><span class=s2> ] &quot;</span>
    <span class=n>INF</span> <span class=o>=</span> <span class=s2>&quot;&gt;&gt;&gt; [ </span><span class=si>%(message)s</span><span class=s2> ] &quot;</span>
    <span class=n>WRN</span> <span class=o>=</span> <span class=s2>&quot;*** WRN: &gt;&gt;&gt; { </span><span class=si>%(name)s</span><span class=s2> }: [ </span><span class=si>%(message)s</span><span class=s2> ] &quot;</span>
    <span class=n>ERR</span> <span class=o>=</span> <span class=s2>&quot;!!! ERR: </span><span class=si>%(asctime)s</span><span class=s2> &gt;&gt;&gt; { </span><span class=si>%(name)s</span><span class=s2> }: [ </span><span class=si>%(message)s</span><span class=s2> ] &quot;</span>
    <span class=n>CRI</span> <span class=o>=</span> <span class=s2>&quot;!!! CRI: </span><span class=si>%(asctime)s</span><span class=s2> &gt;&gt;&gt; { </span><span class=si>%(name)s</span><span class=s2> }: [ </span><span class=si>%(message)s</span><span class=s2> ] &quot;</span>

    <span class=n>FORMAT_FILE</span> <span class=o>=</span> <span class=p>{</span>
        <span class=n>logging</span><span class=o>.</span><span class=n>INFO</span><span class=p>:</span> <span class=n>INF</span><span class=p>,</span>
        <span class=n>logging</span><span class=o>.</span><span class=n>DEBUG</span><span class=p>:</span> <span class=n>DBG</span><span class=p>,</span>
        <span class=n>logging</span><span class=o>.</span><span class=n>WARNING</span><span class=p>:</span> <span class=n>WRN</span><span class=p>,</span>
        <span class=n>logging</span><span class=o>.</span><span class=n>ERROR</span><span class=p>:</span> <span class=n>ERR</span><span class=p>,</span>
        <span class=n>logging</span><span class=o>.</span><span class=n>CRITICAL</span><span class=p>:</span> <span class=n>CRI</span><span class=p>,</span>
    <span class=p>}</span>

    <span class=c1># Is static class initialized</span>
    <span class=n>initialized</span> <span class=o>=</span> <span class=kc>False</span>
    <span class=n>_init_lock</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Lock</span><span class=p>()</span>

    <span class=c1># Logging level - AYON_LOG_LEVEL</span>
    <span class=n>log_level</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=c1># Data same for all record documents</span>
    <span class=n>process_data</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=c1># Cached process name or ability to set different process name</span>
    <span class=n>_process_name</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>get_logger</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>name</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>cls</span><span class=o>.</span><span class=n>initialized</span><span class=p>:</span>
            <span class=bp>cls</span><span class=o>.</span><span class=n>initialize</span><span class=p>()</span>

        <span class=n>logger</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>getLogger</span><span class=p>(</span><span class=n>name</span> <span class=ow>or</span> <span class=s2>&quot;__main__&quot;</span><span class=p>)</span>

        <span class=n>logger</span><span class=o>.</span><span class=n>setLevel</span><span class=p>(</span><span class=bp>cls</span><span class=o>.</span><span class=n>log_level</span><span class=p>)</span>

        <span class=n>add_console_handler</span> <span class=o>=</span> <span class=kc>True</span>

        <span class=k>for</span> <span class=n>handler</span> <span class=ow>in</span> <span class=n>logger</span><span class=o>.</span><span class=n>handlers</span><span class=p>:</span>
            <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>handler</span><span class=p>,</span> <span class=n>LogStreamHandler</span><span class=p>):</span>
                <span class=n>add_console_handler</span> <span class=o>=</span> <span class=kc>False</span>

        <span class=k>if</span> <span class=n>add_console_handler</span><span class=p>:</span>
            <span class=n>logger</span><span class=o>.</span><span class=n>addHandler</span><span class=p>(</span><span class=bp>cls</span><span class=o>.</span><span class=n>_get_console_handler</span><span class=p>())</span>

        <span class=c1># Do not propagate logs to root logger</span>
        <span class=n>logger</span><span class=o>.</span><span class=n>propagate</span> <span class=o>=</span> <span class=kc>False</span>

        <span class=k>return</span> <span class=n>logger</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>_get_console_handler</span><span class=p>(</span><span class=bp>cls</span><span class=p>):</span>
        <span class=n>formatter</span> <span class=o>=</span> <span class=n>LogFormatter</span><span class=p>(</span><span class=bp>cls</span><span class=o>.</span><span class=n>FORMAT_FILE</span><span class=p>)</span>
        <span class=n>console_handler</span> <span class=o>=</span> <span class=n>LogStreamHandler</span><span class=p>()</span>

        <span class=n>console_handler</span><span class=o>.</span><span class=n>set_name</span><span class=p>(</span><span class=s2>&quot;LogStreamHandler&quot;</span><span class=p>)</span>
        <span class=n>console_handler</span><span class=o>.</span><span class=n>setFormatter</span><span class=p>(</span><span class=n>formatter</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>console_handler</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>initialize</span><span class=p>(</span><span class=bp>cls</span><span class=p>):</span>
        <span class=c1># TODO update already created loggers on re-initialization</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_init_lock</span><span class=o>.</span><span class=n>locked</span><span class=p>():</span>
            <span class=k>with</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_init_lock</span><span class=p>:</span>
                <span class=bp>cls</span><span class=o>.</span><span class=n>_initialize</span><span class=p>()</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=c1># If lock is locked wait until is finished</span>
            <span class=k>while</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_init_lock</span><span class=o>.</span><span class=n>locked</span><span class=p>():</span>
                <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mf>0.1</span><span class=p>)</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>_initialize</span><span class=p>(</span><span class=bp>cls</span><span class=p>):</span>
        <span class=c1># Change initialization state to prevent runtime changes</span>
        <span class=c1># if is executed during runtime</span>
        <span class=bp>cls</span><span class=o>.</span><span class=n>initialized</span> <span class=o>=</span> <span class=kc>False</span>

        <span class=c1># Define what is logging level</span>
        <span class=n>log_level</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>getenv</span><span class=p>(</span><span class=s2>&quot;AYON_LOG_LEVEL&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>log_level</span><span class=p>:</span>
            <span class=c1># Check AYON_DEBUG for debug level</span>
            <span class=n>op_debug</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>getenv</span><span class=p>(</span><span class=s2>&quot;AYON_DEBUG&quot;</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>op_debug</span> <span class=ow>and</span> <span class=nb>int</span><span class=p>(</span><span class=n>op_debug</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
                <span class=n>log_level</span> <span class=o>=</span> <span class=mi>10</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=n>log_level</span> <span class=o>=</span> <span class=mi>20</span>
        <span class=bp>cls</span><span class=o>.</span><span class=n>log_level</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>log_level</span><span class=p>)</span>

        <span class=c1># Mark as initialized</span>
        <span class=bp>cls</span><span class=o>.</span><span class=n>initialized</span> <span class=o>=</span> <span class=kc>True</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>get_process_data</span><span class=p>(</span><span class=bp>cls</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Data about current process which should be same for all records.</span>

<span class=sd>        Process data are used for each record sent to mongo database.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=bp>cls</span><span class=o>.</span><span class=n>process_data</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>cls</span><span class=o>.</span><span class=n>process_data</span><span class=p>)</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=bp>cls</span><span class=o>.</span><span class=n>initialized</span><span class=p>:</span>
            <span class=bp>cls</span><span class=o>.</span><span class=n>initialize</span><span class=p>()</span>

        <span class=n>host_name</span> <span class=o>=</span> <span class=n>socket</span><span class=o>.</span><span class=n>gethostname</span><span class=p>()</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=n>host_ip</span> <span class=o>=</span> <span class=n>socket</span><span class=o>.</span><span class=n>gethostbyname</span><span class=p>(</span><span class=n>host_name</span><span class=p>)</span>
        <span class=k>except</span> <span class=n>socket</span><span class=o>.</span><span class=n>gaierror</span><span class=p>:</span>
            <span class=n>host_ip</span> <span class=o>=</span> <span class=s2>&quot;127.0.0.1&quot;</span>

        <span class=n>process_name</span> <span class=o>=</span> <span class=bp>cls</span><span class=o>.</span><span class=n>get_process_name</span><span class=p>()</span>

        <span class=bp>cls</span><span class=o>.</span><span class=n>process_data</span> <span class=o>=</span> <span class=p>{</span>
            <span class=s2>&quot;hostname&quot;</span><span class=p>:</span> <span class=n>host_name</span><span class=p>,</span>
            <span class=s2>&quot;hostip&quot;</span><span class=p>:</span> <span class=n>host_ip</span><span class=p>,</span>
            <span class=s2>&quot;username&quot;</span><span class=p>:</span> <span class=n>getpass</span><span class=o>.</span><span class=n>getuser</span><span class=p>(),</span>
            <span class=s2>&quot;system_name&quot;</span><span class=p>:</span> <span class=n>platform</span><span class=o>.</span><span class=n>system</span><span class=p>(),</span>
            <span class=s2>&quot;process_name&quot;</span><span class=p>:</span> <span class=n>process_name</span>
        <span class=p>}</span>
        <span class=k>return</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>cls</span><span class=o>.</span><span class=n>process_data</span><span class=p>)</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>set_process_name</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>process_name</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Set process name for mongo logs.&quot;&quot;&quot;</span>
        <span class=c1># Just change the attribute</span>
        <span class=bp>cls</span><span class=o>.</span><span class=n>_process_name</span> <span class=o>=</span> <span class=n>process_name</span>
        <span class=c1># Update process data if are already set</span>
        <span class=k>if</span> <span class=bp>cls</span><span class=o>.</span><span class=n>process_data</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>cls</span><span class=o>.</span><span class=n>process_data</span><span class=p>[</span><span class=s2>&quot;process_name&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>process_name</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>get_process_name</span><span class=p>(</span><span class=bp>cls</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Process name that is like &quot;label&quot; of a process.</span>

<span class=sd>        AYON logging can be used from OpenPyppe itself of from hosts.</span>
<span class=sd>        Even in AYON process it&#39;s good to know if logs are from tray or</span>
<span class=sd>        from other cli commands. This should help to identify that information.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_process_name</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_process_name</span>

        <span class=c1># Get process name</span>
        <span class=n>process_name</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AYON_APP_NAME&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>process_name</span><span class=p>:</span>
            <span class=k>try</span><span class=p>:</span>
                <span class=kn>import</span><span class=w> </span><span class=nn>psutil</span>
                <span class=n>process</span> <span class=o>=</span> <span class=n>psutil</span><span class=o>.</span><span class=n>Process</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>getpid</span><span class=p>())</span>
                <span class=n>process_name</span> <span class=o>=</span> <span class=n>process</span><span class=o>.</span><span class=n>name</span><span class=p>()</span>

            <span class=k>except</span> <span class=ne>ImportError</span><span class=p>:</span>
                <span class=k>pass</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>process_name</span><span class=p>:</span>
            <span class=n>process_name</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>basename</span><span class=p>(</span><span class=n>sys</span><span class=o>.</span><span class=n>executable</span><span class=p>)</span>

        <span class=bp>cls</span><span class=o>.</span><span class=n>_process_name</span> <span class=o>=</span> <span class=n>process_name</span>
        <span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_process_name</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.lib.Logger.get_process_data class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_process_data</span><span class=p>()</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Data about current process which should be same for all records.</p> <p>Process data are used for each record sent to mongo database.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/log.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@classmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>get_process_data</span><span class=p>(</span><span class=bp>cls</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Data about current process which should be same for all records.</span>

<span class=sd>    Process data are used for each record sent to mongo database.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=bp>cls</span><span class=o>.</span><span class=n>process_data</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>cls</span><span class=o>.</span><span class=n>process_data</span><span class=p>)</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=bp>cls</span><span class=o>.</span><span class=n>initialized</span><span class=p>:</span>
        <span class=bp>cls</span><span class=o>.</span><span class=n>initialize</span><span class=p>()</span>

    <span class=n>host_name</span> <span class=o>=</span> <span class=n>socket</span><span class=o>.</span><span class=n>gethostname</span><span class=p>()</span>
    <span class=k>try</span><span class=p>:</span>
        <span class=n>host_ip</span> <span class=o>=</span> <span class=n>socket</span><span class=o>.</span><span class=n>gethostbyname</span><span class=p>(</span><span class=n>host_name</span><span class=p>)</span>
    <span class=k>except</span> <span class=n>socket</span><span class=o>.</span><span class=n>gaierror</span><span class=p>:</span>
        <span class=n>host_ip</span> <span class=o>=</span> <span class=s2>&quot;127.0.0.1&quot;</span>

    <span class=n>process_name</span> <span class=o>=</span> <span class=bp>cls</span><span class=o>.</span><span class=n>get_process_name</span><span class=p>()</span>

    <span class=bp>cls</span><span class=o>.</span><span class=n>process_data</span> <span class=o>=</span> <span class=p>{</span>
        <span class=s2>&quot;hostname&quot;</span><span class=p>:</span> <span class=n>host_name</span><span class=p>,</span>
        <span class=s2>&quot;hostip&quot;</span><span class=p>:</span> <span class=n>host_ip</span><span class=p>,</span>
        <span class=s2>&quot;username&quot;</span><span class=p>:</span> <span class=n>getpass</span><span class=o>.</span><span class=n>getuser</span><span class=p>(),</span>
        <span class=s2>&quot;system_name&quot;</span><span class=p>:</span> <span class=n>platform</span><span class=o>.</span><span class=n>system</span><span class=p>(),</span>
        <span class=s2>&quot;process_name&quot;</span><span class=p>:</span> <span class=n>process_name</span>
    <span class=p>}</span>
    <span class=k>return</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=bp>cls</span><span class=o>.</span><span class=n>process_data</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.lib.Logger.get_process_name class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_process_name</span><span class=p>()</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Process name that is like "label" of a process.</p> <p>AYON logging can be used from OpenPyppe itself of from hosts. Even in AYON process it's good to know if logs are from tray or from other cli commands. This should help to identify that information.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/log.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@classmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>get_process_name</span><span class=p>(</span><span class=bp>cls</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Process name that is like &quot;label&quot; of a process.</span>

<span class=sd>    AYON logging can be used from OpenPyppe itself of from hosts.</span>
<span class=sd>    Even in AYON process it&#39;s good to know if logs are from tray or</span>
<span class=sd>    from other cli commands. This should help to identify that information.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_process_name</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_process_name</span>

    <span class=c1># Get process name</span>
    <span class=n>process_name</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AYON_APP_NAME&quot;</span><span class=p>)</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>process_name</span><span class=p>:</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=kn>import</span><span class=w> </span><span class=nn>psutil</span>
            <span class=n>process</span> <span class=o>=</span> <span class=n>psutil</span><span class=o>.</span><span class=n>Process</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>getpid</span><span class=p>())</span>
            <span class=n>process_name</span> <span class=o>=</span> <span class=n>process</span><span class=o>.</span><span class=n>name</span><span class=p>()</span>

        <span class=k>except</span> <span class=ne>ImportError</span><span class=p>:</span>
            <span class=k>pass</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>process_name</span><span class=p>:</span>
        <span class=n>process_name</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>basename</span><span class=p>(</span><span class=n>sys</span><span class=o>.</span><span class=n>executable</span><span class=p>)</span>

    <span class=bp>cls</span><span class=o>.</span><span class=n>_process_name</span> <span class=o>=</span> <span class=n>process_name</span>
    <span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_process_name</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.lib.Logger.set_process_name class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_process_name</span><span class=p>(</span><span class=n>process_name</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Set process name for mongo logs.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/log.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@classmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>set_process_name</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>process_name</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Set process name for mongo logs.&quot;&quot;&quot;</span>
    <span class=c1># Just change the attribute</span>
    <span class=bp>cls</span><span class=o>.</span><span class=n>_process_name</span> <span class=o>=</span> <span class=n>process_name</span>
    <span class=c1># Update process data if are already set</span>
    <span class=k>if</span> <span class=bp>cls</span><span class=o>.</span><span class=n>process_data</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
        <span class=bp>cls</span><span class=o>.</span><span class=n>process_data</span><span class=p>[</span><span class=s2>&quot;process_name&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>process_name</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.lib.NestedCacheItem class="doc doc-heading"> <code>NestedCacheItem</code> </h2> <div class="doc doc-contents "> <p>Helper for cached items stored in nested structure.</p> <details class=example open> <summary>Example</summary> <blockquote> <blockquote> <blockquote> <p>cache = NestedCacheItem(levels=2, default_factory=lambda: 0) cache["a"]["b"].is_valid False cache["a"]["b"].get_data() 0 cache["a"]["b"] = 1 cache["a"]["b"].is_valid True cache["a"]["b"].get_data() 1 cache.reset() cache["a"]["b"].is_valid False</p> </blockquote> </blockquote> </blockquote> </details> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>levels</code> </td> <td> <code><span title=int>int</span></code> </td> <td> <div class=doc-md-description> <p>Number of nested levels where read cache is stored.</p> </div> </td> <td> <code>1</code> </td> </tr> <tr class=doc-section-item> <td> <code>default_factory</code> </td> <td> <code><span title=Optional>Optional</span>[<span title=callable>callable</span>]</code> </td> <td> <div class=doc-md-description> <p>Function that returns default value used on init and on reset.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>lifetime</code> </td> <td> <code><span title=Optional>Optional</span>[<span title=int>int</span>]</code> </td> <td> <div class=doc-md-description> <p>Lifetime of the cache data in seconds. Default value is based on default value of 'CacheItem'.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>_init_info</code> </td> <td> <code><span title=Optional>Optional</span>[<span title=client.ayon_core.lib.cache.InitInfo>InitInfo</span>]</code> </td> <td> <div class=doc-md-description> <p>Private argument. Init info for nested cache where created from parent item.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/cache.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>NestedCacheItem</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Helper for cached items stored in nested structure.</span>

<span class=sd>    Example:</span>
<span class=sd>        &gt;&gt;&gt; cache = NestedCacheItem(levels=2, default_factory=lambda: 0)</span>
<span class=sd>        &gt;&gt;&gt; cache[&quot;a&quot;][&quot;b&quot;].is_valid</span>
<span class=sd>        False</span>
<span class=sd>        &gt;&gt;&gt; cache[&quot;a&quot;][&quot;b&quot;].get_data()</span>
<span class=sd>        0</span>
<span class=sd>        &gt;&gt;&gt; cache[&quot;a&quot;][&quot;b&quot;] = 1</span>
<span class=sd>        &gt;&gt;&gt; cache[&quot;a&quot;][&quot;b&quot;].is_valid</span>
<span class=sd>        True</span>
<span class=sd>        &gt;&gt;&gt; cache[&quot;a&quot;][&quot;b&quot;].get_data()</span>
<span class=sd>        1</span>
<span class=sd>        &gt;&gt;&gt; cache.reset()</span>
<span class=sd>        &gt;&gt;&gt; cache[&quot;a&quot;][&quot;b&quot;].is_valid</span>
<span class=sd>        False</span>

<span class=sd>    Args:</span>
<span class=sd>        levels (int): Number of nested levels where read cache is stored.</span>
<span class=sd>        default_factory (Optional[callable]): Function that returns default</span>
<span class=sd>            value used on init and on reset.</span>
<span class=sd>        lifetime (Optional[int]): Lifetime of the cache data in seconds.</span>
<span class=sd>            Default value is based on default value of &#39;CacheItem&#39;.</span>
<span class=sd>        _init_info (Optional[InitInfo]): Private argument. Init info for</span>
<span class=sd>            nested cache where created from parent item.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span> <span class=n>levels</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=n>default_factory</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>lifetime</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>_init_info</span><span class=o>=</span><span class=kc>None</span>
    <span class=p>):</span>
        <span class=k>if</span> <span class=n>levels</span> <span class=o>&lt;</span> <span class=mi>1</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;Nested levels must be greater than 0&quot;</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_data_by_key</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=k>if</span> <span class=n>_init_info</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>_init_info</span> <span class=o>=</span> <span class=n>InitInfo</span><span class=p>(</span><span class=n>default_factory</span><span class=p>,</span> <span class=n>lifetime</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_init_info</span> <span class=o>=</span> <span class=n>_init_info</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_levels</span> <span class=o>=</span> <span class=n>levels</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__getitem__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get cached data.</span>

<span class=sd>        Args:</span>
<span class=sd>            key (str): Key of the cache item.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Union[NestedCacheItem, CacheItem]: Cache item.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>cache</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data_by_key</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>cache</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_levels</span> <span class=o>&gt;</span> <span class=mi>1</span><span class=p>:</span>
                <span class=n>cache</span> <span class=o>=</span> <span class=n>NestedCacheItem</span><span class=p>(</span>
                    <span class=n>levels</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_levels</span> <span class=o>-</span> <span class=mi>1</span><span class=p>,</span>
                    <span class=n>_init_info</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_init_info</span>
                <span class=p>)</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=n>cache</span> <span class=o>=</span> <span class=n>CacheItem</span><span class=p>(</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>_init_info</span><span class=o>.</span><span class=n>default_factory</span><span class=p>,</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>_init_info</span><span class=o>.</span><span class=n>lifetime</span>
                <span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_data_by_key</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>cache</span>
        <span class=k>return</span> <span class=n>cache</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__setitem__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Update cached data.</span>

<span class=sd>        Args:</span>
<span class=sd>            key (str): Key of the cache item.</span>
<span class=sd>            value (Any): Any data that are cached.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_levels</span> <span class=o>&gt;</span> <span class=mi>1</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>AttributeError</span><span class=p>((</span>
                <span class=s2>&quot;</span><span class=si>{}</span><span class=s2> does not support &#39;__setitem__&#39;. Lower nested level by </span><span class=si>{}</span><span class=s2>&quot;</span>
            <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_levels</span> <span class=o>-</span> <span class=mi>1</span><span class=p>))</span>
        <span class=n>cache</span> <span class=o>=</span> <span class=bp>self</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
        <span class=n>cache</span><span class=o>.</span><span class=n>update_data</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get cached data.</span>

<span class=sd>        Args:</span>
<span class=sd>            key (str): Key of the cache item.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Union[NestedCacheItem, CacheItem]: Cache item.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=bp>self</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>

    <span class=k>def</span><span class=w> </span><span class=nf>cached_count</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Amount of cached items.</span>

<span class=sd>        Returns:</span>
<span class=sd>            int: Amount of cached items.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_data_by_key</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>clear_key</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Clear cached item by key.</span>

<span class=sd>        Args:</span>
<span class=sd>            key (str): Key of the cache item.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_data_by_key</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>clear_invalid</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Clear all invalid cache items.</span>

<span class=sd>        Note:</span>
<span class=sd>            To clear all cache items use &#39;reset&#39;.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>changed</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=n>children_are_nested</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_levels</span> <span class=o>&gt;</span> <span class=mi>1</span>
        <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>cache</span> <span class=ow>in</span> <span class=nb>tuple</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_data_by_key</span><span class=o>.</span><span class=n>items</span><span class=p>()):</span>
            <span class=k>if</span> <span class=n>children_are_nested</span><span class=p>:</span>
                <span class=n>output</span> <span class=o>=</span> <span class=n>cache</span><span class=o>.</span><span class=n>clear_invalid</span><span class=p>()</span>
                <span class=k>if</span> <span class=n>output</span><span class=p>:</span>
                    <span class=n>changed</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>output</span>
                <span class=k>if</span> <span class=ow>not</span> <span class=n>cache</span><span class=o>.</span><span class=n>cached_count</span><span class=p>():</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>_data_by_key</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
            <span class=k>elif</span> <span class=ow>not</span> <span class=n>cache</span><span class=o>.</span><span class=n>is_valid</span><span class=p>:</span>
                <span class=n>changed</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>cache</span><span class=o>.</span><span class=n>get_data</span><span class=p>()</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_data_by_key</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>changed</span>

    <span class=k>def</span><span class=w> </span><span class=nf>reset</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Reset cache.</span>

<span class=sd>        Note:</span>
<span class=sd>            To clear only invalid cache items use &#39;clear_invalid&#39;.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_data_by_key</span> <span class=o>=</span> <span class=p>{}</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_lifetime</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>lifetime</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Change lifetime of all children cache items.</span>

<span class=sd>        Args:</span>
<span class=sd>            lifetime (int): Lifetime of the cache data in seconds.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_init_info</span><span class=o>.</span><span class=n>lifetime</span> <span class=o>=</span> <span class=n>lifetime</span>
        <span class=k>for</span> <span class=n>cache</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data_by_key</span><span class=o>.</span><span class=n>values</span><span class=p>():</span>
            <span class=n>cache</span><span class=o>.</span><span class=n>set_lifetime</span><span class=p>(</span><span class=n>lifetime</span><span class=p>)</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>is_valid</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Raise reasonable error when called on wrong level.</span>

<span class=sd>        Raises:</span>
<span class=sd>            AttributeError: If called on nested cache item.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>raise</span> <span class=ne>AttributeError</span><span class=p>((</span>
            <span class=s2>&quot;</span><span class=si>{}</span><span class=s2> does not support &#39;is_valid&#39;. Lower nested level by &#39;</span><span class=si>{}</span><span class=s2>&#39;&quot;</span>
        <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_levels</span><span class=p>))</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.lib.NestedCacheItem.is_valid class="doc doc-heading"> <code class="highlight language-python"><span class=n>is_valid</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Raise reasonable error when called on wrong level.</p> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=AttributeError>AttributeError</span></code> </td> <td> <div class=doc-md-description> <p>If called on nested cache item.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.lib.NestedCacheItem.__getitem__ class="doc doc-heading"> <code class="highlight language-python"><span class=fm>__getitem__</span><span class=p>(</span><span class=n>key</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Get cached data.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>key</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Key of the cache item.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Union[NestedCacheItem, CacheItem]: Cache item.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/cache.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=fm>__getitem__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get cached data.</span>

<span class=sd>    Args:</span>
<span class=sd>        key (str): Key of the cache item.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Union[NestedCacheItem, CacheItem]: Cache item.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>cache</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data_by_key</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>cache</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_levels</span> <span class=o>&gt;</span> <span class=mi>1</span><span class=p>:</span>
            <span class=n>cache</span> <span class=o>=</span> <span class=n>NestedCacheItem</span><span class=p>(</span>
                <span class=n>levels</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_levels</span> <span class=o>-</span> <span class=mi>1</span><span class=p>,</span>
                <span class=n>_init_info</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_init_info</span>
            <span class=p>)</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>cache</span> <span class=o>=</span> <span class=n>CacheItem</span><span class=p>(</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_init_info</span><span class=o>.</span><span class=n>default_factory</span><span class=p>,</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_init_info</span><span class=o>.</span><span class=n>lifetime</span>
            <span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_data_by_key</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>cache</span>
    <span class=k>return</span> <span class=n>cache</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.lib.NestedCacheItem.__setitem__ class="doc doc-heading"> <code class="highlight language-python"><span class=fm>__setitem__</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Update cached data.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>key</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Key of the cache item.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>value</code> </td> <td> <code><span title=Any>Any</span></code> </td> <td> <div class=doc-md-description> <p>Any data that are cached.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/cache.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=fm>__setitem__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Update cached data.</span>

<span class=sd>    Args:</span>
<span class=sd>        key (str): Key of the cache item.</span>
<span class=sd>        value (Any): Any data that are cached.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_levels</span> <span class=o>&gt;</span> <span class=mi>1</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>AttributeError</span><span class=p>((</span>
            <span class=s2>&quot;</span><span class=si>{}</span><span class=s2> does not support &#39;__setitem__&#39;. Lower nested level by </span><span class=si>{}</span><span class=s2>&quot;</span>
        <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_levels</span> <span class=o>-</span> <span class=mi>1</span><span class=p>))</span>
    <span class=n>cache</span> <span class=o>=</span> <span class=bp>self</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
    <span class=n>cache</span><span class=o>.</span><span class=n>update_data</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.lib.NestedCacheItem.cached_count class="doc doc-heading"> <code class="highlight language-python"><span class=n>cached_count</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Amount of cached items.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>int</code></td> <td> </td> <td> <div class=doc-md-description> <p>Amount of cached items.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/cache.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>cached_count</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Amount of cached items.</span>

<span class=sd>    Returns:</span>
<span class=sd>        int: Amount of cached items.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>return</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_data_by_key</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.lib.NestedCacheItem.clear_invalid class="doc doc-heading"> <code class="highlight language-python"><span class=n>clear_invalid</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Clear all invalid cache items.</p> <details class=note open> <summary>Note</summary> <p>To clear all cache items use 'reset'.</p> </details> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/cache.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>clear_invalid</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Clear all invalid cache items.</span>

<span class=sd>    Note:</span>
<span class=sd>        To clear all cache items use &#39;reset&#39;.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>changed</span> <span class=o>=</span> <span class=p>{}</span>
    <span class=n>children_are_nested</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_levels</span> <span class=o>&gt;</span> <span class=mi>1</span>
    <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>cache</span> <span class=ow>in</span> <span class=nb>tuple</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_data_by_key</span><span class=o>.</span><span class=n>items</span><span class=p>()):</span>
        <span class=k>if</span> <span class=n>children_are_nested</span><span class=p>:</span>
            <span class=n>output</span> <span class=o>=</span> <span class=n>cache</span><span class=o>.</span><span class=n>clear_invalid</span><span class=p>()</span>
            <span class=k>if</span> <span class=n>output</span><span class=p>:</span>
                <span class=n>changed</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>output</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=n>cache</span><span class=o>.</span><span class=n>cached_count</span><span class=p>():</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_data_by_key</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
        <span class=k>elif</span> <span class=ow>not</span> <span class=n>cache</span><span class=o>.</span><span class=n>is_valid</span><span class=p>:</span>
            <span class=n>changed</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>cache</span><span class=o>.</span><span class=n>get_data</span><span class=p>()</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_data_by_key</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>changed</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.lib.NestedCacheItem.clear_key class="doc doc-heading"> <code class="highlight language-python"><span class=n>clear_key</span><span class=p>(</span><span class=n>key</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Clear cached item by key.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>key</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Key of the cache item.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/cache.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>clear_key</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Clear cached item by key.</span>

<span class=sd>    Args:</span>
<span class=sd>        key (str): Key of the cache item.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_data_by_key</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.lib.NestedCacheItem.get class="doc doc-heading"> <code class="highlight language-python"><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Get cached data.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>key</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Key of the cache item.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Union[NestedCacheItem, CacheItem]: Cache item.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/cache.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get cached data.</span>

<span class=sd>    Args:</span>
<span class=sd>        key (str): Key of the cache item.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Union[NestedCacheItem, CacheItem]: Cache item.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>return</span> <span class=bp>self</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.lib.NestedCacheItem.reset class="doc doc-heading"> <code class="highlight language-python"><span class=n>reset</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Reset cache.</p> <details class=note open> <summary>Note</summary> <p>To clear only invalid cache items use 'clear_invalid'.</p> </details> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/cache.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>reset</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Reset cache.</span>

<span class=sd>    Note:</span>
<span class=sd>        To clear only invalid cache items use &#39;clear_invalid&#39;.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_data_by_key</span> <span class=o>=</span> <span class=p>{}</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.lib.NestedCacheItem.set_lifetime class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_lifetime</span><span class=p>(</span><span class=n>lifetime</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Change lifetime of all children cache items.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>lifetime</code> </td> <td> <code><span title=int>int</span></code> </td> <td> <div class=doc-md-description> <p>Lifetime of the cache data in seconds.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/cache.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_lifetime</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>lifetime</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Change lifetime of all children cache items.</span>

<span class=sd>    Args:</span>
<span class=sd>        lifetime (int): Lifetime of the cache data in seconds.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_init_info</span><span class=o>.</span><span class=n>lifetime</span> <span class=o>=</span> <span class=n>lifetime</span>
    <span class=k>for</span> <span class=n>cache</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_data_by_key</span><span class=o>.</span><span class=n>values</span><span class=p>():</span>
        <span class=n>cache</span><span class=o>.</span><span class=n>set_lifetime</span><span class=p>(</span><span class=n>lifetime</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.lib.NumberDef class="doc doc-heading"> <code>NumberDef</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="AbstractAttrDef (client.ayon_core.lib.attribute_definitions.AbstractAttrDef)" href=attribute_definitions.html#client.ayon_core.lib.attribute_definitions.AbstractAttrDef>AbstractAttrDef</a></code></p> <p>Number definition.</p> <p>Number can have defined minimum/maximum value and decimal points. Value is integer if decimals are 0.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>minimum</code> </td> <td> <code>(<span title=int>int</span>, <span title=float>float</span>)</code> </td> <td> <div class=doc-md-description> <p>Minimum possible value.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>maximum</code> </td> <td> <code>(<span title=int>int</span>, <span title=float>float</span>)</code> </td> <td> <div class=doc-md-description> <p>Maximum possible value.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>decimals</code> </td> <td> <code><span title=int>int</span></code> </td> <td> <div class=doc-md-description> <p>Maximum decimal points of value.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>default</code> </td> <td> <code>(<span title=int>int</span>, <span title=float>float</span>)</code> </td> <td> <div class=doc-md-description> <p>Default value for conversion.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/attribute_definitions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>370</span>
<span class=normal>371</span>
<span class=normal>372</span>
<span class=normal>373</span>
<span class=normal>374</span>
<span class=normal>375</span>
<span class=normal>376</span>
<span class=normal>377</span>
<span class=normal>378</span>
<span class=normal>379</span>
<span class=normal>380</span>
<span class=normal>381</span>
<span class=normal>382</span>
<span class=normal>383</span>
<span class=normal>384</span>
<span class=normal>385</span>
<span class=normal>386</span>
<span class=normal>387</span>
<span class=normal>388</span>
<span class=normal>389</span>
<span class=normal>390</span>
<span class=normal>391</span>
<span class=normal>392</span>
<span class=normal>393</span>
<span class=normal>394</span>
<span class=normal>395</span>
<span class=normal>396</span>
<span class=normal>397</span>
<span class=normal>398</span>
<span class=normal>399</span>
<span class=normal>400</span>
<span class=normal>401</span>
<span class=normal>402</span>
<span class=normal>403</span>
<span class=normal>404</span>
<span class=normal>405</span>
<span class=normal>406</span>
<span class=normal>407</span>
<span class=normal>408</span>
<span class=normal>409</span>
<span class=normal>410</span>
<span class=normal>411</span>
<span class=normal>412</span>
<span class=normal>413</span>
<span class=normal>414</span>
<span class=normal>415</span>
<span class=normal>416</span>
<span class=normal>417</span>
<span class=normal>418</span>
<span class=normal>419</span>
<span class=normal>420</span>
<span class=normal>421</span>
<span class=normal>422</span>
<span class=normal>423</span>
<span class=normal>424</span>
<span class=normal>425</span>
<span class=normal>426</span>
<span class=normal>427</span>
<span class=normal>428</span>
<span class=normal>429</span>
<span class=normal>430</span>
<span class=normal>431</span>
<span class=normal>432</span>
<span class=normal>433</span>
<span class=normal>434</span>
<span class=normal>435</span>
<span class=normal>436</span>
<span class=normal>437</span>
<span class=normal>438</span>
<span class=normal>439</span>
<span class=normal>440</span>
<span class=normal>441</span>
<span class=normal>442</span>
<span class=normal>443</span>
<span class=normal>444</span>
<span class=normal>445</span>
<span class=normal>446</span>
<span class=normal>447</span>
<span class=normal>448</span>
<span class=normal>449</span>
<span class=normal>450</span>
<span class=normal>451</span>
<span class=normal>452</span>
<span class=normal>453</span>
<span class=normal>454</span>
<span class=normal>455</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>NumberDef</span><span class=p>(</span><span class=n>AbstractAttrDef</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Number definition.</span>

<span class=sd>    Number can have defined minimum/maximum value and decimal points. Value</span>
<span class=sd>    is integer if decimals are 0.</span>

<span class=sd>    Args:</span>
<span class=sd>        minimum(int, float): Minimum possible value.</span>
<span class=sd>        maximum(int, float): Maximum possible value.</span>
<span class=sd>        decimals(int): Maximum decimal points of value.</span>
<span class=sd>        default(int, float): Default value for conversion.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;number&quot;</span>
    <span class=n>type_attributes</span> <span class=o>=</span> <span class=p>[</span>
        <span class=s2>&quot;minimum&quot;</span><span class=p>,</span>
        <span class=s2>&quot;maximum&quot;</span><span class=p>,</span>
        <span class=s2>&quot;decimals&quot;</span>
    <span class=p>]</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
        <span class=n>minimum</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>IntFloatType</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
        <span class=n>maximum</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>IntFloatType</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
        <span class=n>decimals</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
        <span class=n>default</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>IntFloatType</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
        <span class=o>**</span><span class=n>kwargs</span>
    <span class=p>):</span>
        <span class=n>minimum</span> <span class=o>=</span> <span class=mi>0</span> <span class=k>if</span> <span class=n>minimum</span> <span class=ow>is</span> <span class=kc>None</span> <span class=k>else</span> <span class=n>minimum</span>
        <span class=n>maximum</span> <span class=o>=</span> <span class=mi>999999</span> <span class=k>if</span> <span class=n>maximum</span> <span class=ow>is</span> <span class=kc>None</span> <span class=k>else</span> <span class=n>maximum</span>
        <span class=c1># Swap min/max when are passed in opposite order</span>
        <span class=k>if</span> <span class=n>minimum</span> <span class=o>&gt;</span> <span class=n>maximum</span><span class=p>:</span>
            <span class=n>maximum</span><span class=p>,</span> <span class=n>minimum</span> <span class=o>=</span> <span class=n>minimum</span><span class=p>,</span> <span class=n>maximum</span>

        <span class=k>if</span> <span class=n>default</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>default</span> <span class=o>=</span> <span class=mi>0</span>

        <span class=k>elif</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>default</span><span class=p>,</span> <span class=p>(</span><span class=nb>int</span><span class=p>,</span> <span class=nb>float</span><span class=p>)):</span>
            <span class=k>raise</span> <span class=ne>TypeError</span><span class=p>((</span>
                <span class=s2>&quot;&#39;default&#39; argument must be &#39;int&#39; or &#39;float&#39;, not &#39;</span><span class=si>{}</span><span class=s2>&#39;&quot;</span>
            <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=n>default</span><span class=p>)))</span>

        <span class=c1># Fix default value by mim/max values</span>
        <span class=k>if</span> <span class=n>default</span> <span class=o>&lt;</span> <span class=n>minimum</span><span class=p>:</span>
            <span class=n>default</span> <span class=o>=</span> <span class=n>minimum</span>

        <span class=k>elif</span> <span class=n>default</span> <span class=o>&gt;</span> <span class=n>maximum</span><span class=p>:</span>
            <span class=n>default</span> <span class=o>=</span> <span class=n>maximum</span>

        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=n>default</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>minimum</span><span class=p>:</span> <span class=n>IntFloatType</span> <span class=o>=</span> <span class=n>minimum</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>maximum</span><span class=p>:</span> <span class=n>IntFloatType</span> <span class=o>=</span> <span class=n>maximum</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>decimals</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>0</span> <span class=k>if</span> <span class=n>decimals</span> <span class=ow>is</span> <span class=kc>None</span> <span class=k>else</span> <span class=n>decimals</span>

    <span class=k>def</span><span class=w> </span><span class=nf>is_value_valid</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=n>Any</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>decimals</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>int</span><span class=p>):</span>
                <span class=k>return</span> <span class=kc>False</span>
        <span class=k>elif</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>float</span><span class=p>):</span>
            <span class=k>return</span> <span class=kc>False</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>minimum</span> <span class=o>&gt;</span> <span class=n>value</span> <span class=o>&gt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>maximum</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>False</span>
        <span class=k>return</span> <span class=kc>True</span>

    <span class=k>def</span><span class=w> </span><span class=nf>convert_value</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=n>Any</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>IntFloatType</span><span class=p>:</span>
        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
            <span class=k>try</span><span class=p>:</span>
                <span class=n>value</span> <span class=o>=</span> <span class=nb>float</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
            <span class=k>except</span> <span class=ne>Exception</span><span class=p>:</span>
                <span class=k>pass</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=p>(</span><span class=nb>int</span><span class=p>,</span> <span class=nb>float</span><span class=p>)):</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>default</span>

        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>decimals</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
            <span class=k>return</span> <span class=nb>int</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
        <span class=k>return</span> <span class=nb>round</span><span class=p>(</span><span class=nb>float</span><span class=p>(</span><span class=n>value</span><span class=p>),</span> <span class=bp>self</span><span class=o>.</span><span class=n>decimals</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_def_type_compare</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>other</span><span class=p>:</span> <span class=s2>&quot;NumberDef&quot;</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
        <span class=k>return</span> <span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>decimals</span> <span class=o>==</span> <span class=n>other</span><span class=o>.</span><span class=n>decimals</span>
            <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>maximum</span> <span class=o>==</span> <span class=n>other</span><span class=o>.</span><span class=n>maximum</span>
            <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>maximum</span> <span class=o>==</span> <span class=n>other</span><span class=o>.</span><span class=n>maximum</span>
        <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.lib.StringTemplate class="doc doc-heading"> <code>StringTemplate</code> </h2> <div class="doc doc-contents "> <p>String that can be formatted.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/path_templates.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>StringTemplate</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;String that can be formatted.&quot;&quot;&quot;</span>
    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>template</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>template</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
            <span class=k>raise</span> <span class=ne>TypeError</span><span class=p>(</span>
                <span class=sa>f</span><span class=s2>&quot;&lt;</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2>&gt; argument must be a string,&quot;</span>
                <span class=sa>f</span><span class=s2>&quot; not </span><span class=si>{</span><span class=nb>str</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=n>template</span><span class=p>))</span><span class=si>}</span><span class=s2>.&quot;</span>
            <span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_template</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=n>template</span>
        <span class=n>parts</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=n>formatter</span> <span class=o>=</span> <span class=n>Formatter</span><span class=p>()</span>

        <span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=n>formatter</span><span class=o>.</span><span class=n>parse</span><span class=p>(</span><span class=n>template</span><span class=p>):</span>
            <span class=n>literal_text</span><span class=p>,</span> <span class=n>field_name</span><span class=p>,</span> <span class=n>format_spec</span><span class=p>,</span> <span class=n>conversion</span> <span class=o>=</span> <span class=n>item</span>
            <span class=k>if</span> <span class=n>literal_text</span><span class=p>:</span>
                <span class=n>parts</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>literal_text</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>field_name</span><span class=p>:</span>
                <span class=n>parts</span><span class=o>.</span><span class=n>append</span><span class=p>(</span>
                    <span class=n>FormattingPart</span><span class=p>(</span><span class=n>field_name</span><span class=p>,</span> <span class=n>format_spec</span><span class=p>,</span> <span class=n>conversion</span><span class=p>)</span>
                <span class=p>)</span>

        <span class=n>new_parts</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>for</span> <span class=n>part</span> <span class=ow>in</span> <span class=n>parts</span><span class=p>:</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>part</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
                <span class=n>new_parts</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>part</span><span class=p>)</span>
                <span class=k>continue</span>

            <span class=n>substr</span> <span class=o>=</span> <span class=s2>&quot;&quot;</span>
            <span class=k>for</span> <span class=n>char</span> <span class=ow>in</span> <span class=n>part</span><span class=p>:</span>
                <span class=k>if</span> <span class=n>char</span> <span class=ow>not</span> <span class=ow>in</span> <span class=p>(</span><span class=s2>&quot;&lt;&quot;</span><span class=p>,</span> <span class=s2>&quot;&gt;&quot;</span><span class=p>):</span>
                    <span class=n>substr</span> <span class=o>+=</span> <span class=n>char</span>
                <span class=k>else</span><span class=p>:</span>
                    <span class=k>if</span> <span class=n>substr</span><span class=p>:</span>
                        <span class=n>new_parts</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>substr</span><span class=p>)</span>
                    <span class=n>new_parts</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>char</span><span class=p>)</span>
                    <span class=n>substr</span> <span class=o>=</span> <span class=s2>&quot;&quot;</span>
            <span class=k>if</span> <span class=n>substr</span><span class=p>:</span>
                <span class=n>new_parts</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>substr</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_parts</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=n>Union</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>OptionalPart</span><span class=p>,</span> <span class=n>FormattingPart</span><span class=p>]]</span> <span class=o>=</span> <span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>find_optional_parts</span><span class=p>(</span><span class=n>new_parts</span><span class=p>)</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__str__</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>template</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__repr__</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
        <span class=k>return</span> <span class=sa>f</span><span class=s2>&quot;&lt;</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2>&gt; </span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>template</span><span class=si>}</span><span class=s2>&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__contains__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>other</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>other</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>template</span>

    <span class=k>def</span><span class=w> </span><span class=nf>replace</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_template</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>template</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
        <span class=k>return</span> <span class=bp>self</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>template</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_template</span>

    <span class=k>def</span><span class=w> </span><span class=nf>format</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>data</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=s2>&quot;TemplateResult&quot;</span><span class=p>:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot; Figure out with whole formatting.</span>

<span class=sd>        Separate advanced keys (*Like &#39;{project[name]}&#39;) from string which must</span>
<span class=sd>        be formatted separately in case of missing or incomplete keys in data.</span>

<span class=sd>        Args:</span>
<span class=sd>            data (dict): Containing keys to be filled into template.</span>

<span class=sd>        Returns:</span>
<span class=sd>            TemplateResult: Filled or partially filled template containing all</span>
<span class=sd>                data needed or missing for filling template.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>result</span> <span class=o>=</span> <span class=n>TemplatePartResult</span><span class=p>()</span>
        <span class=k>for</span> <span class=n>part</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_parts</span><span class=p>:</span>
            <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>part</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
                <span class=n>result</span><span class=o>.</span><span class=n>add_output</span><span class=p>(</span><span class=n>part</span><span class=p>)</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=n>part</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>result</span><span class=p>)</span>

        <span class=n>invalid_types</span> <span class=o>=</span> <span class=n>result</span><span class=o>.</span><span class=n>invalid_types</span>
        <span class=n>invalid_types</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>result</span><span class=o>.</span><span class=n>invalid_optional_types</span><span class=p>)</span>
        <span class=n>invalid_types</span> <span class=o>=</span> <span class=n>result</span><span class=o>.</span><span class=n>split_keys_to_subdicts</span><span class=p>(</span><span class=n>invalid_types</span><span class=p>)</span>

        <span class=n>missing_keys</span> <span class=o>=</span> <span class=n>result</span><span class=o>.</span><span class=n>missing_keys</span>
        <span class=n>missing_keys</span> <span class=o>|=</span> <span class=n>result</span><span class=o>.</span><span class=n>missing_optional_keys</span>

        <span class=n>solved</span> <span class=o>=</span> <span class=n>result</span><span class=o>.</span><span class=n>solved</span>
        <span class=n>used_values</span> <span class=o>=</span> <span class=n>result</span><span class=o>.</span><span class=n>get_clean_used_values</span><span class=p>()</span>

        <span class=k>return</span> <span class=n>TemplateResult</span><span class=p>(</span>
            <span class=n>result</span><span class=o>.</span><span class=n>output</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>template</span><span class=p>,</span>
            <span class=n>solved</span><span class=p>,</span>
            <span class=n>used_values</span><span class=p>,</span>
            <span class=n>missing_keys</span><span class=p>,</span>
            <span class=n>invalid_types</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>format_strict</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>data</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=s2>&quot;TemplateResult&quot;</span><span class=p>:</span>
        <span class=n>result</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
        <span class=n>result</span><span class=o>.</span><span class=n>validate</span><span class=p>()</span>
        <span class=k>return</span> <span class=n>result</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>format_template</span><span class=p>(</span>
        <span class=bp>cls</span><span class=p>,</span> <span class=n>template</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>data</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span>
    <span class=p>)</span> <span class=o>-&gt;</span> <span class=s2>&quot;TemplateResult&quot;</span><span class=p>:</span>
        <span class=n>objected_template</span> <span class=o>=</span> <span class=bp>cls</span><span class=p>(</span><span class=n>template</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>objected_template</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>format_strict_template</span><span class=p>(</span>
        <span class=bp>cls</span><span class=p>,</span> <span class=n>template</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>data</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span>
    <span class=p>)</span> <span class=o>-&gt;</span> <span class=s2>&quot;TemplateResult&quot;</span><span class=p>:</span>
        <span class=n>objected_template</span> <span class=o>=</span> <span class=bp>cls</span><span class=p>(</span><span class=n>template</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>objected_template</span><span class=o>.</span><span class=n>format_strict</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>

    <span class=nd>@staticmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>find_optional_parts</span><span class=p>(</span>
        <span class=n>parts</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=n>Union</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>FormattingPart</span><span class=p>]]</span>
    <span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>list</span><span class=p>[</span><span class=n>Union</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>OptionalPart</span><span class=p>,</span> <span class=n>FormattingPart</span><span class=p>]]:</span>
        <span class=n>new_parts</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=n>tmp_parts</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=n>counted_symb</span> <span class=o>=</span> <span class=o>-</span><span class=mi>1</span>
        <span class=k>for</span> <span class=n>part</span> <span class=ow>in</span> <span class=n>parts</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>part</span> <span class=o>==</span> <span class=s2>&quot;&lt;&quot;</span><span class=p>:</span>
                <span class=n>counted_symb</span> <span class=o>+=</span> <span class=mi>1</span>
                <span class=n>tmp_parts</span><span class=p>[</span><span class=n>counted_symb</span><span class=p>]</span> <span class=o>=</span> <span class=p>[]</span>

            <span class=k>elif</span> <span class=n>part</span> <span class=o>==</span> <span class=s2>&quot;&gt;&quot;</span><span class=p>:</span>
                <span class=k>if</span> <span class=n>counted_symb</span> <span class=o>&gt;</span> <span class=o>-</span><span class=mi>1</span><span class=p>:</span>
                    <span class=n>parts</span> <span class=o>=</span> <span class=n>tmp_parts</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>counted_symb</span><span class=p>)</span>
                    <span class=n>counted_symb</span> <span class=o>-=</span> <span class=mi>1</span>
                    <span class=c1># If part contains only single string keep value</span>
                    <span class=c1>#   unchanged</span>
                    <span class=k>if</span> <span class=n>parts</span><span class=p>:</span>
                        <span class=c1># Remove optional start char</span>
                        <span class=n>parts</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>

                    <span class=k>if</span> <span class=ow>not</span> <span class=n>parts</span><span class=p>:</span>
                        <span class=n>value</span> <span class=o>=</span> <span class=s2>&quot;&lt;&gt;&quot;</span>
                    <span class=k>elif</span> <span class=p>(</span>
                        <span class=nb>len</span><span class=p>(</span><span class=n>parts</span><span class=p>)</span> <span class=o>==</span> <span class=mi>1</span>
                        <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>parts</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=nb>str</span><span class=p>)</span>
                    <span class=p>):</span>
                        <span class=n>value</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&quot;&lt;</span><span class=si>{</span><span class=n>parts</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=si>}</span><span class=s2>&gt;&quot;</span>
                    <span class=k>else</span><span class=p>:</span>
                        <span class=n>value</span> <span class=o>=</span> <span class=n>OptionalPart</span><span class=p>(</span><span class=n>parts</span><span class=p>)</span>

                    <span class=k>if</span> <span class=n>counted_symb</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=p>:</span>
                        <span class=n>out_parts</span> <span class=o>=</span> <span class=n>new_parts</span>
                    <span class=k>else</span><span class=p>:</span>
                        <span class=n>out_parts</span> <span class=o>=</span> <span class=n>tmp_parts</span><span class=p>[</span><span class=n>counted_symb</span><span class=p>]</span>
                    <span class=c1># Store value</span>
                    <span class=n>out_parts</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
                    <span class=k>continue</span>

            <span class=k>if</span> <span class=n>counted_symb</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=p>:</span>
                <span class=n>new_parts</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>part</span><span class=p>)</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=n>tmp_parts</span><span class=p>[</span><span class=n>counted_symb</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>part</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>tmp_parts</span><span class=p>:</span>
            <span class=k>for</span> <span class=n>idx</span> <span class=ow>in</span> <span class=nb>sorted</span><span class=p>(</span><span class=n>tmp_parts</span><span class=o>.</span><span class=n>keys</span><span class=p>()):</span>
                <span class=n>new_parts</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>tmp_parts</span><span class=p>[</span><span class=n>idx</span><span class=p>])</span>
        <span class=k>return</span> <span class=n>new_parts</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.lib.StringTemplate.format class="doc doc-heading"> <code class="highlight language-python"><span class=nb>format</span><span class=p>(</span><span class=n>data</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Figure out with whole formatting.</p> <p>Separate advanced keys (*Like '{project[name]}') from string which must be formatted separately in case of missing or incomplete keys in data.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>data</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>Containing keys to be filled into template.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>TemplateResult</code></td> <td> <code>&#39;TemplateResult&#39;</code> </td> <td> <div class=doc-md-description> <p>Filled or partially filled template containing all data needed or missing for filling template.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/path_templates.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>format</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>data</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=s2>&quot;TemplateResult&quot;</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot; Figure out with whole formatting.</span>

<span class=sd>    Separate advanced keys (*Like &#39;{project[name]}&#39;) from string which must</span>
<span class=sd>    be formatted separately in case of missing or incomplete keys in data.</span>

<span class=sd>    Args:</span>
<span class=sd>        data (dict): Containing keys to be filled into template.</span>

<span class=sd>    Returns:</span>
<span class=sd>        TemplateResult: Filled or partially filled template containing all</span>
<span class=sd>            data needed or missing for filling template.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>result</span> <span class=o>=</span> <span class=n>TemplatePartResult</span><span class=p>()</span>
    <span class=k>for</span> <span class=n>part</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_parts</span><span class=p>:</span>
        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>part</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
            <span class=n>result</span><span class=o>.</span><span class=n>add_output</span><span class=p>(</span><span class=n>part</span><span class=p>)</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>part</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>result</span><span class=p>)</span>

    <span class=n>invalid_types</span> <span class=o>=</span> <span class=n>result</span><span class=o>.</span><span class=n>invalid_types</span>
    <span class=n>invalid_types</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>result</span><span class=o>.</span><span class=n>invalid_optional_types</span><span class=p>)</span>
    <span class=n>invalid_types</span> <span class=o>=</span> <span class=n>result</span><span class=o>.</span><span class=n>split_keys_to_subdicts</span><span class=p>(</span><span class=n>invalid_types</span><span class=p>)</span>

    <span class=n>missing_keys</span> <span class=o>=</span> <span class=n>result</span><span class=o>.</span><span class=n>missing_keys</span>
    <span class=n>missing_keys</span> <span class=o>|=</span> <span class=n>result</span><span class=o>.</span><span class=n>missing_optional_keys</span>

    <span class=n>solved</span> <span class=o>=</span> <span class=n>result</span><span class=o>.</span><span class=n>solved</span>
    <span class=n>used_values</span> <span class=o>=</span> <span class=n>result</span><span class=o>.</span><span class=n>get_clean_used_values</span><span class=p>()</span>

    <span class=k>return</span> <span class=n>TemplateResult</span><span class=p>(</span>
        <span class=n>result</span><span class=o>.</span><span class=n>output</span><span class=p>,</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>template</span><span class=p>,</span>
        <span class=n>solved</span><span class=p>,</span>
        <span class=n>used_values</span><span class=p>,</span>
        <span class=n>missing_keys</span><span class=p>,</span>
        <span class=n>invalid_types</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.lib.TemplateUnsolved class="doc doc-heading"> <code>TemplateUnsolved</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=Exception>Exception</span></code></p> <p>Exception for unsolved template when strict is set to True.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/path_templates.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>TemplateUnsolved</span><span class=p>(</span><span class=ne>Exception</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Exception for unsolved template when strict is set to True.&quot;&quot;&quot;</span>

    <span class=n>msg</span> <span class=o>=</span> <span class=s2>&quot;Template </span><span class=se>\&quot;</span><span class=si>{0}</span><span class=se>\&quot;</span><span class=s2> is unsolved.</span><span class=si>{1}{2}</span><span class=s2>&quot;</span>
    <span class=n>invalid_types_msg</span> <span class=o>=</span> <span class=s2>&quot; Keys with invalid data type: `</span><span class=si>{0}</span><span class=s2>`.&quot;</span>
    <span class=n>missing_keys_msg</span> <span class=o>=</span> <span class=s2>&quot; Missing keys: </span><span class=se>\&quot;</span><span class=si>{0}</span><span class=se>\&quot;</span><span class=s2>.&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>template</span><span class=p>,</span> <span class=n>missing_keys</span><span class=p>,</span> <span class=n>invalid_types</span><span class=p>):</span>
        <span class=n>invalid_type_items</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>for</span> <span class=n>_key</span><span class=p>,</span> <span class=n>_type</span> <span class=ow>in</span> <span class=n>invalid_types</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=n>invalid_type_items</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;</span><span class=se>\&quot;</span><span class=si>{</span><span class=n>_key</span><span class=si>}</span><span class=se>\&quot;</span><span class=s2> </span><span class=si>{</span><span class=nb>str</span><span class=p>(</span><span class=n>_type</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>

        <span class=n>invalid_types_msg</span> <span class=o>=</span> <span class=s2>&quot;&quot;</span>
        <span class=k>if</span> <span class=n>invalid_type_items</span><span class=p>:</span>
            <span class=n>invalid_types_msg</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>invalid_types_msg</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                <span class=s2>&quot;, &quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>invalid_type_items</span><span class=p>)</span>
            <span class=p>)</span>

        <span class=n>missing_keys_msg</span> <span class=o>=</span> <span class=s2>&quot;&quot;</span>
        <span class=k>if</span> <span class=n>missing_keys</span><span class=p>:</span>
            <span class=n>missing_keys_msg</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>missing_keys_msg</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                <span class=s2>&quot;, &quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>missing_keys</span><span class=p>)</span>
            <span class=p>)</span>
        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>msg</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>template</span><span class=p>,</span> <span class=n>missing_keys_msg</span><span class=p>,</span> <span class=n>invalid_types_msg</span><span class=p>)</span>
        <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.lib.TextDef class="doc doc-heading"> <code>TextDef</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="AbstractAttrDef (client.ayon_core.lib.attribute_definitions.AbstractAttrDef)" href=attribute_definitions.html#client.ayon_core.lib.attribute_definitions.AbstractAttrDef>AbstractAttrDef</a></code></p> <p>Text definition.</p> <p>Text can have multiline option so end-line characters are allowed regex validation can be applied placeholder for UI purposes and default value.</p> <p>Regex validation is not part of attribute implementation.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>multiline</code> </td> <td> <code><span title=bool>bool</span></code> </td> <td> <div class=doc-md-description> <p>Text has single or multiline support.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>regex</code> </td> <td> <code>(<span title=str>str</span>, <span title=re.Pattern>Pattern</span>)</code> </td> <td> <div class=doc-md-description> <p>Regex validation.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>placeholder</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>UI placeholder for attribute.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>default</code> </td> <td> <code>(<span title=str>str</span>, None)</code> </td> <td> <div class=doc-md-description> <p>Default value. Empty string used when not defined.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/attribute_definitions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>458</span>
<span class=normal>459</span>
<span class=normal>460</span>
<span class=normal>461</span>
<span class=normal>462</span>
<span class=normal>463</span>
<span class=normal>464</span>
<span class=normal>465</span>
<span class=normal>466</span>
<span class=normal>467</span>
<span class=normal>468</span>
<span class=normal>469</span>
<span class=normal>470</span>
<span class=normal>471</span>
<span class=normal>472</span>
<span class=normal>473</span>
<span class=normal>474</span>
<span class=normal>475</span>
<span class=normal>476</span>
<span class=normal>477</span>
<span class=normal>478</span>
<span class=normal>479</span>
<span class=normal>480</span>
<span class=normal>481</span>
<span class=normal>482</span>
<span class=normal>483</span>
<span class=normal>484</span>
<span class=normal>485</span>
<span class=normal>486</span>
<span class=normal>487</span>
<span class=normal>488</span>
<span class=normal>489</span>
<span class=normal>490</span>
<span class=normal>491</span>
<span class=normal>492</span>
<span class=normal>493</span>
<span class=normal>494</span>
<span class=normal>495</span>
<span class=normal>496</span>
<span class=normal>497</span>
<span class=normal>498</span>
<span class=normal>499</span>
<span class=normal>500</span>
<span class=normal>501</span>
<span class=normal>502</span>
<span class=normal>503</span>
<span class=normal>504</span>
<span class=normal>505</span>
<span class=normal>506</span>
<span class=normal>507</span>
<span class=normal>508</span>
<span class=normal>509</span>
<span class=normal>510</span>
<span class=normal>511</span>
<span class=normal>512</span>
<span class=normal>513</span>
<span class=normal>514</span>
<span class=normal>515</span>
<span class=normal>516</span>
<span class=normal>517</span>
<span class=normal>518</span>
<span class=normal>519</span>
<span class=normal>520</span>
<span class=normal>521</span>
<span class=normal>522</span>
<span class=normal>523</span>
<span class=normal>524</span>
<span class=normal>525</span>
<span class=normal>526</span>
<span class=normal>527</span>
<span class=normal>528</span>
<span class=normal>529</span>
<span class=normal>530</span>
<span class=normal>531</span>
<span class=normal>532</span>
<span class=normal>533</span>
<span class=normal>534</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>TextDef</span><span class=p>(</span><span class=n>AbstractAttrDef</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Text definition.</span>

<span class=sd>    Text can have multiline option so end-line characters are allowed regex</span>
<span class=sd>    validation can be applied placeholder for UI purposes and default value.</span>

<span class=sd>    Regex validation is not part of attribute implementation.</span>

<span class=sd>    Args:</span>
<span class=sd>        multiline(bool): Text has single or multiline support.</span>
<span class=sd>        regex(str, re.Pattern): Regex validation.</span>
<span class=sd>        placeholder(str): UI placeholder for attribute.</span>
<span class=sd>        default(str, None): Default value. Empty string used when not defined.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;text&quot;</span>
    <span class=n>type_attributes</span> <span class=o>=</span> <span class=p>[</span>
        <span class=s2>&quot;multiline&quot;</span><span class=p>,</span>
        <span class=s2>&quot;placeholder&quot;</span><span class=p>,</span>
    <span class=p>]</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
        <span class=n>multiline</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>bool</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
        <span class=n>regex</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
        <span class=n>placeholder</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
        <span class=n>default</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
        <span class=o>**</span><span class=n>kwargs</span>
    <span class=p>):</span>
        <span class=k>if</span> <span class=n>default</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>default</span> <span class=o>=</span> <span class=s2>&quot;&quot;</span>

        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=n>default</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>multiline</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>multiline</span> <span class=o>=</span> <span class=kc>False</span>

        <span class=k>elif</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>default</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
            <span class=k>raise</span> <span class=ne>TypeError</span><span class=p>((</span>
                <span class=sa>f</span><span class=s2>&quot;&#39;default&#39; argument must be a str, not &#39;</span><span class=si>{</span><span class=nb>type</span><span class=p>(</span><span class=n>default</span><span class=p>)</span><span class=si>}</span><span class=s2>&#39;&quot;</span>
            <span class=p>))</span>

        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>regex</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
            <span class=n>regex</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>compile</span><span class=p>(</span><span class=n>regex</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>multiline</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=n>multiline</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>placeholder</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=n>placeholder</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>regex</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=s2>&quot;Pattern&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>regex</span>

    <span class=k>def</span><span class=w> </span><span class=nf>is_value_valid</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=n>Any</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
            <span class=k>return</span> <span class=kc>False</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>regex</span> <span class=ow>and</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>regex</span><span class=o>.</span><span class=n>match</span><span class=p>(</span><span class=n>value</span><span class=p>):</span>
            <span class=k>return</span> <span class=kc>False</span>
        <span class=k>return</span> <span class=kc>True</span>

    <span class=k>def</span><span class=w> </span><span class=nf>convert_value</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=n>Any</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
            <span class=k>return</span> <span class=n>value</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>default</span>

    <span class=k>def</span><span class=w> </span><span class=nf>serialize</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]:</span>
        <span class=n>data</span> <span class=o>=</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>serialize</span><span class=p>()</span>
        <span class=n>regex</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>regex</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>regex</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>regex</span><span class=o>.</span><span class=n>pattern</span>
        <span class=n>data</span><span class=p>[</span><span class=s2>&quot;regex&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>regex</span>
        <span class=n>data</span><span class=p>[</span><span class=s2>&quot;multiline&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>multiline</span>
        <span class=n>data</span><span class=p>[</span><span class=s2>&quot;placeholder&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>placeholder</span>
        <span class=k>return</span> <span class=n>data</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_def_type_compare</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>other</span><span class=p>:</span> <span class=s2>&quot;TextDef&quot;</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
        <span class=k>return</span> <span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>multiline</span> <span class=o>==</span> <span class=n>other</span><span class=o>.</span><span class=n>multiline</span>
            <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>regex</span> <span class=o>==</span> <span class=n>other</span><span class=o>.</span><span class=n>regex</span>
        <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.lib.ToolNotFoundError class="doc doc-heading"> <code>ToolNotFoundError</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=Exception>Exception</span></code></p> <p>Raised when tool arguments are not found.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/vendor_bin_utils.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 9</span>
<span class=normal>10</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>ToolNotFoundError</span><span class=p>(</span><span class=ne>Exception</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Raised when tool arguments are not found.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.lib.UnknownDef class="doc doc-heading"> <code>UnknownDef</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="AbstractAttrDef (client.ayon_core.lib.attribute_definitions.AbstractAttrDef)" href=attribute_definitions.html#client.ayon_core.lib.attribute_definitions.AbstractAttrDef>AbstractAttrDef</a></code></p> <p>Definition is not known because definition is not available.</p> <p>This attribute can be used to keep existing data unchanged but does not have known definition of type.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/attribute_definitions.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>327</span>
<span class=normal>328</span>
<span class=normal>329</span>
<span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span>
<span class=normal>334</span>
<span class=normal>335</span>
<span class=normal>336</span>
<span class=normal>337</span>
<span class=normal>338</span>
<span class=normal>339</span>
<span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span>
<span class=normal>344</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>UnknownDef</span><span class=p>(</span><span class=n>AbstractAttrDef</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Definition is not known because definition is not available.</span>

<span class=sd>    This attribute can be used to keep existing data unchanged but does not</span>
<span class=sd>    have known definition of type.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=nb>type</span> <span class=o>=</span> <span class=s2>&quot;unknown&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>default</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Any</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
        <span class=n>kwargs</span><span class=p>[</span><span class=s2>&quot;default&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>default</span>
        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>is_value_valid</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=n>Any</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
        <span class=k>return</span> <span class=kc>True</span>

    <span class=k>def</span><span class=w> </span><span class=nf>convert_value</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=n>Any</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Any</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>value</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.classes_from_module class="doc doc-heading"> <code class="highlight language-python"><span class=n>classes_from_module</span><span class=p>(</span><span class=n>superclass</span><span class=p>,</span> <span class=n>module</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Return plug-ins from module</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>superclass</code> </td> <td> <code><span title=superclass>superclass</span></code> </td> <td> <div class=doc-md-description> <p>Superclass of subclasses to look for</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>module</code> </td> <td> <code><span title=types.ModuleType>ModuleType</span></code> </td> <td> <div class=doc-md-description> <p>Imported module where to look for 'superclass' subclasses.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>List of plug-ins, or empty list if none is found.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/python_module_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>classes_from_module</span><span class=p>(</span><span class=n>superclass</span><span class=p>,</span> <span class=n>module</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Return plug-ins from module</span>

<span class=sd>    Arguments:</span>
<span class=sd>        superclass (superclass): Superclass of subclasses to look for</span>
<span class=sd>        module (types.ModuleType): Imported module where to look for</span>
<span class=sd>            &#39;superclass&#39; subclasses.</span>

<span class=sd>    Returns:</span>
<span class=sd>        List of plug-ins, or empty list if none is found.</span>

<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>classes</span> <span class=o>=</span> <span class=nb>list</span><span class=p>()</span>
    <span class=k>for</span> <span class=n>name</span> <span class=ow>in</span> <span class=nb>dir</span><span class=p>(</span><span class=n>module</span><span class=p>):</span>
        <span class=c1># It could be anything at this point</span>
        <span class=n>obj</span> <span class=o>=</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>module</span><span class=p>,</span> <span class=n>name</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>inspect</span><span class=o>.</span><span class=n>isclass</span><span class=p>(</span><span class=n>obj</span><span class=p>)</span> <span class=ow>or</span> <span class=n>obj</span> <span class=ow>is</span> <span class=n>superclass</span><span class=p>:</span>
            <span class=k>continue</span>

        <span class=k>if</span> <span class=nb>issubclass</span><span class=p>(</span><span class=n>obj</span><span class=p>,</span> <span class=n>superclass</span><span class=p>):</span>
            <span class=n>classes</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>obj</span><span class=p>)</span>

    <span class=k>return</span> <span class=n>classes</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.collect_frames class="doc doc-heading"> <code class="highlight language-python"><span class=n>collect_frames</span><span class=p>(</span><span class=n>files</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Returns dict of source path and its frame, if from sequence</p> <p>Uses clique as most precise solution, used when anatomy template that created files is not known.</p> <p>Assumption is that frames are separated by '.', negative frames are not allowed.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>files</code> </td> <td> <code>list) or (set with single value</code> </td> <td> <div class=doc-md-description> <p>list of source paths</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>dict</code></td> <td> </td> <td> <div class=doc-md-description> <p>{'/folder/product_v001.0001.png': '0001', ....}</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/path_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span>
<span class=normal>62</span>
<span class=normal>63</span>
<span class=normal>64</span>
<span class=normal>65</span>
<span class=normal>66</span>
<span class=normal>67</span>
<span class=normal>68</span>
<span class=normal>69</span>
<span class=normal>70</span>
<span class=normal>71</span>
<span class=normal>72</span>
<span class=normal>73</span>
<span class=normal>74</span>
<span class=normal>75</span>
<span class=normal>76</span>
<span class=normal>77</span>
<span class=normal>78</span>
<span class=normal>79</span>
<span class=normal>80</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>collect_frames</span><span class=p>(</span><span class=n>files</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Returns dict of source path and its frame, if from sequence</span>

<span class=sd>    Uses clique as most precise solution, used when anatomy template that</span>
<span class=sd>    created files is not known.</span>

<span class=sd>    Assumption is that frames are separated by &#39;.&#39;, negative frames are not</span>
<span class=sd>    allowed.</span>

<span class=sd>    Args:</span>
<span class=sd>        files(list) or (set with single value): list of source paths</span>

<span class=sd>    Returns:</span>
<span class=sd>        dict: {&#39;/folder/product_v001.0001.png&#39;: &#39;0001&#39;, ....}</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=c1># clique.PATTERNS[&quot;frames&quot;] supports only `.1001.exr` not `_1001.exr` so</span>
    <span class=c1># we use a customized pattern.</span>
    <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&quot;[_.](?P&lt;index&gt;(?P&lt;padding&gt;0*)</span><span class=se>\\</span><span class=s2>d+)</span><span class=se>\\</span><span class=s2>.</span><span class=se>\\</span><span class=s2>D+</span><span class=se>\\</span><span class=s2>d?$&quot;</span>
    <span class=n>patterns</span> <span class=o>=</span> <span class=p>[</span><span class=n>pattern</span><span class=p>]</span>
    <span class=n>collections</span><span class=p>,</span> <span class=n>remainder</span> <span class=o>=</span> <span class=n>clique</span><span class=o>.</span><span class=n>assemble</span><span class=p>(</span>
        <span class=n>files</span><span class=p>,</span> <span class=n>minimum_items</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=n>patterns</span><span class=o>=</span><span class=n>patterns</span><span class=p>)</span>

    <span class=n>sources_and_frames</span> <span class=o>=</span> <span class=p>{}</span>
    <span class=k>if</span> <span class=n>collections</span><span class=p>:</span>
        <span class=k>for</span> <span class=n>collection</span> <span class=ow>in</span> <span class=n>collections</span><span class=p>:</span>
            <span class=n>src_head</span> <span class=o>=</span> <span class=n>collection</span><span class=o>.</span><span class=n>head</span>
            <span class=n>src_tail</span> <span class=o>=</span> <span class=n>collection</span><span class=o>.</span><span class=n>tail</span>

            <span class=k>for</span> <span class=n>index</span> <span class=ow>in</span> <span class=n>collection</span><span class=o>.</span><span class=n>indexes</span><span class=p>:</span>
                <span class=n>src_frame</span> <span class=o>=</span> <span class=n>collection</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=s2>&quot;</span><span class=si>{padding}</span><span class=s2>&quot;</span><span class=p>)</span> <span class=o>%</span> <span class=n>index</span>
                <span class=n>src_file_name</span> <span class=o>=</span> <span class=s2>&quot;</span><span class=si>{}{}{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                    <span class=n>src_head</span><span class=p>,</span> <span class=n>src_frame</span><span class=p>,</span> <span class=n>src_tail</span><span class=p>)</span>
                <span class=n>sources_and_frames</span><span class=p>[</span><span class=n>src_file_name</span><span class=p>]</span> <span class=o>=</span> <span class=n>src_frame</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=n>sources_and_frames</span><span class=p>[</span><span class=n>remainder</span><span class=o>.</span><span class=n>pop</span><span class=p>()]</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=k>return</span> <span class=n>sources_and_frames</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.compile_list_of_regexes class="doc doc-heading"> <code class="highlight language-python"><span class=n>compile_list_of_regexes</span><span class=p>(</span><span class=n>in_list</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Convert strings in entered list to compiled regex objects.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/profiles_filtering.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>compile_list_of_regexes</span><span class=p>(</span><span class=n>in_list</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Convert strings in entered list to compiled regex objects.&quot;&quot;&quot;</span>
    <span class=n>regexes</span> <span class=o>=</span> <span class=nb>list</span><span class=p>()</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>in_list</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>regexes</span>

    <span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=n>in_list</span><span class=p>:</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>item</span><span class=p>:</span>
            <span class=k>continue</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=n>regexes</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>re</span><span class=o>.</span><span class=n>compile</span><span class=p>(</span><span class=n>item</span><span class=p>))</span>
        <span class=k>except</span> <span class=ne>TypeError</span><span class=p>:</span>
            <span class=nb>print</span><span class=p>((</span>
                <span class=s2>&quot;Invalid type </span><span class=se>\&quot;</span><span class=si>{}</span><span class=se>\&quot;</span><span class=s2> value </span><span class=se>\&quot;</span><span class=si>{}</span><span class=se>\&quot;</span><span class=s2>.&quot;</span>
                <span class=s2>&quot; Expected string based object. Skipping.&quot;</span>
            <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=n>item</span><span class=p>)),</span> <span class=nb>str</span><span class=p>(</span><span class=n>item</span><span class=p>)))</span>
    <span class=k>return</span> <span class=n>regexes</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.compute_env_variables_structure class="doc doc-heading"> <code class="highlight language-python"><span class=n>compute_env_variables_structure</span><span class=p>(</span><span class=n>env</span><span class=p>,</span> <span class=n>fill_dynamic_keys</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Compute the result from recursive dynamic environment.</p> <details class=note open> <summary>Keys that are not present in the data will remain unformatted as the</summary> <p>original keys. So they can be formatted against the current user environment when merging. So {"A": "{key}"} will remain {key} if not present in the dynamic environment.</p> </details> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/env_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span>
<span class=normal>277</span>
<span class=normal>278</span>
<span class=normal>279</span>
<span class=normal>280</span>
<span class=normal>281</span>
<span class=normal>282</span>
<span class=normal>283</span>
<span class=normal>284</span>
<span class=normal>285</span>
<span class=normal>286</span>
<span class=normal>287</span>
<span class=normal>288</span>
<span class=normal>289</span>
<span class=normal>290</span>
<span class=normal>291</span>
<span class=normal>292</span>
<span class=normal>293</span>
<span class=normal>294</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>compute_env_variables_structure</span><span class=p>(</span>
    <span class=n>env</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>str</span><span class=p>],</span>
    <span class=n>fill_dynamic_keys</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>True</span><span class=p>,</span>
<span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>str</span><span class=p>]:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Compute the result from recursive dynamic environment.</span>

<span class=sd>    Note: Keys that are not present in the data will remain unformatted as the</span>
<span class=sd>        original keys. So they can be formatted against the current user</span>
<span class=sd>        environment when merging. So {&quot;A&quot;: &quot;{key}&quot;} will remain {key} if not</span>
<span class=sd>        present in the dynamic environment.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>env</span> <span class=o>=</span> <span class=n>env</span><span class=o>.</span><span class=n>copy</span><span class=p>()</span>

    <span class=c1># Collect dependencies</span>
    <span class=n>dependencies</span> <span class=o>=</span> <span class=n>collections</span><span class=o>.</span><span class=n>defaultdict</span><span class=p>(</span><span class=nb>set</span><span class=p>)</span>
    <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>env</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
        <span class=n>dependent_keys</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>findall</span><span class=p>(</span><span class=s2>&quot;{(.+?)}&quot;</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>
        <span class=k>for</span> <span class=n>dependent_key</span> <span class=ow>in</span> <span class=n>dependent_keys</span><span class=p>:</span>
            <span class=c1># Ignore reference to itself or key is not in env</span>
            <span class=k>if</span> <span class=n>dependent_key</span> <span class=o>!=</span> <span class=n>key</span> <span class=ow>and</span> <span class=n>dependent_key</span> <span class=ow>in</span> <span class=n>env</span><span class=p>:</span>
                <span class=n>dependencies</span><span class=p>[</span><span class=n>key</span><span class=p>]</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>dependent_key</span><span class=p>)</span>

    <span class=n>ordered</span><span class=p>,</span> <span class=n>cyclic</span> <span class=o>=</span> <span class=n>_topological_sort</span><span class=p>(</span><span class=n>dependencies</span><span class=p>)</span>

    <span class=c1># Check cycle</span>
    <span class=k>if</span> <span class=n>cyclic</span><span class=p>:</span>
        <span class=k>raise</span> <span class=n>CycleError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;A cycle is detected on: </span><span class=si>{</span><span class=n>cyclic</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>

    <span class=c1># Format dynamic values</span>
    <span class=k>for</span> <span class=n>key</span> <span class=ow>in</span> <span class=nb>reversed</span><span class=p>(</span><span class=n>ordered</span><span class=p>):</span>
        <span class=k>if</span> <span class=n>key</span> <span class=ow>in</span> <span class=n>env</span><span class=p>:</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>env</span><span class=p>[</span><span class=n>key</span><span class=p>],</span> <span class=nb>str</span><span class=p>):</span>
                <span class=k>continue</span>
            <span class=n>data</span> <span class=o>=</span> <span class=n>env</span><span class=o>.</span><span class=n>copy</span><span class=p>()</span>
            <span class=n>data</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>    <span class=c1># format without itself</span>
            <span class=n>env</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>_partial_format</span><span class=p>(</span><span class=n>env</span><span class=p>[</span><span class=n>key</span><span class=p>],</span> <span class=n>data</span><span class=o>=</span><span class=n>data</span><span class=p>)</span>

    <span class=c1># Format dynamic keys</span>
    <span class=k>if</span> <span class=n>fill_dynamic_keys</span><span class=p>:</span>
        <span class=n>formatted</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>env</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
                <span class=n>formatted</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>
                <span class=k>continue</span>

            <span class=n>new_key</span> <span class=o>=</span> <span class=n>_partial_format</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>data</span><span class=o>=</span><span class=n>env</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>new_key</span> <span class=ow>in</span> <span class=n>formatted</span><span class=p>:</span>
                <span class=k>raise</span> <span class=n>DynamicKeyClashError</span><span class=p>(</span>
                    <span class=sa>f</span><span class=s2>&quot;Key clashes on: </span><span class=si>{</span><span class=n>new_key</span><span class=si>}</span><span class=s2> (source: </span><span class=si>{</span><span class=n>key</span><span class=si>}</span><span class=s2>)&quot;</span>
                <span class=p>)</span>

            <span class=n>formatted</span><span class=p>[</span><span class=n>new_key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>
        <span class=n>env</span> <span class=o>=</span> <span class=n>formatted</span>

    <span class=k>return</span> <span class=n>env</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.convert_ffprobe_fps_to_float class="doc doc-heading"> <code class="highlight language-python"><span class=n>convert_ffprobe_fps_to_float</span><span class=p>(</span><span class=n>value</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Convert string value of frame rate to float.</p> <p>Copy of 'convert_ffprobe_fps_value' which raises exceptions on invalid value, does not convert value to string and does not return "Unknown" string.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>value</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Value to be converted.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>Float</code></td> <td> </td> <td> <div class=doc-md-description> <p>Converted frame rate in float. If divisor in value is '0' then '0.0' is returned.</p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=ValueError>ValueError</span></code> </td> <td> <div class=doc-md-description> <p>Passed value is invalid for conversion.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/transcoding.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 978</span>
<span class=normal> 979</span>
<span class=normal> 980</span>
<span class=normal> 981</span>
<span class=normal> 982</span>
<span class=normal> 983</span>
<span class=normal> 984</span>
<span class=normal> 985</span>
<span class=normal> 986</span>
<span class=normal> 987</span>
<span class=normal> 988</span>
<span class=normal> 989</span>
<span class=normal> 990</span>
<span class=normal> 991</span>
<span class=normal> 992</span>
<span class=normal> 993</span>
<span class=normal> 994</span>
<span class=normal> 995</span>
<span class=normal> 996</span>
<span class=normal> 997</span>
<span class=normal> 998</span>
<span class=normal> 999</span>
<span class=normal>1000</span>
<span class=normal>1001</span>
<span class=normal>1002</span>
<span class=normal>1003</span>
<span class=normal>1004</span>
<span class=normal>1005</span>
<span class=normal>1006</span>
<span class=normal>1007</span>
<span class=normal>1008</span>
<span class=normal>1009</span>
<span class=normal>1010</span>
<span class=normal>1011</span>
<span class=normal>1012</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>convert_ffprobe_fps_to_float</span><span class=p>(</span><span class=n>value</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Convert string value of frame rate to float.</span>

<span class=sd>    Copy of &#39;convert_ffprobe_fps_value&#39; which raises exceptions on invalid</span>
<span class=sd>    value, does not convert value to string and does not return &quot;Unknown&quot;</span>
<span class=sd>    string.</span>

<span class=sd>    Args:</span>
<span class=sd>        value (str): Value to be converted.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Float: Converted frame rate in float. If divisor in value is &#39;0&#39; then</span>
<span class=sd>            &#39;0.0&#39; is returned.</span>

<span class=sd>    Raises:</span>
<span class=sd>        ValueError: Passed value is invalid for conversion.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>value</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;Got empty value.&quot;</span><span class=p>)</span>

    <span class=n>items</span> <span class=o>=</span> <span class=n>value</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s2>&quot;/&quot;</span><span class=p>)</span>
    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>items</span><span class=p>)</span> <span class=o>==</span> <span class=mi>1</span><span class=p>:</span>
        <span class=k>return</span> <span class=nb>float</span><span class=p>(</span><span class=n>items</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span>

    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>items</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>2</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>((</span>
            <span class=s2>&quot;FPS expression contains multiple dividers </span><span class=se>\&quot;</span><span class=si>{}</span><span class=se>\&quot;</span><span class=s2>.&quot;</span>
        <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>value</span><span class=p>))</span>

    <span class=n>dividend</span> <span class=o>=</span> <span class=nb>float</span><span class=p>(</span><span class=n>items</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=mi>0</span><span class=p>))</span>
    <span class=n>divisor</span> <span class=o>=</span> <span class=nb>float</span><span class=p>(</span><span class=n>items</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=mi>0</span><span class=p>))</span>
    <span class=k>if</span> <span class=n>divisor</span> <span class=o>==</span> <span class=mf>0.0</span><span class=p>:</span>
        <span class=k>return</span> <span class=mf>0.0</span>
    <span class=k>return</span> <span class=n>dividend</span> <span class=o>/</span> <span class=n>divisor</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.convert_ffprobe_fps_value class="doc doc-heading"> <code class="highlight language-python"><span class=n>convert_ffprobe_fps_value</span><span class=p>(</span><span class=n>str_value</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Returns (str) value of fps from ffprobe frame format (120/1)</p> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/transcoding.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>958</span>
<span class=normal>959</span>
<span class=normal>960</span>
<span class=normal>961</span>
<span class=normal>962</span>
<span class=normal>963</span>
<span class=normal>964</span>
<span class=normal>965</span>
<span class=normal>966</span>
<span class=normal>967</span>
<span class=normal>968</span>
<span class=normal>969</span>
<span class=normal>970</span>
<span class=normal>971</span>
<span class=normal>972</span>
<span class=normal>973</span>
<span class=normal>974</span>
<span class=normal>975</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>convert_ffprobe_fps_value</span><span class=p>(</span><span class=n>str_value</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Returns (str) value of fps from ffprobe frame format (120/1)&quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=n>str_value</span> <span class=o>==</span> <span class=s2>&quot;0/0&quot;</span><span class=p>:</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;WARNING: Source has </span><span class=se>\&quot;</span><span class=s2>r_frame_rate</span><span class=se>\&quot;</span><span class=s2> value set to </span><span class=se>\&quot;</span><span class=s2>0/0</span><span class=se>\&quot;</span><span class=s2>.&quot;</span><span class=p>)</span>
        <span class=k>return</span> <span class=s2>&quot;Unknown&quot;</span>

    <span class=n>items</span> <span class=o>=</span> <span class=n>str_value</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s2>&quot;/&quot;</span><span class=p>)</span>
    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>items</span><span class=p>)</span> <span class=o>==</span> <span class=mi>1</span><span class=p>:</span>
        <span class=n>fps</span> <span class=o>=</span> <span class=nb>float</span><span class=p>(</span><span class=n>items</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span>

    <span class=k>elif</span> <span class=nb>len</span><span class=p>(</span><span class=n>items</span><span class=p>)</span> <span class=o>==</span> <span class=mi>2</span><span class=p>:</span>
        <span class=n>fps</span> <span class=o>=</span> <span class=nb>float</span><span class=p>(</span><span class=n>items</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span> <span class=o>/</span> <span class=nb>float</span><span class=p>(</span><span class=n>items</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span>

    <span class=c1># Check if fps is integer or float number</span>
    <span class=k>if</span> <span class=nb>int</span><span class=p>(</span><span class=n>fps</span><span class=p>)</span> <span class=o>==</span> <span class=n>fps</span><span class=p>:</span>
        <span class=n>fps</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>fps</span><span class=p>)</span>

    <span class=k>return</span> <span class=nb>str</span><span class=p>(</span><span class=n>fps</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.convert_input_paths_for_ffmpeg class="doc doc-heading"> <code class="highlight language-python"><span class=n>convert_input_paths_for_ffmpeg</span><span class=p>(</span><span class=n>input_paths</span><span class=p>,</span> <span class=n>output_dir</span><span class=p>,</span> <span class=n>logger</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Convert source file to format supported in ffmpeg.</p> <p>Can currently convert only EXRs. The input filepaths should be files with same type. Information about input is loaded only from first found file.</p> <p>Filenames of input files are kept so make sure that output directory is not the same directory as input files have. - This way it can handle gaps and can keep input filenames without handling frame template</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>input_paths</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Paths that should be converted. It is expected that contains single file or image sequence of same type.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>output_dir</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Path to directory where output will be rendered. Must not be same as input's directory.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>logger</code> </td> <td> <code><span title=logging.Logger>Logger</span></code> </td> <td> <div class=doc-md-description> <p>Logger used for logging.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=ValueError>ValueError</span></code> </td> <td> <div class=doc-md-description> <p>If input filepath has extension not supported by function. Currently is supported only ".exr" extension.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/transcoding.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>575</span>
<span class=normal>576</span>
<span class=normal>577</span>
<span class=normal>578</span>
<span class=normal>579</span>
<span class=normal>580</span>
<span class=normal>581</span>
<span class=normal>582</span>
<span class=normal>583</span>
<span class=normal>584</span>
<span class=normal>585</span>
<span class=normal>586</span>
<span class=normal>587</span>
<span class=normal>588</span>
<span class=normal>589</span>
<span class=normal>590</span>
<span class=normal>591</span>
<span class=normal>592</span>
<span class=normal>593</span>
<span class=normal>594</span>
<span class=normal>595</span>
<span class=normal>596</span>
<span class=normal>597</span>
<span class=normal>598</span>
<span class=normal>599</span>
<span class=normal>600</span>
<span class=normal>601</span>
<span class=normal>602</span>
<span class=normal>603</span>
<span class=normal>604</span>
<span class=normal>605</span>
<span class=normal>606</span>
<span class=normal>607</span>
<span class=normal>608</span>
<span class=normal>609</span>
<span class=normal>610</span>
<span class=normal>611</span>
<span class=normal>612</span>
<span class=normal>613</span>
<span class=normal>614</span>
<span class=normal>615</span>
<span class=normal>616</span>
<span class=normal>617</span>
<span class=normal>618</span>
<span class=normal>619</span>
<span class=normal>620</span>
<span class=normal>621</span>
<span class=normal>622</span>
<span class=normal>623</span>
<span class=normal>624</span>
<span class=normal>625</span>
<span class=normal>626</span>
<span class=normal>627</span>
<span class=normal>628</span>
<span class=normal>629</span>
<span class=normal>630</span>
<span class=normal>631</span>
<span class=normal>632</span>
<span class=normal>633</span>
<span class=normal>634</span>
<span class=normal>635</span>
<span class=normal>636</span>
<span class=normal>637</span>
<span class=normal>638</span>
<span class=normal>639</span>
<span class=normal>640</span>
<span class=normal>641</span>
<span class=normal>642</span>
<span class=normal>643</span>
<span class=normal>644</span>
<span class=normal>645</span>
<span class=normal>646</span>
<span class=normal>647</span>
<span class=normal>648</span>
<span class=normal>649</span>
<span class=normal>650</span>
<span class=normal>651</span>
<span class=normal>652</span>
<span class=normal>653</span>
<span class=normal>654</span>
<span class=normal>655</span>
<span class=normal>656</span>
<span class=normal>657</span>
<span class=normal>658</span>
<span class=normal>659</span>
<span class=normal>660</span>
<span class=normal>661</span>
<span class=normal>662</span>
<span class=normal>663</span>
<span class=normal>664</span>
<span class=normal>665</span>
<span class=normal>666</span>
<span class=normal>667</span>
<span class=normal>668</span>
<span class=normal>669</span>
<span class=normal>670</span>
<span class=normal>671</span>
<span class=normal>672</span>
<span class=normal>673</span>
<span class=normal>674</span>
<span class=normal>675</span>
<span class=normal>676</span>
<span class=normal>677</span>
<span class=normal>678</span>
<span class=normal>679</span>
<span class=normal>680</span>
<span class=normal>681</span>
<span class=normal>682</span>
<span class=normal>683</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>convert_input_paths_for_ffmpeg</span><span class=p>(</span>
    <span class=n>input_paths</span><span class=p>,</span>
    <span class=n>output_dir</span><span class=p>,</span>
    <span class=n>logger</span><span class=o>=</span><span class=kc>None</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Convert source file to format supported in ffmpeg.</span>

<span class=sd>    Can currently convert only EXRs. The input filepaths should be files</span>
<span class=sd>    with same type. Information about input is loaded only from first found</span>
<span class=sd>    file.</span>

<span class=sd>    Filenames of input files are kept so make sure that output directory</span>
<span class=sd>    is not the same directory as input files have.</span>
<span class=sd>    - This way it can handle gaps and can keep input filenames without handling</span>
<span class=sd>        frame template</span>

<span class=sd>    Args:</span>
<span class=sd>        input_paths (str): Paths that should be converted. It is expected that</span>
<span class=sd>            contains single file or image sequence of same type.</span>
<span class=sd>        output_dir (str): Path to directory where output will be rendered.</span>
<span class=sd>            Must not be same as input&#39;s directory.</span>
<span class=sd>        logger (logging.Logger): Logger used for logging.</span>

<span class=sd>    Raises:</span>
<span class=sd>        ValueError: If input filepath has extension not supported by function.</span>
<span class=sd>            Currently is supported only &quot;.exr&quot; extension.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=n>logger</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>logger</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>getLogger</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>

    <span class=n>first_input_path</span> <span class=o>=</span> <span class=n>input_paths</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
    <span class=n>ext</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>splitext</span><span class=p>(</span><span class=n>first_input_path</span><span class=p>)[</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span>

    <span class=k>if</span> <span class=n>ext</span> <span class=o>!=</span> <span class=s2>&quot;.exr&quot;</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
            <span class=s2>&quot;Function &#39;convert_input_paths_for_ffmpeg&#39; currently supports&quot;</span>
            <span class=sa>f</span><span class=s2>&quot; only </span><span class=se>\&quot;</span><span class=s2>.exr</span><span class=se>\&quot;</span><span class=s2> extension. Got </span><span class=se>\&quot;</span><span class=si>{</span><span class=n>ext</span><span class=si>}</span><span class=se>\&quot;</span><span class=s2>.&quot;</span>
        <span class=p>)</span>

    <span class=n>input_info</span> <span class=o>=</span> <span class=n>get_oiio_info_for_input</span><span class=p>(</span><span class=n>first_input_path</span><span class=p>,</span> <span class=n>logger</span><span class=o>=</span><span class=n>logger</span><span class=p>)</span>

    <span class=c1># Change compression only if source compression is &quot;dwaa&quot; or &quot;dwab&quot;</span>
    <span class=c1>#   - they&#39;re not supported in ffmpeg</span>
    <span class=n>compression</span> <span class=o>=</span> <span class=n>input_info</span><span class=p>[</span><span class=s2>&quot;attribs&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;compression&quot;</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>compression</span> <span class=ow>in</span> <span class=p>(</span><span class=s2>&quot;dwaa&quot;</span><span class=p>,</span> <span class=s2>&quot;dwab&quot;</span><span class=p>):</span>
        <span class=n>compression</span> <span class=o>=</span> <span class=s2>&quot;none&quot;</span>

    <span class=c1># Collect channels to export</span>
    <span class=n>input_arg</span><span class=p>,</span> <span class=n>channels_arg</span> <span class=o>=</span> <span class=n>get_oiio_input_and_channel_args</span><span class=p>(</span><span class=n>input_info</span><span class=p>)</span>

    <span class=k>for</span> <span class=n>input_path</span> <span class=ow>in</span> <span class=n>input_paths</span><span class=p>:</span>
        <span class=c1># Prepare subprocess arguments</span>
        <span class=n>oiio_cmd</span> <span class=o>=</span> <span class=n>get_oiio_tool_args</span><span class=p>(</span>
            <span class=s2>&quot;oiiotool&quot;</span><span class=p>,</span>
            <span class=c1># Don&#39;t add any additional attributes</span>
            <span class=s2>&quot;--nosoftwareattrib&quot;</span><span class=p>,</span>
        <span class=p>)</span>
        <span class=c1># Add input compression if available</span>
        <span class=k>if</span> <span class=n>compression</span><span class=p>:</span>
            <span class=n>oiio_cmd</span><span class=o>.</span><span class=n>extend</span><span class=p>([</span><span class=s2>&quot;--compression&quot;</span><span class=p>,</span> <span class=n>compression</span><span class=p>])</span>

        <span class=n>oiio_cmd</span><span class=o>.</span><span class=n>extend</span><span class=p>([</span>
            <span class=n>input_arg</span><span class=p>,</span> <span class=n>input_path</span><span class=p>,</span>
            <span class=c1># Tell oiiotool which channels should be put to top stack</span>
            <span class=c1>#   (and output)</span>
            <span class=s2>&quot;--ch&quot;</span><span class=p>,</span> <span class=n>channels_arg</span><span class=p>,</span>
            <span class=c1># Use first subimage</span>
            <span class=s2>&quot;--subimage&quot;</span><span class=p>,</span> <span class=s2>&quot;0&quot;</span>
        <span class=p>])</span>

        <span class=k>for</span> <span class=n>attr_name</span><span class=p>,</span> <span class=n>attr_value</span> <span class=ow>in</span> <span class=n>input_info</span><span class=p>[</span><span class=s2>&quot;attribs&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>attr_value</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
                <span class=k>continue</span>

            <span class=c1># Remove attributes that have string value longer than allowed</span>
            <span class=c1>#   length for ffmpeg or when containing prohibited symbols</span>
            <span class=n>erase_reason</span> <span class=o>=</span> <span class=s2>&quot;Missing reason&quot;</span>
            <span class=n>erase_attribute</span> <span class=o>=</span> <span class=kc>False</span>
            <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>attr_value</span><span class=p>)</span> <span class=o>&gt;</span> <span class=n>MAX_FFMPEG_STRING_LEN</span><span class=p>:</span>
                <span class=n>erase_reason</span> <span class=o>=</span> <span class=s2>&quot;has too long value (</span><span class=si>{}</span><span class=s2> chars).&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                    <span class=nb>len</span><span class=p>(</span><span class=n>attr_value</span><span class=p>)</span>
                <span class=p>)</span>
                <span class=n>erase_attribute</span> <span class=o>=</span> <span class=kc>True</span>

            <span class=k>if</span> <span class=ow>not</span> <span class=n>erase_attribute</span><span class=p>:</span>
                <span class=k>for</span> <span class=n>char</span> <span class=ow>in</span> <span class=n>NOT_ALLOWED_FFMPEG_CHARS</span><span class=p>:</span>
                    <span class=k>if</span> <span class=n>char</span> <span class=ow>in</span> <span class=n>attr_value</span><span class=p>:</span>
                        <span class=n>erase_attribute</span> <span class=o>=</span> <span class=kc>True</span>
                        <span class=n>erase_reason</span> <span class=o>=</span> <span class=p>(</span>
                            <span class=s2>&quot;contains unsupported character </span><span class=se>\&quot;</span><span class=si>{}</span><span class=se>\&quot;</span><span class=s2>.&quot;</span>
                        <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>char</span><span class=p>)</span>
                        <span class=k>break</span>

            <span class=k>if</span> <span class=n>erase_attribute</span><span class=p>:</span>
                <span class=c1># Set attribute to empty string</span>
                <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>((</span>
                    <span class=s2>&quot;Removed attribute </span><span class=se>\&quot;</span><span class=si>{}</span><span class=se>\&quot;</span><span class=s2> from metadata because </span><span class=si>{}</span><span class=s2>.&quot;</span>
                <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>attr_name</span><span class=p>,</span> <span class=n>erase_reason</span><span class=p>))</span>
                <span class=n>oiio_cmd</span><span class=o>.</span><span class=n>extend</span><span class=p>([</span><span class=s2>&quot;--eraseattrib&quot;</span><span class=p>,</span> <span class=n>attr_name</span><span class=p>])</span>

        <span class=c1># Add last argument - path to output</span>
        <span class=n>base_filename</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>basename</span><span class=p>(</span><span class=n>input_path</span><span class=p>)</span>
        <span class=n>output_path</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>output_dir</span><span class=p>,</span> <span class=n>base_filename</span><span class=p>)</span>
        <span class=n>oiio_cmd</span><span class=o>.</span><span class=n>extend</span><span class=p>([</span>
            <span class=s2>&quot;-o&quot;</span><span class=p>,</span> <span class=n>output_path</span>
        <span class=p>])</span>

        <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Conversion command: </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=s2>&quot; &quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>oiio_cmd</span><span class=p>)))</span>
        <span class=n>run_subprocess</span><span class=p>(</span><span class=n>oiio_cmd</span><span class=p>,</span> <span class=n>logger</span><span class=o>=</span><span class=n>logger</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.create_hard_link class="doc doc-heading"> <code class="highlight language-python"><span class=n>create_hard_link</span><span class=p>(</span><span class=n>src_path</span><span class=p>,</span> <span class=n>dst_path</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Create hardlink of file.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>src_path</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Full path to a file which is used as source for hardlink.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>dst_path</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Full path to a file where a link of source will be added.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/path_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>create_hard_link</span><span class=p>(</span><span class=n>src_path</span><span class=p>,</span> <span class=n>dst_path</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Create hardlink of file.</span>

<span class=sd>    Args:</span>
<span class=sd>        src_path(str): Full path to a file which is used as source for</span>
<span class=sd>            hardlink.</span>
<span class=sd>        dst_path(str): Full path to a file where a link of source will be</span>
<span class=sd>            added.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>os</span><span class=o>.</span><span class=n>link</span><span class=p>(</span><span class=n>src_path</span><span class=p>,</span> <span class=n>dst_path</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.emit_event class="doc doc-heading"> <code class="highlight language-python"><span class=n>emit_event</span><span class=p>(</span><span class=n>topic</span><span class=p>,</span> <span class=n>data</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>source</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Emit event with topic and data.</p> <details class=arg open> <summary>Arg</summary> <p>topic(str): Event's topic. data(dict): Event's additional data. Optional. source(str): Who emitted the topic. Optional.</p> </details> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>Event</code></td> <td> </td> <td> <div class=doc-md-description> <p>Object of event that was emitted.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/events.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>709</span>
<span class=normal>710</span>
<span class=normal>711</span>
<span class=normal>712</span>
<span class=normal>713</span>
<span class=normal>714</span>
<span class=normal>715</span>
<span class=normal>716</span>
<span class=normal>717</span>
<span class=normal>718</span>
<span class=normal>719</span>
<span class=normal>720</span>
<span class=normal>721</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>emit_event</span><span class=p>(</span><span class=n>topic</span><span class=p>,</span> <span class=n>data</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>source</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Emit event with topic and data.</span>

<span class=sd>    Arg:</span>
<span class=sd>        topic(str): Event&#39;s topic.</span>
<span class=sd>        data(dict): Event&#39;s additional data. Optional.</span>
<span class=sd>        source(str): Who emitted the topic. Optional.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Event: Object of event that was emitted.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=n>GlobalEventSystem</span><span class=o>.</span><span class=n>emit</span><span class=p>(</span><span class=n>topic</span><span class=p>,</span> <span class=n>data</span><span class=p>,</span> <span class=n>source</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.env_value_to_bool class="doc doc-heading"> <code class="highlight language-python"><span class=n>env_value_to_bool</span><span class=p>(</span><span class=n>env_key</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>value</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Convert environment variable value to boolean.</p> <p>Function is based on value of the environemt variable. Value is lowered so function is not case sensitive.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>bool</code></td> <td> <code><span title=bool>bool</span></code> </td> <td> <div class=doc-md-description> <p>If value match to one of ["true", "yes", "1"] result if True but if value match to ["false", "no", "0"] result is False else default value is returned.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/env_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>env_value_to_bool</span><span class=p>(</span>
    <span class=n>env_key</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
    <span class=n>value</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
    <span class=n>default</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>False</span><span class=p>,</span>
<span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Convert environment variable value to boolean.</span>

<span class=sd>    Function is based on value of the environemt variable. Value is lowered</span>
<span class=sd>    so function is not case sensitive.</span>

<span class=sd>    Returns:</span>
<span class=sd>        bool: If value match to one of [&quot;true&quot;, &quot;yes&quot;, &quot;1&quot;] result if True</span>
<span class=sd>            but if value match to [&quot;false&quot;, &quot;no&quot;, &quot;0&quot;] result is False else</span>
<span class=sd>            default value is returned.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=kc>None</span> <span class=ow>and</span> <span class=n>env_key</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>default</span>

    <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>value</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>env_key</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>value</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>value</span><span class=p>)</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span>
        <span class=k>if</span> <span class=n>value</span> <span class=ow>in</span> <span class=p>(</span><span class=s2>&quot;true&quot;</span><span class=p>,</span> <span class=s2>&quot;yes&quot;</span><span class=p>,</span> <span class=s2>&quot;1&quot;</span><span class=p>,</span> <span class=s2>&quot;on&quot;</span><span class=p>):</span>
            <span class=k>return</span> <span class=kc>True</span>
        <span class=k>elif</span> <span class=n>value</span> <span class=ow>in</span> <span class=p>(</span><span class=s2>&quot;false&quot;</span><span class=p>,</span> <span class=s2>&quot;no&quot;</span><span class=p>,</span> <span class=s2>&quot;0&quot;</span><span class=p>,</span> <span class=s2>&quot;off&quot;</span><span class=p>):</span>
            <span class=k>return</span> <span class=kc>False</span>
    <span class=k>return</span> <span class=n>default</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.filter_profiles class="doc doc-heading"> <code class="highlight language-python"><span class=n>filter_profiles</span><span class=p>(</span><span class=n>profiles_data</span><span class=p>,</span> <span class=n>key_values</span><span class=p>,</span> <span class=n>keys_order</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>logger</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Filter profiles by entered key -&gt; values.</p> <p>Profile if marked with score for each key/value from <code>key_values</code> with points -1, 0 or 1. - if profile contain the key and profile's value contain value from <code>key_values</code> then profile gets 1 point - if profile does not contain the key or profile's value is empty or contain "<em>" then got 0 point - if profile contain the key, profile's value is not empty and does not contain "</em>" and value from <code>key_values</code> is not available in the value then got -1 point</p> <p>If profile gets -1 point at any time then is skipped and not used for output. Profile with higher score is returned. If there are multiple profiles with same score then first in order is used (order of profiles matter).</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>profiles_data</code> </td> <td> <code><span title=list>list</span></code> </td> <td> <div class=doc-md-description> <p>Profile definitions as dictionaries.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>key_values</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>Mapping of Key &lt;-&gt; Value. Key is checked if is available in profile and if Value is matching it's values.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>keys_order</code> </td> <td> <code>(<span title=list>list</span>, <span title=tuple>tuple</span>)</code> </td> <td> <div class=doc-md-description> <p>Order of keys from <code>key_values</code> which matters only when multiple profiles have same score.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>logger</code> </td> <td> <code><span title=logging.Logger>Logger</span></code> </td> <td> <div class=doc-md-description> <p>Optionally can be passed different logger.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>dict/None: Return most matching profile or None if none of profiles match at least one criteria.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/profiles_filtering.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>filter_profiles</span><span class=p>(</span><span class=n>profiles_data</span><span class=p>,</span> <span class=n>key_values</span><span class=p>,</span> <span class=n>keys_order</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>logger</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot; Filter profiles by entered key -&gt; values.</span>

<span class=sd>    Profile if marked with score for each key/value from `key_values` with</span>
<span class=sd>    points -1, 0 or 1.</span>
<span class=sd>    - if profile contain the key and profile&#39;s value contain value from</span>
<span class=sd>        `key_values` then profile gets 1 point</span>
<span class=sd>    - if profile does not contain the key or profile&#39;s value is empty or</span>
<span class=sd>        contain &quot;*&quot; then got 0 point</span>
<span class=sd>    - if profile contain the key, profile&#39;s value is not empty and does not</span>
<span class=sd>        contain &quot;*&quot; and value from `key_values` is not available in the value</span>
<span class=sd>        then got -1 point</span>

<span class=sd>    If profile gets -1 point at any time then is skipped and not used for</span>
<span class=sd>    output. Profile with higher score is returned. If there are multiple</span>
<span class=sd>    profiles with same score then first in order is used (order of profiles</span>
<span class=sd>    matter).</span>

<span class=sd>    Args:</span>
<span class=sd>        profiles_data (list): Profile definitions as dictionaries.</span>
<span class=sd>        key_values (dict): Mapping of Key &lt;-&gt; Value. Key is checked if is</span>
<span class=sd>            available in profile and if Value is matching it&#39;s values.</span>
<span class=sd>        keys_order (list, tuple): Order of keys from `key_values` which matters</span>
<span class=sd>            only when multiple profiles have same score.</span>
<span class=sd>        logger (logging.Logger): Optionally can be passed different logger.</span>

<span class=sd>    Returns:</span>
<span class=sd>        dict/None: Return most matching profile or None if none of profiles</span>
<span class=sd>            match at least one criteria.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>profiles_data</span><span class=p>:</span>
        <span class=k>return</span> <span class=kc>None</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>logger</span><span class=p>:</span>
        <span class=n>logger</span> <span class=o>=</span> <span class=n>log</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>keys_order</span><span class=p>:</span>
        <span class=n>keys_order</span> <span class=o>=</span> <span class=nb>tuple</span><span class=p>(</span><span class=n>key_values</span><span class=o>.</span><span class=n>keys</span><span class=p>())</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=n>_keys_order</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>keys_order</span><span class=p>)</span>
        <span class=c1># Make all keys from `key_values` are passed</span>
        <span class=k>for</span> <span class=n>key</span> <span class=ow>in</span> <span class=n>key_values</span><span class=o>.</span><span class=n>keys</span><span class=p>():</span>
            <span class=k>if</span> <span class=n>key</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>_keys_order</span><span class=p>:</span>
                <span class=n>_keys_order</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
        <span class=n>keys_order</span> <span class=o>=</span> <span class=nb>tuple</span><span class=p>(</span><span class=n>_keys_order</span><span class=p>)</span>

    <span class=n>log_parts</span> <span class=o>=</span> <span class=s2>&quot; | &quot;</span><span class=o>.</span><span class=n>join</span><span class=p>([</span>
        <span class=s2>&quot;</span><span class=si>{}</span><span class=s2>: </span><span class=se>\&quot;</span><span class=si>{}</span><span class=se>\&quot;</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=o>*</span><span class=n>item</span><span class=p>)</span>
        <span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=n>key_values</span><span class=o>.</span><span class=n>items</span><span class=p>()</span>
    <span class=p>])</span>

    <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
        <span class=s2>&quot;Looking for matching profile for: </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>log_parts</span><span class=p>)</span>
    <span class=p>)</span>

    <span class=n>matching_profiles</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=n>highest_profile_points</span> <span class=o>=</span> <span class=o>-</span><span class=mi>1</span>
    <span class=c1># Each profile get 1 point for each matching filter. Profile with most</span>
    <span class=c1># points is returned. For cases when more than one profile will match</span>
    <span class=c1># are also stored ordered lists of matching values.</span>
    <span class=k>for</span> <span class=n>profile</span> <span class=ow>in</span> <span class=n>profiles_data</span><span class=p>:</span>
        <span class=n>profile_points</span> <span class=o>=</span> <span class=mi>0</span>
        <span class=n>profile_scores</span> <span class=o>=</span> <span class=p>[]</span>

        <span class=k>for</span> <span class=n>key</span> <span class=ow>in</span> <span class=n>keys_order</span><span class=p>:</span>
            <span class=n>value</span> <span class=o>=</span> <span class=n>key_values</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
            <span class=n>match</span> <span class=o>=</span> <span class=n>validate_value_by_regexes</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=n>profile</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>))</span>
            <span class=k>if</span> <span class=n>match</span> <span class=o>==</span> <span class=o>-</span><span class=mi>1</span><span class=p>:</span>
                <span class=n>profile_value</span> <span class=o>=</span> <span class=n>profile</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>)</span> <span class=ow>or</span> <span class=p>[]</span>
                <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
                    <span class=s2>&quot;</span><span class=se>\&quot;</span><span class=si>{}</span><span class=se>\&quot;</span><span class=s2> not found in </span><span class=se>\&quot;</span><span class=si>{}</span><span class=se>\&quot;</span><span class=s2>: </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span>
                                                            <span class=n>profile_value</span><span class=p>)</span>
                <span class=p>)</span>
                <span class=n>profile_points</span> <span class=o>=</span> <span class=o>-</span><span class=mi>1</span>
                <span class=k>break</span>

            <span class=n>profile_points</span> <span class=o>+=</span> <span class=n>match</span>
            <span class=n>profile_scores</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=nb>bool</span><span class=p>(</span><span class=n>match</span><span class=p>))</span>

        <span class=k>if</span> <span class=p>(</span>
            <span class=n>profile_points</span> <span class=o>&lt;</span> <span class=mi>0</span>
            <span class=ow>or</span> <span class=n>profile_points</span> <span class=o>&lt;</span> <span class=n>highest_profile_points</span>
        <span class=p>):</span>
            <span class=k>continue</span>

        <span class=k>if</span> <span class=n>profile_points</span> <span class=o>&gt;</span> <span class=n>highest_profile_points</span><span class=p>:</span>
            <span class=n>matching_profiles</span> <span class=o>=</span> <span class=p>[]</span>
            <span class=n>highest_profile_points</span> <span class=o>=</span> <span class=n>profile_points</span>

        <span class=k>if</span> <span class=n>profile_points</span> <span class=o>==</span> <span class=n>highest_profile_points</span><span class=p>:</span>
            <span class=n>matching_profiles</span><span class=o>.</span><span class=n>append</span><span class=p>((</span><span class=n>profile</span><span class=p>,</span> <span class=n>profile_scores</span><span class=p>))</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>matching_profiles</span><span class=p>:</span>
        <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
            <span class=s2>&quot;None of profiles match your setup. </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>log_parts</span><span class=p>)</span>
        <span class=p>)</span>
        <span class=k>return</span> <span class=kc>None</span>

    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>matching_profiles</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>1</span><span class=p>:</span>
        <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
            <span class=s2>&quot;More than one profile match your setup. </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>log_parts</span><span class=p>)</span>
        <span class=p>)</span>

    <span class=n>profile</span> <span class=o>=</span> <span class=n>_profile_exclusion</span><span class=p>(</span><span class=n>matching_profiles</span><span class=p>,</span> <span class=n>logger</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>profile</span><span class=p>:</span>
        <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
            <span class=s2>&quot;Profile selected: </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>profile</span><span class=p>)</span>
        <span class=p>)</span>
    <span class=k>return</span> <span class=n>profile</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.find_executable class="doc doc-heading"> <code class="highlight language-python"><span class=n>find_executable</span><span class=p>(</span><span class=n>executable</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Find full path to executable.</p> <p>Also tries additional extensions if passed executable does not contain one.</p> <p>Paths where it is looked for executable is defined by 'PATH' environment variable, 'os.confstr("CS_PATH")' or 'os.defpath'.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>executable</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Name of executable with or without extension. Can be path to file.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Union[str, None]: Full path to executable with extension which was found otherwise None.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/vendor_bin_utils.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 54</span>
<span class=normal> 55</span>
<span class=normal> 56</span>
<span class=normal> 57</span>
<span class=normal> 58</span>
<span class=normal> 59</span>
<span class=normal> 60</span>
<span class=normal> 61</span>
<span class=normal> 62</span>
<span class=normal> 63</span>
<span class=normal> 64</span>
<span class=normal> 65</span>
<span class=normal> 66</span>
<span class=normal> 67</span>
<span class=normal> 68</span>
<span class=normal> 69</span>
<span class=normal> 70</span>
<span class=normal> 71</span>
<span class=normal> 72</span>
<span class=normal> 73</span>
<span class=normal> 74</span>
<span class=normal> 75</span>
<span class=normal> 76</span>
<span class=normal> 77</span>
<span class=normal> 78</span>
<span class=normal> 79</span>
<span class=normal> 80</span>
<span class=normal> 81</span>
<span class=normal> 82</span>
<span class=normal> 83</span>
<span class=normal> 84</span>
<span class=normal> 85</span>
<span class=normal> 86</span>
<span class=normal> 87</span>
<span class=normal> 88</span>
<span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>find_executable</span><span class=p>(</span><span class=n>executable</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Find full path to executable.</span>

<span class=sd>    Also tries additional extensions if passed executable does not contain one.</span>

<span class=sd>    Paths where it is looked for executable is defined by &#39;PATH&#39; environment</span>
<span class=sd>    variable, &#39;os.confstr(&quot;CS_PATH&quot;)&#39; or &#39;os.defpath&#39;.</span>

<span class=sd>    Args:</span>
<span class=sd>        executable(str): Name of executable with or without extension. Can be</span>
<span class=sd>            path to file.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Union[str, None]: Full path to executable with extension which was</span>
<span class=sd>            found otherwise None.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=c1># Skip if passed path is file</span>
    <span class=k>if</span> <span class=n>is_file_executable</span><span class=p>(</span><span class=n>executable</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>executable</span>

    <span class=n>low_platform</span> <span class=o>=</span> <span class=n>platform</span><span class=o>.</span><span class=n>system</span><span class=p>()</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span>
    <span class=n>_</span><span class=p>,</span> <span class=n>ext</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>splitext</span><span class=p>(</span><span class=n>executable</span><span class=p>)</span>

    <span class=c1># Prepare extensions to check</span>
    <span class=n>exts</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
    <span class=k>if</span> <span class=n>ext</span><span class=p>:</span>
        <span class=n>exts</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>ext</span><span class=o>.</span><span class=n>lower</span><span class=p>())</span>

    <span class=k>else</span><span class=p>:</span>
        <span class=c1># Add other possible extension variants only if passed executable</span>
        <span class=c1>#   does not have any</span>
        <span class=k>if</span> <span class=n>low_platform</span> <span class=o>==</span> <span class=s2>&quot;windows&quot;</span><span class=p>:</span>
            <span class=n>exts</span> <span class=o>|=</span> <span class=p>{</span><span class=s2>&quot;.exe&quot;</span><span class=p>,</span> <span class=s2>&quot;.ps1&quot;</span><span class=p>,</span> <span class=s2>&quot;.bat&quot;</span><span class=p>}</span>
            <span class=k>for</span> <span class=n>ext</span> <span class=ow>in</span> <span class=n>os</span><span class=o>.</span><span class=n>getenv</span><span class=p>(</span><span class=s2>&quot;PATHEXT&quot;</span><span class=p>,</span> <span class=s2>&quot;&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>pathsep</span><span class=p>):</span>
                <span class=n>exts</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>ext</span><span class=o>.</span><span class=n>lower</span><span class=p>())</span>

        <span class=k>else</span><span class=p>:</span>
            <span class=n>exts</span> <span class=o>|=</span> <span class=p>{</span><span class=s2>&quot;.sh&quot;</span><span class=p>}</span>

    <span class=c1># Executable is a path but there may be missing extension</span>
    <span class=c1>#   - this can happen primarily on windows where</span>
    <span class=c1>#       e.g. &quot;ffmpeg&quot; should be &quot;ffmpeg.exe&quot;</span>
    <span class=n>exe_dir</span><span class=p>,</span> <span class=n>exe_filename</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=n>executable</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>exe_dir</span> <span class=ow>and</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>isdir</span><span class=p>(</span><span class=n>exe_dir</span><span class=p>):</span>
        <span class=k>for</span> <span class=n>filename</span> <span class=ow>in</span> <span class=n>os</span><span class=o>.</span><span class=n>listdir</span><span class=p>(</span><span class=n>exe_dir</span><span class=p>):</span>
            <span class=n>filepath</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>exe_dir</span><span class=p>,</span> <span class=n>filename</span><span class=p>)</span>
            <span class=n>basename</span><span class=p>,</span> <span class=n>ext</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>splitext</span><span class=p>(</span><span class=n>filename</span><span class=p>)</span>
            <span class=k>if</span> <span class=p>(</span>
                <span class=n>basename</span> <span class=o>==</span> <span class=n>exe_filename</span>
                <span class=ow>and</span> <span class=n>ext</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span> <span class=ow>in</span> <span class=n>exts</span>
                <span class=ow>and</span> <span class=n>is_file_executable</span><span class=p>(</span><span class=n>filepath</span><span class=p>)</span>
            <span class=p>):</span>
                <span class=k>return</span> <span class=n>filepath</span>

    <span class=c1># Get paths where to look for executable</span>
    <span class=n>path_str</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;PATH&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>path_str</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>os</span><span class=p>,</span> <span class=s2>&quot;confstr&quot;</span><span class=p>):</span>
            <span class=n>path_str</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>confstr</span><span class=p>(</span><span class=s2>&quot;CS_PATH&quot;</span><span class=p>)</span>
        <span class=k>elif</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>os</span><span class=p>,</span> <span class=s2>&quot;defpath&quot;</span><span class=p>):</span>
            <span class=n>path_str</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>defpath</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>path_str</span><span class=p>:</span>
        <span class=k>return</span> <span class=kc>None</span>

    <span class=n>paths</span> <span class=o>=</span> <span class=n>path_str</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>pathsep</span><span class=p>)</span>
    <span class=k>for</span> <span class=n>path</span> <span class=ow>in</span> <span class=n>paths</span><span class=p>:</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>isdir</span><span class=p>(</span><span class=n>path</span><span class=p>):</span>
            <span class=k>continue</span>
        <span class=k>for</span> <span class=n>filename</span> <span class=ow>in</span> <span class=n>os</span><span class=o>.</span><span class=n>listdir</span><span class=p>(</span><span class=n>path</span><span class=p>):</span>
            <span class=n>filepath</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>abspath</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>path</span><span class=p>,</span> <span class=n>filename</span><span class=p>))</span>
            <span class=c1># Filename matches executable exactly</span>
            <span class=k>if</span> <span class=n>filename</span> <span class=o>==</span> <span class=n>executable</span> <span class=ow>and</span> <span class=n>is_file_executable</span><span class=p>(</span><span class=n>filepath</span><span class=p>):</span>
                <span class=k>return</span> <span class=n>filepath</span>

            <span class=n>basename</span><span class=p>,</span> <span class=n>ext</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>splitext</span><span class=p>(</span><span class=n>filename</span><span class=p>)</span>
            <span class=k>if</span> <span class=p>(</span>
                <span class=n>basename</span> <span class=o>==</span> <span class=n>executable</span>
                <span class=ow>and</span> <span class=n>ext</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span> <span class=ow>in</span> <span class=n>exts</span>
                <span class=ow>and</span> <span class=n>is_file_executable</span><span class=p>(</span><span class=n>filepath</span><span class=p>)</span>
            <span class=p>):</span>
                <span class=k>return</span> <span class=n>filepath</span>

    <span class=k>return</span> <span class=kc>None</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.format_file_size class="doc doc-heading"> <code class="highlight language-python"><span class=n>format_file_size</span><span class=p>(</span><span class=n>file_size</span><span class=p>,</span> <span class=n>suffix</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Returns formatted string with size in appropriate unit.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>file_size</code> </td> <td> <code><span title=int>int</span></code> </td> <td> <div class=doc-md-description> <p>Size of file in bytes.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>suffix</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Suffix for formatted size. Default is 'B' (as bytes).</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>Formatted size using proper unit and passed suffix (e.g. 7 MiB).</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/path_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>format_file_size</span><span class=p>(</span><span class=n>file_size</span><span class=p>,</span> <span class=n>suffix</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Returns formatted string with size in appropriate unit.</span>

<span class=sd>    Args:</span>
<span class=sd>        file_size (int): Size of file in bytes.</span>
<span class=sd>        suffix (str): Suffix for formatted size. Default is &#39;B&#39; (as bytes).</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: Formatted size using proper unit and passed suffix (e.g. 7 MiB).</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>if</span> <span class=n>suffix</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>suffix</span> <span class=o>=</span> <span class=s2>&quot;B&quot;</span>

    <span class=k>for</span> <span class=n>unit</span> <span class=ow>in</span> <span class=p>[</span><span class=s2>&quot;&quot;</span><span class=p>,</span> <span class=s2>&quot;Ki&quot;</span><span class=p>,</span> <span class=s2>&quot;Mi&quot;</span><span class=p>,</span> <span class=s2>&quot;Gi&quot;</span><span class=p>,</span> <span class=s2>&quot;Ti&quot;</span><span class=p>,</span> <span class=s2>&quot;Pi&quot;</span><span class=p>,</span> <span class=s2>&quot;Ei&quot;</span><span class=p>,</span> <span class=s2>&quot;Zi&quot;</span><span class=p>]:</span>
        <span class=k>if</span> <span class=nb>abs</span><span class=p>(</span><span class=n>file_size</span><span class=p>)</span> <span class=o>&lt;</span> <span class=mf>1024.0</span><span class=p>:</span>
            <span class=k>return</span> <span class=s2>&quot;</span><span class=si>%3.1f%s%s</span><span class=s2>&quot;</span> <span class=o>%</span> <span class=p>(</span><span class=n>file_size</span><span class=p>,</span> <span class=n>unit</span><span class=p>,</span> <span class=n>suffix</span><span class=p>)</span>
        <span class=n>file_size</span> <span class=o>/=</span> <span class=mf>1024.0</span>
    <span class=k>return</span> <span class=s2>&quot;</span><span class=si>%.1f%s%s</span><span class=s2>&quot;</span> <span class=o>%</span> <span class=p>(</span><span class=n>file_size</span><span class=p>,</span> <span class=s2>&quot;Yi&quot;</span><span class=p>,</span> <span class=n>suffix</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.get_addons_resources_dir class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_addons_resources_dir</span><span class=p>(</span><span class=n>addon_name</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Get a directory for storing resources for addons.</p> <p>Some addons might need to store ad-hoc resources that are not part of addon client package (e.g. because of size). Studio might define dedicated directory to store them with 'AYON_ADDONS_RESOURCES_DIR' environment variable. By default, is used 'addons_resources' in launcher storage (might be shared across platforms).</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>addon_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Addon name.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>*args</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Subfolders in the resources directory.</p> </div> </td> <td> <code>()</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Path to resources directory.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/local_settings.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_addons_resources_dir</span><span class=p>(</span><span class=n>addon_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get a directory for storing resources for addons.</span>

<span class=sd>    Some addons might need to store ad-hoc resources that are not part of</span>
<span class=sd>        addon client package (e.g. because of size). Studio might define</span>
<span class=sd>        dedicated directory to store them with &#39;AYON_ADDONS_RESOURCES_DIR&#39;</span>
<span class=sd>        environment variable. By default, is used &#39;addons_resources&#39; in</span>
<span class=sd>        launcher storage (might be shared across platforms).</span>

<span class=sd>    Args:</span>
<span class=sd>        addon_name (str): Addon name.</span>
<span class=sd>        *args (str): Subfolders in the resources directory.</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: Path to resources directory.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>addons_resources_dir</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>getenv</span><span class=p>(</span><span class=s2>&quot;AYON_ADDONS_RESOURCES_DIR&quot;</span><span class=p>)</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>addons_resources_dir</span><span class=p>:</span>
        <span class=n>addons_resources_dir</span> <span class=o>=</span> <span class=n>get_launcher_storage_dir</span><span class=p>(</span><span class=s2>&quot;addons_resources&quot;</span><span class=p>)</span>

    <span class=k>return</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>addons_resources_dir</span><span class=p>,</span> <span class=n>addon_name</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.get_ayon_launcher_args class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_ayon_launcher_args</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Arguments to run AYON launcher process.</p> <p>Arguments for subprocess when need to spawn new AYON launcher process.</p> <details class=reasons open> <summary>Reasons</summary> <p>AYON launcher started from code has different executable set to virtual env python and must have path to script as first argument which is not needed for built application.</p> </details> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>*args</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Any arguments that will be added after executables.</p> </div> </td> <td> <code>()</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>list[str]: List of arguments to run AYON launcher process.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/execute.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>372</span>
<span class=normal>373</span>
<span class=normal>374</span>
<span class=normal>375</span>
<span class=normal>376</span>
<span class=normal>377</span>
<span class=normal>378</span>
<span class=normal>379</span>
<span class=normal>380</span>
<span class=normal>381</span>
<span class=normal>382</span>
<span class=normal>383</span>
<span class=normal>384</span>
<span class=normal>385</span>
<span class=normal>386</span>
<span class=normal>387</span>
<span class=normal>388</span>
<span class=normal>389</span>
<span class=normal>390</span>
<span class=normal>391</span>
<span class=normal>392</span>
<span class=normal>393</span>
<span class=normal>394</span>
<span class=normal>395</span>
<span class=normal>396</span>
<span class=normal>397</span>
<span class=normal>398</span>
<span class=normal>399</span>
<span class=normal>400</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_ayon_launcher_args</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Arguments to run AYON launcher process.</span>

<span class=sd>    Arguments for subprocess when need to spawn new AYON launcher process.</span>

<span class=sd>    Reasons:</span>
<span class=sd>        AYON launcher started from code has different executable set to</span>
<span class=sd>            virtual env python and must have path to script as first argument</span>
<span class=sd>            which is not needed for built application.</span>

<span class=sd>    Args:</span>
<span class=sd>        *args (str): Any arguments that will be added after executables.</span>

<span class=sd>    Returns:</span>
<span class=sd>        list[str]: List of arguments to run AYON launcher process.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>executable</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=p>[</span><span class=s2>&quot;AYON_EXECUTABLE&quot;</span><span class=p>]</span>
    <span class=n>launch_args</span> <span class=o>=</span> <span class=p>[</span><span class=n>executable</span><span class=p>]</span>

    <span class=n>executable_filename</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>basename</span><span class=p>(</span><span class=n>executable</span><span class=p>)</span>
    <span class=k>if</span> <span class=s2>&quot;python&quot;</span> <span class=ow>in</span> <span class=n>executable_filename</span><span class=o>.</span><span class=n>lower</span><span class=p>():</span>
        <span class=n>filepath</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=p>[</span><span class=s2>&quot;AYON_ROOT&quot;</span><span class=p>],</span> <span class=s2>&quot;start.py&quot;</span><span class=p>)</span>
        <span class=n>launch_args</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>filepath</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>args</span><span class=p>:</span>
        <span class=n>launch_args</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>args</span><span class=p>)</span>

    <span class=k>return</span> <span class=n>launch_args</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.get_ayon_user_entity class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_ayon_user_entity</span><span class=p>(</span><span class=n>username</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>AYON user entity used for templates and publishing.</p> <details class=note open> <summary>Note</summary> <p>Usually only service and admin users can receive the full user entity.</p> </details> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>username</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Username of the user. If not passed, then the current user in 'ayon_api' is used.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=dict>dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>dict[str, Any]: User entity.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/local_settings.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>586</span>
<span class=normal>587</span>
<span class=normal>588</span>
<span class=normal>589</span>
<span class=normal>590</span>
<span class=normal>591</span>
<span class=normal>592</span>
<span class=normal>593</span>
<span class=normal>594</span>
<span class=normal>595</span>
<span class=normal>596</span>
<span class=normal>597</span>
<span class=normal>598</span>
<span class=normal>599</span>
<span class=normal>600</span>
<span class=normal>601</span>
<span class=normal>602</span>
<span class=normal>603</span>
<span class=normal>604</span>
<span class=normal>605</span>
<span class=normal>606</span>
<span class=normal>607</span>
<span class=normal>608</span>
<span class=normal>609</span>
<span class=normal>610</span>
<span class=normal>611</span>
<span class=normal>612</span>
<span class=normal>613</span>
<span class=normal>614</span>
<span class=normal>615</span>
<span class=normal>616</span>
<span class=normal>617</span>
<span class=normal>618</span>
<span class=normal>619</span>
<span class=normal>620</span>
<span class=normal>621</span>
<span class=normal>622</span>
<span class=normal>623</span>
<span class=normal>624</span>
<span class=normal>625</span>
<span class=normal>626</span>
<span class=normal>627</span>
<span class=normal>628</span>
<span class=normal>629</span>
<span class=normal>630</span>
<span class=normal>631</span>
<span class=normal>632</span>
<span class=normal>633</span>
<span class=normal>634</span>
<span class=normal>635</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_ayon_user_entity</span><span class=p>(</span><span class=n>username</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;AYON user entity used for templates and publishing.</span>

<span class=sd>    Note:</span>
<span class=sd>        Usually only service and admin users can receive the full user entity.</span>

<span class=sd>    Args:</span>
<span class=sd>        username (Optional[str]): Username of the user. If not passed, then</span>
<span class=sd>            the current user in &#39;ayon_api&#39; is used.</span>

<span class=sd>    Returns:</span>
<span class=sd>        dict[str, Any]: User entity.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>service_username</span> <span class=o>=</span> <span class=n>_get_ayon_service_username</span><span class=p>()</span>
    <span class=c1># Handle service user handling first</span>
    <span class=k>if</span> <span class=n>service_username</span><span class=p>:</span>
        <span class=k>if</span> <span class=n>username</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>username</span> <span class=o>=</span> <span class=n>service_username</span>
        <span class=n>cache</span><span class=p>:</span> <span class=n>CacheItem</span> <span class=o>=</span> <span class=n>_Cache</span><span class=o>.</span><span class=n>user_entities_by_name</span><span class=p>[</span><span class=n>username</span><span class=p>]</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>cache</span><span class=o>.</span><span class=n>is_valid</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>username</span> <span class=o>==</span> <span class=n>service_username</span><span class=p>:</span>
                <span class=n>user</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_user</span><span class=p>()</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=n>user</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_user</span><span class=p>(</span><span class=n>username</span><span class=p>)</span>
            <span class=n>cache</span><span class=o>.</span><span class=n>update_data</span><span class=p>(</span><span class=n>user</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=n>cache</span><span class=o>.</span><span class=n>get_data</span><span class=p>())</span>

    <span class=c1># Cache current user</span>
    <span class=n>current_user</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=k>if</span> <span class=n>_Cache</span><span class=o>.</span><span class=n>username</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>current_user</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_user</span><span class=p>()</span>
        <span class=n>_Cache</span><span class=o>.</span><span class=n>username</span> <span class=o>=</span> <span class=n>current_user</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span>

    <span class=k>if</span> <span class=n>username</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>username</span> <span class=o>=</span> <span class=n>_Cache</span><span class=o>.</span><span class=n>username</span>

    <span class=n>cache</span><span class=p>:</span> <span class=n>CacheItem</span> <span class=o>=</span> <span class=n>_Cache</span><span class=o>.</span><span class=n>user_entities_by_name</span><span class=p>[</span><span class=n>username</span><span class=p>]</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>cache</span><span class=o>.</span><span class=n>is_valid</span><span class=p>:</span>
        <span class=n>user</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=k>if</span> <span class=n>username</span> <span class=o>==</span> <span class=n>_Cache</span><span class=o>.</span><span class=n>username</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>current_user</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
                <span class=n>current_user</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_user</span><span class=p>()</span>
            <span class=n>user</span> <span class=o>=</span> <span class=n>current_user</span>

        <span class=k>if</span> <span class=n>user</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>user</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_user</span><span class=p>(</span><span class=n>username</span><span class=p>)</span>
        <span class=n>cache</span><span class=o>.</span><span class=n>update_data</span><span class=p>(</span><span class=n>user</span><span class=p>)</span>

    <span class=k>return</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=n>cache</span><span class=o>.</span><span class=n>get_data</span><span class=p>())</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.get_ayon_username class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_ayon_username</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>AYON username used for templates and publishing.</p> <p>Uses current ayon api username.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>Username.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/local_settings.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>638</span>
<span class=normal>639</span>
<span class=normal>640</span>
<span class=normal>641</span>
<span class=normal>642</span>
<span class=normal>643</span>
<span class=normal>644</span>
<span class=normal>645</span>
<span class=normal>646</span>
<span class=normal>647</span>
<span class=normal>648</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_ayon_username</span><span class=p>():</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;AYON username used for templates and publishing.</span>

<span class=sd>    Uses current ayon api username.</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: Username.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>user</span> <span class=o>=</span> <span class=n>get_ayon_user_entity</span><span class=p>()</span>
    <span class=k>return</span> <span class=n>user</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.get_datetime_data class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_datetime_data</span><span class=p>(</span><span class=n>datetime_obj</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Returns current datetime data as dictionary.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>datetime_obj</code> </td> <td> <code><span title=datetime>datetime</span></code> </td> <td> <div class=doc-md-description> <p>Specific datetime object</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>dict</code></td> <td> </td> <td> <div class=doc-md-description> <p>prepared date &amp; time data</p> </div> </td> </tr> </tbody> </table> <details class=available-keys open> <summary>Available keys</summary> <p>"d" - <day of month number> in shortest possible way. "dd" - <day of month number> with 2 digits. "ddd" - <week day name> shortened week day. e.g.: <code>Mon</code>, ... "dddd" - <week day name> full name of week day. e.g.: <code>Monday</code>, ... "m" - <month number> in shortest possible way. e.g.: <code>1</code> if January "mm" - <month number> with 2 digits. "mmm" - <month name> shortened month name. e.g.: <code>Jan</code>, ... "mmmm" - <month name> full month name. e.g.: <code>January</code>, ... "yy" - <year number> shortened year. e.g.: <code>19</code>, <code>20</code>, ... "yyyy" - <year number> full year. e.g.: <code>2019</code>, <code>2020</code>, ... "H" - <hours number 24-hour> shortened hours. "HH" - <hours number 24-hour> with 2 digits. "h" - <hours number 12-hour> shortened hours. "hh" - <hours number 12-hour> with 2 digits. "ht" - <midday type> AM or PM. "M" - <minutes number> shortened minutes. "MM" - <minutes number> with 2 digits. "S" - <seconds number> shortened seconds. "SS" - <seconds number> with 2 digits.</p> </details> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/dateutils.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span>
<span class=normal>62</span>
<span class=normal>63</span>
<span class=normal>64</span>
<span class=normal>65</span>
<span class=normal>66</span>
<span class=normal>67</span>
<span class=normal>68</span>
<span class=normal>69</span>
<span class=normal>70</span>
<span class=normal>71</span>
<span class=normal>72</span>
<span class=normal>73</span>
<span class=normal>74</span>
<span class=normal>75</span>
<span class=normal>76</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_datetime_data</span><span class=p>(</span><span class=n>datetime_obj</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Returns current datetime data as dictionary.</span>

<span class=sd>    Args:</span>
<span class=sd>        datetime_obj (datetime): Specific datetime object</span>

<span class=sd>    Returns:</span>
<span class=sd>        dict: prepared date &amp; time data</span>

<span class=sd>    Available keys:</span>
<span class=sd>        &quot;d&quot; - &lt;Day of month number&gt; in shortest possible way.</span>
<span class=sd>        &quot;dd&quot; - &lt;Day of month number&gt; with 2 digits.</span>
<span class=sd>        &quot;ddd&quot; - &lt;Week day name&gt; shortened week day. e.g.: `Mon`, ...</span>
<span class=sd>        &quot;dddd&quot; - &lt;Week day name&gt; full name of week day. e.g.: `Monday`, ...</span>
<span class=sd>        &quot;m&quot; - &lt;Month number&gt; in shortest possible way. e.g.: `1` if January</span>
<span class=sd>        &quot;mm&quot; - &lt;Month number&gt; with 2 digits.</span>
<span class=sd>        &quot;mmm&quot; - &lt;Month name&gt; shortened month name. e.g.: `Jan`, ...</span>
<span class=sd>        &quot;mmmm&quot; - &lt;Month name&gt; full month name. e.g.: `January`, ...</span>
<span class=sd>        &quot;yy&quot; - &lt;Year number&gt; shortened year. e.g.: `19`, `20`, ...</span>
<span class=sd>        &quot;yyyy&quot; - &lt;Year number&gt; full year. e.g.: `2019`, `2020`, ...</span>
<span class=sd>        &quot;H&quot; - &lt;Hours number 24-hour&gt; shortened hours.</span>
<span class=sd>        &quot;HH&quot; - &lt;Hours number 24-hour&gt; with 2 digits.</span>
<span class=sd>        &quot;h&quot; - &lt;Hours number 12-hour&gt; shortened hours.</span>
<span class=sd>        &quot;hh&quot; - &lt;Hours number 12-hour&gt; with 2 digits.</span>
<span class=sd>        &quot;ht&quot; - &lt;Midday type&gt; AM or PM.</span>
<span class=sd>        &quot;M&quot; - &lt;Minutes number&gt; shortened minutes.</span>
<span class=sd>        &quot;MM&quot; - &lt;Minutes number&gt; with 2 digits.</span>
<span class=sd>        &quot;S&quot; - &lt;Seconds number&gt; shortened seconds.</span>
<span class=sd>        &quot;SS&quot; - &lt;Seconds number&gt; with 2 digits.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>datetime_obj</span><span class=p>:</span>
        <span class=n>datetime_obj</span> <span class=o>=</span> <span class=n>datetime</span><span class=o>.</span><span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>()</span>

    <span class=n>year</span> <span class=o>=</span> <span class=n>datetime_obj</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s2>&quot;%Y&quot;</span><span class=p>)</span>

    <span class=n>month</span> <span class=o>=</span> <span class=n>datetime_obj</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s2>&quot;%m&quot;</span><span class=p>)</span>
    <span class=n>month_name_full</span> <span class=o>=</span> <span class=n>datetime_obj</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s2>&quot;%B&quot;</span><span class=p>)</span>
    <span class=n>month_name_short</span> <span class=o>=</span> <span class=n>datetime_obj</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s2>&quot;%b&quot;</span><span class=p>)</span>
    <span class=n>day</span> <span class=o>=</span> <span class=n>datetime_obj</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s2>&quot;</span><span class=si>%d</span><span class=s2>&quot;</span><span class=p>)</span>

    <span class=n>weekday_full</span> <span class=o>=</span> <span class=n>datetime_obj</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s2>&quot;%A&quot;</span><span class=p>)</span>
    <span class=n>weekday_short</span> <span class=o>=</span> <span class=n>datetime_obj</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s2>&quot;</span><span class=si>%a</span><span class=s2>&quot;</span><span class=p>)</span>

    <span class=n>hours</span> <span class=o>=</span> <span class=n>datetime_obj</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s2>&quot;%H&quot;</span><span class=p>)</span>
    <span class=n>hours_midday</span> <span class=o>=</span> <span class=n>datetime_obj</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s2>&quot;%I&quot;</span><span class=p>)</span>
    <span class=n>hour_midday_type</span> <span class=o>=</span> <span class=n>datetime_obj</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s2>&quot;%p&quot;</span><span class=p>)</span>
    <span class=n>minutes</span> <span class=o>=</span> <span class=n>datetime_obj</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s2>&quot;%M&quot;</span><span class=p>)</span>
    <span class=n>seconds</span> <span class=o>=</span> <span class=n>datetime_obj</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s2>&quot;%S&quot;</span><span class=p>)</span>

    <span class=k>return</span> <span class=p>{</span>
        <span class=s2>&quot;d&quot;</span><span class=p>:</span> <span class=nb>str</span><span class=p>(</span><span class=nb>int</span><span class=p>(</span><span class=n>day</span><span class=p>)),</span>
        <span class=s2>&quot;dd&quot;</span><span class=p>:</span> <span class=nb>str</span><span class=p>(</span><span class=n>day</span><span class=p>),</span>
        <span class=s2>&quot;ddd&quot;</span><span class=p>:</span> <span class=n>weekday_short</span><span class=p>,</span>
        <span class=s2>&quot;dddd&quot;</span><span class=p>:</span> <span class=n>weekday_full</span><span class=p>,</span>
        <span class=s2>&quot;m&quot;</span><span class=p>:</span> <span class=nb>str</span><span class=p>(</span><span class=nb>int</span><span class=p>(</span><span class=n>month</span><span class=p>)),</span>
        <span class=s2>&quot;mm&quot;</span><span class=p>:</span> <span class=nb>str</span><span class=p>(</span><span class=n>month</span><span class=p>),</span>
        <span class=s2>&quot;mmm&quot;</span><span class=p>:</span> <span class=n>month_name_short</span><span class=p>,</span>
        <span class=s2>&quot;mmmm&quot;</span><span class=p>:</span> <span class=n>month_name_full</span><span class=p>,</span>
        <span class=s2>&quot;yy&quot;</span><span class=p>:</span> <span class=nb>str</span><span class=p>(</span><span class=n>year</span><span class=p>[</span><span class=mi>2</span><span class=p>:]),</span>
        <span class=s2>&quot;yyyy&quot;</span><span class=p>:</span> <span class=nb>str</span><span class=p>(</span><span class=n>year</span><span class=p>),</span>
        <span class=s2>&quot;H&quot;</span><span class=p>:</span> <span class=nb>str</span><span class=p>(</span><span class=nb>int</span><span class=p>(</span><span class=n>hours</span><span class=p>)),</span>
        <span class=s2>&quot;HH&quot;</span><span class=p>:</span> <span class=nb>str</span><span class=p>(</span><span class=n>hours</span><span class=p>),</span>
        <span class=s2>&quot;h&quot;</span><span class=p>:</span> <span class=nb>str</span><span class=p>(</span><span class=nb>int</span><span class=p>(</span><span class=n>hours_midday</span><span class=p>)),</span>
        <span class=s2>&quot;hh&quot;</span><span class=p>:</span> <span class=nb>str</span><span class=p>(</span><span class=n>hours_midday</span><span class=p>),</span>
        <span class=s2>&quot;ht&quot;</span><span class=p>:</span> <span class=n>hour_midday_type</span><span class=p>,</span>
        <span class=s2>&quot;M&quot;</span><span class=p>:</span> <span class=nb>str</span><span class=p>(</span><span class=nb>int</span><span class=p>(</span><span class=n>minutes</span><span class=p>)),</span>
        <span class=s2>&quot;MM&quot;</span><span class=p>:</span> <span class=nb>str</span><span class=p>(</span><span class=n>minutes</span><span class=p>),</span>
        <span class=s2>&quot;S&quot;</span><span class=p>:</span> <span class=nb>str</span><span class=p>(</span><span class=nb>int</span><span class=p>(</span><span class=n>seconds</span><span class=p>)),</span>
        <span class=s2>&quot;SS&quot;</span><span class=p>:</span> <span class=nb>str</span><span class=p>(</span><span class=n>seconds</span><span class=p>),</span>
    <span class=p>}</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.get_ffmpeg_codec_args class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_ffmpeg_codec_args</span><span class=p>(</span><span class=n>ffprobe_data</span><span class=p>,</span> <span class=n>source_ffmpeg_cmd</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>logger</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Copy codec from input metadata for output.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>ffprobe_data</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>Data received from ffprobe.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>source_ffmpeg_cmd</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Command that created input if available.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/transcoding.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>776</span>
<span class=normal>777</span>
<span class=normal>778</span>
<span class=normal>779</span>
<span class=normal>780</span>
<span class=normal>781</span>
<span class=normal>782</span>
<span class=normal>783</span>
<span class=normal>784</span>
<span class=normal>785</span>
<span class=normal>786</span>
<span class=normal>787</span>
<span class=normal>788</span>
<span class=normal>789</span>
<span class=normal>790</span>
<span class=normal>791</span>
<span class=normal>792</span>
<span class=normal>793</span>
<span class=normal>794</span>
<span class=normal>795</span>
<span class=normal>796</span>
<span class=normal>797</span>
<span class=normal>798</span>
<span class=normal>799</span>
<span class=normal>800</span>
<span class=normal>801</span>
<span class=normal>802</span>
<span class=normal>803</span>
<span class=normal>804</span>
<span class=normal>805</span>
<span class=normal>806</span>
<span class=normal>807</span>
<span class=normal>808</span>
<span class=normal>809</span>
<span class=normal>810</span>
<span class=normal>811</span>
<span class=normal>812</span>
<span class=normal>813</span>
<span class=normal>814</span>
<span class=normal>815</span>
<span class=normal>816</span>
<span class=normal>817</span>
<span class=normal>818</span>
<span class=normal>819</span>
<span class=normal>820</span>
<span class=normal>821</span>
<span class=normal>822</span>
<span class=normal>823</span>
<span class=normal>824</span>
<span class=normal>825</span>
<span class=normal>826</span>
<span class=normal>827</span>
<span class=normal>828</span>
<span class=normal>829</span>
<span class=normal>830</span>
<span class=normal>831</span>
<span class=normal>832</span>
<span class=normal>833</span>
<span class=normal>834</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_ffmpeg_codec_args</span><span class=p>(</span><span class=n>ffprobe_data</span><span class=p>,</span> <span class=n>source_ffmpeg_cmd</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>logger</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Copy codec from input metadata for output.</span>

<span class=sd>    Args:</span>
<span class=sd>        ffprobe_data(dict): Data received from ffprobe.</span>
<span class=sd>        source_ffmpeg_cmd(str): Command that created input if available.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=n>logger</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>logger</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>getLogger</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>

    <span class=n>video_stream</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=n>no_audio_stream</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=k>for</span> <span class=n>stream</span> <span class=ow>in</span> <span class=n>ffprobe_data</span><span class=p>[</span><span class=s2>&quot;streams&quot;</span><span class=p>]:</span>
        <span class=n>codec_type</span> <span class=o>=</span> <span class=n>stream</span><span class=p>[</span><span class=s2>&quot;codec_type&quot;</span><span class=p>]</span>
        <span class=k>if</span> <span class=n>codec_type</span> <span class=o>==</span> <span class=s2>&quot;video&quot;</span><span class=p>:</span>
            <span class=n>video_stream</span> <span class=o>=</span> <span class=n>stream</span>
            <span class=k>break</span>
        <span class=k>elif</span> <span class=n>no_audio_stream</span> <span class=ow>is</span> <span class=kc>None</span> <span class=ow>and</span> <span class=n>codec_type</span> <span class=o>!=</span> <span class=s2>&quot;audio&quot;</span><span class=p>:</span>
            <span class=n>no_audio_stream</span> <span class=o>=</span> <span class=n>stream</span>

    <span class=k>if</span> <span class=n>video_stream</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>if</span> <span class=n>no_audio_stream</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
                <span class=s2>&quot;Couldn&#39;t find stream that is not an audio file.&quot;</span>
            <span class=p>)</span>
            <span class=k>return</span> <span class=p>[]</span>
        <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span>
            <span class=s2>&quot;Didn&#39;t find video stream. Using first non audio stream.&quot;</span>
        <span class=p>)</span>
        <span class=n>video_stream</span> <span class=o>=</span> <span class=n>no_audio_stream</span>

    <span class=n>codec_name</span> <span class=o>=</span> <span class=n>video_stream</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;codec_name&quot;</span><span class=p>)</span>
    <span class=c1># Codec &quot;prores&quot;</span>
    <span class=k>if</span> <span class=n>codec_name</span> <span class=o>==</span> <span class=s2>&quot;prores&quot;</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>_ffmpeg_prores_codec_args</span><span class=p>(</span><span class=n>video_stream</span><span class=p>,</span> <span class=n>source_ffmpeg_cmd</span><span class=p>)</span>

    <span class=c1># Codec &quot;h264&quot;</span>
    <span class=k>if</span> <span class=n>codec_name</span> <span class=o>==</span> <span class=s2>&quot;h264&quot;</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>_ffmpeg_h264_codec_args</span><span class=p>(</span><span class=n>video_stream</span><span class=p>,</span> <span class=n>source_ffmpeg_cmd</span><span class=p>)</span>

    <span class=c1># Coded DNxHD</span>
    <span class=k>if</span> <span class=n>codec_name</span> <span class=o>==</span> <span class=s2>&quot;dnxhd&quot;</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>_ffmpeg_dnxhd_codec_args</span><span class=p>(</span><span class=n>video_stream</span><span class=p>,</span> <span class=n>source_ffmpeg_cmd</span><span class=p>)</span>

    <span class=n>output</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>if</span> <span class=n>codec_name</span><span class=p>:</span>
        <span class=n>output</span><span class=o>.</span><span class=n>extend</span><span class=p>([</span><span class=s2>&quot;-codec:v&quot;</span><span class=p>,</span> <span class=n>codec_name</span><span class=p>])</span>

    <span class=n>bit_rate</span> <span class=o>=</span> <span class=n>video_stream</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;bit_rate&quot;</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>bit_rate</span><span class=p>:</span>
        <span class=n>output</span><span class=o>.</span><span class=n>extend</span><span class=p>([</span><span class=s2>&quot;-b:v&quot;</span><span class=p>,</span> <span class=n>bit_rate</span><span class=p>])</span>

    <span class=n>pix_fmt</span> <span class=o>=</span> <span class=n>video_stream</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;pix_fmt&quot;</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>pix_fmt</span><span class=p>:</span>
        <span class=n>output</span><span class=o>.</span><span class=n>extend</span><span class=p>([</span><span class=s2>&quot;-pix_fmt&quot;</span><span class=p>,</span> <span class=n>pix_fmt</span><span class=p>])</span>

    <span class=n>output</span><span class=o>.</span><span class=n>extend</span><span class=p>([</span><span class=s2>&quot;-g&quot;</span><span class=p>,</span> <span class=s2>&quot;1&quot;</span><span class=p>])</span>

    <span class=k>return</span> <span class=n>output</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.get_ffmpeg_format_args class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_ffmpeg_format_args</span><span class=p>(</span><span class=n>ffprobe_data</span><span class=p>,</span> <span class=n>source_ffmpeg_cmd</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Copy format from input metadata for output.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>ffprobe_data</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>Data received from ffprobe.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>source_ffmpeg_cmd</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Command that created input if available.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/transcoding.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>753</span>
<span class=normal>754</span>
<span class=normal>755</span>
<span class=normal>756</span>
<span class=normal>757</span>
<span class=normal>758</span>
<span class=normal>759</span>
<span class=normal>760</span>
<span class=normal>761</span>
<span class=normal>762</span>
<span class=normal>763</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_ffmpeg_format_args</span><span class=p>(</span><span class=n>ffprobe_data</span><span class=p>,</span> <span class=n>source_ffmpeg_cmd</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Copy format from input metadata for output.</span>

<span class=sd>    Args:</span>
<span class=sd>        ffprobe_data(dict): Data received from ffprobe.</span>
<span class=sd>        source_ffmpeg_cmd(str): Command that created input if available.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>input_format</span> <span class=o>=</span> <span class=n>ffprobe_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;format&quot;</span><span class=p>)</span> <span class=ow>or</span> <span class=p>{}</span>
    <span class=k>if</span> <span class=n>input_format</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;format_name&quot;</span><span class=p>)</span> <span class=o>==</span> <span class=s2>&quot;mxf&quot;</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>_ffmpeg_mxf_format_args</span><span class=p>(</span><span class=n>ffprobe_data</span><span class=p>,</span> <span class=n>source_ffmpeg_cmd</span><span class=p>)</span>
    <span class=k>return</span> <span class=p>[]</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.get_ffmpeg_tool_args class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_ffmpeg_tool_args</span><span class=p>(</span><span class=n>tool_name</span><span class=p>,</span> <span class=o>*</span><span class=n>extra_args</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Arguments to launch FFmpeg tool.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>tool_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Tool name 'ffmpeg', 'ffprobe', exc.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>*extra_args</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Extra arguments to add to after tool arguments.</p> </div> </td> <td> <code>()</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>list[str]: List of arguments.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/vendor_bin_utils.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>443</span>
<span class=normal>444</span>
<span class=normal>445</span>
<span class=normal>446</span>
<span class=normal>447</span>
<span class=normal>448</span>
<span class=normal>449</span>
<span class=normal>450</span>
<span class=normal>451</span>
<span class=normal>452</span>
<span class=normal>453</span>
<span class=normal>454</span>
<span class=normal>455</span>
<span class=normal>456</span>
<span class=normal>457</span>
<span class=normal>458</span>
<span class=normal>459</span>
<span class=normal>460</span>
<span class=normal>461</span>
<span class=normal>462</span>
<span class=normal>463</span>
<span class=normal>464</span>
<span class=normal>465</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_ffmpeg_tool_args</span><span class=p>(</span><span class=n>tool_name</span><span class=p>,</span> <span class=o>*</span><span class=n>extra_args</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Arguments to launch FFmpeg tool.</span>

<span class=sd>    Args:</span>
<span class=sd>        tool_name (str): Tool name &#39;ffmpeg&#39;, &#39;ffprobe&#39;, exc.</span>
<span class=sd>        *extra_args (str): Extra arguments to add to after tool arguments.</span>

<span class=sd>    Returns:</span>
<span class=sd>        list[str]: List of arguments.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>extra_args</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>extra_args</span><span class=p>)</span>

    <span class=n>args</span> <span class=o>=</span> <span class=n>_get_ayon_ffmpeg_tool_args</span><span class=p>(</span><span class=n>tool_name</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>args</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>args</span> <span class=o>+</span> <span class=n>extra_args</span>

    <span class=n>executable_path</span> <span class=o>=</span> <span class=n>get_ffmpeg_tool_path</span><span class=p>(</span><span class=n>tool_name</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>executable_path</span><span class=p>:</span>
        <span class=k>return</span> <span class=p>[</span><span class=n>executable_path</span><span class=p>]</span> <span class=o>+</span> <span class=n>extra_args</span>
    <span class=k>raise</span> <span class=n>ToolNotFoundError</span><span class=p>(</span>
        <span class=s2>&quot;FFmpeg &#39;</span><span class=si>{}</span><span class=s2>&#39; tool not found.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>tool_name</span><span class=p>)</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.get_ffmpeg_tool_path class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_ffmpeg_tool_path</span><span class=p>(</span><span class=n>tool</span><span class=o>=</span><span class=s1>&#39;ffmpeg&#39;</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Path to vendorized FFmpeg executable.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>tool</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Tool name 'ffmpeg', 'ffprobe', etc. Default is "ffmpeg".</p> </div> </td> <td> <code>&#39;ffmpeg&#39;</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>Full path to ffmpeg executable.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/vendor_bin_utils.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>402</span>
<span class=normal>403</span>
<span class=normal>404</span>
<span class=normal>405</span>
<span class=normal>406</span>
<span class=normal>407</span>
<span class=normal>408</span>
<span class=normal>409</span>
<span class=normal>410</span>
<span class=normal>411</span>
<span class=normal>412</span>
<span class=normal>413</span>
<span class=normal>414</span>
<span class=normal>415</span>
<span class=normal>416</span>
<span class=normal>417</span>
<span class=normal>418</span>
<span class=normal>419</span>
<span class=normal>420</span>
<span class=normal>421</span>
<span class=normal>422</span>
<span class=normal>423</span>
<span class=normal>424</span>
<span class=normal>425</span>
<span class=normal>426</span>
<span class=normal>427</span>
<span class=normal>428</span>
<span class=normal>429</span>
<span class=normal>430</span>
<span class=normal>431</span>
<span class=normal>432</span>
<span class=normal>433</span>
<span class=normal>434</span>
<span class=normal>435</span>
<span class=normal>436</span>
<span class=normal>437</span>
<span class=normal>438</span>
<span class=normal>439</span>
<span class=normal>440</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_ffmpeg_tool_path</span><span class=p>(</span><span class=n>tool</span><span class=o>=</span><span class=s2>&quot;ffmpeg&quot;</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Path to vendorized FFmpeg executable.</span>

<span class=sd>    Args:</span>
<span class=sd>        tool (str): Tool name &#39;ffmpeg&#39;, &#39;ffprobe&#39;, etc.</span>
<span class=sd>            Default is &quot;ffmpeg&quot;.</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: Full path to ffmpeg executable.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>if</span> <span class=n>CachedToolPaths</span><span class=o>.</span><span class=n>is_tool_cached</span><span class=p>(</span><span class=n>tool</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>CachedToolPaths</span><span class=o>.</span><span class=n>get_executable_path</span><span class=p>(</span><span class=n>tool</span><span class=p>)</span>

    <span class=n>args</span> <span class=o>=</span> <span class=n>_get_ayon_ffmpeg_tool_args</span><span class=p>(</span><span class=n>tool</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>args</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>args</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>1</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
                <span class=s2>&quot;AYON ffmpeg arguments consist of multiple arguments.&quot;</span>
            <span class=p>)</span>
        <span class=n>tool_executable_path</span> <span class=o>=</span> <span class=n>args</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
        <span class=n>CachedToolPaths</span><span class=o>.</span><span class=n>cache_executable_path</span><span class=p>(</span><span class=n>tool</span><span class=p>,</span> <span class=n>tool_executable_path</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>tool_executable_path</span>

    <span class=n>custom_paths_str</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AYON_FFMPEG_PATHS&quot;</span><span class=p>)</span> <span class=ow>or</span> <span class=s2>&quot;&quot;</span>
    <span class=n>tool_executable_path</span> <span class=o>=</span> <span class=n>find_tool_in_custom_paths</span><span class=p>(</span>
        <span class=n>custom_paths_str</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>pathsep</span><span class=p>),</span>
        <span class=n>tool</span><span class=p>,</span>
        <span class=n>_ffmpeg_executable_validation</span>
    <span class=p>)</span>

    <span class=c1># Look to PATH for the tool</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>tool_executable_path</span><span class=p>:</span>
        <span class=n>from_path</span> <span class=o>=</span> <span class=n>find_executable</span><span class=p>(</span><span class=n>tool</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>from_path</span> <span class=ow>and</span> <span class=n>_ffmpeg_executable_validation</span><span class=p>(</span><span class=n>from_path</span><span class=p>):</span>
            <span class=n>tool_executable_path</span> <span class=o>=</span> <span class=n>from_path</span>

    <span class=n>CachedToolPaths</span><span class=o>.</span><span class=n>cache_executable_path</span><span class=p>(</span><span class=n>tool</span><span class=p>,</span> <span class=n>tool_executable_path</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>tool_executable_path</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.get_ffprobe_data class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_ffprobe_data</span><span class=p>(</span><span class=n>path_to_file</span><span class=p>,</span> <span class=n>logger</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Load data about entered filepath via ffprobe.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>path_to_file</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>absolute path</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>logger</code> </td> <td> <code><span title=logging.Logger>Logger</span></code> </td> <td> <div class=doc-md-description> <p>injected logger, if empty new is created</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/transcoding.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>687</span>
<span class=normal>688</span>
<span class=normal>689</span>
<span class=normal>690</span>
<span class=normal>691</span>
<span class=normal>692</span>
<span class=normal>693</span>
<span class=normal>694</span>
<span class=normal>695</span>
<span class=normal>696</span>
<span class=normal>697</span>
<span class=normal>698</span>
<span class=normal>699</span>
<span class=normal>700</span>
<span class=normal>701</span>
<span class=normal>702</span>
<span class=normal>703</span>
<span class=normal>704</span>
<span class=normal>705</span>
<span class=normal>706</span>
<span class=normal>707</span>
<span class=normal>708</span>
<span class=normal>709</span>
<span class=normal>710</span>
<span class=normal>711</span>
<span class=normal>712</span>
<span class=normal>713</span>
<span class=normal>714</span>
<span class=normal>715</span>
<span class=normal>716</span>
<span class=normal>717</span>
<span class=normal>718</span>
<span class=normal>719</span>
<span class=normal>720</span>
<span class=normal>721</span>
<span class=normal>722</span>
<span class=normal>723</span>
<span class=normal>724</span>
<span class=normal>725</span>
<span class=normal>726</span>
<span class=normal>727</span>
<span class=normal>728</span>
<span class=normal>729</span>
<span class=normal>730</span>
<span class=normal>731</span>
<span class=normal>732</span>
<span class=normal>733</span>
<span class=normal>734</span>
<span class=normal>735</span>
<span class=normal>736</span>
<span class=normal>737</span>
<span class=normal>738</span>
<span class=normal>739</span>
<span class=normal>740</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_ffprobe_data</span><span class=p>(</span><span class=n>path_to_file</span><span class=p>,</span> <span class=n>logger</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Load data about entered filepath via ffprobe.</span>

<span class=sd>    Args:</span>
<span class=sd>        path_to_file (str): absolute path</span>
<span class=sd>        logger (logging.Logger): injected logger, if empty new is created</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>logger</span><span class=p>:</span>
        <span class=n>logger</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>getLogger</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>
    <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
        <span class=s2>&quot;Getting information about input </span><span class=se>\&quot;</span><span class=si>{}</span><span class=se>\&quot;</span><span class=s2>.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>path_to_file</span><span class=p>)</span>
    <span class=p>)</span>
    <span class=n>ffprobe_args</span> <span class=o>=</span> <span class=n>get_ffmpeg_tool_args</span><span class=p>(</span><span class=s2>&quot;ffprobe&quot;</span><span class=p>)</span>
    <span class=n>args</span> <span class=o>=</span> <span class=n>ffprobe_args</span> <span class=o>+</span> <span class=p>[</span>
        <span class=s2>&quot;-hide_banner&quot;</span><span class=p>,</span>
        <span class=s2>&quot;-loglevel&quot;</span><span class=p>,</span> <span class=s2>&quot;fatal&quot;</span><span class=p>,</span>
        <span class=s2>&quot;-show_error&quot;</span><span class=p>,</span>
        <span class=s2>&quot;-show_format&quot;</span><span class=p>,</span>
        <span class=s2>&quot;-show_streams&quot;</span><span class=p>,</span>
        <span class=s2>&quot;-show_programs&quot;</span><span class=p>,</span>
        <span class=s2>&quot;-show_chapters&quot;</span><span class=p>,</span>
        <span class=s2>&quot;-show_private_data&quot;</span><span class=p>,</span>
        <span class=s2>&quot;-print_format&quot;</span><span class=p>,</span> <span class=s2>&quot;json&quot;</span><span class=p>,</span>
        <span class=n>path_to_file</span>
    <span class=p>]</span>

    <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;FFprobe command: </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
        <span class=n>subprocess</span><span class=o>.</span><span class=n>list2cmdline</span><span class=p>(</span><span class=n>args</span><span class=p>)</span>
    <span class=p>))</span>
    <span class=n>kwargs</span> <span class=o>=</span> <span class=p>{</span>
        <span class=s2>&quot;stdout&quot;</span><span class=p>:</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>PIPE</span><span class=p>,</span>
        <span class=s2>&quot;stderr&quot;</span><span class=p>:</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>PIPE</span><span class=p>,</span>
    <span class=p>}</span>
    <span class=k>if</span> <span class=n>platform</span><span class=o>.</span><span class=n>system</span><span class=p>()</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span> <span class=o>==</span> <span class=s2>&quot;windows&quot;</span><span class=p>:</span>
        <span class=n>kwargs</span><span class=p>[</span><span class=s2>&quot;creationflags&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=p>(</span>
            <span class=n>subprocess</span><span class=o>.</span><span class=n>CREATE_NEW_PROCESS_GROUP</span>
            <span class=o>|</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>subprocess</span><span class=p>,</span> <span class=s2>&quot;DETACHED_PROCESS&quot;</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
            <span class=o>|</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>subprocess</span><span class=p>,</span> <span class=s2>&quot;CREATE_NO_WINDOW&quot;</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
        <span class=p>)</span>

    <span class=n>popen</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>Popen</span><span class=p>(</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>

    <span class=n>popen_stdout</span><span class=p>,</span> <span class=n>popen_stderr</span> <span class=o>=</span> <span class=n>popen</span><span class=o>.</span><span class=n>communicate</span><span class=p>()</span>
    <span class=k>if</span> <span class=n>popen_stdout</span><span class=p>:</span>
        <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;FFprobe stdout:</span><span class=se>\n</span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
            <span class=n>popen_stdout</span><span class=o>.</span><span class=n>decode</span><span class=p>(</span><span class=s2>&quot;utf-8&quot;</span><span class=p>)</span>
        <span class=p>))</span>

    <span class=k>if</span> <span class=n>popen_stderr</span><span class=p>:</span>
        <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s2>&quot;FFprobe stderr:</span><span class=se>\n</span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
            <span class=n>popen_stderr</span><span class=o>.</span><span class=n>decode</span><span class=p>(</span><span class=s2>&quot;utf-8&quot;</span><span class=p>)</span>
        <span class=p>))</span>

    <span class=k>return</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>popen_stdout</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.get_ffprobe_streams class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_ffprobe_streams</span><span class=p>(</span><span class=n>path_to_file</span><span class=p>,</span> <span class=n>logger</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Load streams from entered filepath via ffprobe.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>path_to_file</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>absolute path</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>logger</code> </td> <td> <code><span title=logging.Logger>Logger</span></code> </td> <td> <div class=doc-md-description> <p>injected logger, if empty new is created</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/transcoding.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>743</span>
<span class=normal>744</span>
<span class=normal>745</span>
<span class=normal>746</span>
<span class=normal>747</span>
<span class=normal>748</span>
<span class=normal>749</span>
<span class=normal>750</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_ffprobe_streams</span><span class=p>(</span><span class=n>path_to_file</span><span class=p>,</span> <span class=n>logger</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Load streams from entered filepath via ffprobe.</span>

<span class=sd>    Args:</span>
<span class=sd>        path_to_file (str): absolute path</span>
<span class=sd>        logger (logging.Logger): injected logger, if empty new is created</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>return</span> <span class=n>get_ffprobe_data</span><span class=p>(</span><span class=n>path_to_file</span><span class=p>,</span> <span class=n>logger</span><span class=p>)[</span><span class=s2>&quot;streams&quot;</span><span class=p>]</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.get_last_version_from_path class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_last_version_from_path</span><span class=p>(</span><span class=n>path_dir</span><span class=p>,</span> <span class=nb>filter</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Find last version of given directory content.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>path_dir</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>directory path</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>filter</code> </td> <td> <code><span title=list>list</span></code> </td> <td> <div class=doc-md-description> <p>list of strings used as file name filter</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>file name with last version</p> </div> </td> </tr> </tbody> </table> <details class=example open> <summary>Example</summary> <p>last_version_file = get_last_version_from_path( "/project/shots/shot01/work", ["shot01", "compositing", "nk"])</p> </details> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/path_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_last_version_from_path</span><span class=p>(</span><span class=n>path_dir</span><span class=p>,</span> <span class=nb>filter</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Find last version of given directory content.</span>

<span class=sd>    Args:</span>
<span class=sd>        path_dir (str): directory path</span>
<span class=sd>        filter (list): list of strings used as file name filter</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: file name with last version</span>

<span class=sd>    Example:</span>
<span class=sd>        last_version_file = get_last_version_from_path(</span>
<span class=sd>            &quot;/project/shots/shot01/work&quot;, [&quot;shot01&quot;, &quot;compositing&quot;, &quot;nk&quot;])</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>assert</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>isdir</span><span class=p>(</span><span class=n>path_dir</span><span class=p>),</span> <span class=s2>&quot;`path_dir` argument needs to be directory&quot;</span>
    <span class=k>assert</span> <span class=nb>isinstance</span><span class=p>(</span><span class=nb>filter</span><span class=p>,</span> <span class=nb>list</span><span class=p>)</span> <span class=ow>and</span> <span class=p>(</span>
        <span class=nb>len</span><span class=p>(</span><span class=nb>filter</span><span class=p>)</span> <span class=o>!=</span> <span class=mi>0</span><span class=p>),</span> <span class=s2>&quot;`filter` argument needs to be list and not empty&quot;</span>

    <span class=n>filtered_files</span> <span class=o>=</span> <span class=nb>list</span><span class=p>()</span>

    <span class=c1># form regex for filtering</span>
    <span class=n>pattern</span> <span class=o>=</span> <span class=sa>r</span><span class=s2>&quot;.*&quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=nb>filter</span><span class=p>)</span>

    <span class=k>for</span> <span class=n>file</span> <span class=ow>in</span> <span class=n>os</span><span class=o>.</span><span class=n>listdir</span><span class=p>(</span><span class=n>path_dir</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>re</span><span class=o>.</span><span class=n>findall</span><span class=p>(</span><span class=n>pattern</span><span class=p>,</span> <span class=n>file</span><span class=p>):</span>
            <span class=k>continue</span>
        <span class=n>filtered_files</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>file</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>filtered_files</span><span class=p>:</span>
        <span class=n>filtered_files</span><span class=o>.</span><span class=n>sort</span><span class=p>()</span>
        <span class=k>return</span> <span class=n>filtered_files</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span>

    <span class=k>return</span> <span class=kc>None</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.get_launcher_local_dir class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_launcher_local_dir</span><span class=p>(</span><span class=o>*</span><span class=n>subdirs</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Get a local directory for launcher.</p> <p>Local directory is used for storing machine or user-specific data.</p> <p>The location is user-specific.</p> <details class=note open> <summary>Note</summary> <p>This function should be called at least once on the bootstrap.</p> </details> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>*subdirs</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Subdirectories relative to local dir.</p> </div> </td> <td> <code>()</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Path to local directory.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/local_settings.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_launcher_local_dir</span><span class=p>(</span><span class=o>*</span><span class=n>subdirs</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get a local directory for launcher.</span>

<span class=sd>    Local directory is used for storing machine or user-specific data.</span>

<span class=sd>    The location is user-specific.</span>

<span class=sd>    Note:</span>
<span class=sd>        This function should be called at least once on the bootstrap.</span>

<span class=sd>    Args:</span>
<span class=sd>        *subdirs (str): Subdirectories relative to local dir.</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: Path to local directory.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>storage_dir</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>getenv</span><span class=p>(</span><span class=s2>&quot;AYON_LAUNCHER_LOCAL_DIR&quot;</span><span class=p>)</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>storage_dir</span><span class=p>:</span>
        <span class=n>storage_dir</span> <span class=o>=</span> <span class=n>_get_ayon_appdirs</span><span class=p>()</span>

    <span class=k>return</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>storage_dir</span><span class=p>,</span> <span class=o>*</span><span class=n>subdirs</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.get_launcher_storage_dir class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_launcher_storage_dir</span><span class=p>(</span><span class=o>*</span><span class=n>subdirs</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Get a storage directory for launcher.</p> <p>Storage directory is used for storing shims, addons, dependencies, etc.</p> <p>It is not recommended, but the location can be shared across multiple machines.</p> <details class=note open> <summary>Note</summary> <p>This function should be called at least once on bootstrap.</p> </details> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>*subdirs</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Subdirectories relative to storage dir.</p> </div> </td> <td> <code>()</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Path to storage directory.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/local_settings.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>64</span>
<span class=normal>65</span>
<span class=normal>66</span>
<span class=normal>67</span>
<span class=normal>68</span>
<span class=normal>69</span>
<span class=normal>70</span>
<span class=normal>71</span>
<span class=normal>72</span>
<span class=normal>73</span>
<span class=normal>74</span>
<span class=normal>75</span>
<span class=normal>76</span>
<span class=normal>77</span>
<span class=normal>78</span>
<span class=normal>79</span>
<span class=normal>80</span>
<span class=normal>81</span>
<span class=normal>82</span>
<span class=normal>83</span>
<span class=normal>84</span>
<span class=normal>85</span>
<span class=normal>86</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_launcher_storage_dir</span><span class=p>(</span><span class=o>*</span><span class=n>subdirs</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get a storage directory for launcher.</span>

<span class=sd>    Storage directory is used for storing shims, addons, dependencies, etc.</span>

<span class=sd>    It is not recommended, but the location can be shared across</span>
<span class=sd>        multiple machines.</span>

<span class=sd>    Note:</span>
<span class=sd>        This function should be called at least once on bootstrap.</span>

<span class=sd>    Args:</span>
<span class=sd>        *subdirs (str): Subdirectories relative to storage dir.</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: Path to storage directory.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>storage_dir</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>getenv</span><span class=p>(</span><span class=s2>&quot;AYON_LAUNCHER_STORAGE_DIR&quot;</span><span class=p>)</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>storage_dir</span><span class=p>:</span>
        <span class=n>storage_dir</span> <span class=o>=</span> <span class=n>_get_ayon_appdirs</span><span class=p>()</span>

    <span class=k>return</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>storage_dir</span><span class=p>,</span> <span class=o>*</span><span class=n>subdirs</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.get_linux_launcher_args class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_linux_launcher_args</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Path to application mid process executable.</p> <p>This function should be able as arguments are different when used from code and build.</p> <p>It is possible that this function is used in AYON build which does not have yet the new executable. In that case 'None' is returned.</p> <details class=todos open> <summary>Todos</summary> <p>Replace by script in scripts for ayon-launcher.</p> </details> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>args</code> </td> <td> <code><span title=iterable>iterable</span></code> </td> <td> <div class=doc-md-description> <p>List of additional arguments added after executable argument.</p> </div> </td> <td> <code>()</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>list</code></td> <td> </td> <td> <div class=doc-md-description> <p>Executables with possible positional argument to script when called from code.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/execute.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>403</span>
<span class=normal>404</span>
<span class=normal>405</span>
<span class=normal>406</span>
<span class=normal>407</span>
<span class=normal>408</span>
<span class=normal>409</span>
<span class=normal>410</span>
<span class=normal>411</span>
<span class=normal>412</span>
<span class=normal>413</span>
<span class=normal>414</span>
<span class=normal>415</span>
<span class=normal>416</span>
<span class=normal>417</span>
<span class=normal>418</span>
<span class=normal>419</span>
<span class=normal>420</span>
<span class=normal>421</span>
<span class=normal>422</span>
<span class=normal>423</span>
<span class=normal>424</span>
<span class=normal>425</span>
<span class=normal>426</span>
<span class=normal>427</span>
<span class=normal>428</span>
<span class=normal>429</span>
<span class=normal>430</span>
<span class=normal>431</span>
<span class=normal>432</span>
<span class=normal>433</span>
<span class=normal>434</span>
<span class=normal>435</span>
<span class=normal>436</span>
<span class=normal>437</span>
<span class=normal>438</span>
<span class=normal>439</span>
<span class=normal>440</span>
<span class=normal>441</span>
<span class=normal>442</span>
<span class=normal>443</span>
<span class=normal>444</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_linux_launcher_args</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Path to application mid process executable.</span>

<span class=sd>    This function should be able as arguments are different when used</span>
<span class=sd>    from code and build.</span>

<span class=sd>    It is possible that this function is used in AYON build which does</span>
<span class=sd>    not have yet the new executable. In that case &#39;None&#39; is returned.</span>

<span class=sd>    Todos:</span>
<span class=sd>        Replace by script in scripts for ayon-launcher.</span>

<span class=sd>    Args:</span>
<span class=sd>        args (iterable): List of additional arguments added after executable</span>
<span class=sd>            argument.</span>

<span class=sd>    Returns:</span>
<span class=sd>        list: Executables with possible positional argument to script when</span>
<span class=sd>            called from code.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>filename</span> <span class=o>=</span> <span class=s2>&quot;app_launcher&quot;</span>
    <span class=n>executable</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=p>[</span><span class=s2>&quot;AYON_EXECUTABLE&quot;</span><span class=p>]</span>

    <span class=n>executable_filename</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>basename</span><span class=p>(</span><span class=n>executable</span><span class=p>)</span>
    <span class=k>if</span> <span class=s2>&quot;python&quot;</span> <span class=ow>in</span> <span class=n>executable_filename</span><span class=o>.</span><span class=n>lower</span><span class=p>():</span>
        <span class=n>root</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=p>[</span><span class=s2>&quot;AYON_ROOT&quot;</span><span class=p>]</span>
        <span class=n>script_path</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>root</span><span class=p>,</span> <span class=s2>&quot;</span><span class=si>{}</span><span class=s2>.py&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>filename</span><span class=p>))</span>
        <span class=n>launch_args</span> <span class=o>=</span> <span class=p>[</span><span class=n>executable</span><span class=p>,</span> <span class=n>script_path</span><span class=p>]</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=n>new_executable</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span>
            <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>dirname</span><span class=p>(</span><span class=n>executable</span><span class=p>),</span>
            <span class=n>filename</span>
        <span class=p>)</span>
        <span class=n>executable_path</span> <span class=o>=</span> <span class=n>find_executable</span><span class=p>(</span><span class=n>new_executable</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>executable_path</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>None</span>
        <span class=n>launch_args</span> <span class=o>=</span> <span class=p>[</span><span class=n>executable_path</span><span class=p>]</span>

    <span class=k>if</span> <span class=n>args</span><span class=p>:</span>
        <span class=n>launch_args</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>args</span><span class=p>)</span>

    <span class=k>return</span> <span class=n>launch_args</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.get_local_site_id class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_local_site_id</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>Get local site identifier.</p> <p>Identifier is created if does not exist yet.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/local_settings.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>549</span>
<span class=normal>550</span>
<span class=normal>551</span>
<span class=normal>552</span>
<span class=normal>553</span>
<span class=normal>554</span>
<span class=normal>555</span>
<span class=normal>556</span>
<span class=normal>557</span>
<span class=normal>558</span>
<span class=normal>559</span>
<span class=normal>560</span>
<span class=normal>561</span>
<span class=normal>562</span>
<span class=normal>563</span>
<span class=normal>564</span>
<span class=normal>565</span>
<span class=normal>566</span>
<span class=normal>567</span>
<span class=normal>568</span>
<span class=normal>569</span>
<span class=normal>570</span>
<span class=normal>571</span>
<span class=normal>572</span>
<span class=normal>573</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_local_site_id</span><span class=p>():</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get local site identifier.</span>

<span class=sd>    Identifier is created if does not exist yet.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=c1># used for background syncing</span>
    <span class=n>site_id</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AYON_SITE_ID&quot;</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>site_id</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>site_id</span>

    <span class=n>site_id_path</span> <span class=o>=</span> <span class=n>get_launcher_local_dir</span><span class=p>(</span><span class=s2>&quot;site_id&quot;</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>site_id_path</span><span class=p>):</span>
        <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>site_id_path</span><span class=p>,</span> <span class=s2>&quot;r&quot;</span><span class=p>)</span> <span class=k>as</span> <span class=n>stream</span><span class=p>:</span>
            <span class=n>site_id</span> <span class=o>=</span> <span class=n>stream</span><span class=o>.</span><span class=n>read</span><span class=p>()</span>

    <span class=k>if</span> <span class=n>site_id</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>site_id</span>

    <span class=k>try</span><span class=p>:</span>
        <span class=kn>from</span><span class=w> </span><span class=nn>ayon_common.utils</span><span class=w> </span><span class=kn>import</span> <span class=n>get_local_site_id</span> <span class=k>as</span> <span class=n>_get_local_site_id</span>
        <span class=n>site_id</span> <span class=o>=</span> <span class=n>_get_local_site_id</span><span class=p>()</span>
    <span class=k>except</span> <span class=ne>ImportError</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;Couldn&#39;t access local site id&quot;</span><span class=p>)</span>

    <span class=k>return</span> <span class=n>site_id</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.get_media_mime_type class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_media_mime_type</span><span class=p>(</span><span class=n>filepath</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Determine Mime-Type of a file.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>filepath</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Path to file.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=typing.Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Optional[str]: Mime type or None if is unknown mime type.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/transcoding.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1515</span>
<span class=normal>1516</span>
<span class=normal>1517</span>
<span class=normal>1518</span>
<span class=normal>1519</span>
<span class=normal>1520</span>
<span class=normal>1521</span>
<span class=normal>1522</span>
<span class=normal>1523</span>
<span class=normal>1524</span>
<span class=normal>1525</span>
<span class=normal>1526</span>
<span class=normal>1527</span>
<span class=normal>1528</span>
<span class=normal>1529</span>
<span class=normal>1530</span>
<span class=normal>1531</span>
<span class=normal>1532</span>
<span class=normal>1533</span>
<span class=normal>1534</span>
<span class=normal>1535</span>
<span class=normal>1536</span>
<span class=normal>1537</span>
<span class=normal>1538</span>
<span class=normal>1539</span>
<span class=normal>1540</span>
<span class=normal>1541</span>
<span class=normal>1542</span>
<span class=normal>1543</span>
<span class=normal>1544</span>
<span class=normal>1545</span>
<span class=normal>1546</span>
<span class=normal>1547</span>
<span class=normal>1548</span>
<span class=normal>1549</span>
<span class=normal>1550</span>
<span class=normal>1551</span>
<span class=normal>1552</span>
<span class=normal>1553</span>
<span class=normal>1554</span>
<span class=normal>1555</span>
<span class=normal>1556</span>
<span class=normal>1557</span>
<span class=normal>1558</span>
<span class=normal>1559</span>
<span class=normal>1560</span>
<span class=normal>1561</span>
<span class=normal>1562</span>
<span class=normal>1563</span>
<span class=normal>1564</span>
<span class=normal>1565</span>
<span class=normal>1566</span>
<span class=normal>1567</span>
<span class=normal>1568</span>
<span class=normal>1569</span>
<span class=normal>1570</span>
<span class=normal>1571</span>
<span class=normal>1572</span>
<span class=normal>1573</span>
<span class=normal>1574</span>
<span class=normal>1575</span>
<span class=normal>1576</span>
<span class=normal>1577</span>
<span class=normal>1578</span>
<span class=normal>1579</span>
<span class=normal>1580</span>
<span class=normal>1581</span>
<span class=normal>1582</span>
<span class=normal>1583</span>
<span class=normal>1584</span>
<span class=normal>1585</span>
<span class=normal>1586</span>
<span class=normal>1587</span>
<span class=normal>1588</span>
<span class=normal>1589</span>
<span class=normal>1590</span>
<span class=normal>1591</span>
<span class=normal>1592</span>
<span class=normal>1593</span>
<span class=normal>1594</span>
<span class=normal>1595</span>
<span class=normal>1596</span>
<span class=normal>1597</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_media_mime_type</span><span class=p>(</span><span class=n>filepath</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Determine Mime-Type of a file.</span>

<span class=sd>    Args:</span>
<span class=sd>        filepath (str): Path to file.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Optional[str]: Mime type or None if is unknown mime type.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=c1># The implementation is identical or better with ayon_api &gt;=1.1.0,</span>
    <span class=c1>#   which is used in AYON launcher &gt;=1.3.0.</span>
    <span class=c1># NOTE Remove safe import when AYON launcher &gt;=1.2.0.</span>
    <span class=k>try</span><span class=p>:</span>
        <span class=kn>from</span><span class=w> </span><span class=nn>ayon_api.utils</span><span class=w> </span><span class=kn>import</span> <span class=p>(</span>
            <span class=n>get_media_mime_type_for_content</span> <span class=k>as</span> <span class=n>_ayon_api_func</span>
        <span class=p>)</span>
    <span class=k>except</span> <span class=ne>ImportError</span><span class=p>:</span>
        <span class=n>_ayon_api_func</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>filepath</span> <span class=ow>or</span> <span class=ow>not</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>filepath</span><span class=p>):</span>
        <span class=k>return</span> <span class=kc>None</span>

    <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>filepath</span><span class=p>,</span> <span class=s2>&quot;rb&quot;</span><span class=p>)</span> <span class=k>as</span> <span class=n>stream</span><span class=p>:</span>
        <span class=n>content</span> <span class=o>=</span> <span class=n>stream</span><span class=o>.</span><span class=n>read</span><span class=p>()</span>

    <span class=k>if</span> <span class=n>_ayon_api_func</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>mime_type</span> <span class=o>=</span> <span class=n>_ayon_api_func</span><span class=p>(</span><span class=n>content</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>mime_type</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>mime_type</span>

    <span class=n>content_len</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>content</span><span class=p>)</span>
    <span class=c1># Pre-validation (largest definition check)</span>
    <span class=c1># - hopefully there cannot be media defined in less than 12 bytes</span>
    <span class=k>if</span> <span class=n>content_len</span> <span class=o>&lt;</span> <span class=mi>12</span><span class=p>:</span>
        <span class=k>return</span> <span class=kc>None</span>

    <span class=c1># FTYP</span>
    <span class=k>if</span> <span class=n>content</span><span class=p>[</span><span class=mi>4</span><span class=p>:</span><span class=mi>8</span><span class=p>]</span> <span class=o>==</span> <span class=sa>b</span><span class=s2>&quot;ftyp&quot;</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>_get_media_mime_type_from_ftyp</span><span class=p>(</span><span class=n>content</span><span class=p>)</span>

    <span class=c1># BMP</span>
    <span class=k>if</span> <span class=n>content</span><span class=p>[</span><span class=mi>0</span><span class=p>:</span><span class=mi>2</span><span class=p>]</span> <span class=o>==</span> <span class=sa>b</span><span class=s2>&quot;BM&quot;</span><span class=p>:</span>
        <span class=k>return</span> <span class=s2>&quot;image/bmp&quot;</span>

    <span class=c1># Tiff</span>
    <span class=k>if</span> <span class=n>content</span><span class=p>[</span><span class=mi>0</span><span class=p>:</span><span class=mi>2</span><span class=p>]</span> <span class=ow>in</span> <span class=p>(</span><span class=sa>b</span><span class=s2>&quot;MM&quot;</span><span class=p>,</span> <span class=sa>b</span><span class=s2>&quot;II&quot;</span><span class=p>):</span>
        <span class=k>return</span> <span class=s2>&quot;tiff&quot;</span>

    <span class=c1># PNG</span>
    <span class=k>if</span> <span class=n>content</span><span class=p>[</span><span class=mi>0</span><span class=p>:</span><span class=mi>4</span><span class=p>]</span> <span class=o>==</span> <span class=sa>b</span><span class=s2>&quot;</span><span class=se>\211</span><span class=s2>PNG&quot;</span><span class=p>:</span>
        <span class=k>return</span> <span class=s2>&quot;image/png&quot;</span>

    <span class=c1># SVG</span>
    <span class=k>if</span> <span class=sa>b</span><span class=s1>&#39;xmlns=&quot;http://www.w3.org/2000/svg&quot;&#39;</span> <span class=ow>in</span> <span class=n>content</span><span class=p>:</span>
        <span class=k>return</span> <span class=s2>&quot;image/svg+xml&quot;</span>

    <span class=c1># JPEG</span>
    <span class=c1># - [0:2] is constant b&quot;\xff\xd8&quot;</span>
    <span class=c1>#   (ref. https://www.file-recovery.com/jpg-signature-format.htm)</span>
    <span class=c1># - [2:4] Marker identifier b&quot;\xff{?}&quot;</span>
    <span class=c1>#   (ref. https://www.disktuna.com/list-of-jpeg-markers/)</span>
    <span class=c1># NOTE: File ends with b&quot;\xff\xd9&quot;</span>
    <span class=k>if</span> <span class=n>content</span><span class=p>[</span><span class=mi>0</span><span class=p>:</span><span class=mi>3</span><span class=p>]</span> <span class=o>==</span> <span class=sa>b</span><span class=s2>&quot;</span><span class=se>\xff\xd8\xff</span><span class=s2>&quot;</span><span class=p>:</span>
        <span class=k>return</span> <span class=s2>&quot;image/jpeg&quot;</span>

    <span class=c1># Webp</span>
    <span class=k>if</span> <span class=n>content</span><span class=p>[</span><span class=mi>0</span><span class=p>:</span><span class=mi>4</span><span class=p>]</span> <span class=o>==</span> <span class=sa>b</span><span class=s2>&quot;RIFF&quot;</span> <span class=ow>and</span> <span class=n>content</span><span class=p>[</span><span class=mi>8</span><span class=p>:</span><span class=mi>12</span><span class=p>]</span> <span class=o>==</span> <span class=sa>b</span><span class=s2>&quot;WEBP&quot;</span><span class=p>:</span>
        <span class=k>return</span> <span class=s2>&quot;image/webp&quot;</span>

    <span class=c1># Gif</span>
    <span class=k>if</span> <span class=n>content</span><span class=p>[</span><span class=mi>0</span><span class=p>:</span><span class=mi>6</span><span class=p>]</span> <span class=ow>in</span> <span class=p>(</span><span class=sa>b</span><span class=s2>&quot;GIF87a&quot;</span><span class=p>,</span> <span class=sa>b</span><span class=s2>&quot;GIF89a&quot;</span><span class=p>):</span>
        <span class=k>return</span> <span class=s2>&quot;gif&quot;</span>

    <span class=c1># Adobe PhotoShop file (8B &gt; Adobe, PS &gt; PhotoShop)</span>
    <span class=k>if</span> <span class=n>content</span><span class=p>[</span><span class=mi>0</span><span class=p>:</span><span class=mi>4</span><span class=p>]</span> <span class=o>==</span> <span class=sa>b</span><span class=s2>&quot;8BPS&quot;</span><span class=p>:</span>
        <span class=k>return</span> <span class=s2>&quot;image/vnd.adobe.photoshop&quot;</span>

    <span class=c1># Windows ICO &gt; this might be wild guess as multiple files can start</span>
    <span class=c1>#   with this header</span>
    <span class=k>if</span> <span class=n>content</span><span class=p>[</span><span class=mi>0</span><span class=p>:</span><span class=mi>4</span><span class=p>]</span> <span class=o>==</span> <span class=sa>b</span><span class=s2>&quot;</span><span class=se>\x00\x00\x01\x00</span><span class=s2>&quot;</span><span class=p>:</span>
        <span class=k>return</span> <span class=s2>&quot;image/x-icon&quot;</span>
    <span class=k>return</span> <span class=kc>None</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.get_oiio_tool_args class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_oiio_tool_args</span><span class=p>(</span><span class=n>tool_name</span><span class=p>,</span> <span class=o>*</span><span class=n>extra_args</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Arguments to launch OpenImageIO tool.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>tool_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Tool name 'oiiotool', 'maketx', etc.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>*extra_args</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Extra arguments to add to after tool arguments.</p> </div> </td> <td> <code>()</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>list[str]: List of arguments.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/vendor_bin_utils.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>326</span>
<span class=normal>327</span>
<span class=normal>328</span>
<span class=normal>329</span>
<span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span>
<span class=normal>334</span>
<span class=normal>335</span>
<span class=normal>336</span>
<span class=normal>337</span>
<span class=normal>338</span>
<span class=normal>339</span>
<span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span>
<span class=normal>344</span>
<span class=normal>345</span>
<span class=normal>346</span>
<span class=normal>347</span>
<span class=normal>348</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_oiio_tool_args</span><span class=p>(</span><span class=n>tool_name</span><span class=p>,</span> <span class=o>*</span><span class=n>extra_args</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Arguments to launch OpenImageIO tool.</span>

<span class=sd>    Args:</span>
<span class=sd>        tool_name (str): Tool name &#39;oiiotool&#39;, &#39;maketx&#39;, etc.</span>
<span class=sd>        *extra_args (str): Extra arguments to add to after tool arguments.</span>

<span class=sd>    Returns:</span>
<span class=sd>        list[str]: List of arguments.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>extra_args</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>extra_args</span><span class=p>)</span>

    <span class=n>args</span> <span class=o>=</span> <span class=n>_get_ayon_oiio_tool_args</span><span class=p>(</span><span class=n>tool_name</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>args</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>args</span> <span class=o>+</span> <span class=n>extra_args</span>

    <span class=n>path</span> <span class=o>=</span> <span class=n>get_oiio_tools_path</span><span class=p>(</span><span class=n>tool_name</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>path</span><span class=p>:</span>
        <span class=k>return</span> <span class=p>[</span><span class=n>path</span><span class=p>]</span> <span class=o>+</span> <span class=n>extra_args</span>
    <span class=k>raise</span> <span class=n>ToolNotFoundError</span><span class=p>(</span>
        <span class=s2>&quot;OIIO &#39;</span><span class=si>{}</span><span class=s2>&#39; tool not found.&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>tool_name</span><span class=p>)</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.get_oiio_tools_path class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_oiio_tools_path</span><span class=p>(</span><span class=n>tool</span><span class=o>=</span><span class=s1>&#39;oiiotool&#39;</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Path to OpenImageIO tool executables.</p> <p>On Windows it adds .exe extension if missing from tool argument.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>tool</code> </td> <td> <code><span title=string>string</span></code> </td> <td> <div class=doc-md-description> <p>Tool name 'oiiotool', 'maketx', etc. Default is "oiiotool".</p> </div> </td> <td> <code>&#39;oiiotool&#39;</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/vendor_bin_utils.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>286</span>
<span class=normal>287</span>
<span class=normal>288</span>
<span class=normal>289</span>
<span class=normal>290</span>
<span class=normal>291</span>
<span class=normal>292</span>
<span class=normal>293</span>
<span class=normal>294</span>
<span class=normal>295</span>
<span class=normal>296</span>
<span class=normal>297</span>
<span class=normal>298</span>
<span class=normal>299</span>
<span class=normal>300</span>
<span class=normal>301</span>
<span class=normal>302</span>
<span class=normal>303</span>
<span class=normal>304</span>
<span class=normal>305</span>
<span class=normal>306</span>
<span class=normal>307</span>
<span class=normal>308</span>
<span class=normal>309</span>
<span class=normal>310</span>
<span class=normal>311</span>
<span class=normal>312</span>
<span class=normal>313</span>
<span class=normal>314</span>
<span class=normal>315</span>
<span class=normal>316</span>
<span class=normal>317</span>
<span class=normal>318</span>
<span class=normal>319</span>
<span class=normal>320</span>
<span class=normal>321</span>
<span class=normal>322</span>
<span class=normal>323</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_oiio_tools_path</span><span class=p>(</span><span class=n>tool</span><span class=o>=</span><span class=s2>&quot;oiiotool&quot;</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Path to OpenImageIO tool executables.</span>

<span class=sd>    On Windows it adds .exe extension if missing from tool argument.</span>

<span class=sd>    Args:</span>
<span class=sd>        tool (string): Tool name &#39;oiiotool&#39;, &#39;maketx&#39;, etc.</span>
<span class=sd>            Default is &quot;oiiotool&quot;.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>if</span> <span class=n>CachedToolPaths</span><span class=o>.</span><span class=n>is_tool_cached</span><span class=p>(</span><span class=n>tool</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>CachedToolPaths</span><span class=o>.</span><span class=n>get_executable_path</span><span class=p>(</span><span class=n>tool</span><span class=p>)</span>

    <span class=n>args</span> <span class=o>=</span> <span class=n>_get_ayon_oiio_tool_args</span><span class=p>(</span><span class=n>tool</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>args</span><span class=p>:</span>
        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>args</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>1</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
                <span class=s2>&quot;AYON oiio arguments consist of multiple arguments.&quot;</span>
            <span class=p>)</span>
        <span class=n>tool_executable_path</span> <span class=o>=</span> <span class=n>args</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
        <span class=n>CachedToolPaths</span><span class=o>.</span><span class=n>cache_executable_path</span><span class=p>(</span><span class=n>tool</span><span class=p>,</span> <span class=n>tool_executable_path</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>tool_executable_path</span>

    <span class=n>custom_paths_str</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AYON_OIIO_PATHS&quot;</span><span class=p>)</span> <span class=ow>or</span> <span class=s2>&quot;&quot;</span>
    <span class=n>tool_executable_path</span> <span class=o>=</span> <span class=n>find_tool_in_custom_paths</span><span class=p>(</span>
        <span class=n>custom_paths_str</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>pathsep</span><span class=p>),</span>
        <span class=n>tool</span><span class=p>,</span>
        <span class=n>_oiio_executable_validation</span>
    <span class=p>)</span>

    <span class=c1># Look to PATH for the tool</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>tool_executable_path</span><span class=p>:</span>
        <span class=n>from_path</span> <span class=o>=</span> <span class=n>find_executable</span><span class=p>(</span><span class=n>tool</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>from_path</span> <span class=ow>and</span> <span class=n>_oiio_executable_validation</span><span class=p>(</span><span class=n>from_path</span><span class=p>):</span>
            <span class=n>tool_executable_path</span> <span class=o>=</span> <span class=n>from_path</span>

    <span class=n>CachedToolPaths</span><span class=o>.</span><span class=n>cache_executable_path</span><span class=p>(</span><span class=n>tool</span><span class=p>,</span> <span class=n>tool_executable_path</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>tool_executable_path</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.get_paths_from_environ class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_paths_from_environ</span><span class=p>(</span><span class=n>env_key</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>env_value</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>return_first</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Return existing paths from specific environment variable.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>env_key</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Environment key where should look for paths.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>env_value</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Value of environment variable. Argument <code>env_key</code> is skipped if this argument is entered.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>return_first</code> </td> <td> <code><span title=bool>bool</span></code> </td> <td> <div class=doc-md-description> <p>Return first found value or return list of found paths. <code>None</code> or empty list returned if nothing found.</p> </div> </td> <td> <code>False</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=typing.Optional>Optional</span>[<span title=typing.Union>Union</span>[<span title=str>str</span>, <span title=list>list</span>[<span title=str>str</span>]]]</code> </td> <td> <div class=doc-md-description> <p>Optional[Union[str, list[str]]]: Result of found path/s.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/env_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 58</span>
<span class=normal> 59</span>
<span class=normal> 60</span>
<span class=normal> 61</span>
<span class=normal> 62</span>
<span class=normal> 63</span>
<span class=normal> 64</span>
<span class=normal> 65</span>
<span class=normal> 66</span>
<span class=normal> 67</span>
<span class=normal> 68</span>
<span class=normal> 69</span>
<span class=normal> 70</span>
<span class=normal> 71</span>
<span class=normal> 72</span>
<span class=normal> 73</span>
<span class=normal> 74</span>
<span class=normal> 75</span>
<span class=normal> 76</span>
<span class=normal> 77</span>
<span class=normal> 78</span>
<span class=normal> 79</span>
<span class=normal> 80</span>
<span class=normal> 81</span>
<span class=normal> 82</span>
<span class=normal> 83</span>
<span class=normal> 84</span>
<span class=normal> 85</span>
<span class=normal> 86</span>
<span class=normal> 87</span>
<span class=normal> 88</span>
<span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_paths_from_environ</span><span class=p>(</span>
    <span class=n>env_key</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
    <span class=n>env_value</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
    <span class=n>return_first</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>False</span><span class=p>,</span>
<span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Union</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>]]]:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Return existing paths from specific environment variable.</span>

<span class=sd>    Args:</span>
<span class=sd>        env_key (Optional[str]): Environment key where should look for paths.</span>
<span class=sd>        env_value (Optional[str]): Value of environment variable.</span>
<span class=sd>            Argument `env_key` is skipped if this argument is entered.</span>
<span class=sd>        return_first (bool): Return first found value or return list of found</span>
<span class=sd>            paths. `None` or empty list returned if nothing found.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Optional[Union[str, list[str]]]: Result of found path/s.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>existing_paths</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>env_key</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>env_value</span><span class=p>:</span>
        <span class=k>if</span> <span class=n>return_first</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>None</span>
        <span class=k>return</span> <span class=n>existing_paths</span>

    <span class=k>if</span> <span class=n>env_value</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>env_value</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>env_key</span><span class=p>)</span> <span class=ow>or</span> <span class=s2>&quot;&quot;</span>

    <span class=n>path_items</span> <span class=o>=</span> <span class=n>env_value</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>pathsep</span><span class=p>)</span>
    <span class=k>for</span> <span class=n>path</span> <span class=ow>in</span> <span class=n>path_items</span><span class=p>:</span>
        <span class=c1># Skip empty string</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>path</span><span class=p>:</span>
            <span class=k>continue</span>
        <span class=c1># Normalize path</span>
        <span class=n>path</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>normpath</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>
        <span class=c1># Check if path exists</span>
        <span class=k>if</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>path</span><span class=p>):</span>
            <span class=c1># Return path if `return_first` is set to True</span>
            <span class=k>if</span> <span class=n>return_first</span><span class=p>:</span>
                <span class=k>return</span> <span class=n>path</span>
            <span class=c1># Store path</span>
            <span class=n>existing_paths</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>

    <span class=c1># Return None if none of paths exists</span>
    <span class=k>if</span> <span class=n>return_first</span><span class=p>:</span>
        <span class=k>return</span> <span class=kc>None</span>
    <span class=c1># Return all existing paths from environment variable</span>
    <span class=k>return</span> <span class=n>existing_paths</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.get_rescaled_command_arguments class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_rescaled_command_arguments</span><span class=p>(</span><span class=n>application</span><span class=p>,</span> <span class=n>input_path</span><span class=p>,</span> <span class=n>target_width</span><span class=p>,</span> <span class=n>target_height</span><span class=p>,</span> <span class=n>target_par</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>bg_color</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>log</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Get command arguments for rescaling input to target size.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>application</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Application for which command should be created. Currently supported are "ffmpeg" and "oiiotool".</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>input_path</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Path to input file.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>target_width</code> </td> <td> <code><span title=int>int</span></code> </td> <td> <div class=doc-md-description> <p>Width of target.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>target_height</code> </td> <td> <code><span title=int>int</span></code> </td> <td> <div class=doc-md-description> <p>Height of target.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>target_par</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=float>float</span>]</code> </td> <td> <div class=doc-md-description> <p>Pixel aspect ratio of target.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>bg_color</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=list>list</span>[<span title=int>int</span>]]</code> </td> <td> <div class=doc-md-description> <p>List of 8bit int values for background color. Should be in range 0 - 255.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>log</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=logging.Logger>Logger</span>]</code> </td> <td> <div class=doc-md-description> <p>Logger used for logging.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>list[str]: List of command arguments.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/transcoding.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1240</span>
<span class=normal>1241</span>
<span class=normal>1242</span>
<span class=normal>1243</span>
<span class=normal>1244</span>
<span class=normal>1245</span>
<span class=normal>1246</span>
<span class=normal>1247</span>
<span class=normal>1248</span>
<span class=normal>1249</span>
<span class=normal>1250</span>
<span class=normal>1251</span>
<span class=normal>1252</span>
<span class=normal>1253</span>
<span class=normal>1254</span>
<span class=normal>1255</span>
<span class=normal>1256</span>
<span class=normal>1257</span>
<span class=normal>1258</span>
<span class=normal>1259</span>
<span class=normal>1260</span>
<span class=normal>1261</span>
<span class=normal>1262</span>
<span class=normal>1263</span>
<span class=normal>1264</span>
<span class=normal>1265</span>
<span class=normal>1266</span>
<span class=normal>1267</span>
<span class=normal>1268</span>
<span class=normal>1269</span>
<span class=normal>1270</span>
<span class=normal>1271</span>
<span class=normal>1272</span>
<span class=normal>1273</span>
<span class=normal>1274</span>
<span class=normal>1275</span>
<span class=normal>1276</span>
<span class=normal>1277</span>
<span class=normal>1278</span>
<span class=normal>1279</span>
<span class=normal>1280</span>
<span class=normal>1281</span>
<span class=normal>1282</span>
<span class=normal>1283</span>
<span class=normal>1284</span>
<span class=normal>1285</span>
<span class=normal>1286</span>
<span class=normal>1287</span>
<span class=normal>1288</span>
<span class=normal>1289</span>
<span class=normal>1290</span>
<span class=normal>1291</span>
<span class=normal>1292</span>
<span class=normal>1293</span>
<span class=normal>1294</span>
<span class=normal>1295</span>
<span class=normal>1296</span>
<span class=normal>1297</span>
<span class=normal>1298</span>
<span class=normal>1299</span>
<span class=normal>1300</span>
<span class=normal>1301</span>
<span class=normal>1302</span>
<span class=normal>1303</span>
<span class=normal>1304</span>
<span class=normal>1305</span>
<span class=normal>1306</span>
<span class=normal>1307</span>
<span class=normal>1308</span>
<span class=normal>1309</span>
<span class=normal>1310</span>
<span class=normal>1311</span>
<span class=normal>1312</span>
<span class=normal>1313</span>
<span class=normal>1314</span>
<span class=normal>1315</span>
<span class=normal>1316</span>
<span class=normal>1317</span>
<span class=normal>1318</span>
<span class=normal>1319</span>
<span class=normal>1320</span>
<span class=normal>1321</span>
<span class=normal>1322</span>
<span class=normal>1323</span>
<span class=normal>1324</span>
<span class=normal>1325</span>
<span class=normal>1326</span>
<span class=normal>1327</span>
<span class=normal>1328</span>
<span class=normal>1329</span>
<span class=normal>1330</span>
<span class=normal>1331</span>
<span class=normal>1332</span>
<span class=normal>1333</span>
<span class=normal>1334</span>
<span class=normal>1335</span>
<span class=normal>1336</span>
<span class=normal>1337</span>
<span class=normal>1338</span>
<span class=normal>1339</span>
<span class=normal>1340</span>
<span class=normal>1341</span>
<span class=normal>1342</span>
<span class=normal>1343</span>
<span class=normal>1344</span>
<span class=normal>1345</span>
<span class=normal>1346</span>
<span class=normal>1347</span>
<span class=normal>1348</span>
<span class=normal>1349</span>
<span class=normal>1350</span>
<span class=normal>1351</span>
<span class=normal>1352</span>
<span class=normal>1353</span>
<span class=normal>1354</span>
<span class=normal>1355</span>
<span class=normal>1356</span>
<span class=normal>1357</span>
<span class=normal>1358</span>
<span class=normal>1359</span>
<span class=normal>1360</span>
<span class=normal>1361</span>
<span class=normal>1362</span>
<span class=normal>1363</span>
<span class=normal>1364</span>
<span class=normal>1365</span>
<span class=normal>1366</span>
<span class=normal>1367</span>
<span class=normal>1368</span>
<span class=normal>1369</span>
<span class=normal>1370</span>
<span class=normal>1371</span>
<span class=normal>1372</span>
<span class=normal>1373</span>
<span class=normal>1374</span>
<span class=normal>1375</span>
<span class=normal>1376</span>
<span class=normal>1377</span>
<span class=normal>1378</span>
<span class=normal>1379</span>
<span class=normal>1380</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_rescaled_command_arguments</span><span class=p>(</span>
        <span class=n>application</span><span class=p>,</span>
        <span class=n>input_path</span><span class=p>,</span>
        <span class=n>target_width</span><span class=p>,</span>
        <span class=n>target_height</span><span class=p>,</span>
        <span class=n>target_par</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>bg_color</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>log</span><span class=o>=</span><span class=kc>None</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get command arguments for rescaling input to target size.</span>

<span class=sd>    Args:</span>
<span class=sd>        application (str): Application for which command should be created.</span>
<span class=sd>            Currently supported are &quot;ffmpeg&quot; and &quot;oiiotool&quot;.</span>
<span class=sd>        input_path (str): Path to input file.</span>
<span class=sd>        target_width (int): Width of target.</span>
<span class=sd>        target_height (int): Height of target.</span>
<span class=sd>        target_par (Optional[float]): Pixel aspect ratio of target.</span>
<span class=sd>        bg_color (Optional[list[int]]): List of 8bit int values for</span>
<span class=sd>            background color. Should be in range 0 - 255.</span>
<span class=sd>        log (Optional[logging.Logger]): Logger used for logging.</span>

<span class=sd>    Returns:</span>
<span class=sd>        list[str]: List of command arguments.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>command_args</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=n>target_par</span> <span class=o>=</span> <span class=n>target_par</span> <span class=ow>or</span> <span class=mf>1.0</span>
    <span class=n>input_par</span> <span class=o>=</span> <span class=mf>1.0</span>

    <span class=n>input_height</span><span class=p>,</span> <span class=n>input_width</span><span class=p>,</span> <span class=n>stream_input_par</span> <span class=o>=</span> <span class=n>_get_image_dimensions</span><span class=p>(</span>
        <span class=n>application</span><span class=p>,</span> <span class=n>input_path</span><span class=p>,</span> <span class=n>log</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>stream_input_par</span><span class=p>:</span>
        <span class=n>input_par</span> <span class=o>=</span> <span class=p>(</span>
            <span class=nb>float</span><span class=p>(</span><span class=n>stream_input_par</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s2>&quot;:&quot;</span><span class=p>)[</span><span class=mi>0</span><span class=p>])</span>
            <span class=o>/</span> <span class=nb>float</span><span class=p>(</span><span class=n>stream_input_par</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s2>&quot;:&quot;</span><span class=p>)[</span><span class=mi>1</span><span class=p>])</span>
        <span class=p>)</span>
    <span class=c1># recalculating input and target width</span>
    <span class=n>input_width</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>input_width</span> <span class=o>*</span> <span class=n>input_par</span><span class=p>)</span>
    <span class=n>target_width</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>target_width</span> <span class=o>*</span> <span class=n>target_par</span><span class=p>)</span>

    <span class=c1># calculate aspect ratios</span>
    <span class=n>target_aspect</span> <span class=o>=</span> <span class=nb>float</span><span class=p>(</span><span class=n>target_width</span><span class=p>)</span> <span class=o>/</span> <span class=n>target_height</span>
    <span class=n>input_aspect</span> <span class=o>=</span> <span class=nb>float</span><span class=p>(</span><span class=n>input_width</span><span class=p>)</span> <span class=o>/</span> <span class=n>input_height</span>

    <span class=c1># calculate scale size</span>
    <span class=n>scale_size</span> <span class=o>=</span> <span class=nb>float</span><span class=p>(</span><span class=n>input_width</span><span class=p>)</span> <span class=o>/</span> <span class=n>target_width</span>
    <span class=k>if</span> <span class=n>input_aspect</span> <span class=o>&lt;</span> <span class=n>target_aspect</span><span class=p>:</span>
        <span class=n>scale_size</span> <span class=o>=</span> <span class=nb>float</span><span class=p>(</span><span class=n>input_height</span><span class=p>)</span> <span class=o>/</span> <span class=n>target_height</span>

    <span class=c1># calculate rescaled width and height</span>
    <span class=n>rescaled_width</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>input_width</span> <span class=o>/</span> <span class=n>scale_size</span><span class=p>)</span>
    <span class=n>rescaled_height</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>input_height</span> <span class=o>/</span> <span class=n>scale_size</span><span class=p>)</span>

    <span class=c1># calculate width and height shift</span>
    <span class=n>rescaled_width_shift</span> <span class=o>=</span> <span class=nb>int</span><span class=p>((</span><span class=n>target_width</span> <span class=o>-</span> <span class=n>rescaled_width</span><span class=p>)</span> <span class=o>/</span> <span class=mi>2</span><span class=p>)</span>
    <span class=n>rescaled_height_shift</span> <span class=o>=</span> <span class=nb>int</span><span class=p>((</span><span class=n>target_height</span> <span class=o>-</span> <span class=n>rescaled_height</span><span class=p>)</span> <span class=o>/</span> <span class=mi>2</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>application</span> <span class=o>==</span> <span class=s2>&quot;ffmpeg&quot;</span><span class=p>:</span>
        <span class=c1># create scale command</span>
        <span class=n>scale</span> <span class=o>=</span> <span class=s2>&quot;scale=</span><span class=si>{0}</span><span class=s2>:</span><span class=si>{1}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>input_width</span><span class=p>,</span> <span class=n>input_height</span><span class=p>)</span>
        <span class=n>pad</span> <span class=o>=</span> <span class=s2>&quot;pad=</span><span class=si>{0}</span><span class=s2>:</span><span class=si>{1}</span><span class=s2>:(</span><span class=si>{2}</span><span class=s2>-iw)/2:(</span><span class=si>{3}</span><span class=s2>-ih)/2&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
            <span class=n>target_width</span><span class=p>,</span>
            <span class=n>target_height</span><span class=p>,</span>
            <span class=n>target_width</span><span class=p>,</span>
            <span class=n>target_height</span>
        <span class=p>)</span>
        <span class=k>if</span> <span class=n>input_width</span> <span class=o>&gt;</span> <span class=n>target_width</span> <span class=ow>or</span> <span class=n>input_height</span> <span class=o>&gt;</span> <span class=n>target_height</span><span class=p>:</span>
            <span class=n>scale</span> <span class=o>=</span> <span class=s2>&quot;scale=</span><span class=si>{0}</span><span class=s2>:</span><span class=si>{1}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>rescaled_width</span><span class=p>,</span> <span class=n>rescaled_height</span><span class=p>)</span>
            <span class=n>pad</span> <span class=o>=</span> <span class=s2>&quot;pad=</span><span class=si>{0}</span><span class=s2>:</span><span class=si>{1}</span><span class=s2>:</span><span class=si>{2}</span><span class=s2>:</span><span class=si>{3}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                <span class=n>target_width</span><span class=p>,</span>
                <span class=n>target_height</span><span class=p>,</span>
                <span class=n>rescaled_width_shift</span><span class=p>,</span>
                <span class=n>rescaled_height_shift</span>
            <span class=p>)</span>

        <span class=k>if</span> <span class=n>bg_color</span><span class=p>:</span>
            <span class=n>color</span> <span class=o>=</span> <span class=n>convert_color_values</span><span class=p>(</span><span class=n>application</span><span class=p>,</span> <span class=n>bg_color</span><span class=p>)</span>
            <span class=n>pad</span> <span class=o>+=</span> <span class=s2>&quot;:</span><span class=si>{0}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>color</span><span class=p>)</span>
        <span class=n>command_args</span><span class=o>.</span><span class=n>extend</span><span class=p>([</span><span class=s2>&quot;-vf&quot;</span><span class=p>,</span> <span class=s2>&quot;</span><span class=si>{0}</span><span class=s2>,</span><span class=si>{1}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>scale</span><span class=p>,</span> <span class=n>pad</span><span class=p>)])</span>

    <span class=k>elif</span> <span class=n>application</span> <span class=o>==</span> <span class=s2>&quot;oiiotool&quot;</span><span class=p>:</span>
        <span class=n>input_info</span> <span class=o>=</span> <span class=n>get_oiio_info_for_input</span><span class=p>(</span><span class=n>input_path</span><span class=p>,</span> <span class=n>logger</span><span class=o>=</span><span class=n>log</span><span class=p>)</span>
        <span class=c1># Collect channels to export</span>
        <span class=n>_</span><span class=p>,</span> <span class=n>channels_arg</span> <span class=o>=</span> <span class=n>get_oiio_input_and_channel_args</span><span class=p>(</span>
            <span class=n>input_info</span><span class=p>,</span> <span class=n>alpha_default</span><span class=o>=</span><span class=mf>1.0</span><span class=p>)</span>

        <span class=n>command_args</span><span class=o>.</span><span class=n>extend</span><span class=p>([</span>
            <span class=c1># Tell oiiotool which channels should be put to top stack</span>
            <span class=c1>#   (and output)</span>
            <span class=s2>&quot;--ch&quot;</span><span class=p>,</span> <span class=n>channels_arg</span><span class=p>,</span>
            <span class=c1># Use first subimage</span>
            <span class=s2>&quot;--subimage&quot;</span><span class=p>,</span> <span class=s2>&quot;0&quot;</span>
        <span class=p>])</span>

        <span class=k>if</span> <span class=n>input_par</span> <span class=o>!=</span> <span class=mf>1.0</span><span class=p>:</span>
            <span class=n>command_args</span><span class=o>.</span><span class=n>extend</span><span class=p>([</span><span class=s2>&quot;--pixelaspect&quot;</span><span class=p>,</span> <span class=s2>&quot;1&quot;</span><span class=p>])</span>

        <span class=n>width_shift</span> <span class=o>=</span> <span class=nb>int</span><span class=p>((</span><span class=n>target_width</span> <span class=o>-</span> <span class=n>input_width</span><span class=p>)</span> <span class=o>/</span> <span class=mi>2</span><span class=p>)</span>
        <span class=n>height_shift</span> <span class=o>=</span> <span class=nb>int</span><span class=p>((</span><span class=n>target_height</span> <span class=o>-</span> <span class=n>input_height</span><span class=p>)</span> <span class=o>/</span> <span class=mi>2</span><span class=p>)</span>

        <span class=c1># default resample is not scaling source image</span>
        <span class=n>resample</span> <span class=o>=</span> <span class=p>[</span>
            <span class=s2>&quot;--resize&quot;</span><span class=p>,</span>
            <span class=s2>&quot;</span><span class=si>{0}</span><span class=s2>x</span><span class=si>{1}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>input_width</span><span class=p>,</span> <span class=n>input_height</span><span class=p>),</span>
            <span class=s2>&quot;--origin&quot;</span><span class=p>,</span>
            <span class=s2>&quot;+</span><span class=si>{0}</span><span class=s2>+</span><span class=si>{1}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>width_shift</span><span class=p>,</span> <span class=n>height_shift</span><span class=p>),</span>
        <span class=p>]</span>
        <span class=c1># scaled source image to target size</span>
        <span class=k>if</span> <span class=n>input_width</span> <span class=o>&gt;</span> <span class=n>target_width</span> <span class=ow>or</span> <span class=n>input_height</span> <span class=o>&gt;</span> <span class=n>target_height</span><span class=p>:</span>
            <span class=c1># form resample command</span>
            <span class=n>resample</span> <span class=o>=</span> <span class=p>[</span>
                <span class=s2>&quot;--resize:filter=lanczos3&quot;</span><span class=p>,</span>
                <span class=s2>&quot;</span><span class=si>{0}</span><span class=s2>x</span><span class=si>{1}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>rescaled_width</span><span class=p>,</span> <span class=n>rescaled_height</span><span class=p>),</span>
                <span class=s2>&quot;--origin&quot;</span><span class=p>,</span>
                <span class=s2>&quot;+</span><span class=si>{0}</span><span class=s2>+</span><span class=si>{1}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>rescaled_width_shift</span><span class=p>,</span> <span class=n>rescaled_height_shift</span><span class=p>),</span>
            <span class=p>]</span>
        <span class=n>command_args</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>resample</span><span class=p>)</span>

        <span class=n>fullsize</span> <span class=o>=</span> <span class=p>[</span>
            <span class=s2>&quot;--fullsize&quot;</span><span class=p>,</span>
            <span class=s2>&quot;</span><span class=si>{0}</span><span class=s2>x</span><span class=si>{1}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>target_width</span><span class=p>,</span> <span class=n>target_height</span><span class=p>)</span>
        <span class=p>]</span>
        <span class=k>if</span> <span class=n>bg_color</span><span class=p>:</span>
            <span class=n>color</span> <span class=o>=</span> <span class=n>convert_color_values</span><span class=p>(</span><span class=n>application</span><span class=p>,</span> <span class=n>bg_color</span><span class=p>)</span>

            <span class=n>fullsize</span><span class=o>.</span><span class=n>extend</span><span class=p>([</span>
                <span class=s2>&quot;--pattern&quot;</span><span class=p>,</span>
                <span class=s2>&quot;constant:color=</span><span class=si>{0}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>color</span><span class=p>),</span>
                <span class=s2>&quot;</span><span class=si>{0}</span><span class=s2>x</span><span class=si>{1}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>target_width</span><span class=p>,</span> <span class=n>target_height</span><span class=p>),</span>
                <span class=s2>&quot;4&quot;</span><span class=p>,</span>  <span class=c1># 4 channels</span>
                <span class=s2>&quot;--over&quot;</span>
            <span class=p>])</span>
        <span class=n>command_args</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>fullsize</span><span class=p>)</span>

    <span class=k>else</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
            <span class=s2>&quot;</span><span class=se>\&quot;</span><span class=s2>application</span><span class=se>\&quot;</span><span class=s2> input argument should &quot;</span>
            <span class=s2>&quot;be either </span><span class=se>\&quot;</span><span class=s2>ffmpeg</span><span class=se>\&quot;</span><span class=s2> or </span><span class=se>\&quot;</span><span class=s2>oiiotool</span><span class=se>\&quot;</span><span class=s2>&quot;</span>
        <span class=p>)</span>

    <span class=k>return</span> <span class=n>command_args</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.get_settings_variant class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_settings_variant</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>Get AYON settings variant.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Settings variant.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/ayon_info.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_settings_variant</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get AYON settings variant.</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: Settings variant.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=n>is_dev_mode_enabled</span><span class=p>():</span>
        <span class=k>return</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=p>[</span><span class=s2>&quot;AYON_BUNDLE_NAME&quot;</span><span class=p>]</span>

    <span class=k>if</span> <span class=n>is_staging_enabled</span><span class=p>():</span>
        <span class=k>return</span> <span class=s2>&quot;staging&quot;</span>

    <span class=k>return</span> <span class=s2>&quot;production&quot;</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.get_timestamp class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_timestamp</span><span class=p>(</span><span class=n>datetime_obj</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Get standardized timestamp from datetime object.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>datetime_obj</code> </td> <td> <code><span title=datetime.datetime>datetime</span></code> </td> <td> <div class=doc-md-description> <p>Object of datetime. Current time is used if not passed.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/dateutils.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>79</span>
<span class=normal>80</span>
<span class=normal>81</span>
<span class=normal>82</span>
<span class=normal>83</span>
<span class=normal>84</span>
<span class=normal>85</span>
<span class=normal>86</span>
<span class=normal>87</span>
<span class=normal>88</span>
<span class=normal>89</span>
<span class=normal>90</span>
<span class=normal>91</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_timestamp</span><span class=p>(</span><span class=n>datetime_obj</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get standardized timestamp from datetime object.</span>

<span class=sd>    Args:</span>
<span class=sd>        datetime_obj (datetime.datetime): Object of datetime. Current time</span>
<span class=sd>            is used if not passed.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>if</span> <span class=n>datetime_obj</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>datetime_obj</span> <span class=o>=</span> <span class=n>datetime</span><span class=o>.</span><span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>()</span>
    <span class=k>return</span> <span class=n>datetime_obj</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span>
        <span class=s2>&quot;%Y%m</span><span class=si>%d</span><span class=s2>T%H%M%SZ&quot;</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.get_transcode_temp_directory class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_transcode_temp_directory</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>Creates temporary folder for transcoding.</p> <p>Its local, in case of farm it is 'local' to the farm machine.</p> <p>Should be much faster, needs to be cleaned up later.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/transcoding.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_transcode_temp_directory</span><span class=p>():</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Creates temporary folder for transcoding.</span>

<span class=sd>    Its local, in case of farm it is &#39;local&#39; to the farm machine.</span>

<span class=sd>    Should be much faster, needs to be cleaned up later.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>return</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>normpath</span><span class=p>(</span>
        <span class=n>tempfile</span><span class=o>.</span><span class=n>mkdtemp</span><span class=p>(</span><span class=n>prefix</span><span class=o>=</span><span class=s2>&quot;op_transcoding_&quot;</span><span class=p>)</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.get_version_from_path class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_version_from_path</span><span class=p>(</span><span class=n>file</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Find version number in file path string.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>file</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>file path</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>version number in string ('001')</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/path_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_version_from_path</span><span class=p>(</span><span class=n>file</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Find version number in file path string.</span>

<span class=sd>    Args:</span>
<span class=sd>        file (str): file path</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: version number in string (&#39;001&#39;)</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>pattern</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>compile</span><span class=p>(</span><span class=sa>r</span><span class=s2>&quot;[\._]v([0-9]+)&quot;</span><span class=p>,</span> <span class=n>re</span><span class=o>.</span><span class=n>IGNORECASE</span><span class=p>)</span>
    <span class=k>try</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>pattern</span><span class=o>.</span><span class=n>findall</span><span class=p>(</span><span class=n>file</span><span class=p>)[</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span>
    <span class=k>except</span> <span class=ne>IndexError</span><span class=p>:</span>
        <span class=n>log</span><span class=o>.</span><span class=n>error</span><span class=p>(</span>
            <span class=s2>&quot;templates:get_version_from_workfile:&quot;</span>
            <span class=s2>&quot;`</span><span class=si>{}</span><span class=s2>` missing version string.&quot;</span>
            <span class=s2>&quot;Example `v004`&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>file</span><span class=p>)</span>
        <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.import_filepath class="doc doc-heading"> <code class="highlight language-python"><span class=n>import_filepath</span><span class=p>(</span><span class=n>filepath</span><span class=p>,</span> <span class=n>module_name</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>sys_module_name</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Import python file as python module.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>filepath</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Path to python file.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>module_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Name of loaded module. Only for Python 3. By default is filled with filename of filepath.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>sys_module_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Name of module in <code>sys.modules</code> where to store loaded module. By default is None so module is not added to <code>sys.modules</code>.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p>Todo (antirotor): We should add the module to the sys.modules always but we need to be careful about it and test it properly.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/python_module_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>import_filepath</span><span class=p>(</span>
        <span class=n>filepath</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
        <span class=n>module_name</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
        <span class=n>sys_module_name</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>types</span><span class=o>.</span><span class=n>ModuleType</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Import python file as python module.</span>

<span class=sd>    Args:</span>
<span class=sd>        filepath (str): Path to python file.</span>
<span class=sd>        module_name (str): Name of loaded module. Only for Python 3. By default</span>
<span class=sd>            is filled with filename of filepath.</span>
<span class=sd>        sys_module_name (str): Name of module in `sys.modules` where to store</span>
<span class=sd>            loaded module. By default is None so module is not added to</span>
<span class=sd>            `sys.modules`.</span>

<span class=sd>    Todo (antirotor): We should add the module to the sys.modules always but</span>
<span class=sd>        we need to be careful about it and test it properly.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=n>module_name</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>module_name</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>splitext</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>basename</span><span class=p>(</span><span class=n>filepath</span><span class=p>))[</span><span class=mi>0</span><span class=p>]</span>

    <span class=c1># Prepare module object where content of file will be parsed</span>
    <span class=n>module</span> <span class=o>=</span> <span class=n>types</span><span class=o>.</span><span class=n>ModuleType</span><span class=p>(</span><span class=n>module_name</span><span class=p>)</span>
    <span class=n>module</span><span class=o>.</span><span class=vm>__file__</span> <span class=o>=</span> <span class=n>filepath</span>

    <span class=c1># Use loader so module has full specs</span>
    <span class=n>module_loader</span> <span class=o>=</span> <span class=n>importlib</span><span class=o>.</span><span class=n>machinery</span><span class=o>.</span><span class=n>SourceFileLoader</span><span class=p>(</span>
        <span class=n>module_name</span><span class=p>,</span> <span class=n>filepath</span>
    <span class=p>)</span>
    <span class=c1># only add to sys.modules if requested</span>
    <span class=k>if</span> <span class=n>sys_module_name</span><span class=p>:</span>
        <span class=n>sys</span><span class=o>.</span><span class=n>modules</span><span class=p>[</span><span class=n>sys_module_name</span><span class=p>]</span> <span class=o>=</span> <span class=n>module</span>
    <span class=n>module_loader</span><span class=o>.</span><span class=n>exec_module</span><span class=p>(</span><span class=n>module</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>module</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.import_module_from_dirpath class="doc doc-heading"> <code class="highlight language-python"><span class=n>import_module_from_dirpath</span><span class=p>(</span><span class=n>dirpath</span><span class=p>,</span> <span class=n>folder_name</span><span class=p>,</span> <span class=n>dst_module_name</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Import passed directory as a python module.</p> <p>Imported module can be assigned as a child attribute of already loaded module from <code>sys.modules</code> if has support of <code>setattr</code>. That is not default behavior of python modules so parent module must be a custom module with that ability.</p> <p>It is not possible to reimport already cached module. If you need to reimport module you have to remove it from caches manually.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>dirpath</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Parent directory path of loaded folder.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>folder_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Folder name which should be imported inside passed directory.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>dst_module_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Parent module name under which can be loaded module added.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/python_module_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>import_module_from_dirpath</span><span class=p>(</span>
        <span class=n>dirpath</span><span class=p>,</span> <span class=n>folder_name</span><span class=p>,</span> <span class=n>dst_module_name</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Import passed directory as a python module.</span>

<span class=sd>    Imported module can be assigned as a child attribute of already loaded</span>
<span class=sd>    module from `sys.modules` if has support of `setattr`. That is not default</span>
<span class=sd>    behavior of python modules so parent module must be a custom module with</span>
<span class=sd>    that ability.</span>

<span class=sd>    It is not possible to reimport already cached module. If you need to</span>
<span class=sd>    reimport module you have to remove it from caches manually.</span>

<span class=sd>    Args:</span>
<span class=sd>        dirpath (str): Parent directory path of loaded folder.</span>
<span class=sd>        folder_name (str): Folder name which should be imported inside passed</span>
<span class=sd>            directory.</span>
<span class=sd>        dst_module_name (str): Parent module name under which can be loaded</span>
<span class=sd>            module added.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=c1># Import passed dirpath as python module</span>
    <span class=k>if</span> <span class=n>dst_module_name</span><span class=p>:</span>
        <span class=n>full_module_name</span> <span class=o>=</span> <span class=s2>&quot;</span><span class=si>{}</span><span class=s2>.</span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>dst_module_name</span><span class=p>,</span> <span class=n>folder_name</span><span class=p>)</span>
        <span class=n>dst_module</span> <span class=o>=</span> <span class=n>sys</span><span class=o>.</span><span class=n>modules</span><span class=p>[</span><span class=n>dst_module_name</span><span class=p>]</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=n>full_module_name</span> <span class=o>=</span> <span class=n>folder_name</span>
        <span class=n>dst_module</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=c1># Skip import if is already imported</span>
    <span class=k>if</span> <span class=n>full_module_name</span> <span class=ow>in</span> <span class=n>sys</span><span class=o>.</span><span class=n>modules</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>sys</span><span class=o>.</span><span class=n>modules</span><span class=p>[</span><span class=n>full_module_name</span><span class=p>]</span>

    <span class=kn>import</span><span class=w> </span><span class=nn>importlib.util</span>
    <span class=kn>from</span><span class=w> </span><span class=nn>importlib._bootstrap_external</span><span class=w> </span><span class=kn>import</span> <span class=n>PathFinder</span>

    <span class=c1># Find loader for passed path and name</span>
    <span class=n>loader</span> <span class=o>=</span> <span class=n>PathFinder</span><span class=o>.</span><span class=n>find_module</span><span class=p>(</span><span class=n>full_module_name</span><span class=p>,</span> <span class=p>[</span><span class=n>dirpath</span><span class=p>])</span>

    <span class=c1># Load specs of module</span>
    <span class=n>spec</span> <span class=o>=</span> <span class=n>importlib</span><span class=o>.</span><span class=n>util</span><span class=o>.</span><span class=n>spec_from_loader</span><span class=p>(</span>
        <span class=n>full_module_name</span><span class=p>,</span> <span class=n>loader</span><span class=p>,</span> <span class=n>origin</span><span class=o>=</span><span class=n>dirpath</span>
    <span class=p>)</span>

    <span class=c1># Create module based on specs</span>
    <span class=n>module</span> <span class=o>=</span> <span class=n>importlib</span><span class=o>.</span><span class=n>util</span><span class=o>.</span><span class=n>module_from_spec</span><span class=p>(</span><span class=n>spec</span><span class=p>)</span>

    <span class=c1># Store module to destination module and `sys.modules`</span>
    <span class=c1># WARNING this mus be done before module execution</span>
    <span class=k>if</span> <span class=n>dst_module</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
        <span class=nb>setattr</span><span class=p>(</span><span class=n>dst_module</span><span class=p>,</span> <span class=n>folder_name</span><span class=p>,</span> <span class=n>module</span><span class=p>)</span>

    <span class=n>sys</span><span class=o>.</span><span class=n>modules</span><span class=p>[</span><span class=n>full_module_name</span><span class=p>]</span> <span class=o>=</span> <span class=n>module</span>

    <span class=c1># Execute module import</span>
    <span class=n>loader</span><span class=o>.</span><span class=n>exec_module</span><span class=p>(</span><span class=n>module</span><span class=p>)</span>

    <span class=k>return</span> <span class=n>module</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.initialize_ayon_connection class="doc doc-heading"> <code class="highlight language-python"><span class=n>initialize_ayon_connection</span><span class=p>(</span><span class=n>force</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Initialize global AYON api connection.</p> <p>Create global connection in ayon_api module and set site id and client version. Is silently skipped if already happened.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>force</code> </td> <td> <code><span title=Optional>Optional</span>[<span title=bool>bool</span>]</code> </td> <td> <div class=doc-md-description> <p>Force reinitialize connection. Defaults to False.</p> </div> </td> <td> <code>False</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/ayon_connection.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>initialize_ayon_connection</span><span class=p>(</span><span class=n>force</span><span class=o>=</span><span class=kc>False</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Initialize global AYON api connection.</span>

<span class=sd>    Create global connection in ayon_api module and set site id</span>
<span class=sd>        and client version.</span>
<span class=sd>    Is silently skipped if already happened.</span>

<span class=sd>    Args:</span>
<span class=sd>        force (Optional[bool]): Force reinitialize connection.</span>
<span class=sd>            Defaults to False.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>force</span> <span class=ow>and</span> <span class=n>_Cache</span><span class=o>.</span><span class=n>initialized</span><span class=p>:</span>
        <span class=k>return</span>

    <span class=n>_Cache</span><span class=o>.</span><span class=n>initialized</span> <span class=o>=</span> <span class=kc>True</span>
    <span class=n>ayon_api_version</span> <span class=o>=</span> <span class=p>(</span>
        <span class=n>semver</span><span class=o>.</span><span class=n>VersionInfo</span><span class=o>.</span><span class=n>parse</span><span class=p>(</span><span class=n>ayon_api</span><span class=o>.</span><span class=n>__version__</span><span class=p>)</span><span class=o>.</span><span class=n>to_tuple</span><span class=p>()</span>
    <span class=p>)</span>
    <span class=c1># TODO remove mokey patching after when AYON api is safely updated</span>
    <span class=n>fix_before_1_0_2</span> <span class=o>=</span> <span class=n>ayon_api_version</span> <span class=o>&lt;</span> <span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span>
    <span class=c1># Monkey patching to fix &#39;get_last_version_by_product_name&#39;</span>
    <span class=k>if</span> <span class=n>fix_before_1_0_2</span><span class=p>:</span>
        <span class=n>ayon_api</span><span class=o>.</span><span class=n>ServerAPI</span><span class=o>.</span><span class=n>get_last_versions</span> <span class=o>=</span> <span class=p>(</span>
            <span class=n>_new_get_last_versions</span>
        <span class=p>)</span>
        <span class=n>ayon_api</span><span class=o>.</span><span class=n>ServerAPI</span><span class=o>.</span><span class=n>get_last_version_by_product_id</span> <span class=o>=</span> <span class=p>(</span>
            <span class=n>_new_get_last_version_by_product_id</span>
        <span class=p>)</span>
        <span class=n>ayon_api</span><span class=o>.</span><span class=n>ServerAPI</span><span class=o>.</span><span class=n>get_last_version_by_product_name</span> <span class=o>=</span> <span class=p>(</span>
            <span class=n>_new_get_last_version_by_product_name</span>
        <span class=p>)</span>

    <span class=n>site_id</span> <span class=o>=</span> <span class=n>get_local_site_id</span><span class=p>()</span>
    <span class=n>version</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>getenv</span><span class=p>(</span><span class=s2>&quot;AYON_VERSION&quot;</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>is_connection_created</span><span class=p>():</span>
        <span class=n>con</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_server_api_connection</span><span class=p>()</span>
        <span class=c1># Monkey patching to fix &#39;get_last_version_by_product_name&#39;</span>
        <span class=k>if</span> <span class=n>fix_before_1_0_2</span><span class=p>:</span>
            <span class=k>def</span><span class=w> </span><span class=nf>_lvs_wrapper</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
                <span class=k>return</span> <span class=n>_new_get_last_versions</span><span class=p>(</span>
                    <span class=n>con</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span>
                <span class=p>)</span>

            <span class=k>def</span><span class=w> </span><span class=nf>_lv_by_pi_wrapper</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
                <span class=k>return</span> <span class=n>_new_get_last_version_by_product_id</span><span class=p>(</span>
                    <span class=n>con</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span>
                <span class=p>)</span>

            <span class=k>def</span><span class=w> </span><span class=nf>_lv_by_pn_wrapper</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
                <span class=k>return</span> <span class=n>_new_get_last_version_by_product_name</span><span class=p>(</span>
                    <span class=n>con</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span>
                <span class=p>)</span>
            <span class=n>con</span><span class=o>.</span><span class=n>get_last_versions</span> <span class=o>=</span> <span class=n>_lvs_wrapper</span>
            <span class=n>con</span><span class=o>.</span><span class=n>get_last_version_by_product_id</span> <span class=o>=</span> <span class=n>_lv_by_pi_wrapper</span>
            <span class=n>con</span><span class=o>.</span><span class=n>get_last_version_by_product_name</span> <span class=o>=</span> <span class=n>_lv_by_pn_wrapper</span>
        <span class=n>con</span><span class=o>.</span><span class=n>set_site_id</span><span class=p>(</span><span class=n>site_id</span><span class=p>)</span>
        <span class=n>con</span><span class=o>.</span><span class=n>set_client_version</span><span class=p>(</span><span class=n>version</span><span class=p>)</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=n>ayon_api</span><span class=o>.</span><span class=n>create_connection</span><span class=p>(</span><span class=n>site_id</span><span class=p>,</span> <span class=n>version</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.is_dev_mode_enabled class="doc doc-heading"> <code class="highlight language-python"><span class=n>is_dev_mode_enabled</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>Dev mode is enabled in AYON.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>bool</code></td> <td> <code><span title=bool>bool</span></code> </td> <td> <div class=doc-md-description> <p>True if dev mode is enabled.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/ayon_info.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>is_dev_mode_enabled</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Dev mode is enabled in AYON.</span>

<span class=sd>    Returns:</span>
<span class=sd>        bool: True if dev mode is enabled.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=n>os</span><span class=o>.</span><span class=n>getenv</span><span class=p>(</span><span class=s2>&quot;AYON_USE_DEV&quot;</span><span class=p>)</span> <span class=o>==</span> <span class=s2>&quot;1&quot;</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.is_func_signature_supported class="doc doc-heading"> <code class="highlight language-python"><span class=n>is_func_signature_supported</span><span class=p>(</span><span class=n>func</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Check if a function signature supports passed args and kwargs.</p> <p>This check does not actually call the function, just look if function can be called with the arguments.</p> <details class=notes open> <summary>Notes</summary> <p>This does NOT check if the function would work with passed arguments only if they can be passed in. If function have <em>args, </em>*kwargs in parameters, this will always return 'True'.</p> </details> <details class=example open> <summary>Example</summary> <blockquote> <blockquote> <blockquote> <p>def my_function(my_number): ... return my_number + 1 ... is_func_signature_supported(my_function, 1) True is_func_signature_supported(my_function, 1, 2) False is_func_signature_supported(my_function, my_number=1) True is_func_signature_supported(my_function, number=1) False is_func_signature_supported(my_function, "string") True def my_other_function(<em>args, </em><em>kwargs): ... my_function(</em>args, **kwargs) ... is_func_signature_supported( ... my_other_function, ... "string", ... 1, ... other=None ... ) True</p> </blockquote> </blockquote> </blockquote> </details> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>func</code> </td> <td> <code><span title=Callable>Callable</span></code> </td> <td> <div class=doc-md-description> <p>A function where the signature should be tested.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>*args</code> </td> <td> <code><span title=Any>Any</span></code> </td> <td> <div class=doc-md-description> <p>Positional arguments for function signature.</p> </div> </td> <td> <code>()</code> </td> </tr> <tr class=doc-section-item> <td> <code>**kwargs</code> </td> <td> <code><span title=Any>Any</span></code> </td> <td> <div class=doc-md-description> <p>Keyword arguments for function signature.</p> </div> </td> <td> <code>{}</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>bool</code></td> <td> </td> <td> <div class=doc-md-description> <p>Function can pass in arguments.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/python_module_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>is_func_signature_supported</span><span class=p>(</span><span class=n>func</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Check if a function signature supports passed args and kwargs.</span>

<span class=sd>    This check does not actually call the function, just look if function can</span>
<span class=sd>    be called with the arguments.</span>

<span class=sd>    Notes:</span>
<span class=sd>        This does NOT check if the function would work with passed arguments</span>
<span class=sd>            only if they can be passed in. If function have *args, **kwargs</span>
<span class=sd>            in parameters, this will always return &#39;True&#39;.</span>

<span class=sd>    Example:</span>
<span class=sd>        &gt;&gt;&gt; def my_function(my_number):</span>
<span class=sd>        ...     return my_number + 1</span>
<span class=sd>        ...</span>
<span class=sd>        &gt;&gt;&gt; is_func_signature_supported(my_function, 1)</span>
<span class=sd>        True</span>
<span class=sd>        &gt;&gt;&gt; is_func_signature_supported(my_function, 1, 2)</span>
<span class=sd>        False</span>
<span class=sd>        &gt;&gt;&gt; is_func_signature_supported(my_function, my_number=1)</span>
<span class=sd>        True</span>
<span class=sd>        &gt;&gt;&gt; is_func_signature_supported(my_function, number=1)</span>
<span class=sd>        False</span>
<span class=sd>        &gt;&gt;&gt; is_func_signature_supported(my_function, &quot;string&quot;)</span>
<span class=sd>        True</span>
<span class=sd>        &gt;&gt;&gt; def my_other_function(*args, **kwargs):</span>
<span class=sd>        ...     my_function(*args, **kwargs)</span>
<span class=sd>        ...</span>
<span class=sd>        &gt;&gt;&gt; is_func_signature_supported(</span>
<span class=sd>        ...     my_other_function,</span>
<span class=sd>        ...     &quot;string&quot;,</span>
<span class=sd>        ...     1,</span>
<span class=sd>        ...     other=None</span>
<span class=sd>        ... )</span>
<span class=sd>        True</span>

<span class=sd>    Args:</span>
<span class=sd>        func (Callable): A function where the signature should be tested.</span>
<span class=sd>        *args (Any): Positional arguments for function signature.</span>
<span class=sd>        **kwargs (Any): Keyword arguments for function signature.</span>

<span class=sd>    Returns:</span>
<span class=sd>        bool: Function can pass in arguments.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>sig</span> <span class=o>=</span> <span class=n>inspect</span><span class=o>.</span><span class=n>signature</span><span class=p>(</span><span class=n>func</span><span class=p>)</span>
    <span class=k>try</span><span class=p>:</span>
        <span class=n>sig</span><span class=o>.</span><span class=n>bind</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
        <span class=k>return</span> <span class=kc>True</span>
    <span class=k>except</span> <span class=ne>TypeError</span><span class=p>:</span>
        <span class=k>pass</span>
    <span class=k>return</span> <span class=kc>False</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.is_in_ayon_launcher_process class="doc doc-heading"> <code class="highlight language-python"><span class=n>is_in_ayon_launcher_process</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>Determine if current process is running from AYON launcher.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>bool</code></td> <td> </td> <td> <div class=doc-md-description> <p>True if running from AYON launcher.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/ayon_info.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>is_in_ayon_launcher_process</span><span class=p>():</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Determine if current process is running from AYON launcher.</span>

<span class=sd>    Returns:</span>
<span class=sd>        bool: True if running from AYON launcher.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>ayon_executable_path</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>normpath</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=p>[</span><span class=s2>&quot;AYON_EXECUTABLE&quot;</span><span class=p>])</span>
    <span class=n>executable_path</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>normpath</span><span class=p>(</span><span class=n>sys</span><span class=o>.</span><span class=n>executable</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>ayon_executable_path</span> <span class=o>==</span> <span class=n>executable_path</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.is_in_tests class="doc doc-heading"> <code class="highlight language-python"><span class=n>is_in_tests</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>Process is running in automatic tests mode.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>bool</code></td> <td> <code><span title=bool>bool</span></code> </td> <td> <div class=doc-md-description> <p>True if running in tests.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/ayon_info.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>89</span>
<span class=normal>90</span>
<span class=normal>91</span>
<span class=normal>92</span>
<span class=normal>93</span>
<span class=normal>94</span>
<span class=normal>95</span>
<span class=normal>96</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>is_in_tests</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Process is running in automatic tests mode.</span>

<span class=sd>    Returns:</span>
<span class=sd>        bool: True if running in tests.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>return</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AYON_IN_TESTS&quot;</span><span class=p>)</span> <span class=o>==</span> <span class=s2>&quot;1&quot;</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.is_oiio_supported class="doc doc-heading"> <code class="highlight language-python"><span class=n>is_oiio_supported</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>Checks if oiiotool is configured for this platform.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>bool</code></td> <td> </td> <td> <div class=doc-md-description> <p>OIIO tool executable is available.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/vendor_bin_utils.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>468</span>
<span class=normal>469</span>
<span class=normal>470</span>
<span class=normal>471</span>
<span class=normal>472</span>
<span class=normal>473</span>
<span class=normal>474</span>
<span class=normal>475</span>
<span class=normal>476</span>
<span class=normal>477</span>
<span class=normal>478</span>
<span class=normal>479</span>
<span class=normal>480</span>
<span class=normal>481</span>
<span class=normal>482</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>is_oiio_supported</span><span class=p>():</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Checks if oiiotool is configured for this platform.</span>

<span class=sd>    Returns:</span>
<span class=sd>        bool: OIIO tool executable is available.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>try</span><span class=p>:</span>
        <span class=n>args</span> <span class=o>=</span> <span class=n>get_oiio_tool_args</span><span class=p>(</span><span class=s2>&quot;oiiotool&quot;</span><span class=p>)</span>
    <span class=k>except</span> <span class=n>ToolNotFoundError</span><span class=p>:</span>
        <span class=n>args</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>args</span><span class=p>:</span>
        <span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;OIIOTool is not configured or not present.&quot;</span><span class=p>)</span>
        <span class=k>return</span> <span class=kc>False</span>
    <span class=k>return</span> <span class=n>_oiio_executable_validation</span><span class=p>(</span><span class=n>args</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.is_running_from_build class="doc doc-heading"> <code class="highlight language-python"><span class=n>is_running_from_build</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>Determine if current process is running from build or code.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>bool</code></td> <td> </td> <td> <div class=doc-md-description> <p>True if running from build.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/ayon_info.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>is_running_from_build</span><span class=p>():</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Determine if current process is running from build or code.</span>

<span class=sd>    Returns:</span>
<span class=sd>        bool: True if running from build.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>executable_path</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=p>[</span><span class=s2>&quot;AYON_EXECUTABLE&quot;</span><span class=p>]</span>
    <span class=n>executable_filename</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>basename</span><span class=p>(</span><span class=n>executable_path</span><span class=p>)</span>
    <span class=k>if</span> <span class=s2>&quot;python&quot;</span> <span class=ow>in</span> <span class=n>executable_filename</span><span class=o>.</span><span class=n>lower</span><span class=p>():</span>
        <span class=k>return</span> <span class=kc>False</span>
    <span class=k>return</span> <span class=kc>True</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.is_using_ayon_console class="doc doc-heading"> <code class="highlight language-python"><span class=n>is_using_ayon_console</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>AYON launcher console executable is used.</p> <p>This function make sense only on Windows platform. For other platforms always returns True. True is also returned if process is running from code.</p> <p>AYON launcher on windows has 2 executable files. First 'ayon_console.exe' works as 'python.exe' executable, the second 'ayon.exe' works as 'pythonw.exe' executable. The difference is way how stdout/stderr is handled (especially when calling subprocess).</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>bool</code></td> <td> </td> <td> <div class=doc-md-description> <p>True if console executable is used.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/ayon_info.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span>
<span class=normal>62</span>
<span class=normal>63</span>
<span class=normal>64</span>
<span class=normal>65</span>
<span class=normal>66</span>
<span class=normal>67</span>
<span class=normal>68</span>
<span class=normal>69</span>
<span class=normal>70</span>
<span class=normal>71</span>
<span class=normal>72</span>
<span class=normal>73</span>
<span class=normal>74</span>
<span class=normal>75</span>
<span class=normal>76</span>
<span class=normal>77</span>
<span class=normal>78</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>is_using_ayon_console</span><span class=p>():</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;AYON launcher console executable is used.</span>

<span class=sd>    This function make sense only on Windows platform. For other platforms</span>
<span class=sd>    always returns True. True is also returned if process is running from</span>
<span class=sd>    code.</span>

<span class=sd>    AYON launcher on windows has 2 executable files. First &#39;ayon_console.exe&#39;</span>
<span class=sd>    works as &#39;python.exe&#39; executable, the second &#39;ayon.exe&#39; works as</span>
<span class=sd>    &#39;pythonw.exe&#39; executable. The difference is way how stdout/stderr is</span>
<span class=sd>    handled (especially when calling subprocess).</span>

<span class=sd>    Returns:</span>
<span class=sd>        bool: True if console executable is used.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=p>(</span>
        <span class=n>platform</span><span class=o>.</span><span class=n>system</span><span class=p>()</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span> <span class=o>!=</span> <span class=s2>&quot;windows&quot;</span>
        <span class=ow>or</span> <span class=n>is_running_from_build</span><span class=p>()</span>
    <span class=p>):</span>
        <span class=k>return</span> <span class=kc>True</span>
    <span class=n>executable_path</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=p>[</span><span class=s2>&quot;AYON_EXECUTABLE&quot;</span><span class=p>]</span>
    <span class=n>executable_filename</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>basename</span><span class=p>(</span><span class=n>executable_path</span><span class=p>)</span>
    <span class=k>return</span> <span class=s2>&quot;ayon_console&quot;</span> <span class=ow>in</span> <span class=n>executable_filename</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.merge_env_variables class="doc doc-heading"> <code class="highlight language-python"><span class=n>merge_env_variables</span><span class=p>(</span><span class=n>src_env</span><span class=p>,</span> <span class=n>dst_env</span><span class=p>,</span> <span class=n>missing_template</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Merge the tools environment with the 'current_env'.</p> <p>This finalizes the join with a current environment by formatting the remainder of dynamic variables with that from the current environment.</p> <p>Remaining missing variables result in an empty value.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>src_env</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>The dynamic environment</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>dst_env</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>The target environment variables mapping to merge the dynamic environment into.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>missing_template</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Argument passed to '_partial_format' during merging. <code>None</code> should keep missing keys unchanged.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=dict>dict</span>[<span title=str>str</span>, <span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>dict[str, str]: The resulting environment after the merge.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/env_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>297</span>
<span class=normal>298</span>
<span class=normal>299</span>
<span class=normal>300</span>
<span class=normal>301</span>
<span class=normal>302</span>
<span class=normal>303</span>
<span class=normal>304</span>
<span class=normal>305</span>
<span class=normal>306</span>
<span class=normal>307</span>
<span class=normal>308</span>
<span class=normal>309</span>
<span class=normal>310</span>
<span class=normal>311</span>
<span class=normal>312</span>
<span class=normal>313</span>
<span class=normal>314</span>
<span class=normal>315</span>
<span class=normal>316</span>
<span class=normal>317</span>
<span class=normal>318</span>
<span class=normal>319</span>
<span class=normal>320</span>
<span class=normal>321</span>
<span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span>
<span class=normal>325</span>
<span class=normal>326</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>merge_env_variables</span><span class=p>(</span>
    <span class=n>src_env</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>str</span><span class=p>],</span>
    <span class=n>dst_env</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>str</span><span class=p>],</span>
    <span class=n>missing_template</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>str</span><span class=p>]:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Merge the tools environment with the &#39;current_env&#39;.</span>

<span class=sd>    This finalizes the join with a current environment by formatting the</span>
<span class=sd>    remainder of dynamic variables with that from the current environment.</span>

<span class=sd>    Remaining missing variables result in an empty value.</span>

<span class=sd>    Args:</span>
<span class=sd>        src_env (dict): The dynamic environment</span>
<span class=sd>        dst_env (dict): The target environment variables mapping to merge</span>
<span class=sd>            the dynamic environment into.</span>
<span class=sd>        missing_template (str): Argument passed to &#39;_partial_format&#39; during</span>
<span class=sd>            merging. `None` should keep missing keys unchanged.</span>

<span class=sd>    Returns:</span>
<span class=sd>        dict[str, str]: The resulting environment after the merge.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>result</span> <span class=o>=</span> <span class=n>dst_env</span><span class=o>.</span><span class=n>copy</span><span class=p>()</span>
    <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>src_env</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
        <span class=n>result</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>_partial_format</span><span class=p>(</span>
            <span class=nb>str</span><span class=p>(</span><span class=n>value</span><span class=p>),</span> <span class=n>dst_env</span><span class=p>,</span> <span class=n>missing_template</span>
        <span class=p>)</span>

    <span class=k>return</span> <span class=n>result</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.modules_from_path class="doc doc-heading"> <code class="highlight language-python"><span class=n>modules_from_path</span><span class=p>(</span><span class=n>folder_path</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Get python scripts as modules from a path.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>path</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Path to folder containing python scripts.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>tuple<list, list>: First list contains successfully imported modules and second list contains tuples of path and exception.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/python_module_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 49</span>
<span class=normal> 50</span>
<span class=normal> 51</span>
<span class=normal> 52</span>
<span class=normal> 53</span>
<span class=normal> 54</span>
<span class=normal> 55</span>
<span class=normal> 56</span>
<span class=normal> 57</span>
<span class=normal> 58</span>
<span class=normal> 59</span>
<span class=normal> 60</span>
<span class=normal> 61</span>
<span class=normal> 62</span>
<span class=normal> 63</span>
<span class=normal> 64</span>
<span class=normal> 65</span>
<span class=normal> 66</span>
<span class=normal> 67</span>
<span class=normal> 68</span>
<span class=normal> 69</span>
<span class=normal> 70</span>
<span class=normal> 71</span>
<span class=normal> 72</span>
<span class=normal> 73</span>
<span class=normal> 74</span>
<span class=normal> 75</span>
<span class=normal> 76</span>
<span class=normal> 77</span>
<span class=normal> 78</span>
<span class=normal> 79</span>
<span class=normal> 80</span>
<span class=normal> 81</span>
<span class=normal> 82</span>
<span class=normal> 83</span>
<span class=normal> 84</span>
<span class=normal> 85</span>
<span class=normal> 86</span>
<span class=normal> 87</span>
<span class=normal> 88</span>
<span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>modules_from_path</span><span class=p>(</span><span class=n>folder_path</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get python scripts as modules from a path.</span>

<span class=sd>    Arguments:</span>
<span class=sd>        path (str): Path to folder containing python scripts.</span>

<span class=sd>    Returns:</span>
<span class=sd>        tuple&lt;list, list&gt;: First list contains successfully imported modules</span>
<span class=sd>            and second list contains tuples of path and exception.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>crashed</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=n>modules</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=n>output</span> <span class=o>=</span> <span class=p>(</span><span class=n>modules</span><span class=p>,</span> <span class=n>crashed</span><span class=p>)</span>
    <span class=c1># Just skip and return empty list if path is not set</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>folder_path</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>output</span>

    <span class=c1># Do not allow relative imports</span>
    <span class=k>if</span> <span class=n>folder_path</span><span class=o>.</span><span class=n>startswith</span><span class=p>(</span><span class=s2>&quot;.&quot;</span><span class=p>):</span>
        <span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>((</span>
            <span class=s2>&quot;BUG: Relative paths are not allowed for security reasons. </span><span class=si>{}</span><span class=s2>&quot;</span>
        <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>folder_path</span><span class=p>))</span>
        <span class=k>return</span> <span class=n>output</span>

    <span class=n>folder_path</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>normpath</span><span class=p>(</span><span class=n>folder_path</span><span class=p>)</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>isdir</span><span class=p>(</span><span class=n>folder_path</span><span class=p>):</span>
        <span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s2>&quot;Not a directory path: </span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>folder_path</span><span class=p>))</span>
        <span class=k>return</span> <span class=n>output</span>

    <span class=k>for</span> <span class=n>filename</span> <span class=ow>in</span> <span class=n>os</span><span class=o>.</span><span class=n>listdir</span><span class=p>(</span><span class=n>folder_path</span><span class=p>):</span>
        <span class=c1># Ignore files which start with underscore</span>
        <span class=k>if</span> <span class=n>filename</span><span class=o>.</span><span class=n>startswith</span><span class=p>(</span><span class=s2>&quot;_&quot;</span><span class=p>):</span>
            <span class=k>continue</span>

        <span class=n>mod_name</span><span class=p>,</span> <span class=n>mod_ext</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>splitext</span><span class=p>(</span><span class=n>filename</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>mod_ext</span> <span class=o>==</span> <span class=s2>&quot;.py&quot;</span><span class=p>:</span>
            <span class=k>continue</span>

        <span class=n>full_path</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>folder_path</span><span class=p>,</span> <span class=n>filename</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>isfile</span><span class=p>(</span><span class=n>full_path</span><span class=p>):</span>
            <span class=k>continue</span>

        <span class=k>try</span><span class=p>:</span>
            <span class=n>module</span> <span class=o>=</span> <span class=n>import_filepath</span><span class=p>(</span><span class=n>full_path</span><span class=p>,</span> <span class=n>mod_name</span><span class=p>)</span>
            <span class=n>modules</span><span class=o>.</span><span class=n>append</span><span class=p>((</span><span class=n>full_path</span><span class=p>,</span> <span class=n>module</span><span class=p>))</span>

        <span class=k>except</span> <span class=ne>Exception</span><span class=p>:</span>
            <span class=n>crashed</span><span class=o>.</span><span class=n>append</span><span class=p>((</span><span class=n>full_path</span><span class=p>,</span> <span class=n>sys</span><span class=o>.</span><span class=n>exc_info</span><span class=p>()))</span>
            <span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
                <span class=s2>&quot;Failed to load path: </span><span class=se>\&quot;</span><span class=si>{0}</span><span class=se>\&quot;</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>full_path</span><span class=p>),</span>
                <span class=n>exc_info</span><span class=o>=</span><span class=kc>True</span>
            <span class=p>)</span>
            <span class=k>continue</span>

    <span class=k>return</span> <span class=n>output</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.path_to_subprocess_arg class="doc doc-heading"> <code class="highlight language-python"><span class=n>path_to_subprocess_arg</span><span class=p>(</span><span class=n>path</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Prepare path for subprocess arguments.</p> <p>Returned path can be wrapped with quotes or kept as is.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>path</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Path to be converted.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>Converted path.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/execute.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>358</span>
<span class=normal>359</span>
<span class=normal>360</span>
<span class=normal>361</span>
<span class=normal>362</span>
<span class=normal>363</span>
<span class=normal>364</span>
<span class=normal>365</span>
<span class=normal>366</span>
<span class=normal>367</span>
<span class=normal>368</span>
<span class=normal>369</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>path_to_subprocess_arg</span><span class=p>(</span><span class=n>path</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Prepare path for subprocess arguments.</span>

<span class=sd>    Returned path can be wrapped with quotes or kept as is.</span>

<span class=sd>    Args:</span>
<span class=sd>        path (str): Path to be converted.</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: Converted path.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>return</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>list2cmdline</span><span class=p>([</span><span class=n>path</span><span class=p>])</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.prepare_template_data class="doc doc-heading"> <code class="highlight language-python"><span class=n>prepare_template_data</span><span class=p>(</span><span class=n>fill_pairs</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Prepares formatted data for filling template.</p> <p>It produces multiple variants of keys (key, Key, KEY) to control format of filled template.</p> <details class=example open> <summary>Example</summary> <blockquote> <blockquote> <blockquote> <p>src_data = { ... "host": "maya", ... } output = prepare_template_data(src_data) sorted(list(output.items())) # sort &amp; list conversion for tests [('HOST', 'MAYA'), ('Host', 'Maya'), ('host', 'maya')]</p> </blockquote> </blockquote> </blockquote> </details> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>fill_pairs</code> </td> <td> <code><span title=Union>Union</span>[<span title=dict>dict</span>[<span title=str>str</span>, <span title=Any>Any</span>], <span title=Iterable>Iterable</span>[<span title=Tuple>Tuple</span>[<span title=str>str</span>, <span title=Any>Any</span>]]]</code> </td> <td> <div class=doc-md-description> <p>The value that are prepared for template.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>dict[str, str]: Prepared values for template.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/plugin_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 69</span>
<span class=normal> 70</span>
<span class=normal> 71</span>
<span class=normal> 72</span>
<span class=normal> 73</span>
<span class=normal> 74</span>
<span class=normal> 75</span>
<span class=normal> 76</span>
<span class=normal> 77</span>
<span class=normal> 78</span>
<span class=normal> 79</span>
<span class=normal> 80</span>
<span class=normal> 81</span>
<span class=normal> 82</span>
<span class=normal> 83</span>
<span class=normal> 84</span>
<span class=normal> 85</span>
<span class=normal> 86</span>
<span class=normal> 87</span>
<span class=normal> 88</span>
<span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>prepare_template_data</span><span class=p>(</span><span class=n>fill_pairs</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Prepares formatted data for filling template.</span>

<span class=sd>    It produces multiple variants of keys (key, Key, KEY) to control</span>
<span class=sd>    format of filled template.</span>

<span class=sd>    Example:</span>
<span class=sd>        &gt;&gt;&gt; src_data = {</span>
<span class=sd>        ...    &quot;host&quot;: &quot;maya&quot;,</span>
<span class=sd>        ... }</span>
<span class=sd>        &gt;&gt;&gt; output = prepare_template_data(src_data)</span>
<span class=sd>        &gt;&gt;&gt; sorted(list(output.items())) # sort &amp; list conversion for tests</span>
<span class=sd>        [(&#39;HOST&#39;, &#39;MAYA&#39;), (&#39;Host&#39;, &#39;Maya&#39;), (&#39;host&#39;, &#39;maya&#39;)]</span>

<span class=sd>    Args:</span>
<span class=sd>        fill_pairs (Union[dict[str, Any], Iterable[Tuple[str, Any]]]): The</span>
<span class=sd>            value that are prepared for template.</span>

<span class=sd>    Returns:</span>
<span class=sd>        dict[str, str]: Prepared values for template.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>valid_items</span> <span class=o>=</span> <span class=n>_separate_keys_and_value</span><span class=p>(</span><span class=n>fill_pairs</span><span class=p>)</span>
    <span class=n>output</span> <span class=o>=</span> <span class=p>{}</span>
    <span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=n>valid_items</span><span class=p>:</span>
        <span class=n>keys</span><span class=p>,</span> <span class=n>value</span> <span class=o>=</span> <span class=n>item</span>
        <span class=c1># Convert only string values</span>
        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
            <span class=n>upper_value</span> <span class=o>=</span> <span class=n>value</span><span class=o>.</span><span class=n>upper</span><span class=p>()</span>
            <span class=n>capitalized_value</span> <span class=o>=</span> <span class=n>_capitalize_value</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>upper_value</span> <span class=o>=</span> <span class=n>capitalized_value</span> <span class=o>=</span> <span class=n>value</span>

        <span class=n>first_key</span> <span class=o>=</span> <span class=n>keys</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>keys</span><span class=p>:</span>
            <span class=n>output</span><span class=p>[</span><span class=n>first_key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>
            <span class=n>output</span><span class=p>[</span><span class=n>first_key</span><span class=o>.</span><span class=n>upper</span><span class=p>()]</span> <span class=o>=</span> <span class=n>upper_value</span>
            <span class=n>output</span><span class=p>[</span><span class=n>first_key</span><span class=o>.</span><span class=n>capitalize</span><span class=p>()]</span> <span class=o>=</span> <span class=n>capitalized_value</span>
            <span class=k>continue</span>

        <span class=c1># Prepare &#39;normal&#39;, &#39;upper&#39; and &#39;capitalized&#39; variables</span>
        <span class=n>normal</span> <span class=o>=</span> <span class=n>output</span><span class=o>.</span><span class=n>setdefault</span><span class=p>(</span><span class=n>first_key</span><span class=p>,</span> <span class=p>{})</span>
        <span class=n>capitalized</span> <span class=o>=</span> <span class=n>output</span><span class=o>.</span><span class=n>setdefault</span><span class=p>(</span><span class=n>first_key</span><span class=o>.</span><span class=n>capitalize</span><span class=p>(),</span> <span class=p>{})</span>
        <span class=n>upper</span> <span class=o>=</span> <span class=n>output</span><span class=o>.</span><span class=n>setdefault</span><span class=p>(</span><span class=n>first_key</span><span class=o>.</span><span class=n>upper</span><span class=p>(),</span> <span class=p>{})</span>

        <span class=n>keys_deque</span> <span class=o>=</span> <span class=n>collections</span><span class=o>.</span><span class=n>deque</span><span class=p>(</span><span class=n>keys</span><span class=p>)</span>
        <span class=k>while</span> <span class=n>keys_deque</span><span class=p>:</span>
            <span class=n>key</span> <span class=o>=</span> <span class=n>keys_deque</span><span class=o>.</span><span class=n>popleft</span><span class=p>()</span>
            <span class=n>upper_key</span> <span class=o>=</span> <span class=n>key</span>
            <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
                <span class=n>upper_key</span> <span class=o>=</span> <span class=n>key</span><span class=o>.</span><span class=n>upper</span><span class=p>()</span>

            <span class=k>if</span> <span class=ow>not</span> <span class=n>keys_deque</span><span class=p>:</span>
                <span class=c1># Fill value on last key</span>
                <span class=n>upper</span><span class=p>[</span><span class=n>upper_key</span><span class=p>]</span> <span class=o>=</span> <span class=n>upper_value</span>
                <span class=n>capitalized</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>capitalized_value</span>
                <span class=n>normal</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=n>normal</span> <span class=o>=</span> <span class=n>normal</span><span class=o>.</span><span class=n>setdefault</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=p>{})</span>
                <span class=n>capitalized</span> <span class=o>=</span> <span class=n>capitalized</span><span class=o>.</span><span class=n>setdefault</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=p>{})</span>
                <span class=n>upper</span> <span class=o>=</span> <span class=n>upper</span><span class=o>.</span><span class=n>setdefault</span><span class=p>(</span><span class=n>upper_key</span><span class=p>,</span> <span class=p>{})</span>
    <span class=k>return</span> <span class=n>output</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.recursive_bases_from_class class="doc doc-heading"> <code class="highlight language-python"><span class=n>recursive_bases_from_class</span><span class=p>(</span><span class=n>klass</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Extract all bases from entered class.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/python_module_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>recursive_bases_from_class</span><span class=p>(</span><span class=n>klass</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Extract all bases from entered class.&quot;&quot;&quot;</span>
    <span class=n>result</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=n>bases</span> <span class=o>=</span> <span class=n>klass</span><span class=o>.</span><span class=vm>__bases__</span>
    <span class=n>result</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>bases</span><span class=p>)</span>
    <span class=k>for</span> <span class=n>base</span> <span class=ow>in</span> <span class=n>bases</span><span class=p>:</span>
        <span class=n>result</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>recursive_bases_from_class</span><span class=p>(</span><span class=n>base</span><span class=p>))</span>
    <span class=k>return</span> <span class=n>result</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.register_event_callback class="doc doc-heading"> <code class="highlight language-python"><span class=n>register_event_callback</span><span class=p>(</span><span class=n>topic</span><span class=p>,</span> <span class=n>callback</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Add callback that will be executed on specific topic.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>topic</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Topic on which will callback be triggered.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>callback</code> </td> <td> <code><span title=function>function</span></code> </td> <td> <div class=doc-md-description> <p>Callback that will be triggered when a topic is triggered. Callback should expect none or 1 argument where <code>Event</code> object is passed.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>EventCallback</code></td> <td> </td> <td> <div class=doc-md-description> <p>Object wrapping the callback. It can be used to enable/disable listening to a topic or remove the callback from the topic completely.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/events.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>691</span>
<span class=normal>692</span>
<span class=normal>693</span>
<span class=normal>694</span>
<span class=normal>695</span>
<span class=normal>696</span>
<span class=normal>697</span>
<span class=normal>698</span>
<span class=normal>699</span>
<span class=normal>700</span>
<span class=normal>701</span>
<span class=normal>702</span>
<span class=normal>703</span>
<span class=normal>704</span>
<span class=normal>705</span>
<span class=normal>706</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>register_event_callback</span><span class=p>(</span><span class=n>topic</span><span class=p>,</span> <span class=n>callback</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Add callback that will be executed on specific topic.</span>

<span class=sd>    Args:</span>
<span class=sd>        topic(str): Topic on which will callback be triggered.</span>
<span class=sd>        callback(function): Callback that will be triggered when a topic</span>
<span class=sd>            is triggered. Callback should expect none or 1 argument where</span>
<span class=sd>            `Event` object is passed.</span>

<span class=sd>    Returns:</span>
<span class=sd>        EventCallback: Object wrapping the callback. It can be used to</span>
<span class=sd>            enable/disable listening to a topic or remove the callback from</span>
<span class=sd>            the topic completely.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=n>GlobalEventSystem</span><span class=o>.</span><span class=n>add_callback</span><span class=p>(</span><span class=n>topic</span><span class=p>,</span> <span class=n>callback</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.run_ayon_launcher_process class="doc doc-heading"> <code class="highlight language-python"><span class=n>run_ayon_launcher_process</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=n>add_sys_paths</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Execute AYON process with passed arguments and wait.</p> <p>Wrapper for 'run_process' which prepends AYON executable arguments before passed arguments and define environments if are not passed.</p> <p>Values from 'os.environ' are used for environments if are not passed. They are cleaned using 'clean_envs_for_ayon_process' function.</p> <p>Example:</p> <pre><code>run_ayon_launcher_process(&quot;run&quot;, &quot;&lt;path to .py script&gt;&quot;)
</code></pre> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>*args</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>ayon-launcher cli arguments.</p> </div> </td> <td> <code>()</code> </td> </tr> <tr class=doc-section-item> <td> <code>add_sys_paths</code> </td> <td> <code><span title=bool>bool</span></code> </td> <td> <div class=doc-md-description> <p>Add system paths to PYTHONPATH.</p> </div> </td> <td> <code>False</code> </td> </tr> <tr class=doc-section-item> <td> <code>**kwargs</code> </td> <td> <code><span title=Any>Any</span></code> </td> <td> <div class=doc-md-description> <p>Keyword arguments for subprocess.Popen.</p> </div> </td> <td> <code>{}</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Full output of subprocess concatenated stdout and stderr.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/execute.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>297</span>
<span class=normal>298</span>
<span class=normal>299</span>
<span class=normal>300</span>
<span class=normal>301</span>
<span class=normal>302</span>
<span class=normal>303</span>
<span class=normal>304</span>
<span class=normal>305</span>
<span class=normal>306</span>
<span class=normal>307</span>
<span class=normal>308</span>
<span class=normal>309</span>
<span class=normal>310</span>
<span class=normal>311</span>
<span class=normal>312</span>
<span class=normal>313</span>
<span class=normal>314</span>
<span class=normal>315</span>
<span class=normal>316</span>
<span class=normal>317</span>
<span class=normal>318</span>
<span class=normal>319</span>
<span class=normal>320</span>
<span class=normal>321</span>
<span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>run_ayon_launcher_process</span><span class=p>(</span>
    <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=n>add_sys_paths</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>False</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Execute AYON process with passed arguments and wait.</span>

<span class=sd>    Wrapper for &#39;run_process&#39; which prepends AYON executable arguments</span>
<span class=sd>    before passed arguments and define environments if are not passed.</span>

<span class=sd>    Values from &#39;os.environ&#39; are used for environments if are not passed.</span>
<span class=sd>    They are cleaned using &#39;clean_envs_for_ayon_process&#39; function.</span>

<span class=sd>    Example:</span>
<span class=sd>    ```</span>
<span class=sd>    run_ayon_launcher_process(&quot;run&quot;, &quot;&lt;path to .py script&gt;&quot;)</span>
<span class=sd>    ```</span>

<span class=sd>    Args:</span>
<span class=sd>        *args (str): ayon-launcher cli arguments.</span>
<span class=sd>        add_sys_paths (bool): Add system paths to PYTHONPATH.</span>
<span class=sd>        **kwargs (Any): Keyword arguments for subprocess.Popen.</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: Full output of subprocess concatenated stdout and stderr.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>args</span> <span class=o>=</span> <span class=n>get_ayon_launcher_args</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>)</span>
    <span class=n>env</span> <span class=o>=</span> <span class=n>_prepare_ayon_launcher_env</span><span class=p>(</span><span class=n>add_sys_paths</span><span class=p>,</span> <span class=n>kwargs</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>run_subprocess</span><span class=p>(</span><span class=n>args</span><span class=p>,</span> <span class=n>env</span><span class=o>=</span><span class=n>env</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.run_detached_ayon_launcher_process class="doc doc-heading"> <code class="highlight language-python"><span class=n>run_detached_ayon_launcher_process</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=n>add_sys_paths</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Execute AYON process with passed arguments and wait.</p> <p>Wrapper for 'run_process' which prepends AYON executable arguments before passed arguments and define environments if are not passed.</p> <p>Values from 'os.environ' are used for environments if are not passed. They are cleaned using 'clean_envs_for_ayon_process' function.</p> <p>Example:</p> <pre><code>run_detached_ayon_launcher_process(&quot;run&quot;, &quot;&lt;path to .py script&gt;&quot;)
</code></pre> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>*args</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>ayon-launcher cli arguments.</p> </div> </td> <td> <code>()</code> </td> </tr> <tr class=doc-section-item> <td> <code>add_sys_paths</code> </td> <td> <code><span title=bool>bool</span></code> </td> <td> <div class=doc-md-description> <p>Add system paths to PYTHONPATH.</p> </div> </td> <td> <code>False</code> </td> </tr> <tr class=doc-section-item> <td> <code>**kwargs</code> </td> <td> <code><span title=Any>Any</span></code> </td> <td> <div class=doc-md-description> <p>Keyword arguments for subprocess.Popen.</p> </div> </td> <td> <code>{}</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=subprocess.Popen>Popen</span></code> </td> <td> <div class=doc-md-description> <p>subprocess.Popen: Pointer to launched process but it is possible that launched process is already killed (on linux).</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/execute.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>327</span>
<span class=normal>328</span>
<span class=normal>329</span>
<span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span>
<span class=normal>334</span>
<span class=normal>335</span>
<span class=normal>336</span>
<span class=normal>337</span>
<span class=normal>338</span>
<span class=normal>339</span>
<span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span>
<span class=normal>344</span>
<span class=normal>345</span>
<span class=normal>346</span>
<span class=normal>347</span>
<span class=normal>348</span>
<span class=normal>349</span>
<span class=normal>350</span>
<span class=normal>351</span>
<span class=normal>352</span>
<span class=normal>353</span>
<span class=normal>354</span>
<span class=normal>355</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>run_detached_ayon_launcher_process</span><span class=p>(</span>
    <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=n>add_sys_paths</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>False</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span>
<span class=p>)</span> <span class=o>-&gt;</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>Popen</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Execute AYON process with passed arguments and wait.</span>

<span class=sd>    Wrapper for &#39;run_process&#39; which prepends AYON executable arguments</span>
<span class=sd>    before passed arguments and define environments if are not passed.</span>

<span class=sd>    Values from &#39;os.environ&#39; are used for environments if are not passed.</span>
<span class=sd>    They are cleaned using &#39;clean_envs_for_ayon_process&#39; function.</span>

<span class=sd>    Example:</span>
<span class=sd>    ```</span>
<span class=sd>    run_detached_ayon_launcher_process(&quot;run&quot;, &quot;&lt;path to .py script&gt;&quot;)</span>
<span class=sd>    ```</span>

<span class=sd>    Args:</span>
<span class=sd>        *args (str): ayon-launcher cli arguments.</span>
<span class=sd>        add_sys_paths (bool): Add system paths to PYTHONPATH.</span>
<span class=sd>        **kwargs (Any): Keyword arguments for subprocess.Popen.</span>

<span class=sd>    Returns:</span>
<span class=sd>        subprocess.Popen: Pointer to launched process but it is possible that</span>
<span class=sd>            launched process is already killed (on linux).</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>args</span> <span class=o>=</span> <span class=n>get_ayon_launcher_args</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>)</span>
    <span class=n>env</span> <span class=o>=</span> <span class=n>_prepare_ayon_launcher_env</span><span class=p>(</span><span class=n>add_sys_paths</span><span class=p>,</span> <span class=n>kwargs</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>run_detached_process</span><span class=p>(</span><span class=n>args</span><span class=p>,</span> <span class=n>env</span><span class=o>=</span><span class=n>env</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.run_detached_process class="doc doc-heading"> <code class="highlight language-python"><span class=n>run_detached_process</span><span class=p>(</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Execute process with passed arguments as separated process.</p> <details class=example open> <summary>Example</summary> <blockquote> <blockquote> <blockquote> <p>run_detached_process("run", "./path_to.py")</p> </blockquote> </blockquote> </blockquote> </details> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>args</code> </td> <td> <code><span title=Iterable>Iterable</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>AYON cli arguments.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>**kwargs</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>Keyword arguments for subprocess.Popen.</p> </div> </td> <td> <code>{}</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>subprocess.Popen: Pointer to launched process but it is possible that launched process is already killed (on linux).</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/execute.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span>
<span class=normal>277</span>
<span class=normal>278</span>
<span class=normal>279</span>
<span class=normal>280</span>
<span class=normal>281</span>
<span class=normal>282</span>
<span class=normal>283</span>
<span class=normal>284</span>
<span class=normal>285</span>
<span class=normal>286</span>
<span class=normal>287</span>
<span class=normal>288</span>
<span class=normal>289</span>
<span class=normal>290</span>
<span class=normal>291</span>
<span class=normal>292</span>
<span class=normal>293</span>
<span class=normal>294</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>run_detached_process</span><span class=p>(</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Execute process with passed arguments as separated process.</span>

<span class=sd>    Example:</span>
<span class=sd>        &gt;&gt;&gt; run_detached_process(&quot;run&quot;, &quot;./path_to.py&quot;)</span>


<span class=sd>    Args:</span>
<span class=sd>        args (Iterable[str]): AYON cli arguments.</span>
<span class=sd>        **kwargs (dict): Keyword arguments for subprocess.Popen.</span>

<span class=sd>    Returns:</span>
<span class=sd>        subprocess.Popen: Pointer to launched process but it is possible that</span>
<span class=sd>            launched process is already killed (on linux).</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>env</span> <span class=o>=</span> <span class=n>kwargs</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s2>&quot;env&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
    <span class=c1># Keep env untouched if are passed and not empty</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>env</span><span class=p>:</span>
        <span class=n>env</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span>

    <span class=c1># Create copy of passed env</span>
    <span class=n>kwargs</span><span class=p>[</span><span class=s2>&quot;env&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span><span class=n>k</span><span class=p>:</span> <span class=n>v</span> <span class=k>for</span> <span class=n>k</span><span class=p>,</span> <span class=n>v</span> <span class=ow>in</span> <span class=n>env</span><span class=o>.</span><span class=n>items</span><span class=p>()}</span>

    <span class=n>low_platform</span> <span class=o>=</span> <span class=n>platform</span><span class=o>.</span><span class=n>system</span><span class=p>()</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span>
    <span class=k>if</span> <span class=n>low_platform</span> <span class=o>==</span> <span class=s2>&quot;darwin&quot;</span><span class=p>:</span>
        <span class=n>new_args</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&quot;open&quot;</span><span class=p>,</span> <span class=s2>&quot;-na&quot;</span><span class=p>,</span> <span class=n>args</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=mi>0</span><span class=p>),</span> <span class=s2>&quot;--args&quot;</span><span class=p>]</span>
        <span class=n>new_args</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>args</span><span class=p>)</span>
        <span class=n>args</span> <span class=o>=</span> <span class=n>new_args</span>

    <span class=k>elif</span> <span class=n>low_platform</span> <span class=o>==</span> <span class=s2>&quot;windows&quot;</span><span class=p>:</span>
        <span class=n>flags</span> <span class=o>=</span> <span class=p>(</span>
            <span class=n>subprocess</span><span class=o>.</span><span class=n>CREATE_NEW_PROCESS_GROUP</span>
            <span class=o>|</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>DETACHED_PROCESS</span>
        <span class=p>)</span>
        <span class=n>kwargs</span><span class=p>[</span><span class=s2>&quot;creationflags&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>flags</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>sys</span><span class=o>.</span><span class=n>stdout</span><span class=p>:</span>
            <span class=n>kwargs</span><span class=p>[</span><span class=s2>&quot;stdout&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>DEVNULL</span>
            <span class=n>kwargs</span><span class=p>[</span><span class=s2>&quot;stderr&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>DEVNULL</span>

    <span class=k>elif</span> <span class=n>low_platform</span> <span class=o>==</span> <span class=s2>&quot;linux&quot;</span> <span class=ow>and</span> <span class=n>get_linux_launcher_args</span><span class=p>()</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>json_data</span> <span class=o>=</span> <span class=p>{</span>
            <span class=s2>&quot;args&quot;</span><span class=p>:</span> <span class=n>args</span><span class=p>,</span>
            <span class=s2>&quot;env&quot;</span><span class=p>:</span> <span class=n>kwargs</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s2>&quot;env&quot;</span><span class=p>)</span>
        <span class=p>}</span>
        <span class=n>json_temp</span> <span class=o>=</span> <span class=n>tempfile</span><span class=o>.</span><span class=n>NamedTemporaryFile</span><span class=p>(</span>
            <span class=n>mode</span><span class=o>=</span><span class=s2>&quot;w&quot;</span><span class=p>,</span> <span class=n>prefix</span><span class=o>=</span><span class=s2>&quot;op_app_args&quot;</span><span class=p>,</span> <span class=n>suffix</span><span class=o>=</span><span class=s2>&quot;.json&quot;</span><span class=p>,</span> <span class=n>delete</span><span class=o>=</span><span class=kc>False</span>
        <span class=p>)</span>
        <span class=n>json_temp</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
        <span class=n>json_temp_filpath</span> <span class=o>=</span> <span class=n>json_temp</span><span class=o>.</span><span class=n>name</span>
        <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>json_temp_filpath</span><span class=p>,</span> <span class=s2>&quot;w&quot;</span><span class=p>)</span> <span class=k>as</span> <span class=n>stream</span><span class=p>:</span>
            <span class=n>json</span><span class=o>.</span><span class=n>dump</span><span class=p>(</span><span class=n>json_data</span><span class=p>,</span> <span class=n>stream</span><span class=p>)</span>

        <span class=n>new_args</span> <span class=o>=</span> <span class=n>get_linux_launcher_args</span><span class=p>()</span>
        <span class=n>new_args</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>json_temp_filpath</span><span class=p>)</span>

        <span class=c1># Create mid-process which will launch application</span>
        <span class=n>process</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>Popen</span><span class=p>(</span><span class=n>new_args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
        <span class=c1># Wait until the process finishes</span>
        <span class=c1>#   - This is important! The process would stay in &quot;open&quot; state.</span>
        <span class=n>process</span><span class=o>.</span><span class=n>wait</span><span class=p>()</span>
        <span class=c1># Remove the temp file</span>
        <span class=n>os</span><span class=o>.</span><span class=n>remove</span><span class=p>(</span><span class=n>json_temp_filpath</span><span class=p>)</span>
        <span class=c1># Return process which is already terminated</span>
        <span class=k>return</span> <span class=n>process</span>

    <span class=n>process</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>Popen</span><span class=p>(</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>process</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.run_subprocess class="doc doc-heading"> <code class="highlight language-python"><span class=n>run_subprocess</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Convenience method for getting output errors for subprocess.</p> <p>Output logged when process finish.</p> <p>Entered arguments and keyword arguments are passed to subprocess Popen.</p> <p>On windows are 'creationflags' filled with flags that should cause ignore creation of new window.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>*args</code> </td> <td> </td> <td> <div class=doc-md-description> <p>Variable length argument list passed to Popen.</p> </div> </td> <td> <code>()</code> </td> </tr> <tr class=doc-section-item> <td> <code>**kwargs </code> </td> <td> </td> <td> <div class=doc-md-description> <p>Arbitrary keyword arguments passed to Popen. Is possible to pass <code>logging.Logger</code> object under "logger" to use custom logger for output.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>Full output of subprocess concatenated stdout and stderr.</p> </div> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=RuntimeError>RuntimeError</span></code> </td> <td> <div class=doc-md-description> <p>Exception is raised if process finished with nonzero return code.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/execute.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 73</span>
<span class=normal> 74</span>
<span class=normal> 75</span>
<span class=normal> 76</span>
<span class=normal> 77</span>
<span class=normal> 78</span>
<span class=normal> 79</span>
<span class=normal> 80</span>
<span class=normal> 81</span>
<span class=normal> 82</span>
<span class=normal> 83</span>
<span class=normal> 84</span>
<span class=normal> 85</span>
<span class=normal> 86</span>
<span class=normal> 87</span>
<span class=normal> 88</span>
<span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>run_subprocess</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Convenience method for getting output errors for subprocess.</span>

<span class=sd>    Output logged when process finish.</span>

<span class=sd>    Entered arguments and keyword arguments are passed to subprocess Popen.</span>

<span class=sd>    On windows are &#39;creationflags&#39; filled with flags that should cause ignore</span>
<span class=sd>    creation of new window.</span>

<span class=sd>    Args:</span>
<span class=sd>        *args: Variable length argument list passed to Popen.</span>
<span class=sd>        **kwargs : Arbitrary keyword arguments passed to Popen. Is possible to</span>
<span class=sd>            pass `logging.Logger` object under &quot;logger&quot; to use custom logger</span>
<span class=sd>            for output.</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: Full output of subprocess concatenated stdout and stderr.</span>

<span class=sd>    Raises:</span>
<span class=sd>        RuntimeError: Exception is raised if process finished with nonzero</span>
<span class=sd>            return code.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=c1># Modify creation flags on windows to hide console window if in UI mode</span>
    <span class=k>if</span> <span class=p>(</span>
        <span class=n>platform</span><span class=o>.</span><span class=n>system</span><span class=p>()</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span> <span class=o>==</span> <span class=s2>&quot;windows&quot;</span>
        <span class=ow>and</span> <span class=s2>&quot;creationflags&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>kwargs</span>
        <span class=c1># shell=True already tries to hide the console window</span>
        <span class=c1># and passing these creationflags then shows the window again</span>
        <span class=c1># so we avoid it for shell=True cases</span>
        <span class=ow>and</span> <span class=n>kwargs</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;shell&quot;</span><span class=p>)</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>True</span>
    <span class=p>):</span>
        <span class=n>kwargs</span><span class=p>[</span><span class=s2>&quot;creationflags&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=p>(</span>
            <span class=n>subprocess</span><span class=o>.</span><span class=n>CREATE_NEW_PROCESS_GROUP</span>
            <span class=o>|</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>subprocess</span><span class=p>,</span> <span class=s2>&quot;DETACHED_PROCESS&quot;</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
            <span class=o>|</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>subprocess</span><span class=p>,</span> <span class=s2>&quot;CREATE_NO_WINDOW&quot;</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
        <span class=p>)</span>

    <span class=c1># Escape special characters in certain shells</span>
    <span class=k>if</span> <span class=p>(</span>
        <span class=n>kwargs</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;shell&quot;</span><span class=p>)</span> <span class=ow>is</span> <span class=kc>True</span>
        <span class=ow>and</span> <span class=nb>len</span><span class=p>(</span><span class=n>args</span><span class=p>)</span> <span class=o>==</span> <span class=mi>1</span>
        <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>args</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=nb>str</span><span class=p>)</span>
    <span class=p>):</span>
        <span class=c1># Escape parentheses for bash</span>
        <span class=k>if</span> <span class=n>os</span><span class=o>.</span><span class=n>getenv</span><span class=p>(</span><span class=s2>&quot;SHELL&quot;</span><span class=p>)</span> <span class=ow>in</span> <span class=p>(</span><span class=s2>&quot;/bin/bash&quot;</span><span class=p>,</span> <span class=s2>&quot;/bin/sh&quot;</span><span class=p>):</span>
            <span class=n>new_arg</span> <span class=o>=</span> <span class=p>(</span>
                <span class=n>args</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
                <span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s2>&quot;(&quot;</span><span class=p>,</span> <span class=s2>&quot;</span><span class=se>\\</span><span class=s2>(&quot;</span><span class=p>)</span>
                <span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s2>&quot;)&quot;</span><span class=p>,</span> <span class=s2>&quot;</span><span class=se>\\</span><span class=s2>)&quot;</span><span class=p>)</span>
            <span class=p>)</span>
            <span class=n>args</span> <span class=o>=</span> <span class=p>(</span><span class=n>new_arg</span><span class=p>,)</span>
        <span class=c1># Escape &amp; on Windows in shell with `cmd.exe` using ^&amp;</span>
        <span class=k>elif</span> <span class=p>(</span>
            <span class=n>platform</span><span class=o>.</span><span class=n>system</span><span class=p>()</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span> <span class=o>==</span> <span class=s2>&quot;windows&quot;</span>
            <span class=ow>and</span> <span class=n>os</span><span class=o>.</span><span class=n>getenv</span><span class=p>(</span><span class=s2>&quot;COMSPEC&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>endswith</span><span class=p>(</span><span class=s2>&quot;cmd.exe&quot;</span><span class=p>)</span>
        <span class=p>):</span>
            <span class=n>new_arg</span> <span class=o>=</span> <span class=n>args</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s2>&quot;&amp;&quot;</span><span class=p>,</span> <span class=s2>&quot;^&amp;&quot;</span><span class=p>)</span>
            <span class=n>args</span> <span class=o>=</span> <span class=p>(</span><span class=n>new_arg</span><span class=p>,</span> <span class=p>)</span>

    <span class=c1># Get environments from kwarg or use current process environments if were</span>
    <span class=c1># not passed.</span>
    <span class=n>env</span> <span class=o>=</span> <span class=n>kwargs</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;env&quot;</span><span class=p>)</span> <span class=ow>or</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span>
    <span class=c1># Make sure environment contains only strings</span>
    <span class=n>filtered_env</span> <span class=o>=</span> <span class=p>{</span><span class=nb>str</span><span class=p>(</span><span class=n>k</span><span class=p>):</span> <span class=nb>str</span><span class=p>(</span><span class=n>v</span><span class=p>)</span> <span class=k>for</span> <span class=n>k</span><span class=p>,</span> <span class=n>v</span> <span class=ow>in</span> <span class=n>env</span><span class=o>.</span><span class=n>items</span><span class=p>()}</span>

    <span class=c1># Use lib&#39;s logger if was not passed with kwargs.</span>
    <span class=n>logger</span> <span class=o>=</span> <span class=n>kwargs</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=s2>&quot;logger&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>logger</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>logger</span> <span class=o>=</span> <span class=n>Logger</span><span class=o>.</span><span class=n>get_logger</span><span class=p>(</span><span class=s2>&quot;run_subprocess&quot;</span><span class=p>)</span>

    <span class=c1># set overrides</span>
    <span class=n>kwargs</span><span class=p>[</span><span class=s2>&quot;stdout&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>kwargs</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;stdout&quot;</span><span class=p>,</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>PIPE</span><span class=p>)</span>
    <span class=n>kwargs</span><span class=p>[</span><span class=s2>&quot;stderr&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>kwargs</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;stderr&quot;</span><span class=p>,</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>PIPE</span><span class=p>)</span>
    <span class=n>kwargs</span><span class=p>[</span><span class=s2>&quot;stdin&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>kwargs</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;stdin&quot;</span><span class=p>,</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>PIPE</span><span class=p>)</span>
    <span class=n>kwargs</span><span class=p>[</span><span class=s2>&quot;env&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>filtered_env</span>

    <span class=n>proc</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>Popen</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>

    <span class=n>full_output</span> <span class=o>=</span> <span class=s2>&quot;&quot;</span>
    <span class=n>_stdout</span><span class=p>,</span> <span class=n>_stderr</span> <span class=o>=</span> <span class=n>proc</span><span class=o>.</span><span class=n>communicate</span><span class=p>()</span>
    <span class=k>if</span> <span class=n>_stdout</span><span class=p>:</span>
        <span class=n>_stdout</span> <span class=o>=</span> <span class=n>_stdout</span><span class=o>.</span><span class=n>decode</span><span class=p>(</span><span class=s2>&quot;utf-8&quot;</span><span class=p>,</span> <span class=n>errors</span><span class=o>=</span><span class=s2>&quot;backslashreplace&quot;</span><span class=p>)</span>
        <span class=n>full_output</span> <span class=o>+=</span> <span class=n>_stdout</span>
        <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=n>_stdout</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>_stderr</span><span class=p>:</span>
        <span class=n>_stderr</span> <span class=o>=</span> <span class=n>_stderr</span><span class=o>.</span><span class=n>decode</span><span class=p>(</span><span class=s2>&quot;utf-8&quot;</span><span class=p>,</span> <span class=n>errors</span><span class=o>=</span><span class=s2>&quot;backslashreplace&quot;</span><span class=p>)</span>
        <span class=c1># Add additional line break if output already contains stdout</span>
        <span class=k>if</span> <span class=n>full_output</span><span class=p>:</span>
            <span class=n>full_output</span> <span class=o>+=</span> <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>&quot;</span>
        <span class=n>full_output</span> <span class=o>+=</span> <span class=n>_stderr</span>
        <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=n>_stderr</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>proc</span><span class=o>.</span><span class=n>returncode</span> <span class=o>!=</span> <span class=mi>0</span><span class=p>:</span>
        <span class=n>exc_msg</span> <span class=o>=</span> <span class=s2>&quot;Executing arguments was not successful: </span><span class=se>\&quot;</span><span class=si>{}</span><span class=se>\&quot;</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>args</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>_stdout</span><span class=p>:</span>
            <span class=n>exc_msg</span> <span class=o>+=</span> <span class=s2>&quot;</span><span class=se>\n\n</span><span class=s2>Output:</span><span class=se>\n</span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>_stdout</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>_stderr</span><span class=p>:</span>
            <span class=n>exc_msg</span> <span class=o>+=</span> <span class=s2>&quot;Error:</span><span class=se>\n</span><span class=si>{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>_stderr</span><span class=p>)</span>

        <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span><span class=n>exc_msg</span><span class=p>)</span>

    <span class=k>return</span> <span class=n>full_output</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.should_convert_for_ffmpeg class="doc doc-heading"> <code class="highlight language-python"><span class=n>should_convert_for_ffmpeg</span><span class=p>(</span><span class=n>src_filepath</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Find out if input should be converted for ffmpeg.</p> <p>Currently cares only about exr inputs and is based on OpenImageIO.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>bool/NoneType: True if should be converted, False if should not and None if can't determine.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/transcoding.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>524</span>
<span class=normal>525</span>
<span class=normal>526</span>
<span class=normal>527</span>
<span class=normal>528</span>
<span class=normal>529</span>
<span class=normal>530</span>
<span class=normal>531</span>
<span class=normal>532</span>
<span class=normal>533</span>
<span class=normal>534</span>
<span class=normal>535</span>
<span class=normal>536</span>
<span class=normal>537</span>
<span class=normal>538</span>
<span class=normal>539</span>
<span class=normal>540</span>
<span class=normal>541</span>
<span class=normal>542</span>
<span class=normal>543</span>
<span class=normal>544</span>
<span class=normal>545</span>
<span class=normal>546</span>
<span class=normal>547</span>
<span class=normal>548</span>
<span class=normal>549</span>
<span class=normal>550</span>
<span class=normal>551</span>
<span class=normal>552</span>
<span class=normal>553</span>
<span class=normal>554</span>
<span class=normal>555</span>
<span class=normal>556</span>
<span class=normal>557</span>
<span class=normal>558</span>
<span class=normal>559</span>
<span class=normal>560</span>
<span class=normal>561</span>
<span class=normal>562</span>
<span class=normal>563</span>
<span class=normal>564</span>
<span class=normal>565</span>
<span class=normal>566</span>
<span class=normal>567</span>
<span class=normal>568</span>
<span class=normal>569</span>
<span class=normal>570</span>
<span class=normal>571</span>
<span class=normal>572</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>should_convert_for_ffmpeg</span><span class=p>(</span><span class=n>src_filepath</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Find out if input should be converted for ffmpeg.</span>

<span class=sd>    Currently cares only about exr inputs and is based on OpenImageIO.</span>

<span class=sd>    Returns:</span>
<span class=sd>        bool/NoneType: True if should be converted, False if should not and</span>
<span class=sd>            None if can&#39;t determine.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=c1># Care only about exr at this moment</span>
    <span class=n>ext</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>splitext</span><span class=p>(</span><span class=n>src_filepath</span><span class=p>)[</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span>
    <span class=k>if</span> <span class=n>ext</span> <span class=o>!=</span> <span class=s2>&quot;.exr&quot;</span><span class=p>:</span>
        <span class=k>return</span> <span class=kc>False</span>

    <span class=c1># Can&#39;t determine if should convert or not without oiio_tool</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>is_oiio_supported</span><span class=p>():</span>
        <span class=k>return</span> <span class=kc>None</span>

    <span class=c1># Load info about file from oiio tool</span>
    <span class=n>input_info</span> <span class=o>=</span> <span class=n>get_oiio_info_for_input</span><span class=p>(</span><span class=n>src_filepath</span><span class=p>)</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>input_info</span><span class=p>:</span>
        <span class=k>return</span> <span class=kc>None</span>

    <span class=n>subimages</span> <span class=o>=</span> <span class=n>input_info</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;subimages&quot;</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>subimages</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=ow>and</span> <span class=n>subimages</span> <span class=o>&gt;</span> <span class=mi>1</span><span class=p>:</span>
        <span class=k>return</span> <span class=kc>True</span>

    <span class=c1># Check compression</span>
    <span class=n>compression</span> <span class=o>=</span> <span class=n>input_info</span><span class=p>[</span><span class=s2>&quot;attribs&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;compression&quot;</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>compression</span> <span class=ow>in</span> <span class=p>(</span><span class=s2>&quot;dwaa&quot;</span><span class=p>,</span> <span class=s2>&quot;dwab&quot;</span><span class=p>):</span>
        <span class=k>return</span> <span class=kc>True</span>

    <span class=c1># Check channels</span>
    <span class=n>channel_names</span> <span class=o>=</span> <span class=n>input_info</span><span class=p>[</span><span class=s2>&quot;channelnames&quot;</span><span class=p>]</span>
    <span class=n>review_channels</span> <span class=o>=</span> <span class=n>get_convert_rgb_channels</span><span class=p>(</span><span class=n>channel_names</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>review_channels</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>return</span> <span class=kc>None</span>

    <span class=k>for</span> <span class=n>attr_value</span> <span class=ow>in</span> <span class=n>input_info</span><span class=p>[</span><span class=s2>&quot;attribs&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>values</span><span class=p>():</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>attr_value</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
            <span class=k>continue</span>

        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>attr_value</span><span class=p>)</span> <span class=o>&gt;</span> <span class=n>MAX_FFMPEG_STRING_LEN</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>True</span>

        <span class=k>for</span> <span class=n>char</span> <span class=ow>in</span> <span class=n>NOT_ALLOWED_FFMPEG_CHARS</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>char</span> <span class=ow>in</span> <span class=n>attr_value</span><span class=p>:</span>
                <span class=k>return</span> <span class=kc>True</span>
    <span class=k>return</span> <span class=kc>False</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.source_hash class="doc doc-heading"> <code class="highlight language-python"><span class=n>source_hash</span><span class=p>(</span><span class=n>filepath</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Generate simple identifier for a source file. This is used to identify whether a source file has previously been processe into the pipeline, e.g. a texture. The hash is based on source filepath, modification time and file size. This is only used to identify whether a specific source file was already published before from the same location with the same modification date. We opt to do it this way as opposed to Avalanch C4 hash as this is much faster and predictable enough for all our production use cases. Args: filepath (str): The source file path. You can specify additional arguments in the function to allow for specific 'processing' values to be included.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/plugin_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>source_hash</span><span class=p>(</span><span class=n>filepath</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Generate simple identifier for a source file.</span>
<span class=sd>    This is used to identify whether a source file has previously been</span>
<span class=sd>    processe into the pipeline, e.g. a texture.</span>
<span class=sd>    The hash is based on source filepath, modification time and file size.</span>
<span class=sd>    This is only used to identify whether a specific source file was already</span>
<span class=sd>    published before from the same location with the same modification date.</span>
<span class=sd>    We opt to do it this way as opposed to Avalanch C4 hash as this is much</span>
<span class=sd>    faster and predictable enough for all our production use cases.</span>
<span class=sd>    Args:</span>
<span class=sd>        filepath (str): The source file path.</span>
<span class=sd>    You can specify additional arguments in the function</span>
<span class=sd>    to allow for specific &#39;processing&#39; values to be included.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=c1># We replace dots with comma because . cannot be a key in a pymongo dict.</span>
    <span class=n>file_name</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>basename</span><span class=p>(</span><span class=n>filepath</span><span class=p>)</span>
    <span class=n>time</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>getmtime</span><span class=p>(</span><span class=n>filepath</span><span class=p>))</span>
    <span class=n>size</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>getsize</span><span class=p>(</span><span class=n>filepath</span><span class=p>))</span>
    <span class=k>return</span> <span class=s2>&quot;|&quot;</span><span class=o>.</span><span class=n>join</span><span class=p>([</span><span class=n>file_name</span><span class=p>,</span> <span class=n>time</span><span class=p>,</span> <span class=n>size</span><span class=p>]</span> <span class=o>+</span> <span class=nb>list</span><span class=p>(</span><span class=n>args</span><span class=p>))</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s2>&quot;.&quot;</span><span class=p>,</span> <span class=s2>&quot;,&quot;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.lib.version_up class="doc doc-heading"> <code class="highlight language-python"><span class=n>version_up</span><span class=p>(</span><span class=n>filepath</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Version up filepath to a new non-existing version.</p> <p>Parses for a version identifier like <code>_v001</code> or <code>.v001</code> When no version present _v001 is appended as suffix.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>filepath</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>full url</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>filepath with increased version number</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/lib/path_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 88</span>
<span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>version_up</span><span class=p>(</span><span class=n>filepath</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Version up filepath to a new non-existing version.</span>

<span class=sd>    Parses for a version identifier like `_v001` or `.v001`</span>
<span class=sd>    When no version present _v001 is appended as suffix.</span>

<span class=sd>    Args:</span>
<span class=sd>        filepath (str): full url</span>

<span class=sd>    Returns:</span>
<span class=sd>        (str): filepath with increased version number</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>dirname</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>dirname</span><span class=p>(</span><span class=n>filepath</span><span class=p>)</span>
    <span class=n>basename</span><span class=p>,</span> <span class=n>ext</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>splitext</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>basename</span><span class=p>(</span><span class=n>filepath</span><span class=p>))</span>

    <span class=n>regex</span> <span class=o>=</span> <span class=sa>r</span><span class=s2>&quot;[._]v\d+&quot;</span>
    <span class=n>matches</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>findall</span><span class=p>(</span><span class=n>regex</span><span class=p>,</span> <span class=nb>str</span><span class=p>(</span><span class=n>basename</span><span class=p>),</span> <span class=n>re</span><span class=o>.</span><span class=n>IGNORECASE</span><span class=p>)</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>matches</span><span class=p>:</span>
        <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Creating version...&quot;</span><span class=p>)</span>
        <span class=n>new_label</span> <span class=o>=</span> <span class=s2>&quot;_v</span><span class=si>{version:03d}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>version</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
        <span class=n>new_basename</span> <span class=o>=</span> <span class=s2>&quot;</span><span class=si>{}{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>basename</span><span class=p>,</span> <span class=n>new_label</span><span class=p>)</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=n>label</span> <span class=o>=</span> <span class=n>matches</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span>
        <span class=n>version</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>search</span><span class=p>(</span><span class=sa>r</span><span class=s2>&quot;\d+&quot;</span><span class=p>,</span> <span class=n>label</span><span class=p>)</span><span class=o>.</span><span class=n>group</span><span class=p>()</span>
        <span class=n>padding</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>version</span><span class=p>)</span>

        <span class=n>new_version</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>version</span><span class=p>)</span> <span class=o>+</span> <span class=mi>1</span>
        <span class=n>new_version</span> <span class=o>=</span> <span class=s1>&#39;{version:0</span><span class=si>{padding}</span><span class=s1>d}&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>version</span><span class=o>=</span><span class=n>new_version</span><span class=p>,</span>
                                                     <span class=n>padding</span><span class=o>=</span><span class=n>padding</span><span class=p>)</span>
        <span class=n>new_label</span> <span class=o>=</span> <span class=n>label</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=n>version</span><span class=p>,</span> <span class=n>new_version</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
        <span class=n>new_basename</span> <span class=o>=</span> <span class=n>_rreplace</span><span class=p>(</span><span class=n>basename</span><span class=p>,</span> <span class=n>label</span><span class=p>,</span> <span class=n>new_label</span><span class=p>)</span>
    <span class=n>new_filename</span> <span class=o>=</span> <span class=s2>&quot;</span><span class=si>{}{}</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>new_basename</span><span class=p>,</span> <span class=n>ext</span><span class=p>)</span>
    <span class=n>new_filename</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>dirname</span><span class=p>,</span> <span class=n>new_filename</span><span class=p>)</span>
    <span class=n>new_filename</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>normpath</span><span class=p>(</span><span class=n>new_filename</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>new_filename</span> <span class=o>==</span> <span class=n>filepath</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span><span class=s2>&quot;Created path is the same as current file,&quot;</span>
                           <span class=s2>&quot;this is a bug&quot;</span><span class=p>)</span>

    <span class=c1># We check for version clashes against the current file for any file</span>
    <span class=c1># that matches completely in name up to the {version} label found. Thus</span>
    <span class=c1># if source file was test_v001_test.txt we want to also check clashes</span>
    <span class=c1># against test_v002.txt but do want to preserve the part after the version</span>
    <span class=c1># label for our new filename</span>
    <span class=n>clash_basename</span> <span class=o>=</span> <span class=n>new_basename</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>clash_basename</span><span class=o>.</span><span class=n>endswith</span><span class=p>(</span><span class=n>new_label</span><span class=p>):</span>
        <span class=n>index</span> <span class=o>=</span> <span class=p>(</span><span class=n>clash_basename</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=n>new_label</span><span class=p>))</span>
        <span class=n>index</span> <span class=o>+=</span> <span class=nb>len</span><span class=p>(</span><span class=n>new_label</span><span class=p>)</span>
        <span class=n>clash_basename</span> <span class=o>=</span> <span class=n>clash_basename</span><span class=p>[:</span><span class=n>index</span><span class=p>]</span>

    <span class=k>for</span> <span class=n>file</span> <span class=ow>in</span> <span class=n>os</span><span class=o>.</span><span class=n>listdir</span><span class=p>(</span><span class=n>dirname</span><span class=p>):</span>
        <span class=k>if</span> <span class=n>file</span><span class=o>.</span><span class=n>endswith</span><span class=p>(</span><span class=n>ext</span><span class=p>)</span> <span class=ow>and</span> <span class=n>file</span><span class=o>.</span><span class=n>startswith</span><span class=p>(</span><span class=n>clash_basename</span><span class=p>):</span>
            <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Skipping existing version </span><span class=si>%s</span><span class=s2>&quot;</span> <span class=o>%</span> <span class=n>new_label</span><span class=p>)</span>
            <span class=k>return</span> <span class=n>version_up</span><span class=p>(</span><span class=n>new_filename</span><span class=p>)</span>

    <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;New version </span><span class=si>%s</span><span class=s2>&quot;</span> <span class=o>%</span> <span class=n>new_label</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>new_filename</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../..", "features": ["navigation.sections", "navigation.path", "navigation.prune"], "search": "../../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../../../assets/javascripts/bundle.f55a23d4.min.js></script> </body> </html>