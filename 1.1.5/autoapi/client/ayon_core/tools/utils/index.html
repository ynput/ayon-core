<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=prev href=../tray/webserver/server.html><link rel=next href=color_widgets/index.html><link rel=icon href=../../../../../img/favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.9"><title>utils - ayon-core</title><link rel=stylesheet href=../../../../../assets/stylesheets/main.4af4bdda.min.css><link rel=stylesheet href=../../../../../assets/stylesheets/palette.06af60db.min.css><script src=https://unpkg.com/iframe-worker/shim></script><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../../../assets/_mkdocstrings.css><link rel=stylesheet href=../../../../../css/custom.css><script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#client.ayon_core.tools.utils class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../../../index.html title=ayon-core class="md-header__button md-logo" aria-label=ayon-core data-md-component=logo> <img src=../../../../../img/ay-symbol-blackw-full.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> ayon-core </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> utils </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/ynput/ayon-core title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../../../index.html title=ayon-core class="md-nav__button md-logo" aria-label=ayon-core data-md-component=logo> <img src=../../../../../img/ay-symbol-blackw-full.png alt=logo> </a> ayon-core </label> <div class=md-nav__source> <a href=https://github.com/ynput/ayon-core title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../index.html class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../../../../../license.html class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1 checked> <label class=md-nav__link for=__nav_3_1 id=__nav_3_1_label tabindex=0> <span class=md-ellipsis> client </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> client </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1 checked> <div class="md-nav__link md-nav__container"> <a href=../../index.html class="md-nav__link "> <span class=md-ellipsis> ayon_core </span> </a> <label class="md-nav__link " for=__nav_3_1_1 id=__nav_3_1_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_1_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1> <span class="md-nav__icon md-icon"></span> ayon_core </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../__main__.html class=md-nav__link> <span class=md-ellipsis> __main__ </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../addon/base.html class=md-nav__link> <span class=md-ellipsis> addon </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../../cli.html class=md-nav__link> <span class=md-ellipsis> cli </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../hooks/pre_add_last_workfile_arg.html class=md-nav__link> <span class=md-ellipsis> hooks </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../host/dirmap.html class=md-nav__link> <span class=md-ellipsis> host </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../lib/attribute_definitions.html class=md-nav__link> <span class=md-ellipsis> lib </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../pipeline/actions.html class=md-nav__link> <span class=md-ellipsis> pipeline </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../plugins/actions/open_file_explorer.html class=md-nav__link> <span class=md-ellipsis> plugins </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../../resources/index.html class=md-nav__link> <span class=md-ellipsis> resources </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../scripts/ocio_wrapper.html class=md-nav__link> <span class=md-ellipsis> scripts </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../settings/lib.html class=md-nav__link> <span class=md-ellipsis> settings </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../style/color_defs.html class=md-nav__link> <span class=md-ellipsis> style </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../tests/conftest.html class=md-nav__link> <span class=md-ellipsis> tests </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1_14 checked> <div class="md-nav__link md-nav__container"> <a href=../index.html class="md-nav__link "> <span class=md-ellipsis> tools </span> </a> <label class="md-nav__link " for=__nav_3_1_1_14 id=__nav_3_1_1_14_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_1_1_14_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1_14> <span class="md-nav__icon md-icon"></span> tools </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../attribute_defs/_constants.html class=md-nav__link> <span class=md-ellipsis> attribute_defs </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../common_models/cache.html class=md-nav__link> <span class=md-ellipsis> common_models </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../console_interpreter/abstract.html class=md-nav__link> <span class=md-ellipsis> console_interpreter </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../context_dialog/window.html class=md-nav__link> <span class=md-ellipsis> context_dialog </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../creator/constants.html class=md-nav__link> <span class=md-ellipsis> creator </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../experimental_tools/dialog.html class=md-nav__link> <span class=md-ellipsis> experimental_tools </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../flickcharm.html class=md-nav__link> <span class=md-ellipsis> flickcharm </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../launcher/abstract.html class=md-nav__link> <span class=md-ellipsis> launcher </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../loader/abstract.html class=md-nav__link> <span class=md-ellipsis> loader </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../publisher/abstract.html class=md-nav__link> <span class=md-ellipsis> publisher </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../push_to_project/control.html class=md-nav__link> <span class=md-ellipsis> push_to_project </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../resources/index.html class=md-nav__link> <span class=md-ellipsis> resources </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../sceneinventory/control.html class=md-nav__link> <span class=md-ellipsis> sceneinventory </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../stdout_broker/app.html class=md-nav__link> <span class=md-ellipsis> stdout_broker </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../subsetmanager/model.html class=md-nav__link> <span class=md-ellipsis> subsetmanager </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../texture_copy/app.html class=md-nav__link> <span class=md-ellipsis> texture_copy </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../tray/lib.html class=md-nav__link> <span class=md-ellipsis> tray </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1_14_18 checked> <div class="md-nav__link md-nav__container"> <a href=index.html class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> utils </span> </a> <label class="md-nav__link md-nav__link--active" for=__nav_3_1_1_14_18 id=__nav_3_1_1_14_18_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=5 aria-labelledby=__nav_3_1_1_14_18_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1_14_18> <span class="md-nav__icon md-icon"></span> utils </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=color_widgets/color_inputs.html class=md-nav__link> <span class=md-ellipsis> color_widgets </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=constants.html class=md-nav__link> <span class=md-ellipsis> constants </span> </a> </li> <li class=md-nav__item> <a href=delegates.html class=md-nav__link> <span class=md-ellipsis> delegates </span> </a> </li> <li class=md-nav__item> <a href=dialogs.html class=md-nav__link> <span class=md-ellipsis> dialogs </span> </a> </li> <li class=md-nav__item> <a href=error_dialog.html class=md-nav__link> <span class=md-ellipsis> error_dialog </span> </a> </li> <li class=md-nav__item> <a href=folders_widget.html class=md-nav__link> <span class=md-ellipsis> folders_widget </span> </a> </li> <li class=md-nav__item> <a href=host_tools.html class=md-nav__link> <span class=md-ellipsis> host_tools </span> </a> </li> <li class=md-nav__item> <a href=images/index.html class=md-nav__link> <span class=md-ellipsis> images </span> </a> </li> <li class=md-nav__item> <a href=layouts.html class=md-nav__link> <span class=md-ellipsis> layouts </span> </a> </li> <li class=md-nav__item> <a href=lib.html class=md-nav__link> <span class=md-ellipsis> lib </span> </a> </li> <li class=md-nav__item> <a href=models.html class=md-nav__link> <span class=md-ellipsis> models </span> </a> </li> <li class=md-nav__item> <a href=multiselection_combobox.html class=md-nav__link> <span class=md-ellipsis> multiselection_combobox </span> </a> </li> <li class=md-nav__item> <a href=nice_checkbox.html class=md-nav__link> <span class=md-ellipsis> nice_checkbox </span> </a> </li> <li class=md-nav__item> <a href=overlay_messages.html class=md-nav__link> <span class=md-ellipsis> overlay_messages </span> </a> </li> <li class=md-nav__item> <a href=projects_widget.html class=md-nav__link> <span class=md-ellipsis> projects_widget </span> </a> </li> <li class=md-nav__item> <a href=sliders.html class=md-nav__link> <span class=md-ellipsis> sliders </span> </a> </li> <li class=md-nav__item> <a href=tasks_widget.html class=md-nav__link> <span class=md-ellipsis> tasks_widget </span> </a> </li> <li class=md-nav__item> <a href=thumbnail_paint_widget.html class=md-nav__link> <span class=md-ellipsis> thumbnail_paint_widget </span> </a> </li> <li class=md-nav__item> <a href=views.html class=md-nav__link> <span class=md-ellipsis> views </span> </a> </li> <li class=md-nav__item> <a href=widgets.html class=md-nav__link> <span class=md-ellipsis> widgets </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../workfile_template_build/lib.html class=md-nav__link> <span class=md-ellipsis> workfile_template_build </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../workfiles/abstract.html class=md-nav__link> <span class=md-ellipsis> workfiles </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../vendor/python/qargparse.html class=md-nav__link> <span class=md-ellipsis> vendor </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../../version.html class=md-nav__link> <span class=md-ellipsis> version </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../server/settings/conversion.html class=md-nav__link> <span class=md-ellipsis> server </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils class=md-nav__link> <span class=md-ellipsis> utils </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.BaseClickableFrame class=md-nav__link> <span class=md-ellipsis> BaseClickableFrame </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.ClassicExpandBtn class=md-nav__link> <span class=md-ellipsis> ClassicExpandBtn </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.ClickableFrame class=md-nav__link> <span class=md-ellipsis> ClickableFrame </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.ClickableLabel class=md-nav__link> <span class=md-ellipsis> ClickableLabel </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.ComboBox class=md-nav__link> <span class=md-ellipsis> ComboBox </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.CustomTextComboBox class=md-nav__link> <span class=md-ellipsis> CustomTextComboBox </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.DeselectableTreeView class=md-nav__link> <span class=md-ellipsis> DeselectableTreeView </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.DynamicQThread class=md-nav__link> <span class=md-ellipsis> DynamicQThread </span> </a> <nav class=md-nav aria-label=DynamicQThread> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.DynamicQThread.run class=md-nav__link> <span class=md-ellipsis> run </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.ElideLabel class=md-nav__link> <span class=md-ellipsis> ElideLabel </span> </a> <nav class=md-nav aria-label=ElideLabel> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.ElideLabel.set_elide_mode class=md-nav__link> <span class=md-ellipsis> set_elide_mode </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.ExpandingTextEdit class=md-nav__link> <span class=md-ellipsis> ExpandingTextEdit </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.FlowLayout class=md-nav__link> <span class=md-ellipsis> FlowLayout </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.FocusDoubleSpinBox class=md-nav__link> <span class=md-ellipsis> FocusDoubleSpinBox </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.FocusSpinBox class=md-nav__link> <span class=md-ellipsis> FocusSpinBox </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.FoldersQtModel class=md-nav__link> <span class=md-ellipsis> FoldersQtModel </span> </a> <nav class=md-nav aria-label=FoldersQtModel> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.FoldersQtModel.has_content class=md-nav__link> <span class=md-ellipsis> has_content </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.FoldersQtModel.is_refreshing class=md-nav__link> <span class=md-ellipsis> is_refreshing </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.FoldersQtModel.get_index_by_id class=md-nav__link> <span class=md-ellipsis> get_index_by_id </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.FoldersQtModel.get_item_id_by_path class=md-nav__link> <span class=md-ellipsis> get_item_id_by_path </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.FoldersQtModel.get_project_name class=md-nav__link> <span class=md-ellipsis> get_project_name </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.FoldersQtModel.refresh class=md-nav__link> <span class=md-ellipsis> refresh </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.FoldersQtModel.set_project_name class=md-nav__link> <span class=md-ellipsis> set_project_name </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.FoldersWidget class=md-nav__link> <span class=md-ellipsis> FoldersWidget </span> </a> <nav class=md-nav aria-label=FoldersWidget> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.FoldersWidget.has_content class=md-nav__link> <span class=md-ellipsis> has_content </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.FoldersWidget.is_refreshing class=md-nav__link> <span class=md-ellipsis> is_refreshing </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.FoldersWidget.get_folder_label class=md-nav__link> <span class=md-ellipsis> get_folder_label </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.FoldersWidget.get_project_name class=md-nav__link> <span class=md-ellipsis> get_project_name </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.FoldersWidget.get_selected_folder_id class=md-nav__link> <span class=md-ellipsis> get_selected_folder_id </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.FoldersWidget.get_selected_folder_label class=md-nav__link> <span class=md-ellipsis> get_selected_folder_label </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.FoldersWidget.get_selected_folder_path class=md-nav__link> <span class=md-ellipsis> get_selected_folder_path </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.FoldersWidget.refresh class=md-nav__link> <span class=md-ellipsis> refresh </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.FoldersWidget.set_deselectable class=md-nav__link> <span class=md-ellipsis> set_deselectable </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.FoldersWidget.set_name_filter class=md-nav__link> <span class=md-ellipsis> set_name_filter </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.FoldersWidget.set_project_name class=md-nav__link> <span class=md-ellipsis> set_project_name </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.FoldersWidget.set_selected_folder class=md-nav__link> <span class=md-ellipsis> set_selected_folder </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.FoldersWidget.set_selected_folder_path class=md-nav__link> <span class=md-ellipsis> set_selected_folder_path </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.IconButton class=md-nav__link> <span class=md-ellipsis> IconButton </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.MessageOverlayObject class=md-nav__link> <span class=md-ellipsis> MessageOverlayObject </span> </a> <nav class=md-nav aria-label=MessageOverlayObject> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.MessageOverlayObject.add_message class=md-nav__link> <span class=md-ellipsis> add_message </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.MultiSelectionComboBox class=md-nav__link> <span class=md-ellipsis> MultiSelectionComboBox </span> </a> <nav class=md-nav aria-label=MultiSelectionComboBox> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.MultiSelectionComboBox.eventFilter class=md-nav__link> <span class=md-ellipsis> eventFilter </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.MultiSelectionComboBox.hidePopup class=md-nav__link> <span class=md-ellipsis> hidePopup </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.MultiSelectionComboBox.mousePressEvent class=md-nav__link> <span class=md-ellipsis> mousePressEvent </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.MultiSelectionComboBox.paintEvent class=md-nav__link> <span class=md-ellipsis> paintEvent </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.MultiSelectionComboBox.showPopup class=md-nav__link> <span class=md-ellipsis> showPopup </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.PixmapLabel class=md-nav__link> <span class=md-ellipsis> PixmapLabel </span> </a> <nav class=md-nav aria-label=PixmapLabel> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.PixmapLabel.set_source_pixmap class=md-nav__link> <span class=md-ellipsis> set_source_pixmap </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.PlaceholderLineEdit class=md-nav__link> <span class=md-ellipsis> PlaceholderLineEdit </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.PlaceholderPlainTextEdit class=md-nav__link> <span class=md-ellipsis> PlaceholderPlainTextEdit </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.PopupUpdateKeys class=md-nav__link> <span class=md-ellipsis> PopupUpdateKeys </span> </a> <nav class=md-nav aria-label=PopupUpdateKeys> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.PopupUpdateKeys.emit_click_with_state class=md-nav__link> <span class=md-ellipsis> emit_click_with_state </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.ProjectsCombobox class=md-nav__link> <span class=md-ellipsis> ProjectsCombobox </span> </a> <nav class=md-nav aria-label=ProjectsCombobox> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.ProjectsCombobox.get_selected_project_name class=md-nav__link> <span class=md-ellipsis> get_selected_project_name </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.ProjectsCombobox.set_listen_to_selection_change class=md-nav__link> <span class=md-ellipsis> set_listen_to_selection_change </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.ProjectsCombobox.set_selection class=md-nav__link> <span class=md-ellipsis> set_selection </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.ProjectsQtModel class=md-nav__link> <span class=md-ellipsis> ProjectsQtModel </span> </a> <nav class=md-nav aria-label=ProjectsQtModel> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.ProjectsQtModel.get_index_by_project_name class=md-nav__link> <span class=md-ellipsis> get_index_by_project_name </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.RecursiveSortFilterProxyModel class=md-nav__link> <span class=md-ellipsis> RecursiveSortFilterProxyModel </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.ScrollMessageBox class=md-nav__link> <span class=md-ellipsis> ScrollMessageBox </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.SeparatorWidget class=md-nav__link> <span class=md-ellipsis> SeparatorWidget </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.SimpleFoldersWidget class=md-nav__link> <span class=md-ellipsis> SimpleFoldersWidget </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.SimplePopup class=md-nav__link> <span class=md-ellipsis> SimplePopup </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.SquareButton class=md-nav__link> <span class=md-ellipsis> SquareButton </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.TasksQtModel class=md-nav__link> <span class=md-ellipsis> TasksQtModel </span> </a> <nav class=md-nav aria-label=TasksQtModel> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.TasksQtModel.has_content class=md-nav__link> <span class=md-ellipsis> has_content </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.TasksQtModel.is_refreshing class=md-nav__link> <span class=md-ellipsis> is_refreshing </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.TasksQtModel.get_index_by_name class=md-nav__link> <span class=md-ellipsis> get_index_by_name </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.TasksQtModel.get_last_folder_id class=md-nav__link> <span class=md-ellipsis> get_last_folder_id </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.TasksQtModel.get_last_project_name class=md-nav__link> <span class=md-ellipsis> get_last_project_name </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.TasksQtModel.refresh class=md-nav__link> <span class=md-ellipsis> refresh </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.TasksQtModel.set_context class=md-nav__link> <span class=md-ellipsis> set_context </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.TasksWidget class=md-nav__link> <span class=md-ellipsis> TasksWidget </span> </a> <nav class=md-nav aria-label=TasksWidget> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.TasksWidget.get_selected_task_id class=md-nav__link> <span class=md-ellipsis> get_selected_task_id </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.TasksWidget.get_selected_task_info class=md-nav__link> <span class=md-ellipsis> get_selected_task_info </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.TasksWidget.get_selected_task_name class=md-nav__link> <span class=md-ellipsis> get_selected_task_name </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.TasksWidget.get_selected_task_type class=md-nav__link> <span class=md-ellipsis> get_selected_task_type </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.TasksWidget.refresh class=md-nav__link> <span class=md-ellipsis> refresh </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.TasksWidget.set_selected_task class=md-nav__link> <span class=md-ellipsis> set_selected_task </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.ThumbnailPainterWidget class=md-nav__link> <span class=md-ellipsis> ThumbnailPainterWidget </span> </a> <nav class=md-nav aria-label=ThumbnailPainterWidget> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.ThumbnailPainterWidget.has_pixes class=md-nav__link> <span class=md-ellipsis> has_pixes </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.ThumbnailPainterWidget.clear_cache class=md-nav__link> <span class=md-ellipsis> clear_cache </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.ThumbnailPainterWidget.set_border_color class=md-nav__link> <span class=md-ellipsis> set_border_color </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.ThumbnailPainterWidget.set_current_thumbnail_paths class=md-nav__link> <span class=md-ellipsis> set_current_thumbnail_paths </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.ThumbnailPainterWidget.set_current_thumbnails class=md-nav__link> <span class=md-ellipsis> set_current_thumbnails </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.ThumbnailPainterWidget.set_thumbnail_bg_color class=md-nav__link> <span class=md-ellipsis> set_thumbnail_bg_color </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.TreeView class=md-nav__link> <span class=md-ellipsis> TreeView </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.VerticalExpandButton class=md-nav__link> <span class=md-ellipsis> VerticalExpandButton </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.WrappedCallbackItem class=md-nav__link> <span class=md-ellipsis> WrappedCallbackItem </span> </a> <nav class=md-nav aria-label=WrappedCallbackItem> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.WrappedCallbackItem.execute class=md-nav__link> <span class=md-ellipsis> execute </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.get_ayon_qt_app class=md-nav__link> <span class=md-ellipsis> get_ayon_qt_app </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.get_qt_app class=md-nav__link> <span class=md-ellipsis> get_qt_app </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.get_qt_icon class=md-nav__link> <span class=md-ellipsis> get_qt_icon </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.get_warning_pixmap class=md-nav__link> <span class=md-ellipsis> get_warning_pixmap </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.paint_image_with_color class=md-nav__link> <span class=md-ellipsis> paint_image_with_color </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.set_style_property class=md-nav__link> <span class=md-ellipsis> set_style_property </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.tools.utils.show_message_dialog class=md-nav__link> <span class=md-ellipsis> show_message_dialog </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>utils</h1> <div class="doc doc-object doc-module"> <a id=client.ayon_core.tools.utils></a> <div class="doc doc-contents first"> <div class="doc doc-children"> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.tools.utils.BaseClickableFrame class="doc doc-heading"> <code>BaseClickableFrame</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=qtpy.QtWidgets.QFrame>QFrame</span></code></p> <p>Widget that catch left mouse click and can trigger a callback.</p> <p>Callback is defined by overriding <code>_mouse_release_callback</code>.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/widgets.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>423</span>
<span class=normal>424</span>
<span class=normal>425</span>
<span class=normal>426</span>
<span class=normal>427</span>
<span class=normal>428</span>
<span class=normal>429</span>
<span class=normal>430</span>
<span class=normal>431</span>
<span class=normal>432</span>
<span class=normal>433</span>
<span class=normal>434</span>
<span class=normal>435</span>
<span class=normal>436</span>
<span class=normal>437</span>
<span class=normal>438</span>
<span class=normal>439</span>
<span class=normal>440</span>
<span class=normal>441</span>
<span class=normal>442</span>
<span class=normal>443</span>
<span class=normal>444</span>
<span class=normal>445</span>
<span class=normal>446</span>
<span class=normal>447</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>BaseClickableFrame</span><span class=p>(</span><span class=n>QtWidgets</span><span class=o>.</span><span class=n>QFrame</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Widget that catch left mouse click and can trigger a callback.</span>

<span class=sd>    Callback is defined by overriding `_mouse_release_callback`.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>parent</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>BaseClickableFrame</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>parent</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_mouse_pressed</span> <span class=o>=</span> <span class=kc>False</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_mouse_release_callback</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>pass</span>

    <span class=k>def</span><span class=w> </span><span class=nf>mousePressEvent</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
        <span class=k>if</span> <span class=n>event</span><span class=o>.</span><span class=n>button</span><span class=p>()</span> <span class=o>==</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>LeftButton</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_mouse_pressed</span> <span class=o>=</span> <span class=kc>True</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>BaseClickableFrame</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>mousePressEvent</span><span class=p>(</span><span class=n>event</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>mouseReleaseEvent</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_mouse_pressed</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_mouse_pressed</span> <span class=o>=</span> <span class=kc>False</span>
            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>rect</span><span class=p>()</span><span class=o>.</span><span class=n>contains</span><span class=p>(</span><span class=n>event</span><span class=o>.</span><span class=n>pos</span><span class=p>()):</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_mouse_release_callback</span><span class=p>()</span>

        <span class=nb>super</span><span class=p>(</span><span class=n>BaseClickableFrame</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>mouseReleaseEvent</span><span class=p>(</span><span class=n>event</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.tools.utils.ClassicExpandBtn class="doc doc-heading"> <code>ClassicExpandBtn</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=client.ayon_core.tools.utils.widgets.ExpandBtn>ExpandBtn</span></code></p> <p>Same as 'ExpandBtn' but with arrow images.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/widgets.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>605</span>
<span class=normal>606</span>
<span class=normal>607</span>
<span class=normal>608</span>
<span class=normal>609</span>
<span class=normal>610</span>
<span class=normal>611</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>ClassicExpandBtn</span><span class=p>(</span><span class=n>ExpandBtn</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Same as &#39;ExpandBtn&#39; but with arrow images.&quot;&quot;&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_create_pix_widget</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>parent</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=k>if</span> <span class=n>parent</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>parent</span> <span class=o>=</span> <span class=bp>self</span>
        <span class=k>return</span> <span class=n>ClassicExpandBtnLabel</span><span class=p>(</span><span class=n>parent</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.tools.utils.ClickableFrame class="doc doc-heading"> <code>ClickableFrame</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="BaseClickableFrame (client.ayon_core.tools.utils.widgets.BaseClickableFrame)" href=widgets.html#client.ayon_core.tools.utils.widgets.BaseClickableFrame>BaseClickableFrame</a></code></p> <p>Extended clickable frame which triggers 'clicked' signal.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/widgets.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>450</span>
<span class=normal>451</span>
<span class=normal>452</span>
<span class=normal>453</span>
<span class=normal>454</span>
<span class=normal>455</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>ClickableFrame</span><span class=p>(</span><span class=n>BaseClickableFrame</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Extended clickable frame which triggers &#39;clicked&#39; signal.&quot;&quot;&quot;</span>
    <span class=n>clicked</span> <span class=o>=</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Signal</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_mouse_release_callback</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>clicked</span><span class=o>.</span><span class=n>emit</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.tools.utils.ClickableLabel class="doc doc-heading"> <code>ClickableLabel</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=qtpy.QtWidgets.QLabel>QLabel</span></code></p> <p>Label that catch left mouse click and can trigger 'clicked' signal.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/widgets.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>458</span>
<span class=normal>459</span>
<span class=normal>460</span>
<span class=normal>461</span>
<span class=normal>462</span>
<span class=normal>463</span>
<span class=normal>464</span>
<span class=normal>465</span>
<span class=normal>466</span>
<span class=normal>467</span>
<span class=normal>468</span>
<span class=normal>469</span>
<span class=normal>470</span>
<span class=normal>471</span>
<span class=normal>472</span>
<span class=normal>473</span>
<span class=normal>474</span>
<span class=normal>475</span>
<span class=normal>476</span>
<span class=normal>477</span>
<span class=normal>478</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>ClickableLabel</span><span class=p>(</span><span class=n>QtWidgets</span><span class=o>.</span><span class=n>QLabel</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Label that catch left mouse click and can trigger &#39;clicked&#39; signal.&quot;&quot;&quot;</span>
    <span class=n>clicked</span> <span class=o>=</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Signal</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>parent</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>ClickableLabel</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>parent</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_mouse_pressed</span> <span class=o>=</span> <span class=kc>False</span>

    <span class=k>def</span><span class=w> </span><span class=nf>mousePressEvent</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
        <span class=k>if</span> <span class=n>event</span><span class=o>.</span><span class=n>button</span><span class=p>()</span> <span class=o>==</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>LeftButton</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_mouse_pressed</span> <span class=o>=</span> <span class=kc>True</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>ClickableLabel</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>mousePressEvent</span><span class=p>(</span><span class=n>event</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>mouseReleaseEvent</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_mouse_pressed</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_mouse_pressed</span> <span class=o>=</span> <span class=kc>False</span>
            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>rect</span><span class=p>()</span><span class=o>.</span><span class=n>contains</span><span class=p>(</span><span class=n>event</span><span class=o>.</span><span class=n>pos</span><span class=p>()):</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>clicked</span><span class=o>.</span><span class=n>emit</span><span class=p>()</span>

        <span class=nb>super</span><span class=p>(</span><span class=n>ClickableLabel</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>mouseReleaseEvent</span><span class=p>(</span><span class=n>event</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.tools.utils.ComboBox class="doc doc-heading"> <code>ComboBox</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=qtpy.QtWidgets.QComboBox>QComboBox</span></code></p> <p>Base of combobox with pre-implement changes used in tools.</p> <p>Combobox is using styled delegate by default so stylesheets are propagated.</p> <p>Items are not changed on scroll until the combobox is in focus.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/widgets.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span>
<span class=normal>62</span>
<span class=normal>63</span>
<span class=normal>64</span>
<span class=normal>65</span>
<span class=normal>66</span>
<span class=normal>67</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>ComboBox</span><span class=p>(</span><span class=n>QtWidgets</span><span class=o>.</span><span class=n>QComboBox</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Base of combobox with pre-implement changes used in tools.</span>

<span class=sd>    Combobox is using styled delegate by default so stylesheets are propagated.</span>

<span class=sd>    Items are not changed on scroll until the combobox is in focus.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
        <span class=n>delegate</span> <span class=o>=</span> <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QStyledItemDelegate</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>setItemDelegate</span><span class=p>(</span><span class=n>delegate</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>setFocusPolicy</span><span class=p>(</span><span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>StrongFocus</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_delegate</span> <span class=o>=</span> <span class=n>delegate</span>

    <span class=k>def</span><span class=w> </span><span class=nf>wheelEvent</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>hasFocus</span><span class=p>():</span>
            <span class=k>return</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>wheelEvent</span><span class=p>(</span><span class=n>event</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.tools.utils.CustomTextComboBox class="doc doc-heading"> <code>CustomTextComboBox</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="ComboBox (client.ayon_core.tools.utils.widgets.ComboBox)" href=widgets.html#client.ayon_core.tools.utils.widgets.ComboBox>ComboBox</a></code></p> <p>Combobox which can have different text showed.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/widgets.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>70</span>
<span class=normal>71</span>
<span class=normal>72</span>
<span class=normal>73</span>
<span class=normal>74</span>
<span class=normal>75</span>
<span class=normal>76</span>
<span class=normal>77</span>
<span class=normal>78</span>
<span class=normal>79</span>
<span class=normal>80</span>
<span class=normal>81</span>
<span class=normal>82</span>
<span class=normal>83</span>
<span class=normal>84</span>
<span class=normal>85</span>
<span class=normal>86</span>
<span class=normal>87</span>
<span class=normal>88</span>
<span class=normal>89</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>CustomTextComboBox</span><span class=p>(</span><span class=n>ComboBox</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Combobox which can have different text showed.&quot;&quot;&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_custom_text</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_custom_text</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>text</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_custom_text</span> <span class=o>!=</span> <span class=n>text</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_custom_text</span> <span class=o>=</span> <span class=n>text</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>repaint</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>paintEvent</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
        <span class=n>painter</span> <span class=o>=</span> <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QStylePainter</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
        <span class=n>option</span> <span class=o>=</span> <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QStyleOptionComboBox</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>initStyleOption</span><span class=p>(</span><span class=n>option</span><span class=p>)</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_custom_text</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>option</span><span class=o>.</span><span class=n>currentText</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_custom_text</span>
        <span class=n>painter</span><span class=o>.</span><span class=n>drawComplexControl</span><span class=p>(</span><span class=n>QtWidgets</span><span class=o>.</span><span class=n>QStyle</span><span class=o>.</span><span class=n>CC_ComboBox</span><span class=p>,</span> <span class=n>option</span><span class=p>)</span>
        <span class=n>painter</span><span class=o>.</span><span class=n>drawControl</span><span class=p>(</span><span class=n>QtWidgets</span><span class=o>.</span><span class=n>QStyle</span><span class=o>.</span><span class=n>CE_ComboBoxLabel</span><span class=p>,</span> <span class=n>option</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.tools.utils.DeselectableTreeView class="doc doc-heading"> <code>DeselectableTreeView</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=qtpy.QtWidgets.QTreeView>QTreeView</span></code></p> <p>A tree view that deselects on clicking on an empty area in the view</p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/views.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>DeselectableTreeView</span><span class=p>(</span><span class=n>QtWidgets</span><span class=o>.</span><span class=n>QTreeView</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;A tree view that deselects on clicking on an empty area in the view&quot;&quot;&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=nf>mousePressEvent</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
        <span class=n>index</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>indexAt</span><span class=p>(</span><span class=n>event</span><span class=o>.</span><span class=n>pos</span><span class=p>())</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>index</span><span class=o>.</span><span class=n>isValid</span><span class=p>():</span>
            <span class=c1># clear the selection</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>clearSelection</span><span class=p>()</span>
            <span class=c1># clear the current index</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>setCurrentIndex</span><span class=p>(</span><span class=n>QtCore</span><span class=o>.</span><span class=n>QModelIndex</span><span class=p>())</span>

        <span class=k>elif</span> <span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>selectionModel</span><span class=p>()</span><span class=o>.</span><span class=n>isSelected</span><span class=p>(</span><span class=n>index</span><span class=p>)</span>
            <span class=ow>and</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>selectionModel</span><span class=p>()</span><span class=o>.</span><span class=n>selectedRows</span><span class=p>())</span> <span class=o>==</span> <span class=mi>1</span>
            <span class=ow>and</span> <span class=n>event</span><span class=o>.</span><span class=n>modifiers</span><span class=p>()</span> <span class=o>==</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>NoModifier</span>
        <span class=p>):</span>
            <span class=n>event</span><span class=o>.</span><span class=n>setModifiers</span><span class=p>(</span><span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>ControlModifier</span><span class=p>)</span>

        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>mousePressEvent</span><span class=p>(</span><span class=n>event</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.tools.utils.DynamicQThread class="doc doc-heading"> <code>DynamicQThread</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=qtpy.QtCore.QThread>QThread</span></code></p> <p>QThread which can run any function with argument and kwargs.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>func</code> </td> <td> <code><span title=function>function</span></code> </td> <td> <div class=doc-md-description> <p>Function which will be called.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>args</code> </td> <td> <code><span title=tuple>tuple</span></code> </td> <td> <div class=doc-md-description> <p>Arguments which will be passed to function.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>kwargs</code> </td> <td> <code><span title=tuple>tuple</span></code> </td> <td> <div class=doc-md-description> <p>Keyword arguments which will be passed to function.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>parent</code> </td> <td> <code><span title=QObject>QObject</span></code> </td> <td> <div class=doc-md-description> <p>Parent of thread.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>316</span>
<span class=normal>317</span>
<span class=normal>318</span>
<span class=normal>319</span>
<span class=normal>320</span>
<span class=normal>321</span>
<span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span>
<span class=normal>325</span>
<span class=normal>326</span>
<span class=normal>327</span>
<span class=normal>328</span>
<span class=normal>329</span>
<span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span>
<span class=normal>334</span>
<span class=normal>335</span>
<span class=normal>336</span>
<span class=normal>337</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>DynamicQThread</span><span class=p>(</span><span class=n>QtCore</span><span class=o>.</span><span class=n>QThread</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;QThread which can run any function with argument and kwargs.</span>

<span class=sd>    Args:</span>
<span class=sd>        func (function): Function which will be called.</span>
<span class=sd>        args (tuple): Arguments which will be passed to function.</span>
<span class=sd>        kwargs (tuple): Keyword arguments which will be passed to function.</span>
<span class=sd>        parent (QObject): Parent of thread.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>func</span><span class=p>,</span> <span class=n>args</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>parent</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>DynamicQThread</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>parent</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>args</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>args</span> <span class=o>=</span> <span class=nb>tuple</span><span class=p>()</span>
        <span class=k>if</span> <span class=n>kwargs</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>kwargs</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_func</span> <span class=o>=</span> <span class=n>func</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_args</span> <span class=o>=</span> <span class=n>args</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_kwargs</span> <span class=o>=</span> <span class=n>kwargs</span>

    <span class=k>def</span><span class=w> </span><span class=nf>run</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Execute the function with arguments.&quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_func</span><span class=p>(</span><span class=o>*</span><span class=bp>self</span><span class=o>.</span><span class=n>_args</span><span class=p>,</span> <span class=o>**</span><span class=bp>self</span><span class=o>.</span><span class=n>_kwargs</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.DynamicQThread.run class="doc doc-heading"> <code class="highlight language-python"><span class=n>run</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Execute the function with arguments.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>335</span>
<span class=normal>336</span>
<span class=normal>337</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>run</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Execute the function with arguments.&quot;&quot;&quot;</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_func</span><span class=p>(</span><span class=o>*</span><span class=bp>self</span><span class=o>.</span><span class=n>_args</span><span class=p>,</span> <span class=o>**</span><span class=bp>self</span><span class=o>.</span><span class=n>_kwargs</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.tools.utils.ElideLabel class="doc doc-heading"> <code>ElideLabel</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=qtpy.QtWidgets.QLabel>QLabel</span></code></p> <p>Label which elide text.</p> <p>By default, elide happens on right side. Can be changed with 'set_elide_mode' method.</p> <p>It is not possible to use other features of QLabel like word wrap or interactive text. This is a simple label which elide text.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/widgets.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>ElideLabel</span><span class=p>(</span><span class=n>QtWidgets</span><span class=o>.</span><span class=n>QLabel</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Label which elide text.</span>

<span class=sd>    By default, elide happens on right side. Can be changed with</span>
<span class=sd>    &#39;set_elide_mode&#39; method.</span>

<span class=sd>    It is not possible to use other features of QLabel like word wrap or</span>
<span class=sd>    interactive text. This is a simple label which elide text.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>setSizePolicy</span><span class=p>(</span>
            <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QSizePolicy</span><span class=o>.</span><span class=n>Expanding</span><span class=p>,</span>
            <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QSizePolicy</span><span class=o>.</span><span class=n>Preferred</span>
        <span class=p>)</span>
        <span class=c1># Store text set during init</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_text</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>text</span><span class=p>()</span>
        <span class=c1># Define initial elide mode</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_elide_mode</span> <span class=o>=</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>ElideRight</span>
        <span class=c1># Make sure that text of QLabel is empty</span>
        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>setText</span><span class=p>(</span><span class=s2>&quot;&quot;</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>setText</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>text</span><span class=p>):</span>
        <span class=c1># Update private text attribute and force update</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_text</span> <span class=o>=</span> <span class=n>text</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>update</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>setWordWrap</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>word_wrap</span><span class=p>):</span>
        <span class=c1># Word wrap is not supported in &#39;ElideLabel&#39;</span>
        <span class=k>if</span> <span class=n>word_wrap</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;Word wrap is not supported in &#39;ElideLabel&#39;.&quot;</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>contextMenuEvent</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
        <span class=n>menu</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>create_context_menu</span><span class=p>(</span><span class=n>event</span><span class=o>.</span><span class=n>pos</span><span class=p>())</span>
        <span class=k>if</span> <span class=n>menu</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>event</span><span class=o>.</span><span class=n>ignore</span><span class=p>()</span>
            <span class=k>return</span>
        <span class=n>event</span><span class=o>.</span><span class=n>accept</span><span class=p>()</span>
        <span class=n>menu</span><span class=o>.</span><span class=n>setAttribute</span><span class=p>(</span><span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>WA_DeleteOnClose</span><span class=p>)</span>
        <span class=n>menu</span><span class=o>.</span><span class=n>popup</span><span class=p>(</span><span class=n>event</span><span class=o>.</span><span class=n>globalPos</span><span class=p>())</span>

    <span class=k>def</span><span class=w> </span><span class=nf>create_context_menu</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>pos</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_text</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>None</span>
        <span class=n>menu</span> <span class=o>=</span> <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QMenu</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>

        <span class=c1># Copy text action</span>
        <span class=n>copy_action</span> <span class=o>=</span> <span class=n>menu</span><span class=o>.</span><span class=n>addAction</span><span class=p>(</span><span class=s2>&quot;Copy&quot;</span><span class=p>)</span>
        <span class=n>copy_action</span><span class=o>.</span><span class=n>setObjectName</span><span class=p>(</span><span class=s2>&quot;edit-copy&quot;</span><span class=p>)</span>
        <span class=n>icon</span> <span class=o>=</span> <span class=n>QtGui</span><span class=o>.</span><span class=n>QIcon</span><span class=o>.</span><span class=n>fromTheme</span><span class=p>(</span><span class=s2>&quot;edit-copy&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>icon</span><span class=o>.</span><span class=n>isNull</span><span class=p>():</span>
            <span class=n>copy_action</span><span class=o>.</span><span class=n>setIcon</span><span class=p>(</span><span class=n>icon</span><span class=p>)</span>

        <span class=n>copy_action</span><span class=o>.</span><span class=n>triggered</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_on_copy_text</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>menu</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_set</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>text</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>setText</span><span class=p>(</span><span class=n>text</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_elide_mode</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>elide_mode</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Change elide type.</span>

<span class=sd>        Args:</span>
<span class=sd>            elide_mode: Possible elide type. Available in &#39;QtCore.Qt&#39;</span>
<span class=sd>                &#39;ElideLeft&#39;, &#39;ElideRight&#39; and &#39;ElideMiddle&#39;.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=n>elide_mode</span> <span class=o>==</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>ElideNone</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
                <span class=s2>&quot;Invalid elide type. &#39;ElideNone&#39; is not supported.&quot;</span>
            <span class=p>)</span>

        <span class=k>if</span> <span class=n>elide_mode</span> <span class=ow>not</span> <span class=ow>in</span> <span class=p>(</span>
            <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>ElideLeft</span><span class=p>,</span>
            <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>ElideRight</span><span class=p>,</span>
            <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>ElideMiddle</span><span class=p>,</span>
        <span class=p>):</span>
            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Unknown value &#39;</span><span class=si>{</span><span class=n>elide_mode</span><span class=si>}</span><span class=s2>&#39;&quot;</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_elide_mode</span> <span class=o>=</span> <span class=n>elide_mode</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>update</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>paintEvent</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>paintEvent</span><span class=p>(</span><span class=n>event</span><span class=p>)</span>

        <span class=n>painter</span> <span class=o>=</span> <span class=n>QtGui</span><span class=o>.</span><span class=n>QPainter</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
        <span class=n>fm</span> <span class=o>=</span> <span class=n>painter</span><span class=o>.</span><span class=n>fontMetrics</span><span class=p>()</span>
        <span class=n>elided_line</span> <span class=o>=</span> <span class=n>fm</span><span class=o>.</span><span class=n>elidedText</span><span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_text</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_elide_mode</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>width</span><span class=p>()</span>
        <span class=p>)</span>
        <span class=n>painter</span><span class=o>.</span><span class=n>drawText</span><span class=p>(</span><span class=n>QtCore</span><span class=o>.</span><span class=n>QPoint</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=n>fm</span><span class=o>.</span><span class=n>ascent</span><span class=p>()),</span> <span class=n>elided_line</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_on_copy_text</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=n>clipboard</span> <span class=o>=</span> <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QApplication</span><span class=o>.</span><span class=n>clipboard</span><span class=p>()</span>
        <span class=n>clipboard</span><span class=o>.</span><span class=n>setText</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_text</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.ElideLabel.set_elide_mode class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_elide_mode</span><span class=p>(</span><span class=n>elide_mode</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Change elide type.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>elide_mode</code> </td> <td> </td> <td> <div class=doc-md-description> <p>Possible elide type. Available in 'QtCore.Qt' 'ElideLeft', 'ElideRight' and 'ElideMiddle'.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/widgets.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_elide_mode</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>elide_mode</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Change elide type.</span>

<span class=sd>    Args:</span>
<span class=sd>        elide_mode: Possible elide type. Available in &#39;QtCore.Qt&#39;</span>
<span class=sd>            &#39;ElideLeft&#39;, &#39;ElideRight&#39; and &#39;ElideMiddle&#39;.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=n>elide_mode</span> <span class=o>==</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>ElideNone</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
            <span class=s2>&quot;Invalid elide type. &#39;ElideNone&#39; is not supported.&quot;</span>
        <span class=p>)</span>

    <span class=k>if</span> <span class=n>elide_mode</span> <span class=ow>not</span> <span class=ow>in</span> <span class=p>(</span>
        <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>ElideLeft</span><span class=p>,</span>
        <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>ElideRight</span><span class=p>,</span>
        <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>ElideMiddle</span><span class=p>,</span>
    <span class=p>):</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Unknown value &#39;</span><span class=si>{</span><span class=n>elide_mode</span><span class=si>}</span><span class=s2>&#39;&quot;</span><span class=p>)</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_elide_mode</span> <span class=o>=</span> <span class=n>elide_mode</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>update</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.tools.utils.ExpandingTextEdit class="doc doc-heading"> <code>ExpandingTextEdit</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=qtpy.QtWidgets.QTextEdit>QTextEdit</span></code></p> <p>QTextEdit which does not have sroll area but expands height.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/widgets.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>381</span>
<span class=normal>382</span>
<span class=normal>383</span>
<span class=normal>384</span>
<span class=normal>385</span>
<span class=normal>386</span>
<span class=normal>387</span>
<span class=normal>388</span>
<span class=normal>389</span>
<span class=normal>390</span>
<span class=normal>391</span>
<span class=normal>392</span>
<span class=normal>393</span>
<span class=normal>394</span>
<span class=normal>395</span>
<span class=normal>396</span>
<span class=normal>397</span>
<span class=normal>398</span>
<span class=normal>399</span>
<span class=normal>400</span>
<span class=normal>401</span>
<span class=normal>402</span>
<span class=normal>403</span>
<span class=normal>404</span>
<span class=normal>405</span>
<span class=normal>406</span>
<span class=normal>407</span>
<span class=normal>408</span>
<span class=normal>409</span>
<span class=normal>410</span>
<span class=normal>411</span>
<span class=normal>412</span>
<span class=normal>413</span>
<span class=normal>414</span>
<span class=normal>415</span>
<span class=normal>416</span>
<span class=normal>417</span>
<span class=normal>418</span>
<span class=normal>419</span>
<span class=normal>420</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>ExpandingTextEdit</span><span class=p>(</span><span class=n>QtWidgets</span><span class=o>.</span><span class=n>QTextEdit</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;QTextEdit which does not have sroll area but expands height.&quot;&quot;&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>parent</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>ExpandingTextEdit</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>parent</span><span class=p>)</span>

        <span class=n>size_policy</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>sizePolicy</span><span class=p>()</span>
        <span class=n>size_policy</span><span class=o>.</span><span class=n>setHeightForWidth</span><span class=p>(</span><span class=kc>True</span><span class=p>)</span>
        <span class=n>size_policy</span><span class=o>.</span><span class=n>setVerticalPolicy</span><span class=p>(</span><span class=n>QtWidgets</span><span class=o>.</span><span class=n>QSizePolicy</span><span class=o>.</span><span class=n>Preferred</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>setSizePolicy</span><span class=p>(</span><span class=n>size_policy</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>setHorizontalScrollBarPolicy</span><span class=p>(</span><span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>ScrollBarAlwaysOff</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>setVerticalScrollBarPolicy</span><span class=p>(</span><span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>ScrollBarAlwaysOff</span><span class=p>)</span>

        <span class=n>doc</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>document</span><span class=p>()</span>
        <span class=n>doc</span><span class=o>.</span><span class=n>contentsChanged</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_on_doc_change</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_on_doc_change</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>updateGeometry</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>hasHeightForWidth</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=kc>True</span>

    <span class=k>def</span><span class=w> </span><span class=nf>heightForWidth</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>width</span><span class=p>):</span>
        <span class=n>margins</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>contentsMargins</span><span class=p>()</span>

        <span class=n>document_width</span> <span class=o>=</span> <span class=mi>0</span>
        <span class=k>if</span> <span class=n>width</span> <span class=o>&gt;=</span> <span class=n>margins</span><span class=o>.</span><span class=n>left</span><span class=p>()</span> <span class=o>+</span> <span class=n>margins</span><span class=o>.</span><span class=n>right</span><span class=p>():</span>
            <span class=n>document_width</span> <span class=o>=</span> <span class=n>width</span> <span class=o>-</span> <span class=n>margins</span><span class=o>.</span><span class=n>left</span><span class=p>()</span> <span class=o>-</span> <span class=n>margins</span><span class=o>.</span><span class=n>right</span><span class=p>()</span>

        <span class=n>document</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>document</span><span class=p>()</span><span class=o>.</span><span class=n>clone</span><span class=p>()</span>
        <span class=n>document</span><span class=o>.</span><span class=n>setTextWidth</span><span class=p>(</span><span class=n>document_width</span><span class=p>)</span>

        <span class=k>return</span> <span class=n>math</span><span class=o>.</span><span class=n>ceil</span><span class=p>(</span>
            <span class=n>margins</span><span class=o>.</span><span class=n>top</span><span class=p>()</span> <span class=o>+</span> <span class=n>document</span><span class=o>.</span><span class=n>size</span><span class=p>()</span><span class=o>.</span><span class=n>height</span><span class=p>()</span> <span class=o>+</span> <span class=n>margins</span><span class=o>.</span><span class=n>bottom</span><span class=p>()</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>sizeHint</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=n>width</span> <span class=o>=</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>sizeHint</span><span class=p>()</span><span class=o>.</span><span class=n>width</span><span class=p>()</span>
        <span class=k>return</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>QSize</span><span class=p>(</span><span class=n>width</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>heightForWidth</span><span class=p>(</span><span class=n>width</span><span class=p>))</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.tools.utils.FlowLayout class="doc doc-heading"> <code>FlowLayout</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=qtpy.QtWidgets.QLayout>QLayout</span></code></p> <p>Layout that organize widgets by minimum size into a flow layout.</p> <p>Layout is putting widget from left to right and top to bottom. When widget can't fit a row it is added to next line. Minimum size matches widget with biggest 'sizeHint' width and height using calculated geometry.</p> <p>Content margins are part of calculations. It is possible to define horizontal and vertical spacing.</p> <p>Layout does not support stretch and spacing items.</p> <details class=todos open> <summary>Todos</summary> <p>Unified width concept -&gt; use width of largest item so all of them are same. This could allow to have minimum columns option too.</p> </details> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/layouts.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>  4</span>
<span class=normal>  5</span>
<span class=normal>  6</span>
<span class=normal>  7</span>
<span class=normal>  8</span>
<span class=normal>  9</span>
<span class=normal> 10</span>
<span class=normal> 11</span>
<span class=normal> 12</span>
<span class=normal> 13</span>
<span class=normal> 14</span>
<span class=normal> 15</span>
<span class=normal> 16</span>
<span class=normal> 17</span>
<span class=normal> 18</span>
<span class=normal> 19</span>
<span class=normal> 20</span>
<span class=normal> 21</span>
<span class=normal> 22</span>
<span class=normal> 23</span>
<span class=normal> 24</span>
<span class=normal> 25</span>
<span class=normal> 26</span>
<span class=normal> 27</span>
<span class=normal> 28</span>
<span class=normal> 29</span>
<span class=normal> 30</span>
<span class=normal> 31</span>
<span class=normal> 32</span>
<span class=normal> 33</span>
<span class=normal> 34</span>
<span class=normal> 35</span>
<span class=normal> 36</span>
<span class=normal> 37</span>
<span class=normal> 38</span>
<span class=normal> 39</span>
<span class=normal> 40</span>
<span class=normal> 41</span>
<span class=normal> 42</span>
<span class=normal> 43</span>
<span class=normal> 44</span>
<span class=normal> 45</span>
<span class=normal> 46</span>
<span class=normal> 47</span>
<span class=normal> 48</span>
<span class=normal> 49</span>
<span class=normal> 50</span>
<span class=normal> 51</span>
<span class=normal> 52</span>
<span class=normal> 53</span>
<span class=normal> 54</span>
<span class=normal> 55</span>
<span class=normal> 56</span>
<span class=normal> 57</span>
<span class=normal> 58</span>
<span class=normal> 59</span>
<span class=normal> 60</span>
<span class=normal> 61</span>
<span class=normal> 62</span>
<span class=normal> 63</span>
<span class=normal> 64</span>
<span class=normal> 65</span>
<span class=normal> 66</span>
<span class=normal> 67</span>
<span class=normal> 68</span>
<span class=normal> 69</span>
<span class=normal> 70</span>
<span class=normal> 71</span>
<span class=normal> 72</span>
<span class=normal> 73</span>
<span class=normal> 74</span>
<span class=normal> 75</span>
<span class=normal> 76</span>
<span class=normal> 77</span>
<span class=normal> 78</span>
<span class=normal> 79</span>
<span class=normal> 80</span>
<span class=normal> 81</span>
<span class=normal> 82</span>
<span class=normal> 83</span>
<span class=normal> 84</span>
<span class=normal> 85</span>
<span class=normal> 86</span>
<span class=normal> 87</span>
<span class=normal> 88</span>
<span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>FlowLayout</span><span class=p>(</span><span class=n>QtWidgets</span><span class=o>.</span><span class=n>QLayout</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Layout that organize widgets by minimum size into a flow layout.</span>

<span class=sd>    Layout is putting widget from left to right and top to bottom. When widget</span>
<span class=sd>    can&#39;t fit a row it is added to next line. Minimum size matches widget with</span>
<span class=sd>    biggest &#39;sizeHint&#39; width and height using calculated geometry.</span>

<span class=sd>    Content margins are part of calculations. It is possible to define</span>
<span class=sd>    horizontal and vertical spacing.</span>

<span class=sd>    Layout does not support stretch and spacing items.</span>

<span class=sd>    Todos:</span>
<span class=sd>        Unified width concept -&gt; use width of largest item so all of them are</span>
<span class=sd>            same. This could allow to have minimum columns option too.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>parent</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>FlowLayout</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>parent</span><span class=p>)</span>

        <span class=c1># spaces between each item</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_horizontal_spacing</span> <span class=o>=</span> <span class=mi>5</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_vertical_spacing</span> <span class=o>=</span> <span class=mi>5</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_items</span> <span class=o>=</span> <span class=p>[]</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__del__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>while</span> <span class=bp>self</span><span class=o>.</span><span class=n>count</span><span class=p>():</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>takeAt</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=kc>False</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>isEmpty</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_items</span><span class=p>:</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=n>item</span><span class=o>.</span><span class=n>isEmpty</span><span class=p>():</span>
                <span class=k>return</span> <span class=kc>False</span>
        <span class=k>return</span> <span class=kc>True</span>

    <span class=k>def</span><span class=w> </span><span class=nf>setSpacing</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>spacing</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_horizontal_spacing</span> <span class=o>=</span> <span class=n>spacing</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_vertical_spacing</span> <span class=o>=</span> <span class=n>spacing</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>invalidate</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>setHorizontalSpacing</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>spacing</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_horizontal_spacing</span> <span class=o>=</span> <span class=n>spacing</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>invalidate</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>setVerticalSpacing</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>spacing</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_vertical_spacing</span> <span class=o>=</span> <span class=n>spacing</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>invalidate</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>addItem</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>item</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_items</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>invalidate</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>count</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_items</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>itemAt</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>index</span><span class=p>):</span>
        <span class=k>if</span> <span class=mi>0</span> <span class=o>&lt;=</span> <span class=n>index</span> <span class=o>&lt;</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_items</span><span class=p>):</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_items</span><span class=p>[</span><span class=n>index</span><span class=p>]</span>
        <span class=k>return</span> <span class=kc>None</span>

    <span class=k>def</span><span class=w> </span><span class=nf>takeAt</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>index</span><span class=p>,</span> <span class=n>invalidate</span><span class=o>=</span><span class=kc>True</span><span class=p>):</span>
        <span class=k>if</span> <span class=mi>0</span> <span class=o>&lt;=</span> <span class=n>index</span> <span class=o>&lt;</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_items</span><span class=p>):</span>
            <span class=n>item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_items</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>index</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>invalidate</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>invalidate</span><span class=p>()</span>
            <span class=k>return</span> <span class=n>item</span>
        <span class=k>return</span> <span class=kc>None</span>

    <span class=k>def</span><span class=w> </span><span class=nf>expandingDirections</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>Orientations</span><span class=p>(</span><span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>Vertical</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>hasHeightForWidth</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=kc>True</span>

    <span class=k>def</span><span class=w> </span><span class=nf>heightForWidth</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>width</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_setup_geometry</span><span class=p>(</span><span class=n>QtCore</span><span class=o>.</span><span class=n>QRect</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=n>width</span><span class=p>,</span> <span class=mi>0</span><span class=p>),</span> <span class=kc>True</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>setGeometry</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>rect</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>FlowLayout</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>setGeometry</span><span class=p>(</span><span class=n>rect</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_setup_geometry</span><span class=p>(</span><span class=n>rect</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>sizeHint</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>minimumSize</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>minimumSize</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=n>size</span> <span class=o>=</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>QSize</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
        <span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_items</span><span class=p>:</span>
            <span class=n>widget</span> <span class=o>=</span> <span class=n>item</span><span class=o>.</span><span class=n>widget</span><span class=p>()</span>
            <span class=k>if</span> <span class=n>widget</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
                <span class=n>parent</span> <span class=o>=</span> <span class=n>widget</span><span class=o>.</span><span class=n>parent</span><span class=p>()</span>
                <span class=k>if</span> <span class=ow>not</span> <span class=n>widget</span><span class=o>.</span><span class=n>isVisibleTo</span><span class=p>(</span><span class=n>parent</span><span class=p>):</span>
                    <span class=k>continue</span>
            <span class=n>size</span> <span class=o>=</span> <span class=n>size</span><span class=o>.</span><span class=n>expandedTo</span><span class=p>(</span><span class=n>item</span><span class=o>.</span><span class=n>minimumSize</span><span class=p>())</span>

        <span class=k>if</span> <span class=n>size</span><span class=o>.</span><span class=n>width</span><span class=p>()</span> <span class=o>&lt;</span> <span class=mi>1</span> <span class=ow>or</span> <span class=n>size</span><span class=o>.</span><span class=n>height</span><span class=p>()</span> <span class=o>&lt;</span> <span class=mi>1</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>size</span>
        <span class=n>l_margin</span><span class=p>,</span> <span class=n>t_margin</span><span class=p>,</span> <span class=n>r_margin</span><span class=p>,</span> <span class=n>b_margin</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>getContentsMargins</span><span class=p>()</span>
        <span class=n>size</span> <span class=o>+=</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>QSize</span><span class=p>(</span><span class=n>l_margin</span> <span class=o>+</span> <span class=n>r_margin</span><span class=p>,</span> <span class=n>t_margin</span> <span class=o>+</span> <span class=n>b_margin</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>size</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_setup_geometry</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>rect</span><span class=p>,</span> <span class=n>only_calculate</span><span class=o>=</span><span class=kc>False</span><span class=p>):</span>
        <span class=n>h_spacing</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_horizontal_spacing</span>
        <span class=n>v_spacing</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_vertical_spacing</span>
        <span class=n>l_margin</span><span class=p>,</span> <span class=n>t_margin</span><span class=p>,</span> <span class=n>r_margin</span><span class=p>,</span> <span class=n>b_margin</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>getContentsMargins</span><span class=p>()</span>

        <span class=n>left_x</span> <span class=o>=</span> <span class=n>rect</span><span class=o>.</span><span class=n>x</span><span class=p>()</span> <span class=o>+</span> <span class=n>l_margin</span>
        <span class=n>top_y</span> <span class=o>=</span> <span class=n>rect</span><span class=o>.</span><span class=n>y</span><span class=p>()</span> <span class=o>+</span> <span class=n>t_margin</span>
        <span class=n>pos_x</span> <span class=o>=</span> <span class=n>left_x</span>
        <span class=n>pos_y</span> <span class=o>=</span> <span class=n>top_y</span>
        <span class=n>row_height</span> <span class=o>=</span> <span class=mi>0</span>
        <span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_items</span><span class=p>:</span>
            <span class=n>item_hint</span> <span class=o>=</span> <span class=n>item</span><span class=o>.</span><span class=n>sizeHint</span><span class=p>()</span>
            <span class=n>item_width</span> <span class=o>=</span> <span class=n>item_hint</span><span class=o>.</span><span class=n>width</span><span class=p>()</span>
            <span class=n>item_height</span> <span class=o>=</span> <span class=n>item_hint</span><span class=o>.</span><span class=n>height</span><span class=p>()</span>
            <span class=k>if</span> <span class=n>item_width</span> <span class=o>&lt;</span> <span class=mi>1</span> <span class=ow>or</span> <span class=n>item_height</span> <span class=o>&lt;</span> <span class=mi>1</span><span class=p>:</span>
                <span class=k>continue</span>

            <span class=n>end_x</span> <span class=o>=</span> <span class=n>pos_x</span> <span class=o>+</span> <span class=n>item_width</span>

            <span class=n>wrap</span> <span class=o>=</span> <span class=p>(</span>
                <span class=n>row_height</span> <span class=o>&gt;</span> <span class=mi>0</span>
                <span class=ow>and</span> <span class=p>(</span>
                    <span class=n>end_x</span> <span class=o>&gt;</span> <span class=n>rect</span><span class=o>.</span><span class=n>right</span><span class=p>()</span>
                    <span class=ow>or</span> <span class=p>(</span><span class=n>end_x</span> <span class=o>+</span> <span class=n>r_margin</span><span class=p>)</span> <span class=o>&gt;</span> <span class=n>rect</span><span class=o>.</span><span class=n>right</span><span class=p>()</span>
                <span class=p>)</span>
            <span class=p>)</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=n>wrap</span><span class=p>:</span>
                <span class=n>next_pos_x</span> <span class=o>=</span> <span class=n>end_x</span> <span class=o>+</span> <span class=n>h_spacing</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=n>pos_x</span> <span class=o>=</span> <span class=n>left_x</span>
                <span class=n>pos_y</span> <span class=o>+=</span> <span class=n>row_height</span> <span class=o>+</span> <span class=n>v_spacing</span>
                <span class=n>next_pos_x</span> <span class=o>=</span> <span class=n>pos_x</span> <span class=o>+</span> <span class=n>item_width</span> <span class=o>+</span> <span class=n>h_spacing</span>
                <span class=n>row_height</span> <span class=o>=</span> <span class=mi>0</span>

            <span class=k>if</span> <span class=ow>not</span> <span class=n>only_calculate</span><span class=p>:</span>
                <span class=n>item</span><span class=o>.</span><span class=n>setGeometry</span><span class=p>(</span>
                    <span class=n>QtCore</span><span class=o>.</span><span class=n>QRect</span><span class=p>(</span><span class=n>pos_x</span><span class=p>,</span> <span class=n>pos_y</span><span class=p>,</span> <span class=n>item_width</span><span class=p>,</span> <span class=n>item_height</span><span class=p>)</span>
                <span class=p>)</span>

            <span class=n>pos_x</span> <span class=o>=</span> <span class=n>next_pos_x</span>
            <span class=n>row_height</span> <span class=o>=</span> <span class=nb>max</span><span class=p>(</span><span class=n>row_height</span><span class=p>,</span> <span class=n>item_height</span><span class=p>)</span>

        <span class=n>height</span> <span class=o>=</span> <span class=p>(</span><span class=n>pos_y</span> <span class=o>-</span> <span class=n>top_y</span><span class=p>)</span> <span class=o>+</span> <span class=n>row_height</span>
        <span class=k>if</span> <span class=n>height</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>:</span>
            <span class=n>height</span> <span class=o>+=</span> <span class=n>b_margin</span>
        <span class=k>return</span> <span class=n>height</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.tools.utils.FocusDoubleSpinBox class="doc doc-heading"> <code>FocusDoubleSpinBox</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=qtpy.QtWidgets.QDoubleSpinBox>QDoubleSpinBox</span></code></p> <p>QDoubleSpinBox which allow scroll wheel changes only in active state.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/widgets.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>FocusDoubleSpinBox</span><span class=p>(</span><span class=n>QtWidgets</span><span class=o>.</span><span class=n>QDoubleSpinBox</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;QDoubleSpinBox which allow scroll wheel changes only in active state.&quot;&quot;&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>FocusDoubleSpinBox</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>setFocusPolicy</span><span class=p>(</span><span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>StrongFocus</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>wheelEvent</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>hasFocus</span><span class=p>():</span>
            <span class=n>event</span><span class=o>.</span><span class=n>ignore</span><span class=p>()</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=nb>super</span><span class=p>(</span><span class=n>FocusDoubleSpinBox</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>wheelEvent</span><span class=p>(</span><span class=n>event</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.tools.utils.FocusSpinBox class="doc doc-heading"> <code>FocusSpinBox</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=qtpy.QtWidgets.QSpinBox>QSpinBox</span></code></p> <p>QSpinBox which allow scroll wheel changes only in active state.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/widgets.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>FocusSpinBox</span><span class=p>(</span><span class=n>QtWidgets</span><span class=o>.</span><span class=n>QSpinBox</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;QSpinBox which allow scroll wheel changes only in active state.&quot;&quot;&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>FocusSpinBox</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>setFocusPolicy</span><span class=p>(</span><span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>StrongFocus</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>wheelEvent</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>hasFocus</span><span class=p>():</span>
            <span class=n>event</span><span class=o>.</span><span class=n>ignore</span><span class=p>()</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=nb>super</span><span class=p>(</span><span class=n>FocusSpinBox</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>wheelEvent</span><span class=p>(</span><span class=n>event</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.tools.utils.FoldersQtModel class="doc doc-heading"> <code>FoldersQtModel</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=qtpy.QtGui.QStandardItemModel>QStandardItemModel</span></code></p> <p>Folders model which cares about refresh of folders.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>controller</code> </td> <td> <code><span title=AbstractWorkfilesFrontend>AbstractWorkfilesFrontend</span></code> </td> <td> <div class=doc-md-description> <p>The control object.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/folders_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 25</span>
<span class=normal> 26</span>
<span class=normal> 27</span>
<span class=normal> 28</span>
<span class=normal> 29</span>
<span class=normal> 30</span>
<span class=normal> 31</span>
<span class=normal> 32</span>
<span class=normal> 33</span>
<span class=normal> 34</span>
<span class=normal> 35</span>
<span class=normal> 36</span>
<span class=normal> 37</span>
<span class=normal> 38</span>
<span class=normal> 39</span>
<span class=normal> 40</span>
<span class=normal> 41</span>
<span class=normal> 42</span>
<span class=normal> 43</span>
<span class=normal> 44</span>
<span class=normal> 45</span>
<span class=normal> 46</span>
<span class=normal> 47</span>
<span class=normal> 48</span>
<span class=normal> 49</span>
<span class=normal> 50</span>
<span class=normal> 51</span>
<span class=normal> 52</span>
<span class=normal> 53</span>
<span class=normal> 54</span>
<span class=normal> 55</span>
<span class=normal> 56</span>
<span class=normal> 57</span>
<span class=normal> 58</span>
<span class=normal> 59</span>
<span class=normal> 60</span>
<span class=normal> 61</span>
<span class=normal> 62</span>
<span class=normal> 63</span>
<span class=normal> 64</span>
<span class=normal> 65</span>
<span class=normal> 66</span>
<span class=normal> 67</span>
<span class=normal> 68</span>
<span class=normal> 69</span>
<span class=normal> 70</span>
<span class=normal> 71</span>
<span class=normal> 72</span>
<span class=normal> 73</span>
<span class=normal> 74</span>
<span class=normal> 75</span>
<span class=normal> 76</span>
<span class=normal> 77</span>
<span class=normal> 78</span>
<span class=normal> 79</span>
<span class=normal> 80</span>
<span class=normal> 81</span>
<span class=normal> 82</span>
<span class=normal> 83</span>
<span class=normal> 84</span>
<span class=normal> 85</span>
<span class=normal> 86</span>
<span class=normal> 87</span>
<span class=normal> 88</span>
<span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span>
<span class=normal>277</span>
<span class=normal>278</span>
<span class=normal>279</span>
<span class=normal>280</span>
<span class=normal>281</span>
<span class=normal>282</span>
<span class=normal>283</span>
<span class=normal>284</span>
<span class=normal>285</span>
<span class=normal>286</span>
<span class=normal>287</span>
<span class=normal>288</span>
<span class=normal>289</span>
<span class=normal>290</span>
<span class=normal>291</span>
<span class=normal>292</span>
<span class=normal>293</span>
<span class=normal>294</span>
<span class=normal>295</span>
<span class=normal>296</span>
<span class=normal>297</span>
<span class=normal>298</span>
<span class=normal>299</span>
<span class=normal>300</span>
<span class=normal>301</span>
<span class=normal>302</span>
<span class=normal>303</span>
<span class=normal>304</span>
<span class=normal>305</span>
<span class=normal>306</span>
<span class=normal>307</span>
<span class=normal>308</span>
<span class=normal>309</span>
<span class=normal>310</span>
<span class=normal>311</span>
<span class=normal>312</span>
<span class=normal>313</span>
<span class=normal>314</span>
<span class=normal>315</span>
<span class=normal>316</span>
<span class=normal>317</span>
<span class=normal>318</span>
<span class=normal>319</span>
<span class=normal>320</span>
<span class=normal>321</span>
<span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span>
<span class=normal>325</span>
<span class=normal>326</span>
<span class=normal>327</span>
<span class=normal>328</span>
<span class=normal>329</span>
<span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span>
<span class=normal>334</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>FoldersQtModel</span><span class=p>(</span><span class=n>QtGui</span><span class=o>.</span><span class=n>QStandardItemModel</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Folders model which cares about refresh of folders.</span>

<span class=sd>    Args:</span>
<span class=sd>        controller (AbstractWorkfilesFrontend): The control object.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>_default_folder_icon</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=n>refreshed</span> <span class=o>=</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Signal</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>controller</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>FoldersQtModel</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>()</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_controller</span> <span class=o>=</span> <span class=n>controller</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_items_by_id</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_parent_id_by_id</span> <span class=o>=</span> <span class=p>{}</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_refresh_threads</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_current_refresh_thread</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_last_project_name</span> <span class=o>=</span> <span class=kc>None</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_has_content</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_is_refreshing</span> <span class=o>=</span> <span class=kc>False</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>is_refreshing</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Model is refreshing.</span>

<span class=sd>        Returns:</span>
<span class=sd>            bool: True if model is refreshing.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_is_refreshing</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>has_content</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Has at least one folder.</span>

<span class=sd>        Returns:</span>
<span class=sd>            bool: True if model has at least one folder.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_has_content</span>

    <span class=k>def</span><span class=w> </span><span class=nf>refresh</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Refresh folders for last selected project.</span>

<span class=sd>        Force to update folders model from controller. This may or may not</span>
<span class=sd>        trigger query from server, that&#39;s based on controller&#39;s cache.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>set_project_name</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_last_project_name</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_index_by_id</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>item_id</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get index by folder id.</span>

<span class=sd>        Returns:</span>
<span class=sd>            QtCore.QModelIndex: Index of the folder. Can be invalid if folder</span>
<span class=sd>                is not available.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_items_by_id</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>item_id</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>item</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>QModelIndex</span><span class=p>()</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>indexFromItem</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_item_id_by_path</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>folder_path</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get folder id by path.</span>

<span class=sd>        Args:</span>
<span class=sd>            folder_path (str): Folder path.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Union[str, None]: Folder id or None if folder is not available.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>for</span> <span class=n>folder_id</span><span class=p>,</span> <span class=n>item</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_items_by_id</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=k>if</span> <span class=n>item</span><span class=o>.</span><span class=n>data</span><span class=p>(</span><span class=n>FOLDER_PATH_ROLE</span><span class=p>)</span> <span class=o>==</span> <span class=n>folder_path</span><span class=p>:</span>
                <span class=k>return</span> <span class=n>folder_id</span>
        <span class=k>return</span> <span class=kc>None</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_project_name</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Project name which model currently use.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Union[str, None]: Currently used project name.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_last_project_name</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_project_name</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>project_name</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Refresh folders items.</span>

<span class=sd>        Refresh start thread because it can cause that controller can</span>
<span class=sd>        start query from database if folders are not cached.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>project_name</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_last_project_name</span> <span class=o>=</span> <span class=n>project_name</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_fill_items</span><span class=p>({},</span> <span class=p>{})</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_current_refresh_thread</span> <span class=o>=</span> <span class=kc>None</span>
            <span class=k>return</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_is_refreshing</span> <span class=o>=</span> <span class=kc>True</span>

        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_last_project_name</span> <span class=o>!=</span> <span class=n>project_name</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_clear_items</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_last_project_name</span> <span class=o>=</span> <span class=n>project_name</span>

        <span class=n>thread</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_refresh_threads</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>thread</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_current_refresh_thread</span> <span class=o>=</span> <span class=n>thread</span>
            <span class=k>return</span>

        <span class=n>thread</span> <span class=o>=</span> <span class=n>RefreshThread</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_thread_getter</span><span class=p>,</span>
            <span class=n>project_name</span>
        <span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_current_refresh_thread</span> <span class=o>=</span> <span class=n>thread</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_refresh_threads</span><span class=p>[</span><span class=n>thread</span><span class=o>.</span><span class=n>id</span><span class=p>]</span> <span class=o>=</span> <span class=n>thread</span>
        <span class=n>thread</span><span class=o>.</span><span class=n>refresh_finished</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_on_refresh_thread</span><span class=p>)</span>
        <span class=n>thread</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>_get_default_folder_icon</span><span class=p>(</span><span class=bp>cls</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_default_folder_icon</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>cls</span><span class=o>.</span><span class=n>_default_folder_icon</span> <span class=o>=</span> <span class=n>get_qt_icon</span><span class=p>({</span>
                <span class=s2>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;awesome-font&quot;</span><span class=p>,</span>
                <span class=s2>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;fa.folder&quot;</span><span class=p>,</span>
                <span class=s2>&quot;color&quot;</span><span class=p>:</span> <span class=n>get_default_entity_icon_color</span><span class=p>()</span>
            <span class=p>})</span>
        <span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_default_folder_icon</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_clear_items</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_items_by_id</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_parent_id_by_id</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_has_content</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=n>root_item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>invisibleRootItem</span><span class=p>()</span>
        <span class=n>root_item</span><span class=o>.</span><span class=n>removeRows</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=n>root_item</span><span class=o>.</span><span class=n>rowCount</span><span class=p>())</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_thread_getter</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>project_name</span><span class=p>):</span>
        <span class=n>folder_items</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_controller</span><span class=o>.</span><span class=n>get_folder_items</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span> <span class=n>FOLDERS_MODEL_SENDER_NAME</span>
        <span class=p>)</span>
        <span class=n>folder_type_items</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_controller</span><span class=p>,</span> <span class=s2>&quot;get_folder_type_items&quot;</span><span class=p>):</span>
            <span class=n>folder_type_items</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_controller</span><span class=o>.</span><span class=n>get_folder_type_items</span><span class=p>(</span>
                <span class=n>project_name</span><span class=p>,</span> <span class=n>FOLDERS_MODEL_SENDER_NAME</span>
            <span class=p>)</span>
        <span class=k>return</span> <span class=n>folder_items</span><span class=p>,</span> <span class=n>folder_type_items</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_on_refresh_thread</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>thread_id</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Callback when refresh thread is finished.</span>

<span class=sd>        Technically can be running multiple refresh threads at the same time,</span>
<span class=sd>        to avoid using values from wrong thread, we check if thread id is</span>
<span class=sd>        current refresh thread id.</span>

<span class=sd>        Folders are stored by id.</span>

<span class=sd>        Args:</span>
<span class=sd>            thread_id (str): Thread id.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=c1># Make sure to remove thread from &#39;_refresh_threads&#39; dict</span>
        <span class=n>thread</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_refresh_threads</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>thread_id</span><span class=p>)</span>
        <span class=k>if</span> <span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_current_refresh_thread</span> <span class=ow>is</span> <span class=kc>None</span>
            <span class=ow>or</span> <span class=n>thread_id</span> <span class=o>!=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_refresh_thread</span><span class=o>.</span><span class=n>id</span>
        <span class=p>):</span>
            <span class=k>return</span>
        <span class=k>if</span> <span class=n>thread</span><span class=o>.</span><span class=n>failed</span><span class=p>:</span>
            <span class=c1># TODO visualize that refresh failed</span>
            <span class=n>folder_items</span><span class=p>,</span> <span class=n>folder_type_items</span> <span class=o>=</span> <span class=p>{},</span> <span class=p>[]</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>folder_items</span><span class=p>,</span> <span class=n>folder_type_items</span> <span class=o>=</span> <span class=n>thread</span><span class=o>.</span><span class=n>get_result</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_fill_items</span><span class=p>(</span><span class=n>folder_items</span><span class=p>,</span> <span class=n>folder_type_items</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_current_refresh_thread</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_get_folder_item_icon</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>folder_item</span><span class=p>,</span>
        <span class=n>folder_type_item_by_name</span><span class=p>,</span>
        <span class=n>folder_type_icon_cache</span>
    <span class=p>):</span>
        <span class=n>icon</span> <span class=o>=</span> <span class=n>folder_type_icon_cache</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>folder_item</span><span class=o>.</span><span class=n>folder_type</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>icon</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>icon</span>

        <span class=n>folder_type_item</span> <span class=o>=</span> <span class=n>folder_type_item_by_name</span><span class=o>.</span><span class=n>get</span><span class=p>(</span>
            <span class=n>folder_item</span><span class=o>.</span><span class=n>folder_type</span>
        <span class=p>)</span>
        <span class=n>icon</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=k>if</span> <span class=n>folder_type_item</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>icon</span> <span class=o>=</span> <span class=n>get_qt_icon</span><span class=p>({</span>
                <span class=s2>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;material-symbols&quot;</span><span class=p>,</span>
                <span class=s2>&quot;name&quot;</span><span class=p>:</span> <span class=n>folder_type_item</span><span class=o>.</span><span class=n>icon</span><span class=p>,</span>
                <span class=s2>&quot;color&quot;</span><span class=p>:</span> <span class=n>get_default_entity_icon_color</span><span class=p>()</span>
            <span class=p>})</span>

        <span class=k>if</span> <span class=n>icon</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>icon</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_default_folder_icon</span><span class=p>()</span>
        <span class=n>folder_type_icon_cache</span><span class=p>[</span><span class=n>folder_item</span><span class=o>.</span><span class=n>folder_type</span><span class=p>]</span> <span class=o>=</span> <span class=n>icon</span>
        <span class=k>return</span> <span class=n>icon</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_fill_item_data</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>item</span><span class=p>,</span>
        <span class=n>folder_item</span><span class=p>,</span>
        <span class=n>folder_type_item_by_name</span><span class=p>,</span>
        <span class=n>folder_type_icon_cache</span>
    <span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>

<span class=sd>        Args:</span>
<span class=sd>            item (QtGui.QStandardItem): Item to fill data.</span>
<span class=sd>            folder_item (FolderItem): Folder item.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>icon</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_folder_item_icon</span><span class=p>(</span>
            <span class=n>folder_item</span><span class=p>,</span>
            <span class=n>folder_type_item_by_name</span><span class=p>,</span>
            <span class=n>folder_type_icon_cache</span>
        <span class=p>)</span>
        <span class=n>item</span><span class=o>.</span><span class=n>setData</span><span class=p>(</span><span class=n>folder_item</span><span class=o>.</span><span class=n>entity_id</span><span class=p>,</span> <span class=n>FOLDER_ID_ROLE</span><span class=p>)</span>
        <span class=n>item</span><span class=o>.</span><span class=n>setData</span><span class=p>(</span><span class=n>folder_item</span><span class=o>.</span><span class=n>name</span><span class=p>,</span> <span class=n>FOLDER_NAME_ROLE</span><span class=p>)</span>
        <span class=n>item</span><span class=o>.</span><span class=n>setData</span><span class=p>(</span><span class=n>folder_item</span><span class=o>.</span><span class=n>path</span><span class=p>,</span> <span class=n>FOLDER_PATH_ROLE</span><span class=p>)</span>
        <span class=n>item</span><span class=o>.</span><span class=n>setData</span><span class=p>(</span><span class=n>folder_item</span><span class=o>.</span><span class=n>folder_type</span><span class=p>,</span> <span class=n>FOLDER_TYPE_ROLE</span><span class=p>)</span>
        <span class=n>item</span><span class=o>.</span><span class=n>setData</span><span class=p>(</span><span class=n>folder_item</span><span class=o>.</span><span class=n>label</span><span class=p>,</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>DisplayRole</span><span class=p>)</span>
        <span class=n>item</span><span class=o>.</span><span class=n>setData</span><span class=p>(</span><span class=n>icon</span><span class=p>,</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>DecorationRole</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_fill_items</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>folder_items_by_id</span><span class=p>,</span> <span class=n>folder_type_items</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>folder_items_by_id</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>folder_items_by_id</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_clear_items</span><span class=p>()</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_is_refreshing</span> <span class=o>=</span> <span class=kc>False</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>refreshed</span><span class=o>.</span><span class=n>emit</span><span class=p>()</span>
            <span class=k>return</span>

        <span class=n>folder_type_item_by_name</span> <span class=o>=</span> <span class=p>{</span>
            <span class=n>folder_type</span><span class=o>.</span><span class=n>name</span><span class=p>:</span> <span class=n>folder_type</span>
            <span class=k>for</span> <span class=n>folder_type</span> <span class=ow>in</span> <span class=n>folder_type_items</span>
        <span class=p>}</span>
        <span class=n>folder_type_icon_cache</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_has_content</span> <span class=o>=</span> <span class=kc>True</span>

        <span class=n>folder_ids</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span><span class=n>folder_items_by_id</span><span class=p>)</span>
        <span class=n>ids_to_remove</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_items_by_id</span><span class=p>)</span> <span class=o>-</span> <span class=n>folder_ids</span>

        <span class=n>folder_items_by_parent</span> <span class=o>=</span> <span class=n>collections</span><span class=o>.</span><span class=n>defaultdict</span><span class=p>(</span><span class=nb>dict</span><span class=p>)</span>
        <span class=k>for</span> <span class=n>folder_item</span> <span class=ow>in</span> <span class=n>folder_items_by_id</span><span class=o>.</span><span class=n>values</span><span class=p>():</span>
            <span class=p>(</span>
                <span class=n>folder_items_by_parent</span>
                <span class=p>[</span><span class=n>folder_item</span><span class=o>.</span><span class=n>parent_id</span><span class=p>]</span>
                <span class=p>[</span><span class=n>folder_item</span><span class=o>.</span><span class=n>entity_id</span><span class=p>]</span>
            <span class=p>)</span> <span class=o>=</span> <span class=n>folder_item</span>

        <span class=n>hierarchy_queue</span> <span class=o>=</span> <span class=n>collections</span><span class=o>.</span><span class=n>deque</span><span class=p>()</span>
        <span class=n>hierarchy_queue</span><span class=o>.</span><span class=n>append</span><span class=p>((</span><span class=bp>self</span><span class=o>.</span><span class=n>invisibleRootItem</span><span class=p>(),</span> <span class=kc>None</span><span class=p>))</span>

        <span class=c1># Keep pointers to removed items until the refresh finishes</span>
        <span class=c1>#   - some children of the items could be moved and reused elsewhere</span>
        <span class=n>removed_items</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>while</span> <span class=n>hierarchy_queue</span><span class=p>:</span>
            <span class=n>item</span> <span class=o>=</span> <span class=n>hierarchy_queue</span><span class=o>.</span><span class=n>popleft</span><span class=p>()</span>
            <span class=n>parent_item</span><span class=p>,</span> <span class=n>parent_id</span> <span class=o>=</span> <span class=n>item</span>
            <span class=n>folder_items</span> <span class=o>=</span> <span class=n>folder_items_by_parent</span><span class=p>[</span><span class=n>parent_id</span><span class=p>]</span>

            <span class=n>items_by_id</span> <span class=o>=</span> <span class=p>{}</span>
            <span class=n>folder_ids_to_add</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span><span class=n>folder_items</span><span class=p>)</span>
            <span class=k>for</span> <span class=n>row_idx</span> <span class=ow>in</span> <span class=nb>reversed</span><span class=p>(</span><span class=nb>range</span><span class=p>(</span><span class=n>parent_item</span><span class=o>.</span><span class=n>rowCount</span><span class=p>())):</span>
                <span class=n>child_item</span> <span class=o>=</span> <span class=n>parent_item</span><span class=o>.</span><span class=n>child</span><span class=p>(</span><span class=n>row_idx</span><span class=p>)</span>
                <span class=n>child_id</span> <span class=o>=</span> <span class=n>child_item</span><span class=o>.</span><span class=n>data</span><span class=p>(</span><span class=n>FOLDER_ID_ROLE</span><span class=p>)</span>
                <span class=k>if</span> <span class=n>child_id</span> <span class=ow>in</span> <span class=n>ids_to_remove</span><span class=p>:</span>
                    <span class=n>removed_items</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>parent_item</span><span class=o>.</span><span class=n>takeRow</span><span class=p>(</span><span class=n>row_idx</span><span class=p>))</span>
                <span class=k>else</span><span class=p>:</span>
                    <span class=n>items_by_id</span><span class=p>[</span><span class=n>child_id</span><span class=p>]</span> <span class=o>=</span> <span class=n>child_item</span>

            <span class=n>new_items</span> <span class=o>=</span> <span class=p>[]</span>
            <span class=k>for</span> <span class=n>item_id</span> <span class=ow>in</span> <span class=n>folder_ids_to_add</span><span class=p>:</span>
                <span class=n>folder_item</span> <span class=o>=</span> <span class=n>folder_items</span><span class=p>[</span><span class=n>item_id</span><span class=p>]</span>
                <span class=n>item</span> <span class=o>=</span> <span class=n>items_by_id</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>item_id</span><span class=p>)</span>
                <span class=k>if</span> <span class=n>item</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
                    <span class=n>is_new</span> <span class=o>=</span> <span class=kc>True</span>
                    <span class=n>item</span> <span class=o>=</span> <span class=n>QtGui</span><span class=o>.</span><span class=n>QStandardItem</span><span class=p>()</span>
                    <span class=n>item</span><span class=o>.</span><span class=n>setEditable</span><span class=p>(</span><span class=kc>False</span><span class=p>)</span>
                <span class=k>else</span><span class=p>:</span>
                    <span class=n>is_new</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_parent_id_by_id</span><span class=p>[</span><span class=n>item_id</span><span class=p>]</span> <span class=o>!=</span> <span class=n>parent_id</span>

                <span class=bp>self</span><span class=o>.</span><span class=n>_fill_item_data</span><span class=p>(</span>
                    <span class=n>item</span><span class=p>,</span>
                    <span class=n>folder_item</span><span class=p>,</span>
                    <span class=n>folder_type_item_by_name</span><span class=p>,</span>
                    <span class=n>folder_type_icon_cache</span>
                <span class=p>)</span>
                <span class=k>if</span> <span class=n>is_new</span><span class=p>:</span>
                    <span class=n>new_items</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_items_by_id</span><span class=p>[</span><span class=n>item_id</span><span class=p>]</span> <span class=o>=</span> <span class=n>item</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_parent_id_by_id</span><span class=p>[</span><span class=n>item_id</span><span class=p>]</span> <span class=o>=</span> <span class=n>parent_id</span>

                <span class=n>hierarchy_queue</span><span class=o>.</span><span class=n>append</span><span class=p>((</span><span class=n>item</span><span class=p>,</span> <span class=n>item_id</span><span class=p>))</span>

            <span class=k>if</span> <span class=n>new_items</span><span class=p>:</span>
                <span class=n>parent_item</span><span class=o>.</span><span class=n>appendRows</span><span class=p>(</span><span class=n>new_items</span><span class=p>)</span>

        <span class=k>for</span> <span class=n>item_id</span> <span class=ow>in</span> <span class=n>ids_to_remove</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_items_by_id</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>item_id</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_parent_id_by_id</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>item_id</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_is_refreshing</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>refreshed</span><span class=o>.</span><span class=n>emit</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.tools.utils.FoldersQtModel.has_content class="doc doc-heading"> <code class="highlight language-python"><span class=n>has_content</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Has at least one folder.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>bool</code></td> <td> </td> <td> <div class=doc-md-description> <p>True if model has at least one folder.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.tools.utils.FoldersQtModel.is_refreshing class="doc doc-heading"> <code class="highlight language-python"><span class=n>is_refreshing</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Model is refreshing.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>bool</code></td> <td> </td> <td> <div class=doc-md-description> <p>True if model is refreshing.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.FoldersQtModel.get_index_by_id class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_index_by_id</span><span class=p>(</span><span class=n>item_id</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Get index by folder id.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>QtCore.QModelIndex: Index of the folder. Can be invalid if folder is not available.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/folders_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>77</span>
<span class=normal>78</span>
<span class=normal>79</span>
<span class=normal>80</span>
<span class=normal>81</span>
<span class=normal>82</span>
<span class=normal>83</span>
<span class=normal>84</span>
<span class=normal>85</span>
<span class=normal>86</span>
<span class=normal>87</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_index_by_id</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>item_id</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get index by folder id.</span>

<span class=sd>    Returns:</span>
<span class=sd>        QtCore.QModelIndex: Index of the folder. Can be invalid if folder</span>
<span class=sd>            is not available.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_items_by_id</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>item_id</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>item</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>QModelIndex</span><span class=p>()</span>
    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>indexFromItem</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.FoldersQtModel.get_item_id_by_path class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_item_id_by_path</span><span class=p>(</span><span class=n>folder_path</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Get folder id by path.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>folder_path</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Folder path.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Union[str, None]: Folder id or None if folder is not available.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/folders_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_item_id_by_path</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>folder_path</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get folder id by path.</span>

<span class=sd>    Args:</span>
<span class=sd>        folder_path (str): Folder path.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Union[str, None]: Folder id or None if folder is not available.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>for</span> <span class=n>folder_id</span><span class=p>,</span> <span class=n>item</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_items_by_id</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
        <span class=k>if</span> <span class=n>item</span><span class=o>.</span><span class=n>data</span><span class=p>(</span><span class=n>FOLDER_PATH_ROLE</span><span class=p>)</span> <span class=o>==</span> <span class=n>folder_path</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>folder_id</span>
    <span class=k>return</span> <span class=kc>None</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.FoldersQtModel.get_project_name class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_project_name</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Project name which model currently use.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Union[str, None]: Currently used project name.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/folders_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_project_name</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Project name which model currently use.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Union[str, None]: Currently used project name.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_last_project_name</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.FoldersQtModel.refresh class="doc doc-heading"> <code class="highlight language-python"><span class=n>refresh</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Refresh folders for last selected project.</p> <p>Force to update folders model from controller. This may or may not trigger query from server, that's based on controller's cache.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/folders_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>68</span>
<span class=normal>69</span>
<span class=normal>70</span>
<span class=normal>71</span>
<span class=normal>72</span>
<span class=normal>73</span>
<span class=normal>74</span>
<span class=normal>75</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>refresh</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Refresh folders for last selected project.</span>

<span class=sd>    Force to update folders model from controller. This may or may not</span>
<span class=sd>    trigger query from server, that&#39;s based on controller&#39;s cache.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>set_project_name</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_last_project_name</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.FoldersQtModel.set_project_name class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_project_name</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Refresh folders items.</p> <p>Refresh start thread because it can cause that controller can start query from database if folders are not cached.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/folders_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_project_name</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>project_name</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Refresh folders items.</span>

<span class=sd>    Refresh start thread because it can cause that controller can</span>
<span class=sd>    start query from database if folders are not cached.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>project_name</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_last_project_name</span> <span class=o>=</span> <span class=n>project_name</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_fill_items</span><span class=p>({},</span> <span class=p>{})</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_current_refresh_thread</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=k>return</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_is_refreshing</span> <span class=o>=</span> <span class=kc>True</span>

    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_last_project_name</span> <span class=o>!=</span> <span class=n>project_name</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_clear_items</span><span class=p>()</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_last_project_name</span> <span class=o>=</span> <span class=n>project_name</span>

    <span class=n>thread</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_refresh_threads</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>thread</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_current_refresh_thread</span> <span class=o>=</span> <span class=n>thread</span>
        <span class=k>return</span>

    <span class=n>thread</span> <span class=o>=</span> <span class=n>RefreshThread</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_thread_getter</span><span class=p>,</span>
        <span class=n>project_name</span>
    <span class=p>)</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_current_refresh_thread</span> <span class=o>=</span> <span class=n>thread</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_refresh_threads</span><span class=p>[</span><span class=n>thread</span><span class=o>.</span><span class=n>id</span><span class=p>]</span> <span class=o>=</span> <span class=n>thread</span>
    <span class=n>thread</span><span class=o>.</span><span class=n>refresh_finished</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_on_refresh_thread</span><span class=p>)</span>
    <span class=n>thread</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.tools.utils.FoldersWidget class="doc doc-heading"> <code>FoldersWidget</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=qtpy.QtWidgets.QWidget>QWidget</span></code></p> <p>Folders widget.</p> <p>Widget that handles folders view, model and selection.</p> <p>Expected selection handling is disabled by default. If enabled, the widget will handle the expected in predefined way. Widget is listening to event 'expected_selection_changed' with expected event data below, the same data must be available when called method 'get_expected_selection_data' on controller.</p> <p>{ "folder": { "current": bool, # Folder is what should be set now "folder_id": Union[str, None], # Folder id that should be selected }, ... }</p> <p>Selection is confirmed by calling method 'expected_folder_selected' on controller.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>controller</code> </td> <td> <code><span title=AbstractWorkfilesFrontend>AbstractWorkfilesFrontend</span></code> </td> <td> <div class=doc-md-description> <p>The control object.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>parent</code> </td> <td> <code><span title=qtpy.QtWidgets.QWidget>QWidget</span></code> </td> <td> <div class=doc-md-description> <p>The parent widget.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>handle_expected_selection</code> </td> <td> <code><span title=bool>bool</span></code> </td> <td> <div class=doc-md-description> <p>If True, the widget will handle the expected selection. Defaults to False.</p> </div> </td> <td> <code>False</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/folders_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>337</span>
<span class=normal>338</span>
<span class=normal>339</span>
<span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span>
<span class=normal>344</span>
<span class=normal>345</span>
<span class=normal>346</span>
<span class=normal>347</span>
<span class=normal>348</span>
<span class=normal>349</span>
<span class=normal>350</span>
<span class=normal>351</span>
<span class=normal>352</span>
<span class=normal>353</span>
<span class=normal>354</span>
<span class=normal>355</span>
<span class=normal>356</span>
<span class=normal>357</span>
<span class=normal>358</span>
<span class=normal>359</span>
<span class=normal>360</span>
<span class=normal>361</span>
<span class=normal>362</span>
<span class=normal>363</span>
<span class=normal>364</span>
<span class=normal>365</span>
<span class=normal>366</span>
<span class=normal>367</span>
<span class=normal>368</span>
<span class=normal>369</span>
<span class=normal>370</span>
<span class=normal>371</span>
<span class=normal>372</span>
<span class=normal>373</span>
<span class=normal>374</span>
<span class=normal>375</span>
<span class=normal>376</span>
<span class=normal>377</span>
<span class=normal>378</span>
<span class=normal>379</span>
<span class=normal>380</span>
<span class=normal>381</span>
<span class=normal>382</span>
<span class=normal>383</span>
<span class=normal>384</span>
<span class=normal>385</span>
<span class=normal>386</span>
<span class=normal>387</span>
<span class=normal>388</span>
<span class=normal>389</span>
<span class=normal>390</span>
<span class=normal>391</span>
<span class=normal>392</span>
<span class=normal>393</span>
<span class=normal>394</span>
<span class=normal>395</span>
<span class=normal>396</span>
<span class=normal>397</span>
<span class=normal>398</span>
<span class=normal>399</span>
<span class=normal>400</span>
<span class=normal>401</span>
<span class=normal>402</span>
<span class=normal>403</span>
<span class=normal>404</span>
<span class=normal>405</span>
<span class=normal>406</span>
<span class=normal>407</span>
<span class=normal>408</span>
<span class=normal>409</span>
<span class=normal>410</span>
<span class=normal>411</span>
<span class=normal>412</span>
<span class=normal>413</span>
<span class=normal>414</span>
<span class=normal>415</span>
<span class=normal>416</span>
<span class=normal>417</span>
<span class=normal>418</span>
<span class=normal>419</span>
<span class=normal>420</span>
<span class=normal>421</span>
<span class=normal>422</span>
<span class=normal>423</span>
<span class=normal>424</span>
<span class=normal>425</span>
<span class=normal>426</span>
<span class=normal>427</span>
<span class=normal>428</span>
<span class=normal>429</span>
<span class=normal>430</span>
<span class=normal>431</span>
<span class=normal>432</span>
<span class=normal>433</span>
<span class=normal>434</span>
<span class=normal>435</span>
<span class=normal>436</span>
<span class=normal>437</span>
<span class=normal>438</span>
<span class=normal>439</span>
<span class=normal>440</span>
<span class=normal>441</span>
<span class=normal>442</span>
<span class=normal>443</span>
<span class=normal>444</span>
<span class=normal>445</span>
<span class=normal>446</span>
<span class=normal>447</span>
<span class=normal>448</span>
<span class=normal>449</span>
<span class=normal>450</span>
<span class=normal>451</span>
<span class=normal>452</span>
<span class=normal>453</span>
<span class=normal>454</span>
<span class=normal>455</span>
<span class=normal>456</span>
<span class=normal>457</span>
<span class=normal>458</span>
<span class=normal>459</span>
<span class=normal>460</span>
<span class=normal>461</span>
<span class=normal>462</span>
<span class=normal>463</span>
<span class=normal>464</span>
<span class=normal>465</span>
<span class=normal>466</span>
<span class=normal>467</span>
<span class=normal>468</span>
<span class=normal>469</span>
<span class=normal>470</span>
<span class=normal>471</span>
<span class=normal>472</span>
<span class=normal>473</span>
<span class=normal>474</span>
<span class=normal>475</span>
<span class=normal>476</span>
<span class=normal>477</span>
<span class=normal>478</span>
<span class=normal>479</span>
<span class=normal>480</span>
<span class=normal>481</span>
<span class=normal>482</span>
<span class=normal>483</span>
<span class=normal>484</span>
<span class=normal>485</span>
<span class=normal>486</span>
<span class=normal>487</span>
<span class=normal>488</span>
<span class=normal>489</span>
<span class=normal>490</span>
<span class=normal>491</span>
<span class=normal>492</span>
<span class=normal>493</span>
<span class=normal>494</span>
<span class=normal>495</span>
<span class=normal>496</span>
<span class=normal>497</span>
<span class=normal>498</span>
<span class=normal>499</span>
<span class=normal>500</span>
<span class=normal>501</span>
<span class=normal>502</span>
<span class=normal>503</span>
<span class=normal>504</span>
<span class=normal>505</span>
<span class=normal>506</span>
<span class=normal>507</span>
<span class=normal>508</span>
<span class=normal>509</span>
<span class=normal>510</span>
<span class=normal>511</span>
<span class=normal>512</span>
<span class=normal>513</span>
<span class=normal>514</span>
<span class=normal>515</span>
<span class=normal>516</span>
<span class=normal>517</span>
<span class=normal>518</span>
<span class=normal>519</span>
<span class=normal>520</span>
<span class=normal>521</span>
<span class=normal>522</span>
<span class=normal>523</span>
<span class=normal>524</span>
<span class=normal>525</span>
<span class=normal>526</span>
<span class=normal>527</span>
<span class=normal>528</span>
<span class=normal>529</span>
<span class=normal>530</span>
<span class=normal>531</span>
<span class=normal>532</span>
<span class=normal>533</span>
<span class=normal>534</span>
<span class=normal>535</span>
<span class=normal>536</span>
<span class=normal>537</span>
<span class=normal>538</span>
<span class=normal>539</span>
<span class=normal>540</span>
<span class=normal>541</span>
<span class=normal>542</span>
<span class=normal>543</span>
<span class=normal>544</span>
<span class=normal>545</span>
<span class=normal>546</span>
<span class=normal>547</span>
<span class=normal>548</span>
<span class=normal>549</span>
<span class=normal>550</span>
<span class=normal>551</span>
<span class=normal>552</span>
<span class=normal>553</span>
<span class=normal>554</span>
<span class=normal>555</span>
<span class=normal>556</span>
<span class=normal>557</span>
<span class=normal>558</span>
<span class=normal>559</span>
<span class=normal>560</span>
<span class=normal>561</span>
<span class=normal>562</span>
<span class=normal>563</span>
<span class=normal>564</span>
<span class=normal>565</span>
<span class=normal>566</span>
<span class=normal>567</span>
<span class=normal>568</span>
<span class=normal>569</span>
<span class=normal>570</span>
<span class=normal>571</span>
<span class=normal>572</span>
<span class=normal>573</span>
<span class=normal>574</span>
<span class=normal>575</span>
<span class=normal>576</span>
<span class=normal>577</span>
<span class=normal>578</span>
<span class=normal>579</span>
<span class=normal>580</span>
<span class=normal>581</span>
<span class=normal>582</span>
<span class=normal>583</span>
<span class=normal>584</span>
<span class=normal>585</span>
<span class=normal>586</span>
<span class=normal>587</span>
<span class=normal>588</span>
<span class=normal>589</span>
<span class=normal>590</span>
<span class=normal>591</span>
<span class=normal>592</span>
<span class=normal>593</span>
<span class=normal>594</span>
<span class=normal>595</span>
<span class=normal>596</span>
<span class=normal>597</span>
<span class=normal>598</span>
<span class=normal>599</span>
<span class=normal>600</span>
<span class=normal>601</span>
<span class=normal>602</span>
<span class=normal>603</span>
<span class=normal>604</span>
<span class=normal>605</span>
<span class=normal>606</span>
<span class=normal>607</span>
<span class=normal>608</span>
<span class=normal>609</span>
<span class=normal>610</span>
<span class=normal>611</span>
<span class=normal>612</span>
<span class=normal>613</span>
<span class=normal>614</span>
<span class=normal>615</span>
<span class=normal>616</span>
<span class=normal>617</span>
<span class=normal>618</span>
<span class=normal>619</span>
<span class=normal>620</span>
<span class=normal>621</span>
<span class=normal>622</span>
<span class=normal>623</span>
<span class=normal>624</span>
<span class=normal>625</span>
<span class=normal>626</span>
<span class=normal>627</span>
<span class=normal>628</span>
<span class=normal>629</span>
<span class=normal>630</span>
<span class=normal>631</span>
<span class=normal>632</span>
<span class=normal>633</span>
<span class=normal>634</span>
<span class=normal>635</span>
<span class=normal>636</span>
<span class=normal>637</span>
<span class=normal>638</span>
<span class=normal>639</span>
<span class=normal>640</span>
<span class=normal>641</span>
<span class=normal>642</span>
<span class=normal>643</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>FoldersWidget</span><span class=p>(</span><span class=n>QtWidgets</span><span class=o>.</span><span class=n>QWidget</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Folders widget.</span>

<span class=sd>    Widget that handles folders view, model and selection.</span>

<span class=sd>    Expected selection handling is disabled by default. If enabled, the</span>
<span class=sd>    widget will handle the expected in predefined way. Widget is listening</span>
<span class=sd>    to event &#39;expected_selection_changed&#39; with expected event data below,</span>
<span class=sd>    the same data must be available when called method</span>
<span class=sd>    &#39;get_expected_selection_data&#39; on controller.</span>

<span class=sd>    {</span>
<span class=sd>        &quot;folder&quot;: {</span>
<span class=sd>            &quot;current&quot;: bool,               # Folder is what should be set now</span>
<span class=sd>            &quot;folder_id&quot;: Union[str, None], # Folder id that should be selected</span>
<span class=sd>        },</span>
<span class=sd>        ...</span>
<span class=sd>    }</span>

<span class=sd>    Selection is confirmed by calling method &#39;expected_folder_selected&#39; on</span>
<span class=sd>    controller.</span>


<span class=sd>    Args:</span>
<span class=sd>        controller (AbstractWorkfilesFrontend): The control object.</span>
<span class=sd>        parent (QtWidgets.QWidget): The parent widget.</span>
<span class=sd>        handle_expected_selection (bool): If True, the widget will handle</span>
<span class=sd>            the expected selection. Defaults to False.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>double_clicked</span> <span class=o>=</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Signal</span><span class=p>(</span><span class=n>QtGui</span><span class=o>.</span><span class=n>QMouseEvent</span><span class=p>)</span>
    <span class=n>selection_changed</span> <span class=o>=</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Signal</span><span class=p>()</span>
    <span class=n>refreshed</span> <span class=o>=</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Signal</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>controller</span><span class=p>,</span> <span class=n>parent</span><span class=p>,</span> <span class=n>handle_expected_selection</span><span class=o>=</span><span class=kc>False</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>FoldersWidget</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>parent</span><span class=p>)</span>

        <span class=n>folders_view</span> <span class=o>=</span> <span class=n>TreeView</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
        <span class=n>folders_view</span><span class=o>.</span><span class=n>setHeaderHidden</span><span class=p>(</span><span class=kc>True</span><span class=p>)</span>

        <span class=n>folders_model</span> <span class=o>=</span> <span class=n>FoldersQtModel</span><span class=p>(</span><span class=n>controller</span><span class=p>)</span>
        <span class=n>folders_proxy_model</span> <span class=o>=</span> <span class=n>RecursiveSortFilterProxyModel</span><span class=p>()</span>
        <span class=n>folders_proxy_model</span><span class=o>.</span><span class=n>setSourceModel</span><span class=p>(</span><span class=n>folders_model</span><span class=p>)</span>
        <span class=n>folders_proxy_model</span><span class=o>.</span><span class=n>setSortCaseSensitivity</span><span class=p>(</span><span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>CaseInsensitive</span><span class=p>)</span>

        <span class=n>folders_view</span><span class=o>.</span><span class=n>setModel</span><span class=p>(</span><span class=n>folders_proxy_model</span><span class=p>)</span>

        <span class=n>main_layout</span> <span class=o>=</span> <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QHBoxLayout</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
        <span class=n>main_layout</span><span class=o>.</span><span class=n>setContentsMargins</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
        <span class=n>main_layout</span><span class=o>.</span><span class=n>addWidget</span><span class=p>(</span><span class=n>folders_view</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>

        <span class=n>controller</span><span class=o>.</span><span class=n>register_event_callback</span><span class=p>(</span>
            <span class=s2>&quot;selection.project.changed&quot;</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_on_project_selection_change</span><span class=p>,</span>
        <span class=p>)</span>
        <span class=n>controller</span><span class=o>.</span><span class=n>register_event_callback</span><span class=p>(</span>
            <span class=s2>&quot;folders.refresh.finished&quot;</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_on_folders_refresh_finished</span>
        <span class=p>)</span>
        <span class=n>controller</span><span class=o>.</span><span class=n>register_event_callback</span><span class=p>(</span>
            <span class=s2>&quot;controller.refresh.finished&quot;</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_on_controller_refresh</span>
        <span class=p>)</span>
        <span class=n>controller</span><span class=o>.</span><span class=n>register_event_callback</span><span class=p>(</span>
            <span class=s2>&quot;expected_selection_changed&quot;</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_on_expected_selection_change</span>
        <span class=p>)</span>

        <span class=n>selection_model</span> <span class=o>=</span> <span class=n>folders_view</span><span class=o>.</span><span class=n>selectionModel</span><span class=p>()</span>
        <span class=n>selection_model</span><span class=o>.</span><span class=n>selectionChanged</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_on_selection_change</span><span class=p>)</span>
        <span class=n>folders_view</span><span class=o>.</span><span class=n>double_clicked</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>double_clicked</span><span class=p>)</span>
        <span class=n>folders_model</span><span class=o>.</span><span class=n>refreshed</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_on_model_refresh</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_controller</span> <span class=o>=</span> <span class=n>controller</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_folders_view</span> <span class=o>=</span> <span class=n>folders_view</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_folders_model</span> <span class=o>=</span> <span class=n>folders_model</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_folders_proxy_model</span> <span class=o>=</span> <span class=n>folders_proxy_model</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_handle_expected_selection</span> <span class=o>=</span> <span class=n>handle_expected_selection</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_expected_selection</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>is_refreshing</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Model is refreshing.</span>

<span class=sd>        Returns:</span>
<span class=sd>            bool: True if model is refreshing.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_folders_model</span><span class=o>.</span><span class=n>is_refreshing</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>has_content</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Has at least one folder.</span>

<span class=sd>        Returns:</span>
<span class=sd>            bool: True if model has at least one folder.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_folders_model</span><span class=o>.</span><span class=n>has_content</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_name_filter</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Set filter of folder name.</span>

<span class=sd>        Args:</span>
<span class=sd>            name (str): The string filter.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_folders_proxy_model</span><span class=o>.</span><span class=n>setFilterFixedString</span><span class=p>(</span><span class=n>name</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>name</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_folders_view</span><span class=o>.</span><span class=n>expandAll</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>refresh</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Refresh folders model.</span>

<span class=sd>        Force to update folders model from controller.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_folders_model</span><span class=o>.</span><span class=n>refresh</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_project_name</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Project name in which folders widget currently is.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Union[str, None]: Currently used project name.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_folders_model</span><span class=o>.</span><span class=n>get_project_name</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_project_name</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>project_name</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Set project name.</span>

<span class=sd>        Do not use this method when controller is handling selection of</span>
<span class=sd>        project using &#39;selection.project.changed&#39; event.</span>

<span class=sd>        Args:</span>
<span class=sd>            project_name (str): Project name.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_folders_model</span><span class=o>.</span><span class=n>set_project_name</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_selected_folder_id</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get selected folder id.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Union[str, None]: Folder id which is selected.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_selected_item_id</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_selected_folder_path</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get selected folder id.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Union[str, None]: Folder path which is selected.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_selected_item_value</span><span class=p>(</span><span class=n>FOLDER_PATH_ROLE</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_selected_folder_label</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Selected folder label.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Union[str, None]: Selected folder label.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>item_id</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_selected_item_id</span><span class=p>()</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_folder_label</span><span class=p>(</span><span class=n>item_id</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_folder_label</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>folder_id</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Folder label for a given folder id.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Union[str, None]: Folder label.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>index</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_folders_model</span><span class=o>.</span><span class=n>get_index_by_id</span><span class=p>(</span><span class=n>folder_id</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>index</span><span class=o>.</span><span class=n>isValid</span><span class=p>():</span>
            <span class=k>return</span> <span class=n>index</span><span class=o>.</span><span class=n>data</span><span class=p>(</span><span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>DisplayRole</span><span class=p>)</span>
        <span class=k>return</span> <span class=kc>None</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_selected_folder</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>folder_id</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Change selection.</span>

<span class=sd>        Args:</span>
<span class=sd>            folder_id (Union[str, None]): Folder id or None to deselect.</span>

<span class=sd>        Returns:</span>
<span class=sd>            bool: Requested folder was selected.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=n>folder_id</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_folders_view</span><span class=o>.</span><span class=n>clearSelection</span><span class=p>()</span>
            <span class=k>return</span> <span class=kc>True</span>

        <span class=k>if</span> <span class=n>folder_id</span> <span class=o>==</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_selected_item_id</span><span class=p>():</span>
            <span class=k>return</span> <span class=kc>True</span>
        <span class=n>index</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_folders_model</span><span class=o>.</span><span class=n>get_index_by_id</span><span class=p>(</span><span class=n>folder_id</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>index</span><span class=o>.</span><span class=n>isValid</span><span class=p>():</span>
            <span class=k>return</span> <span class=kc>False</span>

        <span class=n>proxy_index</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_folders_proxy_model</span><span class=o>.</span><span class=n>mapFromSource</span><span class=p>(</span><span class=n>index</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>proxy_index</span><span class=o>.</span><span class=n>isValid</span><span class=p>():</span>
            <span class=k>return</span> <span class=kc>False</span>

        <span class=n>selection_model</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_folders_view</span><span class=o>.</span><span class=n>selectionModel</span><span class=p>()</span>
        <span class=n>selection_model</span><span class=o>.</span><span class=n>setCurrentIndex</span><span class=p>(</span>
            <span class=n>proxy_index</span><span class=p>,</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>QItemSelectionModel</span><span class=o>.</span><span class=n>SelectCurrent</span>
        <span class=p>)</span>
        <span class=k>return</span> <span class=kc>True</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_selected_folder_path</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>folder_path</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Set selected folder by path.</span>

<span class=sd>        Args:</span>
<span class=sd>            folder_path (str): Folder path.</span>

<span class=sd>        Returns:</span>
<span class=sd>            bool: Requested folder was selected.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=n>folder_path</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_folders_view</span><span class=o>.</span><span class=n>clearSelection</span><span class=p>()</span>
            <span class=k>return</span> <span class=kc>True</span>

        <span class=n>folder_id</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_folders_model</span><span class=o>.</span><span class=n>get_item_id_by_path</span><span class=p>(</span><span class=n>folder_path</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>folder_id</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>False</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>set_selected_folder</span><span class=p>(</span><span class=n>folder_id</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_deselectable</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>enabled</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Set deselectable mode.</span>

<span class=sd>        Items in view can be deselected.</span>

<span class=sd>        Args:</span>
<span class=sd>            enabled (bool): Enable deselectable mode.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_folders_view</span><span class=o>.</span><span class=n>set_deselectable</span><span class=p>(</span><span class=n>enabled</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_get_selected_index</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_folders_model</span><span class=o>.</span><span class=n>get_index_by_id</span><span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>get_selected_folder_id</span><span class=p>()</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_on_project_selection_change</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
        <span class=n>project_name</span> <span class=o>=</span> <span class=n>event</span><span class=p>[</span><span class=s2>&quot;project_name&quot;</span><span class=p>]</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>set_project_name</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_on_folders_refresh_finished</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
        <span class=k>if</span> <span class=n>event</span><span class=p>[</span><span class=s2>&quot;sender&quot;</span><span class=p>]</span> <span class=o>!=</span> <span class=n>FOLDERS_MODEL_SENDER_NAME</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>set_project_name</span><span class=p>(</span><span class=n>event</span><span class=p>[</span><span class=s2>&quot;project_name&quot;</span><span class=p>])</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_on_controller_refresh</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_update_expected_selection</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_on_model_refresh</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_expected_selection</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_set_expected_selection</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_folders_proxy_model</span><span class=o>.</span><span class=n>sort</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>refreshed</span><span class=o>.</span><span class=n>emit</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_get_selected_item_id</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_selected_item_value</span><span class=p>(</span><span class=n>FOLDER_ID_ROLE</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_get_selected_item_value</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>role</span><span class=p>):</span>
        <span class=n>selection_model</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_folders_view</span><span class=o>.</span><span class=n>selectionModel</span><span class=p>()</span>
        <span class=k>for</span> <span class=n>index</span> <span class=ow>in</span> <span class=n>selection_model</span><span class=o>.</span><span class=n>selectedIndexes</span><span class=p>():</span>
            <span class=n>item_id</span> <span class=o>=</span> <span class=n>index</span><span class=o>.</span><span class=n>data</span><span class=p>(</span><span class=n>role</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>item_id</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
                <span class=k>return</span> <span class=n>item_id</span>
        <span class=k>return</span> <span class=kc>None</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_on_selection_change</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=n>item_id</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_selected_item_id</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_controller</span><span class=o>.</span><span class=n>set_selected_folder</span><span class=p>(</span><span class=n>item_id</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>selection_changed</span><span class=o>.</span><span class=n>emit</span><span class=p>()</span>

    <span class=c1># Expected selection handling</span>
    <span class=k>def</span><span class=w> </span><span class=nf>_on_expected_selection_change</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_update_expected_selection</span><span class=p>(</span><span class=n>event</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_update_expected_selection</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>expected_data</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_handle_expected_selection</span><span class=p>:</span>
            <span class=k>return</span>

        <span class=k>if</span> <span class=n>expected_data</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>expected_data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_controller</span><span class=o>.</span><span class=n>get_expected_selection_data</span><span class=p>()</span>

        <span class=n>folder_data</span> <span class=o>=</span> <span class=n>expected_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;folder&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>folder_data</span> <span class=ow>or</span> <span class=ow>not</span> <span class=n>folder_data</span><span class=p>[</span><span class=s2>&quot;current&quot;</span><span class=p>]:</span>
            <span class=k>return</span>

        <span class=n>folder_id</span> <span class=o>=</span> <span class=n>folder_data</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_expected_selection</span> <span class=o>=</span> <span class=n>folder_id</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_folders_model</span><span class=o>.</span><span class=n>is_refreshing</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_set_expected_selection</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_set_expected_selection</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_handle_expected_selection</span><span class=p>:</span>
            <span class=k>return</span>

        <span class=n>folder_id</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_expected_selection</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_expected_selection</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=k>if</span> <span class=n>folder_id</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>set_selected_folder</span><span class=p>(</span><span class=n>folder_id</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_controller</span><span class=o>.</span><span class=n>expected_folder_selected</span><span class=p>(</span><span class=n>folder_id</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.tools.utils.FoldersWidget.has_content class="doc doc-heading"> <code class="highlight language-python"><span class=n>has_content</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Has at least one folder.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>bool</code></td> <td> </td> <td> <div class=doc-md-description> <p>True if model has at least one folder.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.tools.utils.FoldersWidget.is_refreshing class="doc doc-heading"> <code class="highlight language-python"><span class=n>is_refreshing</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Model is refreshing.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>bool</code></td> <td> </td> <td> <div class=doc-md-description> <p>True if model is refreshing.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.FoldersWidget.get_folder_label class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_folder_label</span><span class=p>(</span><span class=n>folder_id</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Folder label for a given folder id.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Union[str, None]: Folder label.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/folders_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>506</span>
<span class=normal>507</span>
<span class=normal>508</span>
<span class=normal>509</span>
<span class=normal>510</span>
<span class=normal>511</span>
<span class=normal>512</span>
<span class=normal>513</span>
<span class=normal>514</span>
<span class=normal>515</span>
<span class=normal>516</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_folder_label</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>folder_id</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Folder label for a given folder id.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Union[str, None]: Folder label.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>index</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_folders_model</span><span class=o>.</span><span class=n>get_index_by_id</span><span class=p>(</span><span class=n>folder_id</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>index</span><span class=o>.</span><span class=n>isValid</span><span class=p>():</span>
        <span class=k>return</span> <span class=n>index</span><span class=o>.</span><span class=n>data</span><span class=p>(</span><span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>DisplayRole</span><span class=p>)</span>
    <span class=k>return</span> <span class=kc>None</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.FoldersWidget.get_project_name class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_project_name</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Project name in which folders widget currently is.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Union[str, None]: Currently used project name.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/folders_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>457</span>
<span class=normal>458</span>
<span class=normal>459</span>
<span class=normal>460</span>
<span class=normal>461</span>
<span class=normal>462</span>
<span class=normal>463</span>
<span class=normal>464</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_project_name</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Project name in which folders widget currently is.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Union[str, None]: Currently used project name.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_folders_model</span><span class=o>.</span><span class=n>get_project_name</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.FoldersWidget.get_selected_folder_id class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_selected_folder_id</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Get selected folder id.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Union[str, None]: Folder id which is selected.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/folders_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>478</span>
<span class=normal>479</span>
<span class=normal>480</span>
<span class=normal>481</span>
<span class=normal>482</span>
<span class=normal>483</span>
<span class=normal>484</span>
<span class=normal>485</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_selected_folder_id</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get selected folder id.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Union[str, None]: Folder id which is selected.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_selected_item_id</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.FoldersWidget.get_selected_folder_label class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_selected_folder_label</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Selected folder label.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Union[str, None]: Selected folder label.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/folders_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>496</span>
<span class=normal>497</span>
<span class=normal>498</span>
<span class=normal>499</span>
<span class=normal>500</span>
<span class=normal>501</span>
<span class=normal>502</span>
<span class=normal>503</span>
<span class=normal>504</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_selected_folder_label</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Selected folder label.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Union[str, None]: Selected folder label.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>item_id</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_selected_item_id</span><span class=p>()</span>
    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_folder_label</span><span class=p>(</span><span class=n>item_id</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.FoldersWidget.get_selected_folder_path class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_selected_folder_path</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Get selected folder id.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Union[str, None]: Folder path which is selected.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/folders_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>487</span>
<span class=normal>488</span>
<span class=normal>489</span>
<span class=normal>490</span>
<span class=normal>491</span>
<span class=normal>492</span>
<span class=normal>493</span>
<span class=normal>494</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_selected_folder_path</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get selected folder id.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Union[str, None]: Folder path which is selected.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_selected_item_value</span><span class=p>(</span><span class=n>FOLDER_PATH_ROLE</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.FoldersWidget.refresh class="doc doc-heading"> <code class="highlight language-python"><span class=n>refresh</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Refresh folders model.</p> <p>Force to update folders model from controller.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/folders_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>449</span>
<span class=normal>450</span>
<span class=normal>451</span>
<span class=normal>452</span>
<span class=normal>453</span>
<span class=normal>454</span>
<span class=normal>455</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>refresh</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Refresh folders model.</span>

<span class=sd>    Force to update folders model from controller.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_folders_model</span><span class=o>.</span><span class=n>refresh</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.FoldersWidget.set_deselectable class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_deselectable</span><span class=p>(</span><span class=n>enabled</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Set deselectable mode.</p> <p>Items in view can be deselected.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>enabled</code> </td> <td> <code><span title=bool>bool</span></code> </td> <td> <div class=doc-md-description> <p>Enable deselectable mode.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/folders_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>566</span>
<span class=normal>567</span>
<span class=normal>568</span>
<span class=normal>569</span>
<span class=normal>570</span>
<span class=normal>571</span>
<span class=normal>572</span>
<span class=normal>573</span>
<span class=normal>574</span>
<span class=normal>575</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_deselectable</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>enabled</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Set deselectable mode.</span>

<span class=sd>    Items in view can be deselected.</span>

<span class=sd>    Args:</span>
<span class=sd>        enabled (bool): Enable deselectable mode.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_folders_view</span><span class=o>.</span><span class=n>set_deselectable</span><span class=p>(</span><span class=n>enabled</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.FoldersWidget.set_name_filter class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_name_filter</span><span class=p>(</span><span class=n>name</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Set filter of folder name.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>The string filter.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/folders_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>438</span>
<span class=normal>439</span>
<span class=normal>440</span>
<span class=normal>441</span>
<span class=normal>442</span>
<span class=normal>443</span>
<span class=normal>444</span>
<span class=normal>445</span>
<span class=normal>446</span>
<span class=normal>447</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_name_filter</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Set filter of folder name.</span>

<span class=sd>    Args:</span>
<span class=sd>        name (str): The string filter.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_folders_proxy_model</span><span class=o>.</span><span class=n>setFilterFixedString</span><span class=p>(</span><span class=n>name</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>name</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_folders_view</span><span class=o>.</span><span class=n>expandAll</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.FoldersWidget.set_project_name class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_project_name</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Set project name.</p> <p>Do not use this method when controller is handling selection of project using 'selection.project.changed' event.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>project_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Project name.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/folders_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>466</span>
<span class=normal>467</span>
<span class=normal>468</span>
<span class=normal>469</span>
<span class=normal>470</span>
<span class=normal>471</span>
<span class=normal>472</span>
<span class=normal>473</span>
<span class=normal>474</span>
<span class=normal>475</span>
<span class=normal>476</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_project_name</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>project_name</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Set project name.</span>

<span class=sd>    Do not use this method when controller is handling selection of</span>
<span class=sd>    project using &#39;selection.project.changed&#39; event.</span>

<span class=sd>    Args:</span>
<span class=sd>        project_name (str): Project name.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_folders_model</span><span class=o>.</span><span class=n>set_project_name</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.FoldersWidget.set_selected_folder class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_selected_folder</span><span class=p>(</span><span class=n>folder_id</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Change selection.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>folder_id</code> </td> <td> <code><span title=Union>Union</span>[<span title=str>str</span>, None]</code> </td> <td> <div class=doc-md-description> <p>Folder id or None to deselect.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>bool</code></td> <td> </td> <td> <div class=doc-md-description> <p>Requested folder was selected.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/folders_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>518</span>
<span class=normal>519</span>
<span class=normal>520</span>
<span class=normal>521</span>
<span class=normal>522</span>
<span class=normal>523</span>
<span class=normal>524</span>
<span class=normal>525</span>
<span class=normal>526</span>
<span class=normal>527</span>
<span class=normal>528</span>
<span class=normal>529</span>
<span class=normal>530</span>
<span class=normal>531</span>
<span class=normal>532</span>
<span class=normal>533</span>
<span class=normal>534</span>
<span class=normal>535</span>
<span class=normal>536</span>
<span class=normal>537</span>
<span class=normal>538</span>
<span class=normal>539</span>
<span class=normal>540</span>
<span class=normal>541</span>
<span class=normal>542</span>
<span class=normal>543</span>
<span class=normal>544</span>
<span class=normal>545</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_selected_folder</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>folder_id</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Change selection.</span>

<span class=sd>    Args:</span>
<span class=sd>        folder_id (Union[str, None]): Folder id or None to deselect.</span>

<span class=sd>    Returns:</span>
<span class=sd>        bool: Requested folder was selected.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=n>folder_id</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_folders_view</span><span class=o>.</span><span class=n>clearSelection</span><span class=p>()</span>
        <span class=k>return</span> <span class=kc>True</span>

    <span class=k>if</span> <span class=n>folder_id</span> <span class=o>==</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_selected_item_id</span><span class=p>():</span>
        <span class=k>return</span> <span class=kc>True</span>
    <span class=n>index</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_folders_model</span><span class=o>.</span><span class=n>get_index_by_id</span><span class=p>(</span><span class=n>folder_id</span><span class=p>)</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>index</span><span class=o>.</span><span class=n>isValid</span><span class=p>():</span>
        <span class=k>return</span> <span class=kc>False</span>

    <span class=n>proxy_index</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_folders_proxy_model</span><span class=o>.</span><span class=n>mapFromSource</span><span class=p>(</span><span class=n>index</span><span class=p>)</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>proxy_index</span><span class=o>.</span><span class=n>isValid</span><span class=p>():</span>
        <span class=k>return</span> <span class=kc>False</span>

    <span class=n>selection_model</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_folders_view</span><span class=o>.</span><span class=n>selectionModel</span><span class=p>()</span>
    <span class=n>selection_model</span><span class=o>.</span><span class=n>setCurrentIndex</span><span class=p>(</span>
        <span class=n>proxy_index</span><span class=p>,</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>QItemSelectionModel</span><span class=o>.</span><span class=n>SelectCurrent</span>
    <span class=p>)</span>
    <span class=k>return</span> <span class=kc>True</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.FoldersWidget.set_selected_folder_path class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_selected_folder_path</span><span class=p>(</span><span class=n>folder_path</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Set selected folder by path.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>folder_path</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Folder path.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>bool</code></td> <td> </td> <td> <div class=doc-md-description> <p>Requested folder was selected.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/folders_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>547</span>
<span class=normal>548</span>
<span class=normal>549</span>
<span class=normal>550</span>
<span class=normal>551</span>
<span class=normal>552</span>
<span class=normal>553</span>
<span class=normal>554</span>
<span class=normal>555</span>
<span class=normal>556</span>
<span class=normal>557</span>
<span class=normal>558</span>
<span class=normal>559</span>
<span class=normal>560</span>
<span class=normal>561</span>
<span class=normal>562</span>
<span class=normal>563</span>
<span class=normal>564</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_selected_folder_path</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>folder_path</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Set selected folder by path.</span>

<span class=sd>    Args:</span>
<span class=sd>        folder_path (str): Folder path.</span>

<span class=sd>    Returns:</span>
<span class=sd>        bool: Requested folder was selected.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=n>folder_path</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_folders_view</span><span class=o>.</span><span class=n>clearSelection</span><span class=p>()</span>
        <span class=k>return</span> <span class=kc>True</span>

    <span class=n>folder_id</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_folders_model</span><span class=o>.</span><span class=n>get_item_id_by_path</span><span class=p>(</span><span class=n>folder_path</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>folder_id</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>return</span> <span class=kc>False</span>
    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>set_selected_folder</span><span class=p>(</span><span class=n>folder_id</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.tools.utils.IconButton class="doc doc-heading"> <code>IconButton</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=qtpy.QtWidgets.QPushButton>QPushButton</span></code></p> <p>PushButton with icon and size of font.</p> <p>Using font metrics height as icon size reference.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/widgets.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>640</span>
<span class=normal>641</span>
<span class=normal>642</span>
<span class=normal>643</span>
<span class=normal>644</span>
<span class=normal>645</span>
<span class=normal>646</span>
<span class=normal>647</span>
<span class=normal>648</span>
<span class=normal>649</span>
<span class=normal>650</span>
<span class=normal>651</span>
<span class=normal>652</span>
<span class=normal>653</span>
<span class=normal>654</span>
<span class=normal>655</span>
<span class=normal>656</span>
<span class=normal>657</span>
<span class=normal>658</span>
<span class=normal>659</span>
<span class=normal>660</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>IconButton</span><span class=p>(</span><span class=n>QtWidgets</span><span class=o>.</span><span class=n>QPushButton</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;PushButton with icon and size of font.</span>

<span class=sd>    Using font metrics height as icon size reference.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>IconButton</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>setObjectName</span><span class=p>(</span><span class=s2>&quot;IconButton&quot;</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>sizeHint</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=n>result</span> <span class=o>=</span> <span class=nb>super</span><span class=p>(</span><span class=n>IconButton</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>sizeHint</span><span class=p>()</span>
        <span class=n>icon_h</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>iconSize</span><span class=p>()</span><span class=o>.</span><span class=n>height</span><span class=p>()</span>
        <span class=n>font_height</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>fontMetrics</span><span class=p>()</span><span class=o>.</span><span class=n>height</span><span class=p>()</span>
        <span class=n>text_set</span> <span class=o>=</span> <span class=nb>bool</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>text</span><span class=p>())</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>text_set</span> <span class=ow>and</span> <span class=n>icon_h</span> <span class=o>&lt;</span> <span class=n>font_height</span><span class=p>:</span>
            <span class=n>new_size</span> <span class=o>=</span> <span class=n>result</span><span class=o>.</span><span class=n>height</span><span class=p>()</span> <span class=o>-</span> <span class=n>icon_h</span> <span class=o>+</span> <span class=n>font_height</span>
            <span class=n>result</span><span class=o>.</span><span class=n>setHeight</span><span class=p>(</span><span class=n>new_size</span><span class=p>)</span>
            <span class=n>result</span><span class=o>.</span><span class=n>setWidth</span><span class=p>(</span><span class=n>new_size</span><span class=p>)</span>

        <span class=k>return</span> <span class=n>result</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.tools.utils.MessageOverlayObject class="doc doc-heading"> <code>MessageOverlayObject</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=qtpy.QtCore.QObject>QObject</span></code></p> <p>Object that can be used to add overlay messages.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>widget</code> </td> <td> <code><span title=QWidget>QWidget</span></code> </td> <td> <div class=doc-md-description> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/overlay_messages.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span>
<span class=normal>277</span>
<span class=normal>278</span>
<span class=normal>279</span>
<span class=normal>280</span>
<span class=normal>281</span>
<span class=normal>282</span>
<span class=normal>283</span>
<span class=normal>284</span>
<span class=normal>285</span>
<span class=normal>286</span>
<span class=normal>287</span>
<span class=normal>288</span>
<span class=normal>289</span>
<span class=normal>290</span>
<span class=normal>291</span>
<span class=normal>292</span>
<span class=normal>293</span>
<span class=normal>294</span>
<span class=normal>295</span>
<span class=normal>296</span>
<span class=normal>297</span>
<span class=normal>298</span>
<span class=normal>299</span>
<span class=normal>300</span>
<span class=normal>301</span>
<span class=normal>302</span>
<span class=normal>303</span>
<span class=normal>304</span>
<span class=normal>305</span>
<span class=normal>306</span>
<span class=normal>307</span>
<span class=normal>308</span>
<span class=normal>309</span>
<span class=normal>310</span>
<span class=normal>311</span>
<span class=normal>312</span>
<span class=normal>313</span>
<span class=normal>314</span>
<span class=normal>315</span>
<span class=normal>316</span>
<span class=normal>317</span>
<span class=normal>318</span>
<span class=normal>319</span>
<span class=normal>320</span>
<span class=normal>321</span>
<span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span>
<span class=normal>325</span>
<span class=normal>326</span>
<span class=normal>327</span>
<span class=normal>328</span>
<span class=normal>329</span>
<span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span>
<span class=normal>334</span>
<span class=normal>335</span>
<span class=normal>336</span>
<span class=normal>337</span>
<span class=normal>338</span>
<span class=normal>339</span>
<span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span>
<span class=normal>344</span>
<span class=normal>345</span>
<span class=normal>346</span>
<span class=normal>347</span>
<span class=normal>348</span>
<span class=normal>349</span>
<span class=normal>350</span>
<span class=normal>351</span>
<span class=normal>352</span>
<span class=normal>353</span>
<span class=normal>354</span>
<span class=normal>355</span>
<span class=normal>356</span>
<span class=normal>357</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>MessageOverlayObject</span><span class=p>(</span><span class=n>QtCore</span><span class=o>.</span><span class=n>QObject</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Object that can be used to add overlay messages.</span>

<span class=sd>    Args:</span>
<span class=sd>        widget (QWidget):</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>widget</span><span class=p>,</span> <span class=n>default_timeout</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>MessageOverlayObject</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>()</span>

        <span class=n>widget</span><span class=o>.</span><span class=n>installEventFilter</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>

        <span class=c1># Timer which triggers recalculation of message positions</span>
        <span class=n>recalculate_timer</span> <span class=o>=</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>QTimer</span><span class=p>()</span>
        <span class=n>recalculate_timer</span><span class=o>.</span><span class=n>setInterval</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>

        <span class=n>recalculate_timer</span><span class=o>.</span><span class=n>timeout</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_recalculate_positions</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_widget</span> <span class=o>=</span> <span class=n>widget</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_recalculate_timer</span> <span class=o>=</span> <span class=n>recalculate_timer</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_messages_order</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_closing_messages</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_messages</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_spacing</span> <span class=o>=</span> <span class=mi>5</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_move_size</span> <span class=o>=</span> <span class=mi>4</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_move_size_remove</span> <span class=o>=</span> <span class=mi>8</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_default_timeout</span> <span class=o>=</span> <span class=n>default_timeout</span>

    <span class=k>def</span><span class=w> </span><span class=nf>add_message</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span> <span class=n>message</span><span class=p>,</span> <span class=n>message_type</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>timeout</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>message_id</span><span class=o>=</span><span class=kc>None</span>
    <span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Add single message into overlay.</span>

<span class=sd>        Args:</span>
<span class=sd>            message (str): Message that will be shown.</span>
<span class=sd>            timeout (int): Message timeout.</span>
<span class=sd>            message_type (str): Message type can be used as property in</span>
<span class=sd>                stylesheets.</span>
<span class=sd>            message_id (str): UUID of already existing message to update</span>
<span class=sd>                it&#39;s message and timeout. Is created with different id if is</span>
<span class=sd>                not available anymore.</span>

<span class=sd>        Returns:</span>
<span class=sd>            str: UUID of message which can be used to update message.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=c1># Skip empty messages</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>message</span><span class=p>:</span>
            <span class=k>return</span>

        <span class=k>if</span> <span class=n>timeout</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>timeout</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_default_timeout</span>

        <span class=c1># Create unique id of message</span>
        <span class=n>widget</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=k>if</span> <span class=n>message_id</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>widget</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_messages</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>message_id</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>message_id</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>message_id</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>())</span>

        <span class=k>elif</span> <span class=n>message_id</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_messages_order</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_messages_order</span><span class=o>.</span><span class=n>remove</span><span class=p>(</span><span class=n>message_id</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>widget</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=c1># NOTE: Update of message won&#39;t change paint order which should be</span>
            <span class=c1>#   ok in most of cases as it matters only when messages are</span>
            <span class=c1>#   animated</span>
            <span class=n>widget</span><span class=o>.</span><span class=n>update_message</span><span class=p>(</span><span class=n>message</span><span class=p>,</span> <span class=n>message_type</span><span class=p>,</span> <span class=n>timeout</span><span class=p>)</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=c1># Create message widget</span>
            <span class=n>widget</span> <span class=o>=</span> <span class=n>OverlayMessageWidget</span><span class=p>(</span>
                <span class=n>message_id</span><span class=p>,</span> <span class=n>message</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_widget</span><span class=p>,</span> <span class=n>message_type</span><span class=p>,</span> <span class=n>timeout</span>
            <span class=p>)</span>
            <span class=n>widget</span><span class=o>.</span><span class=n>close_requested</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_on_message_close_request</span><span class=p>)</span>
            <span class=n>widget</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>

        <span class=c1># Move widget outside of window</span>
        <span class=n>pos</span> <span class=o>=</span> <span class=n>widget</span><span class=o>.</span><span class=n>pos</span><span class=p>()</span>
        <span class=n>pos</span><span class=o>.</span><span class=n>setY</span><span class=p>(</span><span class=n>pos</span><span class=o>.</span><span class=n>y</span><span class=p>()</span> <span class=o>-</span> <span class=n>widget</span><span class=o>.</span><span class=n>height</span><span class=p>())</span>
        <span class=n>widget</span><span class=o>.</span><span class=n>move</span><span class=p>(</span><span class=n>pos</span><span class=p>)</span>
        <span class=c1># Store message</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_messages</span><span class=p>[</span><span class=n>message_id</span><span class=p>]</span> <span class=o>=</span> <span class=n>widget</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_messages_order</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>message_id</span><span class=p>)</span>
        <span class=c1># Trigger recalculation timer</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_recalculate_timer</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>

        <span class=k>return</span> <span class=n>message_id</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_on_message_close_request</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>message_id</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Message widget requested removement.&quot;&quot;&quot;</span>

        <span class=n>widget</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_messages</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>message_id</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>widget</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=c1># Add message to closing messages and start recalculation</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_closing_messages</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>message_id</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_recalculate_timer</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_recalculate_positions</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Recalculate positions of widgets.&quot;&quot;&quot;</span>

        <span class=c1># Skip if there are no messages to process</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_messages_order</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_recalculate_timer</span><span class=o>.</span><span class=n>stop</span><span class=p>()</span>
            <span class=k>return</span>

        <span class=c1># All message widgets are in expected positions</span>
        <span class=n>all_at_place</span> <span class=o>=</span> <span class=kc>True</span>
        <span class=c1># Starting y position</span>
        <span class=n>pos_y</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_spacing</span>
        <span class=c1># Current widget width</span>
        <span class=n>widget_width</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_widget</span><span class=o>.</span><span class=n>width</span><span class=p>()</span>
        <span class=n>max_width</span> <span class=o>=</span> <span class=n>widget_width</span> <span class=o>-</span> <span class=p>(</span><span class=mi>2</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>_spacing</span><span class=p>)</span>
        <span class=n>widget_half_width</span> <span class=o>=</span> <span class=n>widget_width</span> <span class=o>/</span> <span class=mi>2</span>

        <span class=c1># Store message ids that should be removed</span>
        <span class=n>message_ids_to_remove</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
        <span class=k>for</span> <span class=n>message_id</span> <span class=ow>in</span> <span class=nb>reversed</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_messages_order</span><span class=p>):</span>
            <span class=n>widget</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_messages</span><span class=p>[</span><span class=n>message_id</span><span class=p>]</span>
            <span class=n>pos</span> <span class=o>=</span> <span class=n>widget</span><span class=o>.</span><span class=n>pos</span><span class=p>()</span>
            <span class=c1># Messages to remove are moved upwards</span>
            <span class=k>if</span> <span class=n>message_id</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_closing_messages</span><span class=p>:</span>
                <span class=n>bottom</span> <span class=o>=</span> <span class=n>pos</span><span class=o>.</span><span class=n>y</span><span class=p>()</span> <span class=o>+</span> <span class=n>widget</span><span class=o>.</span><span class=n>height</span><span class=p>()</span>
                <span class=c1># Add message to remove if is not visible</span>
                <span class=k>if</span> <span class=n>bottom</span> <span class=o>&lt;</span> <span class=mi>0</span> <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>_move_size_remove</span> <span class=o>&lt;</span> <span class=mi>1</span><span class=p>:</span>
                    <span class=n>message_ids_to_remove</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>message_id</span><span class=p>)</span>
                    <span class=k>continue</span>

                <span class=c1># Calculate new y position of message</span>
                <span class=n>dst_pos_y</span> <span class=o>=</span> <span class=n>pos</span><span class=o>.</span><span class=n>y</span><span class=p>()</span> <span class=o>-</span> <span class=bp>self</span><span class=o>.</span><span class=n>_move_size_remove</span>

            <span class=k>else</span><span class=p>:</span>
                <span class=c1># Calculate y position of message</span>
                <span class=c1># - use y position of previous message widget and add</span>
                <span class=c1>#   move size if is not in final destination yet</span>
                <span class=k>if</span> <span class=n>widget</span><span class=o>.</span><span class=n>underMouse</span><span class=p>():</span>
                    <span class=n>dst_pos_y</span> <span class=o>=</span> <span class=n>pos</span><span class=o>.</span><span class=n>y</span><span class=p>()</span>
                <span class=k>elif</span> <span class=n>pos</span><span class=o>.</span><span class=n>y</span><span class=p>()</span> <span class=o>==</span> <span class=n>pos_y</span> <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>_move_size</span> <span class=o>&lt;</span> <span class=mi>1</span><span class=p>:</span>
                    <span class=n>dst_pos_y</span> <span class=o>=</span> <span class=n>pos_y</span>
                <span class=k>elif</span> <span class=n>pos</span><span class=o>.</span><span class=n>y</span><span class=p>()</span> <span class=o>&lt;</span> <span class=n>pos_y</span><span class=p>:</span>
                    <span class=n>dst_pos_y</span> <span class=o>=</span> <span class=nb>min</span><span class=p>(</span><span class=n>pos_y</span><span class=p>,</span> <span class=n>pos</span><span class=o>.</span><span class=n>y</span><span class=p>()</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>_move_size</span><span class=p>)</span>
                <span class=k>else</span><span class=p>:</span>
                    <span class=n>dst_pos_y</span> <span class=o>=</span> <span class=nb>max</span><span class=p>(</span><span class=n>pos_y</span><span class=p>,</span> <span class=n>pos</span><span class=o>.</span><span class=n>y</span><span class=p>()</span> <span class=o>-</span> <span class=bp>self</span><span class=o>.</span><span class=n>_move_size</span><span class=p>)</span>

            <span class=c1># Store if widget is in place where should be</span>
            <span class=k>if</span> <span class=n>all_at_place</span> <span class=ow>and</span> <span class=n>dst_pos_y</span> <span class=o>!=</span> <span class=n>pos_y</span><span class=p>:</span>
                <span class=n>all_at_place</span> <span class=o>=</span> <span class=kc>False</span>

            <span class=c1># Calculate ideal width and height of message widget</span>
            <span class=n>height</span> <span class=o>=</span> <span class=n>widget</span><span class=o>.</span><span class=n>heightForWidth</span><span class=p>(</span><span class=n>max_width</span><span class=p>)</span>
            <span class=n>w_size_hint</span> <span class=o>=</span> <span class=n>widget</span><span class=o>.</span><span class=n>size_hint_without_word_wrap</span><span class=p>()</span>
            <span class=n>widget</span><span class=o>.</span><span class=n>resize</span><span class=p>(</span><span class=nb>min</span><span class=p>(</span><span class=n>max_width</span><span class=p>,</span> <span class=n>w_size_hint</span><span class=o>.</span><span class=n>width</span><span class=p>()),</span> <span class=n>height</span><span class=p>)</span>

            <span class=c1># Center message widget</span>
            <span class=n>size</span> <span class=o>=</span> <span class=n>widget</span><span class=o>.</span><span class=n>size</span><span class=p>()</span>
            <span class=n>pos_x</span> <span class=o>=</span> <span class=n>widget_half_width</span> <span class=o>-</span> <span class=p>(</span><span class=n>size</span><span class=o>.</span><span class=n>width</span><span class=p>()</span> <span class=o>/</span> <span class=mi>2</span><span class=p>)</span>
            <span class=c1># Move widget to destination position</span>
            <span class=n>widget</span><span class=o>.</span><span class=n>move</span><span class=p>(</span><span class=n>pos_x</span><span class=p>,</span> <span class=n>dst_pos_y</span><span class=p>)</span>

            <span class=c1># Add message widget height and spacing for next message widget</span>
            <span class=n>pos_y</span> <span class=o>+=</span> <span class=n>size</span><span class=o>.</span><span class=n>height</span><span class=p>()</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>_spacing</span>

        <span class=c1># Remove widgets to remove</span>
        <span class=k>for</span> <span class=n>message_id</span> <span class=ow>in</span> <span class=n>message_ids_to_remove</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_messages_order</span><span class=o>.</span><span class=n>remove</span><span class=p>(</span><span class=n>message_id</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_closing_messages</span><span class=o>.</span><span class=n>remove</span><span class=p>(</span><span class=n>message_id</span><span class=p>)</span>
            <span class=n>widget</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_messages</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>message_id</span><span class=p>)</span>
            <span class=n>widget</span><span class=o>.</span><span class=n>hide</span><span class=p>()</span>
            <span class=n>widget</span><span class=o>.</span><span class=n>deleteLater</span><span class=p>()</span>

        <span class=c1># Stop recalculation timer if all widgets are where should be</span>
        <span class=k>if</span> <span class=n>all_at_place</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_recalculate_timer</span><span class=o>.</span><span class=n>stop</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>eventFilter</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>source</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
        <span class=c1># Trigger recalculation of timer on resize of widget</span>
        <span class=k>if</span> <span class=n>source</span> <span class=ow>is</span> <span class=bp>self</span><span class=o>.</span><span class=n>_widget</span> <span class=ow>and</span> <span class=n>event</span><span class=o>.</span><span class=n>type</span><span class=p>()</span> <span class=o>==</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>QEvent</span><span class=o>.</span><span class=n>Resize</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_recalculate_timer</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>

        <span class=k>return</span> <span class=nb>super</span><span class=p>(</span><span class=n>MessageOverlayObject</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>eventFilter</span><span class=p>(</span><span class=n>source</span><span class=p>,</span> <span class=n>event</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.MessageOverlayObject.add_message class="doc doc-heading"> <code class="highlight language-python"><span class=n>add_message</span><span class=p>(</span><span class=n>message</span><span class=p>,</span> <span class=n>message_type</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>timeout</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>message_id</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Add single message into overlay.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>message</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Message that will be shown.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>timeout</code> </td> <td> <code><span title=int>int</span></code> </td> <td> <div class=doc-md-description> <p>Message timeout.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>message_type</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Message type can be used as property in stylesheets.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>message_id</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>UUID of already existing message to update it's message and timeout. Is created with different id if is not available anymore.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>UUID of message which can be used to update message.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/overlay_messages.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>add_message</span><span class=p>(</span>
    <span class=bp>self</span><span class=p>,</span> <span class=n>message</span><span class=p>,</span> <span class=n>message_type</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>timeout</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>message_id</span><span class=o>=</span><span class=kc>None</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Add single message into overlay.</span>

<span class=sd>    Args:</span>
<span class=sd>        message (str): Message that will be shown.</span>
<span class=sd>        timeout (int): Message timeout.</span>
<span class=sd>        message_type (str): Message type can be used as property in</span>
<span class=sd>            stylesheets.</span>
<span class=sd>        message_id (str): UUID of already existing message to update</span>
<span class=sd>            it&#39;s message and timeout. Is created with different id if is</span>
<span class=sd>            not available anymore.</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: UUID of message which can be used to update message.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=c1># Skip empty messages</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>message</span><span class=p>:</span>
        <span class=k>return</span>

    <span class=k>if</span> <span class=n>timeout</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>timeout</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_default_timeout</span>

    <span class=c1># Create unique id of message</span>
    <span class=n>widget</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=k>if</span> <span class=n>message_id</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>widget</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_messages</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>message_id</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>message_id</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>message_id</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>())</span>

    <span class=k>elif</span> <span class=n>message_id</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_messages_order</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_messages_order</span><span class=o>.</span><span class=n>remove</span><span class=p>(</span><span class=n>message_id</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>widget</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
        <span class=c1># NOTE: Update of message won&#39;t change paint order which should be</span>
        <span class=c1>#   ok in most of cases as it matters only when messages are</span>
        <span class=c1>#   animated</span>
        <span class=n>widget</span><span class=o>.</span><span class=n>update_message</span><span class=p>(</span><span class=n>message</span><span class=p>,</span> <span class=n>message_type</span><span class=p>,</span> <span class=n>timeout</span><span class=p>)</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=c1># Create message widget</span>
        <span class=n>widget</span> <span class=o>=</span> <span class=n>OverlayMessageWidget</span><span class=p>(</span>
            <span class=n>message_id</span><span class=p>,</span> <span class=n>message</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_widget</span><span class=p>,</span> <span class=n>message_type</span><span class=p>,</span> <span class=n>timeout</span>
        <span class=p>)</span>
        <span class=n>widget</span><span class=o>.</span><span class=n>close_requested</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_on_message_close_request</span><span class=p>)</span>
        <span class=n>widget</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>

    <span class=c1># Move widget outside of window</span>
    <span class=n>pos</span> <span class=o>=</span> <span class=n>widget</span><span class=o>.</span><span class=n>pos</span><span class=p>()</span>
    <span class=n>pos</span><span class=o>.</span><span class=n>setY</span><span class=p>(</span><span class=n>pos</span><span class=o>.</span><span class=n>y</span><span class=p>()</span> <span class=o>-</span> <span class=n>widget</span><span class=o>.</span><span class=n>height</span><span class=p>())</span>
    <span class=n>widget</span><span class=o>.</span><span class=n>move</span><span class=p>(</span><span class=n>pos</span><span class=p>)</span>
    <span class=c1># Store message</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_messages</span><span class=p>[</span><span class=n>message_id</span><span class=p>]</span> <span class=o>=</span> <span class=n>widget</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_messages_order</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>message_id</span><span class=p>)</span>
    <span class=c1># Trigger recalculation timer</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_recalculate_timer</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>

    <span class=k>return</span> <span class=n>message_id</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.tools.utils.MultiSelectionComboBox class="doc doc-heading"> <code>MultiSelectionComboBox</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=qtpy.QtWidgets.QComboBox>QComboBox</span></code></p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/multiselection_combobox.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 34</span>
<span class=normal> 35</span>
<span class=normal> 36</span>
<span class=normal> 37</span>
<span class=normal> 38</span>
<span class=normal> 39</span>
<span class=normal> 40</span>
<span class=normal> 41</span>
<span class=normal> 42</span>
<span class=normal> 43</span>
<span class=normal> 44</span>
<span class=normal> 45</span>
<span class=normal> 46</span>
<span class=normal> 47</span>
<span class=normal> 48</span>
<span class=normal> 49</span>
<span class=normal> 50</span>
<span class=normal> 51</span>
<span class=normal> 52</span>
<span class=normal> 53</span>
<span class=normal> 54</span>
<span class=normal> 55</span>
<span class=normal> 56</span>
<span class=normal> 57</span>
<span class=normal> 58</span>
<span class=normal> 59</span>
<span class=normal> 60</span>
<span class=normal> 61</span>
<span class=normal> 62</span>
<span class=normal> 63</span>
<span class=normal> 64</span>
<span class=normal> 65</span>
<span class=normal> 66</span>
<span class=normal> 67</span>
<span class=normal> 68</span>
<span class=normal> 69</span>
<span class=normal> 70</span>
<span class=normal> 71</span>
<span class=normal> 72</span>
<span class=normal> 73</span>
<span class=normal> 74</span>
<span class=normal> 75</span>
<span class=normal> 76</span>
<span class=normal> 77</span>
<span class=normal> 78</span>
<span class=normal> 79</span>
<span class=normal> 80</span>
<span class=normal> 81</span>
<span class=normal> 82</span>
<span class=normal> 83</span>
<span class=normal> 84</span>
<span class=normal> 85</span>
<span class=normal> 86</span>
<span class=normal> 87</span>
<span class=normal> 88</span>
<span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span>
<span class=normal>277</span>
<span class=normal>278</span>
<span class=normal>279</span>
<span class=normal>280</span>
<span class=normal>281</span>
<span class=normal>282</span>
<span class=normal>283</span>
<span class=normal>284</span>
<span class=normal>285</span>
<span class=normal>286</span>
<span class=normal>287</span>
<span class=normal>288</span>
<span class=normal>289</span>
<span class=normal>290</span>
<span class=normal>291</span>
<span class=normal>292</span>
<span class=normal>293</span>
<span class=normal>294</span>
<span class=normal>295</span>
<span class=normal>296</span>
<span class=normal>297</span>
<span class=normal>298</span>
<span class=normal>299</span>
<span class=normal>300</span>
<span class=normal>301</span>
<span class=normal>302</span>
<span class=normal>303</span>
<span class=normal>304</span>
<span class=normal>305</span>
<span class=normal>306</span>
<span class=normal>307</span>
<span class=normal>308</span>
<span class=normal>309</span>
<span class=normal>310</span>
<span class=normal>311</span>
<span class=normal>312</span>
<span class=normal>313</span>
<span class=normal>314</span>
<span class=normal>315</span>
<span class=normal>316</span>
<span class=normal>317</span>
<span class=normal>318</span>
<span class=normal>319</span>
<span class=normal>320</span>
<span class=normal>321</span>
<span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span>
<span class=normal>325</span>
<span class=normal>326</span>
<span class=normal>327</span>
<span class=normal>328</span>
<span class=normal>329</span>
<span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span>
<span class=normal>334</span>
<span class=normal>335</span>
<span class=normal>336</span>
<span class=normal>337</span>
<span class=normal>338</span>
<span class=normal>339</span>
<span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span>
<span class=normal>344</span>
<span class=normal>345</span>
<span class=normal>346</span>
<span class=normal>347</span>
<span class=normal>348</span>
<span class=normal>349</span>
<span class=normal>350</span>
<span class=normal>351</span>
<span class=normal>352</span>
<span class=normal>353</span>
<span class=normal>354</span>
<span class=normal>355</span>
<span class=normal>356</span>
<span class=normal>357</span>
<span class=normal>358</span>
<span class=normal>359</span>
<span class=normal>360</span>
<span class=normal>361</span>
<span class=normal>362</span>
<span class=normal>363</span>
<span class=normal>364</span>
<span class=normal>365</span>
<span class=normal>366</span>
<span class=normal>367</span>
<span class=normal>368</span>
<span class=normal>369</span>
<span class=normal>370</span>
<span class=normal>371</span>
<span class=normal>372</span>
<span class=normal>373</span>
<span class=normal>374</span>
<span class=normal>375</span>
<span class=normal>376</span>
<span class=normal>377</span>
<span class=normal>378</span>
<span class=normal>379</span>
<span class=normal>380</span>
<span class=normal>381</span>
<span class=normal>382</span>
<span class=normal>383</span>
<span class=normal>384</span>
<span class=normal>385</span>
<span class=normal>386</span>
<span class=normal>387</span>
<span class=normal>388</span>
<span class=normal>389</span>
<span class=normal>390</span>
<span class=normal>391</span>
<span class=normal>392</span>
<span class=normal>393</span>
<span class=normal>394</span>
<span class=normal>395</span>
<span class=normal>396</span>
<span class=normal>397</span>
<span class=normal>398</span>
<span class=normal>399</span>
<span class=normal>400</span>
<span class=normal>401</span>
<span class=normal>402</span>
<span class=normal>403</span>
<span class=normal>404</span>
<span class=normal>405</span>
<span class=normal>406</span>
<span class=normal>407</span>
<span class=normal>408</span>
<span class=normal>409</span>
<span class=normal>410</span>
<span class=normal>411</span>
<span class=normal>412</span>
<span class=normal>413</span>
<span class=normal>414</span>
<span class=normal>415</span>
<span class=normal>416</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>MultiSelectionComboBox</span><span class=p>(</span><span class=n>QtWidgets</span><span class=o>.</span><span class=n>QComboBox</span><span class=p>):</span>
    <span class=n>value_changed</span> <span class=o>=</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Signal</span><span class=p>()</span>
    <span class=n>focused_in</span> <span class=o>=</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Signal</span><span class=p>()</span>

    <span class=n>ignored_keys</span> <span class=o>=</span> <span class=p>{</span>
        <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>Key_Up</span><span class=p>,</span>
        <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>Key_Down</span><span class=p>,</span>
        <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>Key_PageDown</span><span class=p>,</span>
        <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>Key_PageUp</span><span class=p>,</span>
        <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>Key_Home</span><span class=p>,</span>
        <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>Key_End</span><span class=p>,</span>
    <span class=p>}</span>

    <span class=n>top_bottom_padding</span> <span class=o>=</span> <span class=mi>2</span>
    <span class=n>left_right_padding</span> <span class=o>=</span> <span class=mi>3</span>
    <span class=n>left_offset</span> <span class=o>=</span> <span class=mi>4</span>
    <span class=n>top_bottom_margins</span> <span class=o>=</span> <span class=mi>1</span>
    <span class=n>item_spacing</span> <span class=o>=</span> <span class=mi>5</span>

    <span class=n>item_bg_color</span> <span class=o>=</span> <span class=n>QtGui</span><span class=o>.</span><span class=n>QColor</span><span class=p>(</span><span class=s2>&quot;#31424e&quot;</span><span class=p>)</span>
    <span class=n>_placeholder_color</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span> <span class=n>parent</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>placeholder</span><span class=o>=</span><span class=s2>&quot;&quot;</span><span class=p>,</span> <span class=n>separator</span><span class=o>=</span><span class=s2>&quot;, &quot;</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span>
    <span class=p>):</span>
        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>parent</span><span class=o>=</span><span class=n>parent</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>setObjectName</span><span class=p>(</span><span class=s2>&quot;MultiSelectionComboBox&quot;</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>setFocusPolicy</span><span class=p>(</span><span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>StrongFocus</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_popup_is_shown</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_block_mouse_release_timer</span> <span class=o>=</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>QTimer</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>singleShot</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_initial_mouse_pos</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_separator</span> <span class=o>=</span> <span class=n>separator</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_placeholder_text</span> <span class=o>=</span> <span class=n>placeholder</span> <span class=ow>or</span> <span class=s2>&quot;&quot;</span>
        <span class=n>delegate</span> <span class=o>=</span> <span class=n>ComboItemDelegate</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>setItemDelegate</span><span class=p>(</span><span class=n>delegate</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_lines</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_item_height</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_custom_text</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_delegate</span> <span class=o>=</span> <span class=n>delegate</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_placeholder_text</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_placeholder_text</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_placeholder_text</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>text</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_placeholder_text</span> <span class=o>=</span> <span class=n>text</span> <span class=ow>or</span> <span class=s2>&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_update_size_hint</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_custom_text</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>text</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_custom_text</span> <span class=o>=</span> <span class=n>text</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_update_size_hint</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>focusInEvent</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>focused_in</span><span class=o>.</span><span class=n>emit</span><span class=p>()</span>
        <span class=k>return</span> <span class=nb>super</span><span class=p>(</span><span class=n>MultiSelectionComboBox</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>focusInEvent</span><span class=p>(</span><span class=n>event</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>mousePressEvent</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Reimplemented.&quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_popup_is_shown</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>MultiSelectionComboBox</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>mousePressEvent</span><span class=p>(</span><span class=n>event</span><span class=p>)</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_popup_is_shown</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_initial_mouse_pos</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>mapToGlobal</span><span class=p>(</span><span class=n>event</span><span class=o>.</span><span class=n>pos</span><span class=p>())</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_block_mouse_release_timer</span><span class=o>.</span><span class=n>start</span><span class=p>(</span>
                <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QApplication</span><span class=o>.</span><span class=n>doubleClickInterval</span><span class=p>()</span>
            <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>showPopup</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Reimplemented.&quot;&quot;&quot;</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>MultiSelectionComboBox</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>showPopup</span><span class=p>()</span>
        <span class=n>view</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>view</span><span class=p>()</span>
        <span class=n>view</span><span class=o>.</span><span class=n>installEventFilter</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
        <span class=n>view</span><span class=o>.</span><span class=n>viewport</span><span class=p>()</span><span class=o>.</span><span class=n>installEventFilter</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_popup_is_shown</span> <span class=o>=</span> <span class=kc>True</span>

    <span class=k>def</span><span class=w> </span><span class=nf>hidePopup</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Reimplemented.&quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>view</span><span class=p>()</span><span class=o>.</span><span class=n>removeEventFilter</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>view</span><span class=p>()</span><span class=o>.</span><span class=n>viewport</span><span class=p>()</span><span class=o>.</span><span class=n>removeEventFilter</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_popup_is_shown</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_initial_mouse_pos</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>MultiSelectionComboBox</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>hidePopup</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>view</span><span class=p>()</span><span class=o>.</span><span class=n>clearFocus</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_event_popup_shown</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>obj</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_popup_is_shown</span><span class=p>:</span>
            <span class=k>return</span>

        <span class=n>current_index</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>view</span><span class=p>()</span><span class=o>.</span><span class=n>currentIndex</span><span class=p>()</span>
        <span class=n>model</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>model</span><span class=p>()</span>

        <span class=k>if</span> <span class=n>event</span><span class=o>.</span><span class=n>type</span><span class=p>()</span> <span class=o>==</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>QEvent</span><span class=o>.</span><span class=n>MouseMove</span><span class=p>:</span>
            <span class=k>if</span> <span class=p>(</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>view</span><span class=p>()</span><span class=o>.</span><span class=n>isVisible</span><span class=p>()</span>
                <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>_initial_mouse_pos</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span>
                <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>_block_mouse_release_timer</span><span class=o>.</span><span class=n>isActive</span><span class=p>()</span>
            <span class=p>):</span>
                <span class=n>diff</span> <span class=o>=</span> <span class=n>obj</span><span class=o>.</span><span class=n>mapToGlobal</span><span class=p>(</span><span class=n>event</span><span class=o>.</span><span class=n>pos</span><span class=p>())</span> <span class=o>-</span> <span class=bp>self</span><span class=o>.</span><span class=n>_initial_mouse_pos</span>
                <span class=k>if</span> <span class=n>diff</span><span class=o>.</span><span class=n>manhattanLength</span><span class=p>()</span> <span class=o>&gt;</span> <span class=mi>9</span><span class=p>:</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>_block_mouse_release_timer</span><span class=o>.</span><span class=n>stop</span><span class=p>()</span>
            <span class=k>return</span>

        <span class=n>index_flags</span> <span class=o>=</span> <span class=n>current_index</span><span class=o>.</span><span class=n>flags</span><span class=p>()</span>
        <span class=n>state</span> <span class=o>=</span> <span class=n>checkstate_int_to_enum</span><span class=p>(</span>
            <span class=n>current_index</span><span class=o>.</span><span class=n>data</span><span class=p>(</span><span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>CheckStateRole</span><span class=p>)</span>
        <span class=p>)</span>
        <span class=n>new_state</span> <span class=o>=</span> <span class=kc>None</span>

        <span class=k>if</span> <span class=n>event</span><span class=o>.</span><span class=n>type</span><span class=p>()</span> <span class=o>==</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>QEvent</span><span class=o>.</span><span class=n>MouseButtonRelease</span><span class=p>:</span>
            <span class=k>if</span> <span class=p>(</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_block_mouse_release_timer</span><span class=o>.</span><span class=n>isActive</span><span class=p>()</span>
                <span class=ow>or</span> <span class=ow>not</span> <span class=n>current_index</span><span class=o>.</span><span class=n>isValid</span><span class=p>()</span>
                <span class=ow>or</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>view</span><span class=p>()</span><span class=o>.</span><span class=n>isVisible</span><span class=p>()</span>
                <span class=ow>or</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>view</span><span class=p>()</span><span class=o>.</span><span class=n>rect</span><span class=p>()</span><span class=o>.</span><span class=n>contains</span><span class=p>(</span><span class=n>event</span><span class=o>.</span><span class=n>pos</span><span class=p>())</span>
                <span class=ow>or</span> <span class=ow>not</span> <span class=n>index_flags</span> <span class=o>&amp;</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>ItemIsSelectable</span>
                <span class=ow>or</span> <span class=ow>not</span> <span class=n>index_flags</span> <span class=o>&amp;</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>ItemIsEnabled</span>
                <span class=ow>or</span> <span class=ow>not</span> <span class=n>index_flags</span> <span class=o>&amp;</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>ItemIsUserCheckable</span>
            <span class=p>):</span>
                <span class=k>return</span>

            <span class=k>if</span> <span class=n>state</span> <span class=o>==</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>Unchecked</span><span class=p>:</span>
                <span class=n>new_state</span> <span class=o>=</span> <span class=n>CHECKED_INT</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=n>new_state</span> <span class=o>=</span> <span class=n>UNCHECKED_INT</span>

        <span class=k>elif</span> <span class=n>event</span><span class=o>.</span><span class=n>type</span><span class=p>()</span> <span class=o>==</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>QEvent</span><span class=o>.</span><span class=n>KeyPress</span><span class=p>:</span>
            <span class=c1># TODO: handle QtCore.Qt.Key_Enter, Key_Return?</span>
            <span class=k>if</span> <span class=n>event</span><span class=o>.</span><span class=n>key</span><span class=p>()</span> <span class=o>==</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>Key_Space</span><span class=p>:</span>
                <span class=k>if</span> <span class=p>(</span>
                    <span class=n>index_flags</span> <span class=o>&amp;</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>ItemIsUserCheckable</span>
                    <span class=ow>and</span> <span class=n>index_flags</span> <span class=o>&amp;</span> <span class=n>ITEM_IS_USER_TRISTATE</span>
                <span class=p>):</span>
                    <span class=n>new_state</span> <span class=o>=</span> <span class=p>(</span><span class=n>checkstate_enum_to_int</span><span class=p>(</span><span class=n>state</span><span class=p>)</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span> <span class=o>%</span> <span class=mi>3</span>

                <span class=k>elif</span> <span class=n>index_flags</span> <span class=o>&amp;</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>ItemIsUserCheckable</span><span class=p>:</span>
                    <span class=c1># toggle the current items check state</span>
                    <span class=k>if</span> <span class=n>state</span> <span class=o>!=</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>Checked</span><span class=p>:</span>
                        <span class=n>new_state</span> <span class=o>=</span> <span class=n>CHECKED_INT</span>
                    <span class=k>else</span><span class=p>:</span>
                        <span class=n>new_state</span> <span class=o>=</span> <span class=n>UNCHECKED_INT</span>

        <span class=k>if</span> <span class=n>new_state</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>model</span><span class=o>.</span><span class=n>setData</span><span class=p>(</span><span class=n>current_index</span><span class=p>,</span> <span class=n>new_state</span><span class=p>,</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>CheckStateRole</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>view</span><span class=p>()</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>current_index</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_update_size_hint</span><span class=p>()</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>value_changed</span><span class=o>.</span><span class=n>emit</span><span class=p>()</span>
            <span class=k>return</span> <span class=kc>True</span>

    <span class=k>def</span><span class=w> </span><span class=nf>eventFilter</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>obj</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Reimplemented.&quot;&quot;&quot;</span>
        <span class=n>result</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_event_popup_shown</span><span class=p>(</span><span class=n>obj</span><span class=p>,</span> <span class=n>event</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>result</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>result</span>

        <span class=k>return</span> <span class=nb>super</span><span class=p>(</span><span class=n>MultiSelectionComboBox</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>eventFilter</span><span class=p>(</span><span class=n>obj</span><span class=p>,</span> <span class=n>event</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>addItem</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
        <span class=n>idx</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>count</span><span class=p>()</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>MultiSelectionComboBox</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>addItem</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>model</span><span class=p>()</span><span class=o>.</span><span class=n>item</span><span class=p>(</span><span class=n>idx</span><span class=p>)</span><span class=o>.</span><span class=n>setCheckable</span><span class=p>(</span><span class=kc>True</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>paintEvent</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Reimplemented.&quot;&quot;&quot;</span>
        <span class=n>painter</span> <span class=o>=</span> <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QStylePainter</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
        <span class=n>option</span> <span class=o>=</span> <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QStyleOptionComboBox</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>initStyleOption</span><span class=p>(</span><span class=n>option</span><span class=p>)</span>
        <span class=n>painter</span><span class=o>.</span><span class=n>drawComplexControl</span><span class=p>(</span><span class=n>QtWidgets</span><span class=o>.</span><span class=n>QStyle</span><span class=o>.</span><span class=n>CC_ComboBox</span><span class=p>,</span> <span class=n>option</span><span class=p>)</span>

        <span class=n>items</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>checked_items_text</span><span class=p>()</span>
        <span class=c1># draw the icon and text</span>
        <span class=n>draw_text</span> <span class=o>=</span> <span class=kc>True</span>
        <span class=n>combotext</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_custom_text</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>combotext</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_custom_text</span>
        <span class=k>elif</span> <span class=ow>not</span> <span class=n>items</span><span class=p>:</span>
            <span class=n>combotext</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_placeholder_text</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>draw_text</span> <span class=o>=</span> <span class=kc>False</span>

        <span class=k>if</span> <span class=n>draw_text</span><span class=p>:</span>
            <span class=n>color</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_placeholder_color</span><span class=p>()</span>
            <span class=n>pen</span> <span class=o>=</span> <span class=n>painter</span><span class=o>.</span><span class=n>pen</span><span class=p>()</span>
            <span class=n>pen</span><span class=o>.</span><span class=n>setColor</span><span class=p>(</span><span class=n>color</span><span class=p>)</span>
            <span class=n>painter</span><span class=o>.</span><span class=n>setPen</span><span class=p>(</span><span class=n>pen</span><span class=p>)</span>

            <span class=n>left_x</span> <span class=o>=</span> <span class=n>option</span><span class=o>.</span><span class=n>rect</span><span class=o>.</span><span class=n>left</span><span class=p>()</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>left_offset</span>

            <span class=n>font</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>font</span><span class=p>()</span>
            <span class=c1># This is hardcoded point size from styles</span>
            <span class=n>font</span><span class=o>.</span><span class=n>setPointSize</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
            <span class=n>painter</span><span class=o>.</span><span class=n>setFont</span><span class=p>(</span><span class=n>font</span><span class=p>)</span>

            <span class=n>label_rect</span> <span class=o>=</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>QRect</span><span class=p>(</span><span class=n>option</span><span class=o>.</span><span class=n>rect</span><span class=p>)</span>
            <span class=n>label_rect</span><span class=o>.</span><span class=n>moveLeft</span><span class=p>(</span><span class=n>left_x</span><span class=p>)</span>

            <span class=n>painter</span><span class=o>.</span><span class=n>drawText</span><span class=p>(</span>
                <span class=n>label_rect</span><span class=p>,</span>
                <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>AlignLeft</span> <span class=o>|</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>AlignVCenter</span><span class=p>,</span>
                <span class=n>combotext</span>
            <span class=p>)</span>
            <span class=k>return</span>

        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_item_height</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>updateGeometry</span><span class=p>()</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>update</span><span class=p>()</span>
            <span class=k>return</span>

        <span class=n>font_metrics</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>fontMetrics</span><span class=p>()</span>
        <span class=k>for</span> <span class=n>line</span><span class=p>,</span> <span class=n>items</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_lines</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=n>top_y</span> <span class=o>=</span> <span class=p>(</span>
                <span class=n>option</span><span class=o>.</span><span class=n>rect</span><span class=o>.</span><span class=n>top</span><span class=p>()</span>
                <span class=o>+</span> <span class=p>(</span><span class=n>line</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>_item_height</span><span class=p>)</span>
                <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>top_bottom_margins</span>
            <span class=p>)</span>
            <span class=n>left_x</span> <span class=o>=</span> <span class=n>option</span><span class=o>.</span><span class=n>rect</span><span class=o>.</span><span class=n>left</span><span class=p>()</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>left_offset</span>
            <span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=n>items</span><span class=p>:</span>
                <span class=n>label_rect</span> <span class=o>=</span> <span class=n>font_metrics</span><span class=o>.</span><span class=n>boundingRect</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>
                <span class=n>label_height</span> <span class=o>=</span> <span class=n>label_rect</span><span class=o>.</span><span class=n>height</span><span class=p>()</span>

                <span class=n>label_rect</span><span class=o>.</span><span class=n>moveTop</span><span class=p>(</span><span class=n>top_y</span><span class=p>)</span>
                <span class=n>label_rect</span><span class=o>.</span><span class=n>moveLeft</span><span class=p>(</span><span class=n>left_x</span><span class=p>)</span>
                <span class=n>label_rect</span><span class=o>.</span><span class=n>setHeight</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_item_height</span><span class=p>)</span>
                <span class=n>label_rect</span><span class=o>.</span><span class=n>setWidth</span><span class=p>(</span>
                    <span class=n>label_rect</span><span class=o>.</span><span class=n>width</span><span class=p>()</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>left_right_padding</span>
                <span class=p>)</span>

                <span class=k>if</span> <span class=ow>not</span> <span class=n>draw_text</span><span class=p>:</span>
                    <span class=n>bg_rect</span> <span class=o>=</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>QRectF</span><span class=p>(</span><span class=n>label_rect</span><span class=p>)</span>
                    <span class=n>bg_rect</span><span class=o>.</span><span class=n>setWidth</span><span class=p>(</span>
                        <span class=n>label_rect</span><span class=o>.</span><span class=n>width</span><span class=p>()</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>left_right_padding</span>
                    <span class=p>)</span>
                    <span class=n>left_x</span> <span class=o>=</span> <span class=n>bg_rect</span><span class=o>.</span><span class=n>right</span><span class=p>()</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>item_spacing</span>

                    <span class=n>bg_rect</span><span class=o>.</span><span class=n>setHeight</span><span class=p>(</span>
                        <span class=n>label_height</span> <span class=o>+</span> <span class=p>(</span><span class=mi>2</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>top_bottom_padding</span><span class=p>)</span>
                    <span class=p>)</span>
                    <span class=n>bg_rect</span><span class=o>.</span><span class=n>moveTop</span><span class=p>(</span><span class=n>bg_rect</span><span class=o>.</span><span class=n>top</span><span class=p>()</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>top_bottom_margins</span><span class=p>)</span>

                    <span class=n>path</span> <span class=o>=</span> <span class=n>QtGui</span><span class=o>.</span><span class=n>QPainterPath</span><span class=p>()</span>
                    <span class=n>path</span><span class=o>.</span><span class=n>addRoundedRect</span><span class=p>(</span><span class=n>bg_rect</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>5</span><span class=p>)</span>

                    <span class=n>painter</span><span class=o>.</span><span class=n>fillPath</span><span class=p>(</span><span class=n>path</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>item_bg_color</span><span class=p>)</span>

                <span class=n>label_rect</span><span class=o>.</span><span class=n>moveLeft</span><span class=p>(</span><span class=n>label_rect</span><span class=o>.</span><span class=n>x</span><span class=p>()</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>left_right_padding</span><span class=p>)</span>

                <span class=n>painter</span><span class=o>.</span><span class=n>drawText</span><span class=p>(</span>
                    <span class=n>label_rect</span><span class=p>,</span>
                    <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>AlignLeft</span> <span class=o>|</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>AlignVCenter</span><span class=p>,</span>
                    <span class=n>item</span>
                <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>resizeEvent</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>MultiSelectionComboBox</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>resizeEvent</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_update_size_hint</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_update_size_hint</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_custom_text</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>update</span><span class=p>()</span>
            <span class=k>return</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_lines</span> <span class=o>=</span> <span class=p>{}</span>

        <span class=n>items</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>checked_items_text</span><span class=p>()</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>items</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>update</span><span class=p>()</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>repaint</span><span class=p>()</span>
            <span class=k>return</span>

        <span class=n>option</span> <span class=o>=</span> <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QStyleOptionComboBox</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>initStyleOption</span><span class=p>(</span><span class=n>option</span><span class=p>)</span>
        <span class=n>btn_rect</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>style</span><span class=p>()</span><span class=o>.</span><span class=n>subControlRect</span><span class=p>(</span>
            <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QStyle</span><span class=o>.</span><span class=n>CC_ComboBox</span><span class=p>,</span>
            <span class=n>option</span><span class=p>,</span>
            <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QStyle</span><span class=o>.</span><span class=n>SC_ComboBoxArrow</span>
        <span class=p>)</span>
        <span class=n>total_width</span> <span class=o>=</span> <span class=n>option</span><span class=o>.</span><span class=n>rect</span><span class=o>.</span><span class=n>width</span><span class=p>()</span> <span class=o>-</span> <span class=n>btn_rect</span><span class=o>.</span><span class=n>width</span><span class=p>()</span>

        <span class=n>line</span> <span class=o>=</span> <span class=mi>0</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_lines</span> <span class=o>=</span> <span class=p>{</span><span class=n>line</span><span class=p>:</span> <span class=p>[]}</span>

        <span class=n>font_metrics</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>fontMetrics</span><span class=p>()</span>
        <span class=n>default_left_x</span> <span class=o>=</span> <span class=mi>0</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>left_offset</span>
        <span class=n>left_x</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>default_left_x</span><span class=p>)</span>
        <span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=n>items</span><span class=p>:</span>
            <span class=n>rect</span> <span class=o>=</span> <span class=n>font_metrics</span><span class=o>.</span><span class=n>boundingRect</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>
            <span class=n>width</span> <span class=o>=</span> <span class=n>rect</span><span class=o>.</span><span class=n>width</span><span class=p>()</span> <span class=o>+</span> <span class=p>(</span><span class=mi>2</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>left_right_padding</span><span class=p>)</span>
            <span class=n>right_x</span> <span class=o>=</span> <span class=n>left_x</span> <span class=o>+</span> <span class=n>width</span>
            <span class=k>if</span> <span class=n>right_x</span> <span class=o>&gt;</span> <span class=n>total_width</span><span class=p>:</span>
                <span class=n>left_x</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>default_left_x</span><span class=p>)</span>
                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_lines</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>line</span><span class=p>):</span>
                    <span class=n>line</span> <span class=o>+=</span> <span class=mi>1</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>_lines</span><span class=p>[</span><span class=n>line</span><span class=p>]</span> <span class=o>=</span> <span class=p>[</span><span class=n>item</span><span class=p>]</span>
                    <span class=n>left_x</span> <span class=o>+=</span> <span class=n>width</span>
                <span class=k>else</span><span class=p>:</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>_lines</span><span class=p>[</span><span class=n>line</span><span class=p>]</span> <span class=o>=</span> <span class=p>[</span><span class=n>item</span><span class=p>]</span>
                    <span class=n>line</span> <span class=o>+=</span> <span class=mi>1</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=k>if</span> <span class=n>line</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_lines</span><span class=p>:</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>_lines</span><span class=p>[</span><span class=n>line</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>
                <span class=k>else</span><span class=p>:</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>_lines</span><span class=p>[</span><span class=n>line</span><span class=p>]</span> <span class=o>=</span> <span class=p>[</span><span class=n>item</span><span class=p>]</span>
                <span class=n>left_x</span> <span class=o>=</span> <span class=n>left_x</span> <span class=o>+</span> <span class=n>width</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>item_spacing</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>update</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>updateGeometry</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>sizeHint</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=n>value</span> <span class=o>=</span> <span class=nb>super</span><span class=p>(</span><span class=n>MultiSelectionComboBox</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>sizeHint</span><span class=p>()</span>
        <span class=n>lines</span> <span class=o>=</span> <span class=mi>1</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_custom_text</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>lines</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_lines</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>lines</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
                <span class=n>lines</span> <span class=o>=</span> <span class=mi>1</span>

        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_item_height</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_item_height</span> <span class=o>=</span> <span class=p>(</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>fontMetrics</span><span class=p>()</span><span class=o>.</span><span class=n>height</span><span class=p>()</span>
                <span class=o>+</span> <span class=p>(</span><span class=mi>2</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>top_bottom_padding</span><span class=p>)</span>
                <span class=o>+</span> <span class=p>(</span><span class=mi>2</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>top_bottom_margins</span><span class=p>)</span>
            <span class=p>)</span>
        <span class=n>value</span><span class=o>.</span><span class=n>setHeight</span><span class=p>(</span>
            <span class=p>(</span><span class=n>lines</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>_item_height</span><span class=p>)</span>
            <span class=o>+</span> <span class=p>(</span><span class=mi>2</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>top_bottom_margins</span><span class=p>)</span>
        <span class=p>)</span>
        <span class=k>return</span> <span class=n>value</span>

    <span class=k>def</span><span class=w> </span><span class=nf>setItemCheckState</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>index</span><span class=p>,</span> <span class=n>state</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>setItemData</span><span class=p>(</span><span class=n>index</span><span class=p>,</span> <span class=n>state</span><span class=p>,</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>CheckStateRole</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_value</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>values</span><span class=p>):</span>
        <span class=k>for</span> <span class=n>idx</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>count</span><span class=p>()):</span>
            <span class=n>value</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>itemData</span><span class=p>(</span><span class=n>idx</span><span class=p>,</span> <span class=n>role</span><span class=o>=</span><span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>UserRole</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>values</span><span class=p>:</span>
                <span class=n>check_state</span> <span class=o>=</span> <span class=n>CHECKED_INT</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=n>check_state</span> <span class=o>=</span> <span class=n>UNCHECKED_INT</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>setItemData</span><span class=p>(</span><span class=n>idx</span><span class=p>,</span> <span class=n>check_state</span><span class=p>,</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>CheckStateRole</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_update_size_hint</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>value</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=n>items</span> <span class=o>=</span> <span class=nb>list</span><span class=p>()</span>
        <span class=k>for</span> <span class=n>idx</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>count</span><span class=p>()):</span>
            <span class=n>state</span> <span class=o>=</span> <span class=n>checkstate_int_to_enum</span><span class=p>(</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>itemData</span><span class=p>(</span><span class=n>idx</span><span class=p>,</span> <span class=n>role</span><span class=o>=</span><span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>CheckStateRole</span><span class=p>)</span>
            <span class=p>)</span>
            <span class=k>if</span> <span class=n>state</span> <span class=o>==</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>Checked</span><span class=p>:</span>
                <span class=n>items</span><span class=o>.</span><span class=n>append</span><span class=p>(</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>itemData</span><span class=p>(</span><span class=n>idx</span><span class=p>,</span> <span class=n>role</span><span class=o>=</span><span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>UserRole</span><span class=p>)</span>
                <span class=p>)</span>
        <span class=k>return</span> <span class=n>items</span>

    <span class=k>def</span><span class=w> </span><span class=nf>checked_items_text</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=n>items</span> <span class=o>=</span> <span class=nb>list</span><span class=p>()</span>
        <span class=k>for</span> <span class=n>idx</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>count</span><span class=p>()):</span>
            <span class=n>state</span> <span class=o>=</span> <span class=n>checkstate_int_to_enum</span><span class=p>(</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>itemData</span><span class=p>(</span><span class=n>idx</span><span class=p>,</span> <span class=n>role</span><span class=o>=</span><span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>CheckStateRole</span><span class=p>)</span>
            <span class=p>)</span>
            <span class=k>if</span> <span class=n>state</span> <span class=o>==</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>Checked</span><span class=p>:</span>
                <span class=n>items</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>itemText</span><span class=p>(</span><span class=n>idx</span><span class=p>))</span>
        <span class=k>return</span> <span class=n>items</span>

    <span class=k>def</span><span class=w> </span><span class=nf>wheelEvent</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
        <span class=n>event</span><span class=o>.</span><span class=n>ignore</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>keyPressEvent</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
        <span class=k>if</span> <span class=p>(</span>
            <span class=n>event</span><span class=o>.</span><span class=n>key</span><span class=p>()</span> <span class=o>==</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>Key_Down</span>
            <span class=ow>and</span> <span class=n>event</span><span class=o>.</span><span class=n>modifiers</span><span class=p>()</span> <span class=o>&amp;</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>AltModifier</span>
        <span class=p>):</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>showPopup</span><span class=p>()</span>

        <span class=k>if</span> <span class=n>event</span><span class=o>.</span><span class=n>key</span><span class=p>()</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>ignored_keys</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>event</span><span class=o>.</span><span class=n>ignore</span><span class=p>()</span>

        <span class=k>return</span> <span class=nb>super</span><span class=p>(</span><span class=n>MultiSelectionComboBox</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>keyPressEvent</span><span class=p>(</span><span class=n>event</span><span class=p>)</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>_get_placeholder_color</span><span class=p>(</span><span class=bp>cls</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_placeholder_color</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>color_obj</span> <span class=o>=</span> <span class=n>get_objected_colors</span><span class=p>(</span><span class=s2>&quot;font&quot;</span><span class=p>)</span>
            <span class=n>color</span> <span class=o>=</span> <span class=n>color_obj</span><span class=o>.</span><span class=n>get_qcolor</span><span class=p>()</span>
            <span class=n>color</span><span class=o>.</span><span class=n>setAlpha</span><span class=p>(</span><span class=mi>67</span><span class=p>)</span>
            <span class=bp>cls</span><span class=o>.</span><span class=n>_placeholder_color</span> <span class=o>=</span> <span class=n>color</span>
        <span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_placeholder_color</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.MultiSelectionComboBox.eventFilter class="doc doc-heading"> <code class="highlight language-python"><span class=n>eventFilter</span><span class=p>(</span><span class=n>obj</span><span class=p>,</span> <span class=n>event</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Reimplemented.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/multiselection_combobox.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>eventFilter</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>obj</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Reimplemented.&quot;&quot;&quot;</span>
    <span class=n>result</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_event_popup_shown</span><span class=p>(</span><span class=n>obj</span><span class=p>,</span> <span class=n>event</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>result</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>result</span>

    <span class=k>return</span> <span class=nb>super</span><span class=p>(</span><span class=n>MultiSelectionComboBox</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>eventFilter</span><span class=p>(</span><span class=n>obj</span><span class=p>,</span> <span class=n>event</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.MultiSelectionComboBox.hidePopup class="doc doc-heading"> <code class="highlight language-python"><span class=n>hidePopup</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Reimplemented.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/multiselection_combobox.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>hidePopup</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Reimplemented.&quot;&quot;&quot;</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>view</span><span class=p>()</span><span class=o>.</span><span class=n>removeEventFilter</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>view</span><span class=p>()</span><span class=o>.</span><span class=n>viewport</span><span class=p>()</span><span class=o>.</span><span class=n>removeEventFilter</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_popup_is_shown</span> <span class=o>=</span> <span class=kc>False</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_initial_mouse_pos</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=nb>super</span><span class=p>(</span><span class=n>MultiSelectionComboBox</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>hidePopup</span><span class=p>()</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>view</span><span class=p>()</span><span class=o>.</span><span class=n>clearFocus</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.MultiSelectionComboBox.mousePressEvent class="doc doc-heading"> <code class="highlight language-python"><span class=n>mousePressEvent</span><span class=p>(</span><span class=n>event</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Reimplemented.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/multiselection_combobox.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>91</span>
<span class=normal>92</span>
<span class=normal>93</span>
<span class=normal>94</span>
<span class=normal>95</span>
<span class=normal>96</span>
<span class=normal>97</span>
<span class=normal>98</span>
<span class=normal>99</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>mousePressEvent</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Reimplemented.&quot;&quot;&quot;</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_popup_is_shown</span> <span class=o>=</span> <span class=kc>False</span>
    <span class=nb>super</span><span class=p>(</span><span class=n>MultiSelectionComboBox</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>mousePressEvent</span><span class=p>(</span><span class=n>event</span><span class=p>)</span>
    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_popup_is_shown</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_initial_mouse_pos</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>mapToGlobal</span><span class=p>(</span><span class=n>event</span><span class=o>.</span><span class=n>pos</span><span class=p>())</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_block_mouse_release_timer</span><span class=o>.</span><span class=n>start</span><span class=p>(</span>
            <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QApplication</span><span class=o>.</span><span class=n>doubleClickInterval</span><span class=p>()</span>
        <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.MultiSelectionComboBox.paintEvent class="doc doc-heading"> <code class="highlight language-python"><span class=n>paintEvent</span><span class=p>(</span><span class=n>event</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Reimplemented.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/multiselection_combobox.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span>
<span class=normal>277</span>
<span class=normal>278</span>
<span class=normal>279</span>
<span class=normal>280</span>
<span class=normal>281</span>
<span class=normal>282</span>
<span class=normal>283</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>paintEvent</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Reimplemented.&quot;&quot;&quot;</span>
    <span class=n>painter</span> <span class=o>=</span> <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QStylePainter</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
    <span class=n>option</span> <span class=o>=</span> <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QStyleOptionComboBox</span><span class=p>()</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>initStyleOption</span><span class=p>(</span><span class=n>option</span><span class=p>)</span>
    <span class=n>painter</span><span class=o>.</span><span class=n>drawComplexControl</span><span class=p>(</span><span class=n>QtWidgets</span><span class=o>.</span><span class=n>QStyle</span><span class=o>.</span><span class=n>CC_ComboBox</span><span class=p>,</span> <span class=n>option</span><span class=p>)</span>

    <span class=n>items</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>checked_items_text</span><span class=p>()</span>
    <span class=c1># draw the icon and text</span>
    <span class=n>draw_text</span> <span class=o>=</span> <span class=kc>True</span>
    <span class=n>combotext</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_custom_text</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>combotext</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_custom_text</span>
    <span class=k>elif</span> <span class=ow>not</span> <span class=n>items</span><span class=p>:</span>
        <span class=n>combotext</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_placeholder_text</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=n>draw_text</span> <span class=o>=</span> <span class=kc>False</span>

    <span class=k>if</span> <span class=n>draw_text</span><span class=p>:</span>
        <span class=n>color</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_placeholder_color</span><span class=p>()</span>
        <span class=n>pen</span> <span class=o>=</span> <span class=n>painter</span><span class=o>.</span><span class=n>pen</span><span class=p>()</span>
        <span class=n>pen</span><span class=o>.</span><span class=n>setColor</span><span class=p>(</span><span class=n>color</span><span class=p>)</span>
        <span class=n>painter</span><span class=o>.</span><span class=n>setPen</span><span class=p>(</span><span class=n>pen</span><span class=p>)</span>

        <span class=n>left_x</span> <span class=o>=</span> <span class=n>option</span><span class=o>.</span><span class=n>rect</span><span class=o>.</span><span class=n>left</span><span class=p>()</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>left_offset</span>

        <span class=n>font</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>font</span><span class=p>()</span>
        <span class=c1># This is hardcoded point size from styles</span>
        <span class=n>font</span><span class=o>.</span><span class=n>setPointSize</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
        <span class=n>painter</span><span class=o>.</span><span class=n>setFont</span><span class=p>(</span><span class=n>font</span><span class=p>)</span>

        <span class=n>label_rect</span> <span class=o>=</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>QRect</span><span class=p>(</span><span class=n>option</span><span class=o>.</span><span class=n>rect</span><span class=p>)</span>
        <span class=n>label_rect</span><span class=o>.</span><span class=n>moveLeft</span><span class=p>(</span><span class=n>left_x</span><span class=p>)</span>

        <span class=n>painter</span><span class=o>.</span><span class=n>drawText</span><span class=p>(</span>
            <span class=n>label_rect</span><span class=p>,</span>
            <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>AlignLeft</span> <span class=o>|</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>AlignVCenter</span><span class=p>,</span>
            <span class=n>combotext</span>
        <span class=p>)</span>
        <span class=k>return</span>

    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_item_height</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>updateGeometry</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>update</span><span class=p>()</span>
        <span class=k>return</span>

    <span class=n>font_metrics</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>fontMetrics</span><span class=p>()</span>
    <span class=k>for</span> <span class=n>line</span><span class=p>,</span> <span class=n>items</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_lines</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
        <span class=n>top_y</span> <span class=o>=</span> <span class=p>(</span>
            <span class=n>option</span><span class=o>.</span><span class=n>rect</span><span class=o>.</span><span class=n>top</span><span class=p>()</span>
            <span class=o>+</span> <span class=p>(</span><span class=n>line</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>_item_height</span><span class=p>)</span>
            <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>top_bottom_margins</span>
        <span class=p>)</span>
        <span class=n>left_x</span> <span class=o>=</span> <span class=n>option</span><span class=o>.</span><span class=n>rect</span><span class=o>.</span><span class=n>left</span><span class=p>()</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>left_offset</span>
        <span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=n>items</span><span class=p>:</span>
            <span class=n>label_rect</span> <span class=o>=</span> <span class=n>font_metrics</span><span class=o>.</span><span class=n>boundingRect</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>
            <span class=n>label_height</span> <span class=o>=</span> <span class=n>label_rect</span><span class=o>.</span><span class=n>height</span><span class=p>()</span>

            <span class=n>label_rect</span><span class=o>.</span><span class=n>moveTop</span><span class=p>(</span><span class=n>top_y</span><span class=p>)</span>
            <span class=n>label_rect</span><span class=o>.</span><span class=n>moveLeft</span><span class=p>(</span><span class=n>left_x</span><span class=p>)</span>
            <span class=n>label_rect</span><span class=o>.</span><span class=n>setHeight</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_item_height</span><span class=p>)</span>
            <span class=n>label_rect</span><span class=o>.</span><span class=n>setWidth</span><span class=p>(</span>
                <span class=n>label_rect</span><span class=o>.</span><span class=n>width</span><span class=p>()</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>left_right_padding</span>
            <span class=p>)</span>

            <span class=k>if</span> <span class=ow>not</span> <span class=n>draw_text</span><span class=p>:</span>
                <span class=n>bg_rect</span> <span class=o>=</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>QRectF</span><span class=p>(</span><span class=n>label_rect</span><span class=p>)</span>
                <span class=n>bg_rect</span><span class=o>.</span><span class=n>setWidth</span><span class=p>(</span>
                    <span class=n>label_rect</span><span class=o>.</span><span class=n>width</span><span class=p>()</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>left_right_padding</span>
                <span class=p>)</span>
                <span class=n>left_x</span> <span class=o>=</span> <span class=n>bg_rect</span><span class=o>.</span><span class=n>right</span><span class=p>()</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>item_spacing</span>

                <span class=n>bg_rect</span><span class=o>.</span><span class=n>setHeight</span><span class=p>(</span>
                    <span class=n>label_height</span> <span class=o>+</span> <span class=p>(</span><span class=mi>2</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>top_bottom_padding</span><span class=p>)</span>
                <span class=p>)</span>
                <span class=n>bg_rect</span><span class=o>.</span><span class=n>moveTop</span><span class=p>(</span><span class=n>bg_rect</span><span class=o>.</span><span class=n>top</span><span class=p>()</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>top_bottom_margins</span><span class=p>)</span>

                <span class=n>path</span> <span class=o>=</span> <span class=n>QtGui</span><span class=o>.</span><span class=n>QPainterPath</span><span class=p>()</span>
                <span class=n>path</span><span class=o>.</span><span class=n>addRoundedRect</span><span class=p>(</span><span class=n>bg_rect</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>5</span><span class=p>)</span>

                <span class=n>painter</span><span class=o>.</span><span class=n>fillPath</span><span class=p>(</span><span class=n>path</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>item_bg_color</span><span class=p>)</span>

            <span class=n>label_rect</span><span class=o>.</span><span class=n>moveLeft</span><span class=p>(</span><span class=n>label_rect</span><span class=o>.</span><span class=n>x</span><span class=p>()</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>left_right_padding</span><span class=p>)</span>

            <span class=n>painter</span><span class=o>.</span><span class=n>drawText</span><span class=p>(</span>
                <span class=n>label_rect</span><span class=p>,</span>
                <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>AlignLeft</span> <span class=o>|</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>AlignVCenter</span><span class=p>,</span>
                <span class=n>item</span>
            <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.MultiSelectionComboBox.showPopup class="doc doc-heading"> <code class="highlight language-python"><span class=n>showPopup</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Reimplemented.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/multiselection_combobox.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>showPopup</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Reimplemented.&quot;&quot;&quot;</span>
    <span class=nb>super</span><span class=p>(</span><span class=n>MultiSelectionComboBox</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>showPopup</span><span class=p>()</span>
    <span class=n>view</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>view</span><span class=p>()</span>
    <span class=n>view</span><span class=o>.</span><span class=n>installEventFilter</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
    <span class=n>view</span><span class=o>.</span><span class=n>viewport</span><span class=p>()</span><span class=o>.</span><span class=n>installEventFilter</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_popup_is_shown</span> <span class=o>=</span> <span class=kc>True</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.tools.utils.PixmapLabel class="doc doc-heading"> <code>PixmapLabel</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=qtpy.QtWidgets.QLabel>QLabel</span></code></p> <p>Label resizing image to height of font.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/widgets.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>663</span>
<span class=normal>664</span>
<span class=normal>665</span>
<span class=normal>666</span>
<span class=normal>667</span>
<span class=normal>668</span>
<span class=normal>669</span>
<span class=normal>670</span>
<span class=normal>671</span>
<span class=normal>672</span>
<span class=normal>673</span>
<span class=normal>674</span>
<span class=normal>675</span>
<span class=normal>676</span>
<span class=normal>677</span>
<span class=normal>678</span>
<span class=normal>679</span>
<span class=normal>680</span>
<span class=normal>681</span>
<span class=normal>682</span>
<span class=normal>683</span>
<span class=normal>684</span>
<span class=normal>685</span>
<span class=normal>686</span>
<span class=normal>687</span>
<span class=normal>688</span>
<span class=normal>689</span>
<span class=normal>690</span>
<span class=normal>691</span>
<span class=normal>692</span>
<span class=normal>693</span>
<span class=normal>694</span>
<span class=normal>695</span>
<span class=normal>696</span>
<span class=normal>697</span>
<span class=normal>698</span>
<span class=normal>699</span>
<span class=normal>700</span>
<span class=normal>701</span>
<span class=normal>702</span>
<span class=normal>703</span>
<span class=normal>704</span>
<span class=normal>705</span>
<span class=normal>706</span>
<span class=normal>707</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>PixmapLabel</span><span class=p>(</span><span class=n>QtWidgets</span><span class=o>.</span><span class=n>QLabel</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Label resizing image to height of font.&quot;&quot;&quot;</span>
    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>pixmap</span><span class=p>,</span> <span class=n>parent</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>PixmapLabel</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>parent</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_empty_pixmap</span> <span class=o>=</span> <span class=n>QtGui</span><span class=o>.</span><span class=n>QPixmap</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_source_pixmap</span> <span class=o>=</span> <span class=n>pixmap</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_last_width</span> <span class=o>=</span> <span class=mi>0</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_last_height</span> <span class=o>=</span> <span class=mi>0</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_source_pixmap</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>pixmap</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Change source image.&quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_source_pixmap</span> <span class=o>=</span> <span class=n>pixmap</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_set_resized_pix</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_get_pix_size</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=n>size</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>fontMetrics</span><span class=p>()</span><span class=o>.</span><span class=n>height</span><span class=p>()</span>
        <span class=n>size</span> <span class=o>+=</span> <span class=n>size</span> <span class=o>%</span> <span class=mi>2</span>
        <span class=k>return</span> <span class=n>size</span><span class=p>,</span> <span class=n>size</span>

    <span class=k>def</span><span class=w> </span><span class=nf>minimumSizeHint</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=n>width</span><span class=p>,</span> <span class=n>height</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_pix_size</span><span class=p>()</span>
        <span class=k>if</span> <span class=n>width</span> <span class=o>!=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_last_width</span> <span class=ow>or</span> <span class=n>height</span> <span class=o>!=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_last_height</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_set_resized_pix</span><span class=p>()</span>
        <span class=k>return</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>QSize</span><span class=p>(</span><span class=n>width</span><span class=p>,</span> <span class=n>height</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_set_resized_pix</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_source_pixmap</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>setPixmap</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_empty_pixmap</span><span class=p>)</span>
            <span class=k>return</span>
        <span class=n>width</span><span class=p>,</span> <span class=n>height</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_pix_size</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>setPixmap</span><span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_source_pixmap</span><span class=o>.</span><span class=n>scaled</span><span class=p>(</span>
                <span class=n>width</span><span class=p>,</span>
                <span class=n>height</span><span class=p>,</span>
                <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>KeepAspectRatio</span><span class=p>,</span>
                <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>SmoothTransformation</span>
            <span class=p>)</span>
        <span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_last_width</span> <span class=o>=</span> <span class=n>width</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_last_height</span> <span class=o>=</span> <span class=n>height</span>

    <span class=k>def</span><span class=w> </span><span class=nf>resizeEvent</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_set_resized_pix</span><span class=p>()</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>PixmapLabel</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>resizeEvent</span><span class=p>(</span><span class=n>event</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.PixmapLabel.set_source_pixmap class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_source_pixmap</span><span class=p>(</span><span class=n>pixmap</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Change source image.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/widgets.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>673</span>
<span class=normal>674</span>
<span class=normal>675</span>
<span class=normal>676</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_source_pixmap</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>pixmap</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Change source image.&quot;&quot;&quot;</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_source_pixmap</span> <span class=o>=</span> <span class=n>pixmap</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_set_resized_pix</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.tools.utils.PlaceholderLineEdit class="doc doc-heading"> <code>PlaceholderLineEdit</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=qtpy.QtWidgets.QLineEdit>QLineEdit</span></code></p> <p>Set placeholder color of QLineEdit in Qt 5.12 and higher.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/widgets.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>PlaceholderLineEdit</span><span class=p>(</span><span class=n>QtWidgets</span><span class=o>.</span><span class=n>QLineEdit</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Set placeholder color of QLineEdit in Qt 5.12 and higher.&quot;&quot;&quot;</span>
    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
        <span class=c1># Change placeholder palette color</span>
        <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>QtGui</span><span class=o>.</span><span class=n>QPalette</span><span class=p>,</span> <span class=s2>&quot;PlaceholderText&quot;</span><span class=p>):</span>
            <span class=n>filter_palette</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>palette</span><span class=p>()</span>
            <span class=n>filter_palette</span><span class=o>.</span><span class=n>setColor</span><span class=p>(</span>
                <span class=n>QtGui</span><span class=o>.</span><span class=n>QPalette</span><span class=o>.</span><span class=n>PlaceholderText</span><span class=p>,</span>
                <span class=n>_Cache</span><span class=o>.</span><span class=n>get_placeholder_color</span><span class=p>()</span>
            <span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>setPalette</span><span class=p>(</span><span class=n>filter_palette</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.tools.utils.PlaceholderPlainTextEdit class="doc doc-heading"> <code>PlaceholderPlainTextEdit</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=qtpy.QtWidgets.QPlainTextEdit>QPlainTextEdit</span></code></p> <p>Set placeholder color of QPlainTextEdit in Qt 5.12 and higher.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/widgets.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>PlaceholderPlainTextEdit</span><span class=p>(</span><span class=n>QtWidgets</span><span class=o>.</span><span class=n>QPlainTextEdit</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Set placeholder color of QPlainTextEdit in Qt 5.12 and higher.&quot;&quot;&quot;</span>
    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
        <span class=c1># Change placeholder palette color</span>
        <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>QtGui</span><span class=o>.</span><span class=n>QPalette</span><span class=p>,</span> <span class=s2>&quot;PlaceholderText&quot;</span><span class=p>):</span>
            <span class=n>viewport</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>viewport</span><span class=p>()</span>
            <span class=n>filter_palette</span> <span class=o>=</span> <span class=n>viewport</span><span class=o>.</span><span class=n>palette</span><span class=p>()</span>
            <span class=n>filter_palette</span><span class=o>.</span><span class=n>setColor</span><span class=p>(</span>
                <span class=n>QtGui</span><span class=o>.</span><span class=n>QPalette</span><span class=o>.</span><span class=n>PlaceholderText</span><span class=p>,</span>
                <span class=n>_Cache</span><span class=o>.</span><span class=n>get_placeholder_color</span><span class=p>()</span>
            <span class=p>)</span>
            <span class=n>viewport</span><span class=o>.</span><span class=n>setPalette</span><span class=p>(</span><span class=n>filter_palette</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.tools.utils.PopupUpdateKeys class="doc doc-heading"> <code>PopupUpdateKeys</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="SimplePopup (client.ayon_core.tools.utils.dialogs.SimplePopup)" href=dialogs.html#client.ayon_core.tools.utils.dialogs.SimplePopup>SimplePopup</a></code></p> <p>Simple popup with checkbox.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/dialogs.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>PopupUpdateKeys</span><span class=p>(</span><span class=n>SimplePopup</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Simple popup with checkbox.&quot;&quot;&quot;</span>

    <span class=n>on_clicked_state</span> <span class=o>=</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Signal</span><span class=p>(</span><span class=nb>bool</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>parent</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>PopupUpdateKeys</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span>
            <span class=n>parent</span><span class=o>=</span><span class=n>parent</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span>
        <span class=p>)</span>

        <span class=n>layout</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>layout</span><span class=p>()</span>

        <span class=c1># Insert toggle for Update keys</span>
        <span class=n>toggle</span> <span class=o>=</span> <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QCheckBox</span><span class=p>(</span><span class=s2>&quot;Update Keys&quot;</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span>
        <span class=n>layout</span><span class=o>.</span><span class=n>insertWidget</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=n>toggle</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>on_clicked</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>emit_click_with_state</span><span class=p>)</span>

        <span class=n>layout</span><span class=o>.</span><span class=n>insertStretch</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_toggle_checkbox</span> <span class=o>=</span> <span class=n>toggle</span>

    <span class=k>def</span><span class=w> </span><span class=nf>is_toggle_checked</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_toggle_checkbox</span><span class=o>.</span><span class=n>isChecked</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>emit_click_with_state</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Emit the on_clicked_state signal with the toggled state&quot;&quot;&quot;</span>
        <span class=n>checked</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_toggle_checkbox</span><span class=o>.</span><span class=n>isChecked</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>on_clicked_state</span><span class=o>.</span><span class=n>emit</span><span class=p>(</span><span class=n>checked</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.PopupUpdateKeys.emit_click_with_state class="doc doc-heading"> <code class="highlight language-python"><span class=n>emit_click_with_state</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Emit the on_clicked_state signal with the toggled state</p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/dialogs.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>emit_click_with_state</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Emit the on_clicked_state signal with the toggled state&quot;&quot;&quot;</span>
    <span class=n>checked</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_toggle_checkbox</span><span class=o>.</span><span class=n>isChecked</span><span class=p>()</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>on_clicked_state</span><span class=o>.</span><span class=n>emit</span><span class=p>(</span><span class=n>checked</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.tools.utils.ProjectsCombobox class="doc doc-heading"> <code>ProjectsCombobox</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=qtpy.QtWidgets.QWidget>QWidget</span></code></p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/projects_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>418</span>
<span class=normal>419</span>
<span class=normal>420</span>
<span class=normal>421</span>
<span class=normal>422</span>
<span class=normal>423</span>
<span class=normal>424</span>
<span class=normal>425</span>
<span class=normal>426</span>
<span class=normal>427</span>
<span class=normal>428</span>
<span class=normal>429</span>
<span class=normal>430</span>
<span class=normal>431</span>
<span class=normal>432</span>
<span class=normal>433</span>
<span class=normal>434</span>
<span class=normal>435</span>
<span class=normal>436</span>
<span class=normal>437</span>
<span class=normal>438</span>
<span class=normal>439</span>
<span class=normal>440</span>
<span class=normal>441</span>
<span class=normal>442</span>
<span class=normal>443</span>
<span class=normal>444</span>
<span class=normal>445</span>
<span class=normal>446</span>
<span class=normal>447</span>
<span class=normal>448</span>
<span class=normal>449</span>
<span class=normal>450</span>
<span class=normal>451</span>
<span class=normal>452</span>
<span class=normal>453</span>
<span class=normal>454</span>
<span class=normal>455</span>
<span class=normal>456</span>
<span class=normal>457</span>
<span class=normal>458</span>
<span class=normal>459</span>
<span class=normal>460</span>
<span class=normal>461</span>
<span class=normal>462</span>
<span class=normal>463</span>
<span class=normal>464</span>
<span class=normal>465</span>
<span class=normal>466</span>
<span class=normal>467</span>
<span class=normal>468</span>
<span class=normal>469</span>
<span class=normal>470</span>
<span class=normal>471</span>
<span class=normal>472</span>
<span class=normal>473</span>
<span class=normal>474</span>
<span class=normal>475</span>
<span class=normal>476</span>
<span class=normal>477</span>
<span class=normal>478</span>
<span class=normal>479</span>
<span class=normal>480</span>
<span class=normal>481</span>
<span class=normal>482</span>
<span class=normal>483</span>
<span class=normal>484</span>
<span class=normal>485</span>
<span class=normal>486</span>
<span class=normal>487</span>
<span class=normal>488</span>
<span class=normal>489</span>
<span class=normal>490</span>
<span class=normal>491</span>
<span class=normal>492</span>
<span class=normal>493</span>
<span class=normal>494</span>
<span class=normal>495</span>
<span class=normal>496</span>
<span class=normal>497</span>
<span class=normal>498</span>
<span class=normal>499</span>
<span class=normal>500</span>
<span class=normal>501</span>
<span class=normal>502</span>
<span class=normal>503</span>
<span class=normal>504</span>
<span class=normal>505</span>
<span class=normal>506</span>
<span class=normal>507</span>
<span class=normal>508</span>
<span class=normal>509</span>
<span class=normal>510</span>
<span class=normal>511</span>
<span class=normal>512</span>
<span class=normal>513</span>
<span class=normal>514</span>
<span class=normal>515</span>
<span class=normal>516</span>
<span class=normal>517</span>
<span class=normal>518</span>
<span class=normal>519</span>
<span class=normal>520</span>
<span class=normal>521</span>
<span class=normal>522</span>
<span class=normal>523</span>
<span class=normal>524</span>
<span class=normal>525</span>
<span class=normal>526</span>
<span class=normal>527</span>
<span class=normal>528</span>
<span class=normal>529</span>
<span class=normal>530</span>
<span class=normal>531</span>
<span class=normal>532</span>
<span class=normal>533</span>
<span class=normal>534</span>
<span class=normal>535</span>
<span class=normal>536</span>
<span class=normal>537</span>
<span class=normal>538</span>
<span class=normal>539</span>
<span class=normal>540</span>
<span class=normal>541</span>
<span class=normal>542</span>
<span class=normal>543</span>
<span class=normal>544</span>
<span class=normal>545</span>
<span class=normal>546</span>
<span class=normal>547</span>
<span class=normal>548</span>
<span class=normal>549</span>
<span class=normal>550</span>
<span class=normal>551</span>
<span class=normal>552</span>
<span class=normal>553</span>
<span class=normal>554</span>
<span class=normal>555</span>
<span class=normal>556</span>
<span class=normal>557</span>
<span class=normal>558</span>
<span class=normal>559</span>
<span class=normal>560</span>
<span class=normal>561</span>
<span class=normal>562</span>
<span class=normal>563</span>
<span class=normal>564</span>
<span class=normal>565</span>
<span class=normal>566</span>
<span class=normal>567</span>
<span class=normal>568</span>
<span class=normal>569</span>
<span class=normal>570</span>
<span class=normal>571</span>
<span class=normal>572</span>
<span class=normal>573</span>
<span class=normal>574</span>
<span class=normal>575</span>
<span class=normal>576</span>
<span class=normal>577</span>
<span class=normal>578</span>
<span class=normal>579</span>
<span class=normal>580</span>
<span class=normal>581</span>
<span class=normal>582</span>
<span class=normal>583</span>
<span class=normal>584</span>
<span class=normal>585</span>
<span class=normal>586</span>
<span class=normal>587</span>
<span class=normal>588</span>
<span class=normal>589</span>
<span class=normal>590</span>
<span class=normal>591</span>
<span class=normal>592</span>
<span class=normal>593</span>
<span class=normal>594</span>
<span class=normal>595</span>
<span class=normal>596</span>
<span class=normal>597</span>
<span class=normal>598</span>
<span class=normal>599</span>
<span class=normal>600</span>
<span class=normal>601</span>
<span class=normal>602</span>
<span class=normal>603</span>
<span class=normal>604</span>
<span class=normal>605</span>
<span class=normal>606</span>
<span class=normal>607</span>
<span class=normal>608</span>
<span class=normal>609</span>
<span class=normal>610</span>
<span class=normal>611</span>
<span class=normal>612</span>
<span class=normal>613</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>ProjectsCombobox</span><span class=p>(</span><span class=n>QtWidgets</span><span class=o>.</span><span class=n>QWidget</span><span class=p>):</span>
    <span class=n>refreshed</span> <span class=o>=</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Signal</span><span class=p>()</span>
    <span class=n>selection_changed</span> <span class=o>=</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Signal</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>controller</span><span class=p>,</span> <span class=n>parent</span><span class=p>,</span> <span class=n>handle_expected_selection</span><span class=o>=</span><span class=kc>False</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>ProjectsCombobox</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>parent</span><span class=p>)</span>

        <span class=n>projects_combobox</span> <span class=o>=</span> <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QComboBox</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
        <span class=n>combobox_delegate</span> <span class=o>=</span> <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QStyledItemDelegate</span><span class=p>(</span><span class=n>projects_combobox</span><span class=p>)</span>
        <span class=n>projects_combobox</span><span class=o>.</span><span class=n>setItemDelegate</span><span class=p>(</span><span class=n>combobox_delegate</span><span class=p>)</span>
        <span class=n>projects_model</span> <span class=o>=</span> <span class=n>ProjectsQtModel</span><span class=p>(</span><span class=n>controller</span><span class=p>)</span>
        <span class=n>projects_proxy_model</span> <span class=o>=</span> <span class=n>ProjectSortFilterProxy</span><span class=p>()</span>
        <span class=n>projects_proxy_model</span><span class=o>.</span><span class=n>setSourceModel</span><span class=p>(</span><span class=n>projects_model</span><span class=p>)</span>
        <span class=n>projects_combobox</span><span class=o>.</span><span class=n>setModel</span><span class=p>(</span><span class=n>projects_proxy_model</span><span class=p>)</span>

        <span class=n>main_layout</span> <span class=o>=</span> <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QHBoxLayout</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
        <span class=n>main_layout</span><span class=o>.</span><span class=n>setContentsMargins</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
        <span class=n>main_layout</span><span class=o>.</span><span class=n>addWidget</span><span class=p>(</span><span class=n>projects_combobox</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>

        <span class=n>projects_model</span><span class=o>.</span><span class=n>refreshed</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_on_model_refresh</span><span class=p>)</span>

        <span class=n>controller</span><span class=o>.</span><span class=n>register_event_callback</span><span class=p>(</span>
            <span class=s2>&quot;projects.refresh.finished&quot;</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_on_projects_refresh_finished</span>
        <span class=p>)</span>
        <span class=n>controller</span><span class=o>.</span><span class=n>register_event_callback</span><span class=p>(</span>
            <span class=s2>&quot;controller.refresh.finished&quot;</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_on_controller_refresh</span>
        <span class=p>)</span>
        <span class=n>controller</span><span class=o>.</span><span class=n>register_event_callback</span><span class=p>(</span>
            <span class=s2>&quot;expected_selection_changed&quot;</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_on_expected_selection_change</span>
        <span class=p>)</span>

        <span class=n>projects_combobox</span><span class=o>.</span><span class=n>currentIndexChanged</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_on_current_index_changed</span>
        <span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_controller</span> <span class=o>=</span> <span class=n>controller</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_listen_selection_change</span> <span class=o>=</span> <span class=kc>True</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_select_item_visible</span> <span class=o>=</span> <span class=kc>False</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_handle_expected_selection</span> <span class=o>=</span> <span class=n>handle_expected_selection</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_expected_selection</span> <span class=o>=</span> <span class=kc>None</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_projects_combobox</span> <span class=o>=</span> <span class=n>projects_combobox</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_projects_model</span> <span class=o>=</span> <span class=n>projects_model</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_projects_proxy_model</span> <span class=o>=</span> <span class=n>projects_proxy_model</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_combobox_delegate</span> <span class=o>=</span> <span class=n>combobox_delegate</span>

    <span class=k>def</span><span class=w> </span><span class=nf>refresh</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_projects_model</span><span class=o>.</span><span class=n>refresh</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_selection</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>project_name</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Set selection to a given project.</span>

<span class=sd>        Selection change is ignored if project is not found.</span>

<span class=sd>        Args:</span>
<span class=sd>            project_name (str): Name of project.</span>

<span class=sd>        Returns:</span>
<span class=sd>            bool: True if selection was changed, False otherwise. NOTE:</span>
<span class=sd>                Selection may not be changed if project is not found, or if</span>
<span class=sd>                project is already selected.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>idx</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_projects_combobox</span><span class=o>.</span><span class=n>findData</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span> <span class=n>PROJECT_NAME_ROLE</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>idx</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>False</span>
        <span class=k>if</span> <span class=n>idx</span> <span class=o>!=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_projects_combobox</span><span class=o>.</span><span class=n>currentIndex</span><span class=p>():</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_projects_combobox</span><span class=o>.</span><span class=n>setCurrentIndex</span><span class=p>(</span><span class=n>idx</span><span class=p>)</span>
            <span class=k>return</span> <span class=kc>True</span>
        <span class=k>return</span> <span class=kc>False</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_listen_to_selection_change</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>listen</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Disable listening to changes of the selection.</span>

<span class=sd>        Because combobox is triggering selection change when it&#39;s model</span>
<span class=sd>        is refreshed, it&#39;s necessary to disable listening to selection for</span>
<span class=sd>        some cases, e.g. when is on a different page of UI and should be just</span>
<span class=sd>        refreshed.</span>

<span class=sd>        Args:</span>
<span class=sd>            listen (bool): Enable or disable listening to selection changes.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_listen_selection_change</span> <span class=o>=</span> <span class=n>listen</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_selected_project_name</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Name of selected project.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Union[str, None]: Name of selected project, or None if no project</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>idx</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_projects_combobox</span><span class=o>.</span><span class=n>currentIndex</span><span class=p>()</span>
        <span class=k>if</span> <span class=n>idx</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>None</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_projects_combobox</span><span class=o>.</span><span class=n>itemData</span><span class=p>(</span><span class=n>idx</span><span class=p>,</span> <span class=n>PROJECT_NAME_ROLE</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_current_context_project</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>project_name</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_projects_model</span><span class=o>.</span><span class=n>set_current_context_project</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_projects_proxy_model</span><span class=o>.</span><span class=n>invalidateFilter</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_select_item_visible</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>visible</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_select_item_visible</span> <span class=o>=</span> <span class=n>visible</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_projects_model</span><span class=o>.</span><span class=n>set_select_item_visible</span><span class=p>(</span><span class=n>visible</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_update_select_item_visiblity</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_libraries_separator_visible</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>visible</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_projects_model</span><span class=o>.</span><span class=n>set_libraries_separator_visible</span><span class=p>(</span><span class=n>visible</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>is_active_filter_enabled</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_projects_proxy_model</span><span class=o>.</span><span class=n>is_active_filter_enabled</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_active_filter_enabled</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>enabled</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_projects_proxy_model</span><span class=o>.</span><span class=n>set_active_filter_enabled</span><span class=p>(</span><span class=n>enabled</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_standard_filter_enabled</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>enabled</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_projects_proxy_model</span><span class=o>.</span><span class=n>set_standard_filter_enabled</span><span class=p>(</span><span class=n>enabled</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_library_filter_enabled</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>enabled</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_projects_proxy_model</span><span class=o>.</span><span class=n>set_library_filter_enabled</span><span class=p>(</span><span class=n>enabled</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_update_select_item_visiblity</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_select_item_visible</span><span class=p>:</span>
            <span class=k>return</span>
        <span class=k>if</span> <span class=s2>&quot;project_name&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>kwargs</span><span class=p>:</span>
            <span class=n>project_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_selected_project_name</span><span class=p>()</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>project_name</span> <span class=o>=</span> <span class=n>kwargs</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;project_name&quot;</span><span class=p>)</span>

        <span class=c1># Hide the item if a project is selected</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_projects_model</span><span class=o>.</span><span class=n>set_selected_project</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_on_current_index_changed</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>idx</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_listen_selection_change</span><span class=p>:</span>
            <span class=k>return</span>
        <span class=n>project_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_projects_combobox</span><span class=o>.</span><span class=n>itemData</span><span class=p>(</span>
            <span class=n>idx</span><span class=p>,</span> <span class=n>PROJECT_NAME_ROLE</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_update_select_item_visiblity</span><span class=p>(</span><span class=n>project_name</span><span class=o>=</span><span class=n>project_name</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_controller</span><span class=o>.</span><span class=n>set_selected_project</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>selection_changed</span><span class=o>.</span><span class=n>emit</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_on_model_refresh</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_projects_proxy_model</span><span class=o>.</span><span class=n>sort</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_projects_proxy_model</span><span class=o>.</span><span class=n>invalidateFilter</span><span class=p>()</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_expected_selection</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_set_expected_selection</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_update_select_item_visiblity</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>refreshed</span><span class=o>.</span><span class=n>emit</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_on_projects_refresh_finished</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
        <span class=k>if</span> <span class=n>event</span><span class=p>[</span><span class=s2>&quot;sender&quot;</span><span class=p>]</span> <span class=o>!=</span> <span class=n>PROJECTS_MODEL_SENDER</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_projects_model</span><span class=o>.</span><span class=n>refresh</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_on_controller_refresh</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_update_expected_selection</span><span class=p>()</span>

    <span class=c1># Expected selection handling</span>
    <span class=k>def</span><span class=w> </span><span class=nf>_on_expected_selection_change</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_update_expected_selection</span><span class=p>(</span><span class=n>event</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_set_expected_selection</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_handle_expected_selection</span><span class=p>:</span>
            <span class=k>return</span>
        <span class=n>project_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_expected_selection</span>
        <span class=k>if</span> <span class=n>project_name</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>project_name</span> <span class=o>!=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_selected_project_name</span><span class=p>():</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>set_selection</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=c1># Fake project change</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_on_current_index_changed</span><span class=p>(</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>_projects_combobox</span><span class=o>.</span><span class=n>currentIndex</span><span class=p>()</span>
                <span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_controller</span><span class=o>.</span><span class=n>expected_project_selected</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_update_expected_selection</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>expected_data</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_handle_expected_selection</span><span class=p>:</span>
            <span class=k>return</span>
        <span class=k>if</span> <span class=n>expected_data</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>expected_data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_controller</span><span class=o>.</span><span class=n>get_expected_selection_data</span><span class=p>()</span>

        <span class=n>project_data</span> <span class=o>=</span> <span class=n>expected_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;project&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=p>(</span>
            <span class=ow>not</span> <span class=n>project_data</span>
            <span class=ow>or</span> <span class=ow>not</span> <span class=n>project_data</span><span class=p>[</span><span class=s2>&quot;current&quot;</span><span class=p>]</span>
            <span class=ow>or</span> <span class=n>project_data</span><span class=p>[</span><span class=s2>&quot;selected&quot;</span><span class=p>]</span>
        <span class=p>):</span>
            <span class=k>return</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_expected_selection</span> <span class=o>=</span> <span class=n>project_data</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_projects_model</span><span class=o>.</span><span class=n>is_refreshing</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_set_expected_selection</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.ProjectsCombobox.get_selected_project_name class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_selected_project_name</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Name of selected project.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Union[str, None]: Name of selected project, or None if no project</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/projects_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>508</span>
<span class=normal>509</span>
<span class=normal>510</span>
<span class=normal>511</span>
<span class=normal>512</span>
<span class=normal>513</span>
<span class=normal>514</span>
<span class=normal>515</span>
<span class=normal>516</span>
<span class=normal>517</span>
<span class=normal>518</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_selected_project_name</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Name of selected project.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Union[str, None]: Name of selected project, or None if no project</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>idx</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_projects_combobox</span><span class=o>.</span><span class=n>currentIndex</span><span class=p>()</span>
    <span class=k>if</span> <span class=n>idx</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=p>:</span>
        <span class=k>return</span> <span class=kc>None</span>
    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_projects_combobox</span><span class=o>.</span><span class=n>itemData</span><span class=p>(</span><span class=n>idx</span><span class=p>,</span> <span class=n>PROJECT_NAME_ROLE</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.ProjectsCombobox.set_listen_to_selection_change class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_listen_to_selection_change</span><span class=p>(</span><span class=n>listen</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Disable listening to changes of the selection.</p> <p>Because combobox is triggering selection change when it's model is refreshed, it's necessary to disable listening to selection for some cases, e.g. when is on a different page of UI and should be just refreshed.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>listen</code> </td> <td> <code><span title=bool>bool</span></code> </td> <td> <div class=doc-md-description> <p>Enable or disable listening to selection changes.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/projects_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>494</span>
<span class=normal>495</span>
<span class=normal>496</span>
<span class=normal>497</span>
<span class=normal>498</span>
<span class=normal>499</span>
<span class=normal>500</span>
<span class=normal>501</span>
<span class=normal>502</span>
<span class=normal>503</span>
<span class=normal>504</span>
<span class=normal>505</span>
<span class=normal>506</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_listen_to_selection_change</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>listen</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Disable listening to changes of the selection.</span>

<span class=sd>    Because combobox is triggering selection change when it&#39;s model</span>
<span class=sd>    is refreshed, it&#39;s necessary to disable listening to selection for</span>
<span class=sd>    some cases, e.g. when is on a different page of UI and should be just</span>
<span class=sd>    refreshed.</span>

<span class=sd>    Args:</span>
<span class=sd>        listen (bool): Enable or disable listening to selection changes.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_listen_selection_change</span> <span class=o>=</span> <span class=n>listen</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.ProjectsCombobox.set_selection class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_selection</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Set selection to a given project.</p> <p>Selection change is ignored if project is not found.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>project_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Name of project.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>bool</code></td> <td> </td> <td> <div class=doc-md-description> <p>True if selection was changed, False otherwise. NOTE: Selection may not be changed if project is not found, or if project is already selected.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/projects_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>471</span>
<span class=normal>472</span>
<span class=normal>473</span>
<span class=normal>474</span>
<span class=normal>475</span>
<span class=normal>476</span>
<span class=normal>477</span>
<span class=normal>478</span>
<span class=normal>479</span>
<span class=normal>480</span>
<span class=normal>481</span>
<span class=normal>482</span>
<span class=normal>483</span>
<span class=normal>484</span>
<span class=normal>485</span>
<span class=normal>486</span>
<span class=normal>487</span>
<span class=normal>488</span>
<span class=normal>489</span>
<span class=normal>490</span>
<span class=normal>491</span>
<span class=normal>492</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_selection</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>project_name</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Set selection to a given project.</span>

<span class=sd>    Selection change is ignored if project is not found.</span>

<span class=sd>    Args:</span>
<span class=sd>        project_name (str): Name of project.</span>

<span class=sd>    Returns:</span>
<span class=sd>        bool: True if selection was changed, False otherwise. NOTE:</span>
<span class=sd>            Selection may not be changed if project is not found, or if</span>
<span class=sd>            project is already selected.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>idx</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_projects_combobox</span><span class=o>.</span><span class=n>findData</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span> <span class=n>PROJECT_NAME_ROLE</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>idx</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=p>:</span>
        <span class=k>return</span> <span class=kc>False</span>
    <span class=k>if</span> <span class=n>idx</span> <span class=o>!=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_projects_combobox</span><span class=o>.</span><span class=n>currentIndex</span><span class=p>():</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_projects_combobox</span><span class=o>.</span><span class=n>setCurrentIndex</span><span class=p>(</span><span class=n>idx</span><span class=p>)</span>
        <span class=k>return</span> <span class=kc>True</span>
    <span class=k>return</span> <span class=kc>False</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.tools.utils.ProjectsQtModel class="doc doc-heading"> <code>ProjectsQtModel</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=qtpy.QtGui.QStandardItemModel>QStandardItemModel</span></code></p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/projects_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 14</span>
<span class=normal> 15</span>
<span class=normal> 16</span>
<span class=normal> 17</span>
<span class=normal> 18</span>
<span class=normal> 19</span>
<span class=normal> 20</span>
<span class=normal> 21</span>
<span class=normal> 22</span>
<span class=normal> 23</span>
<span class=normal> 24</span>
<span class=normal> 25</span>
<span class=normal> 26</span>
<span class=normal> 27</span>
<span class=normal> 28</span>
<span class=normal> 29</span>
<span class=normal> 30</span>
<span class=normal> 31</span>
<span class=normal> 32</span>
<span class=normal> 33</span>
<span class=normal> 34</span>
<span class=normal> 35</span>
<span class=normal> 36</span>
<span class=normal> 37</span>
<span class=normal> 38</span>
<span class=normal> 39</span>
<span class=normal> 40</span>
<span class=normal> 41</span>
<span class=normal> 42</span>
<span class=normal> 43</span>
<span class=normal> 44</span>
<span class=normal> 45</span>
<span class=normal> 46</span>
<span class=normal> 47</span>
<span class=normal> 48</span>
<span class=normal> 49</span>
<span class=normal> 50</span>
<span class=normal> 51</span>
<span class=normal> 52</span>
<span class=normal> 53</span>
<span class=normal> 54</span>
<span class=normal> 55</span>
<span class=normal> 56</span>
<span class=normal> 57</span>
<span class=normal> 58</span>
<span class=normal> 59</span>
<span class=normal> 60</span>
<span class=normal> 61</span>
<span class=normal> 62</span>
<span class=normal> 63</span>
<span class=normal> 64</span>
<span class=normal> 65</span>
<span class=normal> 66</span>
<span class=normal> 67</span>
<span class=normal> 68</span>
<span class=normal> 69</span>
<span class=normal> 70</span>
<span class=normal> 71</span>
<span class=normal> 72</span>
<span class=normal> 73</span>
<span class=normal> 74</span>
<span class=normal> 75</span>
<span class=normal> 76</span>
<span class=normal> 77</span>
<span class=normal> 78</span>
<span class=normal> 79</span>
<span class=normal> 80</span>
<span class=normal> 81</span>
<span class=normal> 82</span>
<span class=normal> 83</span>
<span class=normal> 84</span>
<span class=normal> 85</span>
<span class=normal> 86</span>
<span class=normal> 87</span>
<span class=normal> 88</span>
<span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span>
<span class=normal>277</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>ProjectsQtModel</span><span class=p>(</span><span class=n>QtGui</span><span class=o>.</span><span class=n>QStandardItemModel</span><span class=p>):</span>
    <span class=n>refreshed</span> <span class=o>=</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Signal</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>controller</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>ProjectsQtModel</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_controller</span> <span class=o>=</span> <span class=n>controller</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_project_items</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_has_libraries</span> <span class=o>=</span> <span class=kc>False</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_empty_item</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_empty_item_added</span> <span class=o>=</span> <span class=kc>False</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_select_item</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_select_item_added</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_select_item_visible</span> <span class=o>=</span> <span class=kc>None</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_libraries_sep_item</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_libraries_sep_item_added</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_libraries_sep_item_visible</span> <span class=o>=</span> <span class=kc>False</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_current_context_project</span> <span class=o>=</span> <span class=kc>None</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_selected_project</span> <span class=o>=</span> <span class=kc>None</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_refresh_thread</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>is_refreshing</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_refresh_thread</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span>

    <span class=k>def</span><span class=w> </span><span class=nf>refresh</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_refresh</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>has_content</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_project_items</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>0</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_index_by_project_name</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>project_name</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get index of project by name.</span>

<span class=sd>        Args:</span>
<span class=sd>            project_name (str): Project name.</span>

<span class=sd>        Returns:</span>
<span class=sd>            QtCore.QModelIndex: Index of project item. Index is not valid</span>
<span class=sd>                if project is not found.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_project_items</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>item</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>QModelIndex</span><span class=p>()</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>indexFromItem</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_select_item_visible</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>visible</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_select_item_visible</span> <span class=ow>is</span> <span class=n>visible</span><span class=p>:</span>
            <span class=k>return</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_select_item_visible</span> <span class=o>=</span> <span class=n>visible</span>

        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_selected_project</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_add_select_item</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_libraries_separator_visible</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>visible</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_libraries_sep_item_visible</span> <span class=ow>is</span> <span class=n>visible</span><span class=p>:</span>
            <span class=k>return</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_libraries_sep_item_visible</span> <span class=o>=</span> <span class=n>visible</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_selected_project</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>project_name</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_select_item_visible</span><span class=p>:</span>
            <span class=k>return</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_selected_project</span> <span class=o>=</span> <span class=n>project_name</span>
        <span class=k>if</span> <span class=n>project_name</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_add_select_item</span><span class=p>()</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_remove_select_item</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_current_context_project</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>project_name</span><span class=p>):</span>
        <span class=k>if</span> <span class=n>project_name</span> <span class=o>==</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_context_project</span><span class=p>:</span>
            <span class=k>return</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_unset_current_context_project</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_current_context_project</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_current_context_project</span> <span class=o>=</span> <span class=n>project_name</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_set_current_context_project</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_set_current_context_project</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>project_name</span><span class=p>):</span>
        <span class=n>item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_project_items</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>item</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span>
        <span class=n>item</span><span class=o>.</span><span class=n>setData</span><span class=p>(</span><span class=kc>True</span><span class=p>,</span> <span class=n>PROJECT_IS_CURRENT_ROLE</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_unset_current_context_project</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>project_name</span><span class=p>):</span>
        <span class=n>item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_project_items</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>item</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span>
        <span class=n>item</span><span class=o>.</span><span class=n>setData</span><span class=p>(</span><span class=kc>False</span><span class=p>,</span> <span class=n>PROJECT_IS_CURRENT_ROLE</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_add_empty_item</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_empty_item_added</span><span class=p>:</span>
            <span class=k>return</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_empty_item_added</span> <span class=o>=</span> <span class=kc>True</span>
        <span class=n>item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_empty_item</span><span class=p>()</span>
        <span class=n>root_item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>invisibleRootItem</span><span class=p>()</span>
        <span class=n>root_item</span><span class=o>.</span><span class=n>appendRow</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_remove_empty_item</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_empty_item_added</span><span class=p>:</span>
            <span class=k>return</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_empty_item_added</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=n>root_item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>invisibleRootItem</span><span class=p>()</span>
        <span class=n>item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_empty_item</span><span class=p>()</span>
        <span class=n>root_item</span><span class=o>.</span><span class=n>takeRow</span><span class=p>(</span><span class=n>item</span><span class=o>.</span><span class=n>row</span><span class=p>())</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_get_empty_item</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_empty_item</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>item</span> <span class=o>=</span> <span class=n>QtGui</span><span class=o>.</span><span class=n>QStandardItem</span><span class=p>(</span><span class=s2>&quot;&lt; No projects &gt;&quot;</span><span class=p>)</span>
            <span class=n>item</span><span class=o>.</span><span class=n>setFlags</span><span class=p>(</span><span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>NoItemFlags</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_empty_item</span> <span class=o>=</span> <span class=n>item</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_empty_item</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_get_library_sep_item</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_libraries_sep_item</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_libraries_sep_item</span>

        <span class=n>item</span> <span class=o>=</span> <span class=n>QtGui</span><span class=o>.</span><span class=n>QStandardItem</span><span class=p>()</span>
        <span class=n>item</span><span class=o>.</span><span class=n>setData</span><span class=p>(</span><span class=s2>&quot;Libraries&quot;</span><span class=p>,</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>DisplayRole</span><span class=p>)</span>
        <span class=n>item</span><span class=o>.</span><span class=n>setData</span><span class=p>(</span><span class=kc>True</span><span class=p>,</span> <span class=n>LIBRARY_PROJECT_SEPARATOR_ROLE</span><span class=p>)</span>
        <span class=n>item</span><span class=o>.</span><span class=n>setFlags</span><span class=p>(</span><span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>NoItemFlags</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_libraries_sep_item</span> <span class=o>=</span> <span class=n>item</span>
        <span class=k>return</span> <span class=n>item</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_add_library_sep_item</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=p>(</span>
            <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_libraries_sep_item_visible</span>
            <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>_libraries_sep_item_added</span>
        <span class=p>):</span>
            <span class=k>return</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_libraries_sep_item_added</span> <span class=o>=</span> <span class=kc>True</span>
        <span class=n>item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_library_sep_item</span><span class=p>()</span>
        <span class=n>root_item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>invisibleRootItem</span><span class=p>()</span>
        <span class=n>root_item</span><span class=o>.</span><span class=n>appendRow</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_remove_library_sep_item</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=p>(</span>
            <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_libraries_sep_item_added</span>
        <span class=p>):</span>
            <span class=k>return</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_libraries_sep_item_added</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=n>item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_library_sep_item</span><span class=p>()</span>
        <span class=n>root_item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>invisibleRootItem</span><span class=p>()</span>
        <span class=n>root_item</span><span class=o>.</span><span class=n>takeRow</span><span class=p>(</span><span class=n>item</span><span class=o>.</span><span class=n>row</span><span class=p>())</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_add_select_item</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_select_item_added</span><span class=p>:</span>
            <span class=k>return</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_select_item_added</span> <span class=o>=</span> <span class=kc>True</span>
        <span class=n>item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_select_item</span><span class=p>()</span>
        <span class=n>root_item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>invisibleRootItem</span><span class=p>()</span>
        <span class=n>root_item</span><span class=o>.</span><span class=n>appendRow</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_remove_select_item</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_select_item_added</span><span class=p>:</span>
            <span class=k>return</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_select_item_added</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=n>root_item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>invisibleRootItem</span><span class=p>()</span>
        <span class=n>item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_select_item</span><span class=p>()</span>
        <span class=n>root_item</span><span class=o>.</span><span class=n>takeRow</span><span class=p>(</span><span class=n>item</span><span class=o>.</span><span class=n>row</span><span class=p>())</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_get_select_item</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_select_item</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>item</span> <span class=o>=</span> <span class=n>QtGui</span><span class=o>.</span><span class=n>QStandardItem</span><span class=p>(</span><span class=s2>&quot;&lt; Select project &gt;&quot;</span><span class=p>)</span>
            <span class=n>item</span><span class=o>.</span><span class=n>setEditable</span><span class=p>(</span><span class=kc>False</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_select_item</span> <span class=o>=</span> <span class=n>item</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_select_item</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_refresh</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_refresh_thread</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span>

        <span class=n>refresh_thread</span> <span class=o>=</span> <span class=n>RefreshThread</span><span class=p>(</span>
            <span class=s2>&quot;projects&quot;</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_query_project_items</span>
        <span class=p>)</span>
        <span class=n>refresh_thread</span><span class=o>.</span><span class=n>refresh_finished</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_refresh_finished</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_refresh_thread</span> <span class=o>=</span> <span class=n>refresh_thread</span>
        <span class=n>refresh_thread</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_query_project_items</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_controller</span><span class=o>.</span><span class=n>get_project_items</span><span class=p>(</span>
            <span class=n>sender</span><span class=o>=</span><span class=n>PROJECTS_MODEL_SENDER</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_refresh_finished</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=c1># TODO check if failed</span>
        <span class=n>result</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_refresh_thread</span><span class=o>.</span><span class=n>get_result</span><span class=p>()</span>
        <span class=k>if</span> <span class=n>result</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_fill_items</span><span class=p>(</span><span class=n>result</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_refresh_thread</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=k>if</span> <span class=n>result</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_refresh</span><span class=p>()</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>refreshed</span><span class=o>.</span><span class=n>emit</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_fill_items</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>project_items</span><span class=p>):</span>
        <span class=n>new_project_names</span> <span class=o>=</span> <span class=p>{</span>
            <span class=n>project_item</span><span class=o>.</span><span class=n>name</span>
            <span class=k>for</span> <span class=n>project_item</span> <span class=ow>in</span> <span class=n>project_items</span>
        <span class=p>}</span>

        <span class=c1># Handle &quot;Select item&quot; visibility</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_select_item_visible</span><span class=p>:</span>
            <span class=c1># Add select project. if previously selected project is not in</span>
            <span class=c1>#   project items</span>
            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_selected_project</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>new_project_names</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_add_select_item</span><span class=p>()</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_remove_select_item</span><span class=p>()</span>

        <span class=n>root_item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>invisibleRootItem</span><span class=p>()</span>

        <span class=n>items_to_remove</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_project_items</span><span class=o>.</span><span class=n>keys</span><span class=p>())</span> <span class=o>-</span> <span class=n>new_project_names</span>
        <span class=k>for</span> <span class=n>project_name</span> <span class=ow>in</span> <span class=n>items_to_remove</span><span class=p>:</span>
            <span class=n>item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_project_items</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>
            <span class=n>root_item</span><span class=o>.</span><span class=n>takeRow</span><span class=p>(</span><span class=n>item</span><span class=o>.</span><span class=n>row</span><span class=p>())</span>

        <span class=n>has_library_project</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=n>new_items</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>for</span> <span class=n>project_item</span> <span class=ow>in</span> <span class=n>project_items</span><span class=p>:</span>
            <span class=n>project_name</span> <span class=o>=</span> <span class=n>project_item</span><span class=o>.</span><span class=n>name</span>
            <span class=n>item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_project_items</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>project_item</span><span class=o>.</span><span class=n>is_library</span><span class=p>:</span>
                <span class=n>has_library_project</span> <span class=o>=</span> <span class=kc>True</span>
            <span class=k>if</span> <span class=n>item</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
                <span class=n>item</span> <span class=o>=</span> <span class=n>QtGui</span><span class=o>.</span><span class=n>QStandardItem</span><span class=p>()</span>
                <span class=n>item</span><span class=o>.</span><span class=n>setEditable</span><span class=p>(</span><span class=kc>False</span><span class=p>)</span>
                <span class=n>new_items</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>
            <span class=n>icon</span> <span class=o>=</span> <span class=n>get_qt_icon</span><span class=p>(</span><span class=n>project_item</span><span class=o>.</span><span class=n>icon</span><span class=p>)</span>
            <span class=n>item</span><span class=o>.</span><span class=n>setData</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>DisplayRole</span><span class=p>)</span>
            <span class=n>item</span><span class=o>.</span><span class=n>setData</span><span class=p>(</span><span class=n>icon</span><span class=p>,</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>DecorationRole</span><span class=p>)</span>
            <span class=n>item</span><span class=o>.</span><span class=n>setData</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=n>PROJECT_NAME_ROLE</span><span class=p>)</span>
            <span class=n>item</span><span class=o>.</span><span class=n>setData</span><span class=p>(</span><span class=n>project_item</span><span class=o>.</span><span class=n>active</span><span class=p>,</span> <span class=n>PROJECT_IS_ACTIVE_ROLE</span><span class=p>)</span>
            <span class=n>item</span><span class=o>.</span><span class=n>setData</span><span class=p>(</span><span class=n>project_item</span><span class=o>.</span><span class=n>is_library</span><span class=p>,</span> <span class=n>PROJECT_IS_LIBRARY_ROLE</span><span class=p>)</span>
            <span class=n>is_current</span> <span class=o>=</span> <span class=n>project_name</span> <span class=o>==</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_context_project</span>
            <span class=n>item</span><span class=o>.</span><span class=n>setData</span><span class=p>(</span><span class=n>is_current</span><span class=p>,</span> <span class=n>PROJECT_IS_CURRENT_ROLE</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_project_items</span><span class=p>[</span><span class=n>project_name</span><span class=p>]</span> <span class=o>=</span> <span class=n>item</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_set_current_context_project</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_current_context_project</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_has_libraries</span> <span class=o>=</span> <span class=n>has_library_project</span>

        <span class=k>if</span> <span class=n>new_items</span><span class=p>:</span>
            <span class=n>root_item</span><span class=o>.</span><span class=n>appendRows</span><span class=p>(</span><span class=n>new_items</span><span class=p>)</span>

        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>has_content</span><span class=p>():</span>
            <span class=c1># Make sure &quot;No projects&quot; item is removed</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_remove_empty_item</span><span class=p>()</span>
            <span class=k>if</span> <span class=n>has_library_project</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_add_library_sep_item</span><span class=p>()</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_remove_library_sep_item</span><span class=p>()</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=c1># Keep only &quot;No projects&quot; item</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_add_empty_item</span><span class=p>()</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_remove_select_item</span><span class=p>()</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_remove_library_sep_item</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.ProjectsQtModel.get_index_by_project_name class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_index_by_project_name</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Get index of project by name.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>project_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Project name.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>QtCore.QModelIndex: Index of project item. Index is not valid if project is not found.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/projects_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span>
<span class=normal>62</span>
<span class=normal>63</span>
<span class=normal>64</span>
<span class=normal>65</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_index_by_project_name</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>project_name</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get index of project by name.</span>

<span class=sd>    Args:</span>
<span class=sd>        project_name (str): Project name.</span>

<span class=sd>    Returns:</span>
<span class=sd>        QtCore.QModelIndex: Index of project item. Index is not valid</span>
<span class=sd>            if project is not found.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_project_items</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>item</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>QModelIndex</span><span class=p>()</span>
    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>indexFromItem</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.tools.utils.RecursiveSortFilterProxyModel class="doc doc-heading"> <code>RecursiveSortFilterProxyModel</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=qtpy.QtCore.QSortFilterProxyModel>QSortFilterProxyModel</span></code></p> <p>Recursive proxy model. Item is not filtered if any children match the filter. Use case: Filtering by string - parent won't be filtered if does not match the filter string but first checks if any children does.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/models.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>RecursiveSortFilterProxyModel</span><span class=p>(</span><span class=n>QtCore</span><span class=o>.</span><span class=n>QSortFilterProxyModel</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Recursive proxy model.</span>
<span class=sd>    Item is not filtered if any children match the filter.</span>
<span class=sd>    Use case: Filtering by string - parent won&#39;t be filtered if does not match</span>
<span class=sd>        the filter string but first checks if any children does.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>RecursiveSortFilterProxyModel</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
        <span class=n>recursive_enabled</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=s2>&quot;setRecursiveFilteringEnabled&quot;</span><span class=p>):</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>setRecursiveFilteringEnabled</span><span class=p>(</span><span class=kc>True</span><span class=p>)</span>
            <span class=n>recursive_enabled</span> <span class=o>=</span> <span class=kc>True</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_recursive_enabled</span> <span class=o>=</span> <span class=n>recursive_enabled</span>

    <span class=k>def</span><span class=w> </span><span class=nf>filterAcceptsRow</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>row</span><span class=p>,</span> <span class=n>parent_index</span><span class=p>):</span>
        <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=s2>&quot;filterRegExp&quot;</span><span class=p>):</span>
            <span class=n>regex</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>filterRegExp</span><span class=p>()</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>regex</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>filterRegularExpression</span><span class=p>()</span>

        <span class=n>pattern</span> <span class=o>=</span> <span class=n>regex</span><span class=o>.</span><span class=n>pattern</span><span class=p>()</span>
        <span class=k>if</span> <span class=n>pattern</span><span class=p>:</span>
            <span class=n>model</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>sourceModel</span><span class=p>()</span>
            <span class=n>source_index</span> <span class=o>=</span> <span class=n>model</span><span class=o>.</span><span class=n>index</span><span class=p>(</span>
                <span class=n>row</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>filterKeyColumn</span><span class=p>(),</span> <span class=n>parent_index</span>
            <span class=p>)</span>
            <span class=k>if</span> <span class=n>source_index</span><span class=o>.</span><span class=n>isValid</span><span class=p>():</span>
                <span class=n>pattern</span> <span class=o>=</span> <span class=n>regex</span><span class=o>.</span><span class=n>pattern</span><span class=p>()</span>

                <span class=c1># Check current index itself</span>
                <span class=n>value</span> <span class=o>=</span> <span class=n>model</span><span class=o>.</span><span class=n>data</span><span class=p>(</span><span class=n>source_index</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>filterRole</span><span class=p>())</span>
                <span class=n>matched</span> <span class=o>=</span> <span class=nb>bool</span><span class=p>(</span><span class=n>re</span><span class=o>.</span><span class=n>search</span><span class=p>(</span><span class=n>pattern</span><span class=p>,</span> <span class=n>value</span><span class=p>,</span> <span class=n>re</span><span class=o>.</span><span class=n>IGNORECASE</span><span class=p>))</span>
                <span class=k>if</span> <span class=n>matched</span> <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>_recursive_enabled</span><span class=p>:</span>
                    <span class=k>return</span> <span class=n>matched</span>

                <span class=n>rows</span> <span class=o>=</span> <span class=n>model</span><span class=o>.</span><span class=n>rowCount</span><span class=p>(</span><span class=n>source_index</span><span class=p>)</span>
                <span class=k>for</span> <span class=n>idx</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>rows</span><span class=p>):</span>
                    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>filterAcceptsRow</span><span class=p>(</span><span class=n>idx</span><span class=p>,</span> <span class=n>source_index</span><span class=p>):</span>
                        <span class=k>return</span> <span class=kc>True</span>

                <span class=c1># Otherwise filter it</span>
                <span class=k>return</span> <span class=kc>False</span>

        <span class=k>return</span> <span class=nb>super</span><span class=p>(</span><span class=n>RecursiveSortFilterProxyModel</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>filterAcceptsRow</span><span class=p>(</span>
            <span class=n>row</span><span class=p>,</span> <span class=n>parent_index</span>
        <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.tools.utils.ScrollMessageBox class="doc doc-heading"> <code>ScrollMessageBox</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=qtpy.QtWidgets.QDialog>QDialog</span></code></p> <p>Basic version of scrollable QMessageBox.</p> <p>No other existing dialog implementation is scrollable.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>icon</code> </td> <td> <code><span title=qtpy.QtWidgets.QMessageBox.Icon>Icon</span></code> </td> <td> <div class=doc-md-description> <p>Icon to display.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>title</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Window title.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>messages</code> </td> <td> <code><span title=list>list</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>List of messages.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>cancelable</code> </td> <td> <code><span title=Optional>Optional</span>[<span title=bool>bool</span>]</code> </td> <td> <div class=doc-md-description> <p>True if Cancel button should be added.</p> </div> </td> <td> <code>False</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/dialogs.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span>
<span class=normal>62</span>
<span class=normal>63</span>
<span class=normal>64</span>
<span class=normal>65</span>
<span class=normal>66</span>
<span class=normal>67</span>
<span class=normal>68</span>
<span class=normal>69</span>
<span class=normal>70</span>
<span class=normal>71</span>
<span class=normal>72</span>
<span class=normal>73</span>
<span class=normal>74</span>
<span class=normal>75</span>
<span class=normal>76</span>
<span class=normal>77</span>
<span class=normal>78</span>
<span class=normal>79</span>
<span class=normal>80</span>
<span class=normal>81</span>
<span class=normal>82</span>
<span class=normal>83</span>
<span class=normal>84</span>
<span class=normal>85</span>
<span class=normal>86</span>
<span class=normal>87</span>
<span class=normal>88</span>
<span class=normal>89</span>
<span class=normal>90</span>
<span class=normal>91</span>
<span class=normal>92</span>
<span class=normal>93</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>ScrollMessageBox</span><span class=p>(</span><span class=n>QtWidgets</span><span class=o>.</span><span class=n>QDialog</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Basic version of scrollable QMessageBox.</span>

<span class=sd>    No other existing dialog implementation is scrollable.</span>

<span class=sd>    Args:</span>
<span class=sd>        icon (QtWidgets.QMessageBox.Icon): Icon to display.</span>
<span class=sd>        title (str): Window title.</span>
<span class=sd>        messages (list[str]): List of messages.</span>
<span class=sd>        cancelable (Optional[bool]): True if Cancel button should be added.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>icon</span><span class=p>,</span> <span class=n>title</span><span class=p>,</span> <span class=n>messages</span><span class=p>,</span> <span class=n>cancelable</span><span class=o>=</span><span class=kc>False</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>ScrollMessageBox</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>setWindowTitle</span><span class=p>(</span><span class=n>title</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>icon</span> <span class=o>=</span> <span class=n>icon</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_messages</span> <span class=o>=</span> <span class=n>messages</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>setWindowFlags</span><span class=p>(</span><span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>WindowTitleHint</span><span class=p>)</span>

        <span class=n>layout</span> <span class=o>=</span> <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QVBoxLayout</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>

        <span class=n>scroll_widget</span> <span class=o>=</span> <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QScrollArea</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
        <span class=n>scroll_widget</span><span class=o>.</span><span class=n>setWidgetResizable</span><span class=p>(</span><span class=kc>True</span><span class=p>)</span>
        <span class=n>content_widget</span> <span class=o>=</span> <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QWidget</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
        <span class=n>scroll_widget</span><span class=o>.</span><span class=n>setWidget</span><span class=p>(</span><span class=n>content_widget</span><span class=p>)</span>

        <span class=n>message_len</span> <span class=o>=</span> <span class=mi>0</span>
        <span class=n>content_layout</span> <span class=o>=</span> <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QVBoxLayout</span><span class=p>(</span><span class=n>content_widget</span><span class=p>)</span>
        <span class=k>for</span> <span class=n>message</span> <span class=ow>in</span> <span class=n>messages</span><span class=p>:</span>
            <span class=n>label_widget</span> <span class=o>=</span> <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QLabel</span><span class=p>(</span><span class=n>message</span><span class=p>,</span> <span class=n>content_widget</span><span class=p>)</span>
            <span class=n>content_layout</span><span class=o>.</span><span class=n>addWidget</span><span class=p>(</span><span class=n>label_widget</span><span class=p>)</span>
            <span class=n>message_len</span> <span class=o>=</span> <span class=nb>max</span><span class=p>(</span><span class=n>message_len</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=n>message</span><span class=p>))</span>

        <span class=c1># guess size of scrollable area</span>
        <span class=c1># WARNING: &#39;desktop&#39; method probably won&#39;t work in PySide6</span>
        <span class=n>desktop</span> <span class=o>=</span> <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QApplication</span><span class=o>.</span><span class=n>desktop</span><span class=p>()</span>
        <span class=n>max_width</span> <span class=o>=</span> <span class=n>desktop</span><span class=o>.</span><span class=n>availableGeometry</span><span class=p>()</span><span class=o>.</span><span class=n>width</span><span class=p>()</span>
        <span class=n>scroll_widget</span><span class=o>.</span><span class=n>setMinimumWidth</span><span class=p>(</span>
            <span class=nb>min</span><span class=p>(</span><span class=n>max_width</span><span class=p>,</span> <span class=n>message_len</span> <span class=o>*</span> <span class=mi>6</span><span class=p>)</span>
        <span class=p>)</span>
        <span class=n>layout</span><span class=o>.</span><span class=n>addWidget</span><span class=p>(</span><span class=n>scroll_widget</span><span class=p>)</span>

        <span class=n>buttons</span> <span class=o>=</span> <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QDialogButtonBox</span><span class=o>.</span><span class=n>Ok</span>
        <span class=k>if</span> <span class=n>cancelable</span><span class=p>:</span>
            <span class=n>buttons</span> <span class=o>|=</span> <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QDialogButtonBox</span><span class=o>.</span><span class=n>Cancel</span>

        <span class=n>btn_box</span> <span class=o>=</span> <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QDialogButtonBox</span><span class=p>(</span><span class=n>buttons</span><span class=p>)</span>
        <span class=n>btn_box</span><span class=o>.</span><span class=n>accepted</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>accept</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>cancelable</span><span class=p>:</span>
            <span class=n>btn_box</span><span class=o>.</span><span class=n>reject</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>reject</span><span class=p>)</span>

        <span class=n>btn</span> <span class=o>=</span> <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QPushButton</span><span class=p>(</span><span class=s2>&quot;Copy to clipboard&quot;</span><span class=p>)</span>
        <span class=n>btn</span><span class=o>.</span><span class=n>clicked</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_on_copy_click</span><span class=p>)</span>
        <span class=n>btn_box</span><span class=o>.</span><span class=n>addButton</span><span class=p>(</span><span class=n>btn</span><span class=p>,</span> <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QDialogButtonBox</span><span class=o>.</span><span class=n>NoRole</span><span class=p>)</span>

        <span class=n>layout</span><span class=o>.</span><span class=n>addWidget</span><span class=p>(</span><span class=n>btn_box</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_on_copy_click</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=n>clipboard</span> <span class=o>=</span> <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QApplication</span><span class=o>.</span><span class=n>clipboard</span><span class=p>()</span>
        <span class=n>clipboard</span><span class=o>.</span><span class=n>setText</span><span class=p>(</span><span class=s2>&quot;</span><span class=se>\n</span><span class=s2>&quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_messages</span><span class=p>))</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.tools.utils.SeparatorWidget class="doc doc-heading"> <code>SeparatorWidget</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=qtpy.QtWidgets.QFrame>QFrame</span></code></p> <p>Prepared widget that can be used as separator with predefined color.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>size</code> </td> <td> <code><span title=int>int</span></code> </td> <td> <div class=doc-md-description> <p>Size of separator (width or height).</p> </div> </td> <td> <code>2</code> </td> </tr> <tr class=doc-section-item> <td> <code>orientation</code> </td> <td> <code><span title=Qt.Horizontal>Horizontal</span> | <span title=Qt.Vertical>Vertical</span></code> </td> <td> <div class=doc-md-description> <p>Orintation of widget.</p> </div> </td> <td> <code><span title=qtpy.QtCore.Qt.Horizontal>Horizontal</span></code> </td> </tr> <tr class=doc-section-item> <td> <code>parent</code> </td> <td> <code><span title=qtpy.QtWidgets.QWidget>QWidget</span></code> </td> <td> <div class=doc-md-description> <p>Parent widget.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/widgets.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1032</span>
<span class=normal>1033</span>
<span class=normal>1034</span>
<span class=normal>1035</span>
<span class=normal>1036</span>
<span class=normal>1037</span>
<span class=normal>1038</span>
<span class=normal>1039</span>
<span class=normal>1040</span>
<span class=normal>1041</span>
<span class=normal>1042</span>
<span class=normal>1043</span>
<span class=normal>1044</span>
<span class=normal>1045</span>
<span class=normal>1046</span>
<span class=normal>1047</span>
<span class=normal>1048</span>
<span class=normal>1049</span>
<span class=normal>1050</span>
<span class=normal>1051</span>
<span class=normal>1052</span>
<span class=normal>1053</span>
<span class=normal>1054</span>
<span class=normal>1055</span>
<span class=normal>1056</span>
<span class=normal>1057</span>
<span class=normal>1058</span>
<span class=normal>1059</span>
<span class=normal>1060</span>
<span class=normal>1061</span>
<span class=normal>1062</span>
<span class=normal>1063</span>
<span class=normal>1064</span>
<span class=normal>1065</span>
<span class=normal>1066</span>
<span class=normal>1067</span>
<span class=normal>1068</span>
<span class=normal>1069</span>
<span class=normal>1070</span>
<span class=normal>1071</span>
<span class=normal>1072</span>
<span class=normal>1073</span>
<span class=normal>1074</span>
<span class=normal>1075</span>
<span class=normal>1076</span>
<span class=normal>1077</span>
<span class=normal>1078</span>
<span class=normal>1079</span>
<span class=normal>1080</span>
<span class=normal>1081</span>
<span class=normal>1082</span>
<span class=normal>1083</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>SeparatorWidget</span><span class=p>(</span><span class=n>QtWidgets</span><span class=o>.</span><span class=n>QFrame</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Prepared widget that can be used as separator with predefined color.</span>

<span class=sd>    Args:</span>
<span class=sd>        size (int): Size of separator (width or height).</span>
<span class=sd>        orientation (Qt.Horizontal|Qt.Vertical): Orintation of widget.</span>
<span class=sd>        parent (QtWidgets.QWidget): Parent widget.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>size</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span> <span class=n>orientation</span><span class=o>=</span><span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>Horizontal</span><span class=p>,</span> <span class=n>parent</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>SeparatorWidget</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>parent</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>setObjectName</span><span class=p>(</span><span class=s2>&quot;Separator&quot;</span><span class=p>)</span>

        <span class=n>maximum_width</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>maximumWidth</span><span class=p>()</span>
        <span class=n>maximum_height</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>maximumHeight</span><span class=p>()</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_size</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_orientation</span> <span class=o>=</span> <span class=n>orientation</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_maximum_width</span> <span class=o>=</span> <span class=n>maximum_width</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_maximum_height</span> <span class=o>=</span> <span class=n>maximum_height</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>set_size</span><span class=p>(</span><span class=n>size</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_size</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>size</span><span class=p>):</span>
        <span class=k>if</span> <span class=n>size</span> <span class=o>!=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_size</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_set_size</span><span class=p>(</span><span class=n>size</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_set_size</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>size</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_orientation</span> <span class=o>==</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>Vertical</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>setMinimumWidth</span><span class=p>(</span><span class=n>size</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>setMaximumWidth</span><span class=p>(</span><span class=n>size</span><span class=p>)</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>setMinimumHeight</span><span class=p>(</span><span class=n>size</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>setMaximumHeight</span><span class=p>(</span><span class=n>size</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_size</span> <span class=o>=</span> <span class=n>size</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_orientation</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>orientation</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_orientation</span> <span class=o>==</span> <span class=n>orientation</span><span class=p>:</span>
            <span class=k>return</span>

        <span class=c1># Reset min/max sizes in opposite direction</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_orientation</span> <span class=o>==</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>Vertical</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>setMinimumHeight</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>setMaximumHeight</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_maximum_height</span><span class=p>)</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>setMinimumWidth</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>setMaximumWidth</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_maximum_width</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_orientation</span> <span class=o>=</span> <span class=n>orientation</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_set_size</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_size</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.tools.utils.SimpleFoldersWidget class="doc doc-heading"> <code>SimpleFoldersWidget</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="FoldersWidget (client.ayon_core.tools.utils.folders_widget.FoldersWidget)" href=folders_widget.html#client.ayon_core.tools.utils.folders_widget.FoldersWidget>FoldersWidget</a></code></p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/folders_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>737</span>
<span class=normal>738</span>
<span class=normal>739</span>
<span class=normal>740</span>
<span class=normal>741</span>
<span class=normal>742</span>
<span class=normal>743</span>
<span class=normal>744</span>
<span class=normal>745</span>
<span class=normal>746</span>
<span class=normal>747</span>
<span class=normal>748</span>
<span class=normal>749</span>
<span class=normal>750</span>
<span class=normal>751</span>
<span class=normal>752</span>
<span class=normal>753</span>
<span class=normal>754</span>
<span class=normal>755</span>
<span class=normal>756</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>SimpleFoldersWidget</span><span class=p>(</span><span class=n>FoldersWidget</span><span class=p>):</span>
    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>controller</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
        <span class=k>if</span> <span class=n>controller</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>controller</span> <span class=o>=</span> <span class=n>SimpleFoldersController</span><span class=p>()</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>SimpleFoldersWidget</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>controller</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_project_name</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>project_name</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_controller</span><span class=o>.</span><span class=n>set_selected_project</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>SimpleFoldersWidget</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>set_project_name</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_on_project_selection_change</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Ignore project selection change from controller.</span>

<span class=sd>        Only who can trigger project change is this widget with</span>
<span class=sd>            &#39;set_project_name&#39; which already cares about project change.</span>

<span class=sd>        Args:</span>
<span class=sd>            event (Event): Triggered event.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.tools.utils.SimplePopup class="doc doc-heading"> <code>SimplePopup</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=qtpy.QtWidgets.QDialog>QDialog</span></code></p> <p>A Popup that moves itself to bottom right of screen on show event.</p> <p>The UI contains a message label and a red highlighted button to "show" or perform another custom action from this pop-up.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/dialogs.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>SimplePopup</span><span class=p>(</span><span class=n>QtWidgets</span><span class=o>.</span><span class=n>QDialog</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;A Popup that moves itself to bottom right of screen on show event.</span>

<span class=sd>    The UI contains a message label and a red highlighted button to &quot;show&quot;</span>
<span class=sd>    or perform another custom action from this pop-up.</span>

<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>on_clicked</span> <span class=o>=</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Signal</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>parent</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>SimplePopup</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>parent</span><span class=o>=</span><span class=n>parent</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>

        <span class=c1># Set default title</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>setWindowTitle</span><span class=p>(</span><span class=s2>&quot;Popup&quot;</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>setContentsMargins</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>

        <span class=n>message_label</span> <span class=o>=</span> <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QLabel</span><span class=p>(</span><span class=s2>&quot;&quot;</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span>
        <span class=n>message_label</span><span class=o>.</span><span class=n>setStyleSheet</span><span class=p>(</span><span class=s2>&quot;&quot;&quot;</span>
<span class=s2>        QLabel {</span>
<span class=s2>            font-size: 12px;</span>
<span class=s2>        }</span>
<span class=s2>        &quot;&quot;&quot;</span><span class=p>)</span>
        <span class=n>confirm_btn</span> <span class=o>=</span> <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QPushButton</span><span class=p>(</span><span class=s2>&quot;Show&quot;</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span>
        <span class=n>confirm_btn</span><span class=o>.</span><span class=n>setSizePolicy</span><span class=p>(</span>
            <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QSizePolicy</span><span class=o>.</span><span class=n>Maximum</span><span class=p>,</span>
            <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QSizePolicy</span><span class=o>.</span><span class=n>Maximum</span>
        <span class=p>)</span>
        <span class=n>confirm_btn</span><span class=o>.</span><span class=n>setStyleSheet</span><span class=p>(</span>
<span class=w>            </span><span class=sd>&quot;&quot;&quot;QPushButton { background-color: #BB0000 }&quot;&quot;&quot;</span>
        <span class=p>)</span>

        <span class=c1># Layout</span>
        <span class=n>layout</span> <span class=o>=</span> <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QHBoxLayout</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
        <span class=n>layout</span><span class=o>.</span><span class=n>setContentsMargins</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>)</span>

        <span class=c1># Increase spacing slightly for readability</span>
        <span class=n>layout</span><span class=o>.</span><span class=n>setSpacing</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
        <span class=n>layout</span><span class=o>.</span><span class=n>addWidget</span><span class=p>(</span><span class=n>message_label</span><span class=p>)</span>
        <span class=n>layout</span><span class=o>.</span><span class=n>addWidget</span><span class=p>(</span><span class=n>confirm_btn</span><span class=p>)</span>

        <span class=c1># Signals</span>
        <span class=n>confirm_btn</span><span class=o>.</span><span class=n>clicked</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_on_clicked</span><span class=p>)</span>

        <span class=c1># Default size</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>resize</span><span class=p>(</span><span class=mi>400</span><span class=p>,</span> <span class=mi>40</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_message_label</span> <span class=o>=</span> <span class=n>message_label</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_confirm_btn</span> <span class=o>=</span> <span class=n>confirm_btn</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_message</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>message</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_message_label</span><span class=o>.</span><span class=n>setText</span><span class=p>(</span><span class=n>message</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_button_text</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>text</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_confirm_btn</span><span class=o>.</span><span class=n>setText</span><span class=p>(</span><span class=n>text</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>setMessage</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>message</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>set_message</span><span class=p>(</span><span class=n>message</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>setButtonText</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>text</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>set_button_text</span><span class=p>(</span><span class=n>text</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>showEvent</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
        <span class=c1># Position popup based on contents on show event</span>
        <span class=n>geo</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_calculate_window_geometry</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>setGeometry</span><span class=p>(</span><span class=n>geo</span><span class=p>)</span>

        <span class=k>return</span> <span class=nb>super</span><span class=p>(</span><span class=n>SimplePopup</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>showEvent</span><span class=p>(</span><span class=n>event</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_on_clicked</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Callback for when the &#39;show&#39; button is clicked.</span>

<span class=sd>        Raises the parent (if any)</span>

<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>parent</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>parent</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>

        <span class=c1># Trigger the signal</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>on_clicked</span><span class=o>.</span><span class=n>emit</span><span class=p>()</span>

        <span class=k>if</span> <span class=n>parent</span><span class=p>:</span>
            <span class=n>parent</span><span class=o>.</span><span class=n>raise_</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_calculate_window_geometry</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Respond to status changes</span>

<span class=sd>        On creation, align window with screen bottom right.</span>

<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>window</span> <span class=o>=</span> <span class=bp>self</span>

        <span class=n>width</span> <span class=o>=</span> <span class=n>window</span><span class=o>.</span><span class=n>width</span><span class=p>()</span>
        <span class=n>width</span> <span class=o>=</span> <span class=nb>max</span><span class=p>(</span><span class=n>width</span><span class=p>,</span> <span class=n>window</span><span class=o>.</span><span class=n>minimumWidth</span><span class=p>())</span>

        <span class=n>height</span> <span class=o>=</span> <span class=n>window</span><span class=o>.</span><span class=n>height</span><span class=p>()</span>
        <span class=n>height</span> <span class=o>=</span> <span class=nb>max</span><span class=p>(</span><span class=n>height</span><span class=p>,</span> <span class=n>window</span><span class=o>.</span><span class=n>sizeHint</span><span class=p>()</span><span class=o>.</span><span class=n>height</span><span class=p>())</span>

        <span class=k>try</span><span class=p>:</span>
            <span class=n>screen</span> <span class=o>=</span> <span class=n>window</span><span class=o>.</span><span class=n>screen</span><span class=p>()</span>
            <span class=n>desktop_geometry</span> <span class=o>=</span> <span class=n>screen</span><span class=o>.</span><span class=n>availableGeometry</span><span class=p>()</span>
        <span class=k>except</span> <span class=ne>AttributeError</span><span class=p>:</span>
            <span class=c1># Backwards compatibility for older Qt versions</span>
            <span class=c1># PySide6 removed QDesktopWidget</span>
            <span class=n>desktop_geometry</span> <span class=o>=</span> <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QDesktopWidget</span><span class=p>()</span><span class=o>.</span><span class=n>availableGeometry</span><span class=p>()</span>

        <span class=n>window_geometry</span> <span class=o>=</span> <span class=n>window</span><span class=o>.</span><span class=n>geometry</span><span class=p>()</span>

        <span class=n>screen_width</span> <span class=o>=</span> <span class=n>window_geometry</span><span class=o>.</span><span class=n>width</span><span class=p>()</span>
        <span class=n>screen_height</span> <span class=o>=</span> <span class=n>window_geometry</span><span class=o>.</span><span class=n>height</span><span class=p>()</span>

        <span class=c1># Calculate width and height of system tray</span>
        <span class=n>systray_width</span> <span class=o>=</span> <span class=n>window_geometry</span><span class=o>.</span><span class=n>width</span><span class=p>()</span> <span class=o>-</span> <span class=n>desktop_geometry</span><span class=o>.</span><span class=n>width</span><span class=p>()</span>
        <span class=n>systray_height</span> <span class=o>=</span> <span class=n>window_geometry</span><span class=o>.</span><span class=n>height</span><span class=p>()</span> <span class=o>-</span> <span class=n>desktop_geometry</span><span class=o>.</span><span class=n>height</span><span class=p>()</span>

        <span class=n>padding</span> <span class=o>=</span> <span class=mi>10</span>

        <span class=n>x</span> <span class=o>=</span> <span class=n>screen_width</span> <span class=o>-</span> <span class=n>width</span>
        <span class=n>y</span> <span class=o>=</span> <span class=n>screen_height</span> <span class=o>-</span> <span class=n>height</span>

        <span class=n>x</span> <span class=o>-=</span> <span class=n>systray_width</span> <span class=o>+</span> <span class=n>padding</span>
        <span class=n>y</span> <span class=o>-=</span> <span class=n>systray_height</span> <span class=o>+</span> <span class=n>padding</span>

        <span class=k>return</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>QRect</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=n>width</span><span class=p>,</span> <span class=n>height</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.tools.utils.SquareButton class="doc doc-heading"> <code>SquareButton</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=qtpy.QtWidgets.QPushButton>QPushButton</span></code></p> <p>Make button square shape.</p> <p>Change width to match height on resize.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/widgets.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1149</span>
<span class=normal>1150</span>
<span class=normal>1151</span>
<span class=normal>1152</span>
<span class=normal>1153</span>
<span class=normal>1154</span>
<span class=normal>1155</span>
<span class=normal>1156</span>
<span class=normal>1157</span>
<span class=normal>1158</span>
<span class=normal>1159</span>
<span class=normal>1160</span>
<span class=normal>1161</span>
<span class=normal>1162</span>
<span class=normal>1163</span>
<span class=normal>1164</span>
<span class=normal>1165</span>
<span class=normal>1166</span>
<span class=normal>1167</span>
<span class=normal>1168</span>
<span class=normal>1169</span>
<span class=normal>1170</span>
<span class=normal>1171</span>
<span class=normal>1172</span>
<span class=normal>1173</span>
<span class=normal>1174</span>
<span class=normal>1175</span>
<span class=normal>1176</span>
<span class=normal>1177</span>
<span class=normal>1178</span>
<span class=normal>1179</span>
<span class=normal>1180</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>SquareButton</span><span class=p>(</span><span class=n>QtWidgets</span><span class=o>.</span><span class=n>QPushButton</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Make button square shape.</span>

<span class=sd>    Change width to match height on resize.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>SquareButton</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>

        <span class=n>sp</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>sizePolicy</span><span class=p>()</span>
        <span class=n>sp</span><span class=o>.</span><span class=n>setVerticalPolicy</span><span class=p>(</span><span class=n>QtWidgets</span><span class=o>.</span><span class=n>QSizePolicy</span><span class=o>.</span><span class=n>Minimum</span><span class=p>)</span>
        <span class=n>sp</span><span class=o>.</span><span class=n>setHorizontalPolicy</span><span class=p>(</span><span class=n>QtWidgets</span><span class=o>.</span><span class=n>QSizePolicy</span><span class=o>.</span><span class=n>Minimum</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>setSizePolicy</span><span class=p>(</span><span class=n>sp</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_ideal_width</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=k>def</span><span class=w> </span><span class=nf>showEvent</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>SquareButton</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>showEvent</span><span class=p>(</span><span class=n>event</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_ideal_width</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>height</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>updateGeometry</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>resizeEvent</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>SquareButton</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>resizeEvent</span><span class=p>(</span><span class=n>event</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_ideal_width</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>height</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>updateGeometry</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>sizeHint</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=n>sh</span> <span class=o>=</span> <span class=nb>super</span><span class=p>(</span><span class=n>SquareButton</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>sizeHint</span><span class=p>()</span>
        <span class=n>ideal_width</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_ideal_width</span>
        <span class=k>if</span> <span class=n>ideal_width</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>ideal_width</span> <span class=o>=</span> <span class=n>sh</span><span class=o>.</span><span class=n>height</span><span class=p>()</span>
        <span class=n>sh</span><span class=o>.</span><span class=n>setWidth</span><span class=p>(</span><span class=n>ideal_width</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>sh</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.tools.utils.TasksQtModel class="doc doc-heading"> <code>TasksQtModel</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=qtpy.QtGui.QStandardItemModel>QStandardItemModel</span></code></p> <p>Tasks model which cares about refresh of tasks by folder id.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>controller</code> </td> <td> <code><span title=AbstractWorkfilesFrontend>AbstractWorkfilesFrontend</span></code> </td> <td> <div class=doc-md-description> <p>The control object.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/tasks_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 18</span>
<span class=normal> 19</span>
<span class=normal> 20</span>
<span class=normal> 21</span>
<span class=normal> 22</span>
<span class=normal> 23</span>
<span class=normal> 24</span>
<span class=normal> 25</span>
<span class=normal> 26</span>
<span class=normal> 27</span>
<span class=normal> 28</span>
<span class=normal> 29</span>
<span class=normal> 30</span>
<span class=normal> 31</span>
<span class=normal> 32</span>
<span class=normal> 33</span>
<span class=normal> 34</span>
<span class=normal> 35</span>
<span class=normal> 36</span>
<span class=normal> 37</span>
<span class=normal> 38</span>
<span class=normal> 39</span>
<span class=normal> 40</span>
<span class=normal> 41</span>
<span class=normal> 42</span>
<span class=normal> 43</span>
<span class=normal> 44</span>
<span class=normal> 45</span>
<span class=normal> 46</span>
<span class=normal> 47</span>
<span class=normal> 48</span>
<span class=normal> 49</span>
<span class=normal> 50</span>
<span class=normal> 51</span>
<span class=normal> 52</span>
<span class=normal> 53</span>
<span class=normal> 54</span>
<span class=normal> 55</span>
<span class=normal> 56</span>
<span class=normal> 57</span>
<span class=normal> 58</span>
<span class=normal> 59</span>
<span class=normal> 60</span>
<span class=normal> 61</span>
<span class=normal> 62</span>
<span class=normal> 63</span>
<span class=normal> 64</span>
<span class=normal> 65</span>
<span class=normal> 66</span>
<span class=normal> 67</span>
<span class=normal> 68</span>
<span class=normal> 69</span>
<span class=normal> 70</span>
<span class=normal> 71</span>
<span class=normal> 72</span>
<span class=normal> 73</span>
<span class=normal> 74</span>
<span class=normal> 75</span>
<span class=normal> 76</span>
<span class=normal> 77</span>
<span class=normal> 78</span>
<span class=normal> 79</span>
<span class=normal> 80</span>
<span class=normal> 81</span>
<span class=normal> 82</span>
<span class=normal> 83</span>
<span class=normal> 84</span>
<span class=normal> 85</span>
<span class=normal> 86</span>
<span class=normal> 87</span>
<span class=normal> 88</span>
<span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span>
<span class=normal>277</span>
<span class=normal>278</span>
<span class=normal>279</span>
<span class=normal>280</span>
<span class=normal>281</span>
<span class=normal>282</span>
<span class=normal>283</span>
<span class=normal>284</span>
<span class=normal>285</span>
<span class=normal>286</span>
<span class=normal>287</span>
<span class=normal>288</span>
<span class=normal>289</span>
<span class=normal>290</span>
<span class=normal>291</span>
<span class=normal>292</span>
<span class=normal>293</span>
<span class=normal>294</span>
<span class=normal>295</span>
<span class=normal>296</span>
<span class=normal>297</span>
<span class=normal>298</span>
<span class=normal>299</span>
<span class=normal>300</span>
<span class=normal>301</span>
<span class=normal>302</span>
<span class=normal>303</span>
<span class=normal>304</span>
<span class=normal>305</span>
<span class=normal>306</span>
<span class=normal>307</span>
<span class=normal>308</span>
<span class=normal>309</span>
<span class=normal>310</span>
<span class=normal>311</span>
<span class=normal>312</span>
<span class=normal>313</span>
<span class=normal>314</span>
<span class=normal>315</span>
<span class=normal>316</span>
<span class=normal>317</span>
<span class=normal>318</span>
<span class=normal>319</span>
<span class=normal>320</span>
<span class=normal>321</span>
<span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span>
<span class=normal>325</span>
<span class=normal>326</span>
<span class=normal>327</span>
<span class=normal>328</span>
<span class=normal>329</span>
<span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span>
<span class=normal>334</span>
<span class=normal>335</span>
<span class=normal>336</span>
<span class=normal>337</span>
<span class=normal>338</span>
<span class=normal>339</span>
<span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>TasksQtModel</span><span class=p>(</span><span class=n>QtGui</span><span class=o>.</span><span class=n>QStandardItemModel</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Tasks model which cares about refresh of tasks by folder id.</span>

<span class=sd>    Args:</span>
<span class=sd>        controller (AbstractWorkfilesFrontend): The control object.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>_default_task_icon</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=n>refreshed</span> <span class=o>=</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Signal</span><span class=p>()</span>
    <span class=n>column_labels</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&quot;Tasks&quot;</span><span class=p>]</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>controller</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>()</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>setColumnCount</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>column_labels</span><span class=p>))</span>
        <span class=k>for</span> <span class=n>idx</span><span class=p>,</span> <span class=n>label</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>column_labels</span><span class=p>):</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>setHeaderData</span><span class=p>(</span><span class=n>idx</span><span class=p>,</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>Horizontal</span><span class=p>,</span> <span class=n>label</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_controller</span> <span class=o>=</span> <span class=n>controller</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_items_by_name</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_has_content</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_is_refreshing</span> <span class=o>=</span> <span class=kc>False</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_invalid_selection_item_used</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_invalid_selection_item</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_empty_tasks_item_used</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_empty_tasks_item</span> <span class=o>=</span> <span class=kc>None</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_last_project_name</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_last_folder_id</span> <span class=o>=</span> <span class=kc>None</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_refresh_threads</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_current_refresh_thread</span> <span class=o>=</span> <span class=kc>None</span>

        <span class=c1># Initial state</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_add_invalid_selection_item</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_clear_items</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_items_by_name</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_has_content</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_remove_invalid_items</span><span class=p>()</span>
        <span class=n>root_item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>invisibleRootItem</span><span class=p>()</span>
        <span class=k>while</span> <span class=n>root_item</span><span class=o>.</span><span class=n>rowCount</span><span class=p>()</span> <span class=o>!=</span> <span class=mi>0</span><span class=p>:</span>
            <span class=n>root_item</span><span class=o>.</span><span class=n>takeRow</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>refresh</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Refresh tasks for last project and folder.&quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_refresh</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_last_project_name</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_last_folder_id</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_context</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>project_name</span><span class=p>,</span> <span class=n>folder_id</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Set context for which should be tasks showed.</span>

<span class=sd>        Args:</span>
<span class=sd>            project_name (Union[str]): Name of project.</span>
<span class=sd>            folder_id (Union[str, None]): Folder id.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_refresh</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=n>folder_id</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_index_by_name</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>task_name</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Find item by name and return its index.</span>

<span class=sd>        Returns:</span>
<span class=sd>            QtCore.QModelIndex: Index of item. Is invalid if task is not</span>
<span class=sd>                found by name.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_items_by_name</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>task_name</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>item</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>QModelIndex</span><span class=p>()</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>indexFromItem</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_last_project_name</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get last refreshed project name.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Union[str, None]: Project name.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_last_project_name</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_last_folder_id</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get last refreshed folder id.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Union[str, None]: Folder id.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_last_folder_id</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_selected_project</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>project_name</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_selected_project_name</span> <span class=o>=</span> <span class=n>project_name</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_get_invalid_selection_item</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_invalid_selection_item</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>item</span> <span class=o>=</span> <span class=n>QtGui</span><span class=o>.</span><span class=n>QStandardItem</span><span class=p>(</span><span class=s2>&quot;Select a folder&quot;</span><span class=p>)</span>
            <span class=n>item</span><span class=o>.</span><span class=n>setFlags</span><span class=p>(</span><span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>NoItemFlags</span><span class=p>)</span>
            <span class=n>icon</span> <span class=o>=</span> <span class=n>get_qt_icon</span><span class=p>({</span>
                <span class=s2>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;awesome-font&quot;</span><span class=p>,</span>
                <span class=s2>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;fa.times&quot;</span><span class=p>,</span>
                <span class=s2>&quot;color&quot;</span><span class=p>:</span> <span class=n>get_disabled_entity_icon_color</span><span class=p>(),</span>
            <span class=p>})</span>
            <span class=n>item</span><span class=o>.</span><span class=n>setData</span><span class=p>(</span><span class=n>icon</span><span class=p>,</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>DecorationRole</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_invalid_selection_item</span> <span class=o>=</span> <span class=n>item</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_invalid_selection_item</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_get_empty_task_item</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_empty_tasks_item</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>item</span> <span class=o>=</span> <span class=n>QtGui</span><span class=o>.</span><span class=n>QStandardItem</span><span class=p>(</span><span class=s2>&quot;No task&quot;</span><span class=p>)</span>
            <span class=n>icon</span> <span class=o>=</span> <span class=n>get_qt_icon</span><span class=p>({</span>
                <span class=s2>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;awesome-font&quot;</span><span class=p>,</span>
                <span class=s2>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;fa.exclamation-circle&quot;</span><span class=p>,</span>
                <span class=s2>&quot;color&quot;</span><span class=p>:</span> <span class=n>get_disabled_entity_icon_color</span><span class=p>(),</span>
            <span class=p>})</span>
            <span class=n>item</span><span class=o>.</span><span class=n>setData</span><span class=p>(</span><span class=n>icon</span><span class=p>,</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>DecorationRole</span><span class=p>)</span>
            <span class=n>item</span><span class=o>.</span><span class=n>setFlags</span><span class=p>(</span><span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>NoItemFlags</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_empty_tasks_item</span> <span class=o>=</span> <span class=n>item</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_empty_tasks_item</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_add_invalid_item</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>item</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_clear_items</span><span class=p>()</span>
        <span class=n>root_item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>invisibleRootItem</span><span class=p>()</span>
        <span class=n>root_item</span><span class=o>.</span><span class=n>appendRow</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_remove_invalid_item</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>item</span><span class=p>):</span>
        <span class=n>root_item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>invisibleRootItem</span><span class=p>()</span>
        <span class=n>root_item</span><span class=o>.</span><span class=n>takeRow</span><span class=p>(</span><span class=n>item</span><span class=o>.</span><span class=n>row</span><span class=p>())</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_remove_invalid_items</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_remove_invalid_selection_item</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_remove_empty_task_item</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_add_invalid_selection_item</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_invalid_selection_item_used</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_add_invalid_item</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_get_invalid_selection_item</span><span class=p>())</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_invalid_selection_item_used</span> <span class=o>=</span> <span class=kc>True</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_remove_invalid_selection_item</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_invalid_selection_item</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_remove_invalid_item</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_get_invalid_selection_item</span><span class=p>())</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_invalid_selection_item_used</span> <span class=o>=</span> <span class=kc>False</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_add_empty_task_item</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_empty_tasks_item_used</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_add_invalid_item</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_get_empty_task_item</span><span class=p>())</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_empty_tasks_item_used</span> <span class=o>=</span> <span class=kc>True</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_remove_empty_task_item</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_empty_tasks_item_used</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_remove_invalid_item</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_get_empty_task_item</span><span class=p>())</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_empty_tasks_item_used</span> <span class=o>=</span> <span class=kc>False</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_refresh</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>project_name</span><span class=p>,</span> <span class=n>folder_id</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_is_refreshing</span> <span class=o>=</span> <span class=kc>True</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_last_project_name</span> <span class=o>=</span> <span class=n>project_name</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_last_folder_id</span> <span class=o>=</span> <span class=n>folder_id</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>folder_id</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_add_invalid_selection_item</span><span class=p>()</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_current_refresh_thread</span> <span class=o>=</span> <span class=kc>None</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_is_refreshing</span> <span class=o>=</span> <span class=kc>False</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>refreshed</span><span class=o>.</span><span class=n>emit</span><span class=p>()</span>
            <span class=k>return</span>

        <span class=n>thread</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_refresh_threads</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>folder_id</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>thread</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_current_refresh_thread</span> <span class=o>=</span> <span class=n>thread</span>
            <span class=k>return</span>
        <span class=n>thread</span> <span class=o>=</span> <span class=n>RefreshThread</span><span class=p>(</span>
            <span class=n>folder_id</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_thread_getter</span><span class=p>,</span>
            <span class=n>project_name</span><span class=p>,</span>
            <span class=n>folder_id</span>
        <span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_current_refresh_thread</span> <span class=o>=</span> <span class=n>thread</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_refresh_threads</span><span class=p>[</span><span class=n>thread</span><span class=o>.</span><span class=n>id</span><span class=p>]</span> <span class=o>=</span> <span class=n>thread</span>
        <span class=n>thread</span><span class=o>.</span><span class=n>refresh_finished</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_on_refresh_thread</span><span class=p>)</span>
        <span class=n>thread</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_thread_getter</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>project_name</span><span class=p>,</span> <span class=n>folder_id</span><span class=p>):</span>
        <span class=n>task_items</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_controller</span><span class=o>.</span><span class=n>get_task_items</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span> <span class=n>folder_id</span><span class=p>,</span> <span class=n>sender</span><span class=o>=</span><span class=n>TASKS_MODEL_SENDER_NAME</span>
        <span class=p>)</span>
        <span class=n>task_type_items</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_controller</span><span class=p>,</span> <span class=s2>&quot;get_task_type_items&quot;</span><span class=p>):</span>
            <span class=n>task_type_items</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_controller</span><span class=o>.</span><span class=n>get_task_type_items</span><span class=p>(</span>
                <span class=n>project_name</span><span class=p>,</span> <span class=n>sender</span><span class=o>=</span><span class=n>TASKS_MODEL_SENDER_NAME</span>
            <span class=p>)</span>
        <span class=k>return</span> <span class=n>task_items</span><span class=p>,</span> <span class=n>task_type_items</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>_get_default_task_icon</span><span class=p>(</span><span class=bp>cls</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_default_task_icon</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>cls</span><span class=o>.</span><span class=n>_default_task_icon</span> <span class=o>=</span> <span class=n>get_qt_icon</span><span class=p>({</span>
                <span class=s2>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;awesome-font&quot;</span><span class=p>,</span>
                <span class=s2>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;fa.male&quot;</span><span class=p>,</span>
                <span class=s2>&quot;color&quot;</span><span class=p>:</span> <span class=n>get_default_entity_icon_color</span><span class=p>()</span>
            <span class=p>})</span>
        <span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_default_task_icon</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_get_task_item_icon</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>task_item</span><span class=p>,</span>
        <span class=n>task_type_item_by_name</span><span class=p>,</span>
        <span class=n>task_type_icon_cache</span>
    <span class=p>):</span>
        <span class=n>icon</span> <span class=o>=</span> <span class=n>task_type_icon_cache</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>task_item</span><span class=o>.</span><span class=n>task_type</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>icon</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>icon</span>

        <span class=n>task_type_item</span> <span class=o>=</span> <span class=n>task_type_item_by_name</span><span class=o>.</span><span class=n>get</span><span class=p>(</span>
            <span class=n>task_item</span><span class=o>.</span><span class=n>task_type</span>
        <span class=p>)</span>
        <span class=n>icon</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=k>if</span> <span class=n>task_type_item</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>icon</span> <span class=o>=</span> <span class=n>get_qt_icon</span><span class=p>({</span>
                <span class=s2>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;material-symbols&quot;</span><span class=p>,</span>
                <span class=s2>&quot;name&quot;</span><span class=p>:</span> <span class=n>task_type_item</span><span class=o>.</span><span class=n>icon</span><span class=p>,</span>
                <span class=s2>&quot;color&quot;</span><span class=p>:</span> <span class=n>get_default_entity_icon_color</span><span class=p>()</span>
            <span class=p>})</span>

        <span class=k>if</span> <span class=n>icon</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>icon</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_default_task_icon</span><span class=p>()</span>
        <span class=n>task_type_icon_cache</span><span class=p>[</span><span class=n>task_item</span><span class=o>.</span><span class=n>task_type</span><span class=p>]</span> <span class=o>=</span> <span class=n>icon</span>
        <span class=k>return</span> <span class=n>icon</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_fill_data_from_thread</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>thread</span><span class=p>):</span>
        <span class=n>task_items</span><span class=p>,</span> <span class=n>task_type_items</span> <span class=o>=</span> <span class=n>thread</span><span class=o>.</span><span class=n>get_result</span><span class=p>()</span>
        <span class=c1># Task items are refreshed</span>
        <span class=k>if</span> <span class=n>task_items</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span>

        <span class=c1># No tasks are available on folder</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>task_items</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_add_empty_task_item</span><span class=p>()</span>
            <span class=k>return</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_remove_invalid_items</span><span class=p>()</span>

        <span class=n>task_type_item_by_name</span> <span class=o>=</span> <span class=p>{</span>
            <span class=n>task_type_item</span><span class=o>.</span><span class=n>name</span><span class=p>:</span> <span class=n>task_type_item</span>
            <span class=k>for</span> <span class=n>task_type_item</span> <span class=ow>in</span> <span class=n>task_type_items</span>
        <span class=p>}</span>
        <span class=n>task_type_icon_cache</span> <span class=o>=</span> <span class=p>{}</span>
        <span class=n>new_items</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=n>new_names</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
        <span class=k>for</span> <span class=n>task_item</span> <span class=ow>in</span> <span class=n>task_items</span><span class=p>:</span>
            <span class=n>name</span> <span class=o>=</span> <span class=n>task_item</span><span class=o>.</span><span class=n>name</span>
            <span class=n>new_names</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>name</span><span class=p>)</span>
            <span class=n>item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_items_by_name</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>name</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>item</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
                <span class=n>item</span> <span class=o>=</span> <span class=n>QtGui</span><span class=o>.</span><span class=n>QStandardItem</span><span class=p>()</span>
                <span class=n>item</span><span class=o>.</span><span class=n>setEditable</span><span class=p>(</span><span class=kc>False</span><span class=p>)</span>
                <span class=n>new_items</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_items_by_name</span><span class=p>[</span><span class=n>name</span><span class=p>]</span> <span class=o>=</span> <span class=n>item</span>

            <span class=n>icon</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_task_item_icon</span><span class=p>(</span>
                <span class=n>task_item</span><span class=p>,</span>
                <span class=n>task_type_item_by_name</span><span class=p>,</span>
                <span class=n>task_type_icon_cache</span>
            <span class=p>)</span>
            <span class=n>item</span><span class=o>.</span><span class=n>setData</span><span class=p>(</span><span class=n>task_item</span><span class=o>.</span><span class=n>full_label</span><span class=p>,</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>DisplayRole</span><span class=p>)</span>
            <span class=n>item</span><span class=o>.</span><span class=n>setData</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>ITEM_NAME_ROLE</span><span class=p>)</span>
            <span class=n>item</span><span class=o>.</span><span class=n>setData</span><span class=p>(</span><span class=n>task_item</span><span class=o>.</span><span class=n>id</span><span class=p>,</span> <span class=n>ITEM_ID_ROLE</span><span class=p>)</span>
            <span class=n>item</span><span class=o>.</span><span class=n>setData</span><span class=p>(</span><span class=n>task_item</span><span class=o>.</span><span class=n>task_type</span><span class=p>,</span> <span class=n>TASK_TYPE_ROLE</span><span class=p>)</span>
            <span class=n>item</span><span class=o>.</span><span class=n>setData</span><span class=p>(</span><span class=n>task_item</span><span class=o>.</span><span class=n>parent_id</span><span class=p>,</span> <span class=n>PARENT_ID_ROLE</span><span class=p>)</span>
            <span class=n>item</span><span class=o>.</span><span class=n>setData</span><span class=p>(</span><span class=n>icon</span><span class=p>,</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>DecorationRole</span><span class=p>)</span>

        <span class=n>root_item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>invisibleRootItem</span><span class=p>()</span>

        <span class=k>for</span> <span class=n>name</span> <span class=ow>in</span> <span class=nb>set</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_items_by_name</span><span class=p>)</span> <span class=o>-</span> <span class=n>new_names</span><span class=p>:</span>
            <span class=n>item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_items_by_name</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>name</span><span class=p>)</span>
            <span class=n>root_item</span><span class=o>.</span><span class=n>removeRow</span><span class=p>(</span><span class=n>item</span><span class=o>.</span><span class=n>row</span><span class=p>())</span>

        <span class=k>if</span> <span class=n>new_items</span><span class=p>:</span>
            <span class=n>root_item</span><span class=o>.</span><span class=n>appendRows</span><span class=p>(</span><span class=n>new_items</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_on_refresh_thread</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>thread_id</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Callback when refresh thread is finished.</span>

<span class=sd>        Technically can be running multiple refresh threads at the same time,</span>
<span class=sd>        to avoid using values from wrong thread, we check if thread id is</span>
<span class=sd>        current refresh thread id.</span>

<span class=sd>        Tasks are stored by name, so if a folder has same task name as</span>
<span class=sd>        previously selected folder it keeps the selection.</span>

<span class=sd>        Args:</span>
<span class=sd>            thread_id (str): Thread id.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=c1># Make sure to remove thread from &#39;_refresh_threads&#39; dict</span>
        <span class=n>thread</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_refresh_threads</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>thread_id</span><span class=p>)</span>
        <span class=k>if</span> <span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_current_refresh_thread</span> <span class=ow>is</span> <span class=kc>None</span>
            <span class=ow>or</span> <span class=n>thread_id</span> <span class=o>!=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_refresh_thread</span><span class=o>.</span><span class=n>id</span>
        <span class=p>):</span>
            <span class=k>return</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_fill_data_from_thread</span><span class=p>(</span><span class=n>thread</span><span class=p>)</span>

        <span class=n>root_item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>invisibleRootItem</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_has_content</span> <span class=o>=</span> <span class=n>root_item</span><span class=o>.</span><span class=n>rowCount</span><span class=p>()</span> <span class=o>&gt;</span> <span class=mi>0</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_current_refresh_thread</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_is_refreshing</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>refreshed</span><span class=o>.</span><span class=n>emit</span><span class=p>()</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>is_refreshing</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Model is refreshing.</span>

<span class=sd>        Returns:</span>
<span class=sd>            bool: Model is refreshing</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_is_refreshing</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>has_content</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Model has content.</span>

<span class=sd>        Returns:</span>
<span class=sd>            bools: Have at least one task.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_has_content</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.tools.utils.TasksQtModel.has_content class="doc doc-heading"> <code class="highlight language-python"><span class=n>has_content</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Model has content.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>bools</code></td> <td> </td> <td> <div class=doc-md-description> <p>Have at least one task.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.tools.utils.TasksQtModel.is_refreshing class="doc doc-heading"> <code class="highlight language-python"><span class=n>is_refreshing</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Model is refreshing.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>bool</code></td> <td> </td> <td> <div class=doc-md-description> <p>Model is refreshing</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.TasksQtModel.get_index_by_name class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_index_by_name</span><span class=p>(</span><span class=n>task_name</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Find item by name and return its index.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>QtCore.QModelIndex: Index of item. Is invalid if task is not found by name.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/tasks_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>79</span>
<span class=normal>80</span>
<span class=normal>81</span>
<span class=normal>82</span>
<span class=normal>83</span>
<span class=normal>84</span>
<span class=normal>85</span>
<span class=normal>86</span>
<span class=normal>87</span>
<span class=normal>88</span>
<span class=normal>89</span>
<span class=normal>90</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_index_by_name</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>task_name</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Find item by name and return its index.</span>

<span class=sd>    Returns:</span>
<span class=sd>        QtCore.QModelIndex: Index of item. Is invalid if task is not</span>
<span class=sd>            found by name.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>item</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_items_by_name</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>task_name</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>item</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>QModelIndex</span><span class=p>()</span>
    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>indexFromItem</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.TasksQtModel.get_last_folder_id class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_last_folder_id</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Get last refreshed folder id.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Union[str, None]: Folder id.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/tasks_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_last_folder_id</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get last refreshed folder id.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Union[str, None]: Folder id.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_last_folder_id</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.TasksQtModel.get_last_project_name class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_last_project_name</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Get last refreshed project name.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Union[str, None]: Project name.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/tasks_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>92</span>
<span class=normal>93</span>
<span class=normal>94</span>
<span class=normal>95</span>
<span class=normal>96</span>
<span class=normal>97</span>
<span class=normal>98</span>
<span class=normal>99</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_last_project_name</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get last refreshed project name.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Union[str, None]: Project name.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_last_project_name</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.TasksQtModel.refresh class="doc doc-heading"> <code class="highlight language-python"><span class=n>refresh</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Refresh tasks for last project and folder.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/tasks_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>64</span>
<span class=normal>65</span>
<span class=normal>66</span>
<span class=normal>67</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>refresh</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Refresh tasks for last project and folder.&quot;&quot;&quot;</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_refresh</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_last_project_name</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_last_folder_id</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.TasksQtModel.set_context class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_context</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=n>folder_id</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Set context for which should be tasks showed.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>project_name</code> </td> <td> <code><span title=Union>Union</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Name of project.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>folder_id</code> </td> <td> <code><span title=Union>Union</span>[<span title=str>str</span>, None]</code> </td> <td> <div class=doc-md-description> <p>Folder id.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/tasks_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>69</span>
<span class=normal>70</span>
<span class=normal>71</span>
<span class=normal>72</span>
<span class=normal>73</span>
<span class=normal>74</span>
<span class=normal>75</span>
<span class=normal>76</span>
<span class=normal>77</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_context</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>project_name</span><span class=p>,</span> <span class=n>folder_id</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Set context for which should be tasks showed.</span>

<span class=sd>    Args:</span>
<span class=sd>        project_name (Union[str]): Name of project.</span>
<span class=sd>        folder_id (Union[str, None]): Folder id.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_refresh</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=n>folder_id</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.tools.utils.TasksWidget class="doc doc-heading"> <code>TasksWidget</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=qtpy.QtWidgets.QWidget>QWidget</span></code></p> <p>Tasks widget.</p> <p>Widget that handles tasks view, model and selection.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>controller</code> </td> <td> <code><span title=AbstractWorkfilesFrontend>AbstractWorkfilesFrontend</span></code> </td> <td> <div class=doc-md-description> <p>Workfiles controller.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>parent</code> </td> <td> <code><span title=qtpy.QtWidgets.QWidget>QWidget</span></code> </td> <td> <div class=doc-md-description> <p>Parent widget.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>handle_expected_selection</code> </td> <td> <code><span title=Optional>Optional</span>[<span title=bool>bool</span>]</code> </td> <td> <div class=doc-md-description> <p>Handle expected selection.</p> </div> </td> <td> <code>False</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/tasks_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>346</span>
<span class=normal>347</span>
<span class=normal>348</span>
<span class=normal>349</span>
<span class=normal>350</span>
<span class=normal>351</span>
<span class=normal>352</span>
<span class=normal>353</span>
<span class=normal>354</span>
<span class=normal>355</span>
<span class=normal>356</span>
<span class=normal>357</span>
<span class=normal>358</span>
<span class=normal>359</span>
<span class=normal>360</span>
<span class=normal>361</span>
<span class=normal>362</span>
<span class=normal>363</span>
<span class=normal>364</span>
<span class=normal>365</span>
<span class=normal>366</span>
<span class=normal>367</span>
<span class=normal>368</span>
<span class=normal>369</span>
<span class=normal>370</span>
<span class=normal>371</span>
<span class=normal>372</span>
<span class=normal>373</span>
<span class=normal>374</span>
<span class=normal>375</span>
<span class=normal>376</span>
<span class=normal>377</span>
<span class=normal>378</span>
<span class=normal>379</span>
<span class=normal>380</span>
<span class=normal>381</span>
<span class=normal>382</span>
<span class=normal>383</span>
<span class=normal>384</span>
<span class=normal>385</span>
<span class=normal>386</span>
<span class=normal>387</span>
<span class=normal>388</span>
<span class=normal>389</span>
<span class=normal>390</span>
<span class=normal>391</span>
<span class=normal>392</span>
<span class=normal>393</span>
<span class=normal>394</span>
<span class=normal>395</span>
<span class=normal>396</span>
<span class=normal>397</span>
<span class=normal>398</span>
<span class=normal>399</span>
<span class=normal>400</span>
<span class=normal>401</span>
<span class=normal>402</span>
<span class=normal>403</span>
<span class=normal>404</span>
<span class=normal>405</span>
<span class=normal>406</span>
<span class=normal>407</span>
<span class=normal>408</span>
<span class=normal>409</span>
<span class=normal>410</span>
<span class=normal>411</span>
<span class=normal>412</span>
<span class=normal>413</span>
<span class=normal>414</span>
<span class=normal>415</span>
<span class=normal>416</span>
<span class=normal>417</span>
<span class=normal>418</span>
<span class=normal>419</span>
<span class=normal>420</span>
<span class=normal>421</span>
<span class=normal>422</span>
<span class=normal>423</span>
<span class=normal>424</span>
<span class=normal>425</span>
<span class=normal>426</span>
<span class=normal>427</span>
<span class=normal>428</span>
<span class=normal>429</span>
<span class=normal>430</span>
<span class=normal>431</span>
<span class=normal>432</span>
<span class=normal>433</span>
<span class=normal>434</span>
<span class=normal>435</span>
<span class=normal>436</span>
<span class=normal>437</span>
<span class=normal>438</span>
<span class=normal>439</span>
<span class=normal>440</span>
<span class=normal>441</span>
<span class=normal>442</span>
<span class=normal>443</span>
<span class=normal>444</span>
<span class=normal>445</span>
<span class=normal>446</span>
<span class=normal>447</span>
<span class=normal>448</span>
<span class=normal>449</span>
<span class=normal>450</span>
<span class=normal>451</span>
<span class=normal>452</span>
<span class=normal>453</span>
<span class=normal>454</span>
<span class=normal>455</span>
<span class=normal>456</span>
<span class=normal>457</span>
<span class=normal>458</span>
<span class=normal>459</span>
<span class=normal>460</span>
<span class=normal>461</span>
<span class=normal>462</span>
<span class=normal>463</span>
<span class=normal>464</span>
<span class=normal>465</span>
<span class=normal>466</span>
<span class=normal>467</span>
<span class=normal>468</span>
<span class=normal>469</span>
<span class=normal>470</span>
<span class=normal>471</span>
<span class=normal>472</span>
<span class=normal>473</span>
<span class=normal>474</span>
<span class=normal>475</span>
<span class=normal>476</span>
<span class=normal>477</span>
<span class=normal>478</span>
<span class=normal>479</span>
<span class=normal>480</span>
<span class=normal>481</span>
<span class=normal>482</span>
<span class=normal>483</span>
<span class=normal>484</span>
<span class=normal>485</span>
<span class=normal>486</span>
<span class=normal>487</span>
<span class=normal>488</span>
<span class=normal>489</span>
<span class=normal>490</span>
<span class=normal>491</span>
<span class=normal>492</span>
<span class=normal>493</span>
<span class=normal>494</span>
<span class=normal>495</span>
<span class=normal>496</span>
<span class=normal>497</span>
<span class=normal>498</span>
<span class=normal>499</span>
<span class=normal>500</span>
<span class=normal>501</span>
<span class=normal>502</span>
<span class=normal>503</span>
<span class=normal>504</span>
<span class=normal>505</span>
<span class=normal>506</span>
<span class=normal>507</span>
<span class=normal>508</span>
<span class=normal>509</span>
<span class=normal>510</span>
<span class=normal>511</span>
<span class=normal>512</span>
<span class=normal>513</span>
<span class=normal>514</span>
<span class=normal>515</span>
<span class=normal>516</span>
<span class=normal>517</span>
<span class=normal>518</span>
<span class=normal>519</span>
<span class=normal>520</span>
<span class=normal>521</span>
<span class=normal>522</span>
<span class=normal>523</span>
<span class=normal>524</span>
<span class=normal>525</span>
<span class=normal>526</span>
<span class=normal>527</span>
<span class=normal>528</span>
<span class=normal>529</span>
<span class=normal>530</span>
<span class=normal>531</span>
<span class=normal>532</span>
<span class=normal>533</span>
<span class=normal>534</span>
<span class=normal>535</span>
<span class=normal>536</span>
<span class=normal>537</span>
<span class=normal>538</span>
<span class=normal>539</span>
<span class=normal>540</span>
<span class=normal>541</span>
<span class=normal>542</span>
<span class=normal>543</span>
<span class=normal>544</span>
<span class=normal>545</span>
<span class=normal>546</span>
<span class=normal>547</span>
<span class=normal>548</span>
<span class=normal>549</span>
<span class=normal>550</span>
<span class=normal>551</span>
<span class=normal>552</span>
<span class=normal>553</span>
<span class=normal>554</span>
<span class=normal>555</span>
<span class=normal>556</span>
<span class=normal>557</span>
<span class=normal>558</span>
<span class=normal>559</span>
<span class=normal>560</span>
<span class=normal>561</span>
<span class=normal>562</span>
<span class=normal>563</span>
<span class=normal>564</span>
<span class=normal>565</span>
<span class=normal>566</span>
<span class=normal>567</span>
<span class=normal>568</span>
<span class=normal>569</span>
<span class=normal>570</span>
<span class=normal>571</span>
<span class=normal>572</span>
<span class=normal>573</span>
<span class=normal>574</span>
<span class=normal>575</span>
<span class=normal>576</span>
<span class=normal>577</span>
<span class=normal>578</span>
<span class=normal>579</span>
<span class=normal>580</span>
<span class=normal>581</span>
<span class=normal>582</span>
<span class=normal>583</span>
<span class=normal>584</span>
<span class=normal>585</span>
<span class=normal>586</span>
<span class=normal>587</span>
<span class=normal>588</span>
<span class=normal>589</span>
<span class=normal>590</span>
<span class=normal>591</span>
<span class=normal>592</span>
<span class=normal>593</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>TasksWidget</span><span class=p>(</span><span class=n>QtWidgets</span><span class=o>.</span><span class=n>QWidget</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Tasks widget.</span>

<span class=sd>    Widget that handles tasks view, model and selection.</span>

<span class=sd>    Args:</span>
<span class=sd>        controller (AbstractWorkfilesFrontend): Workfiles controller.</span>
<span class=sd>        parent (QtWidgets.QWidget): Parent widget.</span>
<span class=sd>        handle_expected_selection (Optional[bool]): Handle expected selection.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>refreshed</span> <span class=o>=</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Signal</span><span class=p>()</span>
    <span class=n>selection_changed</span> <span class=o>=</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Signal</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>controller</span><span class=p>,</span> <span class=n>parent</span><span class=p>,</span> <span class=n>handle_expected_selection</span><span class=o>=</span><span class=kc>False</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>parent</span><span class=p>)</span>

        <span class=n>tasks_view</span> <span class=o>=</span> <span class=n>DeselectableTreeView</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
        <span class=n>tasks_view</span><span class=o>.</span><span class=n>setIndentation</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>

        <span class=n>tasks_model</span> <span class=o>=</span> <span class=n>TasksQtModel</span><span class=p>(</span><span class=n>controller</span><span class=p>)</span>
        <span class=n>tasks_proxy_model</span> <span class=o>=</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>QSortFilterProxyModel</span><span class=p>()</span>
        <span class=n>tasks_proxy_model</span><span class=o>.</span><span class=n>setSourceModel</span><span class=p>(</span><span class=n>tasks_model</span><span class=p>)</span>
        <span class=n>tasks_proxy_model</span><span class=o>.</span><span class=n>setSortCaseSensitivity</span><span class=p>(</span><span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>CaseInsensitive</span><span class=p>)</span>

        <span class=n>tasks_view</span><span class=o>.</span><span class=n>setModel</span><span class=p>(</span><span class=n>tasks_proxy_model</span><span class=p>)</span>

        <span class=n>main_layout</span> <span class=o>=</span> <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QHBoxLayout</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
        <span class=n>main_layout</span><span class=o>.</span><span class=n>setContentsMargins</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
        <span class=n>main_layout</span><span class=o>.</span><span class=n>addWidget</span><span class=p>(</span><span class=n>tasks_view</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>

        <span class=n>controller</span><span class=o>.</span><span class=n>register_event_callback</span><span class=p>(</span>
            <span class=s2>&quot;tasks.refresh.finished&quot;</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_on_tasks_refresh_finished</span>
        <span class=p>)</span>
        <span class=n>controller</span><span class=o>.</span><span class=n>register_event_callback</span><span class=p>(</span>
            <span class=s2>&quot;selection.folder.changed&quot;</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_folder_selection_changed</span>
        <span class=p>)</span>
        <span class=n>controller</span><span class=o>.</span><span class=n>register_event_callback</span><span class=p>(</span>
            <span class=s2>&quot;expected_selection_changed&quot;</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_on_expected_selection_change</span>
        <span class=p>)</span>

        <span class=n>selection_model</span> <span class=o>=</span> <span class=n>tasks_view</span><span class=o>.</span><span class=n>selectionModel</span><span class=p>()</span>
        <span class=n>selection_model</span><span class=o>.</span><span class=n>selectionChanged</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_on_selection_change</span><span class=p>)</span>

        <span class=n>tasks_model</span><span class=o>.</span><span class=n>refreshed</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_on_tasks_model_refresh</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_controller</span> <span class=o>=</span> <span class=n>controller</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_tasks_view</span> <span class=o>=</span> <span class=n>tasks_view</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_tasks_model</span> <span class=o>=</span> <span class=n>tasks_model</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_tasks_proxy_model</span> <span class=o>=</span> <span class=n>tasks_proxy_model</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_selected_folder_id</span> <span class=o>=</span> <span class=kc>None</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_handle_expected_selection</span> <span class=o>=</span> <span class=n>handle_expected_selection</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_expected_selection_data</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=k>def</span><span class=w> </span><span class=nf>refresh</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Refresh folders for last selected project.</span>

<span class=sd>        Force to update folders model from controller. This may or may not</span>
<span class=sd>        trigger query from server, that&#39;s based on controller&#39;s cache.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_tasks_model</span><span class=o>.</span><span class=n>refresh</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_selected_task_info</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get selected task info.</span>

<span class=sd>        Example output::</span>

<span class=sd>            {</span>
<span class=sd>                &quot;task_id&quot;: &quot;5e7e3e3e3e3e3e3e3e3e3e3e&quot;,</span>
<span class=sd>                &quot;task_name&quot;: &quot;modeling&quot;,</span>
<span class=sd>                &quot;task_type&quot;: &quot;Modeling&quot;</span>
<span class=sd>            }</span>

<span class=sd>        Returns:</span>
<span class=sd>            dict[str, Union[str, None]]: Task info.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>_</span><span class=p>,</span> <span class=n>task_id</span><span class=p>,</span> <span class=n>task_name</span><span class=p>,</span> <span class=n>task_type</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_selected_item_ids</span><span class=p>()</span>
        <span class=k>return</span> <span class=p>{</span>
            <span class=s2>&quot;task_id&quot;</span><span class=p>:</span> <span class=n>task_id</span><span class=p>,</span>
            <span class=s2>&quot;task_name&quot;</span><span class=p>:</span> <span class=n>task_name</span><span class=p>,</span>
            <span class=s2>&quot;task_type&quot;</span><span class=p>:</span> <span class=n>task_type</span><span class=p>,</span>
        <span class=p>}</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_selected_task_id</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get selected task id.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Union[str, None]: Task id.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_selected_task_info</span><span class=p>()[</span><span class=s2>&quot;task_id&quot;</span><span class=p>]</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_selected_task_name</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get selected task name.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Union[str, None]: Task name.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_selected_task_info</span><span class=p>()[</span><span class=s2>&quot;task_name&quot;</span><span class=p>]</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_selected_task_type</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get selected task type.</span>

<span class=sd>        Returns:</span>
<span class=sd>            Union[str, None]: Task type.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_selected_task_info</span><span class=p>()[</span><span class=s2>&quot;task_type&quot;</span><span class=p>]</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_selected_task</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>task_name</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Set selected task by name.</span>

<span class=sd>        Args:</span>
<span class=sd>            task_name (str): Task name.</span>

<span class=sd>        Returns:</span>
<span class=sd>            bool: Task was selected.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=n>task_name</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_tasks_view</span><span class=o>.</span><span class=n>clearSelection</span><span class=p>()</span>
            <span class=k>return</span> <span class=kc>True</span>

        <span class=k>if</span> <span class=n>task_name</span> <span class=o>==</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_selected_task_name</span><span class=p>():</span>
            <span class=k>return</span> <span class=kc>True</span>
        <span class=n>index</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_tasks_model</span><span class=o>.</span><span class=n>get_index_by_name</span><span class=p>(</span><span class=n>task_name</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>index</span><span class=o>.</span><span class=n>isValid</span><span class=p>():</span>
            <span class=k>return</span> <span class=kc>False</span>

        <span class=n>proxy_index</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_tasks_proxy_model</span><span class=o>.</span><span class=n>mapFromSource</span><span class=p>(</span><span class=n>index</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>proxy_index</span><span class=o>.</span><span class=n>isValid</span><span class=p>():</span>
            <span class=k>return</span> <span class=kc>False</span>

        <span class=n>selection_model</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_folders_view</span><span class=o>.</span><span class=n>selectionModel</span><span class=p>()</span>
        <span class=n>selection_model</span><span class=o>.</span><span class=n>setCurrentIndex</span><span class=p>(</span>
            <span class=n>proxy_index</span><span class=p>,</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>QItemSelectionModel</span><span class=o>.</span><span class=n>SelectCurrent</span>
        <span class=p>)</span>
        <span class=k>return</span> <span class=kc>True</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_on_tasks_refresh_finished</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Tasks were refreshed in controller.</span>

<span class=sd>        Ignore if refresh was triggered by tasks model, or refreshed folder is</span>
<span class=sd>        not the same as currently selected folder.</span>

<span class=sd>        Args:</span>
<span class=sd>            event (Event): Event object.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=c1># Refresh only if current folder id is the same</span>
        <span class=k>if</span> <span class=p>(</span>
            <span class=n>event</span><span class=p>[</span><span class=s2>&quot;sender&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=n>TASKS_MODEL_SENDER_NAME</span>
            <span class=ow>or</span> <span class=n>event</span><span class=p>[</span><span class=s2>&quot;folder_id&quot;</span><span class=p>]</span> <span class=o>!=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_selected_folder_id</span>
        <span class=p>):</span>
            <span class=k>return</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_tasks_model</span><span class=o>.</span><span class=n>set_context</span><span class=p>(</span>
            <span class=n>event</span><span class=p>[</span><span class=s2>&quot;project_name&quot;</span><span class=p>],</span> <span class=bp>self</span><span class=o>.</span><span class=n>_selected_folder_id</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_folder_selection_changed</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_selected_folder_id</span> <span class=o>=</span> <span class=n>event</span><span class=p>[</span><span class=s2>&quot;folder_id&quot;</span><span class=p>]</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_tasks_model</span><span class=o>.</span><span class=n>set_context</span><span class=p>(</span>
            <span class=n>event</span><span class=p>[</span><span class=s2>&quot;project_name&quot;</span><span class=p>],</span> <span class=bp>self</span><span class=o>.</span><span class=n>_selected_folder_id</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_on_tasks_model_refresh</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_set_expected_selection</span><span class=p>():</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_on_selection_change</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_tasks_proxy_model</span><span class=o>.</span><span class=n>sort</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>refreshed</span><span class=o>.</span><span class=n>emit</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_get_selected_item_ids</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=n>selection_model</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_tasks_view</span><span class=o>.</span><span class=n>selectionModel</span><span class=p>()</span>
        <span class=k>for</span> <span class=n>index</span> <span class=ow>in</span> <span class=n>selection_model</span><span class=o>.</span><span class=n>selectedIndexes</span><span class=p>():</span>
            <span class=n>task_id</span> <span class=o>=</span> <span class=n>index</span><span class=o>.</span><span class=n>data</span><span class=p>(</span><span class=n>ITEM_ID_ROLE</span><span class=p>)</span>
            <span class=n>task_name</span> <span class=o>=</span> <span class=n>index</span><span class=o>.</span><span class=n>data</span><span class=p>(</span><span class=n>ITEM_NAME_ROLE</span><span class=p>)</span>
            <span class=n>task_type</span> <span class=o>=</span> <span class=n>index</span><span class=o>.</span><span class=n>data</span><span class=p>(</span><span class=n>TASK_TYPE_ROLE</span><span class=p>)</span>
            <span class=n>parent_id</span> <span class=o>=</span> <span class=n>index</span><span class=o>.</span><span class=n>data</span><span class=p>(</span><span class=n>PARENT_ID_ROLE</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>task_name</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
                <span class=k>return</span> <span class=n>parent_id</span><span class=p>,</span> <span class=n>task_id</span><span class=p>,</span> <span class=n>task_name</span><span class=p>,</span> <span class=n>task_type</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_selected_folder_id</span><span class=p>,</span> <span class=kc>None</span><span class=p>,</span> <span class=kc>None</span><span class=p>,</span> <span class=kc>None</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_on_selection_change</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=c1># Don&#39;t trigger task change during refresh</span>
        <span class=c1>#   - a task was deselected if that happens</span>
        <span class=c1>#   - can cause crash triggered during tasks refreshing</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_tasks_model</span><span class=o>.</span><span class=n>is_refreshing</span><span class=p>:</span>
            <span class=k>return</span>

        <span class=n>parent_id</span><span class=p>,</span> <span class=n>task_id</span><span class=p>,</span> <span class=n>task_name</span><span class=p>,</span> <span class=n>_</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_selected_item_ids</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_controller</span><span class=o>.</span><span class=n>set_selected_task</span><span class=p>(</span><span class=n>task_id</span><span class=p>,</span> <span class=n>task_name</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>selection_changed</span><span class=o>.</span><span class=n>emit</span><span class=p>()</span>

    <span class=c1># Expected selection handling</span>
    <span class=k>def</span><span class=w> </span><span class=nf>_on_expected_selection_change</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_update_expected_selection</span><span class=p>(</span><span class=n>event</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_set_expected_selection</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_handle_expected_selection</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>False</span>

        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_expected_selection_data</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>False</span>
        <span class=n>folder_id</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_expected_selection_data</span><span class=p>[</span><span class=s2>&quot;folder_id&quot;</span><span class=p>]</span>
        <span class=n>task_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_expected_selection_data</span><span class=p>[</span><span class=s2>&quot;task_name&quot;</span><span class=p>]</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_expected_selection_data</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=n>model_folder_id</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_tasks_model</span><span class=o>.</span><span class=n>get_last_folder_id</span><span class=p>()</span>
        <span class=k>if</span> <span class=n>folder_id</span> <span class=o>!=</span> <span class=n>model_folder_id</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>False</span>
        <span class=k>if</span> <span class=n>task_name</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>index</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_tasks_model</span><span class=o>.</span><span class=n>get_index_by_name</span><span class=p>(</span><span class=n>task_name</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>index</span><span class=o>.</span><span class=n>isValid</span><span class=p>():</span>
                <span class=n>proxy_index</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_tasks_proxy_model</span><span class=o>.</span><span class=n>mapFromSource</span><span class=p>(</span><span class=n>index</span><span class=p>)</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_tasks_view</span><span class=o>.</span><span class=n>setCurrentIndex</span><span class=p>(</span><span class=n>proxy_index</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_controller</span><span class=o>.</span><span class=n>expected_task_selected</span><span class=p>(</span><span class=n>folder_id</span><span class=p>,</span> <span class=n>task_name</span><span class=p>)</span>
        <span class=k>return</span> <span class=kc>True</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_update_expected_selection</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>expected_data</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_handle_expected_selection</span><span class=p>:</span>
            <span class=k>return</span>
        <span class=k>if</span> <span class=n>expected_data</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>expected_data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_controller</span><span class=o>.</span><span class=n>get_expected_selection_data</span><span class=p>()</span>

        <span class=n>folder_data</span> <span class=o>=</span> <span class=n>expected_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;folder&quot;</span><span class=p>)</span>
        <span class=n>task_data</span> <span class=o>=</span> <span class=n>expected_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;task&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=p>(</span>
            <span class=ow>not</span> <span class=n>folder_data</span>
            <span class=ow>or</span> <span class=ow>not</span> <span class=n>task_data</span>
            <span class=ow>or</span> <span class=ow>not</span> <span class=n>task_data</span><span class=p>[</span><span class=s2>&quot;current&quot;</span><span class=p>]</span>
        <span class=p>):</span>
            <span class=k>return</span>
        <span class=n>folder_id</span> <span class=o>=</span> <span class=n>folder_data</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>]</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_expected_selection_data</span> <span class=o>=</span> <span class=p>{</span>
            <span class=s2>&quot;task_name&quot;</span><span class=p>:</span> <span class=n>task_data</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>],</span>
            <span class=s2>&quot;folder_id&quot;</span><span class=p>:</span> <span class=n>folder_id</span><span class=p>,</span>
        <span class=p>}</span>
        <span class=n>model_folder_id</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_tasks_model</span><span class=o>.</span><span class=n>get_last_folder_id</span><span class=p>()</span>
        <span class=k>if</span> <span class=n>folder_id</span> <span class=o>!=</span> <span class=n>model_folder_id</span> <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>_tasks_model</span><span class=o>.</span><span class=n>is_refreshing</span><span class=p>:</span>
            <span class=k>return</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_set_expected_selection</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.TasksWidget.get_selected_task_id class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_selected_task_id</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Get selected task id.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Union[str, None]: Task id.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/tasks_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>436</span>
<span class=normal>437</span>
<span class=normal>438</span>
<span class=normal>439</span>
<span class=normal>440</span>
<span class=normal>441</span>
<span class=normal>442</span>
<span class=normal>443</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_selected_task_id</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get selected task id.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Union[str, None]: Task id.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_selected_task_info</span><span class=p>()[</span><span class=s2>&quot;task_id&quot;</span><span class=p>]</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.TasksWidget.get_selected_task_info class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_selected_task_info</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Get selected task info.</p> <p>Example output::</p> <pre><code>{
    "task_id": "5e7e3e3e3e3e3e3e3e3e3e3e",
    "task_name": "modeling",
    "task_type": "Modeling"
}
</code></pre> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>dict[str, Union[str, None]]: Task info.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/tasks_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>414</span>
<span class=normal>415</span>
<span class=normal>416</span>
<span class=normal>417</span>
<span class=normal>418</span>
<span class=normal>419</span>
<span class=normal>420</span>
<span class=normal>421</span>
<span class=normal>422</span>
<span class=normal>423</span>
<span class=normal>424</span>
<span class=normal>425</span>
<span class=normal>426</span>
<span class=normal>427</span>
<span class=normal>428</span>
<span class=normal>429</span>
<span class=normal>430</span>
<span class=normal>431</span>
<span class=normal>432</span>
<span class=normal>433</span>
<span class=normal>434</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_selected_task_info</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get selected task info.</span>

<span class=sd>    Example output::</span>

<span class=sd>        {</span>
<span class=sd>            &quot;task_id&quot;: &quot;5e7e3e3e3e3e3e3e3e3e3e3e&quot;,</span>
<span class=sd>            &quot;task_name&quot;: &quot;modeling&quot;,</span>
<span class=sd>            &quot;task_type&quot;: &quot;Modeling&quot;</span>
<span class=sd>        }</span>

<span class=sd>    Returns:</span>
<span class=sd>        dict[str, Union[str, None]]: Task info.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>_</span><span class=p>,</span> <span class=n>task_id</span><span class=p>,</span> <span class=n>task_name</span><span class=p>,</span> <span class=n>task_type</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_selected_item_ids</span><span class=p>()</span>
    <span class=k>return</span> <span class=p>{</span>
        <span class=s2>&quot;task_id&quot;</span><span class=p>:</span> <span class=n>task_id</span><span class=p>,</span>
        <span class=s2>&quot;task_name&quot;</span><span class=p>:</span> <span class=n>task_name</span><span class=p>,</span>
        <span class=s2>&quot;task_type&quot;</span><span class=p>:</span> <span class=n>task_type</span><span class=p>,</span>
    <span class=p>}</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.TasksWidget.get_selected_task_name class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_selected_task_name</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Get selected task name.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Union[str, None]: Task name.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/tasks_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>445</span>
<span class=normal>446</span>
<span class=normal>447</span>
<span class=normal>448</span>
<span class=normal>449</span>
<span class=normal>450</span>
<span class=normal>451</span>
<span class=normal>452</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_selected_task_name</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get selected task name.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Union[str, None]: Task name.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_selected_task_info</span><span class=p>()[</span><span class=s2>&quot;task_name&quot;</span><span class=p>]</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.TasksWidget.get_selected_task_type class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_selected_task_type</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Get selected task type.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Union[str, None]: Task type.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/tasks_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>454</span>
<span class=normal>455</span>
<span class=normal>456</span>
<span class=normal>457</span>
<span class=normal>458</span>
<span class=normal>459</span>
<span class=normal>460</span>
<span class=normal>461</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_selected_task_type</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get selected task type.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Union[str, None]: Task type.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_selected_task_info</span><span class=p>()[</span><span class=s2>&quot;task_type&quot;</span><span class=p>]</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.TasksWidget.refresh class="doc doc-heading"> <code class="highlight language-python"><span class=n>refresh</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Refresh folders for last selected project.</p> <p>Force to update folders model from controller. This may or may not trigger query from server, that's based on controller's cache.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/tasks_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>405</span>
<span class=normal>406</span>
<span class=normal>407</span>
<span class=normal>408</span>
<span class=normal>409</span>
<span class=normal>410</span>
<span class=normal>411</span>
<span class=normal>412</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>refresh</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Refresh folders for last selected project.</span>

<span class=sd>    Force to update folders model from controller. This may or may not</span>
<span class=sd>    trigger query from server, that&#39;s based on controller&#39;s cache.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_tasks_model</span><span class=o>.</span><span class=n>refresh</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.TasksWidget.set_selected_task class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_selected_task</span><span class=p>(</span><span class=n>task_name</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Set selected task by name.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>task_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Task name.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>bool</code></td> <td> </td> <td> <div class=doc-md-description> <p>Task was selected.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/tasks_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>463</span>
<span class=normal>464</span>
<span class=normal>465</span>
<span class=normal>466</span>
<span class=normal>467</span>
<span class=normal>468</span>
<span class=normal>469</span>
<span class=normal>470</span>
<span class=normal>471</span>
<span class=normal>472</span>
<span class=normal>473</span>
<span class=normal>474</span>
<span class=normal>475</span>
<span class=normal>476</span>
<span class=normal>477</span>
<span class=normal>478</span>
<span class=normal>479</span>
<span class=normal>480</span>
<span class=normal>481</span>
<span class=normal>482</span>
<span class=normal>483</span>
<span class=normal>484</span>
<span class=normal>485</span>
<span class=normal>486</span>
<span class=normal>487</span>
<span class=normal>488</span>
<span class=normal>489</span>
<span class=normal>490</span>
<span class=normal>491</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_selected_task</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>task_name</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Set selected task by name.</span>

<span class=sd>    Args:</span>
<span class=sd>        task_name (str): Task name.</span>

<span class=sd>    Returns:</span>
<span class=sd>        bool: Task was selected.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=n>task_name</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_tasks_view</span><span class=o>.</span><span class=n>clearSelection</span><span class=p>()</span>
        <span class=k>return</span> <span class=kc>True</span>

    <span class=k>if</span> <span class=n>task_name</span> <span class=o>==</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_selected_task_name</span><span class=p>():</span>
        <span class=k>return</span> <span class=kc>True</span>
    <span class=n>index</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_tasks_model</span><span class=o>.</span><span class=n>get_index_by_name</span><span class=p>(</span><span class=n>task_name</span><span class=p>)</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>index</span><span class=o>.</span><span class=n>isValid</span><span class=p>():</span>
        <span class=k>return</span> <span class=kc>False</span>

    <span class=n>proxy_index</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_tasks_proxy_model</span><span class=o>.</span><span class=n>mapFromSource</span><span class=p>(</span><span class=n>index</span><span class=p>)</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>proxy_index</span><span class=o>.</span><span class=n>isValid</span><span class=p>():</span>
        <span class=k>return</span> <span class=kc>False</span>

    <span class=n>selection_model</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_folders_view</span><span class=o>.</span><span class=n>selectionModel</span><span class=p>()</span>
    <span class=n>selection_model</span><span class=o>.</span><span class=n>setCurrentIndex</span><span class=p>(</span>
        <span class=n>proxy_index</span><span class=p>,</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>QItemSelectionModel</span><span class=o>.</span><span class=n>SelectCurrent</span>
    <span class=p>)</span>
    <span class=k>return</span> <span class=kc>True</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.tools.utils.ThumbnailPainterWidget class="doc doc-heading"> <code>ThumbnailPainterWidget</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=qtpy.QtWidgets.QWidget>QWidget</span></code></p> <p>Widget for painting of thumbnails.</p> <p>The widget use is to paint thumbnail or multiple thumbnails in a defined area. Is not meant to show them in a grid but in overlay.</p> <p>It is expected that there is a logic that will provide thumbnails to paint and set them using 'set_current_thumbnails' or 'set_current_thumbnail_paths'.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/thumbnail_paint_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>  9</span>
<span class=normal> 10</span>
<span class=normal> 11</span>
<span class=normal> 12</span>
<span class=normal> 13</span>
<span class=normal> 14</span>
<span class=normal> 15</span>
<span class=normal> 16</span>
<span class=normal> 17</span>
<span class=normal> 18</span>
<span class=normal> 19</span>
<span class=normal> 20</span>
<span class=normal> 21</span>
<span class=normal> 22</span>
<span class=normal> 23</span>
<span class=normal> 24</span>
<span class=normal> 25</span>
<span class=normal> 26</span>
<span class=normal> 27</span>
<span class=normal> 28</span>
<span class=normal> 29</span>
<span class=normal> 30</span>
<span class=normal> 31</span>
<span class=normal> 32</span>
<span class=normal> 33</span>
<span class=normal> 34</span>
<span class=normal> 35</span>
<span class=normal> 36</span>
<span class=normal> 37</span>
<span class=normal> 38</span>
<span class=normal> 39</span>
<span class=normal> 40</span>
<span class=normal> 41</span>
<span class=normal> 42</span>
<span class=normal> 43</span>
<span class=normal> 44</span>
<span class=normal> 45</span>
<span class=normal> 46</span>
<span class=normal> 47</span>
<span class=normal> 48</span>
<span class=normal> 49</span>
<span class=normal> 50</span>
<span class=normal> 51</span>
<span class=normal> 52</span>
<span class=normal> 53</span>
<span class=normal> 54</span>
<span class=normal> 55</span>
<span class=normal> 56</span>
<span class=normal> 57</span>
<span class=normal> 58</span>
<span class=normal> 59</span>
<span class=normal> 60</span>
<span class=normal> 61</span>
<span class=normal> 62</span>
<span class=normal> 63</span>
<span class=normal> 64</span>
<span class=normal> 65</span>
<span class=normal> 66</span>
<span class=normal> 67</span>
<span class=normal> 68</span>
<span class=normal> 69</span>
<span class=normal> 70</span>
<span class=normal> 71</span>
<span class=normal> 72</span>
<span class=normal> 73</span>
<span class=normal> 74</span>
<span class=normal> 75</span>
<span class=normal> 76</span>
<span class=normal> 77</span>
<span class=normal> 78</span>
<span class=normal> 79</span>
<span class=normal> 80</span>
<span class=normal> 81</span>
<span class=normal> 82</span>
<span class=normal> 83</span>
<span class=normal> 84</span>
<span class=normal> 85</span>
<span class=normal> 86</span>
<span class=normal> 87</span>
<span class=normal> 88</span>
<span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span>
<span class=normal>277</span>
<span class=normal>278</span>
<span class=normal>279</span>
<span class=normal>280</span>
<span class=normal>281</span>
<span class=normal>282</span>
<span class=normal>283</span>
<span class=normal>284</span>
<span class=normal>285</span>
<span class=normal>286</span>
<span class=normal>287</span>
<span class=normal>288</span>
<span class=normal>289</span>
<span class=normal>290</span>
<span class=normal>291</span>
<span class=normal>292</span>
<span class=normal>293</span>
<span class=normal>294</span>
<span class=normal>295</span>
<span class=normal>296</span>
<span class=normal>297</span>
<span class=normal>298</span>
<span class=normal>299</span>
<span class=normal>300</span>
<span class=normal>301</span>
<span class=normal>302</span>
<span class=normal>303</span>
<span class=normal>304</span>
<span class=normal>305</span>
<span class=normal>306</span>
<span class=normal>307</span>
<span class=normal>308</span>
<span class=normal>309</span>
<span class=normal>310</span>
<span class=normal>311</span>
<span class=normal>312</span>
<span class=normal>313</span>
<span class=normal>314</span>
<span class=normal>315</span>
<span class=normal>316</span>
<span class=normal>317</span>
<span class=normal>318</span>
<span class=normal>319</span>
<span class=normal>320</span>
<span class=normal>321</span>
<span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span>
<span class=normal>325</span>
<span class=normal>326</span>
<span class=normal>327</span>
<span class=normal>328</span>
<span class=normal>329</span>
<span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span>
<span class=normal>334</span>
<span class=normal>335</span>
<span class=normal>336</span>
<span class=normal>337</span>
<span class=normal>338</span>
<span class=normal>339</span>
<span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span>
<span class=normal>344</span>
<span class=normal>345</span>
<span class=normal>346</span>
<span class=normal>347</span>
<span class=normal>348</span>
<span class=normal>349</span>
<span class=normal>350</span>
<span class=normal>351</span>
<span class=normal>352</span>
<span class=normal>353</span>
<span class=normal>354</span>
<span class=normal>355</span>
<span class=normal>356</span>
<span class=normal>357</span>
<span class=normal>358</span>
<span class=normal>359</span>
<span class=normal>360</span>
<span class=normal>361</span>
<span class=normal>362</span>
<span class=normal>363</span>
<span class=normal>364</span>
<span class=normal>365</span>
<span class=normal>366</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>ThumbnailPainterWidget</span><span class=p>(</span><span class=n>QtWidgets</span><span class=o>.</span><span class=n>QWidget</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Widget for painting of thumbnails.</span>

<span class=sd>    The widget use is to paint thumbnail or multiple thumbnails in a defined</span>
<span class=sd>    area. Is not meant to show them in a grid but in overlay.</span>

<span class=sd>    It is expected that there is a logic that will provide thumbnails to</span>
<span class=sd>    paint and set them using &#39;set_current_thumbnails&#39; or</span>
<span class=sd>    &#39;set_current_thumbnail_paths&#39;.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>width_ratio</span> <span class=o>=</span> <span class=mf>3.0</span>
    <span class=n>height_ratio</span> <span class=o>=</span> <span class=mf>2.0</span>
    <span class=n>border_width</span> <span class=o>=</span> <span class=mi>1</span>
    <span class=n>max_thumbnails</span> <span class=o>=</span> <span class=mi>3</span>
    <span class=n>offset_sep</span> <span class=o>=</span> <span class=mi>4</span>
    <span class=n>checker_boxes_count</span> <span class=o>=</span> <span class=mi>20</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>parent</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>ThumbnailPainterWidget</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>parent</span><span class=p>)</span>

        <span class=n>border_color</span> <span class=o>=</span> <span class=n>get_objected_colors</span><span class=p>(</span><span class=s2>&quot;bg-buttons&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>get_qcolor</span><span class=p>()</span>
        <span class=n>thumbnail_bg_color</span> <span class=o>=</span> <span class=n>get_objected_colors</span><span class=p>(</span><span class=s2>&quot;bg-view&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>get_qcolor</span><span class=p>()</span>

        <span class=n>default_image</span> <span class=o>=</span> <span class=n>get_image</span><span class=p>(</span><span class=s2>&quot;thumbnail.png&quot;</span><span class=p>)</span>
        <span class=n>default_pix</span> <span class=o>=</span> <span class=n>paint_image_with_color</span><span class=p>(</span><span class=n>default_image</span><span class=p>,</span> <span class=n>border_color</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_border_color</span> <span class=o>=</span> <span class=n>border_color</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_thumbnail_bg_color</span> <span class=o>=</span> <span class=n>thumbnail_bg_color</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_default_pix</span> <span class=o>=</span> <span class=n>default_pix</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_cached_pix</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_current_pixes</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_has_pixes</span> <span class=o>=</span> <span class=kc>False</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_bg_color</span> <span class=o>=</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>transparent</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_use_checker</span> <span class=o>=</span> <span class=kc>True</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_checker_color_1</span> <span class=o>=</span> <span class=n>QtGui</span><span class=o>.</span><span class=n>QColor</span><span class=p>(</span><span class=mi>89</span><span class=p>,</span> <span class=mi>89</span><span class=p>,</span> <span class=mi>89</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_checker_color_2</span> <span class=o>=</span> <span class=n>QtGui</span><span class=o>.</span><span class=n>QColor</span><span class=p>(</span><span class=mi>188</span><span class=p>,</span> <span class=mi>187</span><span class=p>,</span> <span class=mi>187</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_background_color</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>color</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_bg_color</span> <span class=o>=</span> <span class=n>color</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>repaint</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_use_checkboard</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>use_checker</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_use_checker</span> <span class=ow>is</span> <span class=n>use_checker</span><span class=p>:</span>
            <span class=k>return</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_use_checker</span> <span class=o>=</span> <span class=n>use_checker</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>repaint</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_checker_colors</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>color_1</span><span class=p>,</span> <span class=n>color_2</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_checker_color_1</span> <span class=o>=</span> <span class=n>color_1</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_checker_color_2</span> <span class=o>=</span> <span class=n>color_2</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>repaint</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_border_color</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>color</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Change border color.</span>

<span class=sd>        Args:</span>
<span class=sd>            color (QtGui.QColor): Color to set.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_border_color</span> <span class=o>=</span> <span class=n>color</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_default_pix</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>clear_cache</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_thumbnail_bg_color</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>color</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Change background color.</span>

<span class=sd>        Args:</span>
<span class=sd>            color (QtGui.QColor): Color to set.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_thumbnail_bg_color</span> <span class=o>=</span> <span class=n>color</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>clear_cache</span><span class=p>()</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>has_pixes</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Has set thumbnails.</span>

<span class=sd>        Returns:</span>
<span class=sd>            bool: True if widget has thumbnails to paint.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_has_pixes</span>

    <span class=k>def</span><span class=w> </span><span class=nf>clear_cache</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Clear cache of resized thumbnails and repaint widget.&quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_cached_pix</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>repaint</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_current_thumbnails</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>pixmaps</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Set current thumbnails.</span>

<span class=sd>        Args:</span>
<span class=sd>            pixmaps (Optional[List[QtGui.QPixmap]]): List of pixmaps.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_current_pixes</span> <span class=o>=</span> <span class=n>pixmaps</span> <span class=ow>or</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_has_pixes</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_pixes</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>clear_cache</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_current_thumbnail_paths</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>thumbnail_paths</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Set current thumbnails.</span>

<span class=sd>        Set current thumbnails using paths to a files.</span>

<span class=sd>        Args:</span>
<span class=sd>            thumbnail_paths (Optional[List[str]]): List of paths to thumbnail</span>
<span class=sd>                sources.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>pixes</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>if</span> <span class=n>thumbnail_paths</span><span class=p>:</span>
            <span class=k>for</span> <span class=n>thumbnail_path</span> <span class=ow>in</span> <span class=n>thumbnail_paths</span><span class=p>:</span>
                <span class=n>pixes</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>QtGui</span><span class=o>.</span><span class=n>QPixmap</span><span class=p>(</span><span class=n>thumbnail_path</span><span class=p>))</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>set_current_thumbnails</span><span class=p>(</span><span class=n>pixes</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>paintEvent</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_cached_pix</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_cache_pix</span><span class=p>()</span>

        <span class=n>painter</span> <span class=o>=</span> <span class=n>QtGui</span><span class=o>.</span><span class=n>QPainter</span><span class=p>()</span>
        <span class=n>painter</span><span class=o>.</span><span class=n>begin</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
        <span class=n>painter</span><span class=o>.</span><span class=n>setRenderHint</span><span class=p>(</span><span class=n>QtGui</span><span class=o>.</span><span class=n>QPainter</span><span class=o>.</span><span class=n>Antialiasing</span><span class=p>)</span>
        <span class=n>painter</span><span class=o>.</span><span class=n>drawPixmap</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_cached_pix</span><span class=p>)</span>
        <span class=n>painter</span><span class=o>.</span><span class=n>end</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>resizeEvent</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_cached_pix</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>ThumbnailPainterWidget</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>resizeEvent</span><span class=p>(</span><span class=n>event</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_get_default_pix</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_default_pix</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>default_image</span> <span class=o>=</span> <span class=n>get_image</span><span class=p>(</span><span class=s2>&quot;thumbnail&quot;</span><span class=p>)</span>
            <span class=n>default_pix</span> <span class=o>=</span> <span class=n>paint_image_with_color</span><span class=p>(</span>
                <span class=n>default_image</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>_border_color</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_default_pix</span> <span class=o>=</span> <span class=n>default_pix</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_default_pix</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_paint_tile</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>width</span><span class=p>,</span> <span class=n>height</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_use_checker</span><span class=p>:</span>
            <span class=n>tile_pix</span> <span class=o>=</span> <span class=n>QtGui</span><span class=o>.</span><span class=n>QPixmap</span><span class=p>(</span><span class=n>width</span><span class=p>,</span> <span class=n>width</span><span class=p>)</span>
            <span class=n>tile_pix</span><span class=o>.</span><span class=n>fill</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_bg_color</span><span class=p>)</span>
            <span class=k>return</span> <span class=n>tile_pix</span>

        <span class=n>checker_size</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=nb>float</span><span class=p>(</span><span class=n>width</span><span class=p>)</span> <span class=o>/</span> <span class=bp>self</span><span class=o>.</span><span class=n>checker_boxes_count</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>checker_size</span> <span class=o>&lt;</span> <span class=mi>1</span><span class=p>:</span>
            <span class=n>checker_size</span> <span class=o>=</span> <span class=mi>1</span>

        <span class=n>checker_pix</span> <span class=o>=</span> <span class=n>QtGui</span><span class=o>.</span><span class=n>QPixmap</span><span class=p>(</span><span class=n>checker_size</span> <span class=o>*</span> <span class=mi>2</span><span class=p>,</span> <span class=n>checker_size</span> <span class=o>*</span> <span class=mi>2</span><span class=p>)</span>
        <span class=n>checker_pix</span><span class=o>.</span><span class=n>fill</span><span class=p>(</span><span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>transparent</span><span class=p>)</span>
        <span class=n>checker_painter</span> <span class=o>=</span> <span class=n>QtGui</span><span class=o>.</span><span class=n>QPainter</span><span class=p>()</span>
        <span class=n>checker_painter</span><span class=o>.</span><span class=n>begin</span><span class=p>(</span><span class=n>checker_pix</span><span class=p>)</span>
        <span class=n>checker_painter</span><span class=o>.</span><span class=n>setPen</span><span class=p>(</span><span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>NoPen</span><span class=p>)</span>
        <span class=n>checker_painter</span><span class=o>.</span><span class=n>setBrush</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_checker_color_1</span><span class=p>)</span>
        <span class=n>checker_painter</span><span class=o>.</span><span class=n>drawRect</span><span class=p>(</span>
            <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=n>checker_pix</span><span class=o>.</span><span class=n>width</span><span class=p>(),</span> <span class=n>checker_pix</span><span class=o>.</span><span class=n>height</span><span class=p>()</span>
        <span class=p>)</span>
        <span class=n>checker_painter</span><span class=o>.</span><span class=n>setBrush</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_checker_color_2</span><span class=p>)</span>
        <span class=n>checker_painter</span><span class=o>.</span><span class=n>drawRect</span><span class=p>(</span>
            <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=n>checker_size</span><span class=p>,</span> <span class=n>checker_size</span>
        <span class=p>)</span>
        <span class=n>checker_painter</span><span class=o>.</span><span class=n>drawRect</span><span class=p>(</span>
            <span class=n>checker_size</span><span class=p>,</span> <span class=n>checker_size</span><span class=p>,</span> <span class=n>checker_size</span><span class=p>,</span> <span class=n>checker_size</span>
        <span class=p>)</span>
        <span class=n>checker_painter</span><span class=o>.</span><span class=n>end</span><span class=p>()</span>
        <span class=k>return</span> <span class=n>checker_pix</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_paint_default_pix</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>pix_width</span><span class=p>,</span> <span class=n>pix_height</span><span class=p>):</span>
        <span class=n>full_border_width</span> <span class=o>=</span> <span class=mi>2</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>border_width</span>
        <span class=n>width</span> <span class=o>=</span> <span class=n>pix_width</span> <span class=o>-</span> <span class=n>full_border_width</span>
        <span class=n>height</span> <span class=o>=</span> <span class=n>pix_height</span> <span class=o>-</span> <span class=n>full_border_width</span>
        <span class=k>if</span> <span class=n>width</span> <span class=o>&gt;</span> <span class=mi>100</span><span class=p>:</span>
            <span class=n>width</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>width</span> <span class=o>*</span> <span class=mf>0.6</span><span class=p>)</span>
            <span class=n>height</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>height</span> <span class=o>*</span> <span class=mf>0.6</span><span class=p>)</span>

        <span class=n>scaled_pix</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_default_pix</span><span class=p>()</span><span class=o>.</span><span class=n>scaled</span><span class=p>(</span>
            <span class=n>width</span><span class=p>,</span>
            <span class=n>height</span><span class=p>,</span>
            <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>KeepAspectRatio</span><span class=p>,</span>
            <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>SmoothTransformation</span>
        <span class=p>)</span>
        <span class=n>pos_x</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span>
            <span class=p>(</span><span class=n>pix_width</span> <span class=o>-</span> <span class=n>scaled_pix</span><span class=o>.</span><span class=n>width</span><span class=p>())</span> <span class=o>/</span> <span class=mi>2</span>
        <span class=p>)</span>
        <span class=n>pos_y</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span>
            <span class=p>(</span><span class=n>pix_height</span> <span class=o>-</span> <span class=n>scaled_pix</span><span class=o>.</span><span class=n>height</span><span class=p>())</span> <span class=o>/</span> <span class=mi>2</span>
        <span class=p>)</span>
        <span class=n>new_pix</span> <span class=o>=</span> <span class=n>QtGui</span><span class=o>.</span><span class=n>QPixmap</span><span class=p>(</span><span class=n>pix_width</span><span class=p>,</span> <span class=n>pix_height</span><span class=p>)</span>
        <span class=n>new_pix</span><span class=o>.</span><span class=n>fill</span><span class=p>(</span><span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>transparent</span><span class=p>)</span>
        <span class=n>pix_painter</span> <span class=o>=</span> <span class=n>QtGui</span><span class=o>.</span><span class=n>QPainter</span><span class=p>()</span>
        <span class=n>pix_painter</span><span class=o>.</span><span class=n>begin</span><span class=p>(</span><span class=n>new_pix</span><span class=p>)</span>
        <span class=n>render_hints</span> <span class=o>=</span> <span class=p>(</span>
            <span class=n>QtGui</span><span class=o>.</span><span class=n>QPainter</span><span class=o>.</span><span class=n>Antialiasing</span>
            <span class=o>|</span> <span class=n>QtGui</span><span class=o>.</span><span class=n>QPainter</span><span class=o>.</span><span class=n>SmoothPixmapTransform</span>
        <span class=p>)</span>
        <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>QtGui</span><span class=o>.</span><span class=n>QPainter</span><span class=p>,</span> <span class=s2>&quot;HighQualityAntialiasing&quot;</span><span class=p>):</span>
            <span class=n>render_hints</span> <span class=o>|=</span> <span class=n>QtGui</span><span class=o>.</span><span class=n>QPainter</span><span class=o>.</span><span class=n>HighQualityAntialiasing</span>

        <span class=n>pix_painter</span><span class=o>.</span><span class=n>setRenderHints</span><span class=p>(</span><span class=n>render_hints</span><span class=p>)</span>
        <span class=n>pix_painter</span><span class=o>.</span><span class=n>drawPixmap</span><span class=p>(</span><span class=n>pos_x</span><span class=p>,</span> <span class=n>pos_y</span><span class=p>,</span> <span class=n>scaled_pix</span><span class=p>)</span>
        <span class=n>pix_painter</span><span class=o>.</span><span class=n>end</span><span class=p>()</span>
        <span class=k>return</span> <span class=n>new_pix</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_draw_thumbnails</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>thumbnails</span><span class=p>,</span> <span class=n>pix_width</span><span class=p>,</span> <span class=n>pix_height</span><span class=p>):</span>
        <span class=n>full_border_width</span> <span class=o>=</span> <span class=mi>2</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>border_width</span>

        <span class=n>checker_pix</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_paint_tile</span><span class=p>(</span><span class=n>pix_width</span><span class=p>,</span> <span class=n>pix_height</span><span class=p>)</span>

        <span class=n>backgrounded_images</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>for</span> <span class=n>src_pix</span> <span class=ow>in</span> <span class=n>thumbnails</span><span class=p>:</span>
            <span class=n>scaled_pix</span> <span class=o>=</span> <span class=n>src_pix</span><span class=o>.</span><span class=n>scaled</span><span class=p>(</span>
                <span class=n>pix_width</span> <span class=o>-</span> <span class=n>full_border_width</span><span class=p>,</span>
                <span class=n>pix_height</span> <span class=o>-</span> <span class=n>full_border_width</span><span class=p>,</span>
                <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>KeepAspectRatio</span><span class=p>,</span>
                <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>SmoothTransformation</span>
            <span class=p>)</span>
            <span class=n>pos_x</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span>
                <span class=p>(</span><span class=n>pix_width</span> <span class=o>-</span> <span class=n>scaled_pix</span><span class=o>.</span><span class=n>width</span><span class=p>())</span> <span class=o>/</span> <span class=mi>2</span>
            <span class=p>)</span>
            <span class=n>pos_y</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span>
                <span class=p>(</span><span class=n>pix_height</span> <span class=o>-</span> <span class=n>scaled_pix</span><span class=o>.</span><span class=n>height</span><span class=p>())</span> <span class=o>/</span> <span class=mi>2</span>
            <span class=p>)</span>

            <span class=n>new_pix</span> <span class=o>=</span> <span class=n>QtGui</span><span class=o>.</span><span class=n>QPixmap</span><span class=p>(</span><span class=n>pix_width</span><span class=p>,</span> <span class=n>pix_height</span><span class=p>)</span>
            <span class=n>new_pix</span><span class=o>.</span><span class=n>fill</span><span class=p>(</span><span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>transparent</span><span class=p>)</span>
            <span class=n>pix_painter</span> <span class=o>=</span> <span class=n>QtGui</span><span class=o>.</span><span class=n>QPainter</span><span class=p>()</span>
            <span class=n>pix_painter</span><span class=o>.</span><span class=n>begin</span><span class=p>(</span><span class=n>new_pix</span><span class=p>)</span>
            <span class=n>render_hints</span> <span class=o>=</span> <span class=p>(</span>
                <span class=n>QtGui</span><span class=o>.</span><span class=n>QPainter</span><span class=o>.</span><span class=n>Antialiasing</span>
                <span class=o>|</span> <span class=n>QtGui</span><span class=o>.</span><span class=n>QPainter</span><span class=o>.</span><span class=n>SmoothPixmapTransform</span>
            <span class=p>)</span>
            <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>QtGui</span><span class=o>.</span><span class=n>QPainter</span><span class=p>,</span> <span class=s2>&quot;HighQualityAntialiasing&quot;</span><span class=p>):</span>
                <span class=n>render_hints</span> <span class=o>|=</span> <span class=n>QtGui</span><span class=o>.</span><span class=n>QPainter</span><span class=o>.</span><span class=n>HighQualityAntialiasing</span>
            <span class=n>pix_painter</span><span class=o>.</span><span class=n>setRenderHints</span><span class=p>(</span><span class=n>render_hints</span><span class=p>)</span>

            <span class=n>tiled_rect</span> <span class=o>=</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>QRectF</span><span class=p>(</span>
                <span class=n>pos_x</span><span class=p>,</span> <span class=n>pos_y</span><span class=p>,</span> <span class=n>scaled_pix</span><span class=o>.</span><span class=n>width</span><span class=p>(),</span> <span class=n>scaled_pix</span><span class=o>.</span><span class=n>height</span><span class=p>()</span>
            <span class=p>)</span>
            <span class=n>pix_painter</span><span class=o>.</span><span class=n>drawTiledPixmap</span><span class=p>(</span>
                <span class=n>tiled_rect</span><span class=p>,</span>
                <span class=n>checker_pix</span><span class=p>,</span>
                <span class=n>QtCore</span><span class=o>.</span><span class=n>QPointF</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>)</span>
            <span class=p>)</span>
            <span class=n>pix_painter</span><span class=o>.</span><span class=n>drawPixmap</span><span class=p>(</span><span class=n>pos_x</span><span class=p>,</span> <span class=n>pos_y</span><span class=p>,</span> <span class=n>scaled_pix</span><span class=p>)</span>
            <span class=n>pix_painter</span><span class=o>.</span><span class=n>end</span><span class=p>()</span>
            <span class=n>backgrounded_images</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>new_pix</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>backgrounded_images</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_paint_dash_line</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>painter</span><span class=p>,</span> <span class=n>rect</span><span class=p>):</span>
        <span class=n>pen</span> <span class=o>=</span> <span class=n>QtGui</span><span class=o>.</span><span class=n>QPen</span><span class=p>()</span>
        <span class=n>pen</span><span class=o>.</span><span class=n>setWidth</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
        <span class=n>pen</span><span class=o>.</span><span class=n>setBrush</span><span class=p>(</span><span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>darkGray</span><span class=p>)</span>
        <span class=n>pen</span><span class=o>.</span><span class=n>setStyle</span><span class=p>(</span><span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>DashLine</span><span class=p>)</span>

        <span class=n>new_rect</span> <span class=o>=</span> <span class=n>rect</span><span class=o>.</span><span class=n>adjusted</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span><span class=p>)</span>
        <span class=n>painter</span><span class=o>.</span><span class=n>setPen</span><span class=p>(</span><span class=n>pen</span><span class=p>)</span>
        <span class=n>painter</span><span class=o>.</span><span class=n>setBrush</span><span class=p>(</span><span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>transparent</span><span class=p>)</span>
        <span class=c1># painter.drawRect(rect)</span>
        <span class=n>painter</span><span class=o>.</span><span class=n>drawRect</span><span class=p>(</span><span class=n>new_rect</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_cache_pix</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=n>rect</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>rect</span><span class=p>()</span>
        <span class=n>rect_width</span> <span class=o>=</span> <span class=n>rect</span><span class=o>.</span><span class=n>width</span><span class=p>()</span>
        <span class=n>rect_height</span> <span class=o>=</span> <span class=n>rect</span><span class=o>.</span><span class=n>height</span><span class=p>()</span>

        <span class=n>pix_x_offset</span> <span class=o>=</span> <span class=mi>0</span>
        <span class=n>pix_y_offset</span> <span class=o>=</span> <span class=mi>0</span>
        <span class=n>expected_height</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span>
            <span class=p>(</span><span class=n>rect_width</span> <span class=o>/</span> <span class=bp>self</span><span class=o>.</span><span class=n>width_ratio</span><span class=p>)</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>height_ratio</span>
        <span class=p>)</span>
        <span class=k>if</span> <span class=n>expected_height</span> <span class=o>&gt;</span> <span class=n>rect_height</span><span class=p>:</span>
            <span class=n>expected_height</span> <span class=o>=</span> <span class=n>rect_height</span>
            <span class=n>expected_width</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span>
                <span class=p>(</span><span class=n>rect_height</span> <span class=o>/</span> <span class=bp>self</span><span class=o>.</span><span class=n>height_ratio</span><span class=p>)</span> <span class=o>*</span> <span class=bp>self</span><span class=o>.</span><span class=n>width_ratio</span>
            <span class=p>)</span>
            <span class=n>pix_x_offset</span> <span class=o>=</span> <span class=p>(</span><span class=n>rect_width</span> <span class=o>-</span> <span class=n>expected_width</span><span class=p>)</span> <span class=o>/</span> <span class=mi>2</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>expected_width</span> <span class=o>=</span> <span class=n>rect_width</span>
            <span class=n>pix_y_offset</span> <span class=o>=</span> <span class=p>(</span><span class=n>rect_height</span> <span class=o>-</span> <span class=n>expected_height</span><span class=p>)</span> <span class=o>/</span> <span class=mi>2</span>

        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_pixes</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>used_default_pix</span> <span class=o>=</span> <span class=kc>True</span>
            <span class=n>pixes_to_draw</span> <span class=o>=</span> <span class=kc>None</span>
            <span class=n>pixes_len</span> <span class=o>=</span> <span class=mi>1</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>used_default_pix</span> <span class=o>=</span> <span class=kc>False</span>
            <span class=n>pixes_to_draw</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_pixes</span>
            <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>pixes_to_draw</span><span class=p>)</span> <span class=o>&gt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>max_thumbnails</span><span class=p>:</span>
                <span class=n>pixes_to_draw</span> <span class=o>=</span> <span class=n>pixes_to_draw</span><span class=p>[:</span><span class=o>-</span><span class=bp>self</span><span class=o>.</span><span class=n>max_thumbnails</span><span class=p>]</span>
            <span class=n>pixes_len</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>pixes_to_draw</span><span class=p>)</span>

        <span class=n>width_offset</span><span class=p>,</span> <span class=n>height_offset</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_pix_offset_size</span><span class=p>(</span>
            <span class=n>expected_width</span><span class=p>,</span> <span class=n>expected_height</span><span class=p>,</span> <span class=n>pixes_len</span>
        <span class=p>)</span>
        <span class=n>pix_width</span> <span class=o>=</span> <span class=n>expected_width</span> <span class=o>-</span> <span class=n>width_offset</span>
        <span class=n>pix_height</span> <span class=o>=</span> <span class=n>expected_height</span> <span class=o>-</span> <span class=n>height_offset</span>

        <span class=k>if</span> <span class=n>used_default_pix</span><span class=p>:</span>
            <span class=n>thumbnail_images</span> <span class=o>=</span> <span class=p>[</span><span class=bp>self</span><span class=o>.</span><span class=n>_paint_default_pix</span><span class=p>(</span><span class=n>pix_width</span><span class=p>,</span> <span class=n>pix_height</span><span class=p>)]</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>thumbnail_images</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_draw_thumbnails</span><span class=p>(</span>
                <span class=n>pixes_to_draw</span><span class=p>,</span> <span class=n>pix_width</span><span class=p>,</span> <span class=n>pix_height</span>
            <span class=p>)</span>

        <span class=k>if</span> <span class=n>pixes_len</span> <span class=o>==</span> <span class=mi>1</span><span class=p>:</span>
            <span class=n>width_offset_part</span> <span class=o>=</span> <span class=mi>0</span>
            <span class=n>height_offset_part</span> <span class=o>=</span> <span class=mi>0</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>width_offset_part</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=nb>float</span><span class=p>(</span><span class=n>width_offset</span><span class=p>)</span> <span class=o>/</span> <span class=p>(</span><span class=n>pixes_len</span> <span class=o>-</span> <span class=mi>1</span><span class=p>))</span>
            <span class=n>height_offset_part</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=nb>float</span><span class=p>(</span><span class=n>height_offset</span><span class=p>)</span> <span class=o>/</span> <span class=p>(</span><span class=n>pixes_len</span> <span class=o>-</span> <span class=mi>1</span><span class=p>))</span>
        <span class=n>full_width_offset</span> <span class=o>=</span> <span class=n>width_offset</span> <span class=o>+</span> <span class=n>pix_x_offset</span>

        <span class=n>final_pix</span> <span class=o>=</span> <span class=n>QtGui</span><span class=o>.</span><span class=n>QPixmap</span><span class=p>(</span><span class=n>rect_width</span><span class=p>,</span> <span class=n>rect_height</span><span class=p>)</span>
        <span class=n>final_pix</span><span class=o>.</span><span class=n>fill</span><span class=p>(</span><span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>transparent</span><span class=p>)</span>

        <span class=n>bg_pen</span> <span class=o>=</span> <span class=n>QtGui</span><span class=o>.</span><span class=n>QPen</span><span class=p>()</span>
        <span class=n>bg_pen</span><span class=o>.</span><span class=n>setWidth</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>border_width</span><span class=p>)</span>
        <span class=n>bg_pen</span><span class=o>.</span><span class=n>setColor</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_border_color</span><span class=p>)</span>

        <span class=n>final_painter</span> <span class=o>=</span> <span class=n>QtGui</span><span class=o>.</span><span class=n>QPainter</span><span class=p>()</span>
        <span class=n>final_painter</span><span class=o>.</span><span class=n>begin</span><span class=p>(</span><span class=n>final_pix</span><span class=p>)</span>
        <span class=n>render_hints</span> <span class=o>=</span> <span class=p>(</span>
            <span class=n>QtGui</span><span class=o>.</span><span class=n>QPainter</span><span class=o>.</span><span class=n>Antialiasing</span>
            <span class=o>|</span> <span class=n>QtGui</span><span class=o>.</span><span class=n>QPainter</span><span class=o>.</span><span class=n>SmoothPixmapTransform</span>
        <span class=p>)</span>
        <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>QtGui</span><span class=o>.</span><span class=n>QPainter</span><span class=p>,</span> <span class=s2>&quot;HighQualityAntialiasing&quot;</span><span class=p>):</span>
            <span class=n>render_hints</span> <span class=o>|=</span> <span class=n>QtGui</span><span class=o>.</span><span class=n>QPainter</span><span class=o>.</span><span class=n>HighQualityAntialiasing</span>

        <span class=n>final_painter</span><span class=o>.</span><span class=n>setRenderHints</span><span class=p>(</span><span class=n>render_hints</span><span class=p>)</span>

        <span class=n>final_painter</span><span class=o>.</span><span class=n>setBrush</span><span class=p>(</span><span class=n>QtGui</span><span class=o>.</span><span class=n>QBrush</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_thumbnail_bg_color</span><span class=p>))</span>
        <span class=n>final_painter</span><span class=o>.</span><span class=n>setPen</span><span class=p>(</span><span class=n>bg_pen</span><span class=p>)</span>
        <span class=n>final_painter</span><span class=o>.</span><span class=n>drawRect</span><span class=p>(</span><span class=n>rect</span><span class=p>)</span>

        <span class=k>for</span> <span class=n>idx</span><span class=p>,</span> <span class=n>pix</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>thumbnail_images</span><span class=p>):</span>
            <span class=n>x_offset</span> <span class=o>=</span> <span class=n>full_width_offset</span> <span class=o>-</span> <span class=p>(</span><span class=n>width_offset_part</span> <span class=o>*</span> <span class=n>idx</span><span class=p>)</span>
            <span class=n>y_offset</span> <span class=o>=</span> <span class=p>(</span><span class=n>height_offset_part</span> <span class=o>*</span> <span class=n>idx</span><span class=p>)</span> <span class=o>+</span> <span class=n>pix_y_offset</span>
            <span class=n>final_painter</span><span class=o>.</span><span class=n>drawPixmap</span><span class=p>(</span><span class=n>x_offset</span><span class=p>,</span> <span class=n>y_offset</span><span class=p>,</span> <span class=n>pix</span><span class=p>)</span>

        <span class=c1># Draw drop enabled dashes</span>
        <span class=k>if</span> <span class=n>used_default_pix</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_paint_dash_line</span><span class=p>(</span><span class=n>final_painter</span><span class=p>,</span> <span class=n>rect</span><span class=p>)</span>

        <span class=n>final_painter</span><span class=o>.</span><span class=n>end</span><span class=p>()</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_cached_pix</span> <span class=o>=</span> <span class=n>final_pix</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_get_pix_offset_size</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>width</span><span class=p>,</span> <span class=n>height</span><span class=p>,</span> <span class=n>image_count</span><span class=p>):</span>
        <span class=k>if</span> <span class=n>image_count</span> <span class=o>==</span> <span class=mi>1</span><span class=p>:</span>
            <span class=k>return</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span>

        <span class=n>part_width</span> <span class=o>=</span> <span class=n>width</span> <span class=o>/</span> <span class=bp>self</span><span class=o>.</span><span class=n>offset_sep</span>
        <span class=n>part_height</span> <span class=o>=</span> <span class=n>height</span> <span class=o>/</span> <span class=bp>self</span><span class=o>.</span><span class=n>offset_sep</span>
        <span class=k>return</span> <span class=n>part_width</span><span class=p>,</span> <span class=n>part_height</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_core.tools.utils.ThumbnailPainterWidget.has_pixes class="doc doc-heading"> <code class="highlight language-python"><span class=n>has_pixes</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Has set thumbnails.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>bool</code></td> <td> </td> <td> <div class=doc-md-description> <p>True if widget has thumbnails to paint.</p> </div> </td> </tr> </tbody> </table> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.ThumbnailPainterWidget.clear_cache class="doc doc-heading"> <code class="highlight language-python"><span class=n>clear_cache</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Clear cache of resized thumbnails and repaint widget.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/thumbnail_paint_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>95</span>
<span class=normal>96</span>
<span class=normal>97</span>
<span class=normal>98</span>
<span class=normal>99</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>clear_cache</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Clear cache of resized thumbnails and repaint widget.&quot;&quot;&quot;</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_cached_pix</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>repaint</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.ThumbnailPainterWidget.set_border_color class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_border_color</span><span class=p>(</span><span class=n>color</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Change border color.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>color</code> </td> <td> <code><span title=qtpy.QtGui.QColor>QColor</span></code> </td> <td> <div class=doc-md-description> <p>Color to set.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/thumbnail_paint_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>64</span>
<span class=normal>65</span>
<span class=normal>66</span>
<span class=normal>67</span>
<span class=normal>68</span>
<span class=normal>69</span>
<span class=normal>70</span>
<span class=normal>71</span>
<span class=normal>72</span>
<span class=normal>73</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_border_color</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>color</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Change border color.</span>

<span class=sd>    Args:</span>
<span class=sd>        color (QtGui.QColor): Color to set.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_border_color</span> <span class=o>=</span> <span class=n>color</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_default_pix</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>clear_cache</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.ThumbnailPainterWidget.set_current_thumbnail_paths class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_current_thumbnail_paths</span><span class=p>(</span><span class=n>thumbnail_paths</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Set current thumbnails.</p> <p>Set current thumbnails using paths to a files.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>thumbnail_paths</code> </td> <td> <code><span title=Optional>Optional</span>[<span title=List>List</span>[<span title=str>str</span>]]</code> </td> <td> <div class=doc-md-description> <p>List of paths to thumbnail sources.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/thumbnail_paint_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_current_thumbnail_paths</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>thumbnail_paths</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Set current thumbnails.</span>

<span class=sd>    Set current thumbnails using paths to a files.</span>

<span class=sd>    Args:</span>
<span class=sd>        thumbnail_paths (Optional[List[str]]): List of paths to thumbnail</span>
<span class=sd>            sources.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>pixes</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>if</span> <span class=n>thumbnail_paths</span><span class=p>:</span>
        <span class=k>for</span> <span class=n>thumbnail_path</span> <span class=ow>in</span> <span class=n>thumbnail_paths</span><span class=p>:</span>
            <span class=n>pixes</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>QtGui</span><span class=o>.</span><span class=n>QPixmap</span><span class=p>(</span><span class=n>thumbnail_path</span><span class=p>))</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>set_current_thumbnails</span><span class=p>(</span><span class=n>pixes</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.ThumbnailPainterWidget.set_current_thumbnails class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_current_thumbnails</span><span class=p>(</span><span class=n>pixmaps</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Set current thumbnails.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>pixmaps</code> </td> <td> <code><span title=Optional>Optional</span>[<span title=List>List</span>[<span title=qtpy.QtGui.QPixmap>QPixmap</span>]]</code> </td> <td> <div class=doc-md-description> <p>List of pixmaps.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/thumbnail_paint_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_current_thumbnails</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>pixmaps</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Set current thumbnails.</span>

<span class=sd>    Args:</span>
<span class=sd>        pixmaps (Optional[List[QtGui.QPixmap]]): List of pixmaps.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_current_pixes</span> <span class=o>=</span> <span class=n>pixmaps</span> <span class=ow>or</span> <span class=kc>None</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_has_pixes</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_current_pixes</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>clear_cache</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.ThumbnailPainterWidget.set_thumbnail_bg_color class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_thumbnail_bg_color</span><span class=p>(</span><span class=n>color</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Change background color.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>color</code> </td> <td> <code><span title=qtpy.QtGui.QColor>QColor</span></code> </td> <td> <div class=doc-md-description> <p>Color to set.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/thumbnail_paint_widget.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>75</span>
<span class=normal>76</span>
<span class=normal>77</span>
<span class=normal>78</span>
<span class=normal>79</span>
<span class=normal>80</span>
<span class=normal>81</span>
<span class=normal>82</span>
<span class=normal>83</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_thumbnail_bg_color</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>color</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Change background color.</span>

<span class=sd>    Args:</span>
<span class=sd>        color (QtGui.QColor): Color to set.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_thumbnail_bg_color</span> <span class=o>=</span> <span class=n>color</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>clear_cache</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.tools.utils.TreeView class="doc doc-heading"> <code>TreeView</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=qtpy.QtWidgets.QTreeView>QTreeView</span></code></p> <p>Ultimate TreeView with flick charm and double click signals.</p> <p>Tree view have deselectable mode, which allows to deselect items by clicking on item area without any items.</p> <details class=todos open> <summary>Todos</summary> <p>Add refresh animation.</p> </details> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/views.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span>
<span class=normal>62</span>
<span class=normal>63</span>
<span class=normal>64</span>
<span class=normal>65</span>
<span class=normal>66</span>
<span class=normal>67</span>
<span class=normal>68</span>
<span class=normal>69</span>
<span class=normal>70</span>
<span class=normal>71</span>
<span class=normal>72</span>
<span class=normal>73</span>
<span class=normal>74</span>
<span class=normal>75</span>
<span class=normal>76</span>
<span class=normal>77</span>
<span class=normal>78</span>
<span class=normal>79</span>
<span class=normal>80</span>
<span class=normal>81</span>
<span class=normal>82</span>
<span class=normal>83</span>
<span class=normal>84</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>TreeView</span><span class=p>(</span><span class=n>QtWidgets</span><span class=o>.</span><span class=n>QTreeView</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Ultimate TreeView with flick charm and double click signals.</span>

<span class=sd>    Tree view have deselectable mode, which allows to deselect items by</span>
<span class=sd>    clicking on item area without any items.</span>

<span class=sd>    Todos:</span>
<span class=sd>        Add refresh animation.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>double_clicked</span> <span class=o>=</span> <span class=n>QtCore</span><span class=o>.</span><span class=n>Signal</span><span class=p>(</span><span class=n>QtGui</span><span class=o>.</span><span class=n>QMouseEvent</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>TreeView</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_deselectable</span> <span class=o>=</span> <span class=kc>False</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_flick_charm_activated</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_flick_charm</span> <span class=o>=</span> <span class=n>FlickCharm</span><span class=p>(</span><span class=n>parent</span><span class=o>=</span><span class=bp>self</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_before_flick_scroll_mode</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=k>def</span><span class=w> </span><span class=nf>is_deselectable</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_deselectable</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_deselectable</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>deselectable</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_deselectable</span> <span class=o>=</span> <span class=n>deselectable</span>

    <span class=n>deselectable</span> <span class=o>=</span> <span class=nb>property</span><span class=p>(</span><span class=n>is_deselectable</span><span class=p>,</span> <span class=n>set_deselectable</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>mousePressEvent</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_deselectable</span><span class=p>:</span>
            <span class=n>index</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>indexAt</span><span class=p>(</span><span class=n>event</span><span class=o>.</span><span class=n>pos</span><span class=p>())</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=n>index</span><span class=o>.</span><span class=n>isValid</span><span class=p>():</span>
                <span class=c1># clear the selection</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>clearSelection</span><span class=p>()</span>
                <span class=c1># clear the current index</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>setCurrentIndex</span><span class=p>(</span><span class=n>QtCore</span><span class=o>.</span><span class=n>QModelIndex</span><span class=p>())</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>TreeView</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>mousePressEvent</span><span class=p>(</span><span class=n>event</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>mouseDoubleClickEvent</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>event</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>double_clicked</span><span class=o>.</span><span class=n>emit</span><span class=p>(</span><span class=n>event</span><span class=p>)</span>

        <span class=k>return</span> <span class=nb>super</span><span class=p>(</span><span class=n>TreeView</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>mouseDoubleClickEvent</span><span class=p>(</span><span class=n>event</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>activate_flick_charm</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_flick_charm_activated</span><span class=p>:</span>
            <span class=k>return</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_flick_charm_activated</span> <span class=o>=</span> <span class=kc>True</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_before_flick_scroll_mode</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>verticalScrollMode</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_flick_charm</span><span class=o>.</span><span class=n>activateOn</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>setVerticalScrollMode</span><span class=p>(</span><span class=n>QtWidgets</span><span class=o>.</span><span class=n>QAbstractItemView</span><span class=o>.</span><span class=n>ScrollPerPixel</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>deactivate_flick_charm</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_flick_charm_activated</span><span class=p>:</span>
            <span class=k>return</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_flick_charm_activated</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_flick_charm</span><span class=o>.</span><span class=n>deactivateFrom</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_before_flick_scroll_mode</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>setVerticalScrollMode</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_before_flick_scroll_mode</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.tools.utils.VerticalExpandButton class="doc doc-heading"> <code>VerticalExpandButton</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=qtpy.QtWidgets.QPushButton>QPushButton</span></code></p> <p>Button which is expanding vertically.</p> <p>By default, button is a little bit smaller than other widgets like QLineEdit. This button is expanding vertically to match size of other widgets, next to it.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/widgets.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1133</span>
<span class=normal>1134</span>
<span class=normal>1135</span>
<span class=normal>1136</span>
<span class=normal>1137</span>
<span class=normal>1138</span>
<span class=normal>1139</span>
<span class=normal>1140</span>
<span class=normal>1141</span>
<span class=normal>1142</span>
<span class=normal>1143</span>
<span class=normal>1144</span>
<span class=normal>1145</span>
<span class=normal>1146</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>VerticalExpandButton</span><span class=p>(</span><span class=n>QtWidgets</span><span class=o>.</span><span class=n>QPushButton</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Button which is expanding vertically.</span>

<span class=sd>    By default, button is a little bit smaller than other widgets like</span>
<span class=sd>        QLineEdit. This button is expanding vertically to match size of</span>
<span class=sd>        other widgets, next to it.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>parent</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>VerticalExpandButton</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>parent</span><span class=p>)</span>

        <span class=n>sp</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>sizePolicy</span><span class=p>()</span>
        <span class=n>sp</span><span class=o>.</span><span class=n>setVerticalPolicy</span><span class=p>(</span><span class=n>QtWidgets</span><span class=o>.</span><span class=n>QSizePolicy</span><span class=o>.</span><span class=n>Minimum</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>setSizePolicy</span><span class=p>(</span><span class=n>sp</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.tools.utils.WrappedCallbackItem class="doc doc-heading"> <code>WrappedCallbackItem</code> </h2> <div class="doc doc-contents "> <p>Structure to store information about callback and args/kwargs for it.</p> <p>Item can be used to execute callback in main thread which may be needed for execution of Qt objects.</p> <p>Item store callback (callable variable), arguments and keyword arguments for the callback. Item hold information about it's process.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span>
<span class=normal>344</span>
<span class=normal>345</span>
<span class=normal>346</span>
<span class=normal>347</span>
<span class=normal>348</span>
<span class=normal>349</span>
<span class=normal>350</span>
<span class=normal>351</span>
<span class=normal>352</span>
<span class=normal>353</span>
<span class=normal>354</span>
<span class=normal>355</span>
<span class=normal>356</span>
<span class=normal>357</span>
<span class=normal>358</span>
<span class=normal>359</span>
<span class=normal>360</span>
<span class=normal>361</span>
<span class=normal>362</span>
<span class=normal>363</span>
<span class=normal>364</span>
<span class=normal>365</span>
<span class=normal>366</span>
<span class=normal>367</span>
<span class=normal>368</span>
<span class=normal>369</span>
<span class=normal>370</span>
<span class=normal>371</span>
<span class=normal>372</span>
<span class=normal>373</span>
<span class=normal>374</span>
<span class=normal>375</span>
<span class=normal>376</span>
<span class=normal>377</span>
<span class=normal>378</span>
<span class=normal>379</span>
<span class=normal>380</span>
<span class=normal>381</span>
<span class=normal>382</span>
<span class=normal>383</span>
<span class=normal>384</span>
<span class=normal>385</span>
<span class=normal>386</span>
<span class=normal>387</span>
<span class=normal>388</span>
<span class=normal>389</span>
<span class=normal>390</span>
<span class=normal>391</span>
<span class=normal>392</span>
<span class=normal>393</span>
<span class=normal>394</span>
<span class=normal>395</span>
<span class=normal>396</span>
<span class=normal>397</span>
<span class=normal>398</span>
<span class=normal>399</span>
<span class=normal>400</span>
<span class=normal>401</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>WrappedCallbackItem</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Structure to store information about callback and args/kwargs for it.</span>

<span class=sd>    Item can be used to execute callback in main thread which may be needed</span>
<span class=sd>    for execution of Qt objects.</span>

<span class=sd>    Item store callback (callable variable), arguments and keyword arguments</span>
<span class=sd>    for the callback. Item hold information about it&#39;s process.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>not_set</span> <span class=o>=</span> <span class=nb>object</span><span class=p>()</span>
    <span class=n>_log</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>callback</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_done</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_exception</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>not_set</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_result</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>not_set</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_callback</span> <span class=o>=</span> <span class=n>callback</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_args</span> <span class=o>=</span> <span class=n>args</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_kwargs</span> <span class=o>=</span> <span class=n>kwargs</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__call__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>execute</span><span class=p>()</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>log</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=bp>cls</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span>
        <span class=k>if</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_log</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>cls</span><span class=o>.</span><span class=n>_log</span> <span class=o>=</span> <span class=n>Logger</span><span class=o>.</span><span class=n>get_logger</span><span class=p>(</span><span class=bp>cls</span><span class=o>.</span><span class=vm>__name__</span><span class=p>)</span>
        <span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_log</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>done</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_done</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>exception</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_exception</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>result</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_result</span>

    <span class=k>def</span><span class=w> </span><span class=nf>execute</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Execute callback and store its result.</span>

<span class=sd>        Method must be called from main thread. Item is marked as `done`</span>
<span class=sd>        when callback execution finished. Store output of callback of exception</span>
<span class=sd>        information when callback raises one.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>done</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s2>&quot;- item is already processed&quot;</span><span class=p>)</span>
            <span class=k>return</span>

        <span class=k>try</span><span class=p>:</span>
            <span class=n>result</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_callback</span><span class=p>(</span><span class=o>*</span><span class=bp>self</span><span class=o>.</span><span class=n>_args</span><span class=p>,</span> <span class=o>**</span><span class=bp>self</span><span class=o>.</span><span class=n>_kwargs</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_result</span> <span class=o>=</span> <span class=n>result</span>

        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>exc</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_exception</span> <span class=o>=</span> <span class=n>exc</span>

        <span class=k>finally</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_done</span> <span class=o>=</span> <span class=kc>True</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.tools.utils.WrappedCallbackItem.execute class="doc doc-heading"> <code class="highlight language-python"><span class=n>execute</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Execute callback and store its result.</p> <p>Method must be called from main thread. Item is marked as <code>done</code> when callback execution finished. Store output of callback of exception information when callback raises one.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>382</span>
<span class=normal>383</span>
<span class=normal>384</span>
<span class=normal>385</span>
<span class=normal>386</span>
<span class=normal>387</span>
<span class=normal>388</span>
<span class=normal>389</span>
<span class=normal>390</span>
<span class=normal>391</span>
<span class=normal>392</span>
<span class=normal>393</span>
<span class=normal>394</span>
<span class=normal>395</span>
<span class=normal>396</span>
<span class=normal>397</span>
<span class=normal>398</span>
<span class=normal>399</span>
<span class=normal>400</span>
<span class=normal>401</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>execute</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Execute callback and store its result.</span>

<span class=sd>    Method must be called from main thread. Item is marked as `done`</span>
<span class=sd>    when callback execution finished. Store output of callback of exception</span>
<span class=sd>    information when callback raises one.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>done</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s2>&quot;- item is already processed&quot;</span><span class=p>)</span>
        <span class=k>return</span>

    <span class=k>try</span><span class=p>:</span>
        <span class=n>result</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_callback</span><span class=p>(</span><span class=o>*</span><span class=bp>self</span><span class=o>.</span><span class=n>_args</span><span class=p>,</span> <span class=o>**</span><span class=bp>self</span><span class=o>.</span><span class=n>_kwargs</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_result</span> <span class=o>=</span> <span class=n>result</span>

    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>exc</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_exception</span> <span class=o>=</span> <span class=n>exc</span>

    <span class=k>finally</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_done</span> <span class=o>=</span> <span class=kc>True</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.tools.utils.get_ayon_qt_app class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_ayon_qt_app</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>Main Qt application initialized for AYON processed.</p> <p>This function should be used only inside AYON-launcher process and never inside other processes.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_ayon_qt_app</span><span class=p>():</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Main Qt application initialized for AYON processed.</span>

<span class=sd>    This function should be used only inside AYON-launcher process</span>
<span class=sd>        and never inside other processes.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>app</span> <span class=o>=</span> <span class=n>get_qt_app</span><span class=p>()</span>
    <span class=n>app</span><span class=o>.</span><span class=n>setWindowIcon</span><span class=p>(</span><span class=n>QtGui</span><span class=o>.</span><span class=n>QIcon</span><span class=p>(</span><span class=n>get_app_icon_path</span><span class=p>()))</span>
    <span class=k>return</span> <span class=n>app</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.tools.utils.get_qt_app class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_qt_app</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>Get Qt application.</p> <p>The function initializes new Qt application if it is not already initialized. It also sets some attributes to the application to ensure that it will work properly on high DPI displays.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>QtWidgets.QApplication: Current Qt application.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_qt_app</span><span class=p>():</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get Qt application.</span>

<span class=sd>    The function initializes new Qt application if it is not already</span>
<span class=sd>    initialized. It also sets some attributes to the application to</span>
<span class=sd>    ensure that it will work properly on high DPI displays.</span>

<span class=sd>    Returns:</span>
<span class=sd>        QtWidgets.QApplication: Current Qt application.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>app</span> <span class=o>=</span> <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QApplication</span><span class=o>.</span><span class=n>instance</span><span class=p>()</span>
    <span class=k>if</span> <span class=n>app</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>for</span> <span class=n>attr_name</span> <span class=ow>in</span> <span class=p>(</span>
            <span class=s2>&quot;AA_EnableHighDpiScaling&quot;</span><span class=p>,</span>
            <span class=s2>&quot;AA_UseHighDpiPixmaps&quot;</span><span class=p>,</span>
        <span class=p>):</span>
            <span class=n>attr</span> <span class=o>=</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=p>,</span> <span class=n>attr_name</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>attr</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
                <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QApplication</span><span class=o>.</span><span class=n>setAttribute</span><span class=p>(</span><span class=n>attr</span><span class=p>)</span>

        <span class=n>policy</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>getenv</span><span class=p>(</span><span class=s2>&quot;QT_SCALE_FACTOR_ROUNDING_POLICY&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=p>(</span>
            <span class=nb>hasattr</span><span class=p>(</span>
                <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QApplication</span><span class=p>,</span> <span class=s2>&quot;setHighDpiScaleFactorRoundingPolicy&quot;</span>
            <span class=p>)</span>
            <span class=ow>and</span> <span class=ow>not</span> <span class=n>policy</span>
        <span class=p>):</span>
            <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QApplication</span><span class=o>.</span><span class=n>setHighDpiScaleFactorRoundingPolicy</span><span class=p>(</span>
                <span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>HighDpiScaleFactorRoundingPolicy</span><span class=o>.</span><span class=n>PassThrough</span>
            <span class=p>)</span>

        <span class=n>app</span> <span class=o>=</span> <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QApplication</span><span class=p>(</span><span class=n>sys</span><span class=o>.</span><span class=n>argv</span><span class=p>)</span>

    <span class=k>return</span> <span class=n>app</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.tools.utils.get_qt_icon class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_qt_icon</span><span class=p>(</span><span class=n>icon_def</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Returns icon from cache or creates new one.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>icon_def</code> </td> <td> <code><span title=dict>dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Icon definition.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>QtGui.QIcon: Icon.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>568</span>
<span class=normal>569</span>
<span class=normal>570</span>
<span class=normal>571</span>
<span class=normal>572</span>
<span class=normal>573</span>
<span class=normal>574</span>
<span class=normal>575</span>
<span class=normal>576</span>
<span class=normal>577</span>
<span class=normal>578</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_qt_icon</span><span class=p>(</span><span class=n>icon_def</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Returns icon from cache or creates new one.</span>

<span class=sd>    Args:</span>
<span class=sd>        icon_def (dict[str, Any]): Icon definition.</span>

<span class=sd>    Returns:</span>
<span class=sd>        QtGui.QIcon: Icon.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>return</span> <span class=n>_IconsCache</span><span class=o>.</span><span class=n>get_icon</span><span class=p>(</span><span class=n>icon_def</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.tools.utils.get_warning_pixmap class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_warning_pixmap</span><span class=p>(</span><span class=n>color</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Warning icon as QPixmap.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>color(QtGui.QColor)</code> </td> <td> </td> <td> <div class=doc-md-description> <p>Color that will be used to paint warning icon.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>404</span>
<span class=normal>405</span>
<span class=normal>406</span>
<span class=normal>407</span>
<span class=normal>408</span>
<span class=normal>409</span>
<span class=normal>410</span>
<span class=normal>411</span>
<span class=normal>412</span>
<span class=normal>413</span>
<span class=normal>414</span>
<span class=normal>415</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_warning_pixmap</span><span class=p>(</span><span class=n>color</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Warning icon as QPixmap.</span>

<span class=sd>    Args:</span>
<span class=sd>        color(QtGui.QColor): Color that will be used to paint warning icon.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>src_image_path</span> <span class=o>=</span> <span class=n>get_image_path</span><span class=p>(</span><span class=s2>&quot;warning.png&quot;</span><span class=p>)</span>
    <span class=n>src_image</span> <span class=o>=</span> <span class=n>QtGui</span><span class=o>.</span><span class=n>QImage</span><span class=p>(</span><span class=n>src_image_path</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>color</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>color</span> <span class=o>=</span> <span class=n>get_objected_colors</span><span class=p>(</span><span class=s2>&quot;delete-btn-bg&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>get_qcolor</span><span class=p>()</span>

    <span class=k>return</span> <span class=n>paint_image_with_color</span><span class=p>(</span><span class=n>src_image</span><span class=p>,</span> <span class=n>color</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.tools.utils.paint_image_with_color class="doc doc-heading"> <code class="highlight language-python"><span class=n>paint_image_with_color</span><span class=p>(</span><span class=n>image</span><span class=p>,</span> <span class=n>color</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Redraw image with single color using it's alpha.</p> <p>It is expected that input image is singlecolor image with alpha.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>image</code> </td> <td> <code><span title=QImage>QImage</span></code> </td> <td> <div class=doc-md-description> <p>Loaded image with alpha.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>color</code> </td> <td> <code><span title=QColor>QColor</span></code> </td> <td> <div class=doc-md-description> <p>Color that will be used to paint image.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>paint_image_with_color</span><span class=p>(</span><span class=n>image</span><span class=p>,</span> <span class=n>color</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Redraw image with single color using it&#39;s alpha.</span>

<span class=sd>    It is expected that input image is singlecolor image with alpha.</span>

<span class=sd>    Args:</span>
<span class=sd>        image (QImage): Loaded image with alpha.</span>
<span class=sd>        color (QColor): Color that will be used to paint image.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>width</span> <span class=o>=</span> <span class=n>image</span><span class=o>.</span><span class=n>width</span><span class=p>()</span>
    <span class=n>height</span> <span class=o>=</span> <span class=n>image</span><span class=o>.</span><span class=n>height</span><span class=p>()</span>

    <span class=n>alpha_mask</span> <span class=o>=</span> <span class=n>image</span><span class=o>.</span><span class=n>createAlphaMask</span><span class=p>()</span>
    <span class=n>alpha_region</span> <span class=o>=</span> <span class=n>QtGui</span><span class=o>.</span><span class=n>QRegion</span><span class=p>(</span><span class=n>QtGui</span><span class=o>.</span><span class=n>QBitmap</span><span class=o>.</span><span class=n>fromImage</span><span class=p>(</span><span class=n>alpha_mask</span><span class=p>))</span>

    <span class=n>pixmap</span> <span class=o>=</span> <span class=n>QtGui</span><span class=o>.</span><span class=n>QPixmap</span><span class=p>(</span><span class=n>width</span><span class=p>,</span> <span class=n>height</span><span class=p>)</span>
    <span class=n>pixmap</span><span class=o>.</span><span class=n>fill</span><span class=p>(</span><span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>transparent</span><span class=p>)</span>

    <span class=n>painter</span> <span class=o>=</span> <span class=n>QtGui</span><span class=o>.</span><span class=n>QPainter</span><span class=p>(</span><span class=n>pixmap</span><span class=p>)</span>
    <span class=n>render_hints</span> <span class=o>=</span> <span class=p>(</span>
        <span class=n>QtGui</span><span class=o>.</span><span class=n>QPainter</span><span class=o>.</span><span class=n>Antialiasing</span>
        <span class=o>|</span> <span class=n>QtGui</span><span class=o>.</span><span class=n>QPainter</span><span class=o>.</span><span class=n>SmoothPixmapTransform</span>
    <span class=p>)</span>
    <span class=c1># Deprecated since 5.14</span>
    <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>QtGui</span><span class=o>.</span><span class=n>QPainter</span><span class=p>,</span> <span class=s2>&quot;HighQualityAntialiasing&quot;</span><span class=p>):</span>
        <span class=n>render_hints</span> <span class=o>|=</span> <span class=n>QtGui</span><span class=o>.</span><span class=n>QPainter</span><span class=o>.</span><span class=n>HighQualityAntialiasing</span>
    <span class=n>painter</span><span class=o>.</span><span class=n>setRenderHints</span><span class=p>(</span><span class=n>render_hints</span><span class=p>)</span>

    <span class=n>painter</span><span class=o>.</span><span class=n>setClipRegion</span><span class=p>(</span><span class=n>alpha_region</span><span class=p>)</span>
    <span class=n>painter</span><span class=o>.</span><span class=n>setPen</span><span class=p>(</span><span class=n>QtCore</span><span class=o>.</span><span class=n>Qt</span><span class=o>.</span><span class=n>NoPen</span><span class=p>)</span>
    <span class=n>painter</span><span class=o>.</span><span class=n>setBrush</span><span class=p>(</span><span class=n>color</span><span class=p>)</span>
    <span class=n>painter</span><span class=o>.</span><span class=n>drawRect</span><span class=p>(</span><span class=n>QtCore</span><span class=o>.</span><span class=n>QRect</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=n>width</span><span class=p>,</span> <span class=n>height</span><span class=p>))</span>
    <span class=n>painter</span><span class=o>.</span><span class=n>end</span><span class=p>()</span>

    <span class=k>return</span> <span class=n>pixmap</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.tools.utils.set_style_property class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_style_property</span><span class=p>(</span><span class=n>widget</span><span class=p>,</span> <span class=n>property_name</span><span class=p>,</span> <span class=n>property_value</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Set widget's property that may affect style.</p> <p>If current property value is different then style of widget is polished.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>77</span>
<span class=normal>78</span>
<span class=normal>79</span>
<span class=normal>80</span>
<span class=normal>81</span>
<span class=normal>82</span>
<span class=normal>83</span>
<span class=normal>84</span>
<span class=normal>85</span>
<span class=normal>86</span>
<span class=normal>87</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_style_property</span><span class=p>(</span><span class=n>widget</span><span class=p>,</span> <span class=n>property_name</span><span class=p>,</span> <span class=n>property_value</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Set widget&#39;s property that may affect style.</span>

<span class=sd>    If current property value is different then style of widget is polished.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>cur_value</span> <span class=o>=</span> <span class=n>widget</span><span class=o>.</span><span class=n>property</span><span class=p>(</span><span class=n>property_name</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>cur_value</span> <span class=o>==</span> <span class=n>property_value</span><span class=p>:</span>
        <span class=k>return</span>
    <span class=n>widget</span><span class=o>.</span><span class=n>setProperty</span><span class=p>(</span><span class=n>property_name</span><span class=p>,</span> <span class=n>property_value</span><span class=p>)</span>
    <span class=n>style</span> <span class=o>=</span> <span class=n>widget</span><span class=o>.</span><span class=n>style</span><span class=p>()</span>
    <span class=n>style</span><span class=o>.</span><span class=n>polish</span><span class=p>(</span><span class=n>widget</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.tools.utils.show_message_dialog class="doc doc-heading"> <code class="highlight language-python"><span class=n>show_message_dialog</span><span class=p>(</span><span class=n>title</span><span class=p>,</span> <span class=n>message</span><span class=p>,</span> <span class=n>level</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>parent</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>title</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Title of dialog.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>message</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Message to display.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>level</code> </td> <td> <code><span title=Literal>Literal</span>[<span title=info>info</span>, <span title=warning>warning</span>, <span title=critical>critical</span>]</code> </td> <td> <div class=doc-md-description> <p>Level of dialog.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>parent</code> </td> <td> <code><span title=Optional>Optional</span>[<span title=qtpy.QtCore.QObject>QObject</span>]</code> </td> <td> <div class=doc-md-description> <p>Parent widget.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/tools/utils/dialogs.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>show_message_dialog</span><span class=p>(</span><span class=n>title</span><span class=p>,</span> <span class=n>message</span><span class=p>,</span> <span class=n>level</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>parent</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>

<span class=sd>    Args:</span>
<span class=sd>        title (str): Title of dialog.</span>
<span class=sd>        message (str): Message to display.</span>
<span class=sd>        level (Literal[&quot;info&quot;, &quot;warning&quot;, &quot;critical&quot;]): Level of dialog.</span>
<span class=sd>        parent (Optional[QtCore.QObject]): Parent widget.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=n>level</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>level</span> <span class=o>=</span> <span class=s2>&quot;info&quot;</span>

    <span class=k>if</span> <span class=n>level</span> <span class=o>==</span> <span class=s2>&quot;info&quot;</span><span class=p>:</span>
        <span class=n>function</span> <span class=o>=</span> <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QMessageBox</span><span class=o>.</span><span class=n>information</span>
    <span class=k>elif</span> <span class=n>level</span> <span class=o>==</span> <span class=s2>&quot;warning&quot;</span><span class=p>:</span>
        <span class=n>function</span> <span class=o>=</span> <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QMessageBox</span><span class=o>.</span><span class=n>warning</span>
    <span class=k>elif</span> <span class=n>level</span> <span class=o>==</span> <span class=s2>&quot;critical&quot;</span><span class=p>:</span>
        <span class=n>function</span> <span class=o>=</span> <span class=n>QtWidgets</span><span class=o>.</span><span class=n>QMessageBox</span><span class=o>.</span><span class=n>critical</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Invalid level: </span><span class=si>{</span><span class=n>level</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
    <span class=n>function</span><span class=p>(</span><span class=n>parent</span><span class=p>,</span> <span class=n>title</span><span class=p>,</span> <span class=n>message</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../../..", "features": ["navigation.sections", "navigation.path", "navigation.prune"], "search": "../../../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../../../../assets/javascripts/bundle.c8b220af.min.js></script> </body> </html>