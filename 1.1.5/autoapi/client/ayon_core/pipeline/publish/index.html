<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=prev href=../project_folders.html><link rel=next href=abstract_collect_render.html><link rel=icon href=../../../../../img/favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.9"><title>publish - ayon-core</title><link rel=stylesheet href=../../../../../assets/stylesheets/main.4af4bdda.min.css><link rel=stylesheet href=../../../../../assets/stylesheets/palette.06af60db.min.css><script src=https://unpkg.com/iframe-worker/shim></script><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../../../assets/_mkdocstrings.css><link rel=stylesheet href=../../../../../css/custom.css><script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#client.ayon_core.pipeline.publish class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../../../index.html title=ayon-core class="md-header__button md-logo" aria-label=ayon-core data-md-component=logo> <img src=../../../../../img/ay-symbol-blackw-full.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> ayon-core </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> publish </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/ynput/ayon-core title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../../../index.html title=ayon-core class="md-nav__button md-logo" aria-label=ayon-core data-md-component=logo> <img src=../../../../../img/ay-symbol-blackw-full.png alt=logo> </a> ayon-core </label> <div class=md-nav__source> <a href=https://github.com/ynput/ayon-core title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../index.html class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../../../../../license.html class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1 checked> <label class=md-nav__link for=__nav_3_1 id=__nav_3_1_label tabindex=0> <span class=md-ellipsis> client </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> client </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1 checked> <div class="md-nav__link md-nav__container"> <a href=../../index.html class="md-nav__link "> <span class=md-ellipsis> ayon_core </span> </a> <label class="md-nav__link " for=__nav_3_1_1 id=__nav_3_1_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_1_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1> <span class="md-nav__icon md-icon"></span> ayon_core </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../__main__.html class=md-nav__link> <span class=md-ellipsis> __main__ </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../addon/base.html class=md-nav__link> <span class=md-ellipsis> addon </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../../cli.html class=md-nav__link> <span class=md-ellipsis> cli </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../hooks/pre_add_last_workfile_arg.html class=md-nav__link> <span class=md-ellipsis> hooks </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../host/dirmap.html class=md-nav__link> <span class=md-ellipsis> host </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../lib/attribute_definitions.html class=md-nav__link> <span class=md-ellipsis> lib </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1_7 checked> <div class="md-nav__link md-nav__container"> <a href=../index.html class="md-nav__link "> <span class=md-ellipsis> pipeline </span> </a> <label class="md-nav__link " for=__nav_3_1_1_7 id=__nav_3_1_1_7_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_1_1_7_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1_7> <span class="md-nav__icon md-icon"></span> pipeline </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../actions.html class=md-nav__link> <span class=md-ellipsis> actions </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../anatomy/anatomy.html class=md-nav__link> <span class=md-ellipsis> anatomy </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../colorspace.html class=md-nav__link> <span class=md-ellipsis> colorspace </span> </a> </li> <li class=md-nav__item> <a href=../constants.html class=md-nav__link> <span class=md-ellipsis> constants </span> </a> </li> <li class=md-nav__item> <a href=../context_tools.html class=md-nav__link> <span class=md-ellipsis> context_tools </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../create/changes.html class=md-nav__link> <span class=md-ellipsis> create </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../delivery.html class=md-nav__link> <span class=md-ellipsis> delivery </span> </a> </li> <li class=md-nav__item> <a href=../editorial.html class=md-nav__link> <span class=md-ellipsis> editorial </span> </a> </li> <li class=md-nav__item> <a href=../entity_uri.html class=md-nav__link> <span class=md-ellipsis> entity_uri </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../farm/patterning.html class=md-nav__link> <span class=md-ellipsis> farm </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../load/plugins.html class=md-nav__link> <span class=md-ellipsis> load </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../plugin_discover.html class=md-nav__link> <span class=md-ellipsis> plugin_discover </span> </a> </li> <li class=md-nav__item> <a href=../project_folders.html class=md-nav__link> <span class=md-ellipsis> project_folders </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1_7_14 checked> <div class="md-nav__link md-nav__container"> <a href=index.html class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> publish </span> </a> <label class="md-nav__link md-nav__link--active" for=__nav_3_1_1_7_14 id=__nav_3_1_1_7_14_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=5 aria-labelledby=__nav_3_1_1_7_14_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1_7_14> <span class="md-nav__icon md-icon"></span> publish </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=abstract_collect_render.html class=md-nav__link> <span class=md-ellipsis> abstract_collect_render </span> </a> </li> <li class=md-nav__item> <a href=abstract_expected_files.html class=md-nav__link> <span class=md-ellipsis> abstract_expected_files </span> </a> </li> <li class=md-nav__item> <a href=constants.html class=md-nav__link> <span class=md-ellipsis> constants </span> </a> </li> <li class=md-nav__item> <a href=lib.html class=md-nav__link> <span class=md-ellipsis> lib </span> </a> </li> <li class=md-nav__item> <a href=publish_plugins.html class=md-nav__link> <span class=md-ellipsis> publish_plugins </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../schema/index.html class=md-nav__link> <span class=md-ellipsis> schema </span> </a> </li> <li class=md-nav__item> <a href=../staging_dir.html class=md-nav__link> <span class=md-ellipsis> staging_dir </span> </a> </li> <li class=md-nav__item> <a href=../tempdir.html class=md-nav__link> <span class=md-ellipsis> tempdir </span> </a> </li> <li class=md-nav__item> <a href=../template_data.html class=md-nav__link> <span class=md-ellipsis> template_data </span> </a> </li> <li class=md-nav__item> <a href=../thumbnails.html class=md-nav__link> <span class=md-ellipsis> thumbnails </span> </a> </li> <li class=md-nav__item> <a href=../usdlib.html class=md-nav__link> <span class=md-ellipsis> usdlib </span> </a> </li> <li class=md-nav__item> <a href=../version_start.html class=md-nav__link> <span class=md-ellipsis> version_start </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../workfile/build_workfile.html class=md-nav__link> <span class=md-ellipsis> workfile </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../plugins/actions/open_file_explorer.html class=md-nav__link> <span class=md-ellipsis> plugins </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../../resources/index.html class=md-nav__link> <span class=md-ellipsis> resources </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../scripts/ocio_wrapper.html class=md-nav__link> <span class=md-ellipsis> scripts </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../settings/lib.html class=md-nav__link> <span class=md-ellipsis> settings </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../style/color_defs.html class=md-nav__link> <span class=md-ellipsis> style </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../tests/conftest.html class=md-nav__link> <span class=md-ellipsis> tests </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../tools/attribute_defs/_constants.html class=md-nav__link> <span class=md-ellipsis> tools </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../vendor/python/qargparse.html class=md-nav__link> <span class=md-ellipsis> vendor </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../../version.html class=md-nav__link> <span class=md-ellipsis> version </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../server/settings/conversion.html class=md-nav__link> <span class=md-ellipsis> server </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish class=md-nav__link> <span class=md-ellipsis> publish </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.AYONPyblishPluginMixin class=md-nav__link> <span class=md-ellipsis> AYONPyblishPluginMixin </span> </a> <nav class=md-nav aria-label=AYONPyblishPluginMixin> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.AYONPyblishPluginMixin.convert_attribute_values class=md-nav__link> <span class=md-ellipsis> convert_attribute_values </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.AYONPyblishPluginMixin.get_attr_defs_for_context class=md-nav__link> <span class=md-ellipsis> get_attr_defs_for_context </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.AYONPyblishPluginMixin.get_attr_defs_for_instance class=md-nav__link> <span class=md-ellipsis> get_attr_defs_for_instance </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.AYONPyblishPluginMixin.get_attr_values_from_data class=md-nav__link> <span class=md-ellipsis> get_attr_values_from_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.AYONPyblishPluginMixin.get_attr_values_from_data_for_plugin class=md-nav__link> <span class=md-ellipsis> get_attr_values_from_data_for_plugin </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.AYONPyblishPluginMixin.get_attribute_defs class=md-nav__link> <span class=md-ellipsis> get_attribute_defs </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.AYONPyblishPluginMixin.instance_matches_plugin_families class=md-nav__link> <span class=md-ellipsis> instance_matches_plugin_families </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.AYONPyblishPluginMixin.register_create_context_callbacks class=md-nav__link> <span class=md-ellipsis> register_create_context_callbacks </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.AbstractCollectRender class=md-nav__link> <span class=md-ellipsis> AbstractCollectRender </span> </a> <nav class=md-nav aria-label=AbstractCollectRender> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.AbstractCollectRender.__init__ class=md-nav__link> <span class=md-ellipsis> __init__ </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.AbstractCollectRender.add_additional_data class=md-nav__link> <span class=md-ellipsis> add_additional_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.AbstractCollectRender.get_expected_files class=md-nav__link> <span class=md-ellipsis> get_expected_files </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.AbstractCollectRender.get_instances class=md-nav__link> <span class=md-ellipsis> get_instances </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.AbstractCollectRender.post_collecting_action class=md-nav__link> <span class=md-ellipsis> post_collecting_action </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.AbstractCollectRender.process class=md-nav__link> <span class=md-ellipsis> process </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.ColormanagedPyblishPluginMixin class=md-nav__link> <span class=md-ellipsis> ColormanagedPyblishPluginMixin </span> </a> <nav class=md-nav aria-label=ColormanagedPyblishPluginMixin> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.ColormanagedPyblishPluginMixin.get_colorspace_settings class=md-nav__link> <span class=md-ellipsis> get_colorspace_settings </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.ColormanagedPyblishPluginMixin.set_representation_colorspace class=md-nav__link> <span class=md-ellipsis> set_representation_colorspace </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.ExpectedFiles class=md-nav__link> <span class=md-ellipsis> ExpectedFiles </span> </a> <nav class=md-nav aria-label=ExpectedFiles> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.ExpectedFiles.get class=md-nav__link> <span class=md-ellipsis> get </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.Extractor class=md-nav__link> <span class=md-ellipsis> Extractor </span> </a> <nav class=md-nav aria-label=Extractor> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.Extractor.staging_dir class=md-nav__link> <span class=md-ellipsis> staging_dir </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.KnownPublishError class=md-nav__link> <span class=md-ellipsis> KnownPublishError </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.OptionalPyblishPluginMixin class=md-nav__link> <span class=md-ellipsis> OptionalPyblishPluginMixin </span> </a> <nav class=md-nav aria-label=OptionalPyblishPluginMixin> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.OptionalPyblishPluginMixin.get_attribute_defs class=md-nav__link> <span class=md-ellipsis> get_attribute_defs </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.OptionalPyblishPluginMixin.is_active class=md-nav__link> <span class=md-ellipsis> is_active </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.PublishError class=md-nav__link> <span class=md-ellipsis> PublishError </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.PublishValidationError class=md-nav__link> <span class=md-ellipsis> PublishValidationError </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.RenderInstance class=md-nav__link> <span class=md-ellipsis> RenderInstance </span> </a> <nav class=md-nav aria-label=RenderInstance> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.RenderInstance.check_frame_end class=md-nav__link> <span class=md-ellipsis> check_frame_end </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.RenderInstance.check_frame_start class=md-nav__link> <span class=md-ellipsis> check_frame_start </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.RenderInstance.check_tiles_x class=md-nav__link> <span class=md-ellipsis> check_tiles_x </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.RenderInstance.check_tiles_y class=md-nav__link> <span class=md-ellipsis> check_tiles_y </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.RepairAction class=md-nav__link> <span class=md-ellipsis> RepairAction </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.RepairContextAction class=md-nav__link> <span class=md-ellipsis> RepairContextAction </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.apply_plugin_settings_automatically class=md-nav__link> <span class=md-ellipsis> apply_plugin_settings_automatically </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.context_plugin_should_run class=md-nav__link> <span class=md-ellipsis> context_plugin_should_run </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.filter_instances_for_context_plugin class=md-nav__link> <span class=md-ellipsis> filter_instances_for_context_plugin </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.get_errored_instances_from_context class=md-nav__link> <span class=md-ellipsis> get_errored_instances_from_context </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.get_errored_plugins_from_context class=md-nav__link> <span class=md-ellipsis> get_errored_plugins_from_context </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.get_instance_staging_dir class=md-nav__link> <span class=md-ellipsis> get_instance_staging_dir </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.get_plugin_settings class=md-nav__link> <span class=md-ellipsis> get_plugin_settings </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.get_publish_instance_families class=md-nav__link> <span class=md-ellipsis> get_publish_instance_families </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.get_publish_instance_label class=md-nav__link> <span class=md-ellipsis> get_publish_instance_label </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.get_publish_repre_path class=md-nav__link> <span class=md-ellipsis> get_publish_repre_path </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.get_publish_template_name class=md-nav__link> <span class=md-ellipsis> get_publish_template_name </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.load_help_content_from_filepath class=md-nav__link> <span class=md-ellipsis> load_help_content_from_filepath </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.main_cli_publish class=md-nav__link> <span class=md-ellipsis> main_cli_publish </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.publish.publish_plugins_discover class=md-nav__link> <span class=md-ellipsis> publish_plugins_discover </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>publish</h1> <div class="doc doc-object doc-module"> <a id=client.ayon_core.pipeline.publish></a> <div class="doc doc-contents first"> <div class="doc doc-children"> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.publish.AYONPyblishPluginMixin class="doc doc-heading"> <code>AYONPyblishPluginMixin</code> </h2> <div class="doc doc-contents "> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/publish_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>AYONPyblishPluginMixin</span><span class=p>:</span>
    <span class=c1># TODO</span>
    <span class=c1># executable_in_thread = False</span>
    <span class=c1>#</span>
    <span class=c1># state_message = None</span>
    <span class=c1># state_percent = None</span>
    <span class=c1># _state_change_callbacks = []</span>
    <span class=c1>#</span>
    <span class=c1># def set_state(self, percent=None, message=None):</span>
    <span class=c1>#     &quot;&quot;&quot;Inner callback of plugin that would help to show in UI state.</span>
    <span class=c1>#</span>
    <span class=c1>#     Plugin have registered callbacks on state change which could trigger</span>
    <span class=c1>#     update message and percent in UI and repaint the change.</span>
    <span class=c1>#</span>
    <span class=c1>#     This part must be optional and should not be used to display errors</span>
    <span class=c1>#     or for logging.</span>
    <span class=c1>#</span>
    <span class=c1>#     Message should be short without details.</span>
    <span class=c1>#</span>
    <span class=c1>#     Args:</span>
    <span class=c1>#         percent(int): Percent of processing in range &lt;1-100&gt;.</span>
    <span class=c1>#         message(str): Message which will be shown to user (if in UI).</span>
    <span class=c1>#     &quot;&quot;&quot;</span>
    <span class=c1>#     if percent is not None:</span>
    <span class=c1>#         self.state_percent = percent</span>
    <span class=c1>#</span>
    <span class=c1>#     if message:</span>
    <span class=c1>#         self.state_message = message</span>
    <span class=c1>#</span>
    <span class=c1>#     for callback in self._state_change_callbacks:</span>
    <span class=c1>#         callback(self)</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>register_create_context_callbacks</span><span class=p>(</span>
        <span class=bp>cls</span><span class=p>,</span> <span class=n>create_context</span><span class=p>:</span> <span class=s2>&quot;CreateContext&quot;</span>
    <span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Register callbacks for create context.</span>

<span class=sd>        It is possible to register callbacks listening to changes happened</span>
<span class=sd>        in create context.</span>

<span class=sd>        Methods available on create context:</span>
<span class=sd>        - add_instances_added_callback</span>
<span class=sd>        - add_instances_removed_callback</span>
<span class=sd>        - add_value_changed_callback</span>
<span class=sd>        - add_pre_create_attr_defs_change_callback</span>
<span class=sd>        - add_create_attr_defs_change_callback</span>
<span class=sd>        - add_publish_attr_defs_change_callback</span>

<span class=sd>        Args:</span>
<span class=sd>            create_context (CreateContext): Create context.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>pass</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>get_attribute_defs</span><span class=p>(</span><span class=bp>cls</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Publish attribute definitions.</span>

<span class=sd>        Attributes available for all families in plugin&#39;s `families` attribute.</span>

<span class=sd>        Returns:</span>
<span class=sd>            list[AbstractAttrDef]: Attribute definitions for plugin.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=p>[]</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>get_attr_defs_for_context</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>create_context</span><span class=p>:</span> <span class=s2>&quot;CreateContext&quot;</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Publish attribute definitions for context.</span>

<span class=sd>        Attributes available for all families in plugin&#39;s `families` attribute.</span>

<span class=sd>        Args:</span>
<span class=sd>            create_context (CreateContext): Create context.</span>

<span class=sd>        Returns:</span>
<span class=sd>            list[AbstractAttrDef]: Attribute definitions for plugin.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=bp>cls</span><span class=o>.</span><span class=n>__instanceEnabled__</span><span class=p>:</span>
            <span class=k>return</span> <span class=p>[]</span>
        <span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>get_attribute_defs</span><span class=p>()</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>instance_matches_plugin_families</span><span class=p>(</span>
        <span class=bp>cls</span><span class=p>,</span> <span class=n>instance</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=s2>&quot;CreatedInstance&quot;</span><span class=p>]</span>
    <span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Check if instance matches families.</span>

<span class=sd>        Args:</span>
<span class=sd>            instance (Optional[CreatedInstance]): Instance to check. Or None</span>
<span class=sd>                for context.</span>

<span class=sd>        Returns:</span>
<span class=sd>            bool: True if instance matches plugin families.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=n>instance</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span> <span class=ow>not</span> <span class=bp>cls</span><span class=o>.</span><span class=n>__instanceEnabled__</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=bp>cls</span><span class=o>.</span><span class=n>__instanceEnabled__</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>False</span>

        <span class=n>families</span> <span class=o>=</span> <span class=p>[</span><span class=n>instance</span><span class=o>.</span><span class=n>product_type</span><span class=p>]</span>
        <span class=n>families</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>instance</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;families&quot;</span><span class=p>,</span> <span class=p>[]))</span>
        <span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=n>pyblish</span><span class=o>.</span><span class=n>logic</span><span class=o>.</span><span class=n>plugins_by_families</span><span class=p>([</span><span class=bp>cls</span><span class=p>],</span> <span class=n>families</span><span class=p>):</span>
            <span class=k>return</span> <span class=kc>True</span>
        <span class=k>return</span> <span class=kc>False</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>get_attr_defs_for_instance</span><span class=p>(</span>
        <span class=bp>cls</span><span class=p>,</span> <span class=n>create_context</span><span class=p>:</span> <span class=s2>&quot;CreateContext&quot;</span><span class=p>,</span> <span class=n>instance</span><span class=p>:</span> <span class=s2>&quot;CreatedInstance&quot;</span>
    <span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Publish attribute definitions for an instance.</span>

<span class=sd>        Attributes available for all families in plugin&#39;s `families` attribute.</span>

<span class=sd>        Args:</span>
<span class=sd>            create_context (CreateContext): Create context.</span>
<span class=sd>            instance (CreatedInstance): Instance for which attributes are</span>
<span class=sd>                collected.</span>

<span class=sd>        Returns:</span>
<span class=sd>            list[AbstractAttrDef]: Attribute definitions for plugin.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>cls</span><span class=o>.</span><span class=n>instance_matches_plugin_families</span><span class=p>(</span><span class=n>instance</span><span class=p>):</span>
            <span class=k>return</span> <span class=p>[]</span>
        <span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>get_attribute_defs</span><span class=p>()</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>convert_attribute_values</span><span class=p>(</span>
        <span class=bp>cls</span><span class=p>,</span> <span class=n>create_context</span><span class=p>:</span> <span class=s2>&quot;CreateContext&quot;</span><span class=p>,</span> <span class=n>instance</span><span class=p>:</span> <span class=s2>&quot;CreatedInstance&quot;</span>
    <span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Convert attribute values for instance.</span>

<span class=sd>        Args:</span>
<span class=sd>            create_context (CreateContext): Create context.</span>
<span class=sd>            instance (CreatedInstance): Instance for which attributes are</span>
<span class=sd>                converted.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span>

    <span class=nd>@staticmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>get_attr_values_from_data_for_plugin</span><span class=p>(</span><span class=n>plugin</span><span class=p>,</span> <span class=n>data</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get attribute values for attribute definitions from data.</span>

<span class=sd>        Args:</span>
<span class=sd>            plugin (Union[publish.api.Plugin, Type[publish.api.Plugin]]): The</span>
<span class=sd>                plugin for which attributes are extracted.</span>
<span class=sd>            data(dict): Data from instance or context.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>inspect</span><span class=o>.</span><span class=n>isclass</span><span class=p>(</span><span class=n>plugin</span><span class=p>):</span>
            <span class=n>plugin</span> <span class=o>=</span> <span class=n>plugin</span><span class=o>.</span><span class=vm>__class__</span>

        <span class=k>return</span> <span class=p>(</span>
            <span class=n>data</span>
            <span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;publish_attributes&quot;</span><span class=p>,</span> <span class=p>{})</span>
            <span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>plugin</span><span class=o>.</span><span class=vm>__name__</span><span class=p>,</span> <span class=p>{})</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_attr_values_from_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>data</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get attribute values for attribute definitions from data.</span>

<span class=sd>        Args:</span>
<span class=sd>            data(dict): Data from instance or context.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_attr_values_from_data_for_plugin</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=p>,</span> <span class=n>data</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.publish.AYONPyblishPluginMixin.convert_attribute_values class="doc doc-heading"> <code class="highlight language-python"><span class=n>convert_attribute_values</span><span class=p>(</span><span class=n>create_context</span><span class=p>,</span> <span class=n>instance</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Convert attribute values for instance.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>create_context</code> </td> <td> <code><span title=ayon_core.pipeline.create.CreateContext>CreateContext</span></code> </td> <td> <div class=doc-md-description> <p>Create context.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>instance</code> </td> <td> <code><span title=ayon_core.pipeline.create.CreatedInstance>CreatedInstance</span></code> </td> <td> <div class=doc-md-description> <p>Instance for which attributes are converted.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/publish_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@classmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>convert_attribute_values</span><span class=p>(</span>
    <span class=bp>cls</span><span class=p>,</span> <span class=n>create_context</span><span class=p>:</span> <span class=s2>&quot;CreateContext&quot;</span><span class=p>,</span> <span class=n>instance</span><span class=p>:</span> <span class=s2>&quot;CreatedInstance&quot;</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Convert attribute values for instance.</span>

<span class=sd>    Args:</span>
<span class=sd>        create_context (CreateContext): Create context.</span>
<span class=sd>        instance (CreatedInstance): Instance for which attributes are</span>
<span class=sd>            converted.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>return</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.publish.AYONPyblishPluginMixin.get_attr_defs_for_context class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_attr_defs_for_context</span><span class=p>(</span><span class=n>create_context</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Publish attribute definitions for context.</p> <p>Attributes available for all families in plugin's <code>families</code> attribute.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>create_context</code> </td> <td> <code><span title=ayon_core.pipeline.create.CreateContext>CreateContext</span></code> </td> <td> <div class=doc-md-description> <p>Create context.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>list[AbstractAttrDef]: Attribute definitions for plugin.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/publish_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@classmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>get_attr_defs_for_context</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>create_context</span><span class=p>:</span> <span class=s2>&quot;CreateContext&quot;</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Publish attribute definitions for context.</span>

<span class=sd>    Attributes available for all families in plugin&#39;s `families` attribute.</span>

<span class=sd>    Args:</span>
<span class=sd>        create_context (CreateContext): Create context.</span>

<span class=sd>    Returns:</span>
<span class=sd>        list[AbstractAttrDef]: Attribute definitions for plugin.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=bp>cls</span><span class=o>.</span><span class=n>__instanceEnabled__</span><span class=p>:</span>
        <span class=k>return</span> <span class=p>[]</span>
    <span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>get_attribute_defs</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.publish.AYONPyblishPluginMixin.get_attr_defs_for_instance class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_attr_defs_for_instance</span><span class=p>(</span><span class=n>create_context</span><span class=p>,</span> <span class=n>instance</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Publish attribute definitions for an instance.</p> <p>Attributes available for all families in plugin's <code>families</code> attribute.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>create_context</code> </td> <td> <code><span title=ayon_core.pipeline.create.CreateContext>CreateContext</span></code> </td> <td> <div class=doc-md-description> <p>Create context.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>instance</code> </td> <td> <code><span title=ayon_core.pipeline.create.CreatedInstance>CreatedInstance</span></code> </td> <td> <div class=doc-md-description> <p>Instance for which attributes are collected.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>list[AbstractAttrDef]: Attribute definitions for plugin.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/publish_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@classmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>get_attr_defs_for_instance</span><span class=p>(</span>
    <span class=bp>cls</span><span class=p>,</span> <span class=n>create_context</span><span class=p>:</span> <span class=s2>&quot;CreateContext&quot;</span><span class=p>,</span> <span class=n>instance</span><span class=p>:</span> <span class=s2>&quot;CreatedInstance&quot;</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Publish attribute definitions for an instance.</span>

<span class=sd>    Attributes available for all families in plugin&#39;s `families` attribute.</span>

<span class=sd>    Args:</span>
<span class=sd>        create_context (CreateContext): Create context.</span>
<span class=sd>        instance (CreatedInstance): Instance for which attributes are</span>
<span class=sd>            collected.</span>

<span class=sd>    Returns:</span>
<span class=sd>        list[AbstractAttrDef]: Attribute definitions for plugin.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=bp>cls</span><span class=o>.</span><span class=n>instance_matches_plugin_families</span><span class=p>(</span><span class=n>instance</span><span class=p>):</span>
        <span class=k>return</span> <span class=p>[]</span>
    <span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>get_attribute_defs</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.publish.AYONPyblishPluginMixin.get_attr_values_from_data class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_attr_values_from_data</span><span class=p>(</span><span class=n>data</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Get attribute values for attribute definitions from data.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>data(dict)</code> </td> <td> </td> <td> <div class=doc-md-description> <p>Data from instance or context.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/publish_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_attr_values_from_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>data</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get attribute values for attribute definitions from data.</span>

<span class=sd>    Args:</span>
<span class=sd>        data(dict): Data from instance or context.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_attr_values_from_data_for_plugin</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=p>,</span> <span class=n>data</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.publish.AYONPyblishPluginMixin.get_attr_values_from_data_for_plugin class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_attr_values_from_data_for_plugin</span><span class=p>(</span><span class=n>plugin</span><span class=p>,</span> <span class=n>data</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Get attribute values for attribute definitions from data.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>plugin</code> </td> <td> <code><span title=Union>Union</span>[<span title=client.ayon_core.pipeline.publish.api.Plugin>Plugin</span>, <span title=Type>Type</span>[<span title=client.ayon_core.pipeline.publish.api.Plugin>Plugin</span>]]</code> </td> <td> <div class=doc-md-description> <p>The plugin for which attributes are extracted.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>data(dict)</code> </td> <td> </td> <td> <div class=doc-md-description> <p>Data from instance or context.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/publish_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@staticmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>get_attr_values_from_data_for_plugin</span><span class=p>(</span><span class=n>plugin</span><span class=p>,</span> <span class=n>data</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get attribute values for attribute definitions from data.</span>

<span class=sd>    Args:</span>
<span class=sd>        plugin (Union[publish.api.Plugin, Type[publish.api.Plugin]]): The</span>
<span class=sd>            plugin for which attributes are extracted.</span>
<span class=sd>        data(dict): Data from instance or context.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>inspect</span><span class=o>.</span><span class=n>isclass</span><span class=p>(</span><span class=n>plugin</span><span class=p>):</span>
        <span class=n>plugin</span> <span class=o>=</span> <span class=n>plugin</span><span class=o>.</span><span class=vm>__class__</span>

    <span class=k>return</span> <span class=p>(</span>
        <span class=n>data</span>
        <span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;publish_attributes&quot;</span><span class=p>,</span> <span class=p>{})</span>
        <span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>plugin</span><span class=o>.</span><span class=vm>__name__</span><span class=p>,</span> <span class=p>{})</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.publish.AYONPyblishPluginMixin.get_attribute_defs class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_attribute_defs</span><span class=p>()</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Publish attribute definitions.</p> <p>Attributes available for all families in plugin's <code>families</code> attribute.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>list[AbstractAttrDef]: Attribute definitions for plugin.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/publish_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@classmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>get_attribute_defs</span><span class=p>(</span><span class=bp>cls</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Publish attribute definitions.</span>

<span class=sd>    Attributes available for all families in plugin&#39;s `families` attribute.</span>

<span class=sd>    Returns:</span>
<span class=sd>        list[AbstractAttrDef]: Attribute definitions for plugin.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>return</span> <span class=p>[]</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.publish.AYONPyblishPluginMixin.instance_matches_plugin_families class="doc doc-heading"> <code class="highlight language-python"><span class=n>instance_matches_plugin_families</span><span class=p>(</span><span class=n>instance</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Check if instance matches families.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>instance</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=ayon_core.pipeline.create.CreatedInstance>CreatedInstance</span>]</code> </td> <td> <div class=doc-md-description> <p>Instance to check. Or None for context.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>bool</code></td> <td> </td> <td> <div class=doc-md-description> <p>True if instance matches plugin families.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/publish_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@classmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>instance_matches_plugin_families</span><span class=p>(</span>
    <span class=bp>cls</span><span class=p>,</span> <span class=n>instance</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=s2>&quot;CreatedInstance&quot;</span><span class=p>]</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Check if instance matches families.</span>

<span class=sd>    Args:</span>
<span class=sd>        instance (Optional[CreatedInstance]): Instance to check. Or None</span>
<span class=sd>            for context.</span>

<span class=sd>    Returns:</span>
<span class=sd>        bool: True if instance matches plugin families.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=n>instance</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>return</span> <span class=ow>not</span> <span class=bp>cls</span><span class=o>.</span><span class=n>__instanceEnabled__</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=bp>cls</span><span class=o>.</span><span class=n>__instanceEnabled__</span><span class=p>:</span>
        <span class=k>return</span> <span class=kc>False</span>

    <span class=n>families</span> <span class=o>=</span> <span class=p>[</span><span class=n>instance</span><span class=o>.</span><span class=n>product_type</span><span class=p>]</span>
    <span class=n>families</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>instance</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;families&quot;</span><span class=p>,</span> <span class=p>[]))</span>
    <span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=n>pyblish</span><span class=o>.</span><span class=n>logic</span><span class=o>.</span><span class=n>plugins_by_families</span><span class=p>([</span><span class=bp>cls</span><span class=p>],</span> <span class=n>families</span><span class=p>):</span>
        <span class=k>return</span> <span class=kc>True</span>
    <span class=k>return</span> <span class=kc>False</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.publish.AYONPyblishPluginMixin.register_create_context_callbacks class="doc doc-heading"> <code class="highlight language-python"><span class=n>register_create_context_callbacks</span><span class=p>(</span><span class=n>create_context</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Register callbacks for create context.</p> <p>It is possible to register callbacks listening to changes happened in create context.</p> <p>Methods available on create context: - add_instances_added_callback - add_instances_removed_callback - add_value_changed_callback - add_pre_create_attr_defs_change_callback - add_create_attr_defs_change_callback - add_publish_attr_defs_change_callback</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>create_context</code> </td> <td> <code><span title=ayon_core.pipeline.create.CreateContext>CreateContext</span></code> </td> <td> <div class=doc-md-description> <p>Create context.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/publish_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@classmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>register_create_context_callbacks</span><span class=p>(</span>
    <span class=bp>cls</span><span class=p>,</span> <span class=n>create_context</span><span class=p>:</span> <span class=s2>&quot;CreateContext&quot;</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Register callbacks for create context.</span>

<span class=sd>    It is possible to register callbacks listening to changes happened</span>
<span class=sd>    in create context.</span>

<span class=sd>    Methods available on create context:</span>
<span class=sd>    - add_instances_added_callback</span>
<span class=sd>    - add_instances_removed_callback</span>
<span class=sd>    - add_value_changed_callback</span>
<span class=sd>    - add_pre_create_attr_defs_change_callback</span>
<span class=sd>    - add_create_attr_defs_change_callback</span>
<span class=sd>    - add_publish_attr_defs_change_callback</span>

<span class=sd>    Args:</span>
<span class=sd>        create_context (CreateContext): Create context.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.publish.AbstractCollectRender class="doc doc-heading"> <code>AbstractCollectRender</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=pyblish.api.ContextPlugin>ContextPlugin</span></code></p> <p>Gather all publishable render layers from renderSetup.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/abstract_collect_render.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span>
<span class=normal>277</span>
<span class=normal>278</span>
<span class=normal>279</span>
<span class=normal>280</span>
<span class=normal>281</span>
<span class=normal>282</span>
<span class=normal>283</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>AbstractCollectRender</span><span class=p>(</span>
    <span class=n>pyblish</span><span class=o>.</span><span class=n>api</span><span class=o>.</span><span class=n>ContextPlugin</span><span class=p>,</span> <span class=n>metaclass</span><span class=o>=</span><span class=n>AbstractMetaContextPlugin</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Gather all publishable render layers from renderSetup.&quot;&quot;&quot;</span>

    <span class=n>order</span> <span class=o>=</span> <span class=n>pyblish</span><span class=o>.</span><span class=n>api</span><span class=o>.</span><span class=n>CollectorOrder</span> <span class=o>+</span> <span class=mf>0.01</span>
    <span class=n>label</span> <span class=o>=</span> <span class=s2>&quot;Collect Render&quot;</span>
    <span class=n>sync_workfile_version</span> <span class=o>=</span> <span class=kc>False</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Constructor.&quot;&quot;&quot;</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>AbstractCollectRender</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_file_path</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_context</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=k>def</span><span class=w> </span><span class=nf>process</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>context</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Entry point to collector.&quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_context</span> <span class=o>=</span> <span class=n>context</span>
        <span class=k>for</span> <span class=n>instance</span> <span class=ow>in</span> <span class=n>context</span><span class=p>:</span>
            <span class=c1># make sure workfile instance publishing is enabled</span>
            <span class=k>try</span><span class=p>:</span>
                <span class=k>if</span> <span class=s2>&quot;workfile&quot;</span> <span class=ow>in</span> <span class=n>instance</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;families&quot;</span><span class=p>]:</span>
                    <span class=n>instance</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;publish&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>True</span>
                <span class=c1># TODO merge renderFarm and render.farm</span>
                <span class=k>if</span> <span class=p>(</span><span class=s2>&quot;renderFarm&quot;</span> <span class=ow>in</span> <span class=n>instance</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;families&quot;</span><span class=p>]</span> <span class=ow>or</span>
                        <span class=s2>&quot;render.farm&quot;</span> <span class=ow>in</span> <span class=n>instance</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;families&quot;</span><span class=p>]):</span>
                    <span class=n>instance</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;remove&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>True</span>
            <span class=k>except</span> <span class=ne>KeyError</span><span class=p>:</span>
                <span class=c1># be tolerant if &#39;families&#39; is missing.</span>
                <span class=k>pass</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_file_path</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;currentFile&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s2>&quot;</span><span class=se>\\</span><span class=s2>&quot;</span><span class=p>,</span> <span class=s2>&quot;/&quot;</span><span class=p>)</span>

        <span class=n>render_instances</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_instances</span><span class=p>(</span><span class=n>context</span><span class=p>)</span>
        <span class=k>for</span> <span class=n>render_instance</span> <span class=ow>in</span> <span class=n>render_instances</span><span class=p>:</span>
            <span class=n>exp_files</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_expected_files</span><span class=p>(</span><span class=n>render_instance</span><span class=p>)</span>
            <span class=k>assert</span> <span class=n>exp_files</span><span class=p>,</span> <span class=s2>&quot;no file names were generated, this is bug&quot;</span>

            <span class=c1># if we want to attach render to product, check if we have AOV&#39;s</span>
            <span class=c1># in expectedFiles. If so, raise error as we cannot attach AOV</span>
            <span class=c1># (considered to be product on its own) to another product</span>
            <span class=k>if</span> <span class=n>render_instance</span><span class=o>.</span><span class=n>attachTo</span><span class=p>:</span>
                <span class=k>assert</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>exp_files</span><span class=p>,</span> <span class=nb>list</span><span class=p>),</span> <span class=p>(</span>
                    <span class=s2>&quot;attaching multiple AOVs or renderable cameras to &quot;</span>
                    <span class=s2>&quot;product is not supported&quot;</span>
                <span class=p>)</span>

            <span class=n>frame_start_render</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>render_instance</span><span class=o>.</span><span class=n>frameStart</span><span class=p>)</span>
            <span class=n>frame_end_render</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>render_instance</span><span class=o>.</span><span class=n>frameEnd</span><span class=p>)</span>
            <span class=c1># TODO: Refactor hacky frame range workaround below</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>render_instance</span><span class=o>.</span><span class=n>ignoreFrameHandleCheck</span> <span class=ow>or</span>
                    <span class=nb>int</span><span class=p>(</span><span class=n>context</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s1>&#39;frameStartHandle&#39;</span><span class=p>])</span> <span class=o>==</span> <span class=n>frame_start_render</span>
                    <span class=ow>and</span> <span class=nb>int</span><span class=p>(</span><span class=n>context</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s1>&#39;frameEndHandle&#39;</span><span class=p>])</span> <span class=o>==</span> <span class=n>frame_end_render</span><span class=p>):</span>  <span class=c1># noqa: W503, E501</span>
                <span class=c1># only for Harmony where frame range cannot be set by DB</span>
                <span class=n>handle_start</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s1>&#39;handleStart&#39;</span><span class=p>]</span>
                <span class=n>handle_end</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s1>&#39;handleEnd&#39;</span><span class=p>]</span>
                <span class=n>frame_start</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s1>&#39;frameStart&#39;</span><span class=p>]</span>
                <span class=n>frame_end</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s1>&#39;frameEnd&#39;</span><span class=p>]</span>
                <span class=n>frame_start_handle</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s1>&#39;frameStartHandle&#39;</span><span class=p>]</span>
                <span class=n>frame_end_handle</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s1>&#39;frameEndHandle&#39;</span><span class=p>]</span>
            <span class=k>elif</span> <span class=p>(</span><span class=nb>hasattr</span><span class=p>(</span><span class=n>render_instance</span><span class=p>,</span> <span class=s2>&quot;frameStartHandle&quot;</span><span class=p>)</span>
                  <span class=ow>and</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>render_instance</span><span class=p>,</span> <span class=s2>&quot;frameEndHandle&quot;</span><span class=p>)):</span>
                <span class=n>handle_start</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>render_instance</span><span class=o>.</span><span class=n>handleStart</span><span class=p>)</span>
                <span class=n>handle_end</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>render_instance</span><span class=o>.</span><span class=n>handleEnd</span><span class=p>)</span>
                <span class=n>frame_start</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>render_instance</span><span class=o>.</span><span class=n>frameStart</span><span class=p>)</span>
                <span class=n>frame_end</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>render_instance</span><span class=o>.</span><span class=n>frameEnd</span><span class=p>)</span>
                <span class=n>frame_start_handle</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>render_instance</span><span class=o>.</span><span class=n>frameStartHandle</span><span class=p>)</span>
                <span class=n>frame_end_handle</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>render_instance</span><span class=o>.</span><span class=n>frameEndHandle</span><span class=p>)</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=n>handle_start</span> <span class=o>=</span> <span class=mi>0</span>
                <span class=n>handle_end</span> <span class=o>=</span> <span class=mi>0</span>
                <span class=n>frame_start</span> <span class=o>=</span> <span class=n>frame_start_render</span>
                <span class=n>frame_end</span> <span class=o>=</span> <span class=n>frame_end_render</span>
                <span class=n>frame_start_handle</span> <span class=o>=</span> <span class=n>frame_start_render</span>
                <span class=n>frame_end_handle</span> <span class=o>=</span> <span class=n>frame_end_render</span>

            <span class=n>data</span> <span class=o>=</span> <span class=p>{</span>
                <span class=s2>&quot;handleStart&quot;</span><span class=p>:</span> <span class=n>handle_start</span><span class=p>,</span>
                <span class=s2>&quot;handleEnd&quot;</span><span class=p>:</span> <span class=n>handle_end</span><span class=p>,</span>
                <span class=s2>&quot;frameStart&quot;</span><span class=p>:</span> <span class=n>frame_start</span><span class=p>,</span>
                <span class=s2>&quot;frameEnd&quot;</span><span class=p>:</span> <span class=n>frame_end</span><span class=p>,</span>
                <span class=s2>&quot;frameStartHandle&quot;</span><span class=p>:</span> <span class=n>frame_start_handle</span><span class=p>,</span>
                <span class=s2>&quot;frameEndHandle&quot;</span><span class=p>:</span> <span class=n>frame_end_handle</span><span class=p>,</span>
                <span class=s2>&quot;byFrameStep&quot;</span><span class=p>:</span> <span class=nb>int</span><span class=p>(</span><span class=n>render_instance</span><span class=o>.</span><span class=n>frameStep</span><span class=p>),</span>

                <span class=s2>&quot;author&quot;</span><span class=p>:</span> <span class=n>context</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;user&quot;</span><span class=p>],</span>
                <span class=c1># Add source to allow tracing back to the scene from</span>
                <span class=c1># which was submitted originally</span>
                <span class=s2>&quot;expectedFiles&quot;</span><span class=p>:</span> <span class=n>exp_files</span><span class=p>,</span>
            <span class=p>}</span>
            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>sync_workfile_version</span><span class=p>:</span>
                <span class=n>data</span><span class=p>[</span><span class=s2>&quot;version&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;version&quot;</span><span class=p>]</span>

            <span class=c1># add additional data</span>
            <span class=n>data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>add_additional_data</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>

            <span class=n>instance</span> <span class=o>=</span> <span class=n>render_instance</span><span class=o>.</span><span class=n>source_instance</span>
            <span class=k>if</span> <span class=n>instance</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
                <span class=n>instance</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>create_instance</span><span class=p>(</span><span class=n>render_instance</span><span class=o>.</span><span class=n>name</span><span class=p>)</span>

            <span class=n>render_instance_dict</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>asdict</span><span class=p>(</span><span class=n>render_instance</span><span class=p>)</span>
            <span class=n>instance</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>render_instance_dict</span><span class=p>)</span>
            <span class=n>instance</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>post_collecting_action</span><span class=p>()</span>

    <span class=nd>@abstractmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>get_instances</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>context</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get all renderable instances and their data.</span>

<span class=sd>        Args:</span>
<span class=sd>            context (pyblish.api.Context): Context object.</span>

<span class=sd>        Returns:</span>
<span class=sd>            list of :class:`RenderInstance`: All collected renderable instances</span>
<span class=sd>                (like render layers, write nodes, etc.)</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>pass</span>

    <span class=nd>@abstractmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>get_expected_files</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>render_instance</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get list of expected files.</span>

<span class=sd>        Returns:</span>
<span class=sd>            list: expected files. This can be either simple list of files with</span>
<span class=sd>                their paths, or list of dictionaries, where key is name of AOV</span>
<span class=sd>                for example and value is list of files for that AOV.</span>

<span class=sd>        Example::</span>

<span class=sd>            [&#39;/path/to/file.001.exr&#39;, &#39;/path/to/file.002.exr&#39;]</span>

<span class=sd>            or as dictionary:</span>

<span class=sd>            [</span>
<span class=sd>                {</span>
<span class=sd>                    &quot;beauty&quot;: [&#39;/path/to/beauty.001.exr&#39;, ...],</span>
<span class=sd>                    &quot;mask&quot;: [&#39;/path/to/mask.001.exr&#39;]</span>
<span class=sd>                }</span>
<span class=sd>            ]</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>pass</span>

    <span class=k>def</span><span class=w> </span><span class=nf>add_additional_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>data</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Add additional data to collected instance.</span>

<span class=sd>        This can be overridden by host implementation to add custom</span>
<span class=sd>        additional data.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=n>data</span>

    <span class=k>def</span><span class=w> </span><span class=nf>post_collecting_action</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Execute some code after collection is done.</span>

<span class=sd>        This is useful for example for restoring current render layer.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.publish.AbstractCollectRender.__init__ class="doc doc-heading"> <code class="highlight language-python"><span class=fm>__init__</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Constructor.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/abstract_collect_render.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Constructor.&quot;&quot;&quot;</span>
    <span class=nb>super</span><span class=p>(</span><span class=n>AbstractCollectRender</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_file_path</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_context</span> <span class=o>=</span> <span class=kc>None</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.publish.AbstractCollectRender.add_additional_data class="doc doc-heading"> <code class="highlight language-python"><span class=n>add_additional_data</span><span class=p>(</span><span class=n>data</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Add additional data to collected instance.</p> <p>This can be overridden by host implementation to add custom additional data.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/abstract_collect_render.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>add_additional_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>data</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Add additional data to collected instance.</span>

<span class=sd>    This can be overridden by host implementation to add custom</span>
<span class=sd>    additional data.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>return</span> <span class=n>data</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.publish.AbstractCollectRender.get_expected_files class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_expected_files</span><span class=p>(</span><span class=n>render_instance</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Get list of expected files.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>list</code></td> <td> </td> <td> <div class=doc-md-description> <p>expected files. This can be either simple list of files with their paths, or list of dictionaries, where key is name of AOV for example and value is list of files for that AOV.</p> </div> </td> </tr> </tbody> </table> <p>Example::</p> <pre><code>['/path/to/file.001.exr', '/path/to/file.002.exr']

or as dictionary:

[
    {
        "beauty": ['/path/to/beauty.001.exr', ...],
        "mask": ['/path/to/mask.001.exr']
    }
]
</code></pre> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/abstract_collect_render.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@abstractmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>get_expected_files</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>render_instance</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get list of expected files.</span>

<span class=sd>    Returns:</span>
<span class=sd>        list: expected files. This can be either simple list of files with</span>
<span class=sd>            their paths, or list of dictionaries, where key is name of AOV</span>
<span class=sd>            for example and value is list of files for that AOV.</span>

<span class=sd>    Example::</span>

<span class=sd>        [&#39;/path/to/file.001.exr&#39;, &#39;/path/to/file.002.exr&#39;]</span>

<span class=sd>        or as dictionary:</span>

<span class=sd>        [</span>
<span class=sd>            {</span>
<span class=sd>                &quot;beauty&quot;: [&#39;/path/to/beauty.001.exr&#39;, ...],</span>
<span class=sd>                &quot;mask&quot;: [&#39;/path/to/mask.001.exr&#39;]</span>
<span class=sd>            }</span>
<span class=sd>        ]</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.publish.AbstractCollectRender.get_instances class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_instances</span><span class=p>(</span><span class=n>context</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Get all renderable instances and their data.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>context</code> </td> <td> <code><span title=pyblish.api.Context>Context</span></code> </td> <td> <div class=doc-md-description> <p>Context object.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>list of :class:<code>RenderInstance</code>: All collected renderable instances (like render layers, write nodes, etc.)</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/abstract_collect_render.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@abstractmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>get_instances</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>context</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get all renderable instances and their data.</span>

<span class=sd>    Args:</span>
<span class=sd>        context (pyblish.api.Context): Context object.</span>

<span class=sd>    Returns:</span>
<span class=sd>        list of :class:`RenderInstance`: All collected renderable instances</span>
<span class=sd>            (like render layers, write nodes, etc.)</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.publish.AbstractCollectRender.post_collecting_action class="doc doc-heading"> <code class="highlight language-python"><span class=n>post_collecting_action</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Execute some code after collection is done.</p> <p>This is useful for example for restoring current render layer.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/abstract_collect_render.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>277</span>
<span class=normal>278</span>
<span class=normal>279</span>
<span class=normal>280</span>
<span class=normal>281</span>
<span class=normal>282</span>
<span class=normal>283</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>post_collecting_action</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Execute some code after collection is done.</span>

<span class=sd>    This is useful for example for restoring current render layer.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.publish.AbstractCollectRender.process class="doc doc-heading"> <code class="highlight language-python"><span class=n>process</span><span class=p>(</span><span class=n>context</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Entry point to collector.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/abstract_collect_render.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>process</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>context</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Entry point to collector.&quot;&quot;&quot;</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_context</span> <span class=o>=</span> <span class=n>context</span>
    <span class=k>for</span> <span class=n>instance</span> <span class=ow>in</span> <span class=n>context</span><span class=p>:</span>
        <span class=c1># make sure workfile instance publishing is enabled</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=k>if</span> <span class=s2>&quot;workfile&quot;</span> <span class=ow>in</span> <span class=n>instance</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;families&quot;</span><span class=p>]:</span>
                <span class=n>instance</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;publish&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>True</span>
            <span class=c1># TODO merge renderFarm and render.farm</span>
            <span class=k>if</span> <span class=p>(</span><span class=s2>&quot;renderFarm&quot;</span> <span class=ow>in</span> <span class=n>instance</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;families&quot;</span><span class=p>]</span> <span class=ow>or</span>
                    <span class=s2>&quot;render.farm&quot;</span> <span class=ow>in</span> <span class=n>instance</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;families&quot;</span><span class=p>]):</span>
                <span class=n>instance</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;remove&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>True</span>
        <span class=k>except</span> <span class=ne>KeyError</span><span class=p>:</span>
            <span class=c1># be tolerant if &#39;families&#39; is missing.</span>
            <span class=k>pass</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_file_path</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;currentFile&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s2>&quot;</span><span class=se>\\</span><span class=s2>&quot;</span><span class=p>,</span> <span class=s2>&quot;/&quot;</span><span class=p>)</span>

    <span class=n>render_instances</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_instances</span><span class=p>(</span><span class=n>context</span><span class=p>)</span>
    <span class=k>for</span> <span class=n>render_instance</span> <span class=ow>in</span> <span class=n>render_instances</span><span class=p>:</span>
        <span class=n>exp_files</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_expected_files</span><span class=p>(</span><span class=n>render_instance</span><span class=p>)</span>
        <span class=k>assert</span> <span class=n>exp_files</span><span class=p>,</span> <span class=s2>&quot;no file names were generated, this is bug&quot;</span>

        <span class=c1># if we want to attach render to product, check if we have AOV&#39;s</span>
        <span class=c1># in expectedFiles. If so, raise error as we cannot attach AOV</span>
        <span class=c1># (considered to be product on its own) to another product</span>
        <span class=k>if</span> <span class=n>render_instance</span><span class=o>.</span><span class=n>attachTo</span><span class=p>:</span>
            <span class=k>assert</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>exp_files</span><span class=p>,</span> <span class=nb>list</span><span class=p>),</span> <span class=p>(</span>
                <span class=s2>&quot;attaching multiple AOVs or renderable cameras to &quot;</span>
                <span class=s2>&quot;product is not supported&quot;</span>
            <span class=p>)</span>

        <span class=n>frame_start_render</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>render_instance</span><span class=o>.</span><span class=n>frameStart</span><span class=p>)</span>
        <span class=n>frame_end_render</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>render_instance</span><span class=o>.</span><span class=n>frameEnd</span><span class=p>)</span>
        <span class=c1># TODO: Refactor hacky frame range workaround below</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>render_instance</span><span class=o>.</span><span class=n>ignoreFrameHandleCheck</span> <span class=ow>or</span>
                <span class=nb>int</span><span class=p>(</span><span class=n>context</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s1>&#39;frameStartHandle&#39;</span><span class=p>])</span> <span class=o>==</span> <span class=n>frame_start_render</span>
                <span class=ow>and</span> <span class=nb>int</span><span class=p>(</span><span class=n>context</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s1>&#39;frameEndHandle&#39;</span><span class=p>])</span> <span class=o>==</span> <span class=n>frame_end_render</span><span class=p>):</span>  <span class=c1># noqa: W503, E501</span>
            <span class=c1># only for Harmony where frame range cannot be set by DB</span>
            <span class=n>handle_start</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s1>&#39;handleStart&#39;</span><span class=p>]</span>
            <span class=n>handle_end</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s1>&#39;handleEnd&#39;</span><span class=p>]</span>
            <span class=n>frame_start</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s1>&#39;frameStart&#39;</span><span class=p>]</span>
            <span class=n>frame_end</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s1>&#39;frameEnd&#39;</span><span class=p>]</span>
            <span class=n>frame_start_handle</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s1>&#39;frameStartHandle&#39;</span><span class=p>]</span>
            <span class=n>frame_end_handle</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s1>&#39;frameEndHandle&#39;</span><span class=p>]</span>
        <span class=k>elif</span> <span class=p>(</span><span class=nb>hasattr</span><span class=p>(</span><span class=n>render_instance</span><span class=p>,</span> <span class=s2>&quot;frameStartHandle&quot;</span><span class=p>)</span>
              <span class=ow>and</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>render_instance</span><span class=p>,</span> <span class=s2>&quot;frameEndHandle&quot;</span><span class=p>)):</span>
            <span class=n>handle_start</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>render_instance</span><span class=o>.</span><span class=n>handleStart</span><span class=p>)</span>
            <span class=n>handle_end</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>render_instance</span><span class=o>.</span><span class=n>handleEnd</span><span class=p>)</span>
            <span class=n>frame_start</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>render_instance</span><span class=o>.</span><span class=n>frameStart</span><span class=p>)</span>
            <span class=n>frame_end</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>render_instance</span><span class=o>.</span><span class=n>frameEnd</span><span class=p>)</span>
            <span class=n>frame_start_handle</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>render_instance</span><span class=o>.</span><span class=n>frameStartHandle</span><span class=p>)</span>
            <span class=n>frame_end_handle</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>render_instance</span><span class=o>.</span><span class=n>frameEndHandle</span><span class=p>)</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>handle_start</span> <span class=o>=</span> <span class=mi>0</span>
            <span class=n>handle_end</span> <span class=o>=</span> <span class=mi>0</span>
            <span class=n>frame_start</span> <span class=o>=</span> <span class=n>frame_start_render</span>
            <span class=n>frame_end</span> <span class=o>=</span> <span class=n>frame_end_render</span>
            <span class=n>frame_start_handle</span> <span class=o>=</span> <span class=n>frame_start_render</span>
            <span class=n>frame_end_handle</span> <span class=o>=</span> <span class=n>frame_end_render</span>

        <span class=n>data</span> <span class=o>=</span> <span class=p>{</span>
            <span class=s2>&quot;handleStart&quot;</span><span class=p>:</span> <span class=n>handle_start</span><span class=p>,</span>
            <span class=s2>&quot;handleEnd&quot;</span><span class=p>:</span> <span class=n>handle_end</span><span class=p>,</span>
            <span class=s2>&quot;frameStart&quot;</span><span class=p>:</span> <span class=n>frame_start</span><span class=p>,</span>
            <span class=s2>&quot;frameEnd&quot;</span><span class=p>:</span> <span class=n>frame_end</span><span class=p>,</span>
            <span class=s2>&quot;frameStartHandle&quot;</span><span class=p>:</span> <span class=n>frame_start_handle</span><span class=p>,</span>
            <span class=s2>&quot;frameEndHandle&quot;</span><span class=p>:</span> <span class=n>frame_end_handle</span><span class=p>,</span>
            <span class=s2>&quot;byFrameStep&quot;</span><span class=p>:</span> <span class=nb>int</span><span class=p>(</span><span class=n>render_instance</span><span class=o>.</span><span class=n>frameStep</span><span class=p>),</span>

            <span class=s2>&quot;author&quot;</span><span class=p>:</span> <span class=n>context</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;user&quot;</span><span class=p>],</span>
            <span class=c1># Add source to allow tracing back to the scene from</span>
            <span class=c1># which was submitted originally</span>
            <span class=s2>&quot;expectedFiles&quot;</span><span class=p>:</span> <span class=n>exp_files</span><span class=p>,</span>
        <span class=p>}</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>sync_workfile_version</span><span class=p>:</span>
            <span class=n>data</span><span class=p>[</span><span class=s2>&quot;version&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;version&quot;</span><span class=p>]</span>

        <span class=c1># add additional data</span>
        <span class=n>data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>add_additional_data</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>

        <span class=n>instance</span> <span class=o>=</span> <span class=n>render_instance</span><span class=o>.</span><span class=n>source_instance</span>
        <span class=k>if</span> <span class=n>instance</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>instance</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>create_instance</span><span class=p>(</span><span class=n>render_instance</span><span class=o>.</span><span class=n>name</span><span class=p>)</span>

        <span class=n>render_instance_dict</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>asdict</span><span class=p>(</span><span class=n>render_instance</span><span class=p>)</span>
        <span class=n>instance</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>render_instance_dict</span><span class=p>)</span>
        <span class=n>instance</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>post_collecting_action</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.publish.ColormanagedPyblishPluginMixin class="doc doc-heading"> <code>ColormanagedPyblishPluginMixin</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=object>object</span></code></p> <p>Mixin for colormanaged plugins.</p> <p>This class is used to set colorspace data to a publishing representation. It contains a static method, get_colorspace_settings, which returns config and file rules data for the host context. It also contains a method, set_representation_colorspace, which sets colorspace data to the representation. The allowed file extensions are listed in the allowed_ext variable. The method first checks if the file extension is in the list of allowed extensions. If it is, it then gets the colorspace settings from the host context and gets a matching colorspace from rules. Finally, it infuses this data into the representation.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/publish_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>409</span>
<span class=normal>410</span>
<span class=normal>411</span>
<span class=normal>412</span>
<span class=normal>413</span>
<span class=normal>414</span>
<span class=normal>415</span>
<span class=normal>416</span>
<span class=normal>417</span>
<span class=normal>418</span>
<span class=normal>419</span>
<span class=normal>420</span>
<span class=normal>421</span>
<span class=normal>422</span>
<span class=normal>423</span>
<span class=normal>424</span>
<span class=normal>425</span>
<span class=normal>426</span>
<span class=normal>427</span>
<span class=normal>428</span>
<span class=normal>429</span>
<span class=normal>430</span>
<span class=normal>431</span>
<span class=normal>432</span>
<span class=normal>433</span>
<span class=normal>434</span>
<span class=normal>435</span>
<span class=normal>436</span>
<span class=normal>437</span>
<span class=normal>438</span>
<span class=normal>439</span>
<span class=normal>440</span>
<span class=normal>441</span>
<span class=normal>442</span>
<span class=normal>443</span>
<span class=normal>444</span>
<span class=normal>445</span>
<span class=normal>446</span>
<span class=normal>447</span>
<span class=normal>448</span>
<span class=normal>449</span>
<span class=normal>450</span>
<span class=normal>451</span>
<span class=normal>452</span>
<span class=normal>453</span>
<span class=normal>454</span>
<span class=normal>455</span>
<span class=normal>456</span>
<span class=normal>457</span>
<span class=normal>458</span>
<span class=normal>459</span>
<span class=normal>460</span>
<span class=normal>461</span>
<span class=normal>462</span>
<span class=normal>463</span>
<span class=normal>464</span>
<span class=normal>465</span>
<span class=normal>466</span>
<span class=normal>467</span>
<span class=normal>468</span>
<span class=normal>469</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>ColormanagedPyblishPluginMixin</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Mixin for colormanaged plugins.</span>

<span class=sd>    This class is used to set colorspace data to a publishing</span>
<span class=sd>    representation. It contains a static method,</span>
<span class=sd>    get_colorspace_settings, which returns config and</span>
<span class=sd>    file rules data for the host context.</span>
<span class=sd>    It also contains a method, set_representation_colorspace,</span>
<span class=sd>    which sets colorspace data to the representation.</span>
<span class=sd>    The allowed file extensions are listed in the allowed_ext variable.</span>
<span class=sd>    The method first checks if the file extension is in</span>
<span class=sd>    the list of allowed extensions. If it is, it then gets the</span>
<span class=sd>    colorspace settings from the host context and gets a</span>
<span class=sd>    matching colorspace from rules. Finally, it infuses this</span>
<span class=sd>    data into the representation.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_colorspace_settings</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>context</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Returns solved settings for the host context.</span>

<span class=sd>        Args:</span>
<span class=sd>            context (publish.Context): publishing context</span>

<span class=sd>        Returns:</span>
<span class=sd>            tuple | bool: config, file rules or None</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=n>get_colorspace_settings_from_publish_context</span><span class=p>(</span><span class=n>context</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_representation_colorspace</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span> <span class=n>representation</span><span class=p>,</span> <span class=n>context</span><span class=p>,</span>
        <span class=n>colorspace</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Sets colorspace data to representation.</span>

<span class=sd>        Args:</span>
<span class=sd>            representation (dict): publishing representation</span>
<span class=sd>            context (publish.Context): publishing context</span>
<span class=sd>            colorspace (str, optional): colorspace name. Defaults to None.</span>

<span class=sd>        Example:</span>
<span class=sd>            ```</span>
<span class=sd>            {</span>
<span class=sd>                # for other publish plugins and loaders</span>
<span class=sd>                &quot;colorspace&quot;: &quot;linear&quot;,</span>
<span class=sd>                &quot;config&quot;: {</span>
<span class=sd>                    # for future references in case need</span>
<span class=sd>                    &quot;path&quot;: &quot;/abs/path/to/config.ocio&quot;,</span>
<span class=sd>                    # for other plugins within remote publish cases</span>
<span class=sd>                    &quot;template&quot;: &quot;{project[root]}/path/to/config.ocio&quot;</span>
<span class=sd>                }</span>
<span class=sd>            }</span>
<span class=sd>            ```</span>

<span class=sd>        &quot;&quot;&quot;</span>

        <span class=c1># using cached settings if available</span>
        <span class=n>set_colorspace_data_to_representation</span><span class=p>(</span>
            <span class=n>representation</span><span class=p>,</span> <span class=n>context</span><span class=o>.</span><span class=n>data</span><span class=p>,</span>
            <span class=n>colorspace</span><span class=p>,</span>
            <span class=n>log</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>log</span>
        <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.publish.ColormanagedPyblishPluginMixin.get_colorspace_settings class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_colorspace_settings</span><span class=p>(</span><span class=n>context</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Returns solved settings for the host context.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>context</code> </td> <td> <code><span title=client.ayon_core.pipeline.publish.Context>Context</span></code> </td> <td> <div class=doc-md-description> <p>publishing context</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>tuple | bool: config, file rules or None</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/publish_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>426</span>
<span class=normal>427</span>
<span class=normal>428</span>
<span class=normal>429</span>
<span class=normal>430</span>
<span class=normal>431</span>
<span class=normal>432</span>
<span class=normal>433</span>
<span class=normal>434</span>
<span class=normal>435</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_colorspace_settings</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>context</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Returns solved settings for the host context.</span>

<span class=sd>    Args:</span>
<span class=sd>        context (publish.Context): publishing context</span>

<span class=sd>    Returns:</span>
<span class=sd>        tuple | bool: config, file rules or None</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>return</span> <span class=n>get_colorspace_settings_from_publish_context</span><span class=p>(</span><span class=n>context</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.publish.ColormanagedPyblishPluginMixin.set_representation_colorspace class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_representation_colorspace</span><span class=p>(</span><span class=n>representation</span><span class=p>,</span> <span class=n>context</span><span class=p>,</span> <span class=n>colorspace</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Sets colorspace data to representation.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>representation</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>publishing representation</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>context</code> </td> <td> <code><span title=client.ayon_core.pipeline.publish.Context>Context</span></code> </td> <td> <div class=doc-md-description> <p>publishing context</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>colorspace</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>colorspace name. Defaults to None.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=example open> <summary>Example</summary> <pre><code>{
    # for other publish plugins and loaders
    &quot;colorspace&quot;: &quot;linear&quot;,
    &quot;config&quot;: {
        # for future references in case need
        &quot;path&quot;: &quot;/abs/path/to/config.ocio&quot;,
        # for other plugins within remote publish cases
        &quot;template&quot;: &quot;{project[root]}/path/to/config.ocio&quot;
    }
}
</code></pre> </details> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/publish_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>437</span>
<span class=normal>438</span>
<span class=normal>439</span>
<span class=normal>440</span>
<span class=normal>441</span>
<span class=normal>442</span>
<span class=normal>443</span>
<span class=normal>444</span>
<span class=normal>445</span>
<span class=normal>446</span>
<span class=normal>447</span>
<span class=normal>448</span>
<span class=normal>449</span>
<span class=normal>450</span>
<span class=normal>451</span>
<span class=normal>452</span>
<span class=normal>453</span>
<span class=normal>454</span>
<span class=normal>455</span>
<span class=normal>456</span>
<span class=normal>457</span>
<span class=normal>458</span>
<span class=normal>459</span>
<span class=normal>460</span>
<span class=normal>461</span>
<span class=normal>462</span>
<span class=normal>463</span>
<span class=normal>464</span>
<span class=normal>465</span>
<span class=normal>466</span>
<span class=normal>467</span>
<span class=normal>468</span>
<span class=normal>469</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_representation_colorspace</span><span class=p>(</span>
    <span class=bp>self</span><span class=p>,</span> <span class=n>representation</span><span class=p>,</span> <span class=n>context</span><span class=p>,</span>
    <span class=n>colorspace</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Sets colorspace data to representation.</span>

<span class=sd>    Args:</span>
<span class=sd>        representation (dict): publishing representation</span>
<span class=sd>        context (publish.Context): publishing context</span>
<span class=sd>        colorspace (str, optional): colorspace name. Defaults to None.</span>

<span class=sd>    Example:</span>
<span class=sd>        ```</span>
<span class=sd>        {</span>
<span class=sd>            # for other publish plugins and loaders</span>
<span class=sd>            &quot;colorspace&quot;: &quot;linear&quot;,</span>
<span class=sd>            &quot;config&quot;: {</span>
<span class=sd>                # for future references in case need</span>
<span class=sd>                &quot;path&quot;: &quot;/abs/path/to/config.ocio&quot;,</span>
<span class=sd>                # for other plugins within remote publish cases</span>
<span class=sd>                &quot;template&quot;: &quot;{project[root]}/path/to/config.ocio&quot;</span>
<span class=sd>            }</span>
<span class=sd>        }</span>
<span class=sd>        ```</span>

<span class=sd>    &quot;&quot;&quot;</span>

    <span class=c1># using cached settings if available</span>
    <span class=n>set_colorspace_data_to_representation</span><span class=p>(</span>
        <span class=n>representation</span><span class=p>,</span> <span class=n>context</span><span class=o>.</span><span class=n>data</span><span class=p>,</span>
        <span class=n>colorspace</span><span class=p>,</span>
        <span class=n>log</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>log</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.publish.ExpectedFiles class="doc doc-heading"> <code>ExpectedFiles</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=abc.ABC>ABC</span></code></p> <p>Class grouping functionality for all supported renderers.</p> <p><span class=doc-section-title>Attributes:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code><span title=client.ayon_core.pipeline.publish.ExpectedFiles.multipart>multipart</span></code></td> <td> <code><span title=bool>bool</span></code> </td> <td> <div class=doc-md-description> <p>Flag if multipart exrs are used.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/abstract_expected_files.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>ExpectedFiles</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Class grouping functionality for all supported renderers.</span>

<span class=sd>    Attributes:</span>
<span class=sd>        multipart (bool): Flag if multipart exrs are used.</span>

<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>multipart</span> <span class=o>=</span> <span class=kc>False</span>

    <span class=nd>@abstractmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>render_instance</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get expected files for given renderer and render layer.</span>

<span class=sd>        This method should return dictionary of all files we are expecting</span>
<span class=sd>        to be rendered from the host. Usually `render_instance` corresponds</span>
<span class=sd>        to *render layer*. Result can be either flat list with the file</span>
<span class=sd>        paths or it can be list of dictionaries. Each key corresponds to</span>
<span class=sd>        for example AOV name or channel, etc.</span>

<span class=sd>        Example::</span>

<span class=sd>            [&#39;/path/to/file.001.exr&#39;, &#39;/path/to/file.002.exr&#39;]</span>

<span class=sd>            or as dictionary:</span>

<span class=sd>            [</span>
<span class=sd>                {</span>
<span class=sd>                    &quot;beauty&quot;: [&#39;/path/to/beauty.001.exr&#39;, ...],</span>
<span class=sd>                    &quot;mask&quot;: [&#39;/path/to/mask.001.exr&#39;]</span>
<span class=sd>                }</span>
<span class=sd>            ]</span>


<span class=sd>        Args:</span>
<span class=sd>            render_instance (:class:`RenderInstance`): Data passed from</span>
<span class=sd>                collector to determine files. This should be instance of</span>
<span class=sd>                :class:`abstract_collect_render.RenderInstance`</span>

<span class=sd>        Returns:</span>
<span class=sd>            list: Full paths to expected rendered files.</span>
<span class=sd>            list of dict: Path to expected rendered files categorized by</span>
<span class=sd>                AOVs, etc.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>raise</span> <span class=ne>NotImplementedError</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.publish.ExpectedFiles.get class="doc doc-heading"> <code class="highlight language-python"><span class=n>get</span><span class=p>(</span><span class=n>render_instance</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Get expected files for given renderer and render layer.</p> <p>This method should return dictionary of all files we are expecting to be rendered from the host. Usually <code>render_instance</code> corresponds to <em>render layer</em>. Result can be either flat list with the file paths or it can be list of dictionaries. Each key corresponds to for example AOV name or channel, etc.</p> <p>Example::</p> <pre><code>['/path/to/file.001.exr', '/path/to/file.002.exr']

or as dictionary:

[
    {
        "beauty": ['/path/to/beauty.001.exr', ...],
        "mask": ['/path/to/mask.001.exr']
    }
]
</code></pre> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>render_instance</code> </td> <td> </td> <td> <div class=doc-md-description> <p>class:<code>RenderInstance</code>): Data passed from collector to determine files. This should be instance of :class:<code>abstract_collect_render.RenderInstance</code></p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>list</code></td> <td> </td> <td> <div class=doc-md-description> <p>Full paths to expected rendered files.</p> </div> </td> </tr> <tr class=doc-section-item> <td></td> <td> </td> <td> <div class=doc-md-description> <p>list of dict: Path to expected rendered files categorized by AOVs, etc.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/abstract_expected_files.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@abstractmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>render_instance</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get expected files for given renderer and render layer.</span>

<span class=sd>    This method should return dictionary of all files we are expecting</span>
<span class=sd>    to be rendered from the host. Usually `render_instance` corresponds</span>
<span class=sd>    to *render layer*. Result can be either flat list with the file</span>
<span class=sd>    paths or it can be list of dictionaries. Each key corresponds to</span>
<span class=sd>    for example AOV name or channel, etc.</span>

<span class=sd>    Example::</span>

<span class=sd>        [&#39;/path/to/file.001.exr&#39;, &#39;/path/to/file.002.exr&#39;]</span>

<span class=sd>        or as dictionary:</span>

<span class=sd>        [</span>
<span class=sd>            {</span>
<span class=sd>                &quot;beauty&quot;: [&#39;/path/to/beauty.001.exr&#39;, ...],</span>
<span class=sd>                &quot;mask&quot;: [&#39;/path/to/mask.001.exr&#39;]</span>
<span class=sd>            }</span>
<span class=sd>        ]</span>


<span class=sd>    Args:</span>
<span class=sd>        render_instance (:class:`RenderInstance`): Data passed from</span>
<span class=sd>            collector to determine files. This should be instance of</span>
<span class=sd>            :class:`abstract_collect_render.RenderInstance`</span>

<span class=sd>    Returns:</span>
<span class=sd>        list: Full paths to expected rendered files.</span>
<span class=sd>        list of dict: Path to expected rendered files categorized by</span>
<span class=sd>            AOVs, etc.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>raise</span> <span class=ne>NotImplementedError</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.publish.Extractor class="doc doc-heading"> <code>Extractor</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=pyblish.api.InstancePlugin>InstancePlugin</span></code></p> <p>Extractor base class.</p> <p>The extractor base class implements a "staging_dir" function used to generate a temporary directory for an instance to extract to.</p> <p>This temporary directory is generated through <code>tempfile.mkdtemp()</code></p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/publish_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>387</span>
<span class=normal>388</span>
<span class=normal>389</span>
<span class=normal>390</span>
<span class=normal>391</span>
<span class=normal>392</span>
<span class=normal>393</span>
<span class=normal>394</span>
<span class=normal>395</span>
<span class=normal>396</span>
<span class=normal>397</span>
<span class=normal>398</span>
<span class=normal>399</span>
<span class=normal>400</span>
<span class=normal>401</span>
<span class=normal>402</span>
<span class=normal>403</span>
<span class=normal>404</span>
<span class=normal>405</span>
<span class=normal>406</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>Extractor</span><span class=p>(</span><span class=n>pyblish</span><span class=o>.</span><span class=n>api</span><span class=o>.</span><span class=n>InstancePlugin</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Extractor base class.</span>

<span class=sd>    The extractor base class implements a &quot;staging_dir&quot; function used to</span>
<span class=sd>    generate a temporary directory for an instance to extract to.</span>

<span class=sd>    This temporary directory is generated through `tempfile.mkdtemp()`</span>

<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>order</span> <span class=o>=</span> <span class=mf>2.0</span>

    <span class=k>def</span><span class=w> </span><span class=nf>staging_dir</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instance</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Provide a temporary directory in which to store extracted files</span>

<span class=sd>        Upon calling this method the staging directory is stored inside</span>
<span class=sd>        the instance.data[&#39;stagingDir&#39;]</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=n>get_instance_staging_dir</span><span class=p>(</span><span class=n>instance</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.publish.Extractor.staging_dir class="doc doc-heading"> <code class="highlight language-python"><span class=n>staging_dir</span><span class=p>(</span><span class=n>instance</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Provide a temporary directory in which to store extracted files</p> <p>Upon calling this method the staging directory is stored inside the instance.data['stagingDir']</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/publish_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>399</span>
<span class=normal>400</span>
<span class=normal>401</span>
<span class=normal>402</span>
<span class=normal>403</span>
<span class=normal>404</span>
<span class=normal>405</span>
<span class=normal>406</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>staging_dir</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>instance</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Provide a temporary directory in which to store extracted files</span>

<span class=sd>    Upon calling this method the staging directory is stored inside</span>
<span class=sd>    the instance.data[&#39;stagingDir&#39;]</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=n>get_instance_staging_dir</span><span class=p>(</span><span class=n>instance</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.publish.KnownPublishError class="doc doc-heading"> <code>KnownPublishError</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=Exception>Exception</span></code></p> <p>Publishing crashed because of known error.</p> <p>Artist can't affect source of the error.</p> <details class=deprecated open> <summary>Deprecated</summary> <p>Please use <code>PublishError</code> instead. Marked as deprecated 24/09/02.</p> </details> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/publish_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>KnownPublishError</span><span class=p>(</span><span class=ne>Exception</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Publishing crashed because of known error.</span>

<span class=sd>    Artist can&#39;t affect source of the error.</span>

<span class=sd>    Deprecated:</span>
<span class=sd>        Please use `PublishError` instead. Marked as deprecated 24/09/02.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.publish.OptionalPyblishPluginMixin class="doc doc-heading"> <code>OptionalPyblishPluginMixin</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="AYONPyblishPluginMixin (client.ayon_core.pipeline.publish.publish_plugins.AYONPyblishPluginMixin)" href=publish_plugins.html#client.ayon_core.pipeline.publish.publish_plugins.AYONPyblishPluginMixin>AYONPyblishPluginMixin</a></code></p> <p>Prepare mixin for optional plugins.</p> <p>Defined active attribute definition prepared for published and prepares method which will check if is active or not.</p> <pre><code>class ValidateScene(
    pyblish.api.InstancePlugin, OptionalPyblishPluginMixin
):
    def process(self, instance):
        # Skip the instance if is not active by data on the instance
        if not self.is_active(instance.data):
            return
</code></pre> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/publish_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>278</span>
<span class=normal>279</span>
<span class=normal>280</span>
<span class=normal>281</span>
<span class=normal>282</span>
<span class=normal>283</span>
<span class=normal>284</span>
<span class=normal>285</span>
<span class=normal>286</span>
<span class=normal>287</span>
<span class=normal>288</span>
<span class=normal>289</span>
<span class=normal>290</span>
<span class=normal>291</span>
<span class=normal>292</span>
<span class=normal>293</span>
<span class=normal>294</span>
<span class=normal>295</span>
<span class=normal>296</span>
<span class=normal>297</span>
<span class=normal>298</span>
<span class=normal>299</span>
<span class=normal>300</span>
<span class=normal>301</span>
<span class=normal>302</span>
<span class=normal>303</span>
<span class=normal>304</span>
<span class=normal>305</span>
<span class=normal>306</span>
<span class=normal>307</span>
<span class=normal>308</span>
<span class=normal>309</span>
<span class=normal>310</span>
<span class=normal>311</span>
<span class=normal>312</span>
<span class=normal>313</span>
<span class=normal>314</span>
<span class=normal>315</span>
<span class=normal>316</span>
<span class=normal>317</span>
<span class=normal>318</span>
<span class=normal>319</span>
<span class=normal>320</span>
<span class=normal>321</span>
<span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span>
<span class=normal>325</span>
<span class=normal>326</span>
<span class=normal>327</span>
<span class=normal>328</span>
<span class=normal>329</span>
<span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>OptionalPyblishPluginMixin</span><span class=p>(</span><span class=n>AYONPyblishPluginMixin</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Prepare mixin for optional plugins.</span>

<span class=sd>    Defined active attribute definition prepared for published and</span>
<span class=sd>    prepares method which will check if is active or not.</span>

<span class=sd>    ```</span>
<span class=sd>    class ValidateScene(</span>
<span class=sd>        pyblish.api.InstancePlugin, OptionalPyblishPluginMixin</span>
<span class=sd>    ):</span>
<span class=sd>        def process(self, instance):</span>
<span class=sd>            # Skip the instance if is not active by data on the instance</span>
<span class=sd>            if not self.is_active(instance.data):</span>
<span class=sd>                return</span>
<span class=sd>    ```</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=c1># Allow exposing tooltip from class with `optional_tooltip` attribute</span>
    <span class=n>optional_tooltip</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>get_attribute_defs</span><span class=p>(</span><span class=bp>cls</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Attribute definitions based on plugin&#39;s optional attribute.&quot;&quot;&quot;</span>

        <span class=c1># Empty list if plugin is not optional</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=nb>getattr</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=s2>&quot;optional&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>):</span>
            <span class=k>return</span> <span class=p>[]</span>

        <span class=c1># Get active value from class as default value</span>
        <span class=n>active</span> <span class=o>=</span> <span class=nb>getattr</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=s2>&quot;active&quot;</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>
        <span class=c1># Return boolean stored under &#39;active&#39; key with label of the class name</span>
        <span class=n>label</span> <span class=o>=</span> <span class=bp>cls</span><span class=o>.</span><span class=n>label</span> <span class=ow>or</span> <span class=bp>cls</span><span class=o>.</span><span class=vm>__name__</span>

        <span class=k>return</span> <span class=p>[</span>
            <span class=n>BoolDef</span><span class=p>(</span>
                <span class=s2>&quot;active&quot;</span><span class=p>,</span>
                <span class=n>default</span><span class=o>=</span><span class=n>active</span><span class=p>,</span>
                <span class=n>label</span><span class=o>=</span><span class=n>label</span><span class=p>,</span>
                <span class=n>tooltip</span><span class=o>=</span><span class=bp>cls</span><span class=o>.</span><span class=n>optional_tooltip</span><span class=p>,</span>
            <span class=p>)</span>
        <span class=p>]</span>

    <span class=k>def</span><span class=w> </span><span class=nf>is_active</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>data</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Check if plugins is active for instance/context based on their data.</span>

<span class=sd>        Args:</span>
<span class=sd>            data(dict): Data from instance or context.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=c1># Skip if is not optional and return True</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=nb>getattr</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=s2>&quot;optional&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>):</span>
            <span class=k>return</span> <span class=kc>True</span>
        <span class=n>attr_values</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_attr_values_from_data</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
        <span class=n>active</span> <span class=o>=</span> <span class=n>attr_values</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;active&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>active</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>active</span> <span class=o>=</span> <span class=nb>getattr</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=s2>&quot;active&quot;</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>active</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.publish.OptionalPyblishPluginMixin.get_attribute_defs class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_attribute_defs</span><span class=p>()</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Attribute definitions based on plugin's optional attribute.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/publish_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>298</span>
<span class=normal>299</span>
<span class=normal>300</span>
<span class=normal>301</span>
<span class=normal>302</span>
<span class=normal>303</span>
<span class=normal>304</span>
<span class=normal>305</span>
<span class=normal>306</span>
<span class=normal>307</span>
<span class=normal>308</span>
<span class=normal>309</span>
<span class=normal>310</span>
<span class=normal>311</span>
<span class=normal>312</span>
<span class=normal>313</span>
<span class=normal>314</span>
<span class=normal>315</span>
<span class=normal>316</span>
<span class=normal>317</span>
<span class=normal>318</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@classmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>get_attribute_defs</span><span class=p>(</span><span class=bp>cls</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Attribute definitions based on plugin&#39;s optional attribute.&quot;&quot;&quot;</span>

    <span class=c1># Empty list if plugin is not optional</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=nb>getattr</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=s2>&quot;optional&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>):</span>
        <span class=k>return</span> <span class=p>[]</span>

    <span class=c1># Get active value from class as default value</span>
    <span class=n>active</span> <span class=o>=</span> <span class=nb>getattr</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=s2>&quot;active&quot;</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>
    <span class=c1># Return boolean stored under &#39;active&#39; key with label of the class name</span>
    <span class=n>label</span> <span class=o>=</span> <span class=bp>cls</span><span class=o>.</span><span class=n>label</span> <span class=ow>or</span> <span class=bp>cls</span><span class=o>.</span><span class=vm>__name__</span>

    <span class=k>return</span> <span class=p>[</span>
        <span class=n>BoolDef</span><span class=p>(</span>
            <span class=s2>&quot;active&quot;</span><span class=p>,</span>
            <span class=n>default</span><span class=o>=</span><span class=n>active</span><span class=p>,</span>
            <span class=n>label</span><span class=o>=</span><span class=n>label</span><span class=p>,</span>
            <span class=n>tooltip</span><span class=o>=</span><span class=bp>cls</span><span class=o>.</span><span class=n>optional_tooltip</span><span class=p>,</span>
        <span class=p>)</span>
    <span class=p>]</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.publish.OptionalPyblishPluginMixin.is_active class="doc doc-heading"> <code class="highlight language-python"><span class=n>is_active</span><span class=p>(</span><span class=n>data</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Check if plugins is active for instance/context based on their data.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>data(dict)</code> </td> <td> </td> <td> <div class=doc-md-description> <p>Data from instance or context.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/publish_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>320</span>
<span class=normal>321</span>
<span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span>
<span class=normal>325</span>
<span class=normal>326</span>
<span class=normal>327</span>
<span class=normal>328</span>
<span class=normal>329</span>
<span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>is_active</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>data</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Check if plugins is active for instance/context based on their data.</span>

<span class=sd>    Args:</span>
<span class=sd>        data(dict): Data from instance or context.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=c1># Skip if is not optional and return True</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=nb>getattr</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=s2>&quot;optional&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>):</span>
        <span class=k>return</span> <span class=kc>True</span>
    <span class=n>attr_values</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_attr_values_from_data</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
    <span class=n>active</span> <span class=o>=</span> <span class=n>attr_values</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;active&quot;</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>active</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>active</span> <span class=o>=</span> <span class=nb>getattr</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=s2>&quot;active&quot;</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>active</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.publish.PublishError class="doc doc-heading"> <code>PublishError</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=Exception>Exception</span></code></p> <p>Publishing crashed because of known error.</p> <p>Message will be shown in UI for artist.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>message</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Message of error. Short explanation an issue.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>title</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Title showed in UI.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>description</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Detailed description of an error. It is possible to use Markdown syntax.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/publish_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span>
<span class=normal>62</span>
<span class=normal>63</span>
<span class=normal>64</span>
<span class=normal>65</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>PublishError</span><span class=p>(</span><span class=ne>Exception</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Publishing crashed because of known error.</span>

<span class=sd>    Message will be shown in UI for artist.</span>

<span class=sd>    Args:</span>
<span class=sd>        message (str): Message of error. Short explanation an issue.</span>
<span class=sd>        title (Optional[str]): Title showed in UI.</span>
<span class=sd>        description (Optional[str]): Detailed description of an error.</span>
<span class=sd>            It is possible to use Markdown syntax.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>message</span><span class=p>,</span> <span class=n>title</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>description</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>detail</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>message</span> <span class=o>=</span> <span class=n>message</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>title</span> <span class=o>=</span> <span class=n>title</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>description</span> <span class=o>=</span> <span class=n>description</span> <span class=ow>or</span> <span class=n>message</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>detail</span> <span class=o>=</span> <span class=n>detail</span>
        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>message</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.publish.PublishValidationError class="doc doc-heading"> <code>PublishValidationError</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="PublishError (client.ayon_core.pipeline.publish.publish_plugins.PublishError)" href=publish_plugins.html#client.ayon_core.pipeline.publish.publish_plugins.PublishError>PublishError</a></code></p> <p>Validation error happened during publishing.</p> <p>This exception should be used when validation publishing failed.</p> <p>Publishing does not stop during validation order if this exception is raised.</p> <p>Has additional UI specific attributes that may be handy for artist.</p> <p>Argument 'title' is used to group errors.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/publish_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>68</span>
<span class=normal>69</span>
<span class=normal>70</span>
<span class=normal>71</span>
<span class=normal>72</span>
<span class=normal>73</span>
<span class=normal>74</span>
<span class=normal>75</span>
<span class=normal>76</span>
<span class=normal>77</span>
<span class=normal>78</span>
<span class=normal>79</span>
<span class=normal>80</span>
<span class=normal>81</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>PublishValidationError</span><span class=p>(</span><span class=n>PublishError</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Validation error happened during publishing.</span>

<span class=sd>    This exception should be used when validation publishing failed.</span>

<span class=sd>    Publishing does not stop during validation order if this</span>
<span class=sd>        exception is raised.</span>

<span class=sd>    Has additional UI specific attributes that may be handy for artist.</span>

<span class=sd>    Argument &#39;title&#39; is used to group errors.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.publish.RenderInstance class="doc doc-heading"> <code>RenderInstance</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=object>object</span></code></p> <p>Data collected by collectors.</p> <p>This data class later on passed to collected instances. Those attributes are required later on.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/abstract_collect_render.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 15</span>
<span class=normal> 16</span>
<span class=normal> 17</span>
<span class=normal> 18</span>
<span class=normal> 19</span>
<span class=normal> 20</span>
<span class=normal> 21</span>
<span class=normal> 22</span>
<span class=normal> 23</span>
<span class=normal> 24</span>
<span class=normal> 25</span>
<span class=normal> 26</span>
<span class=normal> 27</span>
<span class=normal> 28</span>
<span class=normal> 29</span>
<span class=normal> 30</span>
<span class=normal> 31</span>
<span class=normal> 32</span>
<span class=normal> 33</span>
<span class=normal> 34</span>
<span class=normal> 35</span>
<span class=normal> 36</span>
<span class=normal> 37</span>
<span class=normal> 38</span>
<span class=normal> 39</span>
<span class=normal> 40</span>
<span class=normal> 41</span>
<span class=normal> 42</span>
<span class=normal> 43</span>
<span class=normal> 44</span>
<span class=normal> 45</span>
<span class=normal> 46</span>
<span class=normal> 47</span>
<span class=normal> 48</span>
<span class=normal> 49</span>
<span class=normal> 50</span>
<span class=normal> 51</span>
<span class=normal> 52</span>
<span class=normal> 53</span>
<span class=normal> 54</span>
<span class=normal> 55</span>
<span class=normal> 56</span>
<span class=normal> 57</span>
<span class=normal> 58</span>
<span class=normal> 59</span>
<span class=normal> 60</span>
<span class=normal> 61</span>
<span class=normal> 62</span>
<span class=normal> 63</span>
<span class=normal> 64</span>
<span class=normal> 65</span>
<span class=normal> 66</span>
<span class=normal> 67</span>
<span class=normal> 68</span>
<span class=normal> 69</span>
<span class=normal> 70</span>
<span class=normal> 71</span>
<span class=normal> 72</span>
<span class=normal> 73</span>
<span class=normal> 74</span>
<span class=normal> 75</span>
<span class=normal> 76</span>
<span class=normal> 77</span>
<span class=normal> 78</span>
<span class=normal> 79</span>
<span class=normal> 80</span>
<span class=normal> 81</span>
<span class=normal> 82</span>
<span class=normal> 83</span>
<span class=normal> 84</span>
<span class=normal> 85</span>
<span class=normal> 86</span>
<span class=normal> 87</span>
<span class=normal> 88</span>
<span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@attr</span><span class=o>.</span><span class=n>s</span>
<span class=k>class</span><span class=w> </span><span class=nc>RenderInstance</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Data collected by collectors.</span>

<span class=sd>    This data class later on passed to collected instances.</span>
<span class=sd>    Those attributes are required later on.</span>

<span class=sd>    &quot;&quot;&quot;</span>

    <span class=c1># metadata</span>
    <span class=n>version</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>ib</span><span class=p>()</span>  <span class=c1># instance version</span>
    <span class=n>time</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>ib</span><span class=p>()</span>  <span class=c1># time of instance creation (get_formatted_current_time)</span>
    <span class=n>source</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>ib</span><span class=p>()</span>  <span class=c1># path to source scene file</span>
    <span class=n>label</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>ib</span><span class=p>()</span>  <span class=c1># label to show in GUI</span>
    <span class=n>family</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>ib</span><span class=p>()</span>  <span class=c1># product type for pyblish filtering</span>
    <span class=n>productType</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>ib</span><span class=p>()</span>  <span class=c1># product type</span>
    <span class=n>productName</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>ib</span><span class=p>()</span>  <span class=c1># product name</span>
    <span class=n>folderPath</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>ib</span><span class=p>()</span>  <span class=c1># folder path</span>
    <span class=n>task</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>ib</span><span class=p>()</span>  <span class=c1># task name</span>
    <span class=n>attachTo</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>ib</span><span class=p>()</span>  <span class=c1># product name to attach render to</span>
    <span class=n>setMembers</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>ib</span><span class=p>()</span>  <span class=c1># list of nodes/members producing render output</span>
    <span class=n>publish</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>ib</span><span class=p>()</span>  <span class=c1># bool, True to publish instance</span>
    <span class=n>name</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>ib</span><span class=p>()</span>  <span class=c1># instance name</span>

    <span class=c1># format settings</span>
    <span class=n>resolutionWidth</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>ib</span><span class=p>()</span>  <span class=c1># resolution width (1920)</span>
    <span class=n>resolutionHeight</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>ib</span><span class=p>()</span>  <span class=c1># resolution height (1080)</span>
    <span class=n>pixelAspect</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>ib</span><span class=p>()</span>  <span class=c1># pixel aspect (1.0)</span>

    <span class=c1># time settings</span>
    <span class=n>frameStart</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>ib</span><span class=p>()</span>  <span class=c1># start frame</span>
    <span class=n>frameEnd</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>ib</span><span class=p>()</span>  <span class=c1># start end</span>
    <span class=n>frameStep</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>ib</span><span class=p>()</span>  <span class=c1># frame step</span>

    <span class=n>handleStart</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>ib</span><span class=p>(</span><span class=n>default</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>  <span class=c1># start frame</span>
    <span class=n>handleEnd</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>ib</span><span class=p>(</span><span class=n>default</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>  <span class=c1># start frame</span>

    <span class=c1># for software (like Harmony) where frame range cannot be set by DB</span>
    <span class=c1># handles need to be propagated if exist</span>
    <span class=n>ignoreFrameHandleCheck</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>ib</span><span class=p>(</span><span class=n>default</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>

    <span class=c1># --------------------</span>
    <span class=c1># With default values</span>
    <span class=c1># metadata</span>
    <span class=n>renderer</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>ib</span><span class=p>(</span><span class=n>default</span><span class=o>=</span><span class=s2>&quot;&quot;</span><span class=p>)</span>  <span class=c1># renderer - can be used in Deadline</span>
    <span class=n>review</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>ib</span><span class=p>(</span><span class=n>default</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>  <span class=c1># False - explicitly skip review</span>
    <span class=n>priority</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>ib</span><span class=p>(</span><span class=n>default</span><span class=o>=</span><span class=mi>50</span><span class=p>)</span>  <span class=c1># job priority on farm</span>

    <span class=c1># family = attr.ib(default=&quot;renderlayer&quot;)</span>
    <span class=n>families</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>ib</span><span class=p>(</span><span class=n>default</span><span class=o>=</span><span class=p>[</span><span class=s2>&quot;renderlayer&quot;</span><span class=p>])</span>  <span class=c1># list of families</span>
    <span class=c1># True if should be rendered on farm, eg not integrate</span>
    <span class=n>farm</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>ib</span><span class=p>(</span><span class=n>default</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>

    <span class=c1># format settings</span>
    <span class=n>multipartExr</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>ib</span><span class=p>(</span><span class=n>default</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>  <span class=c1># flag for multipart exrs</span>
    <span class=n>convertToScanline</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>ib</span><span class=p>(</span><span class=n>default</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>  <span class=c1># flag for exr conversion</span>

    <span class=n>tileRendering</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>ib</span><span class=p>(</span><span class=n>default</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>  <span class=c1># bool: treat render as tiles</span>
    <span class=n>tilesX</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>ib</span><span class=p>(</span><span class=n>default</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>  <span class=c1># number of tiles in X</span>
    <span class=n>tilesY</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>ib</span><span class=p>(</span><span class=n>default</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>  <span class=c1># number of tiles in Y</span>

    <span class=c1># submit_publish_job</span>
    <span class=n>deadlineSubmissionJob</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>ib</span><span class=p>(</span><span class=n>default</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>
    <span class=n>anatomyData</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>ib</span><span class=p>(</span><span class=n>default</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>
    <span class=n>outputDir</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>ib</span><span class=p>(</span><span class=n>default</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>
    <span class=n>context</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>ib</span><span class=p>(</span><span class=n>default</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>
    <span class=n>deadline</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>ib</span><span class=p>(</span><span class=n>default</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>

    <span class=c1># The source instance the data of this render instance should merge into</span>
    <span class=n>source_instance</span> <span class=o>=</span> <span class=n>attr</span><span class=o>.</span><span class=n>ib</span><span class=p>(</span><span class=n>default</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=nb>type</span><span class=o>=</span><span class=n>pyblish</span><span class=o>.</span><span class=n>api</span><span class=o>.</span><span class=n>Instance</span><span class=p>)</span>

    <span class=nd>@frameStart</span><span class=o>.</span><span class=n>validator</span>
    <span class=k>def</span><span class=w> </span><span class=nf>check_frame_start</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>_</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Validate if frame start is not larger then end.&quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=n>value</span> <span class=o>&gt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>frameEnd</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;frameStart must be smaller &quot;</span>
                             <span class=s2>&quot;or equal then frameEnd&quot;</span><span class=p>)</span>

    <span class=nd>@frameEnd</span><span class=o>.</span><span class=n>validator</span>
    <span class=k>def</span><span class=w> </span><span class=nf>check_frame_end</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>_</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Validate if frame end is not less then start.&quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=n>value</span> <span class=o>&lt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>frameStart</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;frameEnd must be smaller &quot;</span>
                             <span class=s2>&quot;or equal then frameStart&quot;</span><span class=p>)</span>

    <span class=nd>@tilesX</span><span class=o>.</span><span class=n>validator</span>
    <span class=k>def</span><span class=w> </span><span class=nf>check_tiles_x</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>_</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Validate if tile x isn&#39;t less then 1.&quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>tileRendering</span><span class=p>:</span>
            <span class=k>return</span>
        <span class=k>if</span> <span class=n>value</span> <span class=o>&lt;</span> <span class=mi>1</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;tile X size cannot be less then 1&quot;</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>value</span> <span class=o>==</span> <span class=mi>1</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>tilesY</span> <span class=o>==</span> <span class=mi>1</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;both tiles X a Y sizes are set to 1&quot;</span><span class=p>)</span>

    <span class=nd>@tilesY</span><span class=o>.</span><span class=n>validator</span>
    <span class=k>def</span><span class=w> </span><span class=nf>check_tiles_y</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>_</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Validate if tile y isn&#39;t less then 1.&quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>tileRendering</span><span class=p>:</span>
            <span class=k>return</span>
        <span class=k>if</span> <span class=n>value</span> <span class=o>&lt;</span> <span class=mi>1</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;tile Y size cannot be less then 1&quot;</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>value</span> <span class=o>==</span> <span class=mi>1</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>tilesX</span> <span class=o>==</span> <span class=mi>1</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;both tiles X a Y sizes are set to 1&quot;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.publish.RenderInstance.check_frame_end class="doc doc-heading"> <code class="highlight language-python"><span class=n>check_frame_end</span><span class=p>(</span><span class=n>_</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Validate if frame end is not less then start.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/abstract_collect_render.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>93</span>
<span class=normal>94</span>
<span class=normal>95</span>
<span class=normal>96</span>
<span class=normal>97</span>
<span class=normal>98</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@frameEnd</span><span class=o>.</span><span class=n>validator</span>
<span class=k>def</span><span class=w> </span><span class=nf>check_frame_end</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>_</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Validate if frame end is not less then start.&quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=n>value</span> <span class=o>&lt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>frameStart</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;frameEnd must be smaller &quot;</span>
                         <span class=s2>&quot;or equal then frameStart&quot;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.publish.RenderInstance.check_frame_start class="doc doc-heading"> <code class="highlight language-python"><span class=n>check_frame_start</span><span class=p>(</span><span class=n>_</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Validate if frame start is not larger then end.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/abstract_collect_render.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>86</span>
<span class=normal>87</span>
<span class=normal>88</span>
<span class=normal>89</span>
<span class=normal>90</span>
<span class=normal>91</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@frameStart</span><span class=o>.</span><span class=n>validator</span>
<span class=k>def</span><span class=w> </span><span class=nf>check_frame_start</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>_</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Validate if frame start is not larger then end.&quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=n>value</span> <span class=o>&gt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>frameEnd</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;frameStart must be smaller &quot;</span>
                         <span class=s2>&quot;or equal then frameEnd&quot;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.publish.RenderInstance.check_tiles_x class="doc doc-heading"> <code class="highlight language-python"><span class=n>check_tiles_x</span><span class=p>(</span><span class=n>_</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Validate if tile x isn't less then 1.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/abstract_collect_render.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@tilesX</span><span class=o>.</span><span class=n>validator</span>
<span class=k>def</span><span class=w> </span><span class=nf>check_tiles_x</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>_</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Validate if tile x isn&#39;t less then 1.&quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>tileRendering</span><span class=p>:</span>
        <span class=k>return</span>
    <span class=k>if</span> <span class=n>value</span> <span class=o>&lt;</span> <span class=mi>1</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;tile X size cannot be less then 1&quot;</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>value</span> <span class=o>==</span> <span class=mi>1</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>tilesY</span> <span class=o>==</span> <span class=mi>1</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;both tiles X a Y sizes are set to 1&quot;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.pipeline.publish.RenderInstance.check_tiles_y class="doc doc-heading"> <code class="highlight language-python"><span class=n>check_tiles_y</span><span class=p>(</span><span class=n>_</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Validate if tile y isn't less then 1.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/abstract_collect_render.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@tilesY</span><span class=o>.</span><span class=n>validator</span>
<span class=k>def</span><span class=w> </span><span class=nf>check_tiles_y</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>_</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Validate if tile y isn&#39;t less then 1.&quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>tileRendering</span><span class=p>:</span>
        <span class=k>return</span>
    <span class=k>if</span> <span class=n>value</span> <span class=o>&lt;</span> <span class=mi>1</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;tile Y size cannot be less then 1&quot;</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>value</span> <span class=o>==</span> <span class=mi>1</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>tilesX</span> <span class=o>==</span> <span class=mi>1</span><span class=p>:</span>
        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;both tiles X a Y sizes are set to 1&quot;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.publish.RepairAction class="doc doc-heading"> <code>RepairAction</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=pyblish.api.Action>Action</span></code></p> <p>Repairs the action</p> <p>To process the repairing this requires a static <code>repair(instance)</code> method is available on the plugin.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/publish_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>336</span>
<span class=normal>337</span>
<span class=normal>338</span>
<span class=normal>339</span>
<span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span>
<span class=normal>344</span>
<span class=normal>345</span>
<span class=normal>346</span>
<span class=normal>347</span>
<span class=normal>348</span>
<span class=normal>349</span>
<span class=normal>350</span>
<span class=normal>351</span>
<span class=normal>352</span>
<span class=normal>353</span>
<span class=normal>354</span>
<span class=normal>355</span>
<span class=normal>356</span>
<span class=normal>357</span>
<span class=normal>358</span>
<span class=normal>359</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>RepairAction</span><span class=p>(</span><span class=n>pyblish</span><span class=o>.</span><span class=n>api</span><span class=o>.</span><span class=n>Action</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Repairs the action</span>

<span class=sd>    To process the repairing this requires a static `repair(instance)` method</span>
<span class=sd>    is available on the plugin.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>label</span> <span class=o>=</span> <span class=s2>&quot;Repair&quot;</span>
    <span class=n>on</span> <span class=o>=</span> <span class=s2>&quot;failed&quot;</span>  <span class=c1># This action is only available on a failed plug-in</span>
    <span class=n>icon</span> <span class=o>=</span> <span class=s2>&quot;wrench&quot;</span>  <span class=c1># Icon from Awesome Icon</span>

    <span class=k>def</span><span class=w> </span><span class=nf>process</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>context</span><span class=p>,</span> <span class=n>plugin</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>plugin</span><span class=p>,</span> <span class=s2>&quot;repair&quot;</span><span class=p>):</span>
            <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span><span class=s2>&quot;Plug-in does not have repair method.&quot;</span><span class=p>)</span>

        <span class=c1># Get the errored instances</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Finding failed instances..&quot;</span><span class=p>)</span>
        <span class=n>errored_instances</span> <span class=o>=</span> <span class=n>get_errored_instances_from_context</span><span class=p>(</span><span class=n>context</span><span class=p>,</span>
                                                               <span class=n>plugin</span><span class=o>=</span><span class=n>plugin</span><span class=p>)</span>
        <span class=k>for</span> <span class=n>instance</span> <span class=ow>in</span> <span class=n>errored_instances</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
                <span class=s2>&quot;Attempting repair for instance: </span><span class=si>{}</span><span class=s2> ...&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>instance</span><span class=p>)</span>
            <span class=p>)</span>
            <span class=n>plugin</span><span class=o>.</span><span class=n>repair</span><span class=p>(</span><span class=n>instance</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.pipeline.publish.RepairContextAction class="doc doc-heading"> <code>RepairContextAction</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=pyblish.api.Action>Action</span></code></p> <p>Repairs the action</p> <p>To process the repairing this requires a static <code>repair(context)</code> method is available on the plugin.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/publish_plugins.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>362</span>
<span class=normal>363</span>
<span class=normal>364</span>
<span class=normal>365</span>
<span class=normal>366</span>
<span class=normal>367</span>
<span class=normal>368</span>
<span class=normal>369</span>
<span class=normal>370</span>
<span class=normal>371</span>
<span class=normal>372</span>
<span class=normal>373</span>
<span class=normal>374</span>
<span class=normal>375</span>
<span class=normal>376</span>
<span class=normal>377</span>
<span class=normal>378</span>
<span class=normal>379</span>
<span class=normal>380</span>
<span class=normal>381</span>
<span class=normal>382</span>
<span class=normal>383</span>
<span class=normal>384</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>RepairContextAction</span><span class=p>(</span><span class=n>pyblish</span><span class=o>.</span><span class=n>api</span><span class=o>.</span><span class=n>Action</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Repairs the action</span>

<span class=sd>    To process the repairing this requires a static `repair(context)` method</span>
<span class=sd>    is available on the plugin.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>label</span> <span class=o>=</span> <span class=s2>&quot;Repair&quot;</span>
    <span class=n>on</span> <span class=o>=</span> <span class=s2>&quot;failed&quot;</span>  <span class=c1># This action is only available on a failed plug-in</span>
    <span class=n>icon</span> <span class=o>=</span> <span class=s2>&quot;wrench&quot;</span>  <span class=c1># Icon from Awesome Icon</span>

    <span class=k>def</span><span class=w> </span><span class=nf>process</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>context</span><span class=p>,</span> <span class=n>plugin</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>plugin</span><span class=p>,</span> <span class=s2>&quot;repair&quot;</span><span class=p>):</span>
            <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span><span class=s2>&quot;Plug-in does not have repair method.&quot;</span><span class=p>)</span>

        <span class=c1># Get the failed instances</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Finding failed plug-ins..&quot;</span><span class=p>)</span>
        <span class=n>failed_plugins</span> <span class=o>=</span> <span class=n>get_errored_plugins_from_context</span><span class=p>(</span><span class=n>context</span><span class=p>)</span>

        <span class=c1># Apply pyblish.logic to get the instances for the plug-in</span>
        <span class=k>if</span> <span class=n>plugin</span> <span class=ow>in</span> <span class=n>failed_plugins</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Attempting repair ...&quot;</span><span class=p>)</span>
            <span class=n>plugin</span><span class=o>.</span><span class=n>repair</span><span class=p>(</span><span class=n>context</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.publish.apply_plugin_settings_automatically class="doc doc-heading"> <code class="highlight language-python"><span class=n>apply_plugin_settings_automatically</span><span class=p>(</span><span class=n>plugin</span><span class=p>,</span> <span class=n>settings</span><span class=p>,</span> <span class=n>logger</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Automatically apply plugin settings to a plugin object.</p> <details class=note open> <summary>Note</summary> <p>This function was created to be able to use it in custom overrides of 'apply_settings' class method.</p> </details> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>plugin</code> </td> <td> <code><span title=type>type</span>[<span title=pyblish.api.Plugin>Plugin</span>]</code> </td> <td> <div class=doc-md-description> <p>Class of a plugin.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>settings</code> </td> <td> <code><span title=dict>dict</span>[<span title=str>str</span>, <span title=Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Plugin specific settings.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>logger</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=logging.Logger>Logger</span>]</code> </td> <td> <div class=doc-md-description> <p>Logger to log debug messages about applied settings values.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>392</span>
<span class=normal>393</span>
<span class=normal>394</span>
<span class=normal>395</span>
<span class=normal>396</span>
<span class=normal>397</span>
<span class=normal>398</span>
<span class=normal>399</span>
<span class=normal>400</span>
<span class=normal>401</span>
<span class=normal>402</span>
<span class=normal>403</span>
<span class=normal>404</span>
<span class=normal>405</span>
<span class=normal>406</span>
<span class=normal>407</span>
<span class=normal>408</span>
<span class=normal>409</span>
<span class=normal>410</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>apply_plugin_settings_automatically</span><span class=p>(</span><span class=n>plugin</span><span class=p>,</span> <span class=n>settings</span><span class=p>,</span> <span class=n>logger</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Automatically apply plugin settings to a plugin object.</span>

<span class=sd>    Note:</span>
<span class=sd>        This function was created to be able to use it in custom overrides of</span>
<span class=sd>            &#39;apply_settings&#39; class method.</span>

<span class=sd>    Args:</span>
<span class=sd>        plugin (type[pyblish.api.Plugin]): Class of a plugin.</span>
<span class=sd>        settings (dict[str, Any]): Plugin specific settings.</span>
<span class=sd>        logger (Optional[logging.Logger]): Logger to log debug messages about</span>
<span class=sd>            applied settings values.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>for</span> <span class=n>option</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>settings</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
        <span class=k>if</span> <span class=n>logger</span><span class=p>:</span>
            <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Plugin </span><span class=si>%s</span><span class=s2> - Attr: </span><span class=si>%s</span><span class=s2> -&gt; </span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span>
                         <span class=n>plugin</span><span class=o>.</span><span class=vm>__name__</span><span class=p>,</span> <span class=n>option</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>
        <span class=nb>setattr</span><span class=p>(</span><span class=n>plugin</span><span class=p>,</span> <span class=n>option</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.publish.context_plugin_should_run class="doc doc-heading"> <code class="highlight language-python"><span class=n>context_plugin_should_run</span><span class=p>(</span><span class=n>plugin</span><span class=p>,</span> <span class=n>context</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Return whether the ContextPlugin should run on the given context.</p> <p>This is a helper function to work around a bug pyblish-base<a class="gh-link gh-issue" href=https://github.com///issues/250 title="GitHub Issue / #250">#250</a> Whenever a ContextPlugin sets specific families it will still trigger even when no instances are present that have those families.</p> <p>This actually checks it correctly and returns whether it should run.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>plugin</code> </td> <td> <code><span title=pyblish.api.Plugin>Plugin</span></code> </td> <td> <div class=doc-md-description> <p>Plugin with filters.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>context</code> </td> <td> <code><span title=pyblish.api.Context>Context</span></code> </td> <td> <div class=doc-md-description> <p>Pyblish context with instances.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>bool</code></td> <td> </td> <td> <div class=doc-md-description> <p>Context plugin should run based on valid instances.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>563</span>
<span class=normal>564</span>
<span class=normal>565</span>
<span class=normal>566</span>
<span class=normal>567</span>
<span class=normal>568</span>
<span class=normal>569</span>
<span class=normal>570</span>
<span class=normal>571</span>
<span class=normal>572</span>
<span class=normal>573</span>
<span class=normal>574</span>
<span class=normal>575</span>
<span class=normal>576</span>
<span class=normal>577</span>
<span class=normal>578</span>
<span class=normal>579</span>
<span class=normal>580</span>
<span class=normal>581</span>
<span class=normal>582</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>context_plugin_should_run</span><span class=p>(</span><span class=n>plugin</span><span class=p>,</span> <span class=n>context</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Return whether the ContextPlugin should run on the given context.</span>

<span class=sd>    This is a helper function to work around a bug pyblish-base#250</span>
<span class=sd>    Whenever a ContextPlugin sets specific families it will still trigger even</span>
<span class=sd>    when no instances are present that have those families.</span>

<span class=sd>    This actually checks it correctly and returns whether it should run.</span>

<span class=sd>    Args:</span>
<span class=sd>        plugin (pyblish.api.Plugin): Plugin with filters.</span>
<span class=sd>        context (pyblish.api.Context): Pyblish context with instances.</span>

<span class=sd>    Returns:</span>
<span class=sd>        bool: Context plugin should run based on valid instances.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=n>filter_instances_for_context_plugin</span><span class=p>(</span><span class=n>plugin</span><span class=p>,</span> <span class=n>context</span><span class=p>):</span>
        <span class=k>return</span> <span class=kc>True</span>
    <span class=k>return</span> <span class=kc>False</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.publish.filter_instances_for_context_plugin class="doc doc-heading"> <code class="highlight language-python"><span class=n>filter_instances_for_context_plugin</span><span class=p>(</span><span class=n>plugin</span><span class=p>,</span> <span class=n>context</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Filter instances on context by context plugin filters.</p> <p>This is for cases when context plugin need similar filtering like instance plugin have, but for some reason must run on context or should find out if there is at least one instance with a family.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>plugin</code> </td> <td> <code><span title=pyblish.api.Plugin>Plugin</span></code> </td> <td> <div class=doc-md-description> <p>Plugin with filters.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>context</code> </td> <td> <code><span title=pyblish.api.Context>Context</span></code> </td> <td> <div class=doc-md-description> <p>Pyblish context with instances.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Iterator[pyblish.lib.Instance]: Iteration of valid instances.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>522</span>
<span class=normal>523</span>
<span class=normal>524</span>
<span class=normal>525</span>
<span class=normal>526</span>
<span class=normal>527</span>
<span class=normal>528</span>
<span class=normal>529</span>
<span class=normal>530</span>
<span class=normal>531</span>
<span class=normal>532</span>
<span class=normal>533</span>
<span class=normal>534</span>
<span class=normal>535</span>
<span class=normal>536</span>
<span class=normal>537</span>
<span class=normal>538</span>
<span class=normal>539</span>
<span class=normal>540</span>
<span class=normal>541</span>
<span class=normal>542</span>
<span class=normal>543</span>
<span class=normal>544</span>
<span class=normal>545</span>
<span class=normal>546</span>
<span class=normal>547</span>
<span class=normal>548</span>
<span class=normal>549</span>
<span class=normal>550</span>
<span class=normal>551</span>
<span class=normal>552</span>
<span class=normal>553</span>
<span class=normal>554</span>
<span class=normal>555</span>
<span class=normal>556</span>
<span class=normal>557</span>
<span class=normal>558</span>
<span class=normal>559</span>
<span class=normal>560</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>filter_instances_for_context_plugin</span><span class=p>(</span><span class=n>plugin</span><span class=p>,</span> <span class=n>context</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Filter instances on context by context plugin filters.</span>

<span class=sd>    This is for cases when context plugin need similar filtering like instance</span>
<span class=sd>    plugin have, but for some reason must run on context or should find out</span>
<span class=sd>    if there is at least one instance with a family.</span>

<span class=sd>    Args:</span>
<span class=sd>        plugin (pyblish.api.Plugin): Plugin with filters.</span>
<span class=sd>        context (pyblish.api.Context): Pyblish context with instances.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Iterator[pyblish.lib.Instance]: Iteration of valid instances.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>instances</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=n>plugin_families</span> <span class=o>=</span> <span class=nb>set</span><span class=p>()</span>
    <span class=n>all_families</span> <span class=o>=</span> <span class=kc>False</span>
    <span class=k>if</span> <span class=n>plugin</span><span class=o>.</span><span class=n>families</span><span class=p>:</span>
        <span class=n>instances</span> <span class=o>=</span> <span class=n>context</span>
        <span class=n>plugin_families</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span><span class=n>plugin</span><span class=o>.</span><span class=n>families</span><span class=p>)</span>
        <span class=n>all_families</span> <span class=o>=</span> <span class=s2>&quot;*&quot;</span> <span class=ow>in</span> <span class=n>plugin_families</span>

    <span class=k>for</span> <span class=n>instance</span> <span class=ow>in</span> <span class=n>instances</span><span class=p>:</span>
        <span class=c1># Ignore inactive instances</span>
        <span class=k>if</span> <span class=p>(</span>
            <span class=ow>not</span> <span class=n>instance</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;publish&quot;</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>
            <span class=ow>or</span> <span class=ow>not</span> <span class=n>instance</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;active&quot;</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>
        <span class=p>):</span>
            <span class=k>continue</span>

        <span class=n>family</span> <span class=o>=</span> <span class=n>instance</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;family&quot;</span><span class=p>)</span>
        <span class=n>families</span> <span class=o>=</span> <span class=n>instance</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;families&quot;</span><span class=p>)</span> <span class=ow>or</span> <span class=p>[]</span>
        <span class=k>if</span> <span class=p>(</span>
            <span class=n>all_families</span>
            <span class=ow>or</span> <span class=p>(</span><span class=n>family</span> <span class=ow>and</span> <span class=n>family</span> <span class=ow>in</span> <span class=n>plugin_families</span><span class=p>)</span>
            <span class=ow>or</span> <span class=nb>any</span><span class=p>(</span><span class=n>f</span> <span class=ow>in</span> <span class=n>plugin_families</span> <span class=k>for</span> <span class=n>f</span> <span class=ow>in</span> <span class=n>families</span><span class=p>)</span>
        <span class=p>):</span>
            <span class=k>yield</span> <span class=n>instance</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.publish.get_errored_instances_from_context class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_errored_instances_from_context</span><span class=p>(</span><span class=n>context</span><span class=p>,</span> <span class=n>plugin</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Collect failed instances from pyblish context.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>context</code> </td> <td> <code><span title=pyblish.api.Context>Context</span></code> </td> <td> <div class=doc-md-description> <p>Publish context where we're looking for failed instances.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>plugin</code> </td> <td> <code><span title=pyblish.api.Plugin>Plugin</span></code> </td> <td> <div class=doc-md-description> <p>If provided then only consider errors related to that plug-in.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>List[pyblish.lib.Instance]: Instances which failed during processing.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>473</span>
<span class=normal>474</span>
<span class=normal>475</span>
<span class=normal>476</span>
<span class=normal>477</span>
<span class=normal>478</span>
<span class=normal>479</span>
<span class=normal>480</span>
<span class=normal>481</span>
<span class=normal>482</span>
<span class=normal>483</span>
<span class=normal>484</span>
<span class=normal>485</span>
<span class=normal>486</span>
<span class=normal>487</span>
<span class=normal>488</span>
<span class=normal>489</span>
<span class=normal>490</span>
<span class=normal>491</span>
<span class=normal>492</span>
<span class=normal>493</span>
<span class=normal>494</span>
<span class=normal>495</span>
<span class=normal>496</span>
<span class=normal>497</span>
<span class=normal>498</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_errored_instances_from_context</span><span class=p>(</span><span class=n>context</span><span class=p>,</span> <span class=n>plugin</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Collect failed instances from pyblish context.</span>

<span class=sd>    Args:</span>
<span class=sd>        context (pyblish.api.Context): Publish context where we&#39;re looking</span>
<span class=sd>            for failed instances.</span>
<span class=sd>        plugin (pyblish.api.Plugin): If provided then only consider errors</span>
<span class=sd>            related to that plug-in.</span>

<span class=sd>    Returns:</span>
<span class=sd>        List[pyblish.lib.Instance]: Instances which failed during processing.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>instances</span> <span class=o>=</span> <span class=nb>list</span><span class=p>()</span>
    <span class=k>for</span> <span class=n>result</span> <span class=ow>in</span> <span class=n>context</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;results&quot;</span><span class=p>]:</span>
        <span class=k>if</span> <span class=n>result</span><span class=p>[</span><span class=s2>&quot;instance&quot;</span><span class=p>]</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=c1># When instance is None we are on the &quot;context&quot; result</span>
            <span class=k>continue</span>

        <span class=k>if</span> <span class=n>plugin</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=ow>and</span> <span class=n>result</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;plugin&quot;</span><span class=p>)</span> <span class=o>!=</span> <span class=n>plugin</span><span class=p>:</span>
            <span class=k>continue</span>

        <span class=k>if</span> <span class=n>result</span><span class=p>[</span><span class=s2>&quot;error&quot;</span><span class=p>]:</span>
            <span class=n>instances</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>result</span><span class=p>[</span><span class=s2>&quot;instance&quot;</span><span class=p>])</span>

    <span class=k>return</span> <span class=n>instances</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.publish.get_errored_plugins_from_context class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_errored_plugins_from_context</span><span class=p>(</span><span class=n>context</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Collect failed plugins from pyblish context.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>context</code> </td> <td> <code><span title=pyblish.api.Context>Context</span></code> </td> <td> <div class=doc-md-description> <p>Publish context where we're looking for failed plugins.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>List[pyblish.api.Plugin]: Plugins which failed during processing.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>501</span>
<span class=normal>502</span>
<span class=normal>503</span>
<span class=normal>504</span>
<span class=normal>505</span>
<span class=normal>506</span>
<span class=normal>507</span>
<span class=normal>508</span>
<span class=normal>509</span>
<span class=normal>510</span>
<span class=normal>511</span>
<span class=normal>512</span>
<span class=normal>513</span>
<span class=normal>514</span>
<span class=normal>515</span>
<span class=normal>516</span>
<span class=normal>517</span>
<span class=normal>518</span>
<span class=normal>519</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_errored_plugins_from_context</span><span class=p>(</span><span class=n>context</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Collect failed plugins from pyblish context.</span>

<span class=sd>    Args:</span>
<span class=sd>        context (pyblish.api.Context): Publish context where we&#39;re looking</span>
<span class=sd>            for failed plugins.</span>

<span class=sd>    Returns:</span>
<span class=sd>        List[pyblish.api.Plugin]: Plugins which failed during processing.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>plugins</span> <span class=o>=</span> <span class=nb>list</span><span class=p>()</span>
    <span class=n>results</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;results&quot;</span><span class=p>,</span> <span class=p>[])</span>
    <span class=k>for</span> <span class=n>result</span> <span class=ow>in</span> <span class=n>results</span><span class=p>:</span>
        <span class=k>if</span> <span class=n>result</span><span class=p>[</span><span class=s2>&quot;success&quot;</span><span class=p>]</span> <span class=ow>is</span> <span class=kc>True</span><span class=p>:</span>
            <span class=k>continue</span>
        <span class=n>plugins</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>result</span><span class=p>[</span><span class=s2>&quot;plugin&quot;</span><span class=p>])</span>

    <span class=k>return</span> <span class=n>plugins</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.publish.get_instance_staging_dir class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_instance_staging_dir</span><span class=p>(</span><span class=n>instance</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Unified way how staging dir is stored and created on instances.</p> <p>First check if 'stagingDir' is already set in instance data. In case there already is new tempdir will not be created.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>Path to staging dir</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>678</span>
<span class=normal>679</span>
<span class=normal>680</span>
<span class=normal>681</span>
<span class=normal>682</span>
<span class=normal>683</span>
<span class=normal>684</span>
<span class=normal>685</span>
<span class=normal>686</span>
<span class=normal>687</span>
<span class=normal>688</span>
<span class=normal>689</span>
<span class=normal>690</span>
<span class=normal>691</span>
<span class=normal>692</span>
<span class=normal>693</span>
<span class=normal>694</span>
<span class=normal>695</span>
<span class=normal>696</span>
<span class=normal>697</span>
<span class=normal>698</span>
<span class=normal>699</span>
<span class=normal>700</span>
<span class=normal>701</span>
<span class=normal>702</span>
<span class=normal>703</span>
<span class=normal>704</span>
<span class=normal>705</span>
<span class=normal>706</span>
<span class=normal>707</span>
<span class=normal>708</span>
<span class=normal>709</span>
<span class=normal>710</span>
<span class=normal>711</span>
<span class=normal>712</span>
<span class=normal>713</span>
<span class=normal>714</span>
<span class=normal>715</span>
<span class=normal>716</span>
<span class=normal>717</span>
<span class=normal>718</span>
<span class=normal>719</span>
<span class=normal>720</span>
<span class=normal>721</span>
<span class=normal>722</span>
<span class=normal>723</span>
<span class=normal>724</span>
<span class=normal>725</span>
<span class=normal>726</span>
<span class=normal>727</span>
<span class=normal>728</span>
<span class=normal>729</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_instance_staging_dir</span><span class=p>(</span><span class=n>instance</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Unified way how staging dir is stored and created on instances.</span>

<span class=sd>    First check if &#39;stagingDir&#39; is already set in instance data.</span>
<span class=sd>    In case there already is new tempdir will not be created.</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: Path to staging dir</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>staging_dir</span> <span class=o>=</span> <span class=n>instance</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;stagingDir&quot;</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>staging_dir</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>staging_dir</span>

    <span class=n>anatomy_data</span> <span class=o>=</span> <span class=n>instance</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;anatomyData&quot;</span><span class=p>]</span>
    <span class=n>template_data</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=n>anatomy_data</span><span class=p>)</span>

    <span class=c1># context data based variables</span>
    <span class=n>context</span> <span class=o>=</span> <span class=n>instance</span><span class=o>.</span><span class=n>context</span>

    <span class=c1># add current file as workfile name into formatting data</span>
    <span class=n>current_file</span> <span class=o>=</span> <span class=n>context</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;currentFile&quot;</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>current_file</span><span class=p>:</span>
        <span class=n>workfile</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>basename</span><span class=p>(</span><span class=n>current_file</span><span class=p>)</span>
        <span class=n>workfile_name</span><span class=p>,</span> <span class=n>_</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>splitext</span><span class=p>(</span><span class=n>workfile</span><span class=p>)</span>
        <span class=n>template_data</span><span class=p>[</span><span class=s2>&quot;workfile_name&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>workfile_name</span>

    <span class=n>staging_dir_info</span> <span class=o>=</span> <span class=n>get_staging_dir_info</span><span class=p>(</span>
        <span class=n>context</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;projectEntity&quot;</span><span class=p>],</span>
        <span class=n>instance</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;folderEntity&quot;</span><span class=p>),</span>
        <span class=n>instance</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;taskEntity&quot;</span><span class=p>),</span>
        <span class=n>instance</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;productType&quot;</span><span class=p>],</span>
        <span class=n>instance</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;productName&quot;</span><span class=p>],</span>
        <span class=n>context</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;hostName&quot;</span><span class=p>],</span>
        <span class=n>anatomy</span><span class=o>=</span><span class=n>context</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;anatomy&quot;</span><span class=p>],</span>
        <span class=n>project_settings</span><span class=o>=</span><span class=n>context</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;project_settings&quot;</span><span class=p>],</span>
        <span class=n>template_data</span><span class=o>=</span><span class=n>template_data</span><span class=p>,</span>
        <span class=n>always_return_path</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
        <span class=n>username</span><span class=o>=</span><span class=n>context</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;user&quot;</span><span class=p>],</span>
    <span class=p>)</span>

    <span class=n>staging_dir_path</span> <span class=o>=</span> <span class=n>staging_dir_info</span><span class=o>.</span><span class=n>directory</span>

    <span class=c1># path might be already created by get_staging_dir_info</span>
    <span class=n>os</span><span class=o>.</span><span class=n>makedirs</span><span class=p>(</span><span class=n>staging_dir_path</span><span class=p>,</span> <span class=n>exist_ok</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
    <span class=n>instance</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>update</span><span class=p>({</span>
        <span class=s2>&quot;stagingDir&quot;</span><span class=p>:</span> <span class=n>staging_dir_path</span><span class=p>,</span>
        <span class=s2>&quot;stagingDir_persistent&quot;</span><span class=p>:</span> <span class=n>staging_dir_info</span><span class=o>.</span><span class=n>is_persistent</span><span class=p>,</span>
        <span class=s2>&quot;stagingDir_is_custom&quot;</span><span class=p>:</span> <span class=n>staging_dir_info</span><span class=o>.</span><span class=n>is_custom</span>
    <span class=p>})</span>

    <span class=k>return</span> <span class=n>staging_dir_path</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.publish.get_plugin_settings class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_plugin_settings</span><span class=p>(</span><span class=n>plugin</span><span class=p>,</span> <span class=n>project_settings</span><span class=p>,</span> <span class=n>log</span><span class=p>,</span> <span class=n>category</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Get plugin settings based on host name and plugin name.</p> <details class=note open> <summary>Note</summary> <p>Default implementation of automated settings is passing host name into 'category'.</p> </details> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>plugin</code> </td> <td> <code><span title=pyblish.Plugin>Plugin</span></code> </td> <td> <div class=doc-md-description> <p>Plugin where settings are applied.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>project_settings</code> </td> <td> <code><span title=dict>dict</span>[<span title=str>str</span>, <span title=Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Project settings.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>log</code> </td> <td> <code><span title=logging.Logger>Logger</span></code> </td> <td> <div class=doc-md-description> <p>Logger to log messages.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>category</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Settings category key where to look for plugin settings.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>dict[str, Any]: Plugin settings {'attribute': 'value'}.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>311</span>
<span class=normal>312</span>
<span class=normal>313</span>
<span class=normal>314</span>
<span class=normal>315</span>
<span class=normal>316</span>
<span class=normal>317</span>
<span class=normal>318</span>
<span class=normal>319</span>
<span class=normal>320</span>
<span class=normal>321</span>
<span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span>
<span class=normal>325</span>
<span class=normal>326</span>
<span class=normal>327</span>
<span class=normal>328</span>
<span class=normal>329</span>
<span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span>
<span class=normal>334</span>
<span class=normal>335</span>
<span class=normal>336</span>
<span class=normal>337</span>
<span class=normal>338</span>
<span class=normal>339</span>
<span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span>
<span class=normal>344</span>
<span class=normal>345</span>
<span class=normal>346</span>
<span class=normal>347</span>
<span class=normal>348</span>
<span class=normal>349</span>
<span class=normal>350</span>
<span class=normal>351</span>
<span class=normal>352</span>
<span class=normal>353</span>
<span class=normal>354</span>
<span class=normal>355</span>
<span class=normal>356</span>
<span class=normal>357</span>
<span class=normal>358</span>
<span class=normal>359</span>
<span class=normal>360</span>
<span class=normal>361</span>
<span class=normal>362</span>
<span class=normal>363</span>
<span class=normal>364</span>
<span class=normal>365</span>
<span class=normal>366</span>
<span class=normal>367</span>
<span class=normal>368</span>
<span class=normal>369</span>
<span class=normal>370</span>
<span class=normal>371</span>
<span class=normal>372</span>
<span class=normal>373</span>
<span class=normal>374</span>
<span class=normal>375</span>
<span class=normal>376</span>
<span class=normal>377</span>
<span class=normal>378</span>
<span class=normal>379</span>
<span class=normal>380</span>
<span class=normal>381</span>
<span class=normal>382</span>
<span class=normal>383</span>
<span class=normal>384</span>
<span class=normal>385</span>
<span class=normal>386</span>
<span class=normal>387</span>
<span class=normal>388</span>
<span class=normal>389</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_plugin_settings</span><span class=p>(</span><span class=n>plugin</span><span class=p>,</span> <span class=n>project_settings</span><span class=p>,</span> <span class=n>log</span><span class=p>,</span> <span class=n>category</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get plugin settings based on host name and plugin name.</span>

<span class=sd>    Note:</span>
<span class=sd>        Default implementation of automated settings is passing host name</span>
<span class=sd>            into &#39;category&#39;.</span>

<span class=sd>    Args:</span>
<span class=sd>        plugin (pyblish.Plugin): Plugin where settings are applied.</span>
<span class=sd>        project_settings (dict[str, Any]): Project settings.</span>
<span class=sd>        log (logging.Logger): Logger to log messages.</span>
<span class=sd>        category (Optional[str]): Settings category key where to look</span>
<span class=sd>            for plugin settings.</span>

<span class=sd>    Returns:</span>
<span class=sd>        dict[str, Any]: Plugin settings {&#39;attribute&#39;: &#39;value&#39;}.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=c1># Plugin can define settings category by class attribute</span>
    <span class=c1># - it&#39;s impossible to set `settings_category` via settings because</span>
    <span class=c1>#     obviously settings are not applied before it.</span>
    <span class=c1># - if `settings_category` is set the fallback category method is ignored</span>
    <span class=n>settings_category</span> <span class=o>=</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>plugin</span><span class=p>,</span> <span class=s2>&quot;settings_category&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>settings_category</span><span class=p>:</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=n>category_settings</span> <span class=o>=</span> <span class=n>project_settings</span><span class=p>[</span><span class=n>settings_category</span><span class=p>]</span>
        <span class=k>except</span> <span class=ne>KeyError</span><span class=p>:</span>
            <span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>((</span>
                <span class=s2>&quot;Couldn&#39;t find settings category &#39;</span><span class=si>{}</span><span class=s2>&#39; in project settings&quot;</span>
            <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>settings_category</span><span class=p>))</span>
            <span class=k>return</span> <span class=p>{}</span>

        <span class=k>try</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>category_settings</span><span class=p>[</span><span class=s2>&quot;publish&quot;</span><span class=p>][</span><span class=n>plugin</span><span class=o>.</span><span class=vm>__name__</span><span class=p>]</span>
        <span class=k>except</span> <span class=ne>KeyError</span><span class=p>:</span>
            <span class=k>return</span> <span class=p>{}</span>

    <span class=c1># Use project settings based on a category name</span>
    <span class=k>if</span> <span class=n>category</span><span class=p>:</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=k>return</span> <span class=p>(</span>
                <span class=n>project_settings</span>
                <span class=p>[</span><span class=n>category</span><span class=p>]</span>
                <span class=p>[</span><span class=s2>&quot;publish&quot;</span><span class=p>]</span>
                <span class=p>[</span><span class=n>plugin</span><span class=o>.</span><span class=vm>__name__</span><span class=p>]</span>
            <span class=p>)</span>
        <span class=k>except</span> <span class=ne>KeyError</span><span class=p>:</span>
            <span class=k>pass</span>

    <span class=c1># Settings category determined from path</span>
    <span class=c1># - usually path is &#39;./&lt;category&gt;/plugins/publish/&lt;plugin file&gt;&#39;</span>
    <span class=c1># - category can be host name of addon name (&#39;maya&#39;, &#39;deadline&#39;, ...)</span>
    <span class=n>filepath</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>normpath</span><span class=p>(</span><span class=n>inspect</span><span class=o>.</span><span class=n>getfile</span><span class=p>(</span><span class=n>plugin</span><span class=p>))</span>

    <span class=n>split_path</span> <span class=o>=</span> <span class=n>filepath</span><span class=o>.</span><span class=n>rsplit</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>sep</span><span class=p>,</span> <span class=mi>5</span><span class=p>)</span>
    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>split_path</span><span class=p>)</span> <span class=o>&lt;</span> <span class=mi>4</span><span class=p>:</span>
        <span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>((</span>
            <span class=s2>&quot;Plugin path is too short to automatically&quot;</span>
            <span class=s2>&quot; extract settings category. </span><span class=si>{}</span><span class=s2>&quot;</span>
        <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>filepath</span><span class=p>))</span>
        <span class=k>return</span> <span class=p>{}</span>

    <span class=n>category_from_file</span> <span class=o>=</span> <span class=n>split_path</span><span class=p>[</span><span class=o>-</span><span class=mi>4</span><span class=p>]</span>
    <span class=n>plugin_kind</span> <span class=o>=</span> <span class=n>split_path</span><span class=p>[</span><span class=o>-</span><span class=mi>2</span><span class=p>]</span>

    <span class=c1># TODO: change after all plugins are moved one level up</span>
    <span class=k>if</span> <span class=n>category_from_file</span> <span class=o>==</span> <span class=s2>&quot;ayon_core&quot;</span><span class=p>:</span>
        <span class=n>category_from_file</span> <span class=o>=</span> <span class=s2>&quot;core&quot;</span>

    <span class=k>try</span><span class=p>:</span>
        <span class=k>return</span> <span class=p>(</span>
            <span class=n>project_settings</span>
            <span class=p>[</span><span class=n>category_from_file</span><span class=p>]</span>
            <span class=p>[</span><span class=n>plugin_kind</span><span class=p>]</span>
            <span class=p>[</span><span class=n>plugin</span><span class=o>.</span><span class=vm>__name__</span><span class=p>]</span>
        <span class=p>)</span>
    <span class=k>except</span> <span class=ne>KeyError</span><span class=p>:</span>
        <span class=k>pass</span>
    <span class=k>return</span> <span class=p>{}</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.publish.get_publish_instance_families class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_publish_instance_families</span><span class=p>(</span><span class=n>instance</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Get all families of the instance.</p> <p>Look for families under 'productType' and 'families' keys in instance data. Value of 'productType' is used as first family and then all other families in random order.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>pyblish.api.Instance</code> </td> <td> </td> <td> <div class=doc-md-description> <p>Instance to get families from.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>list[str]: List of families.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>888</span>
<span class=normal>889</span>
<span class=normal>890</span>
<span class=normal>891</span>
<span class=normal>892</span>
<span class=normal>893</span>
<span class=normal>894</span>
<span class=normal>895</span>
<span class=normal>896</span>
<span class=normal>897</span>
<span class=normal>898</span>
<span class=normal>899</span>
<span class=normal>900</span>
<span class=normal>901</span>
<span class=normal>902</span>
<span class=normal>903</span>
<span class=normal>904</span>
<span class=normal>905</span>
<span class=normal>906</span>
<span class=normal>907</span>
<span class=normal>908</span>
<span class=normal>909</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_publish_instance_families</span><span class=p>(</span><span class=n>instance</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get all families of the instance.</span>

<span class=sd>    Look for families under &#39;productType&#39; and &#39;families&#39; keys in instance data.</span>
<span class=sd>    Value of &#39;productType&#39; is used as first family and then all other families</span>
<span class=sd>    in random order.</span>

<span class=sd>    Args:</span>
<span class=sd>        pyblish.api.Instance: Instance to get families from.</span>

<span class=sd>    Returns:</span>
<span class=sd>        list[str]: List of families.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>family</span> <span class=o>=</span> <span class=n>instance</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;family&quot;</span><span class=p>)</span>
    <span class=n>families</span> <span class=o>=</span> <span class=nb>set</span><span class=p>(</span><span class=n>instance</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;families&quot;</span><span class=p>)</span> <span class=ow>or</span> <span class=p>[])</span>
    <span class=n>output</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>if</span> <span class=n>family</span><span class=p>:</span>
        <span class=n>output</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>family</span><span class=p>)</span>
        <span class=n>families</span><span class=o>.</span><span class=n>discard</span><span class=p>(</span><span class=n>family</span><span class=p>)</span>
    <span class=n>output</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>families</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>output</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.publish.get_publish_instance_label class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_publish_instance_label</span><span class=p>(</span><span class=n>instance</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Try to get label from pyblish instance.</p> <p>First are used values in instance data under 'label' and 'name' keys. Then is used string conversion of instance object -&gt; 'instance._name'.</p> <details class=todos open> <summary>Todos</summary> <p>Maybe 'productName' key could be used too.</p> </details> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>instance</code> </td> <td> <code><span title=pyblish.api.Instance>Instance</span></code> </td> <td> <div class=doc-md-description> <p>Pyblish instance.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>Instance label.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>865</span>
<span class=normal>866</span>
<span class=normal>867</span>
<span class=normal>868</span>
<span class=normal>869</span>
<span class=normal>870</span>
<span class=normal>871</span>
<span class=normal>872</span>
<span class=normal>873</span>
<span class=normal>874</span>
<span class=normal>875</span>
<span class=normal>876</span>
<span class=normal>877</span>
<span class=normal>878</span>
<span class=normal>879</span>
<span class=normal>880</span>
<span class=normal>881</span>
<span class=normal>882</span>
<span class=normal>883</span>
<span class=normal>884</span>
<span class=normal>885</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_publish_instance_label</span><span class=p>(</span><span class=n>instance</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Try to get label from pyblish instance.</span>

<span class=sd>    First are used values in instance data under &#39;label&#39; and &#39;name&#39; keys. Then</span>
<span class=sd>    is used string conversion of instance object -&gt; &#39;instance._name&#39;.</span>

<span class=sd>    Todos:</span>
<span class=sd>        Maybe &#39;productName&#39; key could be used too.</span>

<span class=sd>    Args:</span>
<span class=sd>        instance (pyblish.api.Instance): Pyblish instance.</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: Instance label.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=p>(</span>
        <span class=n>instance</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;label&quot;</span><span class=p>)</span>
        <span class=ow>or</span> <span class=n>instance</span><span class=o>.</span><span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;name&quot;</span><span class=p>)</span>
        <span class=ow>or</span> <span class=nb>str</span><span class=p>(</span><span class=n>instance</span><span class=p>)</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.publish.get_publish_repre_path class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_publish_repre_path</span><span class=p>(</span><span class=n>instance</span><span class=p>,</span> <span class=n>repre</span><span class=p>,</span> <span class=n>only_published</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Get representation path that can be used for integration.</p> <p>When 'only_published' is set to true the validation of path is not relevant. In that case we just need what is set in 'published_path' as "reference". The reference is not used to get or upload the file but for reference where the file was published.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>instance</code> </td> <td> <code><span title=pyblish.Instance>Instance</span></code> </td> <td> <div class=doc-md-description> <p>Processed instance object. Used for source of staging dir if representation does not have filled it.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>repre</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>Representation on instance which could be and could not be integrated with main integrator.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>only_published</code> </td> <td> <code><span title=bool>bool</span></code> </td> <td> <div class=doc-md-description> <p>Care only about published paths and ignore if filepath is not existing anymore.</p> </div> </td> <td> <code>False</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>Path to representation file.</p> </div> </td> </tr> <tr class=doc-section-item> <td><code>None</code></td> <td> </td> <td> <div class=doc-md-description> <p>Path is not filled or does not exists.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>585</span>
<span class=normal>586</span>
<span class=normal>587</span>
<span class=normal>588</span>
<span class=normal>589</span>
<span class=normal>590</span>
<span class=normal>591</span>
<span class=normal>592</span>
<span class=normal>593</span>
<span class=normal>594</span>
<span class=normal>595</span>
<span class=normal>596</span>
<span class=normal>597</span>
<span class=normal>598</span>
<span class=normal>599</span>
<span class=normal>600</span>
<span class=normal>601</span>
<span class=normal>602</span>
<span class=normal>603</span>
<span class=normal>604</span>
<span class=normal>605</span>
<span class=normal>606</span>
<span class=normal>607</span>
<span class=normal>608</span>
<span class=normal>609</span>
<span class=normal>610</span>
<span class=normal>611</span>
<span class=normal>612</span>
<span class=normal>613</span>
<span class=normal>614</span>
<span class=normal>615</span>
<span class=normal>616</span>
<span class=normal>617</span>
<span class=normal>618</span>
<span class=normal>619</span>
<span class=normal>620</span>
<span class=normal>621</span>
<span class=normal>622</span>
<span class=normal>623</span>
<span class=normal>624</span>
<span class=normal>625</span>
<span class=normal>626</span>
<span class=normal>627</span>
<span class=normal>628</span>
<span class=normal>629</span>
<span class=normal>630</span>
<span class=normal>631</span>
<span class=normal>632</span>
<span class=normal>633</span>
<span class=normal>634</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_publish_repre_path</span><span class=p>(</span><span class=n>instance</span><span class=p>,</span> <span class=n>repre</span><span class=p>,</span> <span class=n>only_published</span><span class=o>=</span><span class=kc>False</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get representation path that can be used for integration.</span>

<span class=sd>    When &#39;only_published&#39; is set to true the validation of path is not</span>
<span class=sd>    relevant. In that case we just need what is set in &#39;published_path&#39;</span>
<span class=sd>    as &quot;reference&quot;. The reference is not used to get or upload the file but</span>
<span class=sd>    for reference where the file was published.</span>

<span class=sd>    Args:</span>
<span class=sd>        instance (pyblish.Instance): Processed instance object. Used</span>
<span class=sd>            for source of staging dir if representation does not have</span>
<span class=sd>            filled it.</span>
<span class=sd>        repre (dict): Representation on instance which could be and</span>
<span class=sd>            could not be integrated with main integrator.</span>
<span class=sd>        only_published (bool): Care only about published paths and</span>
<span class=sd>            ignore if filepath is not existing anymore.</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: Path to representation file.</span>
<span class=sd>        None: Path is not filled or does not exists.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>published_path</span> <span class=o>=</span> <span class=n>repre</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;published_path&quot;</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>published_path</span><span class=p>:</span>
        <span class=n>published_path</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>normpath</span><span class=p>(</span><span class=n>published_path</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>published_path</span><span class=p>):</span>
            <span class=k>return</span> <span class=n>published_path</span>

    <span class=k>if</span> <span class=n>only_published</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>published_path</span>

    <span class=n>comp_files</span> <span class=o>=</span> <span class=n>repre</span><span class=p>[</span><span class=s2>&quot;files&quot;</span><span class=p>]</span>
    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>comp_files</span><span class=p>,</span> <span class=p>(</span><span class=nb>tuple</span><span class=p>,</span> <span class=nb>list</span><span class=p>,</span> <span class=nb>set</span><span class=p>)):</span>
        <span class=n>filename</span> <span class=o>=</span> <span class=n>comp_files</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=n>filename</span> <span class=o>=</span> <span class=n>comp_files</span>

    <span class=n>staging_dir</span> <span class=o>=</span> <span class=n>repre</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;stagingDir&quot;</span><span class=p>)</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>staging_dir</span><span class=p>:</span>
        <span class=n>staging_dir</span> <span class=o>=</span> <span class=n>get_instance_staging_dir</span><span class=p>(</span><span class=n>instance</span><span class=p>)</span>

    <span class=c1># Expand the staging dir path in case it&#39;s been stored with the root</span>
    <span class=c1># template syntax</span>
    <span class=n>anatomy</span> <span class=o>=</span> <span class=n>instance</span><span class=o>.</span><span class=n>context</span><span class=o>.</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;anatomy&quot;</span><span class=p>]</span>
    <span class=n>staging_dir</span> <span class=o>=</span> <span class=n>anatomy</span><span class=o>.</span><span class=n>fill_root</span><span class=p>(</span><span class=n>staging_dir</span><span class=p>)</span>

    <span class=n>src_path</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>normpath</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>staging_dir</span><span class=p>,</span> <span class=n>filename</span><span class=p>))</span>
    <span class=k>if</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>src_path</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>src_path</span>
    <span class=k>return</span> <span class=kc>None</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.publish.get_publish_template_name class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_publish_template_name</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=n>host_name</span><span class=p>,</span> <span class=n>product_type</span><span class=p>,</span> <span class=n>task_name</span><span class=p>,</span> <span class=n>task_type</span><span class=p>,</span> <span class=n>project_settings</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>hero</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>logger</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Get template name which should be used for passed context.</p> <p>Publish templates are filtered by host name, family, task name and task type.</p> <p>Default template which is used at if profiles are not available or profile has empty value is defined by 'DEFAULT_PUBLISH_TEMPLATE' constant.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>project_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Name of project where to look for settings.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>host_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Name of host integration.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>product_type</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Product type for which should be found template.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>task_name</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Task name on which is instance working.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>task_type</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Task type on which is instance working.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>project_settings</code> </td> <td> <code><span title=Dict>Dict</span>[<span title=str>str</span>, <span title=Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Prepared project settings.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>hero</code> </td> <td> <code><span title=bool>bool</span></code> </td> <td> <div class=doc-md-description> <p>Template is for hero version publishing.</p> </div> </td> <td> <code>False</code> </td> </tr> <tr class=doc-section-item> <td> <code>logger</code> </td> <td> <code><span title=logging.Logger>Logger</span></code> </td> <td> <div class=doc-md-description> <p>Custom logger used for 'filter_profiles' function.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>Template name which should be used for integration.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_publish_template_name</span><span class=p>(</span>
    <span class=n>project_name</span><span class=p>,</span>
    <span class=n>host_name</span><span class=p>,</span>
    <span class=n>product_type</span><span class=p>,</span>
    <span class=n>task_name</span><span class=p>,</span>
    <span class=n>task_type</span><span class=p>,</span>
    <span class=n>project_settings</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>hero</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=n>logger</span><span class=o>=</span><span class=kc>None</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get template name which should be used for passed context.</span>

<span class=sd>    Publish templates are filtered by host name, family, task name and</span>
<span class=sd>    task type.</span>

<span class=sd>    Default template which is used at if profiles are not available or profile</span>
<span class=sd>    has empty value is defined by &#39;DEFAULT_PUBLISH_TEMPLATE&#39; constant.</span>

<span class=sd>    Args:</span>
<span class=sd>        project_name (str): Name of project where to look for settings.</span>
<span class=sd>        host_name (str): Name of host integration.</span>
<span class=sd>        product_type (str): Product type for which should be found template.</span>
<span class=sd>        task_name (str): Task name on which is instance working.</span>
<span class=sd>        task_type (str): Task type on which is instance working.</span>
<span class=sd>        project_settings (Dict[str, Any]): Prepared project settings.</span>
<span class=sd>        hero (bool): Template is for hero version publishing.</span>
<span class=sd>        logger (logging.Logger): Custom logger used for &#39;filter_profiles&#39;</span>
<span class=sd>            function.</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: Template name which should be used for integration.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>template</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=n>filter_criteria</span> <span class=o>=</span> <span class=p>{</span>
        <span class=s2>&quot;hosts&quot;</span><span class=p>:</span> <span class=n>host_name</span><span class=p>,</span>
        <span class=s2>&quot;product_types&quot;</span><span class=p>:</span> <span class=n>product_type</span><span class=p>,</span>
        <span class=s2>&quot;task_names&quot;</span><span class=p>:</span> <span class=n>task_name</span><span class=p>,</span>
        <span class=s2>&quot;task_types&quot;</span><span class=p>:</span> <span class=n>task_type</span><span class=p>,</span>
    <span class=p>}</span>
    <span class=k>if</span> <span class=n>hero</span><span class=p>:</span>
        <span class=n>default_template</span> <span class=o>=</span> <span class=n>DEFAULT_HERO_PUBLISH_TEMPLATE</span>
        <span class=n>profiles</span> <span class=o>=</span> <span class=n>get_hero_template_name_profiles</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span> <span class=n>project_settings</span><span class=p>,</span> <span class=n>logger</span>
        <span class=p>)</span>

    <span class=k>else</span><span class=p>:</span>
        <span class=n>profiles</span> <span class=o>=</span> <span class=n>get_template_name_profiles</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span> <span class=n>project_settings</span><span class=p>,</span> <span class=n>logger</span>
        <span class=p>)</span>
        <span class=n>default_template</span> <span class=o>=</span> <span class=n>DEFAULT_PUBLISH_TEMPLATE</span>

    <span class=n>profile</span> <span class=o>=</span> <span class=n>filter_profiles</span><span class=p>(</span><span class=n>profiles</span><span class=p>,</span> <span class=n>filter_criteria</span><span class=p>,</span> <span class=n>logger</span><span class=o>=</span><span class=n>logger</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>profile</span><span class=p>:</span>
        <span class=n>template</span> <span class=o>=</span> <span class=n>profile</span><span class=p>[</span><span class=s2>&quot;template_name&quot;</span><span class=p>]</span>
    <span class=k>return</span> <span class=n>template</span> <span class=ow>or</span> <span class=n>default_template</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.publish.load_help_content_from_filepath class="doc doc-heading"> <code class="highlight language-python"><span class=n>load_help_content_from_filepath</span><span class=p>(</span><span class=n>filepath</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Load help content from xml file. Xml file may contain errors and warnings.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>load_help_content_from_filepath</span><span class=p>(</span><span class=n>filepath</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Load help content from xml file.</span>
<span class=sd>    Xml file may contain errors and warnings.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>errors</span> <span class=o>=</span> <span class=p>{}</span>
    <span class=n>warnings</span> <span class=o>=</span> <span class=p>{}</span>
    <span class=n>output</span> <span class=o>=</span> <span class=p>{</span>
        <span class=s2>&quot;errors&quot;</span><span class=p>:</span> <span class=n>errors</span><span class=p>,</span>
        <span class=s2>&quot;warnings&quot;</span><span class=p>:</span> <span class=n>warnings</span>
    <span class=p>}</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>filepath</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>output</span>
    <span class=n>tree</span> <span class=o>=</span> <span class=n>xml</span><span class=o>.</span><span class=n>etree</span><span class=o>.</span><span class=n>ElementTree</span><span class=o>.</span><span class=n>parse</span><span class=p>(</span><span class=n>filepath</span><span class=p>)</span>
    <span class=n>root</span> <span class=o>=</span> <span class=n>tree</span><span class=o>.</span><span class=n>getroot</span><span class=p>()</span>
    <span class=k>for</span> <span class=n>child</span> <span class=ow>in</span> <span class=n>root</span><span class=p>:</span>
        <span class=n>child_id</span> <span class=o>=</span> <span class=n>child</span><span class=o>.</span><span class=n>attrib</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;id&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>child_id</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>continue</span>

        <span class=c1># Make sure ID is string</span>
        <span class=n>child_id</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>child_id</span><span class=p>)</span>

        <span class=n>title</span> <span class=o>=</span> <span class=n>child</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s2>&quot;title&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>text</span>
        <span class=n>description</span> <span class=o>=</span> <span class=n>child</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s2>&quot;description&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>text</span>
        <span class=n>detail_node</span> <span class=o>=</span> <span class=n>child</span><span class=o>.</span><span class=n>find</span><span class=p>(</span><span class=s2>&quot;detail&quot;</span><span class=p>)</span>
        <span class=n>detail</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=k>if</span> <span class=n>detail_node</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>detail</span> <span class=o>=</span> <span class=n>detail_node</span><span class=o>.</span><span class=n>text</span>
        <span class=k>if</span> <span class=n>child</span><span class=o>.</span><span class=n>tag</span> <span class=o>==</span> <span class=s2>&quot;error&quot;</span><span class=p>:</span>
            <span class=n>errors</span><span class=p>[</span><span class=n>child_id</span><span class=p>]</span> <span class=o>=</span> <span class=n>HelpContent</span><span class=p>(</span><span class=n>title</span><span class=p>,</span> <span class=n>description</span><span class=p>,</span> <span class=n>detail</span><span class=p>)</span>
        <span class=k>elif</span> <span class=n>child</span><span class=o>.</span><span class=n>tag</span> <span class=o>==</span> <span class=s2>&quot;warning&quot;</span><span class=p>:</span>
            <span class=n>warnings</span><span class=p>[</span><span class=n>child_id</span><span class=p>]</span> <span class=o>=</span> <span class=n>HelpContent</span><span class=p>(</span><span class=n>title</span><span class=p>,</span> <span class=n>description</span><span class=p>,</span> <span class=n>detail</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>output</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.publish.main_cli_publish class="doc doc-heading"> <code class="highlight language-python"><span class=n>main_cli_publish</span><span class=p>(</span><span class=n>path</span><span class=p>,</span> <span class=n>targets</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>addons_manager</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Start headless publishing.</p> <p>Publish use json from passed path argument.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>path</code> </td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Path to JSON.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>targets</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=typing.List>List</span>[<span title=str>str</span>]]</code> </td> <td> <div class=doc-md-description> <p>List of pyblish targets.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>addons_manager</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=ayon_core.addon.AddonsManager>AddonsManager</span>]</code> </td> <td> <div class=doc-md-description> <p>Addons manager instance.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Raises:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=RuntimeError>RuntimeError</span></code> </td> <td> <div class=doc-md-description> <p>When there is no path to process or when executed with list of JSON paths.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 957</span>
<span class=normal> 958</span>
<span class=normal> 959</span>
<span class=normal> 960</span>
<span class=normal> 961</span>
<span class=normal> 962</span>
<span class=normal> 963</span>
<span class=normal> 964</span>
<span class=normal> 965</span>
<span class=normal> 966</span>
<span class=normal> 967</span>
<span class=normal> 968</span>
<span class=normal> 969</span>
<span class=normal> 970</span>
<span class=normal> 971</span>
<span class=normal> 972</span>
<span class=normal> 973</span>
<span class=normal> 974</span>
<span class=normal> 975</span>
<span class=normal> 976</span>
<span class=normal> 977</span>
<span class=normal> 978</span>
<span class=normal> 979</span>
<span class=normal> 980</span>
<span class=normal> 981</span>
<span class=normal> 982</span>
<span class=normal> 983</span>
<span class=normal> 984</span>
<span class=normal> 985</span>
<span class=normal> 986</span>
<span class=normal> 987</span>
<span class=normal> 988</span>
<span class=normal> 989</span>
<span class=normal> 990</span>
<span class=normal> 991</span>
<span class=normal> 992</span>
<span class=normal> 993</span>
<span class=normal> 994</span>
<span class=normal> 995</span>
<span class=normal> 996</span>
<span class=normal> 997</span>
<span class=normal> 998</span>
<span class=normal> 999</span>
<span class=normal>1000</span>
<span class=normal>1001</span>
<span class=normal>1002</span>
<span class=normal>1003</span>
<span class=normal>1004</span>
<span class=normal>1005</span>
<span class=normal>1006</span>
<span class=normal>1007</span>
<span class=normal>1008</span>
<span class=normal>1009</span>
<span class=normal>1010</span>
<span class=normal>1011</span>
<span class=normal>1012</span>
<span class=normal>1013</span>
<span class=normal>1014</span>
<span class=normal>1015</span>
<span class=normal>1016</span>
<span class=normal>1017</span>
<span class=normal>1018</span>
<span class=normal>1019</span>
<span class=normal>1020</span>
<span class=normal>1021</span>
<span class=normal>1022</span>
<span class=normal>1023</span>
<span class=normal>1024</span>
<span class=normal>1025</span>
<span class=normal>1026</span>
<span class=normal>1027</span>
<span class=normal>1028</span>
<span class=normal>1029</span>
<span class=normal>1030</span>
<span class=normal>1031</span>
<span class=normal>1032</span>
<span class=normal>1033</span>
<span class=normal>1034</span>
<span class=normal>1035</span>
<span class=normal>1036</span>
<span class=normal>1037</span>
<span class=normal>1038</span>
<span class=normal>1039</span>
<span class=normal>1040</span>
<span class=normal>1041</span>
<span class=normal>1042</span>
<span class=normal>1043</span>
<span class=normal>1044</span>
<span class=normal>1045</span>
<span class=normal>1046</span>
<span class=normal>1047</span>
<span class=normal>1048</span>
<span class=normal>1049</span>
<span class=normal>1050</span>
<span class=normal>1051</span>
<span class=normal>1052</span>
<span class=normal>1053</span>
<span class=normal>1054</span>
<span class=normal>1055</span>
<span class=normal>1056</span>
<span class=normal>1057</span>
<span class=normal>1058</span>
<span class=normal>1059</span>
<span class=normal>1060</span>
<span class=normal>1061</span>
<span class=normal>1062</span>
<span class=normal>1063</span>
<span class=normal>1064</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>main_cli_publish</span><span class=p>(</span>
    <span class=n>path</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
    <span class=n>targets</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
    <span class=n>addons_manager</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>AddonsManager</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Start headless publishing.</span>

<span class=sd>    Publish use json from passed path argument.</span>

<span class=sd>    Args:</span>
<span class=sd>        path (str): Path to JSON.</span>
<span class=sd>        targets (Optional[List[str]]): List of pyblish targets.</span>
<span class=sd>        addons_manager (Optional[AddonsManager]): Addons manager instance.</span>

<span class=sd>    Raises:</span>
<span class=sd>        RuntimeError: When there is no path to process or when executed with</span>
<span class=sd>            list of JSON paths.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=kn>from</span><span class=w> </span><span class=nn>ayon_core.pipeline</span><span class=w> </span><span class=kn>import</span> <span class=p>(</span>
        <span class=n>install_ayon_plugins</span><span class=p>,</span>
        <span class=n>get_global_context</span><span class=p>,</span>
    <span class=p>)</span>

    <span class=c1># Register target and host</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>path</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
        <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span><span class=s2>&quot;Path to JSON must be a string.&quot;</span><span class=p>)</span>

    <span class=c1># Fix older jobs</span>
    <span class=k>for</span> <span class=n>src_key</span><span class=p>,</span> <span class=n>dst_key</span> <span class=ow>in</span> <span class=p>(</span>
        <span class=p>(</span><span class=s2>&quot;AVALON_PROJECT&quot;</span><span class=p>,</span> <span class=s2>&quot;AYON_PROJECT_NAME&quot;</span><span class=p>),</span>
        <span class=p>(</span><span class=s2>&quot;AVALON_ASSET&quot;</span><span class=p>,</span> <span class=s2>&quot;AYON_FOLDER_PATH&quot;</span><span class=p>),</span>
        <span class=p>(</span><span class=s2>&quot;AVALON_TASK&quot;</span><span class=p>,</span> <span class=s2>&quot;AYON_TASK_NAME&quot;</span><span class=p>),</span>
        <span class=p>(</span><span class=s2>&quot;AVALON_WORKDIR&quot;</span><span class=p>,</span> <span class=s2>&quot;AYON_WORKDIR&quot;</span><span class=p>),</span>
        <span class=p>(</span><span class=s2>&quot;AVALON_APP_NAME&quot;</span><span class=p>,</span> <span class=s2>&quot;AYON_APP_NAME&quot;</span><span class=p>),</span>
        <span class=p>(</span><span class=s2>&quot;AVALON_APP&quot;</span><span class=p>,</span> <span class=s2>&quot;AYON_HOST_NAME&quot;</span><span class=p>),</span>
    <span class=p>):</span>
        <span class=k>if</span> <span class=n>src_key</span> <span class=ow>in</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span> <span class=ow>and</span> <span class=n>dst_key</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=p>:</span>
            <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=p>[</span><span class=n>dst_key</span><span class=p>]</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=p>[</span><span class=n>src_key</span><span class=p>]</span>
        <span class=c1># Remove old keys, so we&#39;re sure they&#39;re not used</span>
        <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>src_key</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>

    <span class=n>log</span> <span class=o>=</span> <span class=n>Logger</span><span class=o>.</span><span class=n>get_logger</span><span class=p>(</span><span class=s2>&quot;CLI-publish&quot;</span><span class=p>)</span>

    <span class=c1># Make public ayon api behave as other user</span>
    <span class=c1># - this works only if public ayon api is using service user</span>
    <span class=n>username</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AYON_USERNAME&quot;</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>username</span><span class=p>:</span>
        <span class=c1># NOTE: ayon-python-api does not have public api function to find</span>
        <span class=c1>#   out if is used service user. So we need to have try &gt; except</span>
        <span class=c1>#   block.</span>
        <span class=n>con</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_server_api_connection</span><span class=p>()</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=n>con</span><span class=o>.</span><span class=n>set_default_service_username</span><span class=p>(</span><span class=n>username</span><span class=p>)</span>
        <span class=k>except</span> <span class=ne>ValueError</span><span class=p>:</span>
            <span class=k>pass</span>

    <span class=n>install_ayon_plugins</span><span class=p>()</span>

    <span class=k>if</span> <span class=n>addons_manager</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>addons_manager</span> <span class=o>=</span> <span class=n>AddonsManager</span><span class=p>()</span>

    <span class=c1># TODO validate if this has to happen</span>
    <span class=c1># - it should happen during &#39;install_ayon_plugins&#39;</span>
    <span class=n>publish_paths</span> <span class=o>=</span> <span class=n>addons_manager</span><span class=o>.</span><span class=n>collect_plugin_paths</span><span class=p>()[</span><span class=s2>&quot;publish&quot;</span><span class=p>]</span>
    <span class=k>for</span> <span class=n>plugin_path</span> <span class=ow>in</span> <span class=n>publish_paths</span><span class=p>:</span>
        <span class=n>pyblish</span><span class=o>.</span><span class=n>api</span><span class=o>.</span><span class=n>register_plugin_path</span><span class=p>(</span><span class=n>plugin_path</span><span class=p>)</span>

    <span class=n>applications_addon</span> <span class=o>=</span> <span class=n>addons_manager</span><span class=o>.</span><span class=n>get_enabled_addon</span><span class=p>(</span><span class=s2>&quot;applications&quot;</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>applications_addon</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>context</span> <span class=o>=</span> <span class=n>get_global_context</span><span class=p>()</span>
        <span class=n>env</span> <span class=o>=</span> <span class=n>applications_addon</span><span class=o>.</span><span class=n>get_farm_publish_environment_variables</span><span class=p>(</span>
            <span class=n>context</span><span class=p>[</span><span class=s2>&quot;project_name&quot;</span><span class=p>],</span>
            <span class=n>context</span><span class=p>[</span><span class=s2>&quot;folder_path&quot;</span><span class=p>],</span>
            <span class=n>context</span><span class=p>[</span><span class=s2>&quot;task_name&quot;</span><span class=p>],</span>
        <span class=p>)</span>
        <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>env</span><span class=p>)</span>

    <span class=n>pyblish</span><span class=o>.</span><span class=n>api</span><span class=o>.</span><span class=n>register_host</span><span class=p>(</span><span class=s2>&quot;shell&quot;</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>targets</span><span class=p>:</span>
        <span class=k>for</span> <span class=n>target</span> <span class=ow>in</span> <span class=n>targets</span><span class=p>:</span>
            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;setting target: </span><span class=si>{</span><span class=n>target</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
            <span class=n>pyblish</span><span class=o>.</span><span class=n>api</span><span class=o>.</span><span class=n>register_target</span><span class=p>(</span><span class=n>target</span><span class=p>)</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=n>pyblish</span><span class=o>.</span><span class=n>api</span><span class=o>.</span><span class=n>register_target</span><span class=p>(</span><span class=s2>&quot;farm&quot;</span><span class=p>)</span>

    <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=p>[</span><span class=s2>&quot;AYON_PUBLISH_DATA&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>path</span>
    <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=p>[</span><span class=s2>&quot;HEADLESS_PUBLISH&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;true&#39;</span>  <span class=c1># to use in app lib</span>

    <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Running publish ...&quot;</span><span class=p>)</span>

    <span class=n>plugins</span> <span class=o>=</span> <span class=n>pyblish</span><span class=o>.</span><span class=n>api</span><span class=o>.</span><span class=n>discover</span><span class=p>()</span>
    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Using plugins:&quot;</span><span class=p>)</span>
    <span class=k>for</span> <span class=n>plugin</span> <span class=ow>in</span> <span class=n>plugins</span><span class=p>:</span>
        <span class=nb>print</span><span class=p>(</span><span class=n>plugin</span><span class=p>)</span>

    <span class=c1># Error exit as soon as any error occurs.</span>
    <span class=n>error_format</span> <span class=o>=</span> <span class=p>(</span><span class=s2>&quot;Failed </span><span class=si>{plugin.__name__}</span><span class=s2>: &quot;</span>
                    <span class=s2>&quot;</span><span class=si>{error}</span><span class=s2> -- </span><span class=si>{error.traceback}</span><span class=s2>&quot;</span><span class=p>)</span>

    <span class=k>for</span> <span class=n>result</span> <span class=ow>in</span> <span class=n>pyblish</span><span class=o>.</span><span class=n>util</span><span class=o>.</span><span class=n>publish_iter</span><span class=p>():</span>
        <span class=k>if</span> <span class=n>result</span><span class=p>[</span><span class=s2>&quot;error&quot;</span><span class=p>]:</span>
            <span class=n>log</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=n>error_format</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=o>**</span><span class=n>result</span><span class=p>))</span>
            <span class=c1># uninstall()</span>
            <span class=n>sys</span><span class=o>.</span><span class=n>exit</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>

    <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Publish finished.&quot;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.publish.publish_plugins_discover class="doc doc-heading"> <code class="highlight language-python"><span class=n>publish_plugins_discover</span><span class=p>(</span><span class=n>paths</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Find and return available pyblish plug-ins.</p> <p>Overridden function from <code>pyblish</code> module to be able to collect crashed files and reason of their crash.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>paths</code> </td> <td> <code><span title=list>list</span></code> </td> <td> <div class=doc-md-description> <p>Paths to discover plug-ins from. If no paths are provided, all paths are searched.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/publish/lib.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span>
<span class=normal>277</span>
<span class=normal>278</span>
<span class=normal>279</span>
<span class=normal>280</span>
<span class=normal>281</span>
<span class=normal>282</span>
<span class=normal>283</span>
<span class=normal>284</span>
<span class=normal>285</span>
<span class=normal>286</span>
<span class=normal>287</span>
<span class=normal>288</span>
<span class=normal>289</span>
<span class=normal>290</span>
<span class=normal>291</span>
<span class=normal>292</span>
<span class=normal>293</span>
<span class=normal>294</span>
<span class=normal>295</span>
<span class=normal>296</span>
<span class=normal>297</span>
<span class=normal>298</span>
<span class=normal>299</span>
<span class=normal>300</span>
<span class=normal>301</span>
<span class=normal>302</span>
<span class=normal>303</span>
<span class=normal>304</span>
<span class=normal>305</span>
<span class=normal>306</span>
<span class=normal>307</span>
<span class=normal>308</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>publish_plugins_discover</span><span class=p>(</span>
        <span class=n>paths</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>DiscoverResult</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Find and return available pyblish plug-ins.</span>

<span class=sd>    Overridden function from `pyblish` module to be able to collect</span>
<span class=sd>        crashed files and reason of their crash.</span>

<span class=sd>    Arguments:</span>
<span class=sd>        paths (list, optional): Paths to discover plug-ins from.</span>
<span class=sd>            If no paths are provided, all paths are searched.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=c1># The only difference with `pyblish.api.discover`</span>
    <span class=n>result</span> <span class=o>=</span> <span class=n>DiscoverResult</span><span class=p>(</span><span class=n>pyblish</span><span class=o>.</span><span class=n>api</span><span class=o>.</span><span class=n>Plugin</span><span class=p>)</span>

    <span class=n>plugins</span> <span class=o>=</span> <span class=p>{}</span>
    <span class=n>plugin_names</span> <span class=o>=</span> <span class=p>[]</span>

    <span class=n>allow_duplicates</span> <span class=o>=</span> <span class=n>pyblish</span><span class=o>.</span><span class=n>plugin</span><span class=o>.</span><span class=n>ALLOW_DUPLICATES</span>
    <span class=n>log</span> <span class=o>=</span> <span class=n>pyblish</span><span class=o>.</span><span class=n>plugin</span><span class=o>.</span><span class=n>log</span>

    <span class=c1># Include plug-ins from registered paths</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>paths</span><span class=p>:</span>
        <span class=n>paths</span> <span class=o>=</span> <span class=n>pyblish</span><span class=o>.</span><span class=n>plugin</span><span class=o>.</span><span class=n>plugin_paths</span><span class=p>()</span>

    <span class=k>for</span> <span class=n>path</span> <span class=ow>in</span> <span class=n>paths</span><span class=p>:</span>
        <span class=n>path</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>normpath</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>isdir</span><span class=p>(</span><span class=n>path</span><span class=p>):</span>
            <span class=k>continue</span>

        <span class=k>for</span> <span class=n>fname</span> <span class=ow>in</span> <span class=n>os</span><span class=o>.</span><span class=n>listdir</span><span class=p>(</span><span class=n>path</span><span class=p>):</span>
            <span class=k>if</span> <span class=n>fname</span><span class=o>.</span><span class=n>startswith</span><span class=p>(</span><span class=s2>&quot;_&quot;</span><span class=p>):</span>
                <span class=k>continue</span>

            <span class=n>abspath</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>path</span><span class=p>,</span> <span class=n>fname</span><span class=p>)</span>

            <span class=k>if</span> <span class=ow>not</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>isfile</span><span class=p>(</span><span class=n>abspath</span><span class=p>):</span>
                <span class=k>continue</span>

            <span class=n>mod_name</span><span class=p>,</span> <span class=n>mod_ext</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>splitext</span><span class=p>(</span><span class=n>fname</span><span class=p>)</span>

            <span class=k>if</span> <span class=n>mod_ext</span> <span class=o>!=</span> <span class=s2>&quot;.py&quot;</span><span class=p>:</span>
                <span class=k>continue</span>

            <span class=k>try</span><span class=p>:</span>
                <span class=n>module</span> <span class=o>=</span> <span class=n>import_filepath</span><span class=p>(</span>
                    <span class=n>abspath</span><span class=p>,</span> <span class=n>mod_name</span><span class=p>,</span> <span class=n>sys_module_name</span><span class=o>=</span><span class=n>mod_name</span><span class=p>)</span>

            <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>err</span><span class=p>:</span>  <span class=c1># noqa: BLE001</span>
                <span class=c1># we need broad exception to catch all possible errors.</span>
                <span class=n>result</span><span class=o>.</span><span class=n>crashed_file_paths</span><span class=p>[</span><span class=n>abspath</span><span class=p>]</span> <span class=o>=</span> <span class=n>sys</span><span class=o>.</span><span class=n>exc_info</span><span class=p>()</span>

                <span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s1>&#39;Skipped: &quot;</span><span class=si>%s</span><span class=s1>&quot; (</span><span class=si>%s</span><span class=s1>)&#39;</span><span class=p>,</span> <span class=n>mod_name</span><span class=p>,</span> <span class=n>err</span><span class=p>)</span>
                <span class=k>continue</span>

            <span class=k>for</span> <span class=n>plugin</span> <span class=ow>in</span> <span class=n>pyblish</span><span class=o>.</span><span class=n>plugin</span><span class=o>.</span><span class=n>plugins_from_module</span><span class=p>(</span><span class=n>module</span><span class=p>):</span>
                <span class=c1># Ignore base plugin classes</span>
                <span class=c1># NOTE &#39;pyblish.api.discover&#39; does not ignore them!</span>
                <span class=k>if</span> <span class=p>(</span>
                    <span class=n>plugin</span> <span class=ow>is</span> <span class=n>pyblish</span><span class=o>.</span><span class=n>api</span><span class=o>.</span><span class=n>Plugin</span>
                    <span class=ow>or</span> <span class=n>plugin</span> <span class=ow>is</span> <span class=n>pyblish</span><span class=o>.</span><span class=n>api</span><span class=o>.</span><span class=n>ContextPlugin</span>
                    <span class=ow>or</span> <span class=n>plugin</span> <span class=ow>is</span> <span class=n>pyblish</span><span class=o>.</span><span class=n>api</span><span class=o>.</span><span class=n>InstancePlugin</span>
                <span class=p>):</span>
                    <span class=k>continue</span>
                <span class=k>if</span> <span class=ow>not</span> <span class=n>allow_duplicates</span> <span class=ow>and</span> <span class=n>plugin</span><span class=o>.</span><span class=vm>__name__</span> <span class=ow>in</span> <span class=n>plugin_names</span><span class=p>:</span>
                    <span class=n>result</span><span class=o>.</span><span class=n>duplicated_plugins</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>plugin</span><span class=p>)</span>
                    <span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Duplicate plug-in found: </span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span> <span class=n>plugin</span><span class=p>)</span>
                    <span class=k>continue</span>

                <span class=n>plugin_names</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>plugin</span><span class=o>.</span><span class=vm>__name__</span><span class=p>)</span>
                <span class=n>plugin</span><span class=o>.</span><span class=vm>__file__</span> <span class=o>=</span> <span class=n>module</span><span class=o>.</span><span class=vm>__file__</span>
                <span class=n>key</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>module</span><span class=o>.</span><span class=vm>__file__</span><span class=si>}</span><span class=s2>.</span><span class=si>{</span><span class=n>plugin</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2>&quot;</span>
                <span class=n>plugins</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>plugin</span>

    <span class=c1># Include plug-ins from registration.</span>
    <span class=c1># Directly registered plug-ins take precedence.</span>
    <span class=k>for</span> <span class=n>plugin</span> <span class=ow>in</span> <span class=n>pyblish</span><span class=o>.</span><span class=n>plugin</span><span class=o>.</span><span class=n>registered_plugins</span><span class=p>():</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>allow_duplicates</span> <span class=ow>and</span> <span class=n>plugin</span><span class=o>.</span><span class=vm>__name__</span> <span class=ow>in</span> <span class=n>plugin_names</span><span class=p>:</span>
            <span class=n>result</span><span class=o>.</span><span class=n>duplicated_plugins</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>plugin</span><span class=p>)</span>
            <span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Duplicate plug-in found: </span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span> <span class=n>plugin</span><span class=p>)</span>
            <span class=k>continue</span>

        <span class=n>plugin_names</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>plugin</span><span class=o>.</span><span class=vm>__name__</span><span class=p>)</span>

        <span class=n>plugins</span><span class=p>[</span><span class=n>plugin</span><span class=o>.</span><span class=vm>__name__</span><span class=p>]</span> <span class=o>=</span> <span class=n>plugin</span>

    <span class=n>plugins</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>plugins</span><span class=o>.</span><span class=n>values</span><span class=p>())</span>
    <span class=n>pyblish</span><span class=o>.</span><span class=n>plugin</span><span class=o>.</span><span class=n>sort</span><span class=p>(</span><span class=n>plugins</span><span class=p>)</span>  <span class=c1># In-place</span>

    <span class=c1># In-place user-defined filter</span>
    <span class=k>for</span> <span class=n>filter_</span> <span class=ow>in</span> <span class=n>pyblish</span><span class=o>.</span><span class=n>plugin</span><span class=o>.</span><span class=n>_registered_plugin_filters</span><span class=p>:</span>
        <span class=n>filter_</span><span class=p>(</span><span class=n>plugins</span><span class=p>)</span>

    <span class=n>result</span><span class=o>.</span><span class=n>plugins</span> <span class=o>=</span> <span class=n>plugins</span>

    <span class=k>return</span> <span class=n>result</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../../..", "features": ["navigation.sections", "navigation.path", "navigation.prune"], "search": "../../../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../../../../assets/javascripts/bundle.c8b220af.min.js></script> </body> </html>