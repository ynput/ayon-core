<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=prev href=dirmap.html><link rel=next href=interfaces/index.html><link rel=icon href=../../../../img/favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.20"><title>host - ayon-core</title><link rel=stylesheet href=../../../../assets/stylesheets/main.e53b48f4.min.css><link rel=stylesheet href=../../../../assets/stylesheets/palette.06af60db.min.css><script src=https://unpkg.com/iframe-worker/shim></script><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../../assets/_mkdocstrings.css><link rel=stylesheet href=../../../../css/custom.css><script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#client.ayon_core.host.host class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../../index.html title=ayon-core class="md-header__button md-logo" aria-label=ayon-core data-md-component=logo> <img src=../../../../img/ay-symbol-blackw-full.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> ayon-core </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> host </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/ynput/ayon-core title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../../index.html title=ayon-core class="md-nav__button md-logo" aria-label=ayon-core data-md-component=logo> <img src=../../../../img/ay-symbol-blackw-full.png alt=logo> </a> ayon-core </label> <div class=md-nav__source> <a href=https://github.com/ynput/ayon-core title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../index.html class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../../../../license.html class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1 checked> <label class=md-nav__link for=__nav_3_1 id=__nav_3_1_label tabindex=0> <span class=md-ellipsis> client </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> client </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1 checked> <label class=md-nav__link for=__nav_3_1_1 id=__nav_3_1_1_label tabindex=0> <span class=md-ellipsis> ayon_core </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_1_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1> <span class="md-nav__icon md-icon"></span> ayon_core </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../__main__.html class=md-nav__link> <span class=md-ellipsis> __main__ </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../addon/base.html class=md-nav__link> <span class=md-ellipsis> addon </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../cli.html class=md-nav__link> <span class=md-ellipsis> cli </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../hooks/pre_add_last_workfile_arg.html class=md-nav__link> <span class=md-ellipsis> hooks </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1_5 checked> <label class=md-nav__link for=__nav_3_1_1_5 id=__nav_3_1_1_5_label tabindex=0> <span class=md-ellipsis> host </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_1_1_5_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1_5> <span class="md-nav__icon md-icon"></span> host </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=abstract.html class=md-nav__link> <span class=md-ellipsis> abstract </span> </a> </li> <li class=md-nav__item> <a href=constants.html class=md-nav__link> <span class=md-ellipsis> constants </span> </a> </li> <li class=md-nav__item> <a href=dirmap.html class=md-nav__link> <span class=md-ellipsis> dirmap </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> host </span> <span class="md-nav__icon md-icon"></span> </label> <a href=host.html class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> host </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#client.ayon_core.host.host class=md-nav__link> <span class=md-ellipsis> host </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.host.HostBase class=md-nav__link> <span class=md-ellipsis> HostBase </span> </a> <nav class=md-nav aria-label=HostBase> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.host.host.HostBase--installation-of-host-before-avalon-concept class=md-nav__link> <span class=md-ellipsis> Installation of host before (avalon concept): </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.host.HostBase--installation-of-host-now class=md-nav__link> <span class=md-ellipsis> Installation of host now: </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.host.HostBase.__init__ class=md-nav__link> <span class=md-ellipsis> __init__ </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.host.HostBase.get_context_title class=md-nav__link> <span class=md-ellipsis> get_context_title </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.host.HostBase.get_current_context class=md-nav__link> <span class=md-ellipsis> get_current_context </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.host.HostBase.get_current_folder_path class=md-nav__link> <span class=md-ellipsis> get_current_folder_path </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.host.HostBase.get_current_project_name class=md-nav__link> <span class=md-ellipsis> get_current_project_name </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.host.HostBase.get_current_task_name class=md-nav__link> <span class=md-ellipsis> get_current_task_name </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.host.HostBase.install class=md-nav__link> <span class=md-ellipsis> install </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.host.HostBase.maintained_selection class=md-nav__link> <span class=md-ellipsis> maintained_selection </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.host.HostBase.set_current_context class=md-nav__link> <span class=md-ellipsis> set_current_context </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=interfaces/exceptions.html class=md-nav__link> <span class=md-ellipsis> interfaces </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=typing.html class=md-nav__link> <span class=md-ellipsis> typing </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../lib/attribute_definitions.html class=md-nav__link> <span class=md-ellipsis> lib </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../pipeline/actions.html class=md-nav__link> <span class=md-ellipsis> pipeline </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../plugins/actions/open_file_explorer.html class=md-nav__link> <span class=md-ellipsis> plugins </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../resources/index.html class=md-nav__link> <span class=md-ellipsis> resources </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../scripts/ocio_wrapper.html class=md-nav__link> <span class=md-ellipsis> scripts </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../settings/lib.html class=md-nav__link> <span class=md-ellipsis> settings </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../style/color_defs.html class=md-nav__link> <span class=md-ellipsis> style </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../tests/conftest.html class=md-nav__link> <span class=md-ellipsis> tests </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../tools/attribute_defs/_constants.html class=md-nav__link> <span class=md-ellipsis> tools </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../vendor/python/qargparse.html class=md-nav__link> <span class=md-ellipsis> vendor </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../version.html class=md-nav__link> <span class=md-ellipsis> version </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../server/settings/conversion.html class=md-nav__link> <span class=md-ellipsis> server </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#client.ayon_core.host.host class=md-nav__link> <span class=md-ellipsis> host </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.host.HostBase class=md-nav__link> <span class=md-ellipsis> HostBase </span> </a> <nav class=md-nav aria-label=HostBase> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_core.host.host.HostBase--installation-of-host-before-avalon-concept class=md-nav__link> <span class=md-ellipsis> Installation of host before (avalon concept): </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.host.HostBase--installation-of-host-now class=md-nav__link> <span class=md-ellipsis> Installation of host now: </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.host.HostBase.__init__ class=md-nav__link> <span class=md-ellipsis> __init__ </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.host.HostBase.get_context_title class=md-nav__link> <span class=md-ellipsis> get_context_title </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.host.HostBase.get_current_context class=md-nav__link> <span class=md-ellipsis> get_current_context </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.host.HostBase.get_current_folder_path class=md-nav__link> <span class=md-ellipsis> get_current_folder_path </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.host.HostBase.get_current_project_name class=md-nav__link> <span class=md-ellipsis> get_current_project_name </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.host.HostBase.get_current_task_name class=md-nav__link> <span class=md-ellipsis> get_current_task_name </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.host.HostBase.install class=md-nav__link> <span class=md-ellipsis> install </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.host.HostBase.maintained_selection class=md-nav__link> <span class=md-ellipsis> maintained_selection </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.host.host.HostBase.set_current_context class=md-nav__link> <span class=md-ellipsis> set_current_context </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>host</h1> <div class="doc doc-object doc-module"> <a id=client.ayon_core.host.host></a> <div class="doc doc-contents first"> <div class="doc doc-children"> <div class="doc doc-object doc-class"> <h2 id=client.ayon_core.host.host.HostBase class="doc doc-heading"> <code>HostBase</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="AbstractHost (client.ayon_core.host.abstract.AbstractHost)" href=abstract.html#client.ayon_core.host.abstract.AbstractHost>AbstractHost</a></code></p> <p>Base of host implementation class.</p> <p>Host is pipeline implementation of DCC application. This class should help to identify what must/should/can be implemented for specific functionality.</p> <p>Compared to 'avalon' concept: What was before considered as functions in host implementation folder. The host implementation should primarily care about adding ability of creation (mark products to be published) and optionally about referencing published representations as containers.</p> <p>Host may need extend some functionality like working with workfiles or loading. Not all host implementations may allow that for those purposes can be logic extended with implementing functions for the purpose. There are prepared interfaces to be able identify what must be implemented to be able use that functionality. - current statement is that it is not required to inherit from interfaces but all of the methods are validated (only their existence!)</p> <h3 id=client.ayon_core.host.host.HostBase--installation-of-host-before-avalon-concept>Installation of host before (avalon concept):</h3> <pre><code class=language-python>from ayon_core.pipeline import install_host
import ayon_core.hosts.maya.api as host

install_host(host)
</code></pre> <h3 id=client.ayon_core.host.host.HostBase--installation-of-host-now>Installation of host now:</h3> <pre><code class=language-python>from ayon_core.pipeline import install_host
from ayon_core.hosts.maya.api import MayaHost

host = MayaHost()
install_host(host)
</code></pre> <details class=todo open> <summary>Todo</summary> <ul> <li>move content of 'install_host' as method of this class<ul> <li>register host object</li> <li>install global plugin paths</li> </ul> </li> <li>store registered plugin paths to this object</li> <li>handle current context (project, asset, task)<ul> <li>this must be done in many separated steps</li> </ul> </li> <li>have it's object of host tools instead of using globals</li> </ul> </details> <p>This implementation will probably change over time when more functionality and responsibility will be added.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/host/host.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 32</span>
<span class=normal> 33</span>
<span class=normal> 34</span>
<span class=normal> 35</span>
<span class=normal> 36</span>
<span class=normal> 37</span>
<span class=normal> 38</span>
<span class=normal> 39</span>
<span class=normal> 40</span>
<span class=normal> 41</span>
<span class=normal> 42</span>
<span class=normal> 43</span>
<span class=normal> 44</span>
<span class=normal> 45</span>
<span class=normal> 46</span>
<span class=normal> 47</span>
<span class=normal> 48</span>
<span class=normal> 49</span>
<span class=normal> 50</span>
<span class=normal> 51</span>
<span class=normal> 52</span>
<span class=normal> 53</span>
<span class=normal> 54</span>
<span class=normal> 55</span>
<span class=normal> 56</span>
<span class=normal> 57</span>
<span class=normal> 58</span>
<span class=normal> 59</span>
<span class=normal> 60</span>
<span class=normal> 61</span>
<span class=normal> 62</span>
<span class=normal> 63</span>
<span class=normal> 64</span>
<span class=normal> 65</span>
<span class=normal> 66</span>
<span class=normal> 67</span>
<span class=normal> 68</span>
<span class=normal> 69</span>
<span class=normal> 70</span>
<span class=normal> 71</span>
<span class=normal> 72</span>
<span class=normal> 73</span>
<span class=normal> 74</span>
<span class=normal> 75</span>
<span class=normal> 76</span>
<span class=normal> 77</span>
<span class=normal> 78</span>
<span class=normal> 79</span>
<span class=normal> 80</span>
<span class=normal> 81</span>
<span class=normal> 82</span>
<span class=normal> 83</span>
<span class=normal> 84</span>
<span class=normal> 85</span>
<span class=normal> 86</span>
<span class=normal> 87</span>
<span class=normal> 88</span>
<span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span>
<span class=normal>277</span>
<span class=normal>278</span>
<span class=normal>279</span>
<span class=normal>280</span>
<span class=normal>281</span>
<span class=normal>282</span>
<span class=normal>283</span>
<span class=normal>284</span>
<span class=normal>285</span>
<span class=normal>286</span>
<span class=normal>287</span>
<span class=normal>288</span>
<span class=normal>289</span>
<span class=normal>290</span>
<span class=normal>291</span>
<span class=normal>292</span>
<span class=normal>293</span>
<span class=normal>294</span>
<span class=normal>295</span>
<span class=normal>296</span>
<span class=normal>297</span>
<span class=normal>298</span>
<span class=normal>299</span>
<span class=normal>300</span>
<span class=normal>301</span>
<span class=normal>302</span>
<span class=normal>303</span>
<span class=normal>304</span>
<span class=normal>305</span>
<span class=normal>306</span>
<span class=normal>307</span>
<span class=normal>308</span>
<span class=normal>309</span>
<span class=normal>310</span>
<span class=normal>311</span>
<span class=normal>312</span>
<span class=normal>313</span>
<span class=normal>314</span>
<span class=normal>315</span>
<span class=normal>316</span>
<span class=normal>317</span>
<span class=normal>318</span>
<span class=normal>319</span>
<span class=normal>320</span>
<span class=normal>321</span>
<span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span>
<span class=normal>325</span>
<span class=normal>326</span>
<span class=normal>327</span>
<span class=normal>328</span>
<span class=normal>329</span>
<span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span>
<span class=normal>334</span>
<span class=normal>335</span>
<span class=normal>336</span>
<span class=normal>337</span>
<span class=normal>338</span>
<span class=normal>339</span>
<span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span>
<span class=normal>344</span>
<span class=normal>345</span>
<span class=normal>346</span>
<span class=normal>347</span>
<span class=normal>348</span>
<span class=normal>349</span>
<span class=normal>350</span>
<span class=normal>351</span>
<span class=normal>352</span>
<span class=normal>353</span>
<span class=normal>354</span>
<span class=normal>355</span>
<span class=normal>356</span>
<span class=normal>357</span>
<span class=normal>358</span>
<span class=normal>359</span>
<span class=normal>360</span>
<span class=normal>361</span>
<span class=normal>362</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>HostBase</span><span class=p>(</span><span class=n>AbstractHost</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Base of host implementation class.</span>

<span class=sd>    Host is pipeline implementation of DCC application. This class should help</span>
<span class=sd>    to identify what must/should/can be implemented for specific functionality.</span>

<span class=sd>    Compared to &#39;avalon&#39; concept:</span>
<span class=sd>    What was before considered as functions in host implementation folder. The</span>
<span class=sd>    host implementation should primarily care about adding ability of creation</span>
<span class=sd>    (mark products to be published) and optionally about referencing published</span>
<span class=sd>    representations as containers.</span>

<span class=sd>    Host may need extend some functionality like working with workfiles</span>
<span class=sd>    or loading. Not all host implementations may allow that for those purposes</span>
<span class=sd>    can be logic extended with implementing functions for the purpose. There</span>
<span class=sd>    are prepared interfaces to be able identify what must be implemented to</span>
<span class=sd>    be able use that functionality.</span>
<span class=sd>    - current statement is that it is not required to inherit from interfaces</span>
<span class=sd>        but all of the methods are validated (only their existence!)</span>

<span class=sd>    # Installation of host before (avalon concept):</span>
<span class=sd>    ```python</span>
<span class=sd>    from ayon_core.pipeline import install_host</span>
<span class=sd>    import ayon_core.hosts.maya.api as host</span>

<span class=sd>    install_host(host)</span>
<span class=sd>    ```</span>

<span class=sd>    # Installation of host now:</span>
<span class=sd>    ```python</span>
<span class=sd>    from ayon_core.pipeline import install_host</span>
<span class=sd>    from ayon_core.hosts.maya.api import MayaHost</span>

<span class=sd>    host = MayaHost()</span>
<span class=sd>    install_host(host)</span>
<span class=sd>    ```</span>

<span class=sd>    Todo:</span>
<span class=sd>        - move content of &#39;install_host&#39; as method of this class</span>
<span class=sd>            - register host object</span>
<span class=sd>            - install global plugin paths</span>
<span class=sd>        - store registered plugin paths to this object</span>
<span class=sd>        - handle current context (project, asset, task)</span>
<span class=sd>            - this must be done in many separated steps</span>
<span class=sd>        - have it&#39;s object of host tools instead of using globals</span>

<span class=sd>    This implementation will probably change over time when more</span>
<span class=sd>        functionality and responsibility will be added.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>_log</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Initialization of host.</span>

<span class=sd>        Register DCC callbacks, host specific plugin paths, targets etc.</span>
<span class=sd>        (Part of what &#39;install&#39; did in &#39;avalon&#39; concept.)</span>

<span class=sd>        Note:</span>
<span class=sd>            At this moment global &quot;installation&quot; must happen before host</span>
<span class=sd>            installation. Because of this current limitation it is recommended</span>
<span class=sd>            to implement &#39;install&#39; method which is triggered after global</span>
<span class=sd>            &#39;install&#39;.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>pass</span>

    <span class=k>def</span><span class=w> </span><span class=nf>install</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Install host specific functionality.</span>

<span class=sd>        This is where should be added menu with tools, registered callbacks</span>
<span class=sd>        and other host integration initialization.</span>

<span class=sd>        It is called automatically when &#39;ayon_core.pipeline.install_host&#39; is</span>
<span class=sd>        triggered.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>pass</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>log</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>logging</span><span class=o>.</span><span class=n>Logger</span><span class=p>:</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_log</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_log</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>getLogger</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__name__</span><span class=p>)</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_log</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_current_project_name</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Returns:</span>
<span class=sd>            str: Current project name.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=p>[</span><span class=s2>&quot;AYON_PROJECT_NAME&quot;</span><span class=p>]</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_current_folder_path</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Returns:</span>
<span class=sd>            Optional[str]: Current asset name.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AYON_FOLDER_PATH&quot;</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_current_task_name</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Returns:</span>
<span class=sd>            Optional[str]: Current task name.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AYON_TASK_NAME&quot;</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_current_context</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>HostContextData</span><span class=p>:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get current context information.</span>

<span class=sd>        This method should be used to get current context of host. Usage of</span>
<span class=sd>        this method can be crucial for host implementations in DCCs where</span>
<span class=sd>        can be opened multiple workfiles at one moment and change of context</span>
<span class=sd>        can&#39;t be caught properly.</span>

<span class=sd>        Returns:</span>
<span class=sd>            HostContextData: Current context with &#39;project_name&#39;,</span>
<span class=sd>                &#39;folder_path&#39; and &#39;task_name&#39;.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=p>{</span>
            <span class=s2>&quot;project_name&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_project_name</span><span class=p>(),</span>
            <span class=s2>&quot;folder_path&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_folder_path</span><span class=p>(),</span>
            <span class=s2>&quot;task_name&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_task_name</span><span class=p>()</span>
        <span class=p>}</span>

    <span class=k>def</span><span class=w> </span><span class=nf>set_current_context</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>folder_entity</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>],</span>
        <span class=n>task_entity</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>],</span>
        <span class=o>*</span><span class=p>,</span>
        <span class=n>reason</span><span class=p>:</span> <span class=n>ContextChangeReason</span> <span class=o>=</span> <span class=n>ContextChangeReason</span><span class=o>.</span><span class=n>undefined</span><span class=p>,</span>
        <span class=n>project_entity</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
        <span class=n>anatomy</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Anatomy</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
    <span class=p>)</span> <span class=o>-&gt;</span> <span class=n>HostContextData</span><span class=p>:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Set current context information.</span>

<span class=sd>        This method should be used to set current context of host. Usage of</span>
<span class=sd>        this method can be crucial for host implementations in DCCs where</span>
<span class=sd>        can be opened multiple workfiles at one moment and change of context</span>
<span class=sd>        can&#39;t be caught properly.</span>

<span class=sd>        Notes:</span>
<span class=sd>            This method should not care about change of workdir and expect any</span>
<span class=sd>                of the arguments.</span>

<span class=sd>        Args:</span>
<span class=sd>            folder_entity (Optional[dict[str, Any]]): Folder entity.</span>
<span class=sd>            task_entity (Optional[dict[str, Any]]): Task entity.</span>
<span class=sd>            reason (ContextChangeReason): Reason for context change.</span>
<span class=sd>            project_entity (Optional[dict[str, Any]]): Project entity data.</span>
<span class=sd>            anatomy (Optional[Anatomy]): Anatomy instance for the project.</span>

<span class=sd>        Returns:</span>
<span class=sd>            dict[str, Optional[str]]: Context information with project name,</span>
<span class=sd>                folder path and task name.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=kn>from</span><span class=w> </span><span class=nn>ayon_core.pipeline</span><span class=w> </span><span class=kn>import</span> <span class=n>Anatomy</span>

        <span class=n>folder_path</span> <span class=o>=</span> <span class=n>folder_entity</span><span class=p>[</span><span class=s2>&quot;path&quot;</span><span class=p>]</span>
        <span class=n>task_name</span> <span class=o>=</span> <span class=n>task_entity</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span>

        <span class=n>context</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_context</span><span class=p>()</span>
        <span class=c1># Don&#39;t do anything if context did not change</span>
        <span class=k>if</span> <span class=p>(</span>
            <span class=n>context</span><span class=p>[</span><span class=s2>&quot;folder_path&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=n>folder_path</span>
            <span class=ow>and</span> <span class=n>context</span><span class=p>[</span><span class=s2>&quot;task_name&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=n>task_name</span>
        <span class=p>):</span>
            <span class=k>return</span> <span class=n>context</span>

        <span class=n>project_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_project_name</span><span class=p>()</span>
        <span class=k>if</span> <span class=n>project_entity</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>project_entity</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_project</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>anatomy</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>anatomy</span> <span class=o>=</span> <span class=n>Anatomy</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=n>project_entity</span><span class=o>=</span><span class=n>project_entity</span><span class=p>)</span>

        <span class=n>context_change_data</span> <span class=o>=</span> <span class=n>ContextChangeData</span><span class=p>(</span>
            <span class=n>project_entity</span><span class=p>,</span>
            <span class=n>folder_entity</span><span class=p>,</span>
            <span class=n>task_entity</span><span class=p>,</span>
            <span class=n>reason</span><span class=p>,</span>
            <span class=n>anatomy</span><span class=p>,</span>
        <span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_before_context_change</span><span class=p>(</span><span class=n>context_change_data</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_set_current_context</span><span class=p>(</span><span class=n>context_change_data</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_after_context_change</span><span class=p>(</span><span class=n>context_change_data</span><span class=p>)</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_emit_context_change_event</span><span class=p>(</span>
            <span class=n>project_name</span><span class=p>,</span>
            <span class=n>folder_path</span><span class=p>,</span>
            <span class=n>task_name</span><span class=p>,</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_context_title</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Context title shown for UI purposes.</span>

<span class=sd>        Should return current context title if possible.</span>

<span class=sd>        Note:</span>
<span class=sd>            This method is used only for UI purposes so it is possible to</span>
<span class=sd>                return some logical title for contextless cases.</span>
<span class=sd>            Is not meant for &quot;Context menu&quot; label.</span>

<span class=sd>        Returns:</span>
<span class=sd>            str: Context title.</span>
<span class=sd>            None: Default title is used based on UI implementation.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=c1># Use current context to fill the context title</span>
        <span class=n>current_context</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_context</span><span class=p>()</span>
        <span class=n>project_name</span> <span class=o>=</span> <span class=n>current_context</span><span class=p>[</span><span class=s2>&quot;project_name&quot;</span><span class=p>]</span>
        <span class=n>folder_path</span> <span class=o>=</span> <span class=n>current_context</span><span class=p>[</span><span class=s2>&quot;folder_path&quot;</span><span class=p>]</span>
        <span class=n>task_name</span> <span class=o>=</span> <span class=n>current_context</span><span class=p>[</span><span class=s2>&quot;task_name&quot;</span><span class=p>]</span>
        <span class=n>items</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>if</span> <span class=n>project_name</span><span class=p>:</span>
            <span class=n>items</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>folder_path</span><span class=p>:</span>
                <span class=n>items</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>folder_path</span><span class=o>.</span><span class=n>lstrip</span><span class=p>(</span><span class=s2>&quot;/&quot;</span><span class=p>))</span>
                <span class=k>if</span> <span class=n>task_name</span><span class=p>:</span>
                    <span class=n>items</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>task_name</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>items</span><span class=p>:</span>
            <span class=k>return</span> <span class=s2>&quot;/&quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>items</span><span class=p>)</span>
        <span class=k>return</span> <span class=kc>None</span>

    <span class=nd>@contextlib</span><span class=o>.</span><span class=n>contextmanager</span>
    <span class=k>def</span><span class=w> </span><span class=nf>maintained_selection</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Some functionlity will happen but selection should stay same.</span>

<span class=sd>        This is DCC specific. Some may not allow to implement this ability</span>
<span class=sd>        that is reason why default implementation is empty context manager.</span>

<span class=sd>        Yields:</span>
<span class=sd>            None: Yield when is ready to restore selected at the end.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>try</span><span class=p>:</span>
            <span class=k>yield</span>
        <span class=k>finally</span><span class=p>:</span>
            <span class=k>pass</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_emit_context_change_event</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>project_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
        <span class=n>folder_path</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>],</span>
        <span class=n>task_name</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>],</span>
    <span class=p>)</span> <span class=o>-&gt;</span> <span class=n>HostContextData</span><span class=p>:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Emit context change event.</span>

<span class=sd>        Args:</span>
<span class=sd>            project_name (str): Name of the project.</span>
<span class=sd>            folder_path (Optional[str]): Path of the folder.</span>
<span class=sd>            task_name (Optional[str]): Name of the task.</span>

<span class=sd>        Returns:</span>
<span class=sd>            HostContextData: Data send to context change event.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>data</span><span class=p>:</span> <span class=n>HostContextData</span> <span class=o>=</span> <span class=p>{</span>
            <span class=s2>&quot;project_name&quot;</span><span class=p>:</span> <span class=n>project_name</span><span class=p>,</span>
            <span class=s2>&quot;folder_path&quot;</span><span class=p>:</span> <span class=n>folder_path</span><span class=p>,</span>
            <span class=s2>&quot;task_name&quot;</span><span class=p>:</span> <span class=n>task_name</span><span class=p>,</span>
        <span class=p>}</span>
        <span class=n>emit_event</span><span class=p>(</span><span class=s2>&quot;taskChanged&quot;</span><span class=p>,</span> <span class=n>data</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>data</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_set_current_context</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span> <span class=n>context_change_data</span><span class=p>:</span> <span class=n>ContextChangeData</span>
    <span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Method that changes the context in host.</span>

<span class=sd>        Can be overriden for hosts that do need different handling of context</span>
<span class=sd>            than using environment variables.</span>

<span class=sd>        Args:</span>
<span class=sd>            context_change_data (ContextChangeData): Context change related</span>
<span class=sd>                data.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>project_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_project_name</span><span class=p>()</span>
        <span class=n>folder_path</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=n>task_name</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=k>if</span> <span class=n>context_change_data</span><span class=o>.</span><span class=n>folder_entity</span><span class=p>:</span>
            <span class=n>folder_path</span> <span class=o>=</span> <span class=n>context_change_data</span><span class=o>.</span><span class=n>folder_entity</span><span class=p>[</span><span class=s2>&quot;path&quot;</span><span class=p>]</span>
            <span class=k>if</span> <span class=n>context_change_data</span><span class=o>.</span><span class=n>task_entity</span><span class=p>:</span>
                <span class=n>task_name</span> <span class=o>=</span> <span class=n>context_change_data</span><span class=o>.</span><span class=n>task_entity</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span>

        <span class=n>envs</span> <span class=o>=</span> <span class=p>{</span>
            <span class=s2>&quot;AYON_PROJECT_NAME&quot;</span><span class=p>:</span> <span class=n>project_name</span><span class=p>,</span>
            <span class=s2>&quot;AYON_FOLDER_PATH&quot;</span><span class=p>:</span> <span class=n>folder_path</span><span class=p>,</span>
            <span class=s2>&quot;AYON_TASK_NAME&quot;</span><span class=p>:</span> <span class=n>task_name</span><span class=p>,</span>
        <span class=p>}</span>

        <span class=c1># Update the Session and environments. Pop from environments all</span>
        <span class=c1>#   keys with value set to None.</span>
        <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>envs</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
            <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
                <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_before_context_change</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>context_change_data</span><span class=p>:</span> <span class=n>ContextChangeData</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Before context is changed.</span>

<span class=sd>        This method is called before the context is changed in the host.</span>

<span class=sd>        Can be overridden to implement host specific logic.</span>

<span class=sd>        Args:</span>
<span class=sd>            context_change_data (ContextChangeData): Object with information</span>
<span class=sd>                about context change.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>pass</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_after_context_change</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>context_change_data</span><span class=p>:</span> <span class=n>ContextChangeData</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;After context is changed.</span>

<span class=sd>        This method is called after the context is changed in the host.</span>

<span class=sd>        Can be overridden to implement host specific logic.</span>

<span class=sd>        Args:</span>
<span class=sd>            context_change_data (ContextChangeData): Object with information</span>
<span class=sd>                about context change.</span>

<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.host.HostBase.__init__ class="doc doc-heading"> <code class="highlight language-python"><span class=fm>__init__</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Initialization of host.</p> <p>Register DCC callbacks, host specific plugin paths, targets etc. (Part of what 'install' did in 'avalon' concept.)</p> <details class=note open> <summary>Note</summary> <p>At this moment global "installation" must happen before host installation. Because of this current limitation it is recommended to implement 'install' method which is triggered after global 'install'.</p> </details> <details class=quote> <summary>Source code in <code>client/ayon_core/host/host.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>84</span>
<span class=normal>85</span>
<span class=normal>86</span>
<span class=normal>87</span>
<span class=normal>88</span>
<span class=normal>89</span>
<span class=normal>90</span>
<span class=normal>91</span>
<span class=normal>92</span>
<span class=normal>93</span>
<span class=normal>94</span>
<span class=normal>95</span>
<span class=normal>96</span>
<span class=normal>97</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Initialization of host.</span>

<span class=sd>    Register DCC callbacks, host specific plugin paths, targets etc.</span>
<span class=sd>    (Part of what &#39;install&#39; did in &#39;avalon&#39; concept.)</span>

<span class=sd>    Note:</span>
<span class=sd>        At this moment global &quot;installation&quot; must happen before host</span>
<span class=sd>        installation. Because of this current limitation it is recommended</span>
<span class=sd>        to implement &#39;install&#39; method which is triggered after global</span>
<span class=sd>        &#39;install&#39;.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.host.HostBase.get_context_title class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_context_title</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Context title shown for UI purposes.</p> <p>Should return current context title if possible.</p> <details class=note open> <summary>Note</summary> <p>This method is used only for UI purposes so it is possible to return some logical title for contextless cases. Is not meant for "Context menu" label.</p> </details> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>Context title.</p> </div> </td> </tr> <tr class=doc-section-item> <td><code>None</code></td> <td> </td> <td> <div class=doc-md-description> <p>Default title is used based on UI implementation.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/host/host.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_context_title</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Context title shown for UI purposes.</span>

<span class=sd>    Should return current context title if possible.</span>

<span class=sd>    Note:</span>
<span class=sd>        This method is used only for UI purposes so it is possible to</span>
<span class=sd>            return some logical title for contextless cases.</span>
<span class=sd>        Is not meant for &quot;Context menu&quot; label.</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: Context title.</span>
<span class=sd>        None: Default title is used based on UI implementation.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=c1># Use current context to fill the context title</span>
    <span class=n>current_context</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_context</span><span class=p>()</span>
    <span class=n>project_name</span> <span class=o>=</span> <span class=n>current_context</span><span class=p>[</span><span class=s2>&quot;project_name&quot;</span><span class=p>]</span>
    <span class=n>folder_path</span> <span class=o>=</span> <span class=n>current_context</span><span class=p>[</span><span class=s2>&quot;folder_path&quot;</span><span class=p>]</span>
    <span class=n>task_name</span> <span class=o>=</span> <span class=n>current_context</span><span class=p>[</span><span class=s2>&quot;task_name&quot;</span><span class=p>]</span>
    <span class=n>items</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>if</span> <span class=n>project_name</span><span class=p>:</span>
        <span class=n>items</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>folder_path</span><span class=p>:</span>
            <span class=n>items</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>folder_path</span><span class=o>.</span><span class=n>lstrip</span><span class=p>(</span><span class=s2>&quot;/&quot;</span><span class=p>))</span>
            <span class=k>if</span> <span class=n>task_name</span><span class=p>:</span>
                <span class=n>items</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>task_name</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>items</span><span class=p>:</span>
        <span class=k>return</span> <span class=s2>&quot;/&quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>items</span><span class=p>)</span>
    <span class=k>return</span> <span class=kc>None</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.host.HostBase.get_current_context class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_current_context</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Get current context information.</p> <p>This method should be used to get current context of host. Usage of this method can be crucial for host implementations in DCCs where can be opened multiple workfiles at one moment and change of context can't be caught properly.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>HostContextData</code></td> <td> <code><span title=client.ayon_core.host.typing.HostContextData>HostContextData</span></code> </td> <td> <div class=doc-md-description> <p>Current context with 'project_name', 'folder_path' and 'task_name'.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/host/host.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_current_context</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>HostContextData</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get current context information.</span>

<span class=sd>    This method should be used to get current context of host. Usage of</span>
<span class=sd>    this method can be crucial for host implementations in DCCs where</span>
<span class=sd>    can be opened multiple workfiles at one moment and change of context</span>
<span class=sd>    can&#39;t be caught properly.</span>

<span class=sd>    Returns:</span>
<span class=sd>        HostContextData: Current context with &#39;project_name&#39;,</span>
<span class=sd>            &#39;folder_path&#39; and &#39;task_name&#39;.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>return</span> <span class=p>{</span>
        <span class=s2>&quot;project_name&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_project_name</span><span class=p>(),</span>
        <span class=s2>&quot;folder_path&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_folder_path</span><span class=p>(),</span>
        <span class=s2>&quot;task_name&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_task_name</span><span class=p>()</span>
    <span class=p>}</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.host.HostBase.get_current_folder_path class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_current_folder_path</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=typing.Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Optional[str]: Current asset name.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/host/host.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_current_folder_path</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Returns:</span>
<span class=sd>        Optional[str]: Current asset name.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>return</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AYON_FOLDER_PATH&quot;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.host.HostBase.get_current_project_name class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_current_project_name</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> <code><span title=str>str</span></code> </td> <td> <div class=doc-md-description> <p>Current project name.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/host/host.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_current_project_name</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Returns:</span>
<span class=sd>        str: Current project name.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>return</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=p>[</span><span class=s2>&quot;AYON_PROJECT_NAME&quot;</span><span class=p>]</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.host.HostBase.get_current_task_name class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_current_task_name</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=typing.Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Optional[str]: Current task name.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/host/host.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_current_task_name</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Returns:</span>
<span class=sd>        Optional[str]: Current task name.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>return</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AYON_TASK_NAME&quot;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.host.HostBase.install class="doc doc-heading"> <code class="highlight language-python"><span class=n>install</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Install host specific functionality.</p> <p>This is where should be added menu with tools, registered callbacks and other host integration initialization.</p> <p>It is called automatically when 'ayon_core.pipeline.install_host' is triggered.</p> <details class=quote> <summary>Source code in <code>client/ayon_core/host/host.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>install</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Install host specific functionality.</span>

<span class=sd>    This is where should be added menu with tools, registered callbacks</span>
<span class=sd>    and other host integration initialization.</span>

<span class=sd>    It is called automatically when &#39;ayon_core.pipeline.install_host&#39; is</span>
<span class=sd>    triggered.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.host.HostBase.maintained_selection class="doc doc-heading"> <code class="highlight language-python"><span class=n>maintained_selection</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Some functionlity will happen but selection should stay same.</p> <p>This is DCC specific. Some may not allow to implement this ability that is reason why default implementation is empty context manager.</p> <p><span class=doc-section-title>Yields:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>None</code></td> <td> </td> <td> <div class=doc-md-description> <p>Yield when is ready to restore selected at the end.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/host/host.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@contextlib</span><span class=o>.</span><span class=n>contextmanager</span>
<span class=k>def</span><span class=w> </span><span class=nf>maintained_selection</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Some functionlity will happen but selection should stay same.</span>

<span class=sd>    This is DCC specific. Some may not allow to implement this ability</span>
<span class=sd>    that is reason why default implementation is empty context manager.</span>

<span class=sd>    Yields:</span>
<span class=sd>        None: Yield when is ready to restore selected at the end.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>try</span><span class=p>:</span>
        <span class=k>yield</span>
    <span class=k>finally</span><span class=p>:</span>
        <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_core.host.host.HostBase.set_current_context class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_current_context</span><span class=p>(</span><span class=n>folder_entity</span><span class=p>,</span> <span class=n>task_entity</span><span class=p>,</span> <span class=o>*</span><span class=p>,</span> <span class=n>reason</span><span class=o>=</span><span class=n>ContextChangeReason</span><span class=o>.</span><span class=n>undefined</span><span class=p>,</span> <span class=n>project_entity</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>anatomy</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Set current context information.</p> <p>This method should be used to set current context of host. Usage of this method can be crucial for host implementations in DCCs where can be opened multiple workfiles at one moment and change of context can't be caught properly.</p> <details class=notes open> <summary>Notes</summary> <p>This method should not care about change of workdir and expect any of the arguments.</p> </details> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>folder_entity</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=dict>dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]]</code> </td> <td> <div class=doc-md-description> <p>Folder entity.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>task_entity</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=dict>dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]]</code> </td> <td> <div class=doc-md-description> <p>Task entity.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>reason</code> </td> <td> <code><a class="autorefs autorefs-internal" title="ContextChangeReason (client.ayon_core.host.constants.ContextChangeReason)" href=constants.html#client.ayon_core.host.constants.ContextChangeReason>ContextChangeReason</a></code> </td> <td> <div class=doc-md-description> <p>Reason for context change.</p> </div> </td> <td> <code><span title=client.ayon_core.host.constants.ContextChangeReason.undefined>undefined</span></code> </td> </tr> <tr class=doc-section-item> <td> <code>project_entity</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=dict>dict</span>[<span title=str>str</span>, <span title=typing.Any>Any</span>]]</code> </td> <td> <div class=doc-md-description> <p>Project entity data.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>anatomy</code> </td> <td> <code><span title=typing.Optional>Optional</span>[<span title=ayon_core.pipeline.Anatomy>Anatomy</span>]</code> </td> <td> <div class=doc-md-description> <p>Anatomy instance for the project.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code><span title=client.ayon_core.host.typing.HostContextData>HostContextData</span></code> </td> <td> <div class=doc-md-description> <p>dict[str, Optional[str]]: Context information with project name, folder path and task name.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/host/host.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>set_current_context</span><span class=p>(</span>
    <span class=bp>self</span><span class=p>,</span>
    <span class=n>folder_entity</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>],</span>
    <span class=n>task_entity</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>],</span>
    <span class=o>*</span><span class=p>,</span>
    <span class=n>reason</span><span class=p>:</span> <span class=n>ContextChangeReason</span> <span class=o>=</span> <span class=n>ContextChangeReason</span><span class=o>.</span><span class=n>undefined</span><span class=p>,</span>
    <span class=n>project_entity</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
    <span class=n>anatomy</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Anatomy</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<span class=p>)</span> <span class=o>-&gt;</span> <span class=n>HostContextData</span><span class=p>:</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Set current context information.</span>

<span class=sd>    This method should be used to set current context of host. Usage of</span>
<span class=sd>    this method can be crucial for host implementations in DCCs where</span>
<span class=sd>    can be opened multiple workfiles at one moment and change of context</span>
<span class=sd>    can&#39;t be caught properly.</span>

<span class=sd>    Notes:</span>
<span class=sd>        This method should not care about change of workdir and expect any</span>
<span class=sd>            of the arguments.</span>

<span class=sd>    Args:</span>
<span class=sd>        folder_entity (Optional[dict[str, Any]]): Folder entity.</span>
<span class=sd>        task_entity (Optional[dict[str, Any]]): Task entity.</span>
<span class=sd>        reason (ContextChangeReason): Reason for context change.</span>
<span class=sd>        project_entity (Optional[dict[str, Any]]): Project entity data.</span>
<span class=sd>        anatomy (Optional[Anatomy]): Anatomy instance for the project.</span>

<span class=sd>    Returns:</span>
<span class=sd>        dict[str, Optional[str]]: Context information with project name,</span>
<span class=sd>            folder path and task name.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=kn>from</span><span class=w> </span><span class=nn>ayon_core.pipeline</span><span class=w> </span><span class=kn>import</span> <span class=n>Anatomy</span>

    <span class=n>folder_path</span> <span class=o>=</span> <span class=n>folder_entity</span><span class=p>[</span><span class=s2>&quot;path&quot;</span><span class=p>]</span>
    <span class=n>task_name</span> <span class=o>=</span> <span class=n>task_entity</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span>

    <span class=n>context</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_context</span><span class=p>()</span>
    <span class=c1># Don&#39;t do anything if context did not change</span>
    <span class=k>if</span> <span class=p>(</span>
        <span class=n>context</span><span class=p>[</span><span class=s2>&quot;folder_path&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=n>folder_path</span>
        <span class=ow>and</span> <span class=n>context</span><span class=p>[</span><span class=s2>&quot;task_name&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=n>task_name</span>
    <span class=p>):</span>
        <span class=k>return</span> <span class=n>context</span>

    <span class=n>project_name</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_current_project_name</span><span class=p>()</span>
    <span class=k>if</span> <span class=n>project_entity</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>project_entity</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_project</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>anatomy</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>anatomy</span> <span class=o>=</span> <span class=n>Anatomy</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=n>project_entity</span><span class=o>=</span><span class=n>project_entity</span><span class=p>)</span>

    <span class=n>context_change_data</span> <span class=o>=</span> <span class=n>ContextChangeData</span><span class=p>(</span>
        <span class=n>project_entity</span><span class=p>,</span>
        <span class=n>folder_entity</span><span class=p>,</span>
        <span class=n>task_entity</span><span class=p>,</span>
        <span class=n>reason</span><span class=p>,</span>
        <span class=n>anatomy</span><span class=p>,</span>
    <span class=p>)</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_before_context_change</span><span class=p>(</span><span class=n>context_change_data</span><span class=p>)</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_set_current_context</span><span class=p>(</span><span class=n>context_change_data</span><span class=p>)</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_after_context_change</span><span class=p>(</span><span class=n>context_change_data</span><span class=p>)</span>

    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_emit_context_change_event</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span>
        <span class=n>folder_path</span><span class=p>,</span>
        <span class=n>task_name</span><span class=p>,</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> </div> </div> </div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../..", "features": ["navigation.sections", "navigation.path", "navigation.prune"], "search": "../../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../../../assets/javascripts/bundle.f55a23d4.min.js></script> </body> </html>