<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=prev href=constants.html><link rel=next href=create/index.html><link rel=icon href=../../../../img/favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.9"><title>context_tools - ayon-core</title><link rel=stylesheet href=../../../../assets/stylesheets/main.4af4bdda.min.css><link rel=stylesheet href=../../../../assets/stylesheets/palette.06af60db.min.css><script src=https://unpkg.com/iframe-worker/shim></script><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../../assets/_mkdocstrings.css><link rel=stylesheet href=../../../../css/custom.css><script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#client.ayon_core.pipeline.context_tools class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../../index.html title=ayon-core class="md-header__button md-logo" aria-label=ayon-core data-md-component=logo> <img src=../../../../img/ay-symbol-blackw-full.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> ayon-core </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> context_tools </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/ynput/ayon-core title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../../index.html title=ayon-core class="md-nav__button md-logo" aria-label=ayon-core data-md-component=logo> <img src=../../../../img/ay-symbol-blackw-full.png alt=logo> </a> ayon-core </label> <div class=md-nav__source> <a href=https://github.com/ynput/ayon-core title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../index.html class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../../../../license.html class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1 checked> <label class=md-nav__link for=__nav_3_1 id=__nav_3_1_label tabindex=0> <span class=md-ellipsis> client </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> client </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1 checked> <div class="md-nav__link md-nav__container"> <a href=../index.html class="md-nav__link "> <span class=md-ellipsis> ayon_core </span> </a> <label class="md-nav__link " for=__nav_3_1_1 id=__nav_3_1_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_1_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1> <span class="md-nav__icon md-icon"></span> ayon_core </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../__main__.html class=md-nav__link> <span class=md-ellipsis> __main__ </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../addon/base.html class=md-nav__link> <span class=md-ellipsis> addon </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../cli.html class=md-nav__link> <span class=md-ellipsis> cli </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../hooks/pre_add_last_workfile_arg.html class=md-nav__link> <span class=md-ellipsis> hooks </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../host/dirmap.html class=md-nav__link> <span class=md-ellipsis> host </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../lib/attribute_definitions.html class=md-nav__link> <span class=md-ellipsis> lib </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1_7 checked> <div class="md-nav__link md-nav__container"> <a href=index.html class="md-nav__link "> <span class=md-ellipsis> pipeline </span> </a> <label class="md-nav__link " for=__nav_3_1_1_7 id=__nav_3_1_1_7_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_1_1_7_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1_7> <span class="md-nav__icon md-icon"></span> pipeline </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=actions.html class=md-nav__link> <span class=md-ellipsis> actions </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=anatomy/anatomy.html class=md-nav__link> <span class=md-ellipsis> anatomy </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=colorspace.html class=md-nav__link> <span class=md-ellipsis> colorspace </span> </a> </li> <li class=md-nav__item> <a href=constants.html class=md-nav__link> <span class=md-ellipsis> constants </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> context_tools </span> <span class="md-nav__icon md-icon"></span> </label> <a href=context_tools.html class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> context_tools </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.context_tools class=md-nav__link> <span class=md-ellipsis> context_tools </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.context_tools.change_current_context class=md-nav__link> <span class=md-ellipsis> change_current_context </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.context_tools.get_current_context_custom_workfile_template class=md-nav__link> <span class=md-ellipsis> get_current_context_custom_workfile_template </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.context_tools.get_current_context_template_data class=md-nav__link> <span class=md-ellipsis> get_current_context_template_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.context_tools.get_current_folder_entity class=md-nav__link> <span class=md-ellipsis> get_current_folder_entity </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.context_tools.get_current_host_name class=md-nav__link> <span class=md-ellipsis> get_current_host_name </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.context_tools.get_current_project_entity class=md-nav__link> <span class=md-ellipsis> get_current_project_entity </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.context_tools.get_current_task_entity class=md-nav__link> <span class=md-ellipsis> get_current_task_entity </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.context_tools.get_global_context class=md-nav__link> <span class=md-ellipsis> get_global_context </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.context_tools.get_process_id class=md-nav__link> <span class=md-ellipsis> get_process_id </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.context_tools.install_ayon_plugins class=md-nav__link> <span class=md-ellipsis> install_ayon_plugins </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.context_tools.install_host class=md-nav__link> <span class=md-ellipsis> install_host </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.context_tools.is_installed class=md-nav__link> <span class=md-ellipsis> is_installed </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.context_tools.is_representation_from_latest class=md-nav__link> <span class=md-ellipsis> is_representation_from_latest </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.context_tools.register_host class=md-nav__link> <span class=md-ellipsis> register_host </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.context_tools.register_root class=md-nav__link> <span class=md-ellipsis> register_root </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.context_tools.registered_host class=md-nav__link> <span class=md-ellipsis> registered_host </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.context_tools.registered_root class=md-nav__link> <span class=md-ellipsis> registered_root </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.context_tools.uninstall_host class=md-nav__link> <span class=md-ellipsis> uninstall_host </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.context_tools.version_up_current_workfile class=md-nav__link> <span class=md-ellipsis> version_up_current_workfile </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=create/changes.html class=md-nav__link> <span class=md-ellipsis> create </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=delivery.html class=md-nav__link> <span class=md-ellipsis> delivery </span> </a> </li> <li class=md-nav__item> <a href=editorial.html class=md-nav__link> <span class=md-ellipsis> editorial </span> </a> </li> <li class=md-nav__item> <a href=entity_uri.html class=md-nav__link> <span class=md-ellipsis> entity_uri </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=farm/patterning.html class=md-nav__link> <span class=md-ellipsis> farm </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=load/plugins.html class=md-nav__link> <span class=md-ellipsis> load </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=plugin_discover.html class=md-nav__link> <span class=md-ellipsis> plugin_discover </span> </a> </li> <li class=md-nav__item> <a href=project_folders.html class=md-nav__link> <span class=md-ellipsis> project_folders </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=publish/abstract_collect_render.html class=md-nav__link> <span class=md-ellipsis> publish </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=schema/index.html class=md-nav__link> <span class=md-ellipsis> schema </span> </a> </li> <li class=md-nav__item> <a href=staging_dir.html class=md-nav__link> <span class=md-ellipsis> staging_dir </span> </a> </li> <li class=md-nav__item> <a href=tempdir.html class=md-nav__link> <span class=md-ellipsis> tempdir </span> </a> </li> <li class=md-nav__item> <a href=template_data.html class=md-nav__link> <span class=md-ellipsis> template_data </span> </a> </li> <li class=md-nav__item> <a href=thumbnails.html class=md-nav__link> <span class=md-ellipsis> thumbnails </span> </a> </li> <li class=md-nav__item> <a href=usdlib.html class=md-nav__link> <span class=md-ellipsis> usdlib </span> </a> </li> <li class=md-nav__item> <a href=version_start.html class=md-nav__link> <span class=md-ellipsis> version_start </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=workfile/build_workfile.html class=md-nav__link> <span class=md-ellipsis> workfile </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../plugins/actions/open_file_explorer.html class=md-nav__link> <span class=md-ellipsis> plugins </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../resources/index.html class=md-nav__link> <span class=md-ellipsis> resources </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../scripts/ocio_wrapper.html class=md-nav__link> <span class=md-ellipsis> scripts </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../settings/lib.html class=md-nav__link> <span class=md-ellipsis> settings </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../style/color_defs.html class=md-nav__link> <span class=md-ellipsis> style </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../tests/conftest.html class=md-nav__link> <span class=md-ellipsis> tests </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../tools/attribute_defs/_constants.html class=md-nav__link> <span class=md-ellipsis> tools </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../vendor/python/qargparse.html class=md-nav__link> <span class=md-ellipsis> vendor </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../version.html class=md-nav__link> <span class=md-ellipsis> version </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../server/settings/conversion.html class=md-nav__link> <span class=md-ellipsis> server </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.context_tools class=md-nav__link> <span class=md-ellipsis> context_tools </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.context_tools.change_current_context class=md-nav__link> <span class=md-ellipsis> change_current_context </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.context_tools.get_current_context_custom_workfile_template class=md-nav__link> <span class=md-ellipsis> get_current_context_custom_workfile_template </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.context_tools.get_current_context_template_data class=md-nav__link> <span class=md-ellipsis> get_current_context_template_data </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.context_tools.get_current_folder_entity class=md-nav__link> <span class=md-ellipsis> get_current_folder_entity </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.context_tools.get_current_host_name class=md-nav__link> <span class=md-ellipsis> get_current_host_name </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.context_tools.get_current_project_entity class=md-nav__link> <span class=md-ellipsis> get_current_project_entity </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.context_tools.get_current_task_entity class=md-nav__link> <span class=md-ellipsis> get_current_task_entity </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.context_tools.get_global_context class=md-nav__link> <span class=md-ellipsis> get_global_context </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.context_tools.get_process_id class=md-nav__link> <span class=md-ellipsis> get_process_id </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.context_tools.install_ayon_plugins class=md-nav__link> <span class=md-ellipsis> install_ayon_plugins </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.context_tools.install_host class=md-nav__link> <span class=md-ellipsis> install_host </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.context_tools.is_installed class=md-nav__link> <span class=md-ellipsis> is_installed </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.context_tools.is_representation_from_latest class=md-nav__link> <span class=md-ellipsis> is_representation_from_latest </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.context_tools.register_host class=md-nav__link> <span class=md-ellipsis> register_host </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.context_tools.register_root class=md-nav__link> <span class=md-ellipsis> register_root </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.context_tools.registered_host class=md-nav__link> <span class=md-ellipsis> registered_host </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.context_tools.registered_root class=md-nav__link> <span class=md-ellipsis> registered_root </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.context_tools.uninstall_host class=md-nav__link> <span class=md-ellipsis> uninstall_host </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_core.pipeline.context_tools.version_up_current_workfile class=md-nav__link> <span class=md-ellipsis> version_up_current_workfile </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>context_tools</h1> <div class="doc doc-object doc-module"> <a id=client.ayon_core.pipeline.context_tools></a> <div class="doc doc-contents first"> <p>Core pipeline functionality</p> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.context_tools.change_current_context class="doc doc-heading"> <code class="highlight language-python"><span class=n>change_current_context</span><span class=p>(</span><span class=n>folder_entity</span><span class=p>,</span> <span class=n>task_entity</span><span class=p>,</span> <span class=n>template_key</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Update active Session to a new task work area.</p> <p>This updates the live Session to a different task under folder.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>folder_entity</code> </td> <td> <code><span title=Dict>Dict</span>[<span title=str>str</span>, <span title=Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Folder entity to set.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>task_entity</code> </td> <td> <code><span title=Dict>Dict</span>[<span title=str>str</span>, <span title=Any>Any</span>]</code> </td> <td> <div class=doc-md-description> <p>Task entity to set.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>template_key</code> </td> <td> <code><span title=Union>Union</span>[<span title=str>str</span>, None]</code> </td> <td> <div class=doc-md-description> <p>Prepared template key to be used for workfile template in Anatomy.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Dict[str, str]: The changed key, values in the current Session.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/context_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>507</span>
<span class=normal>508</span>
<span class=normal>509</span>
<span class=normal>510</span>
<span class=normal>511</span>
<span class=normal>512</span>
<span class=normal>513</span>
<span class=normal>514</span>
<span class=normal>515</span>
<span class=normal>516</span>
<span class=normal>517</span>
<span class=normal>518</span>
<span class=normal>519</span>
<span class=normal>520</span>
<span class=normal>521</span>
<span class=normal>522</span>
<span class=normal>523</span>
<span class=normal>524</span>
<span class=normal>525</span>
<span class=normal>526</span>
<span class=normal>527</span>
<span class=normal>528</span>
<span class=normal>529</span>
<span class=normal>530</span>
<span class=normal>531</span>
<span class=normal>532</span>
<span class=normal>533</span>
<span class=normal>534</span>
<span class=normal>535</span>
<span class=normal>536</span>
<span class=normal>537</span>
<span class=normal>538</span>
<span class=normal>539</span>
<span class=normal>540</span>
<span class=normal>541</span>
<span class=normal>542</span>
<span class=normal>543</span>
<span class=normal>544</span>
<span class=normal>545</span>
<span class=normal>546</span>
<span class=normal>547</span>
<span class=normal>548</span>
<span class=normal>549</span>
<span class=normal>550</span>
<span class=normal>551</span>
<span class=normal>552</span>
<span class=normal>553</span>
<span class=normal>554</span>
<span class=normal>555</span>
<span class=normal>556</span>
<span class=normal>557</span>
<span class=normal>558</span>
<span class=normal>559</span>
<span class=normal>560</span>
<span class=normal>561</span>
<span class=normal>562</span>
<span class=normal>563</span>
<span class=normal>564</span>
<span class=normal>565</span>
<span class=normal>566</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>change_current_context</span><span class=p>(</span><span class=n>folder_entity</span><span class=p>,</span> <span class=n>task_entity</span><span class=p>,</span> <span class=n>template_key</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Update active Session to a new task work area.</span>

<span class=sd>    This updates the live Session to a different task under folder.</span>

<span class=sd>    Args:</span>
<span class=sd>        folder_entity (Dict[str, Any]): Folder entity to set.</span>
<span class=sd>        task_entity (Dict[str, Any]): Task entity to set.</span>
<span class=sd>        template_key (Union[str, None]): Prepared template key to be used for</span>
<span class=sd>            workfile template in Anatomy.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Dict[str, str]: The changed key, values in the current Session.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>project_name</span> <span class=o>=</span> <span class=n>get_current_project_name</span><span class=p>()</span>
    <span class=n>workdir</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=n>folder_path</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=n>task_name</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=k>if</span> <span class=n>folder_entity</span><span class=p>:</span>
        <span class=n>folder_path</span> <span class=o>=</span> <span class=n>folder_entity</span><span class=p>[</span><span class=s2>&quot;path&quot;</span><span class=p>]</span>
        <span class=k>if</span> <span class=n>task_entity</span><span class=p>:</span>
            <span class=n>task_name</span> <span class=o>=</span> <span class=n>task_entity</span><span class=p>[</span><span class=s2>&quot;name&quot;</span><span class=p>]</span>
        <span class=n>project_entity</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_project</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>
        <span class=n>host_name</span> <span class=o>=</span> <span class=n>get_current_host_name</span><span class=p>()</span>
        <span class=n>workdir</span> <span class=o>=</span> <span class=n>get_workdir</span><span class=p>(</span>
            <span class=n>project_entity</span><span class=p>,</span>
            <span class=n>folder_entity</span><span class=p>,</span>
            <span class=n>task_entity</span><span class=p>,</span>
            <span class=n>host_name</span><span class=p>,</span>
            <span class=n>template_key</span><span class=o>=</span><span class=n>template_key</span>
        <span class=p>)</span>

    <span class=n>envs</span> <span class=o>=</span> <span class=p>{</span>
        <span class=s2>&quot;AYON_PROJECT_NAME&quot;</span><span class=p>:</span> <span class=n>project_name</span><span class=p>,</span>
        <span class=s2>&quot;AYON_FOLDER_PATH&quot;</span><span class=p>:</span> <span class=n>folder_path</span><span class=p>,</span>
        <span class=s2>&quot;AYON_TASK_NAME&quot;</span><span class=p>:</span> <span class=n>task_name</span><span class=p>,</span>
        <span class=s2>&quot;AYON_WORKDIR&quot;</span><span class=p>:</span> <span class=n>workdir</span><span class=p>,</span>
    <span class=p>}</span>

    <span class=c1># Update the Session and environments. Pop from environments all keys with</span>
    <span class=c1># value set to None.</span>
    <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>envs</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
        <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>

    <span class=n>data</span> <span class=o>=</span> <span class=n>envs</span><span class=o>.</span><span class=n>copy</span><span class=p>()</span>

    <span class=c1># Convert env keys to human readable keys</span>
    <span class=n>data</span><span class=p>[</span><span class=s2>&quot;project_name&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>project_name</span>
    <span class=n>data</span><span class=p>[</span><span class=s2>&quot;folder_path&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>folder_path</span>
    <span class=n>data</span><span class=p>[</span><span class=s2>&quot;task_name&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>task_name</span>
    <span class=n>data</span><span class=p>[</span><span class=s2>&quot;workdir_path&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>workdir</span>

    <span class=c1># Emit session change</span>
    <span class=n>emit_event</span><span class=p>(</span><span class=s2>&quot;taskChanged&quot;</span><span class=p>,</span> <span class=n>data</span><span class=p>)</span>

    <span class=k>return</span> <span class=n>data</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.context_tools.get_current_context_custom_workfile_template class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_current_context_custom_workfile_template</span><span class=p>(</span><span class=n>project_settings</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Filter and fill workfile template profiles by current context.</p> <p>This function can be used only inside host where current context is set.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>project_settings</code> </td> <td> <code><span title=Optional>Optional</span>[<span title=dict>dict</span>[<span title=str>str</span>, <span title=Any>Any</span>]]</code> </td> <td> <div class=doc-md-description> <p>Project settings</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>Path to template or None if none of profiles match current context. (Existence of formatted path is not validated.)</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/context_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>484</span>
<span class=normal>485</span>
<span class=normal>486</span>
<span class=normal>487</span>
<span class=normal>488</span>
<span class=normal>489</span>
<span class=normal>490</span>
<span class=normal>491</span>
<span class=normal>492</span>
<span class=normal>493</span>
<span class=normal>494</span>
<span class=normal>495</span>
<span class=normal>496</span>
<span class=normal>497</span>
<span class=normal>498</span>
<span class=normal>499</span>
<span class=normal>500</span>
<span class=normal>501</span>
<span class=normal>502</span>
<span class=normal>503</span>
<span class=normal>504</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_current_context_custom_workfile_template</span><span class=p>(</span><span class=n>project_settings</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Filter and fill workfile template profiles by current context.</span>

<span class=sd>    This function can be used only inside host where current context is set.</span>

<span class=sd>    Args:</span>
<span class=sd>        project_settings (Optional[dict[str, Any]]): Project settings</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: Path to template or None if none of profiles match current</span>
<span class=sd>            context. (Existence of formatted path is not validated.)</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>context</span> <span class=o>=</span> <span class=n>get_current_context</span><span class=p>()</span>
    <span class=k>return</span> <span class=n>get_custom_workfile_template_by_string_context</span><span class=p>(</span>
        <span class=n>context</span><span class=p>[</span><span class=s2>&quot;project_name&quot;</span><span class=p>],</span>
        <span class=n>context</span><span class=p>[</span><span class=s2>&quot;folder_path&quot;</span><span class=p>],</span>
        <span class=n>context</span><span class=p>[</span><span class=s2>&quot;task_name&quot;</span><span class=p>],</span>
        <span class=n>get_current_host_name</span><span class=p>(),</span>
        <span class=n>project_settings</span><span class=o>=</span><span class=n>project_settings</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.context_tools.get_current_context_template_data class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_current_context_template_data</span><span class=p>(</span><span class=n>settings</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Prepare template data for current context.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>settings</code> </td> <td> <code><span title=Optional>Optional</span>[<span title=Dict>Dict</span>[<span title=str>str</span>, <span title=Any>Any</span>]]</code> </td> <td> <div class=doc-md-description> <p>Prepared studio or project settings.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Dict[str, Any] Template data for current context.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/context_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>462</span>
<span class=normal>463</span>
<span class=normal>464</span>
<span class=normal>465</span>
<span class=normal>466</span>
<span class=normal>467</span>
<span class=normal>468</span>
<span class=normal>469</span>
<span class=normal>470</span>
<span class=normal>471</span>
<span class=normal>472</span>
<span class=normal>473</span>
<span class=normal>474</span>
<span class=normal>475</span>
<span class=normal>476</span>
<span class=normal>477</span>
<span class=normal>478</span>
<span class=normal>479</span>
<span class=normal>480</span>
<span class=normal>481</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_current_context_template_data</span><span class=p>(</span><span class=n>settings</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Prepare template data for current context.</span>

<span class=sd>    Args:</span>
<span class=sd>        settings (Optional[Dict[str, Any]]): Prepared studio or</span>
<span class=sd>            project settings.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Dict[str, Any] Template data for current context.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>context</span> <span class=o>=</span> <span class=n>get_current_context</span><span class=p>()</span>
    <span class=n>project_name</span> <span class=o>=</span> <span class=n>context</span><span class=p>[</span><span class=s2>&quot;project_name&quot;</span><span class=p>]</span>
    <span class=n>folder_path</span> <span class=o>=</span> <span class=n>context</span><span class=p>[</span><span class=s2>&quot;folder_path&quot;</span><span class=p>]</span>
    <span class=n>task_name</span> <span class=o>=</span> <span class=n>context</span><span class=p>[</span><span class=s2>&quot;task_name&quot;</span><span class=p>]</span>
    <span class=n>host_name</span> <span class=o>=</span> <span class=n>get_current_host_name</span><span class=p>()</span>

    <span class=k>return</span> <span class=n>get_template_data_with_names</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span> <span class=n>folder_path</span><span class=p>,</span> <span class=n>task_name</span><span class=p>,</span> <span class=n>host_name</span><span class=p>,</span> <span class=n>settings</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.context_tools.get_current_folder_entity class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_current_folder_entity</span><span class=p>(</span><span class=n>fields</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Helper function to get folder entity based on current context.</p> <p>This function should be called only in process where host is installed.</p> <p>Folder is based on current context project name and folder path.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>fields</code> </td> <td> <code><span title=Optional>Optional</span>[<span title=Iterable>Iterable</span>[<span title=str>str</span>]]</code> </td> <td> <div class=doc-md-description> <p>Limit returned data of folder entity to specific keys.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Union[dict[str, Any], None]: Folder entity or None.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/context_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>385</span>
<span class=normal>386</span>
<span class=normal>387</span>
<span class=normal>388</span>
<span class=normal>389</span>
<span class=normal>390</span>
<span class=normal>391</span>
<span class=normal>392</span>
<span class=normal>393</span>
<span class=normal>394</span>
<span class=normal>395</span>
<span class=normal>396</span>
<span class=normal>397</span>
<span class=normal>398</span>
<span class=normal>399</span>
<span class=normal>400</span>
<span class=normal>401</span>
<span class=normal>402</span>
<span class=normal>403</span>
<span class=normal>404</span>
<span class=normal>405</span>
<span class=normal>406</span>
<span class=normal>407</span>
<span class=normal>408</span>
<span class=normal>409</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_current_folder_entity</span><span class=p>(</span><span class=n>fields</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Helper function to get folder entity based on current context.</span>

<span class=sd>    This function should be called only in process where host is installed.</span>

<span class=sd>    Folder is based on current context project name and folder path.</span>

<span class=sd>    Args:</span>
<span class=sd>        fields (Optional[Iterable[str]]): Limit returned data of folder entity</span>
<span class=sd>            to specific keys.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Union[dict[str, Any], None]: Folder entity or None.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>context</span> <span class=o>=</span> <span class=n>get_current_context</span><span class=p>()</span>
    <span class=n>project_name</span> <span class=o>=</span> <span class=n>context</span><span class=p>[</span><span class=s2>&quot;project_name&quot;</span><span class=p>]</span>
    <span class=n>folder_path</span> <span class=o>=</span> <span class=n>context</span><span class=p>[</span><span class=s2>&quot;folder_path&quot;</span><span class=p>]</span>

    <span class=c1># Skip if is not set even on context</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>project_name</span> <span class=ow>or</span> <span class=ow>not</span> <span class=n>folder_path</span><span class=p>:</span>
        <span class=k>return</span> <span class=kc>None</span>
    <span class=k>return</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_folder_by_path</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span> <span class=n>folder_path</span><span class=p>,</span> <span class=n>fields</span><span class=o>=</span><span class=n>fields</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.context_tools.get_current_host_name class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_current_host_name</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>Current host name.</p> <p>Function is based on currently registered host integration or environment variable 'AYON_HOST_NAME'.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Union[str, None]: Name of host integration in current process or None.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/context_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>295</span>
<span class=normal>296</span>
<span class=normal>297</span>
<span class=normal>298</span>
<span class=normal>299</span>
<span class=normal>300</span>
<span class=normal>301</span>
<span class=normal>302</span>
<span class=normal>303</span>
<span class=normal>304</span>
<span class=normal>305</span>
<span class=normal>306</span>
<span class=normal>307</span>
<span class=normal>308</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_current_host_name</span><span class=p>():</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Current host name.</span>

<span class=sd>    Function is based on currently registered host integration or environment</span>
<span class=sd>    variable &#39;AYON_HOST_NAME&#39;.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Union[str, None]: Name of host integration in current process or None.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>host</span> <span class=o>=</span> <span class=n>registered_host</span><span class=p>()</span>
    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>host</span><span class=p>,</span> <span class=n>HostBase</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>host</span><span class=o>.</span><span class=n>name</span>
    <span class=k>return</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AYON_HOST_NAME&quot;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.context_tools.get_current_project_entity class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_current_project_entity</span><span class=p>(</span><span class=n>fields</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Helper function to get project document based on global Session.</p> <p>This function should be called only in process where host is installed.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>fields</code> </td> <td> <code><span title=Optional>Optional</span>[<span title=Iterable>Iterable</span>[<span title=str>str</span>]]</code> </td> <td> <div class=doc-md-description> <p>Limit returned data of project entity.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Union[dict[str, Any], None]: Project entity of current project or None.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/context_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>368</span>
<span class=normal>369</span>
<span class=normal>370</span>
<span class=normal>371</span>
<span class=normal>372</span>
<span class=normal>373</span>
<span class=normal>374</span>
<span class=normal>375</span>
<span class=normal>376</span>
<span class=normal>377</span>
<span class=normal>378</span>
<span class=normal>379</span>
<span class=normal>380</span>
<span class=normal>381</span>
<span class=normal>382</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_current_project_entity</span><span class=p>(</span><span class=n>fields</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Helper function to get project document based on global Session.</span>

<span class=sd>    This function should be called only in process where host is installed.</span>

<span class=sd>    Args:</span>
<span class=sd>        fields (Optional[Iterable[str]]): Limit returned data of project</span>
<span class=sd>            entity.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Union[dict[str, Any], None]: Project entity of current project or None.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>project_name</span> <span class=o>=</span> <span class=n>get_current_project_name</span><span class=p>()</span>
    <span class=k>return</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_project</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=n>fields</span><span class=o>=</span><span class=n>fields</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.context_tools.get_current_task_entity class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_current_task_entity</span><span class=p>(</span><span class=n>fields</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Helper function to get task entity based on current context.</p> <p>This function should be called only in process where host is installed.</p> <p>Task is based on current context project name, folder path and task name.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>fields</code> </td> <td> <code><span title=Optional>Optional</span>[<span title=Iterable>Iterable</span>[<span title=str>str</span>]]</code> </td> <td> <div class=doc-md-description> <p>Limit returned data of task entity to specific keys.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>Union[dict[str, Any], None]: Task entity or None.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/context_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>412</span>
<span class=normal>413</span>
<span class=normal>414</span>
<span class=normal>415</span>
<span class=normal>416</span>
<span class=normal>417</span>
<span class=normal>418</span>
<span class=normal>419</span>
<span class=normal>420</span>
<span class=normal>421</span>
<span class=normal>422</span>
<span class=normal>423</span>
<span class=normal>424</span>
<span class=normal>425</span>
<span class=normal>426</span>
<span class=normal>427</span>
<span class=normal>428</span>
<span class=normal>429</span>
<span class=normal>430</span>
<span class=normal>431</span>
<span class=normal>432</span>
<span class=normal>433</span>
<span class=normal>434</span>
<span class=normal>435</span>
<span class=normal>436</span>
<span class=normal>437</span>
<span class=normal>438</span>
<span class=normal>439</span>
<span class=normal>440</span>
<span class=normal>441</span>
<span class=normal>442</span>
<span class=normal>443</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_current_task_entity</span><span class=p>(</span><span class=n>fields</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Helper function to get task entity based on current context.</span>

<span class=sd>    This function should be called only in process where host is installed.</span>

<span class=sd>    Task is based on current context project name, folder path</span>
<span class=sd>        and task name.</span>

<span class=sd>    Args:</span>
<span class=sd>        fields (Optional[Iterable[str]]): Limit returned data of task entity</span>
<span class=sd>            to specific keys.</span>

<span class=sd>    Returns:</span>
<span class=sd>        Union[dict[str, Any], None]: Task entity or None.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>context</span> <span class=o>=</span> <span class=n>get_current_context</span><span class=p>()</span>
    <span class=n>project_name</span> <span class=o>=</span> <span class=n>context</span><span class=p>[</span><span class=s2>&quot;project_name&quot;</span><span class=p>]</span>
    <span class=n>folder_path</span> <span class=o>=</span> <span class=n>context</span><span class=p>[</span><span class=s2>&quot;folder_path&quot;</span><span class=p>]</span>
    <span class=n>task_name</span> <span class=o>=</span> <span class=n>context</span><span class=p>[</span><span class=s2>&quot;task_name&quot;</span><span class=p>]</span>

    <span class=c1># Skip if is not set even on context</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>project_name</span> <span class=ow>or</span> <span class=ow>not</span> <span class=n>folder_path</span> <span class=ow>or</span> <span class=ow>not</span> <span class=n>task_name</span><span class=p>:</span>
        <span class=k>return</span> <span class=kc>None</span>
    <span class=n>folder_entity</span> <span class=o>=</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_folder_by_path</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span> <span class=n>folder_path</span><span class=p>,</span> <span class=n>fields</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;id&quot;</span><span class=p>}</span>
    <span class=p>)</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>folder_entity</span><span class=p>:</span>
        <span class=k>return</span> <span class=kc>None</span>
    <span class=k>return</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>get_task_by_name</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span> <span class=n>folder_entity</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>],</span> <span class=n>task_name</span><span class=p>,</span> <span class=n>fields</span><span class=o>=</span><span class=n>fields</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.context_tools.get_global_context class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_global_context</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>Global context defined in environment variables.</p> <p>Values here may not reflect current context of host integration. The function can be used on startup before a host is registered.</p> <p>Use 'get_current_context' to make sure you'll get current host integration context info.</p> <p>Example::</p> <pre><code>{
    "project_name": "Commercial",
    "folder_path": "Bunny",
    "task_name": "Animation",
}
</code></pre> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>dict[str, Union[str, None]]: Context defined with environment variables.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/context_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>311</span>
<span class=normal>312</span>
<span class=normal>313</span>
<span class=normal>314</span>
<span class=normal>315</span>
<span class=normal>316</span>
<span class=normal>317</span>
<span class=normal>318</span>
<span class=normal>319</span>
<span class=normal>320</span>
<span class=normal>321</span>
<span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span>
<span class=normal>325</span>
<span class=normal>326</span>
<span class=normal>327</span>
<span class=normal>328</span>
<span class=normal>329</span>
<span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span>
<span class=normal>334</span>
<span class=normal>335</span>
<span class=normal>336</span>
<span class=normal>337</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_global_context</span><span class=p>():</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Global context defined in environment variables.</span>

<span class=sd>    Values here may not reflect current context of host integration. The</span>
<span class=sd>    function can be used on startup before a host is registered.</span>

<span class=sd>    Use &#39;get_current_context&#39; to make sure you&#39;ll get current host integration</span>
<span class=sd>    context info.</span>

<span class=sd>    Example::</span>

<span class=sd>        {</span>
<span class=sd>            &quot;project_name&quot;: &quot;Commercial&quot;,</span>
<span class=sd>            &quot;folder_path&quot;: &quot;Bunny&quot;,</span>
<span class=sd>            &quot;task_name&quot;: &quot;Animation&quot;,</span>
<span class=sd>        }</span>

<span class=sd>    Returns:</span>
<span class=sd>        dict[str, Union[str, None]]: Context defined with environment</span>
<span class=sd>            variables.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=p>{</span>
        <span class=s2>&quot;project_name&quot;</span><span class=p>:</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AYON_PROJECT_NAME&quot;</span><span class=p>),</span>
        <span class=s2>&quot;folder_path&quot;</span><span class=p>:</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AYON_FOLDER_PATH&quot;</span><span class=p>),</span>
        <span class=s2>&quot;task_name&quot;</span><span class=p>:</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AYON_TASK_NAME&quot;</span><span class=p>),</span>
    <span class=p>}</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.context_tools.get_process_id class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_process_id</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>Fake process id created on demand using uuid.</p> <p>Can be used to create process specific folders in temp directory.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>str</code></td> <td> </td> <td> <div class=doc-md-description> <p>Process id.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/context_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>569</span>
<span class=normal>570</span>
<span class=normal>571</span>
<span class=normal>572</span>
<span class=normal>573</span>
<span class=normal>574</span>
<span class=normal>575</span>
<span class=normal>576</span>
<span class=normal>577</span>
<span class=normal>578</span>
<span class=normal>579</span>
<span class=normal>580</span>
<span class=normal>581</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_process_id</span><span class=p>():</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Fake process id created on demand using uuid.</span>

<span class=sd>    Can be used to create process specific folders in temp directory.</span>

<span class=sd>    Returns:</span>
<span class=sd>        str: Process id.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>global</span> <span class=n>_process_id</span>
    <span class=k>if</span> <span class=n>_process_id</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>_process_id</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>())</span>
    <span class=k>return</span> <span class=n>_process_id</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.context_tools.install_ayon_plugins class="doc doc-heading"> <code class="highlight language-python"><span class=n>install_ayon_plugins</span><span class=p>(</span><span class=n>project_name</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>host_name</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Install AYON core plugins and make sure the core is initialized.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>project_name</code> </td> <td> <code><span title=Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Name of project to install plugins for.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>host_name</code> </td> <td> <code><span title=Optional>Optional</span>[<span title=str>str</span>]</code> </td> <td> <div class=doc-md-description> <p>Name of host to install plugins for.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/context_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>install_ayon_plugins</span><span class=p>(</span><span class=n>project_name</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>host_name</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Install AYON core plugins and make sure the core is initialized.</span>

<span class=sd>    Args:</span>
<span class=sd>        project_name (Optional[str]): Name of project to install plugins for.</span>
<span class=sd>        host_name (Optional[str]): Name of host to install plugins for.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=c1># Make sure global AYON connection has set site id and version</span>
    <span class=c1># - this is necessary if &#39;install_host&#39; is not called</span>
    <span class=n>initialize_ayon_connection</span><span class=p>()</span>
    <span class=c1># Make sure addons are loaded</span>
    <span class=n>load_addons</span><span class=p>()</span>

    <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Registering global plug-ins..&quot;</span><span class=p>)</span>
    <span class=n>pyblish</span><span class=o>.</span><span class=n>api</span><span class=o>.</span><span class=n>register_plugin_path</span><span class=p>(</span><span class=n>PUBLISH_PATH</span><span class=p>)</span>
    <span class=n>pyblish</span><span class=o>.</span><span class=n>api</span><span class=o>.</span><span class=n>register_discovery_filter</span><span class=p>(</span><span class=n>filter_pyblish_plugins</span><span class=p>)</span>
    <span class=n>register_loader_plugin_path</span><span class=p>(</span><span class=n>LOAD_PATH</span><span class=p>)</span>
    <span class=n>register_inventory_action_path</span><span class=p>(</span><span class=n>INVENTORY_PATH</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>host_name</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>host_name</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AYON_HOST_NAME&quot;</span><span class=p>)</span>

    <span class=n>addons_manager</span> <span class=o>=</span> <span class=n>_get_addons_manager</span><span class=p>()</span>
    <span class=n>publish_plugin_dirs</span> <span class=o>=</span> <span class=n>addons_manager</span><span class=o>.</span><span class=n>collect_publish_plugin_paths</span><span class=p>(</span>
        <span class=n>host_name</span><span class=p>)</span>
    <span class=k>for</span> <span class=n>path</span> <span class=ow>in</span> <span class=n>publish_plugin_dirs</span><span class=p>:</span>
        <span class=n>pyblish</span><span class=o>.</span><span class=n>api</span><span class=o>.</span><span class=n>register_plugin_path</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>

    <span class=n>create_plugin_paths</span> <span class=o>=</span> <span class=n>addons_manager</span><span class=o>.</span><span class=n>collect_create_plugin_paths</span><span class=p>(</span>
        <span class=n>host_name</span><span class=p>)</span>
    <span class=k>for</span> <span class=n>path</span> <span class=ow>in</span> <span class=n>create_plugin_paths</span><span class=p>:</span>
        <span class=n>register_creator_plugin_path</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>

    <span class=n>load_plugin_paths</span> <span class=o>=</span> <span class=n>addons_manager</span><span class=o>.</span><span class=n>collect_load_plugin_paths</span><span class=p>(</span>
        <span class=n>host_name</span><span class=p>)</span>
    <span class=k>for</span> <span class=n>path</span> <span class=ow>in</span> <span class=n>load_plugin_paths</span><span class=p>:</span>
        <span class=n>register_loader_plugin_path</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>

    <span class=n>inventory_action_paths</span> <span class=o>=</span> <span class=n>addons_manager</span><span class=o>.</span><span class=n>collect_inventory_action_paths</span><span class=p>(</span>
        <span class=n>host_name</span><span class=p>)</span>
    <span class=k>for</span> <span class=n>path</span> <span class=ow>in</span> <span class=n>inventory_action_paths</span><span class=p>:</span>
        <span class=n>register_inventory_action_path</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>project_name</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>project_name</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AYON_PROJECT_NAME&quot;</span><span class=p>)</span>

    <span class=c1># Register studio specific plugins</span>
    <span class=k>if</span> <span class=n>project_name</span><span class=p>:</span>
        <span class=n>anatomy</span> <span class=o>=</span> <span class=n>Anatomy</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>
        <span class=n>anatomy</span><span class=o>.</span><span class=n>set_root_environments</span><span class=p>()</span>
        <span class=n>register_root</span><span class=p>(</span><span class=n>anatomy</span><span class=o>.</span><span class=n>roots</span><span class=p>)</span>

        <span class=n>project_settings</span> <span class=o>=</span> <span class=n>get_project_settings</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>
        <span class=n>platform_name</span> <span class=o>=</span> <span class=n>platform</span><span class=o>.</span><span class=n>system</span><span class=p>()</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span>
        <span class=n>project_plugins</span> <span class=o>=</span> <span class=p>(</span>
            <span class=n>project_settings</span>
            <span class=p>[</span><span class=s2>&quot;core&quot;</span><span class=p>]</span>
            <span class=p>[</span><span class=s2>&quot;project_plugins&quot;</span><span class=p>]</span>
            <span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>platform_name</span><span class=p>)</span>
        <span class=p>)</span> <span class=ow>or</span> <span class=p>[]</span>
        <span class=k>for</span> <span class=n>path</span> <span class=ow>in</span> <span class=n>project_plugins</span><span class=p>:</span>
            <span class=k>try</span><span class=p>:</span>
                <span class=n>path</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>path</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=o>**</span><span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=p>))</span>
            <span class=k>except</span> <span class=ne>KeyError</span><span class=p>:</span>
                <span class=k>pass</span>

            <span class=k>if</span> <span class=ow>not</span> <span class=n>path</span> <span class=ow>or</span> <span class=ow>not</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>path</span><span class=p>):</span>
                <span class=k>continue</span>

            <span class=n>pyblish</span><span class=o>.</span><span class=n>api</span><span class=o>.</span><span class=n>register_plugin_path</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>
            <span class=n>register_loader_plugin_path</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>
            <span class=n>register_creator_plugin_path</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>
            <span class=n>register_inventory_action_path</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.context_tools.install_host class="doc doc-heading"> <code class="highlight language-python"><span class=n>install_host</span><span class=p>(</span><span class=n>host</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Install <code>host</code> into the running Python session.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>host</code> </td> <td> <code><span title=ayon_core.host.HostBase>HostBase</span></code> </td> <td> <div class=doc-md-description> <p>A host interface object.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/context_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>install_host</span><span class=p>(</span><span class=n>host</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Install `host` into the running Python session.</span>

<span class=sd>    Args:</span>
<span class=sd>        host (HostBase): A host interface object.</span>

<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>global</span> <span class=n>_is_installed</span>

    <span class=n>_is_installed</span> <span class=o>=</span> <span class=kc>True</span>

    <span class=c1># Make sure global AYON connection has set site id and version</span>
    <span class=n>initialize_ayon_connection</span><span class=p>()</span>

    <span class=n>addons_manager</span> <span class=o>=</span> <span class=n>_get_addons_manager</span><span class=p>()</span>

    <span class=n>project_name</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>getenv</span><span class=p>(</span><span class=s2>&quot;AYON_PROJECT_NAME&quot;</span><span class=p>)</span>
    <span class=c1># WARNING: This might be an issue</span>
    <span class=c1>#   - commented out because &#39;traypublisher&#39; does not have set project</span>
    <span class=c1># if not project_name:</span>
    <span class=c1>#     raise ValueError(</span>
    <span class=c1>#         &quot;AYON_PROJECT_NAME is missing in environment variables.&quot;</span>
    <span class=c1>#     )</span>

    <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Activating </span><span class=si>{}</span><span class=s2>..&quot;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>project_name</span><span class=p>))</span>

    <span class=c1># Optional host install function</span>
    <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>host</span><span class=p>,</span> <span class=s2>&quot;install&quot;</span><span class=p>):</span>
        <span class=n>host</span><span class=o>.</span><span class=n>install</span><span class=p>()</span>

    <span class=n>register_host</span><span class=p>(</span><span class=n>host</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>modified_emit</span><span class=p>(</span><span class=n>obj</span><span class=p>,</span> <span class=n>record</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Method replacing `emit` in Pyblish&#39;s MessageHandler.&quot;&quot;&quot;</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=n>record</span><span class=o>.</span><span class=n>msg</span> <span class=o>=</span> <span class=n>record</span><span class=o>.</span><span class=n>getMessage</span><span class=p>()</span>
        <span class=k>except</span> <span class=ne>Exception</span><span class=p>:</span>
            <span class=n>record</span><span class=o>.</span><span class=n>msg</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>record</span><span class=o>.</span><span class=n>msg</span><span class=p>)</span>
        <span class=n>obj</span><span class=o>.</span><span class=n>records</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>record</span><span class=p>)</span>

    <span class=n>MessageHandler</span><span class=o>.</span><span class=n>emit</span> <span class=o>=</span> <span class=n>modified_emit</span>

    <span class=k>if</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AYON_REMOTE_PUBLISH&quot;</span><span class=p>):</span>
        <span class=c1># target &quot;farm&quot; == rendering on farm, expects AYON_PUBLISH_DATA</span>
        <span class=c1># target &quot;remote&quot; == remote execution, installs host</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Registering pyblish target: remote&quot;</span><span class=p>)</span>
        <span class=n>pyblish</span><span class=o>.</span><span class=n>api</span><span class=o>.</span><span class=n>register_target</span><span class=p>(</span><span class=s2>&quot;remote&quot;</span><span class=p>)</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=n>pyblish</span><span class=o>.</span><span class=n>api</span><span class=o>.</span><span class=n>register_target</span><span class=p>(</span><span class=s2>&quot;local&quot;</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>is_in_tests</span><span class=p>():</span>
        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Registering pyblish target: automated&quot;</span><span class=p>)</span>
        <span class=n>pyblish</span><span class=o>.</span><span class=n>api</span><span class=o>.</span><span class=n>register_target</span><span class=p>(</span><span class=s2>&quot;automated&quot;</span><span class=p>)</span>

    <span class=n>host_name</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;AYON_HOST_NAME&quot;</span><span class=p>)</span>

    <span class=c1># Give option to handle host installation</span>
    <span class=k>for</span> <span class=n>addon</span> <span class=ow>in</span> <span class=n>addons_manager</span><span class=o>.</span><span class=n>get_enabled_addons</span><span class=p>():</span>
        <span class=n>addon</span><span class=o>.</span><span class=n>on_host_install</span><span class=p>(</span><span class=n>host</span><span class=p>,</span> <span class=n>host_name</span><span class=p>,</span> <span class=n>project_name</span><span class=p>)</span>

    <span class=n>install_ayon_plugins</span><span class=p>(</span><span class=n>project_name</span><span class=p>,</span> <span class=n>host_name</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.context_tools.is_installed class="doc doc-heading"> <code class="highlight language-python"><span class=n>is_installed</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>Return state of installation</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>True if installed, False otherwise</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/context_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>is_installed</span><span class=p>():</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Return state of installation</span>

<span class=sd>    Returns:</span>
<span class=sd>        True if installed, False otherwise</span>

<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=n>_is_installed</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.context_tools.is_representation_from_latest class="doc doc-heading"> <code class="highlight language-python"><span class=n>is_representation_from_latest</span><span class=p>(</span><span class=n>representation</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Return whether the representation is from latest version</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>representation</code> </td> <td> <code><span title=dict>dict</span></code> </td> <td> <div class=doc-md-description> <p>The representation document from the database.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td><code>bool</code></td> <td> </td> <td> <div class=doc-md-description> <p>Whether the representation is of latest version.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/context_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>446</span>
<span class=normal>447</span>
<span class=normal>448</span>
<span class=normal>449</span>
<span class=normal>450</span>
<span class=normal>451</span>
<span class=normal>452</span>
<span class=normal>453</span>
<span class=normal>454</span>
<span class=normal>455</span>
<span class=normal>456</span>
<span class=normal>457</span>
<span class=normal>458</span>
<span class=normal>459</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>is_representation_from_latest</span><span class=p>(</span><span class=n>representation</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Return whether the representation is from latest version</span>

<span class=sd>    Args:</span>
<span class=sd>        representation (dict): The representation document from the database.</span>

<span class=sd>    Returns:</span>
<span class=sd>        bool: Whether the representation is of latest version.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>project_name</span> <span class=o>=</span> <span class=n>get_current_project_name</span><span class=p>()</span>
    <span class=k>return</span> <span class=n>ayon_api</span><span class=o>.</span><span class=n>version_is_latest</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span> <span class=n>representation</span><span class=p>[</span><span class=s2>&quot;versionId&quot;</span><span class=p>]</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.context_tools.register_host class="doc doc-heading"> <code class="highlight language-python"><span class=n>register_host</span><span class=p>(</span><span class=n>host</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Register a new host for the current process</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>host</code> </td> <td> <code><span title=ModuleType>ModuleType</span></code> </td> <td> <div class=doc-md-description> <p>A module implementing the Host API interface. See the Host API documentation for details on what is required, or browse the source code.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/context_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span>
<span class=normal>277</span>
<span class=normal>278</span>
<span class=normal>279</span>
<span class=normal>280</span>
<span class=normal>281</span>
<span class=normal>282</span>
<span class=normal>283</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>register_host</span><span class=p>(</span><span class=n>host</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Register a new host for the current process</span>

<span class=sd>    Arguments:</span>
<span class=sd>        host (ModuleType): A module implementing the</span>
<span class=sd>            Host API interface. See the Host API</span>
<span class=sd>            documentation for details on what is</span>
<span class=sd>            required, or browse the source code.</span>

<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>_registered_host</span><span class=p>[</span><span class=s2>&quot;_&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>host</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.context_tools.register_root class="doc doc-heading"> <code class="highlight language-python"><span class=n>register_root</span><span class=p>(</span><span class=n>path</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Register currently active root</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/context_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>76</span>
<span class=normal>77</span>
<span class=normal>78</span>
<span class=normal>79</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>register_root</span><span class=p>(</span><span class=n>path</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Register currently active root&quot;&quot;&quot;</span>
    <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Registering root: </span><span class=si>%s</span><span class=s2>&quot;</span> <span class=o>%</span> <span class=n>path</span><span class=p>)</span>
    <span class=n>_registered_root</span><span class=p>[</span><span class=s2>&quot;_&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>path</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.context_tools.registered_host class="doc doc-heading"> <code class="highlight language-python"><span class=n>registered_host</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>Return currently registered host</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/context_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>286</span>
<span class=normal>287</span>
<span class=normal>288</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>registered_host</span><span class=p>():</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Return currently registered host&quot;&quot;&quot;</span>
    <span class=k>return</span> <span class=n>_registered_host</span><span class=p>[</span><span class=s2>&quot;_&quot;</span><span class=p>]</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.context_tools.registered_root class="doc doc-heading"> <code class="highlight language-python"><span class=n>registered_root</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>Return registered roots from current project anatomy.</p> <p>Consider this does return roots only for current project and current platforms, only if host was installer using 'install_host'.</p> <details class=deprecated open> <summary>Deprecated</summary> <p>Please use project 'Anatomy' to get roots. This function is still used at current core functions of load logic, but that will change in future and this function will be removed eventually. Using this function at new places can cause problems in the future.</p> </details> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> </td> <td> <div class=doc-md-description> <p>dict[str, str]: Root paths.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/context_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>82</span>
<span class=normal>83</span>
<span class=normal>84</span>
<span class=normal>85</span>
<span class=normal>86</span>
<span class=normal>87</span>
<span class=normal>88</span>
<span class=normal>89</span>
<span class=normal>90</span>
<span class=normal>91</span>
<span class=normal>92</span>
<span class=normal>93</span>
<span class=normal>94</span>
<span class=normal>95</span>
<span class=normal>96</span>
<span class=normal>97</span>
<span class=normal>98</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>registered_root</span><span class=p>():</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Return registered roots from current project anatomy.</span>

<span class=sd>    Consider this does return roots only for current project and current</span>
<span class=sd>        platforms, only if host was installer using &#39;install_host&#39;.</span>

<span class=sd>    Deprecated:</span>
<span class=sd>        Please use project &#39;Anatomy&#39; to get roots. This function is still used</span>
<span class=sd>            at current core functions of load logic, but that will change</span>
<span class=sd>            in future and this function will be removed eventually. Using this</span>
<span class=sd>            function at new places can cause problems in the future.</span>

<span class=sd>    Returns:</span>
<span class=sd>        dict[str, str]: Root paths.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=n>_registered_root</span><span class=p>[</span><span class=s2>&quot;_&quot;</span><span class=p>]</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.context_tools.uninstall_host class="doc doc-heading"> <code class="highlight language-python"><span class=n>uninstall_host</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>Undo all of what <code>install()</code> did</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/context_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>uninstall_host</span><span class=p>():</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Undo all of what `install()` did&quot;&quot;&quot;</span>
    <span class=n>host</span> <span class=o>=</span> <span class=n>registered_host</span><span class=p>()</span>

    <span class=k>try</span><span class=p>:</span>
        <span class=n>host</span><span class=o>.</span><span class=n>uninstall</span><span class=p>()</span>
    <span class=k>except</span> <span class=ne>AttributeError</span><span class=p>:</span>
        <span class=k>pass</span>

    <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Deregistering global plug-ins..&quot;</span><span class=p>)</span>
    <span class=n>pyblish</span><span class=o>.</span><span class=n>api</span><span class=o>.</span><span class=n>deregister_plugin_path</span><span class=p>(</span><span class=n>PUBLISH_PATH</span><span class=p>)</span>
    <span class=n>pyblish</span><span class=o>.</span><span class=n>api</span><span class=o>.</span><span class=n>deregister_discovery_filter</span><span class=p>(</span><span class=n>filter_pyblish_plugins</span><span class=p>)</span>
    <span class=n>deregister_loader_plugin_path</span><span class=p>(</span><span class=n>LOAD_PATH</span><span class=p>)</span>
    <span class=n>deregister_inventory_action_path</span><span class=p>(</span><span class=n>INVENTORY_PATH</span><span class=p>)</span>
    <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Global plug-ins unregistred&quot;</span><span class=p>)</span>

    <span class=n>deregister_host</span><span class=p>()</span>

    <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Successfully uninstalled Avalon!&quot;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_core.pipeline.context_tools.version_up_current_workfile class="doc doc-heading"> <code class="highlight language-python"><span class=n>version_up_current_workfile</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>Function to increment and save workfile</p> <details class=quote> <summary>Source code in <code>client/ayon_core/pipeline/context_tools.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>584</span>
<span class=normal>585</span>
<span class=normal>586</span>
<span class=normal>587</span>
<span class=normal>588</span>
<span class=normal>589</span>
<span class=normal>590</span>
<span class=normal>591</span>
<span class=normal>592</span>
<span class=normal>593</span>
<span class=normal>594</span>
<span class=normal>595</span>
<span class=normal>596</span>
<span class=normal>597</span>
<span class=normal>598</span>
<span class=normal>599</span>
<span class=normal>600</span>
<span class=normal>601</span>
<span class=normal>602</span>
<span class=normal>603</span>
<span class=normal>604</span>
<span class=normal>605</span>
<span class=normal>606</span>
<span class=normal>607</span>
<span class=normal>608</span>
<span class=normal>609</span>
<span class=normal>610</span>
<span class=normal>611</span>
<span class=normal>612</span>
<span class=normal>613</span>
<span class=normal>614</span>
<span class=normal>615</span>
<span class=normal>616</span>
<span class=normal>617</span>
<span class=normal>618</span>
<span class=normal>619</span>
<span class=normal>620</span>
<span class=normal>621</span>
<span class=normal>622</span>
<span class=normal>623</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>version_up_current_workfile</span><span class=p>():</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Function to increment and save workfile</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>host</span> <span class=o>=</span> <span class=n>registered_host</span><span class=p>()</span>

    <span class=n>project_name</span> <span class=o>=</span> <span class=n>get_current_project_name</span><span class=p>()</span>
    <span class=n>folder_path</span> <span class=o>=</span> <span class=n>get_current_folder_path</span><span class=p>()</span>
    <span class=n>task_name</span> <span class=o>=</span> <span class=n>get_current_task_name</span><span class=p>()</span>
    <span class=n>host_name</span> <span class=o>=</span> <span class=n>get_current_host_name</span><span class=p>()</span>

    <span class=n>template_key</span> <span class=o>=</span> <span class=n>get_workfile_template_key_from_context</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span>
        <span class=n>folder_path</span><span class=p>,</span>
        <span class=n>task_name</span><span class=p>,</span>
        <span class=n>host_name</span><span class=p>,</span>
    <span class=p>)</span>
    <span class=n>anatomy</span> <span class=o>=</span> <span class=n>Anatomy</span><span class=p>(</span><span class=n>project_name</span><span class=p>)</span>

    <span class=n>data</span> <span class=o>=</span> <span class=n>get_template_data_with_names</span><span class=p>(</span>
        <span class=n>project_name</span><span class=p>,</span> <span class=n>folder_path</span><span class=p>,</span> <span class=n>task_name</span><span class=p>,</span> <span class=n>host_name</span>
    <span class=p>)</span>
    <span class=n>data</span><span class=p>[</span><span class=s2>&quot;root&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>anatomy</span><span class=o>.</span><span class=n>roots</span>

    <span class=n>work_template</span> <span class=o>=</span> <span class=n>anatomy</span><span class=o>.</span><span class=n>get_template_item</span><span class=p>(</span><span class=s2>&quot;work&quot;</span><span class=p>,</span> <span class=n>template_key</span><span class=p>)</span>

    <span class=c1># Define saving file extension</span>
    <span class=n>extensions</span> <span class=o>=</span> <span class=n>host</span><span class=o>.</span><span class=n>get_workfile_extensions</span><span class=p>()</span>
    <span class=n>current_file</span> <span class=o>=</span> <span class=n>host</span><span class=o>.</span><span class=n>get_current_workfile</span><span class=p>()</span>
    <span class=k>if</span> <span class=n>current_file</span><span class=p>:</span>
        <span class=n>extensions</span> <span class=o>=</span> <span class=p>[</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>splitext</span><span class=p>(</span><span class=n>current_file</span><span class=p>)[</span><span class=o>-</span><span class=mi>1</span><span class=p>]]</span>

    <span class=n>work_root</span> <span class=o>=</span> <span class=n>work_template</span><span class=p>[</span><span class=s2>&quot;directory&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>format_strict</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
    <span class=n>file_template</span> <span class=o>=</span> <span class=n>work_template</span><span class=p>[</span><span class=s2>&quot;file&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>template</span>
    <span class=n>last_workfile_path</span> <span class=o>=</span> <span class=n>get_last_workfile</span><span class=p>(</span>
        <span class=n>work_root</span><span class=p>,</span> <span class=n>file_template</span><span class=p>,</span> <span class=n>data</span><span class=p>,</span> <span class=n>extensions</span><span class=p>,</span> <span class=kc>True</span>
    <span class=p>)</span>
    <span class=n>new_workfile_path</span> <span class=o>=</span> <span class=n>version_up</span><span class=p>(</span><span class=n>last_workfile_path</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>new_workfile_path</span><span class=p>):</span>
        <span class=n>new_workfile_path</span> <span class=o>=</span> <span class=n>version_up</span><span class=p>(</span><span class=n>new_workfile_path</span><span class=p>)</span>
    <span class=n>host</span><span class=o>.</span><span class=n>save_workfile</span><span class=p>(</span><span class=n>new_workfile_path</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../..", "features": ["navigation.sections", "navigation.path", "navigation.prune"], "search": "../../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../../../assets/javascripts/bundle.c8b220af.min.js></script> </body> </html>